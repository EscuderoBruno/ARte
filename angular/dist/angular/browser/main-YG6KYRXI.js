import{$ as Nt,$a as pa,$b as _a,A as hD,Aa as Ng,Ab as yD,B as mV,Ba as EV,Bb as gr,C as pu,Ca as TV,Cb as yo,D as Pg,Da as MV,Db as gf,E as uf,Ea as IV,Eb as vf,F as gV,Fa as BV,Fb as vc,G as dD,Ga as DV,Gb as gu,H as Au,Ha as RV,Hb as yc,I as vV,Ia as bA,Ib as UV,J as _A,Ja as wr,Jb as Qb,K as hf,Ka as PV,Kb as $1,L as fD,La as Ko,Lb as Gb,M as yV,Ma as Nb,Mb as kV,N as xV,Na as ah,Nb as Wb,O as j1,Oa as vD,Ob as jb,P as Ob,Pa as ie,Pb as xD,Q as Vl,Qa as xe,Qb as _D,R as Fb,Ra as LV,Rb as wD,S as Fo,Sa as Af,Sb as Kb,T as id,Ta as Za,Tb as zV,U as Sn,Ua as fa,Ub as VV,V as ii,Va as OV,Vb as HV,W as or,Wa as mc,Wb as yf,X as _V,Xa as Z1,Xb as QV,Y as pD,Ya as mf,Yb as SA,Z as df,Za as Le,Zb as GV,_ as Zr,_a as so,_b as WV,a as hi,aa as Vi,ab as Ub,ac as jV,b as xa,ba as K1,bb as FV,bc as ey,c as un,ca as St,cb as Dt,cc as KV,d as Db,da as sr,db as Na,dc as XV,e as Bg,ea as ta,eb as J1,ec as Zn,f as al,fa as No,fb as kb,fc as Xb,g as dV,ga as zt,gb as Lr,gc as gs,h as fV,ha as Vt,hb as Or,hc as ia,i as Rb,ia as ff,ib as L,ic as vn,j as lD,ja as AD,jb as O,jc as xf,k as cD,ka as mD,kb as ce,kc as lr,l as rh,la as wV,lb as Ls,lc as YV,m as vo,ma as Lg,mb as Os,mc as Yb,n as pV,na as bV,nb as Li,nc as bD,o as Dg,oa as wA,ob as zb,oc as qV,p as xA,pa as nh,pb as ye,pc as qb,q as jo,qa as pf,qb as it,r as ar,ra as SV,rb as Vb,s as W1,sa as X1,sb as gc,t as Pb,ta as CV,tb as Q,u as AV,ua as mu,ub as We,v as qr,va as gD,vb as _n,w as Rg,wa as Y1,wb as Ug,x as zl,xa as Og,xb as Hb,y as uD,ya as q1,yb as Hl,z as Lb,za as Fg,zb as NV}from"./chunk-A5XIE2GW.js";var zre=un((TMt,kre)=>{"use strict";kre.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Bp=un(Xm=>{"use strict";var J4,wRe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xm.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Xm.getSymbolTotalCodewords=function(e){return wRe[e]};Xm.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};Xm.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');J4=e};Xm.isKanjiModeEnabled=function(){return typeof J4<"u"};Xm.toSJIS=function(e){return J4(e)}});var _M=un(Xc=>{"use strict";Xc.L={bit:1};Xc.M={bit:0};Xc.Q={bit:3};Xc.H={bit:2};function bRe(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return Xc.L;case"m":case"medium":return Xc.M;case"q":case"quartile":return Xc.Q;case"h":case"high":return Xc.H;default:throw new Error("Unknown EC Level: "+i)}}Xc.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Xc.from=function(e,t){if(Xc.isValid(e))return e;try{return bRe(e)}catch{return t}}});var Qre=un((BMt,Hre)=>{"use strict";function Vre(){this.buffer=[],this.length=0}Vre.prototype={get:function(i){let e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let t=0;t<e;t++)this.putBit((i>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};Hre.exports=Vre});var Wre=un((DMt,Gre)=>{"use strict";function nw(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}nw.prototype.set=function(i,e,t,r){let n=i*this.size+e;this.data[n]=t,r&&(this.reservedBit[n]=!0)};nw.prototype.get=function(i,e){return this.data[i*this.size+e]};nw.prototype.xor=function(i,e,t){this.data[i*this.size+e]^=t};nw.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};Gre.exports=nw});var jre=un(wM=>{"use strict";var SRe=Bp().getSymbolSize;wM.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=SRe(e),n=r===145?26:Math.ceil((r-13)/(2*t-2))*2,a=[r-7];for(let o=1;o<t-1;o++)a[o]=a[o-1]-n;return a.push(6),a.reverse()};wM.getPositions=function(e){let t=[],r=wM.getRowColCoords(e),n=r.length;for(let a=0;a<n;a++)for(let o=0;o<n;o++)a===0&&o===0||a===0&&o===n-1||a===n-1&&o===0||t.push([r[a],r[o]]);return t}});var Yre=un(Xre=>{"use strict";var CRe=Bp().getSymbolSize,Kre=7;Xre.getPositions=function(e){let t=CRe(e);return[[0,0],[t-Kre,0],[0,t-Kre]]}});var qre=un(la=>{"use strict";la.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Ym={N1:3,N2:3,N3:40,N4:10};la.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};la.from=function(e){return la.isValid(e)?parseInt(e,10):void 0};la.getPenaltyN1=function(e){let t=e.size,r=0,n=0,a=0,o=null,s=null;for(let l=0;l<t;l++){n=a=0,o=s=null;for(let c=0;c<t;c++){let u=e.get(l,c);u===o?n++:(n>=5&&(r+=Ym.N1+(n-5)),o=u,n=1),u=e.get(c,l),u===s?a++:(a>=5&&(r+=Ym.N1+(a-5)),s=u,a=1)}n>=5&&(r+=Ym.N1+(n-5)),a>=5&&(r+=Ym.N1+(a-5))}return r};la.getPenaltyN2=function(e){let t=e.size,r=0;for(let n=0;n<t-1;n++)for(let a=0;a<t-1;a++){let o=e.get(n,a)+e.get(n,a+1)+e.get(n+1,a)+e.get(n+1,a+1);(o===4||o===0)&&r++}return r*Ym.N2};la.getPenaltyN3=function(e){let t=e.size,r=0,n=0,a=0;for(let o=0;o<t;o++){n=a=0;for(let s=0;s<t;s++)n=n<<1&2047|e.get(o,s),s>=10&&(n===1488||n===93)&&r++,a=a<<1&2047|e.get(s,o),s>=10&&(a===1488||a===93)&&r++}return r*Ym.N3};la.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let a=0;a<r;a++)t+=e.data[a];return Math.abs(Math.ceil(t*100/r/5)-10)*Ym.N4};function ERe(i,e,t){switch(i){case la.Patterns.PATTERN000:return(e+t)%2===0;case la.Patterns.PATTERN001:return e%2===0;case la.Patterns.PATTERN010:return t%3===0;case la.Patterns.PATTERN011:return(e+t)%3===0;case la.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case la.Patterns.PATTERN101:return e*t%2+e*t%3===0;case la.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case la.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}la.applyMask=function(e,t){let r=t.size;for(let n=0;n<r;n++)for(let a=0;a<r;a++)t.isReserved(a,n)||t.xor(a,n,ERe(e,a,n))};la.getBestMask=function(e,t){let r=Object.keys(la.Patterns).length,n=0,a=1/0;for(let o=0;o<r;o++){t(o),la.applyMask(o,e);let s=la.getPenaltyN1(e)+la.getPenaltyN2(e)+la.getPenaltyN3(e)+la.getPenaltyN4(e);la.applyMask(o,e),s<a&&(a=s,n=o)}return n}});var ek=un($4=>{"use strict";var Dp=_M(),bM=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],SM=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$4.getBlocksCount=function(e,t){switch(t){case Dp.L:return bM[(e-1)*4+0];case Dp.M:return bM[(e-1)*4+1];case Dp.Q:return bM[(e-1)*4+2];case Dp.H:return bM[(e-1)*4+3];default:return}};$4.getTotalCodewordsCount=function(e,t){switch(t){case Dp.L:return SM[(e-1)*4+0];case Dp.M:return SM[(e-1)*4+1];case Dp.Q:return SM[(e-1)*4+2];case Dp.H:return SM[(e-1)*4+3];default:return}}});var Zre=un(EM=>{"use strict";var aw=new Uint8Array(512),CM=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)aw[t]=e,CM[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)aw[t]=aw[t-255]})();EM.log=function(e){if(e<1)throw new Error("log("+e+")");return CM[e]};EM.exp=function(e){return aw[e]};EM.mul=function(e,t){return e===0||t===0?0:aw[CM[e]+CM[t]]}});var Jre=un(ow=>{"use strict";var tk=Zre();ow.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let a=0;a<t.length;a++)r[n+a]^=tk.mul(e[n],t[a]);return r};ow.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let n=r[0];for(let o=0;o<t.length;o++)r[o]^=tk.mul(t[o],n);let a=0;for(;a<r.length&&r[a]===0;)a++;r=r.slice(a)}return r};ow.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=ow.mul(t,new Uint8Array([1,tk.exp(r)]));return t}});var tne=un((UMt,ene)=>{"use strict";var $re=Jre();function ik(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}ik.prototype.initialize=function(e){this.degree=e,this.genPoly=$re.generateECPolynomial(this.degree)};ik.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=$re.mod(t,this.genPoly),n=this.degree-r.length;if(n>0){let a=new Uint8Array(this.degree);return a.set(r,n),a}return r};ene.exports=ik});var rk=un(ine=>{"use strict";ine.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var nk=un(Dd=>{"use strict";var rne="[0-9]+",TRe="[A-Z $%*+\\-./:]+",sw="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";sw=sw.replace(/u/g,"\\u");var MRe="(?:(?![A-Z0-9 $%*+\\-./:]|"+sw+`)(?:.|[\r
]))+`;Dd.KANJI=new RegExp(sw,"g");Dd.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Dd.BYTE=new RegExp(MRe,"g");Dd.NUMERIC=new RegExp(rne,"g");Dd.ALPHANUMERIC=new RegExp(TRe,"g");var IRe=new RegExp("^"+sw+"$"),BRe=new RegExp("^"+rne+"$"),DRe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Dd.testKanji=function(e){return IRe.test(e)};Dd.testNumeric=function(e){return BRe.test(e)};Dd.testAlphanumeric=function(e){return DRe.test(e)}});var Rp=un(ho=>{"use strict";var RRe=rk(),ak=nk();ho.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};ho.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};ho.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};ho.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};ho.MIXED={bit:-1};ho.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!RRe.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};ho.getBestModeForData=function(e){return ak.testNumeric(e)?ho.NUMERIC:ak.testAlphanumeric(e)?ho.ALPHANUMERIC:ak.testKanji(e)?ho.KANJI:ho.BYTE};ho.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};ho.isValid=function(e){return e&&e.bit&&e.ccBits};function PRe(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return ho.NUMERIC;case"alphanumeric":return ho.ALPHANUMERIC;case"kanji":return ho.KANJI;case"byte":return ho.BYTE;default:throw new Error("Unknown mode: "+i)}}ho.from=function(e,t){if(ho.isValid(e))return e;try{return PRe(e)}catch{return t}}});var lne=un(qm=>{"use strict";var TM=Bp(),LRe=ek(),nne=_M(),Pp=Rp(),ok=rk(),one=7973,ane=TM.getBCHDigit(one);function ORe(i,e,t){for(let r=1;r<=40;r++)if(e<=qm.getCapacity(r,t,i))return r}function sne(i,e){return Pp.getCharCountIndicator(i,e)+4}function FRe(i,e){let t=0;return i.forEach(function(r){let n=sne(r.mode,e);t+=n+r.getBitsLength()}),t}function NRe(i,e){for(let t=1;t<=40;t++)if(FRe(i,t)<=qm.getCapacity(t,e,Pp.MIXED))return t}qm.from=function(e,t){return ok.isValid(e)?parseInt(e,10):t};qm.getCapacity=function(e,t,r){if(!ok.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Pp.BYTE);let n=TM.getSymbolTotalCodewords(e),a=LRe.getTotalCodewordsCount(e,t),o=(n-a)*8;if(r===Pp.MIXED)return o;let s=o-sne(r,e);switch(r){case Pp.NUMERIC:return Math.floor(s/10*3);case Pp.ALPHANUMERIC:return Math.floor(s/11*2);case Pp.KANJI:return Math.floor(s/13);case Pp.BYTE:default:return Math.floor(s/8)}};qm.getBestVersionForData=function(e,t){let r,n=nne.from(t,nne.M);if(Array.isArray(e)){if(e.length>1)return NRe(e,n);if(e.length===0)return 1;r=e[0]}else r=e;return ORe(r.mode,r.getLength(),n)};qm.getEncodedBits=function(e){if(!ok.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;TM.getBCHDigit(t)-ane>=0;)t^=one<<TM.getBCHDigit(t)-ane;return e<<12|t}});var dne=un(hne=>{"use strict";var sk=Bp(),une=1335,URe=21522,cne=sk.getBCHDigit(une);hne.getEncodedBits=function(e,t){let r=e.bit<<3|t,n=r<<10;for(;sk.getBCHDigit(n)-cne>=0;)n^=une<<sk.getBCHDigit(n)-cne;return(r<<10|n)^URe}});var pne=un((GMt,fne)=>{"use strict";var kRe=Rp();function Nv(i){this.mode=kRe.NUMERIC,this.data=i.toString()}Nv.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Nv.prototype.getLength=function(){return this.data.length};Nv.prototype.getBitsLength=function(){return Nv.getBitsLength(this.data.length)};Nv.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);let a=this.data.length-t;a>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,a*3+1))};fne.exports=Nv});var mne=un((WMt,Ane)=>{"use strict";var zRe=Rp(),lk=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Uv(i){this.mode=zRe.ALPHANUMERIC,this.data=i}Uv.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Uv.prototype.getLength=function(){return this.data.length};Uv.prototype.getBitsLength=function(){return Uv.getBitsLength(this.data.length)};Uv.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=lk.indexOf(this.data[t])*45;r+=lk.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(lk.indexOf(this.data[t]),6)};Ane.exports=Uv});var vne=un((jMt,gne)=>{"use strict";gne.exports=function(e){for(var t=[],r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);if(a>=55296&&a<=56319&&r>n+1){var o=e.charCodeAt(n+1);o>=56320&&o<=57343&&(a=(a-55296)*1024+o-56320+65536,n+=1)}if(a<128){t.push(a);continue}if(a<2048){t.push(a>>6|192),t.push(a&63|128);continue}if(a<55296||a>=57344&&a<65536){t.push(a>>12|224),t.push(a>>6&63|128),t.push(a&63|128);continue}if(a>=65536&&a<=1114111){t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var xne=un((KMt,yne)=>{"use strict";var VRe=vne(),HRe=Rp();function kv(i){this.mode=HRe.BYTE,typeof i=="string"&&(i=VRe(i)),this.data=new Uint8Array(i)}kv.getBitsLength=function(e){return e*8};kv.prototype.getLength=function(){return this.data.length};kv.prototype.getBitsLength=function(){return kv.getBitsLength(this.data.length)};kv.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)};yne.exports=kv});var wne=un((XMt,_ne)=>{"use strict";var QRe=Rp(),GRe=Bp();function zv(i){this.mode=QRe.KANJI,this.data=i}zv.getBitsLength=function(e){return e*13};zv.prototype.getLength=function(){return this.data.length};zv.prototype.getBitsLength=function(){return zv.getBitsLength(this.data.length)};zv.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let t=GRe.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),i.put(t,13)}};_ne.exports=zv});var bne=un((YMt,ck)=>{"use strict";var lw={single_source_shortest_paths:function(i,e,t){var r={},n={};n[e]=0;var a=lw.PriorityQueue.make();a.push(e,0);for(var o,s,l,c,u,h,d,f,m;!a.empty();){o=a.pop(),s=o.value,c=o.cost,u=i[s]||{};for(l in u)u.hasOwnProperty(l)&&(h=u[l],d=c+h,f=n[l],m=typeof n[l]>"u",(m||f>d)&&(n[l]=d,a.push(l,d),r[l]=s))}if(typeof t<"u"&&typeof n[t]>"u"){var y=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(y)}return r},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],r=e,n;r;)t.push(r),n=i[r],r=i[r];return t.reverse(),t},find_path:function(i,e,t){var r=lw.single_source_shortest_paths(i,e,t);return lw.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(i){var e=lw.PriorityQueue,t={},r;i=i||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof ck<"u"&&(ck.exports=lw)});var Dne=un(Vv=>{"use strict";var Rn=Rp(),Ene=pne(),Tne=mne(),Mne=xne(),Ine=wne(),cw=nk(),MM=Bp(),WRe=bne();function Sne(i){return unescape(encodeURIComponent(i)).length}function uw(i,e,t){let r=[],n;for(;(n=i.exec(t))!==null;)r.push({data:n[0],index:n.index,mode:e,length:n[0].length});return r}function Bne(i){let e=uw(cw.NUMERIC,Rn.NUMERIC,i),t=uw(cw.ALPHANUMERIC,Rn.ALPHANUMERIC,i),r,n;return MM.isKanjiModeEnabled()?(r=uw(cw.BYTE,Rn.BYTE,i),n=uw(cw.KANJI,Rn.KANJI,i)):(r=uw(cw.BYTE_KANJI,Rn.BYTE,i),n=[]),e.concat(t,r,n).sort(function(o,s){return o.index-s.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function uk(i,e){switch(e){case Rn.NUMERIC:return Ene.getBitsLength(i);case Rn.ALPHANUMERIC:return Tne.getBitsLength(i);case Rn.KANJI:return Ine.getBitsLength(i);case Rn.BYTE:return Mne.getBitsLength(i)}}function jRe(i){return i.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function KRe(i){let e=[];for(let t=0;t<i.length;t++){let r=i[t];switch(r.mode){case Rn.NUMERIC:e.push([r,{data:r.data,mode:Rn.ALPHANUMERIC,length:r.length},{data:r.data,mode:Rn.BYTE,length:r.length}]);break;case Rn.ALPHANUMERIC:e.push([r,{data:r.data,mode:Rn.BYTE,length:r.length}]);break;case Rn.KANJI:e.push([r,{data:r.data,mode:Rn.BYTE,length:Sne(r.data)}]);break;case Rn.BYTE:e.push([{data:r.data,mode:Rn.BYTE,length:Sne(r.data)}])}}return e}function XRe(i,e){let t={},r={start:{}},n=["start"];for(let a=0;a<i.length;a++){let o=i[a],s=[];for(let l=0;l<o.length;l++){let c=o[l],u=""+a+l;s.push(u),t[u]={node:c,lastCount:0},r[u]={};for(let h=0;h<n.length;h++){let d=n[h];t[d]&&t[d].node.mode===c.mode?(r[d][u]=uk(t[d].lastCount+c.length,c.mode)-uk(t[d].lastCount,c.mode),t[d].lastCount+=c.length):(t[d]&&(t[d].lastCount=c.length),r[d][u]=uk(c.length,c.mode)+4+Rn.getCharCountIndicator(c.mode,e))}}n=s}for(let a=0;a<n.length;a++)r[n[a]].end=0;return{map:r,table:t}}function Cne(i,e){let t,r=Rn.getBestModeForData(i);if(t=Rn.from(e,r),t!==Rn.BYTE&&t.bit<r.bit)throw new Error('"'+i+'" cannot be encoded with mode '+Rn.toString(t)+`.
 Suggested mode is: `+Rn.toString(r));switch(t===Rn.KANJI&&!MM.isKanjiModeEnabled()&&(t=Rn.BYTE),t){case Rn.NUMERIC:return new Ene(i);case Rn.ALPHANUMERIC:return new Tne(i);case Rn.KANJI:return new Ine(i);case Rn.BYTE:return new Mne(i)}}Vv.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(Cne(r,null)):r.data&&t.push(Cne(r.data,r.mode)),t},[])};Vv.fromString=function(e,t){let r=Bne(e,MM.isKanjiModeEnabled()),n=KRe(r),a=XRe(n,t),o=WRe.find_path(a.map,"start","end"),s=[];for(let l=1;l<o.length-1;l++)s.push(a.table[o[l]].node);return Vv.fromArray(jRe(s))};Vv.rawSplit=function(e){return Vv.fromArray(Bne(e,MM.isKanjiModeEnabled()))}});var Pne=un(Rne=>{"use strict";var BM=Bp(),hk=_M(),YRe=Qre(),qRe=Wre(),ZRe=jre(),JRe=Yre(),pk=qre(),Ak=ek(),$Re=tne(),IM=lne(),ePe=dne(),tPe=Rp(),dk=Dne();function iPe(i,e){let t=i.size,r=JRe.getPositions(e);for(let n=0;n<r.length;n++){let a=r[n][0],o=r[n][1];for(let s=-1;s<=7;s++)if(!(a+s<=-1||t<=a+s))for(let l=-1;l<=7;l++)o+l<=-1||t<=o+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?i.set(a+s,o+l,!0,!0):i.set(a+s,o+l,!1,!0))}}function rPe(i){let e=i.size;for(let t=8;t<e-8;t++){let r=t%2===0;i.set(t,6,r,!0),i.set(6,t,r,!0)}}function nPe(i,e){let t=ZRe.getPositions(e);for(let r=0;r<t.length;r++){let n=t[r][0],a=t[r][1];for(let o=-2;o<=2;o++)for(let s=-2;s<=2;s++)o===-2||o===2||s===-2||s===2||o===0&&s===0?i.set(n+o,a+s,!0,!0):i.set(n+o,a+s,!1,!0)}}function aPe(i,e){let t=i.size,r=IM.getEncodedBits(e),n,a,o;for(let s=0;s<18;s++)n=Math.floor(s/3),a=s%3+t-8-3,o=(r>>s&1)===1,i.set(n,a,o,!0),i.set(a,n,o,!0)}function fk(i,e,t){let r=i.size,n=ePe.getEncodedBits(e,t),a,o;for(a=0;a<15;a++)o=(n>>a&1)===1,a<6?i.set(a,8,o,!0):a<8?i.set(a+1,8,o,!0):i.set(r-15+a,8,o,!0),a<8?i.set(8,r-a-1,o,!0):a<9?i.set(8,15-a-1+1,o,!0):i.set(8,15-a-1,o,!0);i.set(r-8,8,1,!0)}function oPe(i,e){let t=i.size,r=-1,n=t-1,a=7,o=0;for(let s=t-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!i.isReserved(n,s-l)){let c=!1;o<e.length&&(c=(e[o]>>>a&1)===1),i.set(n,s-l,c),a--,a===-1&&(o++,a=7)}if(n+=r,n<0||t<=n){n-=r,r=-r;break}}}function sPe(i,e,t){let r=new YRe;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),tPe.getCharCountIndicator(l.mode,i)),l.write(r)});let n=BM.getSymbolTotalCodewords(i),a=Ak.getTotalCodewordsCount(i,e),o=(n-a)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let s=(o-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return lPe(r,i,e)}function lPe(i,e,t){let r=BM.getSymbolTotalCodewords(e),n=Ak.getTotalCodewordsCount(e,t),a=r-n,o=Ak.getBlocksCount(e,t),s=r%o,l=o-s,c=Math.floor(r/o),u=Math.floor(a/o),h=u+1,d=c-u,f=new $Re(d),m=0,y=new Array(o),g=new Array(o),x=0,b=new Uint8Array(i.buffer);for(let F=0;F<o;F++){let H=F<l?u:h;y[F]=b.slice(m,m+H),g[F]=f.encode(y[F]),m+=H,x=Math.max(x,H)}let S=new Uint8Array(r),E=0,D,B;for(D=0;D<x;D++)for(B=0;B<o;B++)D<y[B].length&&(S[E++]=y[B][D]);for(D=0;D<d;D++)for(B=0;B<o;B++)S[E++]=g[B][D];return S}function cPe(i,e,t,r){let n;if(Array.isArray(i))n=dk.fromArray(i);else if(typeof i=="string"){let c=e;if(!c){let u=dk.rawSplit(i);c=IM.getBestVersionForData(u,t)}n=dk.fromString(i,c||40)}else throw new Error("Invalid data");let a=IM.getBestVersionForData(n,t);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);let o=sPe(e,t,n),s=BM.getSymbolSize(e),l=new qRe(s);return iPe(l,e),rPe(l),nPe(l,e),fk(l,t,0),e>=7&&aPe(l,e),oPe(l,o),isNaN(r)&&(r=pk.getBestMask(l,fk.bind(null,l,t))),pk.applyMask(r,l),fk(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:n}}Rne.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=hk.M,n,a;return typeof t<"u"&&(r=hk.from(t.errorCorrectionLevel,hk.M),n=IM.from(t.version),a=pk.from(t.maskPattern),t.toSJISFunc&&BM.setToSJISFunction(t.toSJISFunc)),cPe(e,n,r,a)}});var mk=un(Zm=>{"use strict";function Lne(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}Zm.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:Lne(e.color.dark||"#000000ff"),light:Lne(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Zm.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};Zm.getImageWidth=function(e,t){let r=Zm.getScale(e,t);return Math.floor((e+t.margin*2)*r)};Zm.qrToImageData=function(e,t,r){let n=t.modules.size,a=t.modules.data,o=Zm.getScale(n,r),s=Math.floor((n+r.margin*2)*o),l=r.margin*o,c=[r.color.light,r.color.dark];for(let u=0;u<s;u++)for(let h=0;h<s;h++){let d=(u*s+h)*4,f=r.color.light;if(u>=l&&h>=l&&u<s-l&&h<s-l){let m=Math.floor((u-l)/o),y=Math.floor((h-l)/o);f=c[a[m*n+y]?1:0]}e[d++]=f.r,e[d++]=f.g,e[d++]=f.b,e[d]=f.a}}});var One=un(DM=>{"use strict";var gk=mk();function uPe(i,e,t){i.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function hPe(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}DM.render=function(e,t,r){let n=r,a=t;typeof n>"u"&&(!t||!t.getContext)&&(n=t,t=void 0),t||(a=hPe()),n=gk.getOptions(n);let o=gk.getImageWidth(e.modules.size,n),s=a.getContext("2d"),l=s.createImageData(o,o);return gk.qrToImageData(l.data,e,n),uPe(s,a,o),s.putImageData(l,0,0),a};DM.renderToDataURL=function(e,t,r){let n=r;typeof n>"u"&&(!t||!t.getContext)&&(n=t,t=void 0),n||(n={});let a=DM.render(e,t,n),o=n.type||"image/png",s=n.rendererOpts||{};return a.toDataURL(o,s.quality)}});var Une=un(Nne=>{"use strict";var dPe=mk();function Fne(i,e){let t=i.a/255,r=e+'="'+i.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function vk(i,e,t){let r=i+e;return typeof t<"u"&&(r+=" "+t),r}function fPe(i,e,t){let r="",n=0,a=!1,o=0;for(let s=0;s<i.length;s++){let l=Math.floor(s%e),c=Math.floor(s/e);!l&&!a&&(a=!0),i[s]?(o++,s>0&&l>0&&i[s-1]||(r+=a?vk("M",l+t,.5+c+t):vk("m",n,0),n=0,a=!1),l+1<e&&i[s+1]||(r+=vk("h",o),o=0)):n++}return r}Nne.render=function(e,t,r){let n=dPe.getOptions(t),a=e.modules.size,o=e.modules.data,s=a+n.margin*2,l=n.color.light.a?"<path "+Fne(n.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",c="<path "+Fne(n.color.dark,"stroke")+' d="'+fPe(o,a,n.margin)+'"/>',u='viewBox="0 0 '+s+" "+s+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,d),d}});var zne=un(hw=>{"use strict";var pPe=zre(),yk=Pne(),kne=One(),APe=Une();function xk(i,e,t,r,n){let a=[].slice.call(arguments,1),o=a.length,s=typeof a[o-1]=="function";if(!s&&!pPe())throw new Error("Callback required as last argument");if(s){if(o<2)throw new Error("Too few arguments provided");o===2?(n=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof n>"u"?(n=r,r=void 0):(n=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,c){try{let u=yk.create(t,r);l(i(u,e,r))}catch(u){c(u)}})}try{let l=yk.create(t,r);n(null,i(l,e,r))}catch(l){n(l)}}hw.create=yk.create;hw.toCanvas=xk.bind(null,kne.render);hw.toDataURL=xk.bind(null,kne.renderToDataURL);hw.toString=xk.bind(null,function(i,e,t){return APe.render(i,t)})});var ole=un((iB,ale)=>{"use strict";(function(i,e){typeof iB=="object"&&typeof ale<"u"?e(iB):typeof define=="function"&&define.amd?define(["exports"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.ZXing={}))})(iB,function(i){"use strict";function e(V){return V==null}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,p){V.__proto__=p}||function(V,p){for(var A in p)p.hasOwnProperty(A)&&(V[A]=p[A])};function r(V,p){t(V,p);function A(){this.constructor=V}V.prototype=p===null?Object.create(p):(A.prototype=p.prototype,new A)}function n(V,p){var A=Object.setPrototypeOf;A?A(V,p):V.__proto__=p}function a(V,p){p===void 0&&(p=V.constructor);var A=Error.captureStackTrace;A&&A(V,p)}var o=function(V){r(p,V);function p(A){var v=this.constructor,_=V.call(this,A)||this;return Object.defineProperty(_,"name",{value:v.name,enumerable:!1}),n(_,v.prototype),a(_),_}return p}(Error);let s=(()=>{class V extends o{constructor(A=void 0){super(A),this.message=A}getKind(){return this.constructor.kind}}return V.kind="Exception",V})(),l=(()=>{class V extends s{}return V.kind="ArgumentException",V})(),c=(()=>{class V extends s{}return V.kind="IllegalArgumentException",V})();class u{constructor(p){if(this.binarizer=p,p===null)throw new c("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(p,A){return this.binarizer.getBlackRow(p,A)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(p,A,v,_){let w=this.binarizer.getLuminanceSource().crop(p,A,v,_);return new u(this.binarizer.createBinarizer(w))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let p=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new u(this.binarizer.createBinarizer(p))}rotateCounterClockwise45(){let p=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new u(this.binarizer.createBinarizer(p))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let h=(()=>{class V extends s{static getChecksumInstance(){return new V}}return V.kind="ChecksumException",V})();class d{constructor(p){this.source=p}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class f{static arraycopy(p,A,v,_,w){for(;w--;)v[_++]=p[A++]}static currentTimeMillis(){return Date.now()}}let m=(()=>{class V extends s{}return V.kind="IndexOutOfBoundsException",V})(),y=(()=>{class V extends m{constructor(A=void 0,v=void 0){super(v),this.index=A,this.message=v}}return V.kind="ArrayIndexOutOfBoundsException",V})();class g{static fill(p,A){for(let v=0,_=p.length;v<_;v++)p[v]=A}static fillWithin(p,A,v,_){g.rangeCheck(p.length,A,v);for(let w=A;w<v;w++)p[w]=_}static rangeCheck(p,A,v){if(A>v)throw new c("fromIndex("+A+") > toIndex("+v+")");if(A<0)throw new y(A);if(v>p)throw new y(v)}static asList(...p){return p}static create(p,A,v){return Array.from({length:p}).map(w=>Array.from({length:A}).fill(v))}static createInt32Array(p,A,v){return Array.from({length:p}).map(w=>Int32Array.from({length:A}).fill(v))}static equals(p,A){if(!p||!A||!p.length||!A.length||p.length!==A.length)return!1;for(let v=0,_=p.length;v<_;v++)if(p[v]!==A[v])return!1;return!0}static hashCode(p){if(p===null)return 0;let A=1;for(let v of p)A=31*A+v;return A}static fillUint8Array(p,A){for(let v=0;v!==p.length;v++)p[v]=A}static copyOf(p,A){return p.slice(0,A)}static copyOfUint8Array(p,A){if(p.length<=A){let v=new Uint8Array(A);return v.set(p),v}return p.slice(0,A)}static copyOfRange(p,A,v){let _=v-A,w=new Int32Array(_);return f.arraycopy(p,A,w,0,_),w}static binarySearch(p,A,v){v===void 0&&(v=g.numberComparator);let _=0,w=p.length-1;for(;_<=w;){let C=w+_>>1,T=v(A,p[C]);if(T>0)_=C+1;else if(T<0)w=C-1;else return C}return-_-1}static numberComparator(p,A){return p-A}}class x{static numberOfTrailingZeros(p){let A;if(p===0)return 32;let v=31;return A=p<<16,A!==0&&(v-=16,p=A),A=p<<8,A!==0&&(v-=8,p=A),A=p<<4,A!==0&&(v-=4,p=A),A=p<<2,A!==0&&(v-=2,p=A),v-(p<<1>>>31)}static numberOfLeadingZeros(p){if(p===0)return 32;let A=1;return p>>>16||(A+=16,p<<=16),p>>>24||(A+=8,p<<=8),p>>>28||(A+=4,p<<=4),p>>>30||(A+=2,p<<=2),A-=p>>>31,A}static toHexString(p){return p.toString(16)}static toBinaryString(p){return String(parseInt(String(p),2))}static bitCount(p){return p=p-(p>>>1&1431655765),p=(p&858993459)+(p>>>2&858993459),p=p+(p>>>4)&252645135,p=p+(p>>>8),p=p+(p>>>16),p&63}static truncDivision(p,A){return Math.trunc(p/A)}static parseInt(p,A=void 0){return parseInt(p,A)}}x.MIN_VALUE_32_BITS=-2147483648,x.MAX_VALUE=Number.MAX_SAFE_INTEGER;class b{constructor(p,A){p===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=p,A==null?this.bits=b.makeArray(p):this.bits=A)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(p){if(p>this.bits.length*32){let A=b.makeArray(p);f.arraycopy(this.bits,0,A,0,this.bits.length),this.bits=A}}get(p){return(this.bits[Math.floor(p/32)]&1<<(p&31))!==0}set(p){this.bits[Math.floor(p/32)]|=1<<(p&31)}flip(p){this.bits[Math.floor(p/32)]^=1<<(p&31)}getNextSet(p){let A=this.size;if(p>=A)return A;let v=this.bits,_=Math.floor(p/32),w=v[_];w&=~((1<<(p&31))-1);let C=v.length;for(;w===0;){if(++_===C)return A;w=v[_]}let T=_*32+x.numberOfTrailingZeros(w);return T>A?A:T}getNextUnset(p){let A=this.size;if(p>=A)return A;let v=this.bits,_=Math.floor(p/32),w=~v[_];w&=~((1<<(p&31))-1);let C=v.length;for(;w===0;){if(++_===C)return A;w=~v[_]}let T=_*32+x.numberOfTrailingZeros(w);return T>A?A:T}setBulk(p,A){this.bits[Math.floor(p/32)]=A}setRange(p,A){if(A<p||p<0||A>this.size)throw new c;if(A===p)return;A--;let v=Math.floor(p/32),_=Math.floor(A/32),w=this.bits;for(let C=v;C<=_;C++){let T=C>v?0:p&31,z=(2<<(C<_?31:A&31))-(1<<T);w[C]|=z}}clear(){let p=this.bits.length,A=this.bits;for(let v=0;v<p;v++)A[v]=0}isRange(p,A,v){if(A<p||p<0||A>this.size)throw new c;if(A===p)return!0;A--;let _=Math.floor(p/32),w=Math.floor(A/32),C=this.bits;for(let T=_;T<=w;T++){let N=T>_?0:p&31,K=(2<<(T<w?31:A&31))-(1<<N)&4294967295;if((C[T]&K)!==(v?K:0))return!1}return!0}appendBit(p){this.ensureCapacity(this.size+1),p&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(p,A){if(A<0||A>32)throw new c("Num bits must be between 0 and 32");this.ensureCapacity(this.size+A);for(let v=A;v>0;v--)this.appendBit((p>>v-1&1)===1)}appendBitArray(p){let A=p.size;this.ensureCapacity(this.size+A);for(let v=0;v<A;v++)this.appendBit(p.get(v))}xor(p){if(this.size!==p.size)throw new c("Sizes don't match");let A=this.bits;for(let v=0,_=A.length;v<_;v++)A[v]^=p.bits[v]}toBytes(p,A,v,_){for(let w=0;w<_;w++){let C=0;for(let T=0;T<8;T++)this.get(p)&&(C|=1<<7-T),p++;A[v+w]=C}}getBitArray(){return this.bits}reverse(){let p=new Int32Array(this.bits.length),A=Math.floor((this.size-1)/32),v=A+1,_=this.bits;for(let w=0;w<v;w++){let C=_[w];C=C>>1&1431655765|(C&1431655765)<<1,C=C>>2&858993459|(C&858993459)<<2,C=C>>4&252645135|(C&252645135)<<4,C=C>>8&16711935|(C&16711935)<<8,C=C>>16&65535|(C&65535)<<16,p[A-w]=C}if(this.size!==v*32){let w=v*32-this.size,C=p[0]>>>w;for(let T=1;T<v;T++){let N=p[T];C|=N<<32-w,p[T-1]=C,C=N>>>w}p[v-1]=C}this.bits=p}static makeArray(p){return new Int32Array(Math.floor((p+31)/32))}equals(p){if(!(p instanceof b))return!1;let A=p;return this.size===A.size&&g.equals(this.bits,A.bits)}hashCode(){return 31*this.size+g.hashCode(this.bits)}toString(){let p="";for(let A=0,v=this.size;A<v;A++)A&7||(p+=" "),p+=this.get(A)?"X":".";return p}clone(){return new b(this.size,this.bits.slice())}}var S=function(V){return V[V.OTHER=0]="OTHER",V[V.PURE_BARCODE=1]="PURE_BARCODE",V[V.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",V[V.TRY_HARDER=3]="TRY_HARDER",V[V.CHARACTER_SET=4]="CHARACTER_SET",V[V.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",V[V.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",V[V.ASSUME_GS1=7]="ASSUME_GS1",V[V.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",V[V.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",V[V.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",V}(S||{}),E=S;let D=(()=>{class V extends s{static getFormatInstance(){return new V}}return V.kind="FormatException",V})();var B=function(V){return V[V.Cp437=0]="Cp437",V[V.ISO8859_1=1]="ISO8859_1",V[V.ISO8859_2=2]="ISO8859_2",V[V.ISO8859_3=3]="ISO8859_3",V[V.ISO8859_4=4]="ISO8859_4",V[V.ISO8859_5=5]="ISO8859_5",V[V.ISO8859_6=6]="ISO8859_6",V[V.ISO8859_7=7]="ISO8859_7",V[V.ISO8859_8=8]="ISO8859_8",V[V.ISO8859_9=9]="ISO8859_9",V[V.ISO8859_10=10]="ISO8859_10",V[V.ISO8859_11=11]="ISO8859_11",V[V.ISO8859_13=12]="ISO8859_13",V[V.ISO8859_14=13]="ISO8859_14",V[V.ISO8859_15=14]="ISO8859_15",V[V.ISO8859_16=15]="ISO8859_16",V[V.SJIS=16]="SJIS",V[V.Cp1250=17]="Cp1250",V[V.Cp1251=18]="Cp1251",V[V.Cp1252=19]="Cp1252",V[V.Cp1256=20]="Cp1256",V[V.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",V[V.UTF8=22]="UTF8",V[V.ASCII=23]="ASCII",V[V.Big5=24]="Big5",V[V.GB18030=25]="GB18030",V[V.EUC_KR=26]="EUC_KR",V}(B||{});class F{constructor(p,A,v,..._){this.valueIdentifier=p,this.name=v,typeof A=="number"?this.values=Int32Array.from([A]):this.values=A,this.otherEncodingNames=_,F.VALUE_IDENTIFIER_TO_ECI.set(p,this),F.NAME_TO_ECI.set(v,this);let w=this.values;for(let C=0,T=w.length;C!==T;C++){let N=w[C];F.VALUES_TO_ECI.set(N,this)}for(let C of _)F.NAME_TO_ECI.set(C,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(p){if(p<0||p>=900)throw new D("incorect value");let A=F.VALUES_TO_ECI.get(p);if(A===void 0)throw new D("incorect value");return A}static getCharacterSetECIByName(p){let A=F.NAME_TO_ECI.get(p);if(A===void 0)throw new D("incorect value");return A}equals(p){if(!(p instanceof F))return!1;let A=p;return this.getName()===A.getName()}}F.VALUE_IDENTIFIER_TO_ECI=new Map,F.VALUES_TO_ECI=new Map,F.NAME_TO_ECI=new Map,F.Cp437=new F(B.Cp437,Int32Array.from([0,2]),"Cp437"),F.ISO8859_1=new F(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),F.ISO8859_2=new F(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),F.ISO8859_3=new F(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),F.ISO8859_4=new F(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),F.ISO8859_5=new F(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),F.ISO8859_6=new F(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),F.ISO8859_7=new F(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),F.ISO8859_8=new F(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),F.ISO8859_9=new F(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),F.ISO8859_10=new F(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),F.ISO8859_11=new F(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),F.ISO8859_13=new F(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),F.ISO8859_14=new F(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),F.ISO8859_15=new F(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),F.ISO8859_16=new F(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),F.SJIS=new F(B.SJIS,20,"SJIS","Shift_JIS"),F.Cp1250=new F(B.Cp1250,21,"Cp1250","windows-1250"),F.Cp1251=new F(B.Cp1251,22,"Cp1251","windows-1251"),F.Cp1252=new F(B.Cp1252,23,"Cp1252","windows-1252"),F.Cp1256=new F(B.Cp1256,24,"Cp1256","windows-1256"),F.UnicodeBigUnmarked=new F(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),F.UTF8=new F(B.UTF8,26,"UTF8","UTF-8"),F.ASCII=new F(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),F.Big5=new F(B.Big5,28,"Big5"),F.GB18030=new F(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),F.EUC_KR=new F(B.EUC_KR,30,"EUC_KR","EUC-KR");let H=(()=>{class V extends s{}return V.kind="UnsupportedOperationException",V})();class U{static decode(p,A){let v=this.encodingName(A);return this.customDecoder?this.customDecoder(p,v):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(v)?this.decodeFallback(p,v):new TextDecoder(v).decode(p)}static shouldDecodeOnFallback(p){return!U.isBrowser()&&p==="ISO-8859-1"}static encode(p,A){let v=this.encodingName(A);return this.customEncoder?this.customEncoder(p,v):typeof TextEncoder>"u"?this.encodeFallback(p):new TextEncoder().encode(p)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(p){return typeof p=="string"?p:p.getName()}static encodingCharacterSet(p){return p instanceof F?p:F.getCharacterSetECIByName(p)}static decodeFallback(p,A){let v=this.encodingCharacterSet(A);if(U.isDecodeFallbackSupported(v)){let _="";for(let w=0,C=p.length;w<C;w++){let T=p[w].toString(16);T.length<2&&(T="0"+T),_+="%"+T}return decodeURIComponent(_)}if(v.equals(F.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(p.buffer));throw new H(`Encoding ${this.encodingName(A)} not supported by fallback.`)}static isDecodeFallbackSupported(p){return p.equals(F.UTF8)||p.equals(F.ISO8859_1)||p.equals(F.ASCII)}static encodeFallback(p){let v=btoa(unescape(encodeURIComponent(p))).split(""),_=[];for(let w=0;w<v.length;w++)_.push(v[w].charCodeAt(0));return new Uint8Array(_)}}class k{static castAsNonUtf8Char(p,A=null){let v=A?A.getName():this.ISO88591;return U.decode(new Uint8Array([p]),v)}static guessEncoding(p,A){if(A!=null&&A.get(E.CHARACTER_SET)!==void 0)return A.get(E.CHARACTER_SET).toString();let v=p.length,_=!0,w=!0,C=!0,T=0,N=0,z=0,K=0,ee=0,oe=0,ge=0,we=0,De=0,Ue=0,Ke=0,Et=p.length>3&&p[0]===239&&p[1]===187&&p[2]===191;for(let Jt=0;Jt<v&&(_||w||C);Jt++){let ut=p[Jt]&255;C&&(T>0?ut&128?T--:C=!1:ut&128&&(ut&64?(T++,ut&32?(T++,ut&16?(T++,ut&8?C=!1:K++):z++):N++):C=!1)),_&&(ut>127&&ut<160?_=!1:ut>159&&(ut<192||ut===215||ut===247)&&Ke++),w&&(ee>0?ut<64||ut===127||ut>252?w=!1:ee--:ut===128||ut===160||ut>239?w=!1:ut>160&&ut<224?(oe++,we=0,ge++,ge>De&&(De=ge)):ut>127?(ee++,ge=0,we++,we>Ue&&(Ue=we)):(ge=0,we=0))}return C&&T>0&&(C=!1),w&&ee>0&&(w=!1),C&&(Et||N+z+K>0)?k.UTF8:w&&(k.ASSUME_SHIFT_JIS||De>=3||Ue>=3)?k.SHIFT_JIS:_&&w?De===2&&oe===2||Ke*10>=v?k.SHIFT_JIS:k.ISO88591:_?k.ISO88591:w?k.SHIFT_JIS:C?k.UTF8:k.PLATFORM_DEFAULT_ENCODING}static format(p,...A){let v=-1;function _(C,T,N,z,K,ee){if(C==="%%")return"%";if(A[++v]===void 0)return;C=z?parseInt(z.substr(1)):void 0;let oe=K?parseInt(K.substr(1)):void 0,ge;switch(ee){case"s":ge=A[v];break;case"c":ge=A[v][0];break;case"f":ge=parseFloat(A[v]).toFixed(C);break;case"p":ge=parseFloat(A[v]).toPrecision(C);break;case"e":ge=parseFloat(A[v]).toExponential(C);break;case"x":ge=parseInt(A[v]).toString(oe||16);break;case"d":ge=parseFloat(parseInt(A[v],oe||10).toPrecision(C)).toFixed(0);break}ge=typeof ge=="object"?JSON.stringify(ge):(+ge).toString(oe);let we=parseInt(N),De=N&&N[0]+""=="0"?"0":" ";for(;ge.length<we;)ge=T!==void 0?ge+De:De+ge;return ge}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(w,_)}static getBytes(p,A){return U.encode(p,A)}static getCharCode(p,A=0){return p.charCodeAt(A)}static getCharAt(p){return String.fromCharCode(p)}}k.SHIFT_JIS=F.SJIS.getName(),k.GB2312="GB2312",k.ISO88591=F.ISO8859_1.getName(),k.EUC_JP="EUC_JP",k.UTF8=F.UTF8.getName(),k.PLATFORM_DEFAULT_ENCODING=k.UTF8,k.ASSUME_SHIFT_JIS=!1;class j{constructor(p=""){this.value=p}enableDecoding(p){return this.encoding=p,this}append(p){return typeof p=="string"?this.value+=p.toString():this.encoding?this.value+=k.castAsNonUtf8Char(p,this.encoding):this.value+=String.fromCharCode(p),this}appendChars(p,A,v){for(let _=A;A<A+v;_++)this.append(p[_]);return this}length(){return this.value.length}charAt(p){return this.value.charAt(p)}deleteCharAt(p){this.value=this.value.substr(0,p)+this.value.substring(p+1)}setCharAt(p,A){this.value=this.value.substr(0,p)+A+this.value.substr(p+1)}substring(p,A){return this.value.substring(p,A)}setLengthToZero(){this.value=""}toString(){return this.value}insert(p,A){this.value=this.value.substr(0,p)+A+this.value.substr(p+A.length)}}class q{constructor(p,A,v,_){if(this.width=p,this.height=A,this.rowSize=v,this.bits=_,A==null&&(A=p),this.height=A,p<1||A<1)throw new c("Both dimensions must be greater than 0");v==null&&(v=Math.floor((p+31)/32)),this.rowSize=v,_==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(p){let A=p.length,v=p[0].length,_=new q(v,A);for(let w=0;w<A;w++){let C=p[w];for(let T=0;T<v;T++)C[T]&&_.set(T,w)}return _}static parseFromString(p,A,v){if(p===null)throw new c("stringRepresentation cannot be null");let _=new Array(p.length),w=0,C=0,T=-1,N=0,z=0;for(;z<p.length;)if(p.charAt(z)===`
`||p.charAt(z)==="\r"){if(w>C){if(T===-1)T=w-C;else if(w-C!==T)throw new c("row lengths do not match");C=w,N++}z++}else if(p.substring(z,z+A.length)===A)z+=A.length,_[w]=!0,w++;else if(p.substring(z,z+v.length)===v)z+=v.length,_[w]=!1,w++;else throw new c("illegal character encountered: "+p.substring(z));if(w>C){if(T===-1)T=w-C;else if(w-C!==T)throw new c("row lengths do not match");N++}let K=new q(T,N);for(let ee=0;ee<w;ee++)_[ee]&&K.set(Math.floor(ee%T),Math.floor(ee/T));return K}get(p,A){let v=A*this.rowSize+Math.floor(p/32);return(this.bits[v]>>>(p&31)&1)!==0}set(p,A){let v=A*this.rowSize+Math.floor(p/32);this.bits[v]|=1<<(p&31)&4294967295}unset(p,A){let v=A*this.rowSize+Math.floor(p/32);this.bits[v]&=~(1<<(p&31)&4294967295)}flip(p,A){let v=A*this.rowSize+Math.floor(p/32);this.bits[v]^=1<<(p&31)&4294967295}xor(p){if(this.width!==p.getWidth()||this.height!==p.getHeight()||this.rowSize!==p.getRowSize())throw new c("input matrix dimensions do not match");let A=new b(Math.floor(this.width/32)+1),v=this.rowSize,_=this.bits;for(let w=0,C=this.height;w<C;w++){let T=w*v,N=p.getRow(w,A).getBitArray();for(let z=0;z<v;z++)_[T+z]^=N[z]}}clear(){let p=this.bits,A=p.length;for(let v=0;v<A;v++)p[v]=0}setRegion(p,A,v,_){if(A<0||p<0)throw new c("Left and top must be nonnegative");if(_<1||v<1)throw new c("Height and width must be at least 1");let w=p+v,C=A+_;if(C>this.height||w>this.width)throw new c("The region must fit inside the matrix");let T=this.rowSize,N=this.bits;for(let z=A;z<C;z++){let K=z*T;for(let ee=p;ee<w;ee++)N[K+Math.floor(ee/32)]|=1<<(ee&31)&4294967295}}getRow(p,A){A==null||A.getSize()<this.width?A=new b(this.width):A.clear();let v=this.rowSize,_=this.bits,w=p*v;for(let C=0;C<v;C++)A.setBulk(C*32,_[w+C]);return A}setRow(p,A){f.arraycopy(A.getBitArray(),0,this.bits,p*this.rowSize,this.rowSize)}rotate180(){let p=this.getWidth(),A=this.getHeight(),v=new b(p),_=new b(p);for(let w=0,C=Math.floor((A+1)/2);w<C;w++)v=this.getRow(w,v),_=this.getRow(A-1-w,_),v.reverse(),_.reverse(),this.setRow(w,_),this.setRow(A-1-w,v)}getEnclosingRectangle(){let p=this.width,A=this.height,v=this.rowSize,_=this.bits,w=p,C=A,T=-1,N=-1;for(let z=0;z<A;z++)for(let K=0;K<v;K++){let ee=_[z*v+K];if(ee!==0){if(z<C&&(C=z),z>N&&(N=z),K*32<w){let oe=0;for(;!(ee<<31-oe&4294967295);)oe++;K*32+oe<w&&(w=K*32+oe)}if(K*32+31>T){let oe=31;for(;!(ee>>>oe);)oe--;K*32+oe>T&&(T=K*32+oe)}}}return T<w||N<C?null:Int32Array.from([w,C,T-w+1,N-C+1])}getTopLeftOnBit(){let p=this.rowSize,A=this.bits,v=0;for(;v<A.length&&A[v]===0;)v++;if(v===A.length)return null;let _=v/p,w=v%p*32,C=A[v],T=0;for(;!(C<<31-T&4294967295);)T++;return w+=T,Int32Array.from([w,_])}getBottomRightOnBit(){let p=this.rowSize,A=this.bits,v=A.length-1;for(;v>=0&&A[v]===0;)v--;if(v<0)return null;let _=Math.floor(v/p),w=Math.floor(v%p)*32,C=A[v],T=31;for(;!(C>>>T);)T--;return w+=T,Int32Array.from([w,_])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(p){if(!(p instanceof q))return!1;let A=p;return this.width===A.width&&this.height===A.height&&this.rowSize===A.rowSize&&g.equals(this.bits,A.bits)}hashCode(){let p=this.width;return p=31*p+this.width,p=31*p+this.height,p=31*p+this.rowSize,p=31*p+g.hashCode(this.bits),p}toString(p="X ",A="  ",v=`
`){return this.buildToString(p,A,v)}buildToString(p,A,v){let _=new j;for(let w=0,C=this.height;w<C;w++){for(let T=0,N=this.width;T<N;T++)_.append(this.get(T,w)?p:A);_.append(v)}return _.toString()}clone(){return new q(this.width,this.height,this.rowSize,this.bits.slice())}}let X=(()=>{class V extends s{static getNotFoundInstance(){return new V}}return V.kind="NotFoundException",V})();class Y extends d{constructor(p){super(p),this.luminances=Y.EMPTY,this.buckets=new Int32Array(Y.LUMINANCE_BUCKETS)}getBlackRow(p,A){let v=this.getLuminanceSource(),_=v.getWidth();A==null||A.getSize()<_?A=new b(_):A.clear(),this.initArrays(_);let w=v.getRow(p,this.luminances),C=this.buckets;for(let N=0;N<_;N++)C[(w[N]&255)>>Y.LUMINANCE_SHIFT]++;let T=Y.estimateBlackPoint(C);if(_<3)for(let N=0;N<_;N++)(w[N]&255)<T&&A.set(N);else{let N=w[0]&255,z=w[1]&255;for(let K=1;K<_-1;K++){let ee=w[K+1]&255;(z*4-N-ee)/2<T&&A.set(K),N=z,z=ee}}return A}getBlackMatrix(){let p=this.getLuminanceSource(),A=p.getWidth(),v=p.getHeight(),_=new q(A,v);this.initArrays(A);let w=this.buckets;for(let N=1;N<5;N++){let z=Math.floor(v*N/5),K=p.getRow(z,this.luminances),ee=Math.floor(A*4/5);for(let oe=Math.floor(A/5);oe<ee;oe++){let ge=K[oe]&255;w[ge>>Y.LUMINANCE_SHIFT]++}}let C=Y.estimateBlackPoint(w),T=p.getMatrix();for(let N=0;N<v;N++){let z=N*A;for(let K=0;K<A;K++)(T[z+K]&255)<C&&_.set(K,N)}return _}createBinarizer(p){return new Y(p)}initArrays(p){this.luminances.length<p&&(this.luminances=new Uint8ClampedArray(p));let A=this.buckets;for(let v=0;v<Y.LUMINANCE_BUCKETS;v++)A[v]=0}static estimateBlackPoint(p){let A=p.length,v=0,_=0,w=0;for(let K=0;K<A;K++)p[K]>w&&(_=K,w=p[K]),p[K]>v&&(v=p[K]);let C=0,T=0;for(let K=0;K<A;K++){let ee=K-_,oe=p[K]*ee*ee;oe>T&&(C=K,T=oe)}if(_>C){let K=_;_=C,C=K}if(C-_<=A/16)throw new X;let N=C-1,z=-1;for(let K=C-1;K>_;K--){let ee=K-_,oe=ee*ee*(C-K)*(v-p[K]);oe>z&&(N=K,z=oe)}return N<<Y.LUMINANCE_SHIFT}}Y.LUMINANCE_BITS=5,Y.LUMINANCE_SHIFT=8-Y.LUMINANCE_BITS,Y.LUMINANCE_BUCKETS=1<<Y.LUMINANCE_BITS,Y.EMPTY=Uint8ClampedArray.from([0]);class J extends Y{constructor(p){super(p),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let p=this.getLuminanceSource(),A=p.getWidth(),v=p.getHeight();if(A>=J.MINIMUM_DIMENSION&&v>=J.MINIMUM_DIMENSION){let _=p.getMatrix(),w=A>>J.BLOCK_SIZE_POWER;A&J.BLOCK_SIZE_MASK&&w++;let C=v>>J.BLOCK_SIZE_POWER;v&J.BLOCK_SIZE_MASK&&C++;let T=J.calculateBlackPoints(_,w,C,A,v),N=new q(A,v);J.calculateThresholdForBlock(_,w,C,A,v,T,N),this.matrix=N}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(p){return new J(p)}static calculateThresholdForBlock(p,A,v,_,w,C,T){let N=w-J.BLOCK_SIZE,z=_-J.BLOCK_SIZE;for(let K=0;K<v;K++){let ee=K<<J.BLOCK_SIZE_POWER;ee>N&&(ee=N);let oe=J.cap(K,2,v-3);for(let ge=0;ge<A;ge++){let we=ge<<J.BLOCK_SIZE_POWER;we>z&&(we=z);let De=J.cap(ge,2,A-3),Ue=0;for(let Et=-2;Et<=2;Et++){let Jt=C[oe+Et];Ue+=Jt[De-2]+Jt[De-1]+Jt[De]+Jt[De+1]+Jt[De+2]}let Ke=Ue/25;J.thresholdBlock(p,we,ee,Ke,_,T)}}}static cap(p,A,v){return p<A?A:p>v?v:p}static thresholdBlock(p,A,v,_,w,C){for(let T=0,N=v*w+A;T<J.BLOCK_SIZE;T++,N+=w)for(let z=0;z<J.BLOCK_SIZE;z++)(p[N+z]&255)<=_&&C.set(A+z,v+T)}static calculateBlackPoints(p,A,v,_,w){let C=w-J.BLOCK_SIZE,T=_-J.BLOCK_SIZE,N=new Array(v);for(let z=0;z<v;z++){N[z]=new Int32Array(A);let K=z<<J.BLOCK_SIZE_POWER;K>C&&(K=C);for(let ee=0;ee<A;ee++){let oe=ee<<J.BLOCK_SIZE_POWER;oe>T&&(oe=T);let ge=0,we=255,De=0;for(let Ke=0,Et=K*_+oe;Ke<J.BLOCK_SIZE;Ke++,Et+=_){for(let Jt=0;Jt<J.BLOCK_SIZE;Jt++){let ut=p[Et+Jt]&255;ge+=ut,ut<we&&(we=ut),ut>De&&(De=ut)}if(De-we>J.MIN_DYNAMIC_RANGE)for(Ke++,Et+=_;Ke<J.BLOCK_SIZE;Ke++,Et+=_)for(let Jt=0;Jt<J.BLOCK_SIZE;Jt++)ge+=p[Et+Jt]&255}let Ue=ge>>J.BLOCK_SIZE_POWER*2;if(De-we<=J.MIN_DYNAMIC_RANGE&&(Ue=we/2,z>0&&ee>0)){let Ke=(N[z-1][ee]+2*N[z][ee-1]+N[z-1][ee-1])/4;we<Ke&&(Ue=Ke)}N[z][ee]=Ue}}return N}}J.BLOCK_SIZE_POWER=3,J.BLOCK_SIZE=1<<J.BLOCK_SIZE_POWER,J.BLOCK_SIZE_MASK=J.BLOCK_SIZE-1,J.MINIMUM_DIMENSION=J.BLOCK_SIZE*5,J.MIN_DYNAMIC_RANGE=24;class te{constructor(p,A){this.width=p,this.height=A}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(p,A,v,_){throw new H("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new H("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new H("This luminance source does not support rotation by 45 degrees.")}toString(){let p=new Uint8ClampedArray(this.width),A=new j;for(let v=0;v<this.height;v++){let _=this.getRow(v,p);for(let w=0;w<this.width;w++){let C=_[w]&255,T;C<64?T="#":C<128?T="+":C<192?T=".":T=" ",A.append(T)}A.append(`
`)}return A.toString()}}class de extends te{constructor(p){super(p.getWidth(),p.getHeight()),this.delegate=p}getRow(p,A){let v=this.delegate.getRow(p,A),_=this.getWidth();for(let w=0;w<_;w++)v[w]=255-(v[w]&255);return v}getMatrix(){let p=this.delegate.getMatrix(),A=this.getWidth()*this.getHeight(),v=new Uint8ClampedArray(A);for(let _=0;_<A;_++)v[_]=255-(p[_]&255);return v}isCropSupported(){return this.delegate.isCropSupported()}crop(p,A,v,_){return new de(this.delegate.crop(p,A,v,_))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class ue extends te{constructor(p){super(p.width,p.height),this.canvas=p,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(p)}static makeBufferFromCanvasImageData(p){let A=p.getContext("2d").getImageData(0,0,p.width,p.height);return ue.toGrayscaleBuffer(A.data,p.width,p.height)}static toGrayscaleBuffer(p,A,v){let _=new Uint8ClampedArray(A*v);for(let w=0,C=0,T=p.length;w<T;w+=4,C++){let N;if(p[w+3]===0)N=255;else{let K=p[w],ee=p[w+1],oe=p[w+2];N=306*K+601*ee+117*oe+512>>10}_[C]=N}return _}getRow(p,A){if(p<0||p>=this.getHeight())throw new c("Requested row is outside the image: "+p);let v=this.getWidth(),_=p*v;return A===null?A=this.buffer.slice(_,_+v):(A.length<v&&(A=new Uint8ClampedArray(v)),A.set(this.buffer.slice(_,_+v))),A}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(p,A,v,_){return super.crop(p,A,v,_),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let p=this.canvas.ownerDocument.createElement("canvas");p.width=this.canvas.width,p.height=this.canvas.height,this.tempCanvasElement=p}return this.tempCanvasElement}rotate(p){let A=this.getTempCanvasElement(),v=A.getContext("2d"),_=p*ue.DEGREE_TO_RADIANS,w=this.canvas.width,C=this.canvas.height,T=Math.ceil(Math.abs(Math.cos(_))*w+Math.abs(Math.sin(_))*C),N=Math.ceil(Math.abs(Math.sin(_))*w+Math.abs(Math.cos(_))*C);return A.width=T,A.height=N,v.translate(T/2,N/2),v.rotate(_),v.drawImage(this.canvas,w/-2,C/-2),this.buffer=ue.makeBufferFromCanvasImageData(A),this}invert(){return new de(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class ve{constructor(p,A,v){this.deviceId=p,this.label=A,this.kind="videoinput",this.groupId=v||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var _e=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(V,p,A,v){function _(w){return w instanceof A?w:new A(function(C){C(w)})}return new(A||(A=Promise))(function(w,C){function T(K){try{z(v.next(K))}catch(ee){C(ee)}}function N(K){try{z(v.throw(K))}catch(ee){C(ee)}}function z(K){K.done?w(K.value):_(K.value).then(T,N)}z((v=v.apply(V,p||[])).next())})};class Re{constructor(p,A=500,v){this.reader=p,this.timeBetweenScansMillis=A,this._hints=v,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(p){this._timeBetweenDecodingAttempts=p<0?0:p}set hints(p){this._hints=p||null}get hints(){return this._hints}listVideoInputDevices(){return _e(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let p=yield navigator.mediaDevices.enumerateDevices(),A=[];for(let v of p){let _=v.kind==="video"?"videoinput":v.kind;if(_!=="videoinput")continue;let w=v.deviceId||v.id,C=v.label||`Video device ${A.length+1}`,T=v.groupId,N={deviceId:w,label:C,kind:_,groupId:T};A.push(N)}return A})}getVideoInputDevices(){return _e(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(A=>new ve(A.deviceId,A.label))})}findDeviceById(p){return _e(this,void 0,void 0,function*(){let A=yield this.listVideoInputDevices();return A?A.find(v=>v.deviceId===p):null})}decodeFromInputVideoDevice(p,A){return _e(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(p,A)})}decodeOnceFromVideoDevice(p,A){return _e(this,void 0,void 0,function*(){this.reset();let v;p?v={deviceId:{exact:p}}:v={facingMode:"environment"};let _={video:v};return yield this.decodeOnceFromConstraints(_,A)})}decodeOnceFromConstraints(p,A){return _e(this,void 0,void 0,function*(){let v=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeOnceFromStream(v,A)})}decodeOnceFromStream(p,A){return _e(this,void 0,void 0,function*(){this.reset();let v=yield this.attachStreamToVideo(p,A);return yield this.decodeOnce(v)})}decodeFromInputVideoDeviceContinuously(p,A,v){return _e(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(p,A,v)})}decodeFromVideoDevice(p,A,v){return _e(this,void 0,void 0,function*(){let _;p?_={deviceId:{exact:p}}:_={facingMode:"environment"};let w={video:_};return yield this.decodeFromConstraints(w,A,v)})}decodeFromConstraints(p,A,v){return _e(this,void 0,void 0,function*(){let _=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeFromStream(_,A,v)})}decodeFromStream(p,A,v){return _e(this,void 0,void 0,function*(){this.reset();let _=yield this.attachStreamToVideo(p,A);return yield this.decodeContinuously(_,v)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(p,A){return _e(this,void 0,void 0,function*(){let v=this.prepareVideoElement(A);return this.addVideoSource(v,p),this.videoElement=v,this.stream=p,yield this.playVideoOnLoadAsync(v),v})}playVideoOnLoadAsync(p){return new Promise((A,v)=>this.playVideoOnLoad(p,()=>A()))}playVideoOnLoad(p,A){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(p),p.addEventListener("ended",this.videoEndedListener),p.addEventListener("canplay",this.videoCanPlayListener),p.addEventListener("playing",A),this.tryPlayVideo(p)}isVideoPlaying(p){return p.currentTime>0&&!p.paused&&!p.ended&&p.readyState>2}tryPlayVideo(p){return _e(this,void 0,void 0,function*(){if(this.isVideoPlaying(p)){console.warn("Trying to play video that is already playing.");return}try{yield p.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(p,A){let v=document.getElementById(p);if(!v)throw new l(`element with id '${p}' not found`);if(v.nodeName.toLowerCase()!==A.toLowerCase())throw new l(`element with id '${p}' must be an ${A} element`);return v}decodeFromImage(p,A){if(!p&&!A)throw new l("either imageElement with a src set or an url must be provided");return A&&!p?this.decodeFromImageUrl(A):this.decodeFromImageElement(p)}decodeFromVideo(p,A){if(!p&&!A)throw new l("Either an element with a src set or an URL must be provided");return A&&!p?this.decodeFromVideoUrl(A):this.decodeFromVideoElement(p)}decodeFromVideoContinuously(p,A,v){if(p===void 0&&A===void 0)throw new l("Either an element with a src set or an URL must be provided");return A&&!p?this.decodeFromVideoUrlContinuously(A,v):this.decodeFromVideoElementContinuously(p,v)}decodeFromImageElement(p){if(!p)throw new l("An image element must be provided.");this.reset();let A=this.prepareImageElement(p);this.imageElement=A;let v;return this.isImageLoaded(A)?v=this.decodeOnce(A,!1,!0):v=this._decodeOnLoadImage(A),v}decodeFromVideoElement(p){let A=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideo(A)}decodeFromVideoElementContinuously(p,A){let v=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideoContinuously(v,A)}_decodeFromVideoElementSetup(p){if(!p)throw new l("A video element must be provided.");this.reset();let A=this.prepareVideoElement(p);return this.videoElement=A,A}decodeFromImageUrl(p){if(!p)throw new l("An URL must be provided.");this.reset();let A=this.prepareImageElement();this.imageElement=A;let v=this._decodeOnLoadImage(A);return A.src=p,v}decodeFromVideoUrl(p){if(!p)throw new l("An URL must be provided.");this.reset();let A=this.prepareVideoElement(),v=this.decodeFromVideoElement(A);return A.src=p,v}decodeFromVideoUrlContinuously(p,A){if(!p)throw new l("An URL must be provided.");this.reset();let v=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(v,A);return v.src=p,_}_decodeOnLoadImage(p){return new Promise((A,v)=>{this.imageLoadedListener=()=>this.decodeOnce(p,!1,!0).then(A,v),p.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(p){return _e(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(p),yield this.decodeOnce(p)})}_decodeOnLoadVideoContinuously(p,A){return _e(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(p),this.decodeContinuously(p,A)})}isImageLoaded(p){return!(!p.complete||p.naturalWidth===0)}prepareImageElement(p){let A;return typeof p>"u"&&(A=document.createElement("img"),A.width=200,A.height=200),typeof p=="string"&&(A=this.getMediaElement(p,"img")),p instanceof HTMLImageElement&&(A=p),A}prepareVideoElement(p){let A;return!p&&typeof document<"u"&&(A=document.createElement("video"),A.width=200,A.height=200),typeof p=="string"&&(A=this.getMediaElement(p,"video")),p instanceof HTMLVideoElement&&(A=p),A.setAttribute("autoplay","true"),A.setAttribute("muted","true"),A.setAttribute("playsinline","true"),A}decodeOnce(p,A=!0,v=!0){this._stopAsyncDecode=!1;let _=(w,C)=>{if(this._stopAsyncDecode){C(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let T=this.decode(p);w(T)}catch(T){let N=A&&T instanceof X,K=(T instanceof h||T instanceof D)&&v;if(N||K)return setTimeout(_,this._timeBetweenDecodingAttempts,w,C);C(T)}};return new Promise((w,C)=>_(w,C))}decodeContinuously(p,A){this._stopContinuousDecode=!1;let v=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let _=this.decode(p);A(_,null),setTimeout(v,this.timeBetweenScansMillis)}catch(_){A(null,_);let w=_ instanceof h||_ instanceof D,C=_ instanceof X;(w||C)&&setTimeout(v,this._timeBetweenDecodingAttempts)}};v()}decode(p){let A=this.createBinaryBitmap(p);return this.decodeBitmap(A)}_isHTMLVideoElement(p){return p.videoWidth!==0}drawFrameOnCanvas(p,A,v){A||(A={sx:0,sy:0,sWidth:p.videoWidth,sHeight:p.videoHeight,dx:0,dy:0,dWidth:p.videoWidth,dHeight:p.videoHeight}),v||(v=this.captureCanvasContext),v.drawImage(p,A.sx,A.sy,A.sWidth,A.sHeight,A.dx,A.dy,A.dWidth,A.dHeight)}drawImageOnCanvas(p,A,v=this.captureCanvasContext){A||(A={sx:0,sy:0,sWidth:p.naturalWidth,sHeight:p.naturalHeight,dx:0,dy:0,dWidth:p.naturalWidth,dHeight:p.naturalHeight}),v||(v=this.captureCanvasContext),v.drawImage(p,A.sx,A.sy,A.sWidth,A.sHeight,A.dx,A.dy,A.dWidth,A.dHeight)}createBinaryBitmap(p){let A=this.getCaptureCanvasContext(p);this._isHTMLVideoElement(p)?this.drawFrameOnCanvas(p):this.drawImageOnCanvas(p);let v=this.getCaptureCanvas(p),_=new ue(v),w=new J(_);return new u(w)}getCaptureCanvasContext(p){if(!this.captureCanvasContext){let v=this.getCaptureCanvas(p).getContext("2d");this.captureCanvasContext=v}return this.captureCanvasContext}getCaptureCanvas(p){if(!this.captureCanvas){let A=this.createCaptureCanvas(p);this.captureCanvas=A}return this.captureCanvas}decodeBitmap(p){return this.reader.decode(p,this._hints)}createCaptureCanvas(p){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let A=document.createElement("canvas"),v,_;return typeof p<"u"&&(p instanceof HTMLVideoElement?(v=p.videoWidth,_=p.videoHeight):p instanceof HTMLImageElement&&(v=p.naturalWidth||p.width,_=p.naturalHeight||p.height)),A.style.width=v+"px",A.style.height=_+"px",A.width=v,A.height=_,A}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(p=>p.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(p,A){try{p.srcObject=A}catch{p.src=URL.createObjectURL(A)}}cleanVideoSource(p){try{p.srcObject=null}catch{p.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(p,A,v=A==null?0:8*A.length,_,w,C=f.currentTimeMillis()){this.text=p,this.rawBytes=A,this.numBits=v,this.resultPoints=_,this.format=w,this.timestamp=C,this.text=p,this.rawBytes=A,v==null?this.numBits=A==null?0:8*A.length:this.numBits=v,this.resultPoints=_,this.format=w,this.resultMetadata=null,C==null?this.timestamp=f.currentTimeMillis():this.timestamp=C}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(p,A){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(p,A)}putAllMetadata(p){p!==null&&(this.resultMetadata===null?this.resultMetadata=p:this.resultMetadata=new Map(p))}addResultPoints(p){let A=this.resultPoints;if(A===null)this.resultPoints=p;else if(p!==null&&p.length>0){let v=new Array(A.length+p.length);f.arraycopy(A,0,v,0,A.length),f.arraycopy(p,0,v,A.length,p.length),this.resultPoints=v}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Te=function(V){return V[V.AZTEC=0]="AZTEC",V[V.CODABAR=1]="CODABAR",V[V.CODE_39=2]="CODE_39",V[V.CODE_93=3]="CODE_93",V[V.CODE_128=4]="CODE_128",V[V.DATA_MATRIX=5]="DATA_MATRIX",V[V.EAN_8=6]="EAN_8",V[V.EAN_13=7]="EAN_13",V[V.ITF=8]="ITF",V[V.MAXICODE=9]="MAXICODE",V[V.PDF_417=10]="PDF_417",V[V.QR_CODE=11]="QR_CODE",V[V.RSS_14=12]="RSS_14",V[V.RSS_EXPANDED=13]="RSS_EXPANDED",V[V.UPC_A=14]="UPC_A",V[V.UPC_E=15]="UPC_E",V[V.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",V}(Te||{}),Se=Te,nt=function(V){return V[V.OTHER=0]="OTHER",V[V.ORIENTATION=1]="ORIENTATION",V[V.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",V[V.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",V[V.ISSUE_NUMBER=4]="ISSUE_NUMBER",V[V.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",V[V.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",V[V.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",V[V.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",V[V.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",V[V.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",V}(nt||{}),rt=nt;class dt{constructor(p,A,v,_,w=-1,C=-1){this.rawBytes=p,this.text=A,this.byteSegments=v,this.ecLevel=_,this.structuredAppendSequenceNumber=w,this.structuredAppendParity=C,this.numBits=p==null?0:8*p.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(p){this.numBits=p}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(p){this.errorsCorrected=p}getErasures(){return this.erasures}setErasures(p){this.erasures=p}getOther(){return this.other}setOther(p){this.other=p}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(p){return this.expTable[p]}log(p){if(p===0)throw new c;return this.logTable[p]}static addOrSubtract(p,A){return p^A}}class ht{constructor(p,A){if(A.length===0)throw new c;this.field=p;let v=A.length;if(v>1&&A[0]===0){let _=1;for(;_<v&&A[_]===0;)_++;_===v?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(v-_),f.arraycopy(A,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=A}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);let A=this.coefficients,v;if(p===1){v=0;for(let C=0,T=A.length;C!==T;C++){let N=A[C];v=tt.addOrSubtract(v,N)}return v}v=A[0];let _=A.length,w=this.field;for(let C=1;C<_;C++)v=tt.addOrSubtract(w.multiply(p,v),A[C]);return v}addOrSubtract(p){if(!this.field.equals(p.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero())return p;if(p.isZero())return this;let A=this.coefficients,v=p.coefficients;if(A.length>v.length){let C=A;A=v,v=C}let _=new Int32Array(v.length),w=v.length-A.length;f.arraycopy(v,0,_,0,w);for(let C=w;C<v.length;C++)_[C]=tt.addOrSubtract(A[C-w],v[C]);return new ht(this.field,_)}multiply(p){if(!this.field.equals(p.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero()||p.isZero())return this.field.getZero();let A=this.coefficients,v=A.length,_=p.coefficients,w=_.length,C=new Int32Array(v+w-1),T=this.field;for(let N=0;N<v;N++){let z=A[N];for(let K=0;K<w;K++)C[N+K]=tt.addOrSubtract(C[N+K],T.multiply(z,_[K]))}return new ht(T,C)}multiplyScalar(p){if(p===0)return this.field.getZero();if(p===1)return this;let A=this.coefficients.length,v=this.field,_=new Int32Array(A),w=this.coefficients;for(let C=0;C<A;C++)_[C]=v.multiply(w[C],p);return new ht(v,_)}multiplyByMonomial(p,A){if(p<0)throw new c;if(A===0)return this.field.getZero();let v=this.coefficients,_=v.length,w=new Int32Array(_+p),C=this.field;for(let T=0;T<_;T++)w[T]=C.multiply(v[T],A);return new ht(C,w)}divide(p){if(!this.field.equals(p.field))throw new c("GenericGFPolys do not have same GenericGF field");if(p.isZero())throw new c("Divide by 0");let A=this.field,v=A.getZero(),_=this,w=p.getCoefficient(p.getDegree()),C=A.inverse(w);for(;_.getDegree()>=p.getDegree()&&!_.isZero();){let T=_.getDegree()-p.getDegree(),N=A.multiply(_.getCoefficient(_.getDegree()),C),z=p.multiplyByMonomial(T,N),K=A.buildMonomial(T,N);v=v.addOrSubtract(K),_=_.addOrSubtract(z)}return[v,_]}toString(){let p="";for(let A=this.getDegree();A>=0;A--){let v=this.getCoefficient(A);if(v!==0){if(v<0?(p+=" - ",v=-v):p.length>0&&(p+=" + "),A===0||v!==1){let _=this.field.log(v);_===0?p+="1":_===1?p+="a":(p+="a^",p+=_)}A!==0&&(A===1?p+="x":(p+="x^",p+=A))}}return p}}let pt=(()=>{class V extends s{}return V.kind="ArithmeticException",V})();class Je extends tt{constructor(p,A,v){super(),this.primitive=p,this.size=A,this.generatorBase=v;let _=new Int32Array(A),w=1;for(let T=0;T<A;T++)_[T]=w,w*=2,w>=A&&(w^=p,w&=A-1);this.expTable=_;let C=new Int32Array(A);for(let T=0;T<A-1;T++)C[_[T]]=T;this.logTable=C,this.zero=new ht(this,Int32Array.from([0])),this.one=new ht(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,A){if(p<0)throw new c;if(A===0)return this.zero;let v=new Int32Array(p+1);return v[0]=A,new ht(this,v)}inverse(p){if(p===0)throw new pt;return this.expTable[this.size-this.logTable[p]-1]}multiply(p,A){return p===0||A===0?0:this.expTable[(this.logTable[p]+this.logTable[A])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+x.toHexString(this.primitive)+","+this.size+")"}equals(p){return p===this}}Je.AZTEC_DATA_12=new Je(4201,4096,1),Je.AZTEC_DATA_10=new Je(1033,1024,1),Je.AZTEC_DATA_6=new Je(67,64,1),Je.AZTEC_PARAM=new Je(19,16,1),Je.QR_CODE_FIELD_256=new Je(285,256,0),Je.DATA_MATRIX_FIELD_256=new Je(301,256,1),Je.AZTEC_DATA_8=Je.DATA_MATRIX_FIELD_256,Je.MAXICODE_FIELD_64=Je.AZTEC_DATA_6;let Ie=(()=>{class V extends s{}return V.kind="ReedSolomonException",V})(),Bi=(()=>{class V extends s{}return V.kind="IllegalStateException",V})();class _t{constructor(p){this.field=p}decode(p,A){let v=this.field,_=new ht(v,p),w=new Int32Array(A),C=!0;for(let ge=0;ge<A;ge++){let we=_.evaluateAt(v.exp(ge+v.getGeneratorBase()));w[w.length-1-ge]=we,we!==0&&(C=!1)}if(C)return;let T=new ht(v,w),N=this.runEuclideanAlgorithm(v.buildMonomial(A,1),T,A),z=N[0],K=N[1],ee=this.findErrorLocations(z),oe=this.findErrorMagnitudes(K,ee);for(let ge=0;ge<ee.length;ge++){let we=p.length-1-v.log(ee[ge]);if(we<0)throw new Ie("Bad error location");p[we]=Je.addOrSubtract(p[we],oe[ge])}}runEuclideanAlgorithm(p,A,v){if(p.getDegree()<A.getDegree()){let ge=p;p=A,A=ge}let _=this.field,w=p,C=A,T=_.getZero(),N=_.getOne();for(;C.getDegree()>=(v/2|0);){let ge=w,we=T;if(w=C,T=N,w.isZero())throw new Ie("r_{i-1} was zero");C=ge;let De=_.getZero(),Ue=w.getCoefficient(w.getDegree()),Ke=_.inverse(Ue);for(;C.getDegree()>=w.getDegree()&&!C.isZero();){let Et=C.getDegree()-w.getDegree(),Jt=_.multiply(C.getCoefficient(C.getDegree()),Ke);De=De.addOrSubtract(_.buildMonomial(Et,Jt)),C=C.addOrSubtract(w.multiplyByMonomial(Et,Jt))}if(N=De.multiply(T).addOrSubtract(we),C.getDegree()>=w.getDegree())throw new Bi("Division algorithm failed to reduce polynomial?")}let z=N.getCoefficient(0);if(z===0)throw new Ie("sigmaTilde(0) was zero");let K=_.inverse(z),ee=N.multiplyScalar(K),oe=C.multiplyScalar(K);return[ee,oe]}findErrorLocations(p){let A=p.getDegree();if(A===1)return Int32Array.from([p.getCoefficient(1)]);let v=new Int32Array(A),_=0,w=this.field;for(let C=1;C<w.getSize()&&_<A;C++)p.evaluateAt(C)===0&&(v[_]=w.inverse(C),_++);if(_!==A)throw new Ie("Error locator degree does not match number of roots");return v}findErrorMagnitudes(p,A){let v=A.length,_=new Int32Array(v),w=this.field;for(let C=0;C<v;C++){let T=w.inverse(A[C]),N=1;for(let z=0;z<v;z++)if(C!==z){let K=w.multiply(A[z],T),ee=K&1?K&-2:K|1;N=w.multiply(N,ee)}_[C]=w.multiply(p.evaluateAt(T),w.inverse(N)),w.getGeneratorBase()!==0&&(_[C]=w.multiply(_[C],T))}return _}}var It=function(V){return V[V.UPPER=0]="UPPER",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.DIGIT=3]="DIGIT",V[V.PUNCT=4]="PUNCT",V[V.BINARY=5]="BINARY",V}(It||{});let Ct=(()=>{class V{decode(A){this.ddata=A;let v=A.getBits(),_=this.extractBits(v),w=this.correctBits(_),C=V.convertBoolArrayToByteArray(w),T=V.getEncodedData(w),N=new dt(C,T,null,null);return N.setNumBits(w.length),N}static highLevelDecode(A){return this.getEncodedData(A)}static getEncodedData(A){let v=A.length,_=It.UPPER,w=It.UPPER,C="",T=0;for(;T<v;)if(w===It.BINARY){if(v-T<5)break;let N=V.readCode(A,T,5);if(T+=5,N===0){if(v-T<11)break;N=V.readCode(A,T,11)+31,T+=11}for(let z=0;z<N;z++){if(v-T<8){T=v;break}let K=V.readCode(A,T,8);C+=k.castAsNonUtf8Char(K),T+=8}w=_}else{let N=w===It.DIGIT?4:5;if(v-T<N)break;let z=V.readCode(A,T,N);T+=N;let K=V.getCharacter(w,z);K.startsWith("CTRL_")?(_=w,w=V.getTable(K.charAt(5)),K.charAt(6)==="L"&&(_=w)):(C+=K,w=_)}return C}static getTable(A){switch(A){case"L":return It.LOWER;case"P":return It.PUNCT;case"M":return It.MIXED;case"D":return It.DIGIT;case"B":return It.BINARY;case"U":default:return It.UPPER}}static getCharacter(A,v){switch(A){case It.UPPER:return V.UPPER_TABLE[v];case It.LOWER:return V.LOWER_TABLE[v];case It.MIXED:return V.MIXED_TABLE[v];case It.PUNCT:return V.PUNCT_TABLE[v];case It.DIGIT:return V.DIGIT_TABLE[v];default:throw new Bi("Bad table")}}correctBits(A){let v,_;this.ddata.getNbLayers()<=2?(_=6,v=Je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(_=8,v=Je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(_=10,v=Je.AZTEC_DATA_10):(_=12,v=Je.AZTEC_DATA_12);let w=this.ddata.getNbDatablocks(),C=A.length/_;if(C<w)throw new D;let T=A.length%_,N=new Int32Array(C);for(let ge=0;ge<C;ge++,T+=_)N[ge]=V.readCode(A,T,_);try{new _t(v).decode(N,C-w)}catch(ge){throw new D(ge)}let z=(1<<_)-1,K=0;for(let ge=0;ge<w;ge++){let we=N[ge];if(we===0||we===z)throw new D;(we===1||we===z-1)&&K++}let ee=new Array(w*_-K),oe=0;for(let ge=0;ge<w;ge++){let we=N[ge];if(we===1||we===z-1)ee.fill(we>1,oe,oe+_-1),oe+=_-1;else for(let De=_-1;De>=0;--De)ee[oe++]=(we&1<<De)!==0}return ee}extractBits(A){let v=this.ddata.isCompact(),_=this.ddata.getNbLayers(),w=(v?11:14)+_*4,C=new Int32Array(w),T=new Array(this.totalBitsInLayer(_,v));if(v)for(let N=0;N<C.length;N++)C[N]=N;else{let N=w+1+2*x.truncDivision(x.truncDivision(w,2)-1,15),z=w/2,K=x.truncDivision(N,2);for(let ee=0;ee<z;ee++){let oe=ee+x.truncDivision(ee,15);C[z-ee-1]=K-oe-1,C[z+ee]=K+oe+1}}for(let N=0,z=0;N<_;N++){let K=(_-N)*4+(v?9:12),ee=N*2,oe=w-1-ee;for(let ge=0;ge<K;ge++){let we=ge*2;for(let De=0;De<2;De++)T[z+we+De]=A.get(C[ee+De],C[ee+ge]),T[z+2*K+we+De]=A.get(C[ee+ge],C[oe-De]),T[z+4*K+we+De]=A.get(C[oe-De],C[oe-ge]),T[z+6*K+we+De]=A.get(C[oe-ge],C[ee+De])}z+=K*8}return T}static readCode(A,v,_){let w=0;for(let C=v;C<v+_;C++)w<<=1,A[C]&&(w|=1);return w}static readByte(A,v){let _=A.length-v;return _>=8?V.readCode(A,v,8):V.readCode(A,v,_)<<8-_}static convertBoolArrayToByteArray(A){let v=new Uint8Array((A.length+7)/8);for(let _=0;_<v.length;_++)v[_]=V.readByte(A,8*_);return v}totalBitsInLayer(A,v){return((v?88:112)+16*A)*A}}return V.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],V.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],V.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],V.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],V.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],V})();class Xt{constructor(){}static round(p){return p===NaN?0:p<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:p>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:p+(p<0?-.5:.5)|0}static distance(p,A,v,_){let w=p-v,C=A-_;return Math.sqrt(w*w+C*C)}static sum(p){let A=0;for(let v=0,_=p.length;v!==_;v++){let w=p[v];A+=w}return A}}class Oi{static floatToIntBits(p){return p}}Oi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(p,A){this.x=p,this.y=A}getX(){return this.x}getY(){return this.y}equals(p){if(p instanceof ae){let A=p;return this.x===A.x&&this.y===A.y}return!1}hashCode(){return 31*Oi.floatToIntBits(this.x)+Oi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(p){let A=this.distance(p[0],p[1]),v=this.distance(p[1],p[2]),_=this.distance(p[0],p[2]),w,C,T;if(v>=A&&v>=_?(C=p[0],w=p[1],T=p[2]):_>=v&&_>=A?(C=p[1],w=p[0],T=p[2]):(C=p[2],w=p[0],T=p[1]),this.crossProductZ(w,C,T)<0){let N=w;w=T,T=N}p[0]=w,p[1]=C,p[2]=T}static distance(p,A){return Xt.distance(p.x,p.y,A.x,A.y)}static crossProductZ(p,A,v){let _=A.x,w=A.y;return(v.x-_)*(p.y-w)-(v.y-w)*(p.x-_)}}class se{constructor(p,A){this.bits=p,this.points=A}getBits(){return this.bits}getPoints(){return this.points}}class Ge extends se{constructor(p,A,v,_,w){super(p,A),this.compact=v,this.nbDatablocks=_,this.nbLayers=w}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let bt=(()=>{class V{constructor(A,v,_,w){this.image=A,this.height=A.getHeight(),this.width=A.getWidth(),v==null&&(v=V.INIT_SIZE),_==null&&(_=A.getWidth()/2|0),w==null&&(w=A.getHeight()/2|0);let C=v/2|0;if(this.leftInit=_-C,this.rightInit=_+C,this.upInit=w-C,this.downInit=w+C,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let A=this.leftInit,v=this.rightInit,_=this.upInit,w=this.downInit,C=!1,T=!0,N=!1,z=!1,K=!1,ee=!1,oe=!1,ge=this.width,we=this.height;for(;T;){T=!1;let De=!0;for(;(De||!z)&&v<ge;)De=this.containsBlackPoint(_,w,v,!1),De?(v++,T=!0,z=!0):z||v++;if(v>=ge){C=!0;break}let Ue=!0;for(;(Ue||!K)&&w<we;)Ue=this.containsBlackPoint(A,v,w,!0),Ue?(w++,T=!0,K=!0):K||w++;if(w>=we){C=!0;break}let Ke=!0;for(;(Ke||!ee)&&A>=0;)Ke=this.containsBlackPoint(_,w,A,!1),Ke?(A--,T=!0,ee=!0):ee||A--;if(A<0){C=!0;break}let Et=!0;for(;(Et||!oe)&&_>=0;)Et=this.containsBlackPoint(A,v,_,!0),Et?(_--,T=!0,oe=!0):oe||_--;if(_<0){C=!0;break}T&&(N=!0)}if(!C&&N){let De=v-A,Ue=null;for(let ut=1;Ue===null&&ut<De;ut++)Ue=this.getBlackPointOnSegment(A,w-ut,A+ut,w);if(Ue==null)throw new X;let Ke=null;for(let ut=1;Ke===null&&ut<De;ut++)Ke=this.getBlackPointOnSegment(A,_+ut,A+ut,_);if(Ke==null)throw new X;let Et=null;for(let ut=1;Et===null&&ut<De;ut++)Et=this.getBlackPointOnSegment(v,_+ut,v-ut,_);if(Et==null)throw new X;let Jt=null;for(let ut=1;Jt===null&&ut<De;ut++)Jt=this.getBlackPointOnSegment(v,w-ut,v-ut,w);if(Jt==null)throw new X;return this.centerEdges(Jt,Ue,Et,Ke)}else throw new X}getBlackPointOnSegment(A,v,_,w){let C=Xt.round(Xt.distance(A,v,_,w)),T=(_-A)/C,N=(w-v)/C,z=this.image;for(let K=0;K<C;K++){let ee=Xt.round(A+K*T),oe=Xt.round(v+K*N);if(z.get(ee,oe))return new ae(ee,oe)}return null}centerEdges(A,v,_,w){let C=A.getX(),T=A.getY(),N=v.getX(),z=v.getY(),K=_.getX(),ee=_.getY(),oe=w.getX(),ge=w.getY(),we=V.CORR;return C<this.width/2?[new ae(oe-we,ge+we),new ae(N+we,z+we),new ae(K-we,ee-we),new ae(C+we,T-we)]:[new ae(oe+we,ge+we),new ae(N+we,z-we),new ae(K-we,ee+we),new ae(C-we,T-we)]}containsBlackPoint(A,v,_,w){let C=this.image;if(w){for(let T=A;T<=v;T++)if(C.get(T,_))return!0}else for(let T=A;T<=v;T++)if(C.get(_,T))return!0;return!1}}return V.INIT_SIZE=10,V.CORR=1,V})();class gt{static checkAndNudgePoints(p,A){let v=p.getWidth(),_=p.getHeight(),w=!0;for(let C=0;C<A.length&&w;C+=2){let T=Math.floor(A[C]),N=Math.floor(A[C+1]);if(T<-1||T>v||N<-1||N>_)throw new X;w=!1,T===-1?(A[C]=0,w=!0):T===v&&(A[C]=v-1,w=!0),N===-1?(A[C+1]=0,w=!0):N===_&&(A[C+1]=_-1,w=!0)}w=!0;for(let C=A.length-2;C>=0&&w;C-=2){let T=Math.floor(A[C]),N=Math.floor(A[C+1]);if(T<-1||T>v||N<-1||N>_)throw new X;w=!1,T===-1?(A[C]=0,w=!0):T===v&&(A[C]=v-1,w=!0),N===-1?(A[C+1]=0,w=!0):N===_&&(A[C+1]=_-1,w=!0)}}}class mt{constructor(p,A,v,_,w,C,T,N,z){this.a11=p,this.a21=A,this.a31=v,this.a12=_,this.a22=w,this.a32=C,this.a13=T,this.a23=N,this.a33=z}static quadrilateralToQuadrilateral(p,A,v,_,w,C,T,N,z,K,ee,oe,ge,we,De,Ue){let Ke=mt.quadrilateralToSquare(p,A,v,_,w,C,T,N);return mt.squareToQuadrilateral(z,K,ee,oe,ge,we,De,Ue).times(Ke)}transformPoints(p){let A=p.length,v=this.a11,_=this.a12,w=this.a13,C=this.a21,T=this.a22,N=this.a23,z=this.a31,K=this.a32,ee=this.a33;for(let oe=0;oe<A;oe+=2){let ge=p[oe],we=p[oe+1],De=w*ge+N*we+ee;p[oe]=(v*ge+C*we+z)/De,p[oe+1]=(_*ge+T*we+K)/De}}transformPointsWithValues(p,A){let v=this.a11,_=this.a12,w=this.a13,C=this.a21,T=this.a22,N=this.a23,z=this.a31,K=this.a32,ee=this.a33,oe=p.length;for(let ge=0;ge<oe;ge++){let we=p[ge],De=A[ge],Ue=w*we+N*De+ee;p[ge]=(v*we+C*De+z)/Ue,A[ge]=(_*we+T*De+K)/Ue}}static squareToQuadrilateral(p,A,v,_,w,C,T,N){let z=p-v+w-T,K=A-_+C-N;if(z===0&&K===0)return new mt(v-p,w-v,p,_-A,C-_,A,0,0,1);{let ee=v-w,oe=T-w,ge=_-C,we=N-C,De=ee*we-oe*ge,Ue=(z*we-oe*K)/De,Ke=(ee*K-z*ge)/De;return new mt(v-p+Ue*v,T-p+Ke*T,p,_-A+Ue*_,N-A+Ke*N,A,Ue,Ke,1)}}static quadrilateralToSquare(p,A,v,_,w,C,T,N){return mt.squareToQuadrilateral(p,A,v,_,w,C,T,N).buildAdjoint()}buildAdjoint(){return new mt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(p){return new mt(this.a11*p.a11+this.a21*p.a12+this.a31*p.a13,this.a11*p.a21+this.a21*p.a22+this.a31*p.a23,this.a11*p.a31+this.a21*p.a32+this.a31*p.a33,this.a12*p.a11+this.a22*p.a12+this.a32*p.a13,this.a12*p.a21+this.a22*p.a22+this.a32*p.a23,this.a12*p.a31+this.a22*p.a32+this.a32*p.a33,this.a13*p.a11+this.a23*p.a12+this.a33*p.a13,this.a13*p.a21+this.a23*p.a22+this.a33*p.a23,this.a13*p.a31+this.a23*p.a32+this.a33*p.a33)}}class Ti extends gt{sampleGrid(p,A,v,_,w,C,T,N,z,K,ee,oe,ge,we,De,Ue,Ke,Et,Jt){let ut=mt.quadrilateralToQuadrilateral(_,w,C,T,N,z,K,ee,oe,ge,we,De,Ue,Ke,Et,Jt);return this.sampleGridWithTransform(p,A,v,ut)}sampleGridWithTransform(p,A,v,_){if(A<=0||v<=0)throw new X;let w=new q(A,v),C=new Float32Array(2*A);for(let T=0;T<v;T++){let N=C.length,z=T+.5;for(let K=0;K<N;K+=2)C[K]=K/2+.5,C[K+1]=z;_.transformPoints(C),gt.checkAndNudgePoints(p,C);try{for(let K=0;K<N;K+=2)p.get(Math.floor(C[K]),Math.floor(C[K+1]))&&w.set(K/2,T)}catch{throw new X}}return w}}class kt{static setGridSampler(p){kt.gridSampler=p}static getInstance(){return kt.gridSampler}}kt.gridSampler=new Ti;class Qt{constructor(p,A){this.x=p,this.y=A}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ni{constructor(p){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=p}detect(){return this.detectMirror(!1)}detectMirror(p){let A=this.getMatrixCenter(),v=this.getBullsEyeCorners(A);if(p){let C=v[0];v[0]=v[2],v[2]=C}this.extractParameters(v);let _=this.sampleGrid(this.image,v[this.shift%4],v[(this.shift+1)%4],v[(this.shift+2)%4],v[(this.shift+3)%4]),w=this.getMatrixCornerPoints(v);return new Ge(_,w,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(p){if(!this.isValidPoint(p[0])||!this.isValidPoint(p[1])||!this.isValidPoint(p[2])||!this.isValidPoint(p[3]))throw new X;let A=2*this.nbCenterLayers,v=new Int32Array([this.sampleLine(p[0],p[1],A),this.sampleLine(p[1],p[2],A),this.sampleLine(p[2],p[3],A),this.sampleLine(p[3],p[0],A)]);this.shift=this.getRotation(v,A);let _=0;for(let C=0;C<4;C++){let T=v[(this.shift+C)%4];this.compact?(_<<=7,_+=T>>1&127):(_<<=10,_+=(T>>2&992)+(T>>1&31))}let w=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=(w>>6)+1,this.nbDataBlocks=(w&63)+1):(this.nbLayers=(w>>11)+1,this.nbDataBlocks=(w&2047)+1)}getRotation(p,A){let v=0;p.forEach((_,w,C)=>{let T=(_>>A-2<<1)+(_&1);v=(v<<3)+T}),v=((v&1)<<11)+(v>>1);for(let _=0;_<4;_++)if(x.bitCount(v^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new X}getCorrectedParameterData(p,A){let v,_;A?(v=7,_=2):(v=10,_=4);let w=v-_,C=new Int32Array(v);for(let N=v-1;N>=0;--N)C[N]=p&15,p>>=4;try{new _t(Je.AZTEC_PARAM).decode(C,w)}catch{throw new X}let T=0;for(let N=0;N<_;N++)T=(T<<4)+C[N];return T}getBullsEyeCorners(p){let A=p,v=p,_=p,w=p,C=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ee=this.getFirstDifferent(A,C,1,-1),oe=this.getFirstDifferent(v,C,1,1),ge=this.getFirstDifferent(_,C,-1,1),we=this.getFirstDifferent(w,C,-1,-1);if(this.nbCenterLayers>2){let De=this.distancePoint(we,ee)*this.nbCenterLayers/(this.distancePoint(w,A)*(this.nbCenterLayers+2));if(De<.75||De>1.25||!this.isWhiteOrBlackRectangle(ee,oe,ge,we))break}A=ee,v=oe,_=ge,w=we,C=!C}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let T=new ae(A.getX()+.5,A.getY()-.5),N=new ae(v.getX()+.5,v.getY()+.5),z=new ae(_.getX()-.5,_.getY()+.5),K=new ae(w.getX()-.5,w.getY()-.5);return this.expandSquare([T,N,z,K],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let p,A,v,_;try{let T=new bt(this.image).detect();p=T[0],A=T[1],v=T[2],_=T[3]}catch{let N=this.image.getWidth()/2,z=this.image.getHeight()/2;p=this.getFirstDifferent(new Qt(N+7,z-7),!1,1,-1).toResultPoint(),A=this.getFirstDifferent(new Qt(N+7,z+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Qt(N-7,z+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Qt(N-7,z-7),!1,-1,-1).toResultPoint()}let w=Xt.round((p.getX()+_.getX()+A.getX()+v.getX())/4),C=Xt.round((p.getY()+_.getY()+A.getY()+v.getY())/4);try{let T=new bt(this.image,15,w,C).detect();p=T[0],A=T[1],v=T[2],_=T[3]}catch{p=this.getFirstDifferent(new Qt(w+7,C-7),!1,1,-1).toResultPoint(),A=this.getFirstDifferent(new Qt(w+7,C+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Qt(w-7,C+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Qt(w-7,C-7),!1,-1,-1).toResultPoint()}return w=Xt.round((p.getX()+_.getX()+A.getX()+v.getX())/4),C=Xt.round((p.getY()+_.getY()+A.getY()+v.getY())/4),new Qt(w,C)}getMatrixCornerPoints(p){return this.expandSquare(p,2*this.nbCenterLayers,this.getDimension())}sampleGrid(p,A,v,_,w){let C=kt.getInstance(),T=this.getDimension(),N=T/2-this.nbCenterLayers,z=T/2+this.nbCenterLayers;return C.sampleGrid(p,T,T,N,N,z,N,z,z,N,z,A.getX(),A.getY(),v.getX(),v.getY(),_.getX(),_.getY(),w.getX(),w.getY())}sampleLine(p,A,v){let _=0,w=this.distanceResultPoint(p,A),C=w/v,T=p.getX(),N=p.getY(),z=C*(A.getX()-p.getX())/w,K=C*(A.getY()-p.getY())/w;for(let ee=0;ee<v;ee++)this.image.get(Xt.round(T+ee*z),Xt.round(N+ee*K))&&(_|=1<<v-ee-1);return _}isWhiteOrBlackRectangle(p,A,v,_){let w=3;p=new Qt(p.getX()-w,p.getY()+w),A=new Qt(A.getX()-w,A.getY()-w),v=new Qt(v.getX()+w,v.getY()-w),_=new Qt(_.getX()+w,_.getY()+w);let C=this.getColor(_,p);if(C===0)return!1;let T=this.getColor(p,A);return T!==C||(T=this.getColor(A,v),T!==C)?!1:(T=this.getColor(v,_),T===C)}getColor(p,A){let v=this.distancePoint(p,A),_=(A.getX()-p.getX())/v,w=(A.getY()-p.getY())/v,C=0,T=p.getX(),N=p.getY(),z=this.image.get(p.getX(),p.getY()),K=Math.ceil(v);for(let oe=0;oe<K;oe++)T+=_,N+=w,this.image.get(Xt.round(T),Xt.round(N))!==z&&C++;let ee=C/v;return ee>.1&&ee<.9?0:ee<=.1===z?1:-1}getFirstDifferent(p,A,v,_){let w=p.getX()+v,C=p.getY()+_;for(;this.isValid(w,C)&&this.image.get(w,C)===A;)w+=v,C+=_;for(w-=v,C-=_;this.isValid(w,C)&&this.image.get(w,C)===A;)w+=v;for(w-=v;this.isValid(w,C)&&this.image.get(w,C)===A;)C+=_;return C-=_,new Qt(w,C)}expandSquare(p,A,v){let _=v/(2*A),w=p[0].getX()-p[2].getX(),C=p[0].getY()-p[2].getY(),T=(p[0].getX()+p[2].getX())/2,N=(p[0].getY()+p[2].getY())/2,z=new ae(T+_*w,N+_*C),K=new ae(T-_*w,N-_*C);w=p[1].getX()-p[3].getX(),C=p[1].getY()-p[3].getY(),T=(p[1].getX()+p[3].getX())/2,N=(p[1].getY()+p[3].getY())/2;let ee=new ae(T+_*w,N+_*C),oe=new ae(T-_*w,N-_*C);return[z,ee,K,oe]}isValid(p,A){return p>=0&&p<this.image.getWidth()&&A>0&&A<this.image.getHeight()}isValidPoint(p){let A=Xt.round(p.getX()),v=Xt.round(p.getY());return this.isValid(A,v)}distancePoint(p,A){return Xt.distance(p.getX(),p.getY(),A.getX(),A.getY())}distanceResultPoint(p,A){return Xt.distance(p.getX(),p.getY(),A.getX(),A.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(x.truncDivision(this.nbLayers-4,8)+1)+15}}class Zi{decode(p,A=null){let v=null,_=new Ni(p.getBlackMatrix()),w=null,C=null;try{let K=_.detectMirror(!1);w=K.getPoints(),this.reportFoundResultPoints(A,w),C=new Ct().decode(K)}catch(K){v=K}if(C==null)try{let K=_.detectMirror(!0);w=K.getPoints(),this.reportFoundResultPoints(A,w),C=new Ct().decode(K)}catch(K){throw v??K}let T=new Oe(C.getText(),C.getRawBytes(),C.getNumBits(),w,Se.AZTEC,f.currentTimeMillis()),N=C.getByteSegments();N!=null&&T.putMetadata(rt.BYTE_SEGMENTS,N);let z=C.getECLevel();return z!=null&&T.putMetadata(rt.ERROR_CORRECTION_LEVEL,z),T}reportFoundResultPoints(p,A){if(p!=null){let v=p.get(E.NEED_RESULT_POINT_CALLBACK);v!=null&&A.forEach((_,w,C)=>{v.foundPossibleResultPoint(_)})}}reset(){}}class vt extends Re{constructor(p=500){super(new Zi,p)}}class vi{decode(p,A){try{return this.doDecode(p,A)}catch{if(A&&A.get(E.TRY_HARDER)===!0&&p.isRotateSupported()){let w=p.rotateCounterClockwise(),C=this.doDecode(w,A),T=C.getResultMetadata(),N=270;T!==null&&T.get(rt.ORIENTATION)===!0&&(N=N+T.get(rt.ORIENTATION)%360),C.putMetadata(rt.ORIENTATION,N);let z=C.getResultPoints();if(z!==null){let K=w.getHeight();for(let ee=0;ee<z.length;ee++)z[ee]=new ae(K-z[ee].getY()-1,z[ee].getX())}return C}else throw new X}}reset(){}doDecode(p,A){let v=p.getWidth(),_=p.getHeight(),w=new b(v),C=A&&A.get(E.TRY_HARDER)===!0,T=Math.max(1,_>>(C?8:5)),N;C?N=_:N=15;let z=Math.trunc(_/2);for(let K=0;K<N;K++){let ee=Math.trunc((K+1)/2),oe=(K&1)===0,ge=z+T*(oe?ee:-ee);if(ge<0||ge>=_)break;try{w=p.getBlackRow(ge,w)}catch{continue}for(let we=0;we<2;we++){if(we===1&&(w.reverse(),A&&A.get(E.NEED_RESULT_POINT_CALLBACK)===!0)){let De=new Map;A.forEach((Ue,Ke)=>De.set(Ke,Ue)),De.delete(E.NEED_RESULT_POINT_CALLBACK),A=De}try{let De=this.decodeRow(ge,w,A);if(we===1){De.putMetadata(rt.ORIENTATION,180);let Ue=De.getResultPoints();Ue!==null&&(Ue[0]=new ae(v-Ue[0].getX()-1,Ue[0].getY()),Ue[1]=new ae(v-Ue[1].getX()-1,Ue[1].getY()))}return De}catch{}}}throw new X}static recordPattern(p,A,v){let _=v.length;for(let z=0;z<_;z++)v[z]=0;let w=p.getSize();if(A>=w)throw new X;let C=!p.get(A),T=0,N=A;for(;N<w;){if(p.get(N)!==C)v[T]++;else{if(++T===_)break;v[T]=1,C=!C}N++}if(!(T===_||T===_-1&&N===w))throw new X}static recordPatternInReverse(p,A,v){let _=v.length,w=p.get(A);for(;A>0&&_>=0;)p.get(--A)!==w&&(_--,w=!w);if(_>=0)throw new X;vi.recordPattern(p,A+1,v)}static patternMatchVariance(p,A,v){let _=p.length,w=0,C=0;for(let z=0;z<_;z++)w+=p[z],C+=A[z];if(w<C)return Number.POSITIVE_INFINITY;let T=w/C;v*=T;let N=0;for(let z=0;z<_;z++){let K=p[z],ee=A[z]*T,oe=K>ee?K-ee:ee-K;if(oe>v)return Number.POSITIVE_INFINITY;N+=oe}return N/w}}class lt extends vi{static findStartPattern(p){let A=p.getSize(),v=p.getNextSet(0),_=0,w=Int32Array.from([0,0,0,0,0,0]),C=v,T=!1,N=6;for(let z=v;z<A;z++)if(p.get(z)!==T)w[_]++;else{if(_===N-1){let K=lt.MAX_AVG_VARIANCE,ee=-1;for(let oe=lt.CODE_START_A;oe<=lt.CODE_START_C;oe++){let ge=vi.patternMatchVariance(w,lt.CODE_PATTERNS[oe],lt.MAX_INDIVIDUAL_VARIANCE);ge<K&&(K=ge,ee=oe)}if(ee>=0&&p.isRange(Math.max(0,C-(z-C)/2),C,!1))return Int32Array.from([C,z,ee]);C+=w[0]+w[1],w=w.slice(2,w.length-1),w[_-1]=0,w[_]=0,_--}else _++;w[_]=1,T=!T}throw new X}static decodeCode(p,A,v){vi.recordPattern(p,v,A);let _=lt.MAX_AVG_VARIANCE,w=-1;for(let C=0;C<lt.CODE_PATTERNS.length;C++){let T=lt.CODE_PATTERNS[C],N=this.patternMatchVariance(A,T,lt.MAX_INDIVIDUAL_VARIANCE);N<_&&(_=N,w=C)}if(w>=0)return w;throw new X}decodeRow(p,A,v){let _=v&&v.get(E.ASSUME_GS1)===!0,w=lt.findStartPattern(A),C=w[2],T=0,N=new Uint8Array(20);N[T++]=C;let z;switch(C){case lt.CODE_START_A:z=lt.CODE_CODE_A;break;case lt.CODE_START_B:z=lt.CODE_CODE_B;break;case lt.CODE_START_C:z=lt.CODE_CODE_C;break;default:throw new D}let K=!1,ee=!1,oe="",ge=w[0],we=w[1],De=Int32Array.from([0,0,0,0,0,0]),Ue=0,Ke=0,Et=C,Jt=0,ut=!0,er=!1,fr=!1;for(;!K;){let Jh=ee;switch(ee=!1,Ue=Ke,Ke=lt.decodeCode(A,De,we),N[T++]=Ke,Ke!==lt.CODE_STOP&&(ut=!0),Ke!==lt.CODE_STOP&&(Jt++,Et+=Jt*Ke),ge=we,we+=De.reduce((ab,ob)=>ab+ob,0),Ke){case lt.CODE_START_A:case lt.CODE_START_B:case lt.CODE_START_C:throw new D}switch(z){case lt.CODE_CODE_A:if(Ke<64)fr===er?oe+=String.fromCharCode(" ".charCodeAt(0)+Ke):oe+=String.fromCharCode(" ".charCodeAt(0)+Ke+128),fr=!1;else if(Ke<96)fr===er?oe+=String.fromCharCode(Ke-64):oe+=String.fromCharCode(Ke+64),fr=!1;else switch(Ke!==lt.CODE_STOP&&(ut=!1),Ke){case lt.CODE_FNC_1:_&&(oe.length===0?oe+="]C1":oe+=String.fromCharCode(29));break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_A:!er&&fr?(er=!0,fr=!1):er&&fr?(er=!1,fr=!1):fr=!0;break;case lt.CODE_SHIFT:ee=!0,z=lt.CODE_CODE_B;break;case lt.CODE_CODE_B:z=lt.CODE_CODE_B;break;case lt.CODE_CODE_C:z=lt.CODE_CODE_C;break;case lt.CODE_STOP:K=!0;break}break;case lt.CODE_CODE_B:if(Ke<96)fr===er?oe+=String.fromCharCode(" ".charCodeAt(0)+Ke):oe+=String.fromCharCode(" ".charCodeAt(0)+Ke+128),fr=!1;else switch(Ke!==lt.CODE_STOP&&(ut=!1),Ke){case lt.CODE_FNC_1:_&&(oe.length===0?oe+="]C1":oe+=String.fromCharCode(29));break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_B:!er&&fr?(er=!0,fr=!1):er&&fr?(er=!1,fr=!1):fr=!0;break;case lt.CODE_SHIFT:ee=!0,z=lt.CODE_CODE_A;break;case lt.CODE_CODE_A:z=lt.CODE_CODE_A;break;case lt.CODE_CODE_C:z=lt.CODE_CODE_C;break;case lt.CODE_STOP:K=!0;break}break;case lt.CODE_CODE_C:if(Ke<100)Ke<10&&(oe+="0"),oe+=Ke;else switch(Ke!==lt.CODE_STOP&&(ut=!1),Ke){case lt.CODE_FNC_1:_&&(oe.length===0?oe+="]C1":oe+=String.fromCharCode(29));break;case lt.CODE_CODE_A:z=lt.CODE_CODE_A;break;case lt.CODE_CODE_B:z=lt.CODE_CODE_B;break;case lt.CODE_STOP:K=!0;break}break}Jh&&(z=z===lt.CODE_CODE_A?lt.CODE_CODE_B:lt.CODE_CODE_A)}let As=we-ge;if(we=A.getNextUnset(we),!A.isRange(we,Math.min(A.getSize(),we+(we-ge)/2),!1))throw new X;if(Et-=Jt*Ue,Et%103!==Ue)throw new h;let Ul=oe.length;if(Ul===0)throw new X;Ul>0&&ut&&(z===lt.CODE_CODE_C?oe=oe.substring(0,Ul-2):oe=oe.substring(0,Ul-1));let mo=(w[1]+w[0])/2,Fn=ge+As/2,ao=N.length,ms=new Uint8Array(ao);for(let Jh=0;Jh<ao;Jh++)ms[Jh]=N[Jh];let Zh=[new ae(mo,p),new ae(Fn,p)];return new Oe(oe,ms,0,Zh,Se.CODE_128,new Date().getTime())}}lt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],lt.MAX_AVG_VARIANCE=.25,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.CODE_SHIFT=98,lt.CODE_CODE_C=99,lt.CODE_CODE_B=100,lt.CODE_CODE_A=101,lt.CODE_FNC_1=102,lt.CODE_FNC_2=97,lt.CODE_FNC_3=96,lt.CODE_FNC_4_A=101,lt.CODE_FNC_4_B=100,lt.CODE_START_A=103,lt.CODE_START_B=104,lt.CODE_START_C=105,lt.CODE_STOP=106;let Wi=(()=>{class V extends vi{constructor(A=!1,v=!1){super(),this.usingCheckDigit=A,this.extendedMode=v,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(A,v,_){let w=this.counters;w.fill(0),this.decodeRowResult="";let C=V.findAsteriskPattern(v,w),T=v.getNextSet(C[1]),N=v.getSize(),z,K;do{V.recordPattern(v,T,w);let Ue=V.toNarrowWidePattern(w);if(Ue<0)throw new X;z=V.patternToChar(Ue),this.decodeRowResult+=z,K=T;for(let Ke of w)T+=Ke;T=v.getNextSet(T)}while(z!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let ee=0;for(let Ue of w)ee+=Ue;let oe=T-K-ee;if(T!==N&&oe*2<ee)throw new X;if(this.usingCheckDigit){let Ue=this.decodeRowResult.length-1,Ke=0;for(let Et=0;Et<Ue;Et++)Ke+=V.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Et));if(this.decodeRowResult.charAt(Ue)!==V.ALPHABET_STRING.charAt(Ke%43))throw new h;this.decodeRowResult=this.decodeRowResult.substring(0,Ue)}if(this.decodeRowResult.length===0)throw new X;let ge;this.extendedMode?ge=V.decodeExtended(this.decodeRowResult):ge=this.decodeRowResult;let we=(C[1]+C[0])/2,De=K+ee/2;return new Oe(ge,null,0,[new ae(we,A),new ae(De,A)],Se.CODE_39,new Date().getTime())}static findAsteriskPattern(A,v){let _=A.getSize(),w=A.getNextSet(0),C=0,T=w,N=!1,z=v.length;for(let K=w;K<_;K++)if(A.get(K)!==N)v[C]++;else{if(C===z-1){if(this.toNarrowWidePattern(v)===V.ASTERISK_ENCODING&&A.isRange(Math.max(0,T-Math.floor((K-T)/2)),T,!1))return[T,K];T+=v[0]+v[1],v.copyWithin(0,2,2+C-1),v[C-1]=0,v[C]=0,C--}else C++;v[C]=1,N=!N}throw new X}static toNarrowWidePattern(A){let v=A.length,_=0,w;do{let C=2147483647;for(let z of A)z<C&&z>_&&(C=z);_=C,w=0;let T=0,N=0;for(let z=0;z<v;z++){let K=A[z];K>_&&(N|=1<<v-1-z,w++,T+=K)}if(w===3){for(let z=0;z<v&&w>0;z++){let K=A[z];if(K>_&&(w--,K*2>=T))return-1}return N}}while(w>3);return-1}static patternToChar(A){for(let v=0;v<V.CHARACTER_ENCODINGS.length;v++)if(V.CHARACTER_ENCODINGS[v]===A)return V.ALPHABET_STRING.charAt(v);if(A===V.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(A){let v=A.length,_="";for(let w=0;w<v;w++){let C=A.charAt(w);if(C==="+"||C==="$"||C==="%"||C==="/"){let T=A.charAt(w+1),N="\0";switch(C){case"+":if(T>="A"&&T<="Z")N=String.fromCharCode(T.charCodeAt(0)+32);else throw new D;break;case"$":if(T>="A"&&T<="Z")N=String.fromCharCode(T.charCodeAt(0)-64);else throw new D;break;case"%":if(T>="A"&&T<="E")N=String.fromCharCode(T.charCodeAt(0)-38);else if(T>="F"&&T<="J")N=String.fromCharCode(T.charCodeAt(0)-11);else if(T>="K"&&T<="O")N=String.fromCharCode(T.charCodeAt(0)+16);else if(T>="P"&&T<="T")N=String.fromCharCode(T.charCodeAt(0)+43);else if(T==="U")N="\0";else if(T==="V")N="@";else if(T==="W")N="`";else if(T==="X"||T==="Y"||T==="Z")N="\x7F";else throw new D;break;case"/":if(T>="A"&&T<="O")N=String.fromCharCode(T.charCodeAt(0)-32);else if(T==="Z")N=":";else throw new D;break}_+=N,w++}else _+=C}return _}}return V.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",V.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],V.ASTERISK_ENCODING=148,V})();class Lt extends vi{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(p,A,v){let _=this.decodeStart(A),w=this.decodeEnd(A),C=new j;Lt.decodeMiddle(A,_[1],w[0],C);let T=C.toString(),N=null;v!=null&&(N=v.get(E.ALLOWED_LENGTHS)),N==null&&(N=Lt.DEFAULT_ALLOWED_LENGTHS);let z=T.length,K=!1,ee=0;for(let we of N){if(z===we){K=!0;break}we>ee&&(ee=we)}if(!K&&z>ee&&(K=!0),!K)throw new D;let oe=[new ae(_[1],p),new ae(w[0],p)];return new Oe(T,null,0,oe,Se.ITF,new Date().getTime())}static decodeMiddle(p,A,v,_){let w=new Int32Array(10),C=new Int32Array(5),T=new Int32Array(5);for(w.fill(0),C.fill(0),T.fill(0);A<v;){vi.recordPattern(p,A,w);for(let z=0;z<5;z++){let K=2*z;C[z]=w[K],T[z]=w[K+1]}let N=Lt.decodeDigit(C);_.append(N.toString()),N=this.decodeDigit(T),_.append(N.toString()),w.forEach(function(z){A+=z})}}decodeStart(p){let A=Lt.skipWhiteSpace(p),v=Lt.findGuardPattern(p,A,Lt.START_PATTERN);return this.narrowLineWidth=(v[1]-v[0])/4,this.validateQuietZone(p,v[0]),v}validateQuietZone(p,A){let v=this.narrowLineWidth*10;v=v<A?v:A;for(let _=A-1;v>0&&_>=0&&!p.get(_);_--)v--;if(v!==0)throw new X}static skipWhiteSpace(p){let A=p.getSize(),v=p.getNextSet(0);if(v===A)throw new X;return v}decodeEnd(p){p.reverse();try{let A=Lt.skipWhiteSpace(p),v;try{v=Lt.findGuardPattern(p,A,Lt.END_PATTERN_REVERSED[0])}catch(w){w instanceof X&&(v=Lt.findGuardPattern(p,A,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(p,v[0]);let _=v[0];return v[0]=p.getSize()-v[1],v[1]=p.getSize()-_,v}finally{p.reverse()}}static findGuardPattern(p,A,v){let _=v.length,w=new Int32Array(_),C=p.getSize(),T=!1,N=0,z=A;w.fill(0);for(let K=A;K<C;K++)if(p.get(K)!==T)w[N]++;else{if(N===_-1){if(vi.patternMatchVariance(w,v,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[z,K];z+=w[0]+w[1],f.arraycopy(w,2,w,0,N-1),w[N-1]=0,w[N]=0,N--}else N++;w[N]=1,T=!T}throw new X}static decodeDigit(p){let A=Lt.MAX_AVG_VARIANCE,v=-1,_=Lt.PATTERNS.length;for(let w=0;w<_;w++){let C=Lt.PATTERNS[w],T=vi.patternMatchVariance(p,C,Lt.MAX_INDIVIDUAL_VARIANCE);T<A?(A=T,v=w):T===A&&(v=-1)}if(v>=0)return v%10;throw new X}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ot extends vi{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(p){let A=!1,v,_=0,w=Int32Array.from([0,0,0]);for(;!A;){w=Int32Array.from([0,0,0]),v=Ot.findGuardPattern(p,_,!1,this.START_END_PATTERN,w);let C=v[0];_=v[1];let T=C-(_-C);T>=0&&(A=p.isRange(T,C,!1))}return v}static checkChecksum(p){return Ot.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let A=p.length;if(A===0)return!1;let v=parseInt(p.charAt(A-1),10);return Ot.getStandardUPCEANChecksum(p.substring(0,A-1))===v}static getStandardUPCEANChecksum(p){let A=p.length,v=0;for(let _=A-1;_>=0;_-=2){let w=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(w<0||w>9)throw new D;v+=w}v*=3;for(let _=A-2;_>=0;_-=2){let w=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(w<0||w>9)throw new D;v+=w}return(1e3-v)%10}static decodeEnd(p,A){return Ot.findGuardPattern(p,A,!1,Ot.START_END_PATTERN,new Int32Array(Ot.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(p,A,v,_){return this.findGuardPattern(p,A,v,_,new Int32Array(_.length))}static findGuardPattern(p,A,v,_,w){let C=p.getSize();A=v?p.getNextUnset(A):p.getNextSet(A);let T=0,N=A,z=_.length,K=v;for(let ee=A;ee<C;ee++)if(p.get(ee)!==K)w[T]++;else{if(T===z-1){if(vi.patternMatchVariance(w,_,Ot.MAX_INDIVIDUAL_VARIANCE)<Ot.MAX_AVG_VARIANCE)return Int32Array.from([N,ee]);N+=w[0]+w[1];let oe=w.slice(2,w.length-1);for(let ge=0;ge<T-1;ge++)w[ge]=oe[ge];w[T-1]=0,w[T]=0,T--}else T++;w[T]=1,K=!K}throw new X}static decodeDigit(p,A,v,_){this.recordPattern(p,v,A);let w=this.MAX_AVG_VARIANCE,C=-1,T=_.length;for(let N=0;N<T;N++){let z=_[N],K=vi.patternMatchVariance(A,z,Ot.MAX_INDIVIDUAL_VARIANCE);K<w&&(w=K,C=N)}if(C>=0)return C;throw new X}}Ot.MAX_AVG_VARIANCE=.48,Ot.MAX_INDIVIDUAL_VARIANCE=.7,Ot.START_END_PATTERN=Int32Array.from([1,1,1]),Ot.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ot.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ot.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,A,v){let _=this.decodeRowStringBuffer,w=this.decodeMiddle(A,v,_),C=_.toString(),T=Hi.parseExtensionString(C),N=[new ae((v[0]+v[1])/2,p),new ae(w,p)],z=new Oe(C,null,0,N,Se.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&z.putAllMetadata(T),z}decodeMiddle(p,A,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let w=p.getSize(),C=A[1],T=0;for(let z=0;z<5&&C<w;z++){let K=Ot.decodeDigit(p,_,C,Ot.L_AND_G_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+K%10);for(let ee of _)C+=ee;K>=10&&(T|=1<<4-z),z!==4&&(C=p.getNextSet(C),C=p.getNextUnset(C))}if(v.length!==5)throw new X;let N=this.determineCheckDigit(T);if(Hi.extensionChecksum(v.toString())!==N)throw new X;return C}static extensionChecksum(p){let A=p.length,v=0;for(let _=A-2;_>=0;_-=2)v+=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);v*=3;for(let _=A-1;_>=0;_-=2)v+=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);return v*=3,v%10}determineCheckDigit(p){for(let A=0;A<10;A++)if(p===this.CHECK_DIGIT_ENCODINGS[A])return A;throw new X}static parseExtensionString(p){if(p.length!==5)return null;let A=Hi.parseExtension5String(p);return A==null?null:new Map([[rt.SUGGESTED_PRICE,A]])}static parseExtension5String(p){let A;switch(p.charAt(0)){case"0":A="\xA3";break;case"5":A="$";break;case"9":switch(p){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}A="";break;default:A="";break}let v=parseInt(p.substring(1)),_=(v/100).toString(),w=v%100,C=w<10?"0"+w:w.toString();return A+_+"."+C}}class Br{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,A,v){let _=this.decodeRowStringBuffer,w=this.decodeMiddle(A,v,_),C=_.toString(),T=Br.parseExtensionString(C),N=[new ae((v[0]+v[1])/2,p),new ae(w,p)],z=new Oe(C,null,0,N,Se.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&z.putAllMetadata(T),z}decodeMiddle(p,A,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let w=p.getSize(),C=A[1],T=0;for(let N=0;N<2&&C<w;N++){let z=Ot.decodeDigit(p,_,C,Ot.L_AND_G_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+z%10);for(let K of _)C+=K;z>=10&&(T|=1<<1-N),N!==1&&(C=p.getNextSet(C),C=p.getNextUnset(C))}if(v.length!==2)throw new X;if(parseInt(v.toString())%4!==T)throw new X;return C}static parseExtensionString(p){return p.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(p)]])}}class An{static decodeRow(p,A,v){let _=Ot.findGuardPattern(A,v,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hi().decodeRow(p,A,_)}catch{return new Br().decodeRow(p,A,_)}}}An.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ti extends Ot{constructor(){super(),this.decodeRowStringBuffer="",ti.L_AND_G_PATTERNS=ti.L_PATTERNS.map(p=>Int32Array.from(p));for(let p=10;p<20;p++){let A=ti.L_PATTERNS[p-10],v=new Int32Array(A.length);for(let _=0;_<A.length;_++)v[_]=A[A.length-_-1];ti.L_AND_G_PATTERNS[p]=v}}decodeRow(p,A,v){let _=ti.findStartGuardPattern(A),w=v==null?null:v.get(E.NEED_RESULT_POINT_CALLBACK);if(w!=null){let ut=new ae((_[0]+_[1])/2,p);w.foundPossibleResultPoint(ut)}let C=this.decodeMiddle(A,_,this.decodeRowStringBuffer),T=C.rowOffset,N=C.resultString;if(w!=null){let ut=new ae(T,p);w.foundPossibleResultPoint(ut)}let z=this.decodeEnd(A,T);if(w!=null){let ut=new ae((z[0]+z[1])/2,p);w.foundPossibleResultPoint(ut)}let K=z[1],ee=K+(K-z[0]);if(ee>=A.getSize()||!A.isRange(K,ee,!1))throw new X;let oe=N.toString();if(oe.length<8)throw new D;if(!ti.checkChecksum(oe))throw new h;let ge=(_[1]+_[0])/2,we=(z[1]+z[0])/2,De=this.getBarcodeFormat(),Ue=[new ae(ge,p),new ae(we,p)],Ke=new Oe(oe,null,0,Ue,De,new Date().getTime()),Et=0;try{let ut=An.decodeRow(p,A,z[1]);Ke.putMetadata(rt.UPC_EAN_EXTENSION,ut.getText()),Ke.putAllMetadata(ut.getResultMetadata()),Ke.addResultPoints(ut.getResultPoints()),Et=ut.getText().length}catch{}let Jt=v==null?null:v.get(E.ALLOWED_EAN_EXTENSIONS);if(Jt!=null){let ut=!1;for(let er in Jt)if(Et.toString()===er){ut=!0;break}if(!ut)throw new X}return Ke}decodeEnd(p,A){return ti.findGuardPattern(p,A,!1,ti.START_END_PATTERN,new Int32Array(ti.START_END_PATTERN.length).fill(0))}static checkChecksum(p){return ti.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let A=p.length;if(A===0)return!1;let v=parseInt(p.charAt(A-1),10);return ti.getStandardUPCEANChecksum(p.substring(0,A-1))===v}static getStandardUPCEANChecksum(p){let A=p.length,v=0;for(let _=A-1;_>=0;_-=2){let w=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(w<0||w>9)throw new D;v+=w}v*=3;for(let _=A-2;_>=0;_-=2){let w=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(w<0||w>9)throw new D;v+=w}return(1e3-v)%10}}let Rt=(()=>{class V extends ti{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(A,v,_){let w=this.decodeMiddleCounters;w[0]=0,w[1]=0,w[2]=0,w[3]=0;let C=A.getSize(),T=v[1],N=0;for(let K=0;K<6&&T<C;K++){let ee=ti.decodeDigit(A,w,T,ti.L_AND_G_PATTERNS);_+=String.fromCharCode("0".charCodeAt(0)+ee%10);for(let oe of w)T+=oe;ee>=10&&(N|=1<<5-K)}_=V.determineFirstDigit(_,N),T=ti.findGuardPattern(A,T,!0,ti.MIDDLE_PATTERN,new Int32Array(ti.MIDDLE_PATTERN.length).fill(0))[1];for(let K=0;K<6&&T<C;K++){let ee=ti.decodeDigit(A,w,T,ti.L_PATTERNS);_+=String.fromCharCode("0".charCodeAt(0)+ee);for(let oe of w)T+=oe}return{rowOffset:T,resultString:_}}getBarcodeFormat(){return Se.EAN_13}static determineFirstDigit(A,v){for(let _=0;_<10;_++)if(v===this.FIRST_DIGIT_ENCODINGS[_])return A=String.fromCharCode("0".charCodeAt(0)+_)+A,A;throw new X}}return V.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],V})();class Be extends ti{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(p,A,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let w=p.getSize(),C=A[1];for(let N=0;N<4&&C<w;N++){let z=ti.decodeDigit(p,_,C,ti.L_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+z);for(let K of _)C+=K}C=ti.findGuardPattern(p,C,!0,ti.MIDDLE_PATTERN,new Int32Array(ti.MIDDLE_PATTERN.length).fill(0))[1];for(let N=0;N<4&&C<w;N++){let z=ti.decodeDigit(p,_,C,ti.L_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+z);for(let K of _)C+=K}return{rowOffset:C,resultString:v}}getBarcodeFormat(){return Se.EAN_8}}class Gt extends ti{constructor(){super(...arguments),this.ean13Reader=new Rt}getBarcodeFormat(){return Se.UPC_A}decode(p,A){return this.maybeReturnResult(this.ean13Reader.decode(p))}decodeRow(p,A,v){return this.maybeReturnResult(this.ean13Reader.decodeRow(p,A,v))}decodeMiddle(p,A,v){return this.ean13Reader.decodeMiddle(p,A,v)}maybeReturnResult(p){let A=p.getText();if(A.charAt(0)==="0"){let v=new Oe(A.substring(1),null,null,p.getResultPoints(),Se.UPC_A);return p.getResultMetadata()!=null&&v.putAllMetadata(p.getResultMetadata()),v}else throw new X}reset(){this.ean13Reader.reset()}}class Bt extends ti{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(p,A,v){let _=this.decodeMiddleCounters.map(z=>z);_[0]=0,_[1]=0,_[2]=0,_[3]=0;let w=p.getSize(),C=A[1],T=0;for(let z=0;z<6&&C<w;z++){let K=Bt.decodeDigit(p,_,C,Bt.L_AND_G_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+K%10);for(let ee of _)C+=ee;K>=10&&(T|=1<<5-z)}let N=Bt.determineNumSysAndCheckDigit(v,T);return{rowOffset:C,resultString:N}}decodeEnd(p,A){return Bt.findGuardPatternWithoutCounters(p,A,!0,Bt.MIDDLE_END_PATTERN)}checkChecksum(p){return ti.checkChecksum(Bt.convertUPCEtoUPCA(p))}static determineNumSysAndCheckDigit(p,A){for(let v=0;v<=1;v++)for(let _=0;_<10;_++)if(A===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[v][_]){let w=String.fromCharCode("0".charCodeAt(0)+v),C=String.fromCharCode("0".charCodeAt(0)+_);return w+p+C}throw X.getNotFoundInstance()}getBarcodeFormat(){return Se.UPC_E}static convertUPCEtoUPCA(p){let A=p.slice(1,7).split("").map(w=>w.charCodeAt(0)),v=new j;v.append(p.charAt(0));let _=A[5];switch(_){case 0:case 1:case 2:v.appendChars(A,0,2),v.append(_),v.append("0000"),v.appendChars(A,2,3);break;case 3:v.appendChars(A,0,3),v.append("00000"),v.appendChars(A,3,2);break;case 4:v.appendChars(A,0,4),v.append("00000"),v.append(A[4]);break;default:v.appendChars(A,0,5),v.append("0000"),v.append(_);break}return p.length>=8&&v.append(p.charAt(7)),v.toString()}}Bt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Qi extends vi{constructor(p){super();let A=p==null?null:p.get(E.POSSIBLE_FORMATS),v=[];e(A)?(v.push(new Rt),v.push(new Gt),v.push(new Be),v.push(new Bt)):(A.indexOf(Se.EAN_13)>-1&&v.push(new Rt),A.indexOf(Se.UPC_A)>-1&&v.push(new Gt),A.indexOf(Se.EAN_8)>-1&&v.push(new Be),A.indexOf(Se.UPC_E)>-1&&v.push(new Bt)),this.readers=v}decodeRow(p,A,v){for(let _ of this.readers)try{let w=_.decodeRow(p,A,v),C=w.getBarcodeFormat()===Se.EAN_13&&w.getText().charAt(0)==="0",T=v==null?null:v.get(E.POSSIBLE_FORMATS),N=T==null||T.includes(Se.UPC_A);if(C&&N){let z=w.getRawBytes(),K=new Oe(w.getText().substring(1),z,z?z.length:null,w.getResultPoints(),Se.UPC_A);return K.putAllMetadata(w.getResultMetadata()),K}return w}catch{}throw new X}reset(){for(let p of this.readers)p.reset()}}let _i=(()=>{class V extends vi{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(A,v){for(let _=0;_<v.length;_++)if(vi.patternMatchVariance(A,v[_],V.MAX_INDIVIDUAL_VARIANCE)<V.MAX_AVG_VARIANCE)return _;throw new X}static count(A){return Xt.sum(new Int32Array(A))}static increment(A,v){let _=0,w=v[0];for(let C=1;C<A.length;C++)v[C]>w&&(w=v[C],_=C);A[_]++}static decrement(A,v){let _=0,w=v[0];for(let C=1;C<A.length;C++)v[C]<w&&(w=v[C],_=C);A[_]--}static isFinderPattern(A){let v=A[0]+A[1],_=v+A[2]+A[3],w=v/_;if(w>=V.MIN_FINDER_PATTERN_RATIO&&w<=V.MAX_FINDER_PATTERN_RATIO){let C=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER;for(let N of A)N>T&&(T=N),N<C&&(C=N);return T<10*C}return!1}}return V.MAX_AVG_VARIANCE=.2,V.MAX_INDIVIDUAL_VARIANCE=.45,V.MIN_FINDER_PATTERN_RATIO=9.5/12,V.MAX_FINDER_PATTERN_RATIO=12.5/14,V})();class Cr{constructor(p,A){this.value=p,this.checksumPortion=A}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(p){if(!(p instanceof Cr))return!1;let A=p;return this.value===A.value&&this.checksumPortion===A.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class zr{constructor(p,A,v,_,w){this.value=p,this.startEnd=A,this.value=p,this.startEnd=A,this.resultPoints=new Array,this.resultPoints.push(new ae(v,w)),this.resultPoints.push(new ae(_,w))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(p){if(!(p instanceof zr))return!1;let A=p;return this.value===A.value}hashCode(){return this.value}}class en{constructor(){}static getRSSvalue(p,A,v){let _=0;for(let N of p)_+=N;let w=0,C=0,T=p.length;for(let N=0;N<T-1;N++){let z;for(z=1,C|=1<<N;z<p[N];z++,C&=~(1<<N)){let K=en.combins(_-z-1,T-N-2);if(v&&C===0&&_-z-(T-N-1)>=T-N-1&&(K-=en.combins(_-z-(T-N),T-N-2)),T-N-1>1){let ee=0;for(let oe=_-z-(T-N-2);oe>A;oe--)ee+=en.combins(_-z-oe-1,T-N-3);K-=ee*(T-1-N)}else _-z>A&&K--;w+=K}_-=z}return w}static combins(p,A){let v,_;p-A>A?(_=A,v=p-A):(_=p-A,v=A);let w=1,C=1;for(let T=p;T>v;T--)w*=T,C<=_&&(w/=C,C++);for(;C<=_;)w/=C,C++;return w}}class Ga{static buildBitArray(p){let A=p.length*2-1;p[p.length-1].getRightChar()==null&&(A-=1);let v=12*A,_=new b(v),w=0,T=p[0].getRightChar().getValue();for(let N=11;N>=0;--N)T&1<<N&&_.set(w),w++;for(let N=1;N<p.length;++N){let z=p[N],K=z.getLeftChar().getValue();for(let ee=11;ee>=0;--ee)K&1<<ee&&_.set(w),w++;if(z.getRightChar()!=null){let ee=z.getRightChar().getValue();for(let oe=11;oe>=0;--oe)ee&1<<oe&&_.set(w),w++}}return _}}class Er{constructor(p,A){A?this.decodedInformation=null:(this.finished=p,this.decodedInformation=A)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ga{constructor(p){this.newPosition=p}getNewPosition(){return this.newPosition}}let Di=(()=>{class V extends ga{constructor(A,v){super(A),this.value=v}getValue(){return this.value}isFNC1(){return this.value===V.FNC1}}return V.FNC1="$",V})();class Oo extends ga{constructor(p,A,v){super(p),v?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=A}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let us=(()=>{class V extends ga{constructor(A,v,_){if(super(A),v<0||v>10||_<0||_>10)throw new D;this.firstDigit=v,this.secondDigit=_}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===V.FNC1}isSecondDigitFNC1(){return this.secondDigit===V.FNC1}isAnyFNC1(){return this.firstDigit===V.FNC1||this.secondDigit===V.FNC1}}return V.FNC1=10,V})();class Wt{constructor(){}static parseFieldsInGeneralPurpose(p){if(!p)return null;if(p.length<2)throw new X;let A=p.substring(0,2);for(let w of Wt.TWO_DIGIT_DATA_LENGTH)if(w[0]===A)return w[1]===Wt.VARIABLE_LENGTH?Wt.processVariableAI(2,w[2],p):Wt.processFixedAI(2,w[1],p);if(p.length<3)throw new X;let v=p.substring(0,3);for(let w of Wt.THREE_DIGIT_DATA_LENGTH)if(w[0]===v)return w[1]===Wt.VARIABLE_LENGTH?Wt.processVariableAI(3,w[2],p):Wt.processFixedAI(3,w[1],p);for(let w of Wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(w[0]===v)return w[1]===Wt.VARIABLE_LENGTH?Wt.processVariableAI(4,w[2],p):Wt.processFixedAI(4,w[1],p);if(p.length<4)throw new X;let _=p.substring(0,4);for(let w of Wt.FOUR_DIGIT_DATA_LENGTH)if(w[0]===_)return w[1]===Wt.VARIABLE_LENGTH?Wt.processVariableAI(4,w[2],p):Wt.processFixedAI(4,w[1],p);throw new X}static processFixedAI(p,A,v){if(v.length<p)throw new X;let _=v.substring(0,p);if(v.length<p+A)throw new X;let w=v.substring(p,p+A),C=v.substring(p+A),T="("+_+")"+w,N=Wt.parseFieldsInGeneralPurpose(C);return N==null?T:T+N}static processVariableAI(p,A,v){let _=v.substring(0,p),w;v.length<p+A?w=v.length:w=p+A;let C=v.substring(p,w),T=v.substring(w),N="("+_+")"+C,z=Wt.parseFieldsInGeneralPurpose(T);return z==null?N:N+z}}Wt.VARIABLE_LENGTH=[],Wt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Wt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Wt.VARIABLE_LENGTH,20],["22",Wt.VARIABLE_LENGTH,29],["30",Wt.VARIABLE_LENGTH,8],["37",Wt.VARIABLE_LENGTH,8],["90",Wt.VARIABLE_LENGTH,30],["91",Wt.VARIABLE_LENGTH,30],["92",Wt.VARIABLE_LENGTH,30],["93",Wt.VARIABLE_LENGTH,30],["94",Wt.VARIABLE_LENGTH,30],["95",Wt.VARIABLE_LENGTH,30],["96",Wt.VARIABLE_LENGTH,30],["97",Wt.VARIABLE_LENGTH,3],["98",Wt.VARIABLE_LENGTH,30],["99",Wt.VARIABLE_LENGTH,30]],Wt.THREE_DIGIT_DATA_LENGTH=[["240",Wt.VARIABLE_LENGTH,30],["241",Wt.VARIABLE_LENGTH,30],["242",Wt.VARIABLE_LENGTH,6],["250",Wt.VARIABLE_LENGTH,30],["251",Wt.VARIABLE_LENGTH,30],["253",Wt.VARIABLE_LENGTH,17],["254",Wt.VARIABLE_LENGTH,20],["400",Wt.VARIABLE_LENGTH,30],["401",Wt.VARIABLE_LENGTH,30],["402",17],["403",Wt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Wt.VARIABLE_LENGTH,20],["421",Wt.VARIABLE_LENGTH,15],["422",3],["423",Wt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Wt.VARIABLE_LENGTH,15],["391",Wt.VARIABLE_LENGTH,18],["392",Wt.VARIABLE_LENGTH,15],["393",Wt.VARIABLE_LENGTH,18],["703",Wt.VARIABLE_LENGTH,30]],Wt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Wt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Wt.VARIABLE_LENGTH,20],["8003",Wt.VARIABLE_LENGTH,30],["8004",Wt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Wt.VARIABLE_LENGTH,30],["8008",Wt.VARIABLE_LENGTH,12],["8018",18],["8020",Wt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Wt.VARIABLE_LENGTH,70],["8200",Wt.VARIABLE_LENGTH,70]];class hs{constructor(p){this.buffer=new j,this.information=p}decodeAllCodes(p,A){let v=A,_=null;do{let w=this.decodeGeneralPurposeField(v,_),C=Wt.parseFieldsInGeneralPurpose(w.getNewString());if(C!=null&&p.append(C),w.isRemaining()?_=""+w.getRemainingValue():_=null,v===w.getNewPosition())break;v=w.getNewPosition()}while(!0);return p.toString()}isStillNumeric(p){if(p+7>this.information.getSize())return p+4<=this.information.getSize();for(let A=p;A<p+3;++A)if(this.information.get(A))return!0;return this.information.get(p+3)}decodeNumeric(p){if(p+7>this.information.getSize()){let w=this.extractNumericValueFromBitArray(p,4);return w===0?new us(this.information.getSize(),us.FNC1,us.FNC1):new us(this.information.getSize(),w-1,us.FNC1)}let A=this.extractNumericValueFromBitArray(p,7),v=(A-8)/11,_=(A-8)%11;return new us(p+7,v,_)}extractNumericValueFromBitArray(p,A){return hs.extractNumericValueFromBitArray(this.information,p,A)}static extractNumericValueFromBitArray(p,A,v){let _=0;for(let w=0;w<v;++w)p.get(A+w)&&(_|=1<<v-w-1);return _}decodeGeneralPurposeField(p,A){this.buffer.setLengthToZero(),A!=null&&this.buffer.append(A),this.current.setPosition(p);let v=this.parseBlocks();return v!=null&&v.isRemaining()?new Oo(this.current.getPosition(),this.buffer.toString(),v.getRemainingValue()):new Oo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let p,A;do{let v=this.current.getPosition();if(this.current.isAlpha()?(A=this.parseAlphaBlock(),p=A.isFinished()):this.current.isIsoIec646()?(A=this.parseIsoIec646Block(),p=A.isFinished()):(A=this.parseNumericBlock(),p=A.isFinished()),!(v!==this.current.getPosition())&&!p)break}while(!p);return A.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let p=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFirstDigitFNC1()){let A;return p.isSecondDigitFNC1()?A=new Oo(this.current.getPosition(),this.buffer.toString()):A=new Oo(this.current.getPosition(),this.buffer.toString(),p.getSecondDigit()),new Er(!0,A)}if(this.buffer.append(p.getFirstDigit()),p.isSecondDigitFNC1()){let A=new Oo(this.current.getPosition(),this.buffer.toString());return new Er(!0,A)}this.buffer.append(p.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Er(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let p=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let A=new Oo(this.current.getPosition(),this.buffer.toString());return new Er(!0,A)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Er(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let p=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let A=new Oo(this.current.getPosition(),this.buffer.toString());return new Er(!0,A)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Er(!1)}isStillIsoIec646(p){if(p+5>this.information.getSize())return!1;let A=this.extractNumericValueFromBitArray(p,5);if(A>=5&&A<16)return!0;if(p+7>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(p,7);if(v>=64&&v<116)return!0;if(p+8>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(p,8);return _>=232&&_<253}decodeIsoIec646(p){let A=this.extractNumericValueFromBitArray(p,5);if(A===15)return new Di(p+5,Di.FNC1);if(A>=5&&A<15)return new Di(p+5,"0"+(A-5));let v=this.extractNumericValueFromBitArray(p,7);if(v>=64&&v<90)return new Di(p+7,""+(v+1));if(v>=90&&v<116)return new Di(p+7,""+(v+7));let _=this.extractNumericValueFromBitArray(p,8),w;switch(_){case 232:w="!";break;case 233:w='"';break;case 234:w="%";break;case 235:w="&";break;case 236:w="'";break;case 237:w="(";break;case 238:w=")";break;case 239:w="*";break;case 240:w="+";break;case 241:w=",";break;case 242:w="-";break;case 243:w=".";break;case 244:w="/";break;case 245:w=":";break;case 246:w=";";break;case 247:w="<";break;case 248:w="=";break;case 249:w=">";break;case 250:w="?";break;case 251:w="_";break;case 252:w=" ";break;default:throw new D}return new Di(p+8,w)}isStillAlpha(p){if(p+5>this.information.getSize())return!1;let A=this.extractNumericValueFromBitArray(p,5);if(A>=5&&A<16)return!0;if(p+6>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(p,6);return v>=16&&v<63}decodeAlphanumeric(p){let A=this.extractNumericValueFromBitArray(p,5);if(A===15)return new Di(p+5,Di.FNC1);if(A>=5&&A<15)return new Di(p+5,"0"+(A-5));let v=this.extractNumericValueFromBitArray(p,6);if(v>=32&&v<58)return new Di(p+6,""+(v+33));let _;switch(v){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new Bi("Decoding invalid alphanumeric value: "+v)}return new Di(p+6,_)}isAlphaTo646ToAlphaLatch(p){if(p+1>this.information.getSize())return!1;for(let A=0;A<5&&A+p<this.information.getSize();++A)if(A===2){if(!this.information.get(p+2))return!1}else if(this.information.get(p+A))return!1;return!0}isAlphaOr646ToNumericLatch(p){if(p+3>this.information.getSize())return!1;for(let A=p;A<p+3;++A)if(this.information.get(A))return!1;return!0}isNumericToAlphaNumericLatch(p){if(p+1>this.information.getSize())return!1;for(let A=0;A<4&&A+p<this.information.getSize();++A)if(this.information.get(p+A))return!1;return!0}}class Ol{constructor(p){this.information=p,this.generalDecoder=new hs(p)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let no=(()=>{class V extends Ol{constructor(A){super(A)}encodeCompressedGtin(A,v){A.append("(01)");let _=A.length();A.append("9"),this.encodeCompressedGtinWithoutAI(A,v,_)}encodeCompressedGtinWithoutAI(A,v,_){for(let w=0;w<4;++w){let C=this.getGeneralDecoder().extractNumericValueFromBitArray(v+10*w,10);C/100===0&&A.append("0"),C/10===0&&A.append("0"),A.append(C)}V.appendCheckDigit(A,_)}static appendCheckDigit(A,v){let _=0;for(let w=0;w<13;w++){let C=A.charAt(w+v).charCodeAt(0)-"0".charCodeAt(0);_+=w&1?C:3*C}_=10-_%10,_===10&&(_=0),A.append(_)}}return V.GTIN_SIZE=40,V})(),Kh=(()=>{class V extends no{constructor(A){super(A)}parseInformation(){let A=new j;A.append("(01)");let v=A.length(),_=this.getGeneralDecoder().extractNumericValueFromBitArray(V.HEADER_SIZE,4);return A.append(_),this.encodeCompressedGtinWithoutAI(A,V.HEADER_SIZE+4,v),this.getGeneralDecoder().decodeAllCodes(A,V.HEADER_SIZE+44)}}return V.HEADER_SIZE=1+1+2,V})(),Xh=(()=>{class V extends Ol{constructor(A){super(A)}parseInformation(){let A=new j;return this.getGeneralDecoder().decodeAllCodes(A,V.HEADER_SIZE)}}return V.HEADER_SIZE=2+1+2,V})();class uu extends no{constructor(p){super(p)}encodeCompressedWeight(p,A,v){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(A,v);this.addWeightCode(p,_);let w=this.checkWeight(_),C=1e5;for(let T=0;T<5;++T)w/C===0&&p.append("0"),C/=10;p.append(w)}}let Ju=(()=>{class V extends uu{constructor(A){super(A)}parseInformation(){if(this.getInformation().getSize()!=V.HEADER_SIZE+uu.GTIN_SIZE+V.WEIGHT_SIZE)throw new X;let A=new j;return this.encodeCompressedGtin(A,V.HEADER_SIZE),this.encodeCompressedWeight(A,V.HEADER_SIZE+uu.GTIN_SIZE,V.WEIGHT_SIZE),A.toString()}}return V.HEADER_SIZE=4+1,V.WEIGHT_SIZE=15,V})();class fe extends Ju{constructor(p){super(p)}addWeightCode(p,A){p.append("(3103)")}checkWeight(p){return p}}class ke extends Ju{constructor(p){super(p)}addWeightCode(p,A){A<1e4?p.append("(3202)"):p.append("(3203)")}checkWeight(p){return p<1e4?p:p-1e4}}let Ze=(()=>{class V extends no{constructor(A){super(A)}parseInformation(){if(this.getInformation().getSize()<V.HEADER_SIZE+no.GTIN_SIZE)throw new X;let A=new j;this.encodeCompressedGtin(A,V.HEADER_SIZE);let v=this.getGeneralDecoder().extractNumericValueFromBitArray(V.HEADER_SIZE+no.GTIN_SIZE,V.LAST_DIGIT_SIZE);A.append("(392"),A.append(v),A.append(")");let _=this.getGeneralDecoder().decodeGeneralPurposeField(V.HEADER_SIZE+no.GTIN_SIZE+V.LAST_DIGIT_SIZE,null);return A.append(_.getNewString()),A.toString()}}return V.HEADER_SIZE=5+1+2,V.LAST_DIGIT_SIZE=2,V})(),$e=(()=>{class V extends no{constructor(A){super(A)}parseInformation(){if(this.getInformation().getSize()<V.HEADER_SIZE+no.GTIN_SIZE)throw new X;let A=new j;this.encodeCompressedGtin(A,V.HEADER_SIZE);let v=this.getGeneralDecoder().extractNumericValueFromBitArray(V.HEADER_SIZE+no.GTIN_SIZE,V.LAST_DIGIT_SIZE);A.append("(393"),A.append(v),A.append(")");let _=this.getGeneralDecoder().extractNumericValueFromBitArray(V.HEADER_SIZE+no.GTIN_SIZE+V.LAST_DIGIT_SIZE,V.FIRST_THREE_DIGITS_SIZE);_/100==0&&A.append("0"),_/10==0&&A.append("0"),A.append(_);let w=this.getGeneralDecoder().decodeGeneralPurposeField(V.HEADER_SIZE+no.GTIN_SIZE+V.LAST_DIGIT_SIZE+V.FIRST_THREE_DIGITS_SIZE,null);return A.append(w.getNewString()),A.toString()}}return V.HEADER_SIZE=5+1+2,V.LAST_DIGIT_SIZE=2,V.FIRST_THREE_DIGITS_SIZE=10,V})(),je=(()=>{class V extends uu{constructor(A,v,_){super(A),this.dateCode=_,this.firstAIdigits=v}parseInformation(){if(this.getInformation().getSize()!=V.HEADER_SIZE+V.GTIN_SIZE+V.WEIGHT_SIZE+V.DATE_SIZE)throw new X;let A=new j;return this.encodeCompressedGtin(A,V.HEADER_SIZE),this.encodeCompressedWeight(A,V.HEADER_SIZE+V.GTIN_SIZE,V.WEIGHT_SIZE),this.encodeCompressedDate(A,V.HEADER_SIZE+V.GTIN_SIZE+V.WEIGHT_SIZE),A.toString()}encodeCompressedDate(A,v){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(v,V.DATE_SIZE);if(_==38400)return;A.append("("),A.append(this.dateCode),A.append(")");let w=_%32;_/=32;let C=_%12+1;_/=12;let T=_;T/10==0&&A.append("0"),A.append(T),C/10==0&&A.append("0"),A.append(C),w/10==0&&A.append("0"),A.append(w)}addWeightCode(A,v){A.append("("),A.append(this.firstAIdigits),A.append(v/1e5),A.append(")")}checkWeight(A){return A%1e5}}return V.HEADER_SIZE=7+1,V.WEIGHT_SIZE=20,V.DATE_SIZE=16,V})();function ai(V){try{if(V.get(1))return new Kh(V);if(!V.get(2))return new Xh(V);switch(hs.extractNumericValueFromBitArray(V,1,4)){case 4:return new fe(V);case 5:return new ke(V)}switch(hs.extractNumericValueFromBitArray(V,1,5)){case 12:return new Ze(V);case 13:return new $e(V)}switch(hs.extractNumericValueFromBitArray(V,1,7)){case 56:return new je(V,"310","11");case 57:return new je(V,"320","11");case 58:return new je(V,"310","13");case 59:return new je(V,"320","13");case 60:return new je(V,"310","15");case 61:return new je(V,"320","15");case 62:return new je(V,"310","17");case 63:return new je(V,"320","17")}}catch(p){throw console.log(p),new Bi("unknown decoder: "+V)}}class Ai{constructor(p,A,v,_){this.leftchar=p,this.rightchar=A,this.finderpattern=v,this.maybeLast=_}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(p,A){return p instanceof Ai?Ai.equalsOrNull(p.leftchar,A.leftchar)&&Ai.equalsOrNull(p.rightchar,A.rightchar)&&Ai.equalsOrNull(p.finderpattern,A.finderpattern):!1}static equalsOrNull(p,A){return p===null?A===null:Ai.equals(p,A)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ui{constructor(p,A,v){this.pairs=p,this.rowNumber=A,this.wasReversed=v}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(p){return this.checkEqualitity(this,p)}toString(){return"{ "+this.pairs+" }"}equals(p,A){return p instanceof Ui?this.checkEqualitity(p,A)&&p.wasReversed===A.wasReversed:!1}checkEqualitity(p,A){if(!p||!A)return;let v;return p.forEach((_,w)=>{A.forEach(C=>{_.getLeftChar().getValue()===C.getLeftChar().getValue()&&_.getRightChar().getValue()===C.getRightChar().getValue()&&_.getFinderPatter().getValue()===C.getFinderPatter().getValue()&&(v=!0)})}),v}}class ze extends _i{constructor(p){super(...arguments),this.pairs=new Array(ze.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=p===!0}decodeRow(p,A,v){this.pairs.length=0,this.startFromEven=!1;try{return ze.constructResult(this.decodeRow2pairs(p,A))}catch(_){this.verbose&&console.log(_)}return this.pairs.length=0,this.startFromEven=!0,ze.constructResult(this.decodeRow2pairs(p,A))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(p,A){let v=!1;for(;!v;)try{this.pairs.push(this.retrieveNextPair(A,this.pairs,p))}catch(w){if(w instanceof X){if(!this.pairs.length)throw new X;v=!0}}if(this.checkChecksum())return this.pairs;let _;if(this.rows.length?_=!0:_=!1,this.storeRow(p,!1),_){let w=this.checkRowsBoolean(!1);if(w!=null||(w=this.checkRowsBoolean(!0),w!=null))return w}throw new X}checkRowsBoolean(p){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,p&&(this.rows=this.rows.reverse());let A=null;try{A=this.checkRows(new Array,0)}catch(v){this.verbose&&console.log(v)}return p&&(this.rows=this.rows.reverse()),A}checkRows(p,A){for(let v=A;v<this.rows.length;v++){let _=this.rows[v];this.pairs.length=0;for(let C of p)this.pairs.push(C.getPairs());if(this.pairs.push(_.getPairs()),!ze.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let w=new Array(p);w.push(_);try{return this.checkRows(w,v+1)}catch(C){this.verbose&&console.log(C)}}throw new X}static isValidSequence(p){for(let A of ze.FINDER_PATTERN_SEQUENCES){if(p.length>A.length)continue;let v=!0;for(let _=0;_<p.length;_++)if(p[_].getFinderPattern().getValue()!=A[_]){v=!1;break}if(v)return!0}return!1}storeRow(p,A){let v=0,_=!1,w=!1;for(;v<this.rows.length;){let C=this.rows[v];if(C.getRowNumber()>p){w=C.isEquivalent(this.pairs);break}_=C.isEquivalent(this.pairs),v++}w||_||ze.isPartialRow(this.pairs,this.rows)||(this.rows.push(v,new Ui(this.pairs,p,A)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(p,A){for(let v of A)if(v.getPairs().length!==p.length){for(let _ of v.getPairs())for(let w of p)if(Ai.equals(_,w))break}}static isPartialRow(p,A){for(let v of A){let _=!0;for(let w of p){let C=!1;for(let T of v.getPairs())if(w.equals(T)){C=!0;break}if(!C){_=!1;break}}if(_)return!0}return!1}getRows(){return this.rows}static constructResult(p){let A=Ga.buildBitArray(p),_=ai(A).parseInformation(),w=p[0].getFinderPattern().getResultPoints(),C=p[p.length-1].getFinderPattern().getResultPoints(),T=[w[0],w[1],C[0],C[1]];return new Oe(_,null,null,T,Se.RSS_EXPANDED,null)}checkChecksum(){let p=this.pairs.get(0),A=p.getLeftChar(),v=p.getRightChar();if(v==null)return!1;let _=v.getChecksumPortion(),w=2;for(let T=1;T<this.pairs.size();++T){let N=this.pairs.get(T);_+=N.getLeftChar().getChecksumPortion(),w++;let z=N.getRightChar();z!=null&&(_+=z.getChecksumPortion(),w++)}return _%=211,211*(w-4)+_==A.getValue()}static getNextSecondBar(p,A){let v;return p.get(A)?(v=p.getNextUnset(A),v=p.getNextSet(v)):(v=p.getNextSet(A),v=p.getNextUnset(v)),v}retrieveNextPair(p,A,v){let _=A.length%2==0;this.startFromEven&&(_=!_);let w,C=!0,T=-1;do this.findNextPair(p,A,T),w=this.parseFoundFinderPattern(p,v,_),w==null?T=ze.getNextSecondBar(p,this.startEnd[0]):C=!1;while(C);let N=this.decodeDataCharacter(p,w,_,!0);if(!this.isEmptyPair(A)&&A[A.length-1].mustBeLast())throw new X;let z;try{z=this.decodeDataCharacter(p,w,_,!1)}catch(K){z=null,this.verbose&&console.log(K)}return new Ai(N,z,w,!0)}isEmptyPair(p){return p.length===0}findNextPair(p,A,v){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let w=p.getSize(),C;v>=0?C=v:this.isEmptyPair(A)?C=0:C=A[A.length-1].getFinderPattern().getStartEnd()[1];let T=A.length%2!=0;this.startFromEven&&(T=!T);let N=!1;for(;C<w&&(N=!p.get(C),!!N);)C++;let z=0,K=C;for(let ee=C;ee<w;ee++)if(p.get(ee)!=N)_[z]++;else{if(z==3){if(T&&ze.reverseCounters(_),ze.isFinderPattern(_)){this.startEnd[0]=K,this.startEnd[1]=ee;return}T&&ze.reverseCounters(_),K+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,z--}else z++;_[z]=1,N=!N}throw new X}static reverseCounters(p){let A=p.length;for(let v=0;v<A/2;++v){let _=p[v];p[v]=p[A-v-1],p[A-v-1]=_}}parseFoundFinderPattern(p,A,v){let _,w,C;if(v){let z=this.startEnd[0]-1;for(;z>=0&&!p.get(z);)z--;z++,_=this.startEnd[0]-z,w=z,C=this.startEnd[1]}else w=this.startEnd[0],C=p.getNextUnset(this.startEnd[1]+1),_=C-this.startEnd[1];let T=this.getDecodeFinderCounters();f.arraycopy(T,0,T,1,T.length-1),T[0]=_;let N;try{N=this.parseFinderValue(T,ze.FINDER_PATTERNS)}catch{return null}return new zr(N,[w,C],w,C,A)}decodeDataCharacter(p,A,v,_){let w=this.getDataCharacterCounters();for(let Fn=0;Fn<w.length;Fn++)w[Fn]=0;if(_)ze.recordPatternInReverse(p,A.getStartEnd()[0],w);else{ze.recordPattern(p,A.getStartEnd()[1],w);for(let Fn=0,ao=w.length-1;Fn<ao;Fn++,ao--){let ms=w[Fn];w[Fn]=w[ao],w[ao]=ms}}let C=17,T=Xt.sum(new Int32Array(w))/C,N=(A.getStartEnd()[1]-A.getStartEnd()[0])/15;if(Math.abs(T-N)/N>.3)throw new X;let z=this.getOddCounts(),K=this.getEvenCounts(),ee=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let Fn=0;Fn<w.length;Fn++){let ao=1*w[Fn]/T,ms=ao+.5;if(ms<1){if(ao<.3)throw new X;ms=1}else if(ms>8){if(ao>8.7)throw new X;ms=8}let Zh=Fn/2;Fn&1?(K[Zh]=ms,oe[Zh]=ao-ms):(z[Zh]=ms,ee[Zh]=ao-ms)}this.adjustOddEvenCounts(C);let ge=4*A.getValue()+(v?0:2)+(_?0:1)-1,we=0,De=0;for(let Fn=z.length-1;Fn>=0;Fn--){if(ze.isNotA1left(A,v,_)){let ao=ze.WEIGHTS[ge][2*Fn];De+=z[Fn]*ao}we+=z[Fn]}let Ue=0;for(let Fn=K.length-1;Fn>=0;Fn--)if(ze.isNotA1left(A,v,_)){let ao=ze.WEIGHTS[ge][2*Fn+1];Ue+=K[Fn]*ao}let Ke=De+Ue;if(we&1||we>13||we<4)throw new X;let Et=(13-we)/2,Jt=ze.SYMBOL_WIDEST[Et],ut=9-Jt,er=en.getRSSvalue(z,Jt,!0),fr=en.getRSSvalue(K,ut,!1),As=ze.EVEN_TOTAL_SUBSET[Et],Ul=ze.GSUM[Et],mo=er*As+fr+Ul;return new Cr(mo,Ke)}static isNotA1left(p,A,v){return!(p.getValue()==0&&A&&v)}adjustOddEvenCounts(p){let A=Xt.sum(new Int32Array(this.getOddCounts())),v=Xt.sum(new Int32Array(this.getEvenCounts())),_=!1,w=!1;A>13?w=!0:A<4&&(_=!0);let C=!1,T=!1;v>13?T=!0:v<4&&(C=!0);let N=A+v-p,z=(A&1)==1,K=(v&1)==0;if(N==1)if(z){if(K)throw new X;w=!0}else{if(!K)throw new X;T=!0}else if(N==-1)if(z){if(K)throw new X;_=!0}else{if(!K)throw new X;C=!0}else if(N==0){if(z){if(!K)throw new X;A<v?(_=!0,T=!0):(w=!0,C=!0)}else if(K)throw new X}else throw new X;if(_){if(w)throw new X;ze.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&ze.decrement(this.getOddCounts(),this.getOddRoundingErrors()),C){if(T)throw new X;ze.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&ze.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ze.SYMBOL_WIDEST=[7,5,4,3,1],ze.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ze.GSUM=[0,348,1388,2948,3988],ze.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ze.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ze.FINDER_PAT_A=0,ze.FINDER_PAT_B=1,ze.FINDER_PAT_C=2,ze.FINDER_PAT_D=3,ze.FINDER_PAT_E=4,ze.FINDER_PAT_F=5,ze.FINDER_PATTERN_SEQUENCES=[[ze.FINDER_PAT_A,ze.FINDER_PAT_A],[ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B],[ze.FINDER_PAT_A,ze.FINDER_PAT_C,ze.FINDER_PAT_B,ze.FINDER_PAT_D],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_C],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_D,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_D],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_E],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F]],ze.MAX_PAIRS=11;class Ji extends Cr{constructor(p,A,v){super(p,A),this.count=0,this.finderPattern=v}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Zt extends _i{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(p,A,v){let _=this.decodePair(A,!1,p,v);Zt.addOrTally(this.possibleLeftPairs,_),A.reverse();let w=this.decodePair(A,!0,p,v);Zt.addOrTally(this.possibleRightPairs,w),A.reverse();for(let C of this.possibleLeftPairs)if(C.getCount()>1){for(let T of this.possibleRightPairs)if(T.getCount()>1&&Zt.checkChecksum(C,T))return Zt.constructResult(C,T)}throw new X}static addOrTally(p,A){if(A==null)return;let v=!1;for(let _ of p)if(_.getValue()===A.getValue()){_.incrementCount(),v=!0;break}v||p.push(A)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(p,A){let v=4537077*p.getValue()+A.getValue(),_=new String(v).toString(),w=new j;for(let z=13-_.length;z>0;z--)w.append("0");w.append(_);let C=0;for(let z=0;z<13;z++){let K=w.charAt(z).charCodeAt(0)-"0".charCodeAt(0);C+=z&1?K:3*K}C=10-C%10,C===10&&(C=0),w.append(C.toString());let T=p.getFinderPattern().getResultPoints(),N=A.getFinderPattern().getResultPoints();return new Oe(w.toString(),null,0,[T[0],T[1],N[0],N[1]],Se.RSS_14,new Date().getTime())}static checkChecksum(p,A){let v=(p.getChecksumPortion()+16*A.getChecksumPortion())%79,_=9*p.getFinderPattern().getValue()+A.getFinderPattern().getValue();return _>72&&_--,_>8&&_--,v===_}decodePair(p,A,v,_){try{let w=this.findFinderPattern(p,A),C=this.parseFoundFinderPattern(p,v,A,w),T=_==null?null:_.get(E.NEED_RESULT_POINT_CALLBACK);if(T!=null){let K=(w[0]+w[1])/2;A&&(K=p.getSize()-1-K),T.foundPossibleResultPoint(new ae(K,v))}let N=this.decodeDataCharacter(p,C,!0),z=this.decodeDataCharacter(p,C,!1);return new Ji(1597*N.getValue()+z.getValue(),N.getChecksumPortion()+4*z.getChecksumPortion(),C)}catch{return null}}decodeDataCharacter(p,A,v){let _=this.getDataCharacterCounters();for(let Ue=0;Ue<_.length;Ue++)_[Ue]=0;if(v)vi.recordPatternInReverse(p,A.getStartEnd()[0],_);else{vi.recordPattern(p,A.getStartEnd()[1]+1,_);for(let Ue=0,Ke=_.length-1;Ue<Ke;Ue++,Ke--){let Et=_[Ue];_[Ue]=_[Ke],_[Ke]=Et}}let w=v?16:15,C=Xt.sum(new Int32Array(_))/w,T=this.getOddCounts(),N=this.getEvenCounts(),z=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let Ue=0;Ue<_.length;Ue++){let Ke=_[Ue]/C,Et=Math.floor(Ke+.5);Et<1?Et=1:Et>8&&(Et=8);let Jt=Math.floor(Ue/2);Ue&1?(N[Jt]=Et,K[Jt]=Ke-Et):(T[Jt]=Et,z[Jt]=Ke-Et)}this.adjustOddEvenCounts(v,w);let ee=0,oe=0;for(let Ue=T.length-1;Ue>=0;Ue--)oe*=9,oe+=T[Ue],ee+=T[Ue];let ge=0,we=0;for(let Ue=N.length-1;Ue>=0;Ue--)ge*=9,ge+=N[Ue],we+=N[Ue];let De=oe+3*ge;if(v){if(ee&1||ee>12||ee<4)throw new X;let Ue=(12-ee)/2,Ke=Zt.OUTSIDE_ODD_WIDEST[Ue],Et=9-Ke,Jt=en.getRSSvalue(T,Ke,!1),ut=en.getRSSvalue(N,Et,!0),er=Zt.OUTSIDE_EVEN_TOTAL_SUBSET[Ue],fr=Zt.OUTSIDE_GSUM[Ue];return new Cr(Jt*er+ut+fr,De)}else{if(we&1||we>10||we<4)throw new X;let Ue=(10-we)/2,Ke=Zt.INSIDE_ODD_WIDEST[Ue],Et=9-Ke,Jt=en.getRSSvalue(T,Ke,!0),ut=en.getRSSvalue(N,Et,!1),er=Zt.INSIDE_ODD_TOTAL_SUBSET[Ue],fr=Zt.INSIDE_GSUM[Ue];return new Cr(ut*er+Jt+fr,De)}}findFinderPattern(p,A){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let _=p.getSize(),w=!1,C=0;for(;C<_&&(w=!p.get(C),A!==w);)C++;let T=0,N=C;for(let z=C;z<_;z++)if(p.get(z)!==w)v[T]++;else{if(T===3){if(_i.isFinderPattern(v))return[N,z];N+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,T--}else T++;v[T]=1,w=!w}throw new X}parseFoundFinderPattern(p,A,v,_){let w=p.get(_[0]),C=_[0]-1;for(;C>=0&&w!==p.get(C);)C--;C++;let T=_[0]-C,N=this.getDecodeFinderCounters(),z=new Int32Array(N.length);f.arraycopy(N,0,z,1,N.length-1),z[0]=T;let K=this.parseFinderValue(z,Zt.FINDER_PATTERNS),ee=C,oe=_[1];return v&&(ee=p.getSize()-1-ee,oe=p.getSize()-1-oe),new zr(K,[C,_[1]],ee,oe,A)}adjustOddEvenCounts(p,A){let v=Xt.sum(new Int32Array(this.getOddCounts())),_=Xt.sum(new Int32Array(this.getEvenCounts())),w=!1,C=!1,T=!1,N=!1;p?(v>12?C=!0:v<4&&(w=!0),_>12?N=!0:_<4&&(T=!0)):(v>11?C=!0:v<5&&(w=!0),_>10?N=!0:_<4&&(T=!0));let z=v+_-A,K=(v&1)===(p?1:0),ee=(_&1)===1;if(z===1)if(K){if(ee)throw new X;C=!0}else{if(!ee)throw new X;N=!0}else if(z===-1)if(K){if(ee)throw new X;w=!0}else{if(!ee)throw new X;T=!0}else if(z===0){if(K){if(!ee)throw new X;v<_?(w=!0,N=!0):(C=!0,T=!0)}else if(ee)throw new X}else throw new X;if(w){if(C)throw new X;_i.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(C&&_i.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(N)throw new X;_i.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&_i.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Zt.OUTSIDE_GSUM=[0,161,961,2015,2715],Zt.INSIDE_GSUM=[0,336,1036,1516],Zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Zt.INSIDE_ODD_WIDEST=[2,4,6,8],Zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ri extends vi{constructor(p,A){super(),this.readers=[],this.verbose=A===!0;let v=p?p.get(E.POSSIBLE_FORMATS):null,_=p&&p.get(E.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;v?((v.includes(Se.EAN_13)||v.includes(Se.UPC_A)||v.includes(Se.EAN_8)||v.includes(Se.UPC_E))&&this.readers.push(new Qi(p)),v.includes(Se.CODE_39)&&this.readers.push(new Wi(_)),v.includes(Se.CODE_128)&&this.readers.push(new lt),v.includes(Se.ITF)&&this.readers.push(new Lt),v.includes(Se.RSS_14)&&this.readers.push(new Zt),v.includes(Se.RSS_EXPANDED)&&this.readers.push(new ze(this.verbose))):(this.readers.push(new Qi(p)),this.readers.push(new Wi),this.readers.push(new Qi(p)),this.readers.push(new lt),this.readers.push(new Lt),this.readers.push(new Zt),this.readers.push(new ze(this.verbose)))}decodeRow(p,A,v){for(let _=0;_<this.readers.length;_++)try{return this.readers[_].decodeRow(p,A,v)}catch{}throw new X}reset(){this.readers.forEach(p=>p.reset())}}class Yr extends Re{constructor(p=500,A){super(new Ri(A),p,A)}}class zi{constructor(p,A,v){this.ecCodewords=p,this.ecBlocks=[A],v&&this.ecBlocks.push(v)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Mi{constructor(p,A){this.count=p,this.dataCodewords=A}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ki{constructor(p,A,v,_,w,C){this.versionNumber=p,this.symbolSizeRows=A,this.symbolSizeColumns=v,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=w,this.ecBlocks=C;let T=0,N=C.getECCodewords(),z=C.getECBlocks();for(let K of z)T+=K.getCount()*(K.getDataCodewords()+N);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(p,A){if(p&1||A&1)throw new D;for(let v of Ki.VERSIONS)if(v.symbolSizeRows===p&&v.symbolSizeColumns===A)return v;throw new D}toString(){return""+this.versionNumber}static buildVersions(){return[new Ki(1,10,10,8,8,new zi(5,new Mi(1,3))),new Ki(2,12,12,10,10,new zi(7,new Mi(1,5))),new Ki(3,14,14,12,12,new zi(10,new Mi(1,8))),new Ki(4,16,16,14,14,new zi(12,new Mi(1,12))),new Ki(5,18,18,16,16,new zi(14,new Mi(1,18))),new Ki(6,20,20,18,18,new zi(18,new Mi(1,22))),new Ki(7,22,22,20,20,new zi(20,new Mi(1,30))),new Ki(8,24,24,22,22,new zi(24,new Mi(1,36))),new Ki(9,26,26,24,24,new zi(28,new Mi(1,44))),new Ki(10,32,32,14,14,new zi(36,new Mi(1,62))),new Ki(11,36,36,16,16,new zi(42,new Mi(1,86))),new Ki(12,40,40,18,18,new zi(48,new Mi(1,114))),new Ki(13,44,44,20,20,new zi(56,new Mi(1,144))),new Ki(14,48,48,22,22,new zi(68,new Mi(1,174))),new Ki(15,52,52,24,24,new zi(42,new Mi(2,102))),new Ki(16,64,64,14,14,new zi(56,new Mi(2,140))),new Ki(17,72,72,16,16,new zi(36,new Mi(4,92))),new Ki(18,80,80,18,18,new zi(48,new Mi(4,114))),new Ki(19,88,88,20,20,new zi(56,new Mi(4,144))),new Ki(20,96,96,22,22,new zi(68,new Mi(4,174))),new Ki(21,104,104,24,24,new zi(56,new Mi(6,136))),new Ki(22,120,120,18,18,new zi(68,new Mi(6,175))),new Ki(23,132,132,20,20,new zi(62,new Mi(8,163))),new Ki(24,144,144,22,22,new zi(62,new Mi(8,156),new Mi(2,155))),new Ki(25,8,18,6,16,new zi(7,new Mi(1,5))),new Ki(26,8,32,6,14,new zi(11,new Mi(1,10))),new Ki(27,12,26,10,24,new zi(14,new Mi(1,16))),new Ki(28,12,36,10,16,new zi(18,new Mi(1,22))),new Ki(29,16,36,14,16,new zi(24,new Mi(1,32))),new Ki(30,16,48,14,22,new zi(28,new Mi(1,49)))]}}Ki.VERSIONS=Ki.buildVersions();class Qr{constructor(p){let A=p.getHeight();if(A<8||A>144||A&1)throw new D;this.version=Qr.readVersion(p),this.mappingBitMatrix=this.extractDataRegion(p),this.readMappingMatrix=new q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(p){let A=p.getHeight(),v=p.getWidth();return Ki.getVersionForDimensions(A,v)}readCodewords(){let p=new Int8Array(this.version.getTotalCodewords()),A=0,v=4,_=0,w=this.mappingBitMatrix.getHeight(),C=this.mappingBitMatrix.getWidth(),T=!1,N=!1,z=!1,K=!1;do if(v===w&&_===0&&!T)p[A++]=this.readCorner1(w,C)&255,v-=2,_+=2,T=!0;else if(v===w-2&&_===0&&C&3&&!N)p[A++]=this.readCorner2(w,C)&255,v-=2,_+=2,N=!0;else if(v===w+4&&_===2&&!(C&7)&&!z)p[A++]=this.readCorner3(w,C)&255,v-=2,_+=2,z=!0;else if(v===w-2&&_===0&&(C&7)===4&&!K)p[A++]=this.readCorner4(w,C)&255,v-=2,_+=2,K=!0;else{do v<w&&_>=0&&!this.readMappingMatrix.get(_,v)&&(p[A++]=this.readUtah(v,_,w,C)&255),v-=2,_+=2;while(v>=0&&_<C);v+=1,_+=3;do v>=0&&_<C&&!this.readMappingMatrix.get(_,v)&&(p[A++]=this.readUtah(v,_,w,C)&255),v+=2,_-=2;while(v<w&&_>=0);v+=3,_+=1}while(v<w||_<C);if(A!==this.version.getTotalCodewords())throw new D;return p}readModule(p,A,v,_){return p<0&&(p+=v,A+=4-(v+4&7)),A<0&&(A+=_,p+=4-(_+4&7)),this.readMappingMatrix.set(A,p),this.mappingBitMatrix.get(A,p)}readUtah(p,A,v,_){let w=0;return this.readModule(p-2,A-2,v,_)&&(w|=1),w<<=1,this.readModule(p-2,A-1,v,_)&&(w|=1),w<<=1,this.readModule(p-1,A-2,v,_)&&(w|=1),w<<=1,this.readModule(p-1,A-1,v,_)&&(w|=1),w<<=1,this.readModule(p-1,A,v,_)&&(w|=1),w<<=1,this.readModule(p,A-2,v,_)&&(w|=1),w<<=1,this.readModule(p,A-1,v,_)&&(w|=1),w<<=1,this.readModule(p,A,v,_)&&(w|=1),w}readCorner1(p,A){let v=0;return this.readModule(p-1,0,p,A)&&(v|=1),v<<=1,this.readModule(p-1,1,p,A)&&(v|=1),v<<=1,this.readModule(p-1,2,p,A)&&(v|=1),v<<=1,this.readModule(0,A-2,p,A)&&(v|=1),v<<=1,this.readModule(0,A-1,p,A)&&(v|=1),v<<=1,this.readModule(1,A-1,p,A)&&(v|=1),v<<=1,this.readModule(2,A-1,p,A)&&(v|=1),v<<=1,this.readModule(3,A-1,p,A)&&(v|=1),v}readCorner2(p,A){let v=0;return this.readModule(p-3,0,p,A)&&(v|=1),v<<=1,this.readModule(p-2,0,p,A)&&(v|=1),v<<=1,this.readModule(p-1,0,p,A)&&(v|=1),v<<=1,this.readModule(0,A-4,p,A)&&(v|=1),v<<=1,this.readModule(0,A-3,p,A)&&(v|=1),v<<=1,this.readModule(0,A-2,p,A)&&(v|=1),v<<=1,this.readModule(0,A-1,p,A)&&(v|=1),v<<=1,this.readModule(1,A-1,p,A)&&(v|=1),v}readCorner3(p,A){let v=0;return this.readModule(p-1,0,p,A)&&(v|=1),v<<=1,this.readModule(p-1,A-1,p,A)&&(v|=1),v<<=1,this.readModule(0,A-3,p,A)&&(v|=1),v<<=1,this.readModule(0,A-2,p,A)&&(v|=1),v<<=1,this.readModule(0,A-1,p,A)&&(v|=1),v<<=1,this.readModule(1,A-3,p,A)&&(v|=1),v<<=1,this.readModule(1,A-2,p,A)&&(v|=1),v<<=1,this.readModule(1,A-1,p,A)&&(v|=1),v}readCorner4(p,A){let v=0;return this.readModule(p-3,0,p,A)&&(v|=1),v<<=1,this.readModule(p-2,0,p,A)&&(v|=1),v<<=1,this.readModule(p-1,0,p,A)&&(v|=1),v<<=1,this.readModule(0,A-2,p,A)&&(v|=1),v<<=1,this.readModule(0,A-1,p,A)&&(v|=1),v<<=1,this.readModule(1,A-1,p,A)&&(v|=1),v<<=1,this.readModule(2,A-1,p,A)&&(v|=1),v<<=1,this.readModule(3,A-1,p,A)&&(v|=1),v}extractDataRegion(p){let A=this.version.getSymbolSizeRows(),v=this.version.getSymbolSizeColumns();if(p.getHeight()!==A)throw new c("Dimension of bitMatrix must match the version size");let _=this.version.getDataRegionSizeRows(),w=this.version.getDataRegionSizeColumns(),C=A/_|0,T=v/w|0,N=C*_,z=T*w,K=new q(z,N);for(let ee=0;ee<C;++ee){let oe=ee*_;for(let ge=0;ge<T;++ge){let we=ge*w;for(let De=0;De<_;++De){let Ue=ee*(_+2)+1+De,Ke=oe+De;for(let Et=0;Et<w;++Et){let Jt=ge*(w+2)+1+Et;if(p.get(Jt,Ue)){let ut=we+Et;K.set(ut,Ke)}}}}}return K}}class tr{constructor(p,A){this.numDataCodewords=p,this.codewords=A}static getDataBlocks(p,A){let v=A.getECBlocks(),_=0,w=v.getECBlocks();for(let De of w)_+=De.getCount();let C=new Array(_),T=0;for(let De of w)for(let Ue=0;Ue<De.getCount();Ue++){let Ke=De.getDataCodewords(),Et=v.getECCodewords()+Ke;C[T++]=new tr(Ke,new Uint8Array(Et))}let z=C[0].codewords.length-v.getECCodewords(),K=z-1,ee=0;for(let De=0;De<K;De++)for(let Ue=0;Ue<T;Ue++)C[Ue].codewords[De]=p[ee++];let oe=A.getVersionNumber()===24,ge=oe?8:T;for(let De=0;De<ge;De++)C[De].codewords[z-1]=p[ee++];let we=C[0].codewords.length;for(let De=z;De<we;De++)for(let Ue=0;Ue<T;Ue++){let Ke=oe?(Ue+8)%T:Ue,Et=oe&&Ke>7?De-1:De;C[Ke].codewords[Et]=p[ee++]}if(ee!==p.length)throw new c;return C}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wa{constructor(p){this.bytes=p,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(p){if(p<1||p>32||p>this.available())throw new c(""+p);let A=0,v=this.bitOffset,_=this.byteOffset,w=this.bytes;if(v>0){let C=8-v,T=p<C?p:C,N=C-T,z=255>>8-T<<N;A=(w[_]&z)>>N,p-=T,v+=T,v===8&&(v=0,_++)}if(p>0){for(;p>=8;)A=A<<8|w[_]&255,_++,p-=8;if(p>0){let C=8-p,T=255>>C<<C;A=A<<p|(w[_]&T)>>C,v+=p}}return this.bitOffset=v,this.byteOffset=_,A}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var nr=function(V){return V[V.PAD_ENCODE=0]="PAD_ENCODE",V[V.ASCII_ENCODE=1]="ASCII_ENCODE",V[V.C40_ENCODE=2]="C40_ENCODE",V[V.TEXT_ENCODE=3]="TEXT_ENCODE",V[V.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",V[V.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",V[V.BASE256_ENCODE=6]="BASE256_ENCODE",V}(nr||{});class ha{static decode(p){let A=new Wa(p),v=new j,_=new j,w=new Array,C=nr.ASCII_ENCODE;do if(C===nr.ASCII_ENCODE)C=this.decodeAsciiSegment(A,v,_);else{switch(C){case nr.C40_ENCODE:this.decodeC40Segment(A,v);break;case nr.TEXT_ENCODE:this.decodeTextSegment(A,v);break;case nr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(A,v);break;case nr.EDIFACT_ENCODE:this.decodeEdifactSegment(A,v);break;case nr.BASE256_ENCODE:this.decodeBase256Segment(A,v,w);break;default:throw new D}C=nr.ASCII_ENCODE}while(C!==nr.PAD_ENCODE&&A.available()>0);return _.length()>0&&v.append(_.toString()),new dt(p,v.toString(),w.length===0?null:w,null)}static decodeAsciiSegment(p,A,v){let _=!1;do{let w=p.readBits(8);if(w===0)throw new D;if(w<=128)return _&&(w+=128),A.append(String.fromCharCode(w-1)),nr.ASCII_ENCODE;if(w===129)return nr.PAD_ENCODE;if(w<=229){let C=w-130;C<10&&A.append("0"),A.append(""+C)}else switch(w){case 230:return nr.C40_ENCODE;case 231:return nr.BASE256_ENCODE;case 232:A.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:_=!0;break;case 236:A.append("[)>05"),v.insert(0,"");break;case 237:A.append("[)>06"),v.insert(0,"");break;case 238:return nr.ANSIX12_ENCODE;case 239:return nr.TEXT_ENCODE;case 240:return nr.EDIFACT_ENCODE;case 241:break;default:if(w!==254||p.available()!==0)throw new D;break}}while(p.available()>0);return nr.ASCII_ENCODE}static decodeC40Segment(p,A){let v=!1,_=[],w=0;do{if(p.available()===8)return;let C=p.readBits(8);if(C===254)return;this.parseTwoBytes(C,p.readBits(8),_);for(let T=0;T<3;T++){let N=_[T];switch(w){case 0:if(N<3)w=N+1;else if(N<this.C40_BASIC_SET_CHARS.length){let z=this.C40_BASIC_SET_CHARS[N];v?(A.append(String.fromCharCode(z.charCodeAt(0)+128)),v=!1):A.append(z)}else throw new D;break;case 1:v?(A.append(String.fromCharCode(N+128)),v=!1):A.append(String.fromCharCode(N)),w=0;break;case 2:if(N<this.C40_SHIFT2_SET_CHARS.length){let z=this.C40_SHIFT2_SET_CHARS[N];v?(A.append(String.fromCharCode(z.charCodeAt(0)+128)),v=!1):A.append(z)}else switch(N){case 27:A.append(String.fromCharCode(29));break;case 30:v=!0;break;default:throw new D}w=0;break;case 3:v?(A.append(String.fromCharCode(N+224)),v=!1):A.append(String.fromCharCode(N+96)),w=0;break;default:throw new D}}}while(p.available()>0)}static decodeTextSegment(p,A){let v=!1,_=[],w=0;do{if(p.available()===8)return;let C=p.readBits(8);if(C===254)return;this.parseTwoBytes(C,p.readBits(8),_);for(let T=0;T<3;T++){let N=_[T];switch(w){case 0:if(N<3)w=N+1;else if(N<this.TEXT_BASIC_SET_CHARS.length){let z=this.TEXT_BASIC_SET_CHARS[N];v?(A.append(String.fromCharCode(z.charCodeAt(0)+128)),v=!1):A.append(z)}else throw new D;break;case 1:v?(A.append(String.fromCharCode(N+128)),v=!1):A.append(String.fromCharCode(N)),w=0;break;case 2:if(N<this.TEXT_SHIFT2_SET_CHARS.length){let z=this.TEXT_SHIFT2_SET_CHARS[N];v?(A.append(String.fromCharCode(z.charCodeAt(0)+128)),v=!1):A.append(z)}else switch(N){case 27:A.append(String.fromCharCode(29));break;case 30:v=!0;break;default:throw new D}w=0;break;case 3:if(N<this.TEXT_SHIFT3_SET_CHARS.length){let z=this.TEXT_SHIFT3_SET_CHARS[N];v?(A.append(String.fromCharCode(z.charCodeAt(0)+128)),v=!1):A.append(z),w=0}else throw new D;break;default:throw new D}}}while(p.available()>0)}static decodeAnsiX12Segment(p,A){let v=[];do{if(p.available()===8)return;let _=p.readBits(8);if(_===254)return;this.parseTwoBytes(_,p.readBits(8),v);for(let w=0;w<3;w++){let C=v[w];switch(C){case 0:A.append("\r");break;case 1:A.append("*");break;case 2:A.append(">");break;case 3:A.append(" ");break;default:if(C<14)A.append(String.fromCharCode(C+44));else if(C<40)A.append(String.fromCharCode(C+51));else throw new D;break}}}while(p.available()>0)}static parseTwoBytes(p,A,v){let _=(p<<8)+A-1,w=Math.floor(_/1600);v[0]=w,_-=w*1600,w=Math.floor(_/40),v[1]=w,v[2]=_-w*40}static decodeEdifactSegment(p,A){do{if(p.available()<=16)return;for(let v=0;v<4;v++){let _=p.readBits(6);if(_===31){let w=8-p.getBitOffset();w!==8&&p.readBits(w);return}_&32||(_|=64),A.append(String.fromCharCode(_))}}while(p.available()>0)}static decodeBase256Segment(p,A,v){let _=1+p.getByteOffset(),w=this.unrandomize255State(p.readBits(8),_++),C;if(w===0?C=p.available()/8|0:w<250?C=w:C=250*(w-249)+this.unrandomize255State(p.readBits(8),_++),C<0)throw new D;let T=new Uint8Array(C);for(let N=0;N<C;N++){if(p.available()<8)throw new D;T[N]=this.unrandomize255State(p.readBits(8),_++)}v.push(T);try{A.append(U.decode(T,k.ISO88591))}catch(N){throw new Bi("Platform does not support required encoding: "+N.message)}}static unrandomize255State(p,A){let v=149*A%255+1,_=p-v;return _>=0?_:_+256}}ha.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ha.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ha.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ha.TEXT_SHIFT2_SET_CHARS=ha.C40_SHIFT2_SET_CHARS,ha.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Fl{constructor(){this.rsDecoder=new _t(Je.DATA_MATRIX_FIELD_256)}decode(p){let A=new Qr(p),v=A.getVersion(),_=A.readCodewords(),w=tr.getDataBlocks(_,v),C=0;for(let z of w)C+=z.getNumDataCodewords();let T=new Uint8Array(C),N=w.length;for(let z=0;z<N;z++){let K=w[z],ee=K.getCodewords(),oe=K.getNumDataCodewords();this.correctErrors(ee,oe);for(let ge=0;ge<oe;ge++)T[ge*N+z]=ee[ge]}return ha.decode(T)}correctErrors(p,A){let v=new Int32Array(p);try{this.rsDecoder.decode(v,p.length-A)}catch{throw new h}for(let _=0;_<A;_++)p[_]=v[_]}}class Vr{constructor(p){this.image=p,this.rectangleDetector=new bt(this.image)}detect(){let p=this.rectangleDetector.detect(),A=this.detectSolid1(p);if(A=this.detectSolid2(A),A[3]=this.correctTopRight(A),!A[3])throw new X;A=this.shiftToModuleCenter(A);let v=A[0],_=A[1],w=A[2],C=A[3],T=this.transitionsBetween(v,C)+1,N=this.transitionsBetween(w,C)+1;(T&1)===1&&(T+=1),(N&1)===1&&(N+=1),4*T<7*N&&4*N<7*T&&(T=N=Math.max(T,N));let z=Vr.sampleGrid(this.image,v,_,w,C,T,N);return new se(z,[v,_,w,C])}static shiftPoint(p,A,v){let _=(A.getX()-p.getX())/(v+1),w=(A.getY()-p.getY())/(v+1);return new ae(p.getX()+_,p.getY()+w)}static moveAway(p,A,v){let _=p.getX(),w=p.getY();return _<A?_-=1:_+=1,w<v?w-=1:w+=1,new ae(_,w)}detectSolid1(p){let A=p[0],v=p[1],_=p[3],w=p[2],C=this.transitionsBetween(A,v),T=this.transitionsBetween(v,_),N=this.transitionsBetween(_,w),z=this.transitionsBetween(w,A),K=C,ee=[w,A,v,_];return K>T&&(K=T,ee[0]=A,ee[1]=v,ee[2]=_,ee[3]=w),K>N&&(K=N,ee[0]=v,ee[1]=_,ee[2]=w,ee[3]=A),K>z&&(ee[0]=_,ee[1]=w,ee[2]=A,ee[3]=v),ee}detectSolid2(p){let A=p[0],v=p[1],_=p[2],w=p[3],C=this.transitionsBetween(A,w),T=Vr.shiftPoint(v,_,(C+1)*4),N=Vr.shiftPoint(_,v,(C+1)*4),z=this.transitionsBetween(T,A),K=this.transitionsBetween(N,w);return z<K?(p[0]=A,p[1]=v,p[2]=_,p[3]=w):(p[0]=v,p[1]=_,p[2]=w,p[3]=A),p}correctTopRight(p){let A=p[0],v=p[1],_=p[2],w=p[3],C=this.transitionsBetween(A,w),T=this.transitionsBetween(v,w),N=Vr.shiftPoint(A,v,(T+1)*4),z=Vr.shiftPoint(_,v,(C+1)*4);C=this.transitionsBetween(N,w),T=this.transitionsBetween(z,w);let K=new ae(w.getX()+(_.getX()-v.getX())/(C+1),w.getY()+(_.getY()-v.getY())/(C+1)),ee=new ae(w.getX()+(A.getX()-v.getX())/(T+1),w.getY()+(A.getY()-v.getY())/(T+1));if(!this.isValid(K))return this.isValid(ee)?ee:null;if(!this.isValid(ee))return K;let oe=this.transitionsBetween(N,K)+this.transitionsBetween(z,K),ge=this.transitionsBetween(N,ee)+this.transitionsBetween(z,ee);return oe>ge?K:ee}shiftToModuleCenter(p){let A=p[0],v=p[1],_=p[2],w=p[3],C=this.transitionsBetween(A,w)+1,T=this.transitionsBetween(_,w)+1,N=Vr.shiftPoint(A,v,T*4),z=Vr.shiftPoint(_,v,C*4);C=this.transitionsBetween(N,w)+1,T=this.transitionsBetween(z,w)+1,(C&1)===1&&(C+=1),(T&1)===1&&(T+=1);let K=(A.getX()+v.getX()+_.getX()+w.getX())/4,ee=(A.getY()+v.getY()+_.getY()+w.getY())/4;A=Vr.moveAway(A,K,ee),v=Vr.moveAway(v,K,ee),_=Vr.moveAway(_,K,ee),w=Vr.moveAway(w,K,ee);let oe,ge;return N=Vr.shiftPoint(A,v,T*4),N=Vr.shiftPoint(N,w,C*4),oe=Vr.shiftPoint(v,A,T*4),oe=Vr.shiftPoint(oe,_,C*4),z=Vr.shiftPoint(_,w,T*4),z=Vr.shiftPoint(z,v,C*4),ge=Vr.shiftPoint(w,_,T*4),ge=Vr.shiftPoint(ge,A,C*4),[N,oe,z,ge]}isValid(p){return p.getX()>=0&&p.getX()<this.image.getWidth()&&p.getY()>0&&p.getY()<this.image.getHeight()}static sampleGrid(p,A,v,_,w,C,T){return kt.getInstance().sampleGrid(p,C,T,.5,.5,C-.5,.5,C-.5,T-.5,.5,T-.5,A.getX(),A.getY(),w.getX(),w.getY(),_.getX(),_.getY(),v.getX(),v.getY())}transitionsBetween(p,A){let v=Math.trunc(p.getX()),_=Math.trunc(p.getY()),w=Math.trunc(A.getX()),C=Math.trunc(A.getY()),T=Math.abs(C-_)>Math.abs(w-v);if(T){let De=v;v=_,_=De,De=w,w=C,C=De}let N=Math.abs(w-v),z=Math.abs(C-_),K=-N/2,ee=_<C?1:-1,oe=v<w?1:-1,ge=0,we=this.image.get(T?_:v,T?v:_);for(let De=v,Ue=_;De!==w;De+=oe){let Ke=this.image.get(T?Ue:De,T?De:Ue);if(Ke!==we&&(ge++,we=Ke),K+=z,K>0){if(Ue===C)break;Ue+=ee,K-=N}}return ge}}let el=(()=>{class V{constructor(){this.decoder=new Fl}decode(A,v=null){let _,w;if(v!=null&&v.has(E.PURE_BARCODE)){let K=V.extractPureBits(A.getBlackMatrix());_=this.decoder.decode(K),w=V.NO_POINTS}else{let K=new Vr(A.getBlackMatrix()).detect();_=this.decoder.decode(K.getBits()),w=K.getPoints()}let C=_.getRawBytes(),T=new Oe(_.getText(),C,8*C.length,w,Se.DATA_MATRIX,f.currentTimeMillis()),N=_.getByteSegments();N!=null&&T.putMetadata(rt.BYTE_SEGMENTS,N);let z=_.getECLevel();return z!=null&&T.putMetadata(rt.ERROR_CORRECTION_LEVEL,z),T}reset(){}static extractPureBits(A){let v=A.getTopLeftOnBit(),_=A.getBottomRightOnBit();if(v==null||_==null)throw new X;let w=this.moduleSize(v,A),C=v[1],T=_[1],N=v[0],K=(_[0]-N+1)/w,ee=(T-C+1)/w;if(K<=0||ee<=0)throw new X;let oe=w/2;C+=oe,N+=oe;let ge=new q(K,ee);for(let we=0;we<ee;we++){let De=C+we*w;for(let Ue=0;Ue<K;Ue++)A.get(N+Ue*w,De)&&ge.set(Ue,we)}return ge}static moduleSize(A,v){let _=v.getWidth(),w=A[0],C=A[1];for(;w<_&&v.get(w,C);)w++;if(w===_)throw new X;let T=w-A[0];if(T===0)throw new X;return T}}return V.NO_POINTS=[],V})();class Pr extends Re{constructor(p=500){super(new el,p)}}var da=function(V){return V[V.L=0]="L",V[V.M=1]="M",V[V.Q=2]="Q",V[V.H=3]="H",V}(da||{});class tn{constructor(p,A,v){this.value=p,this.stringValue=A,this.bits=v,tn.FOR_BITS.set(v,this),tn.FOR_VALUE.set(p,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(p){switch(p){case"L":return tn.L;case"M":return tn.M;case"Q":return tn.Q;case"H":return tn.H;default:throw new l(p+"not available")}}toString(){return this.stringValue}equals(p){if(!(p instanceof tn))return!1;let A=p;return this.value===A.value}static forBits(p){if(p<0||p>=tn.FOR_BITS.size)throw new c;return tn.FOR_BITS.get(p)}}tn.FOR_BITS=new Map,tn.FOR_VALUE=new Map,tn.L=new tn(da.L,"L",1),tn.M=new tn(da.M,"M",0),tn.Q=new tn(da.Q,"Q",3),tn.H=new tn(da.H,"H",2);class rn{constructor(p){this.errorCorrectionLevel=tn.forBits(p>>3&3),this.dataMask=p&7}static numBitsDiffering(p,A){return x.bitCount(p^A)}static decodeFormatInformation(p,A){let v=rn.doDecodeFormatInformation(p,A);return v!==null?v:rn.doDecodeFormatInformation(p^rn.FORMAT_INFO_MASK_QR,A^rn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(p,A){let v=Number.MAX_SAFE_INTEGER,_=0;for(let w of rn.FORMAT_INFO_DECODE_LOOKUP){let C=w[0];if(C===p||C===A)return new rn(w[1]);let T=rn.numBitsDiffering(p,C);T<v&&(_=w[1],v=T),p!==A&&(T=rn.numBitsDiffering(A,C),T<v&&(_=w[1],v=T))}return v<=3?new rn(_):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(p){if(!(p instanceof rn))return!1;let A=p;return this.errorCorrectionLevel===A.errorCorrectionLevel&&this.dataMask===A.dataMask}}rn.FORMAT_INFO_MASK_QR=21522,rn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ve{constructor(p,...A){this.ecCodewordsPerBlock=p,this.ecBlocks=A}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let p=0,A=this.ecBlocks;for(let v of A)p+=v.getCount();return p}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class me{constructor(p,A){this.count=p,this.dataCodewords=A}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ci{constructor(p,A,...v){this.versionNumber=p,this.alignmentPatternCenters=A,this.ecBlocks=v;let _=0,w=v[0].getECCodewordsPerBlock(),C=v[0].getECBlocks();for(let T of C)_+=T.getCount()*(T.getDataCodewords()+w);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(p){return this.ecBlocks[p.getValue()]}static getProvisionalVersionForDimension(p){if(p%4!==1)throw new D;try{return this.getVersionForNumber((p-17)/4)}catch{throw new D}}static getVersionForNumber(p){if(p<1||p>40)throw new c;return Ci.VERSIONS[p-1]}static decodeVersionInformation(p){let A=Number.MAX_SAFE_INTEGER,v=0;for(let _=0;_<Ci.VERSION_DECODE_INFO.length;_++){let w=Ci.VERSION_DECODE_INFO[_];if(w===p)return Ci.getVersionForNumber(_+7);let C=rn.numBitsDiffering(p,w);C<A&&(v=_+7,A=C)}return A<=3?Ci.getVersionForNumber(v):null}buildFunctionPattern(){let p=this.getDimensionForVersion(),A=new q(p);A.setRegion(0,0,9,9),A.setRegion(p-8,0,8,9),A.setRegion(0,p-8,9,8);let v=this.alignmentPatternCenters.length;for(let _=0;_<v;_++){let w=this.alignmentPatternCenters[_]-2;for(let C=0;C<v;C++)_===0&&(C===0||C===v-1)||_===v-1&&C===0||A.setRegion(this.alignmentPatternCenters[C]-2,w,5,5)}return A.setRegion(6,9,1,p-17),A.setRegion(9,6,p-17,1),this.versionNumber>6&&(A.setRegion(p-11,0,3,6),A.setRegion(0,p-11,6,3)),A}toString(){return""+this.versionNumber}}Ci.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ci.VERSIONS=[new Ci(1,new Int32Array(0),new Ve(7,new me(1,19)),new Ve(10,new me(1,16)),new Ve(13,new me(1,13)),new Ve(17,new me(1,9))),new Ci(2,Int32Array.from([6,18]),new Ve(10,new me(1,34)),new Ve(16,new me(1,28)),new Ve(22,new me(1,22)),new Ve(28,new me(1,16))),new Ci(3,Int32Array.from([6,22]),new Ve(15,new me(1,55)),new Ve(26,new me(1,44)),new Ve(18,new me(2,17)),new Ve(22,new me(2,13))),new Ci(4,Int32Array.from([6,26]),new Ve(20,new me(1,80)),new Ve(18,new me(2,32)),new Ve(26,new me(2,24)),new Ve(16,new me(4,9))),new Ci(5,Int32Array.from([6,30]),new Ve(26,new me(1,108)),new Ve(24,new me(2,43)),new Ve(18,new me(2,15),new me(2,16)),new Ve(22,new me(2,11),new me(2,12))),new Ci(6,Int32Array.from([6,34]),new Ve(18,new me(2,68)),new Ve(16,new me(4,27)),new Ve(24,new me(4,19)),new Ve(28,new me(4,15))),new Ci(7,Int32Array.from([6,22,38]),new Ve(20,new me(2,78)),new Ve(18,new me(4,31)),new Ve(18,new me(2,14),new me(4,15)),new Ve(26,new me(4,13),new me(1,14))),new Ci(8,Int32Array.from([6,24,42]),new Ve(24,new me(2,97)),new Ve(22,new me(2,38),new me(2,39)),new Ve(22,new me(4,18),new me(2,19)),new Ve(26,new me(4,14),new me(2,15))),new Ci(9,Int32Array.from([6,26,46]),new Ve(30,new me(2,116)),new Ve(22,new me(3,36),new me(2,37)),new Ve(20,new me(4,16),new me(4,17)),new Ve(24,new me(4,12),new me(4,13))),new Ci(10,Int32Array.from([6,28,50]),new Ve(18,new me(2,68),new me(2,69)),new Ve(26,new me(4,43),new me(1,44)),new Ve(24,new me(6,19),new me(2,20)),new Ve(28,new me(6,15),new me(2,16))),new Ci(11,Int32Array.from([6,30,54]),new Ve(20,new me(4,81)),new Ve(30,new me(1,50),new me(4,51)),new Ve(28,new me(4,22),new me(4,23)),new Ve(24,new me(3,12),new me(8,13))),new Ci(12,Int32Array.from([6,32,58]),new Ve(24,new me(2,92),new me(2,93)),new Ve(22,new me(6,36),new me(2,37)),new Ve(26,new me(4,20),new me(6,21)),new Ve(28,new me(7,14),new me(4,15))),new Ci(13,Int32Array.from([6,34,62]),new Ve(26,new me(4,107)),new Ve(22,new me(8,37),new me(1,38)),new Ve(24,new me(8,20),new me(4,21)),new Ve(22,new me(12,11),new me(4,12))),new Ci(14,Int32Array.from([6,26,46,66]),new Ve(30,new me(3,115),new me(1,116)),new Ve(24,new me(4,40),new me(5,41)),new Ve(20,new me(11,16),new me(5,17)),new Ve(24,new me(11,12),new me(5,13))),new Ci(15,Int32Array.from([6,26,48,70]),new Ve(22,new me(5,87),new me(1,88)),new Ve(24,new me(5,41),new me(5,42)),new Ve(30,new me(5,24),new me(7,25)),new Ve(24,new me(11,12),new me(7,13))),new Ci(16,Int32Array.from([6,26,50,74]),new Ve(24,new me(5,98),new me(1,99)),new Ve(28,new me(7,45),new me(3,46)),new Ve(24,new me(15,19),new me(2,20)),new Ve(30,new me(3,15),new me(13,16))),new Ci(17,Int32Array.from([6,30,54,78]),new Ve(28,new me(1,107),new me(5,108)),new Ve(28,new me(10,46),new me(1,47)),new Ve(28,new me(1,22),new me(15,23)),new Ve(28,new me(2,14),new me(17,15))),new Ci(18,Int32Array.from([6,30,56,82]),new Ve(30,new me(5,120),new me(1,121)),new Ve(26,new me(9,43),new me(4,44)),new Ve(28,new me(17,22),new me(1,23)),new Ve(28,new me(2,14),new me(19,15))),new Ci(19,Int32Array.from([6,30,58,86]),new Ve(28,new me(3,113),new me(4,114)),new Ve(26,new me(3,44),new me(11,45)),new Ve(26,new me(17,21),new me(4,22)),new Ve(26,new me(9,13),new me(16,14))),new Ci(20,Int32Array.from([6,34,62,90]),new Ve(28,new me(3,107),new me(5,108)),new Ve(26,new me(3,41),new me(13,42)),new Ve(30,new me(15,24),new me(5,25)),new Ve(28,new me(15,15),new me(10,16))),new Ci(21,Int32Array.from([6,28,50,72,94]),new Ve(28,new me(4,116),new me(4,117)),new Ve(26,new me(17,42)),new Ve(28,new me(17,22),new me(6,23)),new Ve(30,new me(19,16),new me(6,17))),new Ci(22,Int32Array.from([6,26,50,74,98]),new Ve(28,new me(2,111),new me(7,112)),new Ve(28,new me(17,46)),new Ve(30,new me(7,24),new me(16,25)),new Ve(24,new me(34,13))),new Ci(23,Int32Array.from([6,30,54,78,102]),new Ve(30,new me(4,121),new me(5,122)),new Ve(28,new me(4,47),new me(14,48)),new Ve(30,new me(11,24),new me(14,25)),new Ve(30,new me(16,15),new me(14,16))),new Ci(24,Int32Array.from([6,28,54,80,106]),new Ve(30,new me(6,117),new me(4,118)),new Ve(28,new me(6,45),new me(14,46)),new Ve(30,new me(11,24),new me(16,25)),new Ve(30,new me(30,16),new me(2,17))),new Ci(25,Int32Array.from([6,32,58,84,110]),new Ve(26,new me(8,106),new me(4,107)),new Ve(28,new me(8,47),new me(13,48)),new Ve(30,new me(7,24),new me(22,25)),new Ve(30,new me(22,15),new me(13,16))),new Ci(26,Int32Array.from([6,30,58,86,114]),new Ve(28,new me(10,114),new me(2,115)),new Ve(28,new me(19,46),new me(4,47)),new Ve(28,new me(28,22),new me(6,23)),new Ve(30,new me(33,16),new me(4,17))),new Ci(27,Int32Array.from([6,34,62,90,118]),new Ve(30,new me(8,122),new me(4,123)),new Ve(28,new me(22,45),new me(3,46)),new Ve(30,new me(8,23),new me(26,24)),new Ve(30,new me(12,15),new me(28,16))),new Ci(28,Int32Array.from([6,26,50,74,98,122]),new Ve(30,new me(3,117),new me(10,118)),new Ve(28,new me(3,45),new me(23,46)),new Ve(30,new me(4,24),new me(31,25)),new Ve(30,new me(11,15),new me(31,16))),new Ci(29,Int32Array.from([6,30,54,78,102,126]),new Ve(30,new me(7,116),new me(7,117)),new Ve(28,new me(21,45),new me(7,46)),new Ve(30,new me(1,23),new me(37,24)),new Ve(30,new me(19,15),new me(26,16))),new Ci(30,Int32Array.from([6,26,52,78,104,130]),new Ve(30,new me(5,115),new me(10,116)),new Ve(28,new me(19,47),new me(10,48)),new Ve(30,new me(15,24),new me(25,25)),new Ve(30,new me(23,15),new me(25,16))),new Ci(31,Int32Array.from([6,30,56,82,108,134]),new Ve(30,new me(13,115),new me(3,116)),new Ve(28,new me(2,46),new me(29,47)),new Ve(30,new me(42,24),new me(1,25)),new Ve(30,new me(23,15),new me(28,16))),new Ci(32,Int32Array.from([6,34,60,86,112,138]),new Ve(30,new me(17,115)),new Ve(28,new me(10,46),new me(23,47)),new Ve(30,new me(10,24),new me(35,25)),new Ve(30,new me(19,15),new me(35,16))),new Ci(33,Int32Array.from([6,30,58,86,114,142]),new Ve(30,new me(17,115),new me(1,116)),new Ve(28,new me(14,46),new me(21,47)),new Ve(30,new me(29,24),new me(19,25)),new Ve(30,new me(11,15),new me(46,16))),new Ci(34,Int32Array.from([6,34,62,90,118,146]),new Ve(30,new me(13,115),new me(6,116)),new Ve(28,new me(14,46),new me(23,47)),new Ve(30,new me(44,24),new me(7,25)),new Ve(30,new me(59,16),new me(1,17))),new Ci(35,Int32Array.from([6,30,54,78,102,126,150]),new Ve(30,new me(12,121),new me(7,122)),new Ve(28,new me(12,47),new me(26,48)),new Ve(30,new me(39,24),new me(14,25)),new Ve(30,new me(22,15),new me(41,16))),new Ci(36,Int32Array.from([6,24,50,76,102,128,154]),new Ve(30,new me(6,121),new me(14,122)),new Ve(28,new me(6,47),new me(34,48)),new Ve(30,new me(46,24),new me(10,25)),new Ve(30,new me(2,15),new me(64,16))),new Ci(37,Int32Array.from([6,28,54,80,106,132,158]),new Ve(30,new me(17,122),new me(4,123)),new Ve(28,new me(29,46),new me(14,47)),new Ve(30,new me(49,24),new me(10,25)),new Ve(30,new me(24,15),new me(46,16))),new Ci(38,Int32Array.from([6,32,58,84,110,136,162]),new Ve(30,new me(4,122),new me(18,123)),new Ve(28,new me(13,46),new me(32,47)),new Ve(30,new me(48,24),new me(14,25)),new Ve(30,new me(42,15),new me(32,16))),new Ci(39,Int32Array.from([6,26,54,82,110,138,166]),new Ve(30,new me(20,117),new me(4,118)),new Ve(28,new me(40,47),new me(7,48)),new Ve(30,new me(43,24),new me(22,25)),new Ve(30,new me(10,15),new me(67,16))),new Ci(40,Int32Array.from([6,30,58,86,114,142,170]),new Ve(30,new me(19,118),new me(6,119)),new Ve(28,new me(18,47),new me(31,48)),new Ve(30,new me(34,24),new me(34,25)),new Ve(30,new me(20,15),new me(61,16)))];var ja=function(V){return V[V.DATA_MASK_000=0]="DATA_MASK_000",V[V.DATA_MASK_001=1]="DATA_MASK_001",V[V.DATA_MASK_010=2]="DATA_MASK_010",V[V.DATA_MASK_011=3]="DATA_MASK_011",V[V.DATA_MASK_100=4]="DATA_MASK_100",V[V.DATA_MASK_101=5]="DATA_MASK_101",V[V.DATA_MASK_110=6]="DATA_MASK_110",V[V.DATA_MASK_111=7]="DATA_MASK_111",V}(ja||{});class ne{constructor(p,A){this.value=p,this.isMasked=A}unmaskBitMatrix(p,A){for(let v=0;v<A;v++)for(let _=0;_<A;_++)this.isMasked(v,_)&&p.flip(_,v)}}ne.values=new Map([[ja.DATA_MASK_000,new ne(ja.DATA_MASK_000,(V,p)=>(V+p&1)===0)],[ja.DATA_MASK_001,new ne(ja.DATA_MASK_001,(V,p)=>(V&1)===0)],[ja.DATA_MASK_010,new ne(ja.DATA_MASK_010,(V,p)=>p%3===0)],[ja.DATA_MASK_011,new ne(ja.DATA_MASK_011,(V,p)=>(V+p)%3===0)],[ja.DATA_MASK_100,new ne(ja.DATA_MASK_100,(V,p)=>(Math.floor(V/2)+Math.floor(p/3)&1)===0)],[ja.DATA_MASK_101,new ne(ja.DATA_MASK_101,(V,p)=>V*p%6===0)],[ja.DATA_MASK_110,new ne(ja.DATA_MASK_110,(V,p)=>V*p%6<3)],[ja.DATA_MASK_111,new ne(ja.DATA_MASK_111,(V,p)=>(V+p+V*p%3&1)===0)]]);class he{constructor(p){let A=p.getHeight();if(A<21||(A&3)!==1)throw new D;this.bitMatrix=p}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let p=0;for(let w=0;w<6;w++)p=this.copyBit(w,8,p);p=this.copyBit(7,8,p),p=this.copyBit(8,8,p),p=this.copyBit(8,7,p);for(let w=5;w>=0;w--)p=this.copyBit(8,w,p);let A=this.bitMatrix.getHeight(),v=0,_=A-7;for(let w=A-1;w>=_;w--)v=this.copyBit(8,w,v);for(let w=A-8;w<A;w++)v=this.copyBit(w,8,v);if(this.parsedFormatInfo=rn.decodeFormatInformation(p,v),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new D}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let p=this.bitMatrix.getHeight(),A=Math.floor((p-17)/4);if(A<=6)return Ci.getVersionForNumber(A);let v=0,_=p-11;for(let C=5;C>=0;C--)for(let T=p-9;T>=_;T--)v=this.copyBit(T,C,v);let w=Ci.decodeVersionInformation(v);if(w!==null&&w.getDimensionForVersion()===p)return this.parsedVersion=w,w;v=0;for(let C=5;C>=0;C--)for(let T=p-9;T>=_;T--)v=this.copyBit(C,T,v);if(w=Ci.decodeVersionInformation(v),w!==null&&w.getDimensionForVersion()===p)return this.parsedVersion=w,w;throw new D}copyBit(p,A,v){return(this.isMirror?this.bitMatrix.get(A,p):this.bitMatrix.get(p,A))?v<<1|1:v<<1}readCodewords(){let p=this.readFormatInformation(),A=this.readVersion(),v=ne.values.get(p.getDataMask()),_=this.bitMatrix.getHeight();v.unmaskBitMatrix(this.bitMatrix,_);let w=A.buildFunctionPattern(),C=!0,T=new Uint8Array(A.getTotalCodewords()),N=0,z=0,K=0;for(let ee=_-1;ee>0;ee-=2){ee===6&&ee--;for(let oe=0;oe<_;oe++){let ge=C?_-1-oe:oe;for(let we=0;we<2;we++)w.get(ee-we,ge)||(K++,z<<=1,this.bitMatrix.get(ee-we,ge)&&(z|=1),K===8&&(T[N++]=z,K=0,z=0))}C=!C}if(N!==A.getTotalCodewords())throw new D;return T}remask(){if(this.parsedFormatInfo===null)return;let p=ne.values[this.parsedFormatInfo.getDataMask()],A=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,A)}setMirror(p){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=p}mirror(){let p=this.bitMatrix;for(let A=0,v=p.getWidth();A<v;A++)for(let _=A+1,w=p.getHeight();_<w;_++)p.get(A,_)!==p.get(_,A)&&(p.flip(_,A),p.flip(A,_))}}class be{constructor(p,A){this.numDataCodewords=p,this.codewords=A}static getDataBlocks(p,A,v){if(p.length!==A.getTotalCodewords())throw new c;let _=A.getECBlocksForLevel(v),w=0,C=_.getECBlocks();for(let we of C)w+=we.getCount();let T=new Array(w),N=0;for(let we of C)for(let De=0;De<we.getCount();De++){let Ue=we.getDataCodewords(),Ke=_.getECCodewordsPerBlock()+Ue;T[N++]=new be(Ue,new Uint8Array(Ke))}let z=T[0].codewords.length,K=T.length-1;for(;K>=0&&T[K].codewords.length!==z;)K--;K++;let ee=z-_.getECCodewordsPerBlock(),oe=0;for(let we=0;we<ee;we++)for(let De=0;De<N;De++)T[De].codewords[we]=p[oe++];for(let we=K;we<N;we++)T[we].codewords[ee]=p[oe++];let ge=T[0].codewords.length;for(let we=ee;we<ge;we++)for(let De=0;De<N;De++){let Ue=De<K?we:we+1;T[De].codewords[Ue]=p[oe++]}return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Qe=function(V){return V[V.TERMINATOR=0]="TERMINATOR",V[V.NUMERIC=1]="NUMERIC",V[V.ALPHANUMERIC=2]="ALPHANUMERIC",V[V.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",V[V.BYTE=4]="BYTE",V[V.ECI=5]="ECI",V[V.KANJI=6]="KANJI",V[V.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",V[V.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",V[V.HANZI=9]="HANZI",V}(Qe||{});class Xe{constructor(p,A,v,_){this.value=p,this.stringValue=A,this.characterCountBitsForVersions=v,this.bits=_,Xe.FOR_BITS.set(_,this),Xe.FOR_VALUE.set(p,this)}static forBits(p){let A=Xe.FOR_BITS.get(p);if(A===void 0)throw new c;return A}getCharacterCountBits(p){let A=p.getVersionNumber(),v;return A<=9?v=0:A<=26?v=1:v=2,this.characterCountBitsForVersions[v]}getValue(){return this.value}getBits(){return this.bits}equals(p){if(!(p instanceof Xe))return!1;let A=p;return this.value===A.value}toString(){return this.stringValue}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.TERMINATOR=new Xe(Qe.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xe.NUMERIC=new Xe(Qe.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xe.ALPHANUMERIC=new Xe(Qe.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xe.STRUCTURED_APPEND=new Xe(Qe.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xe.BYTE=new Xe(Qe.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xe.ECI=new Xe(Qe.ECI,"ECI",Int32Array.from([0,0,0]),7),Xe.KANJI=new Xe(Qe.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xe.FNC1_FIRST_POSITION=new Xe(Qe.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xe.FNC1_SECOND_POSITION=new Xe(Qe.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xe.HANZI=new Xe(Qe.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let oi=(()=>{class V{static decode(A,v,_,w){let C=new Wa(A),T=new j,N=new Array,z=-1,K=-1;try{let ee=null,oe=!1,ge;do{if(C.available()<4)ge=Xe.TERMINATOR;else{let we=C.readBits(4);ge=Xe.forBits(we)}switch(ge){case Xe.TERMINATOR:break;case Xe.FNC1_FIRST_POSITION:case Xe.FNC1_SECOND_POSITION:oe=!0;break;case Xe.STRUCTURED_APPEND:if(C.available()<16)throw new D;z=C.readBits(8),K=C.readBits(8);break;case Xe.ECI:let we=V.parseECIValue(C);if(ee=F.getCharacterSetECIByValue(we),ee===null)throw new D;break;case Xe.HANZI:let De=C.readBits(4),Ue=C.readBits(ge.getCharacterCountBits(v));De===V.GB2312_SUBSET&&V.decodeHanziSegment(C,T,Ue);break;default:let Ke=C.readBits(ge.getCharacterCountBits(v));switch(ge){case Xe.NUMERIC:V.decodeNumericSegment(C,T,Ke);break;case Xe.ALPHANUMERIC:V.decodeAlphanumericSegment(C,T,Ke,oe);break;case Xe.BYTE:V.decodeByteSegment(C,T,Ke,ee,N,w);break;case Xe.KANJI:V.decodeKanjiSegment(C,T,Ke);break;default:throw new D}break}}while(ge!==Xe.TERMINATOR)}catch{throw new D}return new dt(A,T.toString(),N.length===0?null:N,_===null?null:_.toString(),z,K)}static decodeHanziSegment(A,v,_){if(_*13>A.available())throw new D;let w=new Uint8Array(2*_),C=0;for(;_>0;){let T=A.readBits(13),N=T/96<<8&4294967295|T%96;N<959?N+=41377:N+=42657,w[C]=N>>8&255,w[C+1]=N&255,C+=2,_--}try{v.append(U.decode(w,k.GB2312))}catch(T){throw new D(T)}}static decodeKanjiSegment(A,v,_){if(_*13>A.available())throw new D;let w=new Uint8Array(2*_),C=0;for(;_>0;){let T=A.readBits(13),N=T/192<<8&4294967295|T%192;N<7936?N+=33088:N+=49472,w[C]=N>>8,w[C+1]=N,C+=2,_--}try{v.append(U.decode(w,k.SHIFT_JIS))}catch(T){throw new D(T)}}static decodeByteSegment(A,v,_,w,C,T){if(8*_>A.available())throw new D;let N=new Uint8Array(_);for(let K=0;K<_;K++)N[K]=A.readBits(8);let z;w===null?z=k.guessEncoding(N,T):z=w.getName();try{v.append(U.decode(N,z))}catch(K){throw new D(K)}C.push(N)}static toAlphaNumericChar(A){if(A>=V.ALPHANUMERIC_CHARS.length)throw new D;return V.ALPHANUMERIC_CHARS[A]}static decodeAlphanumericSegment(A,v,_,w){let C=v.length();for(;_>1;){if(A.available()<11)throw new D;let T=A.readBits(11);v.append(V.toAlphaNumericChar(Math.floor(T/45))),v.append(V.toAlphaNumericChar(T%45)),_-=2}if(_===1){if(A.available()<6)throw new D;v.append(V.toAlphaNumericChar(A.readBits(6)))}if(w)for(let T=C;T<v.length();T++)v.charAt(T)==="%"&&(T<v.length()-1&&v.charAt(T+1)==="%"?v.deleteCharAt(T+1):v.setCharAt(T,String.fromCharCode(29)))}static decodeNumericSegment(A,v,_){for(;_>=3;){if(A.available()<10)throw new D;let w=A.readBits(10);if(w>=1e3)throw new D;v.append(V.toAlphaNumericChar(Math.floor(w/100))),v.append(V.toAlphaNumericChar(Math.floor(w/10)%10)),v.append(V.toAlphaNumericChar(w%10)),_-=3}if(_===2){if(A.available()<7)throw new D;let w=A.readBits(7);if(w>=100)throw new D;v.append(V.toAlphaNumericChar(Math.floor(w/10))),v.append(V.toAlphaNumericChar(w%10))}else if(_===1){if(A.available()<4)throw new D;let w=A.readBits(4);if(w>=10)throw new D;v.append(V.toAlphaNumericChar(w))}}static parseECIValue(A){let v=A.readBits(8);if(!(v&128))return v&127;if((v&192)===128){let _=A.readBits(8);return(v&63)<<8&4294967295|_}if((v&224)===192){let _=A.readBits(16);return(v&31)<<16&4294967295|_}throw new D}}return V.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",V.GB2312_SUBSET=1,V})();class _r{constructor(p){this.mirrored=p}isMirrored(){return this.mirrored}applyMirroredCorrection(p){if(!this.mirrored||p===null||p.length<3)return;let A=p[0];p[0]=p[2],p[2]=A}}class va{constructor(){this.rsDecoder=new _t(Je.QR_CODE_FIELD_256)}decodeBooleanArray(p,A){return this.decodeBitMatrix(q.parseFromBooleanArray(p),A)}decodeBitMatrix(p,A){let v=new he(p),_=null;try{return this.decodeBitMatrixParser(v,A)}catch(w){_=w}try{v.remask(),v.setMirror(!0),v.readVersion(),v.readFormatInformation(),v.mirror();let w=this.decodeBitMatrixParser(v,A);return w.setOther(new _r(!0)),w}catch(w){throw _!==null?_:w}}decodeBitMatrixParser(p,A){let v=p.readVersion(),_=p.readFormatInformation().getErrorCorrectionLevel(),w=p.readCodewords(),C=be.getDataBlocks(w,v,_),T=0;for(let K of C)T+=K.getNumDataCodewords();let N=new Uint8Array(T),z=0;for(let K of C){let ee=K.getCodewords(),oe=K.getNumDataCodewords();this.correctErrors(ee,oe);for(let ge=0;ge<oe;ge++)N[z++]=ee[ge]}return oi.decode(N,v,_,A)}correctErrors(p,A){let v=new Int32Array(p);try{this.rsDecoder.decode(v,p.length-A)}catch{throw new h}for(let _=0;_<A;_++)p[_]=v[_]}}class Ln extends ae{constructor(p,A,v){super(p,A),this.estimatedModuleSize=v}aboutEquals(p,A,v){if(Math.abs(A-this.getY())<=p&&Math.abs(v-this.getX())<=p){let _=Math.abs(p-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(p,A,v){let _=(this.getX()+A)/2,w=(this.getY()+p)/2,C=(this.estimatedModuleSize+v)/2;return new Ln(_,w,C)}}class Fa{constructor(p,A,v,_,w,C,T){this.image=p,this.startX=A,this.startY=v,this.width=_,this.height=w,this.moduleSize=C,this.resultPointCallback=T,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let p=this.startX,A=this.height,v=this.width,_=p+v,w=this.startY+A/2,C=new Int32Array(3),T=this.image;for(let N=0;N<A;N++){let z=w+(N&1?-Math.floor((N+1)/2):Math.floor((N+1)/2));C[0]=0,C[1]=0,C[2]=0;let K=p;for(;K<_&&!T.get(K,z);)K++;let ee=0;for(;K<_;){if(T.get(K,z))if(ee===1)C[1]++;else if(ee===2){if(this.foundPatternCross(C)){let oe=this.handlePossibleCenter(C,z,K);if(oe!==null)return oe}C[0]=C[2],C[1]=1,C[2]=0,ee=1}else C[++ee]++;else ee===1&&ee++,C[ee]++;K++}if(this.foundPatternCross(C)){let oe=this.handlePossibleCenter(C,z,_);if(oe!==null)return oe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(p,A){return A-p[2]-p[1]/2}foundPatternCross(p){let A=this.moduleSize,v=A/2;for(let _=0;_<3;_++)if(Math.abs(A-p[_])>=v)return!1;return!0}crossCheckVertical(p,A,v,_){let w=this.image,C=w.getHeight(),T=this.crossCheckStateCount;T[0]=0,T[1]=0,T[2]=0;let N=p;for(;N>=0&&w.get(A,N)&&T[1]<=v;)T[1]++,N--;if(N<0||T[1]>v)return NaN;for(;N>=0&&!w.get(A,N)&&T[0]<=v;)T[0]++,N--;if(T[0]>v)return NaN;for(N=p+1;N<C&&w.get(A,N)&&T[1]<=v;)T[1]++,N++;if(N===C||T[1]>v)return NaN;for(;N<C&&!w.get(A,N)&&T[2]<=v;)T[2]++,N++;if(T[2]>v)return NaN;let z=T[0]+T[1]+T[2];return 5*Math.abs(z-_)>=2*_?NaN:this.foundPatternCross(T)?Fa.centerFromEnd(T,N):NaN}handlePossibleCenter(p,A,v){let _=p[0]+p[1]+p[2],w=Fa.centerFromEnd(p,v),C=this.crossCheckVertical(A,w,2*p[1],_);if(!isNaN(C)){let T=(p[0]+p[1]+p[2])/3;for(let z of this.possibleCenters)if(z.aboutEquals(T,C,w))return z.combineEstimate(C,w,T);let N=new Ln(w,C,T);this.possibleCenters.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return null}}class ds extends ae{constructor(p,A,v,_){super(p,A),this.estimatedModuleSize=v,this.count=_,_===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(p,A,v){if(Math.abs(A-this.getY())<=p&&Math.abs(v-this.getX())<=p){let _=Math.abs(p-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(p,A,v){let _=this.count+1,w=(this.count*this.getX()+A)/_,C=(this.count*this.getY()+p)/_,T=(this.count*this.estimatedModuleSize+v)/_;return new ds(w,C,T,_)}}class gB{constructor(p){this.bottomLeft=p[0],this.topLeft=p[1],this.topRight=p[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let sA=(()=>{class V{constructor(A,v){this.image=A,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=v}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(A){let v=A!=null&&A.get(E.TRY_HARDER)!==void 0,_=A!=null&&A.get(E.PURE_BARCODE)!==void 0,w=this.image,C=w.getHeight(),T=w.getWidth(),N=Math.floor(3*C/(4*V.MAX_MODULES));(N<V.MIN_SKIP||v)&&(N=V.MIN_SKIP);let z=!1,K=new Int32Array(5);for(let oe=N-1;oe<C&&!z;oe+=N){K[0]=0,K[1]=0,K[2]=0,K[3]=0,K[4]=0;let ge=0;for(let we=0;we<T;we++)if(w.get(we,oe))(ge&1)===1&&ge++,K[ge]++;else if(ge&1)K[ge]++;else if(ge===4)if(V.foundPatternCross(K)){if(this.handlePossibleCenter(K,oe,we,_)===!0)if(N=2,this.hasSkipped===!0)z=this.haveMultiplyConfirmedCenters();else{let Ue=this.findRowSkip();Ue>K[2]&&(oe+=Ue-K[2]-N,we=T-1)}else{K[0]=K[2],K[1]=K[3],K[2]=K[4],K[3]=1,K[4]=0,ge=3;continue}ge=0,K[0]=0,K[1]=0,K[2]=0,K[3]=0,K[4]=0}else K[0]=K[2],K[1]=K[3],K[2]=K[4],K[3]=1,K[4]=0,ge=3;else K[++ge]++;V.foundPatternCross(K)&&this.handlePossibleCenter(K,oe,T,_)===!0&&(N=K[0],this.hasSkipped&&(z=this.haveMultiplyConfirmedCenters()))}let ee=this.selectBestPatterns();return ae.orderBestPatterns(ee),new gB(ee)}static centerFromEnd(A,v){return v-A[4]-A[3]-A[2]/2}static foundPatternCross(A){let v=0;for(let C=0;C<5;C++){let T=A[C];if(T===0)return!1;v+=T}if(v<7)return!1;let _=v/7,w=_/2;return Math.abs(_-A[0])<w&&Math.abs(_-A[1])<w&&Math.abs(3*_-A[2])<3*w&&Math.abs(_-A[3])<w&&Math.abs(_-A[4])<w}getCrossCheckStateCount(){let A=this.crossCheckStateCount;return A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A}crossCheckDiagonal(A,v,_,w){let C=this.getCrossCheckStateCount(),T=0,N=this.image;for(;A>=T&&v>=T&&N.get(v-T,A-T);)C[2]++,T++;if(A<T||v<T)return!1;for(;A>=T&&v>=T&&!N.get(v-T,A-T)&&C[1]<=_;)C[1]++,T++;if(A<T||v<T||C[1]>_)return!1;for(;A>=T&&v>=T&&N.get(v-T,A-T)&&C[0]<=_;)C[0]++,T++;if(C[0]>_)return!1;let z=N.getHeight(),K=N.getWidth();for(T=1;A+T<z&&v+T<K&&N.get(v+T,A+T);)C[2]++,T++;if(A+T>=z||v+T>=K)return!1;for(;A+T<z&&v+T<K&&!N.get(v+T,A+T)&&C[3]<_;)C[3]++,T++;if(A+T>=z||v+T>=K||C[3]>=_)return!1;for(;A+T<z&&v+T<K&&N.get(v+T,A+T)&&C[4]<_;)C[4]++,T++;if(C[4]>=_)return!1;let ee=C[0]+C[1]+C[2]+C[3]+C[4];return Math.abs(ee-w)<2*w&&V.foundPatternCross(C)}crossCheckVertical(A,v,_,w){let C=this.image,T=C.getHeight(),N=this.getCrossCheckStateCount(),z=A;for(;z>=0&&C.get(v,z);)N[2]++,z--;if(z<0)return NaN;for(;z>=0&&!C.get(v,z)&&N[1]<=_;)N[1]++,z--;if(z<0||N[1]>_)return NaN;for(;z>=0&&C.get(v,z)&&N[0]<=_;)N[0]++,z--;if(N[0]>_)return NaN;for(z=A+1;z<T&&C.get(v,z);)N[2]++,z++;if(z===T)return NaN;for(;z<T&&!C.get(v,z)&&N[3]<_;)N[3]++,z++;if(z===T||N[3]>=_)return NaN;for(;z<T&&C.get(v,z)&&N[4]<_;)N[4]++,z++;if(N[4]>=_)return NaN;let K=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(K-w)>=2*w?NaN:V.foundPatternCross(N)?V.centerFromEnd(N,z):NaN}crossCheckHorizontal(A,v,_,w){let C=this.image,T=C.getWidth(),N=this.getCrossCheckStateCount(),z=A;for(;z>=0&&C.get(z,v);)N[2]++,z--;if(z<0)return NaN;for(;z>=0&&!C.get(z,v)&&N[1]<=_;)N[1]++,z--;if(z<0||N[1]>_)return NaN;for(;z>=0&&C.get(z,v)&&N[0]<=_;)N[0]++,z--;if(N[0]>_)return NaN;for(z=A+1;z<T&&C.get(z,v);)N[2]++,z++;if(z===T)return NaN;for(;z<T&&!C.get(z,v)&&N[3]<_;)N[3]++,z++;if(z===T||N[3]>=_)return NaN;for(;z<T&&C.get(z,v)&&N[4]<_;)N[4]++,z++;if(N[4]>=_)return NaN;let K=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(K-w)>=w?NaN:V.foundPatternCross(N)?V.centerFromEnd(N,z):NaN}handlePossibleCenter(A,v,_,w){let C=A[0]+A[1]+A[2]+A[3]+A[4],T=V.centerFromEnd(A,_),N=this.crossCheckVertical(v,Math.floor(T),A[2],C);if(!isNaN(N)&&(T=this.crossCheckHorizontal(Math.floor(T),Math.floor(N),A[2],C),!isNaN(T)&&(!w||this.crossCheckDiagonal(Math.floor(N),Math.floor(T),A[2],C)))){let z=C/7,K=!1,ee=this.possibleCenters;for(let oe=0,ge=ee.length;oe<ge;oe++){let we=ee[oe];if(we.aboutEquals(z,N,T)){ee[oe]=we.combineEstimate(N,T,z),K=!0;break}}if(!K){let oe=new ds(T,N,z);ee.push(oe),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(oe)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let v=null;for(let _ of this.possibleCenters)if(_.getCount()>=V.CENTER_QUORUM)if(v==null)v=_;else return this.hasSkipped=!0,Math.floor((Math.abs(v.getX()-_.getX())-Math.abs(v.getY()-_.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let A=0,v=0,_=this.possibleCenters.length;for(let T of this.possibleCenters)T.getCount()>=V.CENTER_QUORUM&&(A++,v+=T.getEstimatedModuleSize());if(A<3)return!1;let w=v/_,C=0;for(let T of this.possibleCenters)C+=Math.abs(T.getEstimatedModuleSize()-w);return C<=.05*v}selectBestPatterns(){let A=this.possibleCenters.length;if(A<3)throw new X;let v=this.possibleCenters,_;if(A>3){let w=0,C=0;for(let z of this.possibleCenters){let K=z.getEstimatedModuleSize();w+=K,C+=K*K}_=w/A;let T=Math.sqrt(C/A-_*_);v.sort((z,K)=>{let ee=Math.abs(K.getEstimatedModuleSize()-_),oe=Math.abs(z.getEstimatedModuleSize()-_);return ee<oe?-1:ee>oe?1:0});let N=Math.max(.2*_,T);for(let z=0;z<v.length&&v.length>3;z++){let K=v[z];Math.abs(K.getEstimatedModuleSize()-_)>N&&(v.splice(z,1),z--)}}if(v.length>3){let w=0;for(let C of v)w+=C.getEstimatedModuleSize();_=w/v.length,v.sort((C,T)=>{if(T.getCount()===C.getCount()){let N=Math.abs(T.getEstimatedModuleSize()-_),z=Math.abs(C.getEstimatedModuleSize()-_);return N<z?1:N>z?-1:0}else return T.getCount()-C.getCount()}),v.splice(3)}return[v[0],v[1],v[2]]}}return V.CENTER_QUORUM=2,V.MIN_SKIP=3,V.MAX_MODULES=57,V})();class lA{constructor(p){this.image=p}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(p){this.resultPointCallback=p==null?null:p.get(E.NEED_RESULT_POINT_CALLBACK);let v=new sA(this.image,this.resultPointCallback).find(p);return this.processFinderPatternInfo(v)}processFinderPatternInfo(p){let A=p.getTopLeft(),v=p.getTopRight(),_=p.getBottomLeft(),w=this.calculateModuleSize(A,v,_);if(w<1)throw new X("No pattern found in proccess finder.");let C=lA.computeDimension(A,v,_,w),T=Ci.getProvisionalVersionForDimension(C),N=T.getDimensionForVersion()-7,z=null;if(T.getAlignmentPatternCenters().length>0){let ge=v.getX()-A.getX()+_.getX(),we=v.getY()-A.getY()+_.getY(),De=1-3/N,Ue=Math.floor(A.getX()+De*(ge-A.getX())),Ke=Math.floor(A.getY()+De*(we-A.getY()));for(let Et=4;Et<=16;Et<<=1)try{z=this.findAlignmentInRegion(w,Ue,Ke,Et);break}catch(Jt){if(!(Jt instanceof X))throw Jt}}let K=lA.createTransform(A,v,_,z,C),ee=lA.sampleGrid(this.image,K,C),oe;return z===null?oe=[_,A,v]:oe=[_,A,v,z],new se(ee,oe)}static createTransform(p,A,v,_,w){let C=w-3.5,T,N,z,K;return _!==null?(T=_.getX(),N=_.getY(),z=C-3,K=z):(T=A.getX()-p.getX()+v.getX(),N=A.getY()-p.getY()+v.getY(),z=C,K=C),mt.quadrilateralToQuadrilateral(3.5,3.5,C,3.5,z,K,3.5,C,p.getX(),p.getY(),A.getX(),A.getY(),T,N,v.getX(),v.getY())}static sampleGrid(p,A,v){return kt.getInstance().sampleGridWithTransform(p,v,v,A)}static computeDimension(p,A,v,_){let w=Xt.round(ae.distance(p,A)/_),C=Xt.round(ae.distance(p,v)/_),T=Math.floor((w+C)/2)+7;switch(T&3){case 0:T++;break;case 2:T--;break;case 3:throw new X("Dimensions could be not found.")}return T}calculateModuleSize(p,A,v){return(this.calculateModuleSizeOneWay(p,A)+this.calculateModuleSizeOneWay(p,v))/2}calculateModuleSizeOneWay(p,A){let v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(A.getX()),Math.floor(A.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(A.getX()),Math.floor(A.getY()),Math.floor(p.getX()),Math.floor(p.getY()));return isNaN(v)?_/7:isNaN(_)?v/7:(v+_)/14}sizeOfBlackWhiteBlackRunBothWays(p,A,v,_){let w=this.sizeOfBlackWhiteBlackRun(p,A,v,_),C=1,T=p-(v-p);T<0?(C=p/(p-T),T=0):T>=this.image.getWidth()&&(C=(this.image.getWidth()-1-p)/(T-p),T=this.image.getWidth()-1);let N=Math.floor(A-(_-A)*C);return C=1,N<0?(C=A/(A-N),N=0):N>=this.image.getHeight()&&(C=(this.image.getHeight()-1-A)/(N-A),N=this.image.getHeight()-1),T=Math.floor(p+(T-p)*C),w+=this.sizeOfBlackWhiteBlackRun(p,A,T,N),w-1}sizeOfBlackWhiteBlackRun(p,A,v,_){let w=Math.abs(_-A)>Math.abs(v-p);if(w){let ge=p;p=A,A=ge,ge=v,v=_,_=ge}let C=Math.abs(v-p),T=Math.abs(_-A),N=-C/2,z=p<v?1:-1,K=A<_?1:-1,ee=0,oe=v+z;for(let ge=p,we=A;ge!==oe;ge+=z){let De=w?we:ge,Ue=w?ge:we;if(ee===1===this.image.get(De,Ue)){if(ee===2)return Xt.distance(ge,we,p,A);ee++}if(N+=T,N>0){if(we===_)break;we+=K,N-=C}}return ee===2?Xt.distance(v+z,_,p,A):NaN}findAlignmentInRegion(p,A,v,_){let w=Math.floor(_*p),C=Math.max(0,A-w),T=Math.min(this.image.getWidth()-1,A+w);if(T-C<p*3)throw new X("Alignment top exceeds estimated module size.");let N=Math.max(0,v-w),z=Math.min(this.image.getHeight()-1,v+w);if(z-N<p*3)throw new X("Alignment bottom exceeds estimated module size.");return new Fa(this.image,C,N,T-C,z-N,p,this.resultPointCallback).find()}}class $u{constructor(){this.decoder=new va}getDecoder(){return this.decoder}decode(p,A){let v,_;if(A!=null&&A.get(E.PURE_BARCODE)!==void 0){let N=$u.extractPureBits(p.getBlackMatrix());v=this.decoder.decodeBitMatrix(N,A),_=$u.NO_POINTS}else{let N=new lA(p.getBlackMatrix()).detect(A);v=this.decoder.decodeBitMatrix(N.getBits(),A),_=N.getPoints()}v.getOther()instanceof _r&&v.getOther().applyMirroredCorrection(_);let w=new Oe(v.getText(),v.getRawBytes(),void 0,_,Se.QR_CODE,void 0),C=v.getByteSegments();C!==null&&w.putMetadata(rt.BYTE_SEGMENTS,C);let T=v.getECLevel();return T!==null&&w.putMetadata(rt.ERROR_CORRECTION_LEVEL,T),v.hasStructuredAppend()&&(w.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,v.getStructuredAppendSequenceNumber()),w.putMetadata(rt.STRUCTURED_APPEND_PARITY,v.getStructuredAppendParity())),w}reset(){}static extractPureBits(p){let A=p.getTopLeftOnBit(),v=p.getBottomRightOnBit();if(A===null||v===null)throw new X;let _=this.moduleSize(A,p),w=A[1],C=v[1],T=A[0],N=v[0];if(T>=N||w>=C)throw new X;if(C-w!==N-T&&(N=T+(C-w),N>=p.getWidth()))throw new X;let z=Math.round((N-T+1)/_),K=Math.round((C-w+1)/_);if(z<=0||K<=0)throw new X;if(K!==z)throw new X;let ee=Math.floor(_/2);w+=ee,T+=ee;let oe=T+Math.floor((z-1)*_)-N;if(oe>0){if(oe>ee)throw new X;T-=oe}let ge=w+Math.floor((K-1)*_)-C;if(ge>0){if(ge>ee)throw new X;w-=ge}let we=new q(z,K);for(let De=0;De<K;De++){let Ue=w+Math.floor(De*_);for(let Ke=0;Ke<z;Ke++)p.get(T+Math.floor(Ke*_),Ue)&&we.set(Ke,De)}return we}static moduleSize(p,A){let v=A.getHeight(),_=A.getWidth(),w=p[0],C=p[1],T=!0,N=0;for(;w<_&&C<v;){if(T!==A.get(w,C)){if(++N===5)break;T=!T}w++,C++}if(w===_||C===v)throw new X;return(w-p[0])/7}}$u.NO_POINTS=new Array;class $i{PDF417Common(){}static getBitCountSum(p){return Xt.sum(p)}static toIntArray(p){if(p==null||!p.length)return $i.EMPTY_INT_ARRAY;let A=new Int32Array(p.length),v=0;for(let _ of p)A[v++]=_;return A}static getCodeword(p){let A=g.binarySearch($i.SYMBOL_TABLE,p&262143);return A<0?-1:($i.CODEWORD_TABLE[A]-1)%$i.NUMBER_OF_CODEWORDS}}$i.NUMBER_OF_CODEWORDS=929,$i.MAX_CODEWORDS_IN_BARCODE=$i.NUMBER_OF_CODEWORDS-1,$i.MIN_ROWS_IN_BARCODE=3,$i.MAX_ROWS_IN_BARCODE=90,$i.MODULES_IN_CODEWORD=17,$i.MODULES_IN_STOP_PATTERN=18,$i.BARS_IN_MODULE=8,$i.EMPTY_INT_ARRAY=new Int32Array([]),$i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class vB{constructor(p,A){this.bits=p,this.points=A}getBits(){return this.bits}getPoints(){return this.points}}class Sr{static detectMultiple(p,A,v){let _=p.getBlackMatrix(),w=Sr.detect(v,_);return w.length||(_=_.clone(),_.rotate180(),w=Sr.detect(v,_)),new vB(_,w)}static detect(p,A){let v=new Array,_=0,w=0,C=!1;for(;_<A.getHeight();){let T=Sr.findVertices(A,_,w);if(T[0]==null&&T[3]==null){if(!C)break;C=!1,w=0;for(let N of v)N[1]!=null&&(_=Math.trunc(Math.max(_,N[1].getY()))),N[3]!=null&&(_=Math.max(_,Math.trunc(N[3].getY())));_+=Sr.ROW_STEP;continue}if(C=!0,v.push(T),!p)break;T[2]!=null?(w=Math.trunc(T[2].getX()),_=Math.trunc(T[2].getY())):(w=Math.trunc(T[4].getX()),_=Math.trunc(T[4].getY()))}return v}static findVertices(p,A,v){let _=p.getHeight(),w=p.getWidth(),C=new Array(8);return Sr.copyToResult(C,Sr.findRowsWithPattern(p,_,w,A,v,Sr.START_PATTERN),Sr.INDEXES_START_PATTERN),C[4]!=null&&(v=Math.trunc(C[4].getX()),A=Math.trunc(C[4].getY())),Sr.copyToResult(C,Sr.findRowsWithPattern(p,_,w,A,v,Sr.STOP_PATTERN),Sr.INDEXES_STOP_PATTERN),C}static copyToResult(p,A,v){for(let _=0;_<v.length;_++)p[v[_]]=A[_]}static findRowsWithPattern(p,A,v,_,w,C){let T=new Array(4),N=!1,z=new Int32Array(C.length);for(;_<A;_+=Sr.ROW_STEP){let ee=Sr.findGuardPattern(p,w,_,v,!1,C,z);if(ee!=null){for(;_>0;){let oe=Sr.findGuardPattern(p,w,--_,v,!1,C,z);if(oe!=null)ee=oe;else{_++;break}}T[0]=new ae(ee[0],_),T[1]=new ae(ee[1],_),N=!0;break}}let K=_+1;if(N){let ee=0,oe=Int32Array.from([Math.trunc(T[0].getX()),Math.trunc(T[1].getX())]);for(;K<A;K++){let ge=Sr.findGuardPattern(p,oe[0],K,v,!1,C,z);if(ge!=null&&Math.abs(oe[0]-ge[0])<Sr.MAX_PATTERN_DRIFT&&Math.abs(oe[1]-ge[1])<Sr.MAX_PATTERN_DRIFT)oe=ge,ee=0;else{if(ee>Sr.SKIPPED_ROW_COUNT_MAX)break;ee++}}K-=ee+1,T[2]=new ae(oe[0],K),T[3]=new ae(oe[1],K)}return K-_<Sr.BARCODE_MIN_HEIGHT&&g.fill(T,null),T}static findGuardPattern(p,A,v,_,w,C,T){g.fillWithin(T,0,T.length,0);let N=A,z=0;for(;p.get(N,v)&&N>0&&z++<Sr.MAX_PIXEL_DRIFT;)N--;let K=N,ee=0,oe=C.length;for(let ge=w;K<_;K++)if(p.get(K,v)!==ge)T[ee]++;else{if(ee===oe-1){if(Sr.patternMatchVariance(T,C,Sr.MAX_INDIVIDUAL_VARIANCE)<Sr.MAX_AVG_VARIANCE)return new Int32Array([N,K]);N+=T[0]+T[1],f.arraycopy(T,2,T,0,ee-1),T[ee-1]=0,T[ee]=0,ee--}else ee++;T[ee]=1,ge=!ge}return ee===oe-1&&Sr.patternMatchVariance(T,C,Sr.MAX_INDIVIDUAL_VARIANCE)<Sr.MAX_AVG_VARIANCE?new Int32Array([N,K-1]):null}static patternMatchVariance(p,A,v){let _=p.length,w=0,C=0;for(let z=0;z<_;z++)w+=p[z],C+=A[z];if(w<C)return 1/0;let T=w/C;v*=T;let N=0;for(let z=0;z<_;z++){let K=p[z],ee=A[z]*T,oe=K>ee?K-ee:ee-K;if(oe>v)return 1/0;N+=oe}return N/w}}Sr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Sr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Sr.MAX_AVG_VARIANCE=.42,Sr.MAX_INDIVIDUAL_VARIANCE=.8,Sr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Sr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Sr.MAX_PIXEL_DRIFT=3,Sr.MAX_PATTERN_DRIFT=5,Sr.SKIPPED_ROW_COUNT_MAX=25,Sr.ROW_STEP=5,Sr.BARCODE_MIN_HEIGHT=10;class po{constructor(p,A){if(A.length===0)throw new c;this.field=p;let v=A.length;if(v>1&&A[0]===0){let _=1;for(;_<v&&A[_]===0;)_++;_===v?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(v-_),f.arraycopy(A,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=A}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);if(p===1){let _=0;for(let w of this.coefficients)_=this.field.add(_,w);return _}let A=this.coefficients[0],v=this.coefficients.length;for(let _=1;_<v;_++)A=this.field.add(this.field.multiply(p,A),this.coefficients[_]);return A}add(p){if(!this.field.equals(p.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero())return p;if(p.isZero())return this;let A=this.coefficients,v=p.coefficients;if(A.length>v.length){let C=A;A=v,v=C}let _=new Int32Array(v.length),w=v.length-A.length;f.arraycopy(v,0,_,0,w);for(let C=w;C<v.length;C++)_[C]=this.field.add(A[C-w],v[C]);return new po(this.field,_)}subtract(p){if(!this.field.equals(p.field))throw new c("ModulusPolys do not have same ModulusGF field");return p.isZero()?this:this.add(p.negative())}multiply(p){return p instanceof po?this.multiplyOther(p):this.multiplyScalar(p)}multiplyOther(p){if(!this.field.equals(p.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero()||p.isZero())return new po(this.field,new Int32Array([0]));let A=this.coefficients,v=A.length,_=p.coefficients,w=_.length,C=new Int32Array(v+w-1);for(let T=0;T<v;T++){let N=A[T];for(let z=0;z<w;z++)C[T+z]=this.field.add(C[T+z],this.field.multiply(N,_[z]))}return new po(this.field,C)}negative(){let p=this.coefficients.length,A=new Int32Array(p);for(let v=0;v<p;v++)A[v]=this.field.subtract(0,this.coefficients[v]);return new po(this.field,A)}multiplyScalar(p){if(p===0)return new po(this.field,new Int32Array([0]));if(p===1)return this;let A=this.coefficients.length,v=new Int32Array(A);for(let _=0;_<A;_++)v[_]=this.field.multiply(this.coefficients[_],p);return new po(this.field,v)}multiplyByMonomial(p,A){if(p<0)throw new c;if(A===0)return new po(this.field,new Int32Array([0]));let v=this.coefficients.length,_=new Int32Array(v+p);for(let w=0;w<v;w++)_[w]=this.field.multiply(this.coefficients[w],A);return new po(this.field,_)}toString(){let p=new j;for(let A=this.getDegree();A>=0;A--){let v=this.getCoefficient(A);v!==0&&(v<0?(p.append(" - "),v=-v):p.length()>0&&p.append(" + "),(A===0||v!==1)&&p.append(v),A!==0&&(A===1?p.append("x"):(p.append("x^"),p.append(A))))}return p.toString()}}class dc{add(p,A){return(p+A)%this.modulus}subtract(p,A){return(this.modulus+p-A)%this.modulus}exp(p){return this.expTable[p]}log(p){if(p===0)throw new c;return this.logTable[p]}inverse(p){if(p===0)throw new pt;return this.expTable[this.modulus-this.logTable[p]-1]}multiply(p,A){return p===0||A===0?0:this.expTable[(this.logTable[p]+this.logTable[A])%(this.modulus-1)]}getSize(){return this.modulus}equals(p){return p===this}}class yg extends dc{constructor(p,A){super(),this.modulus=p,this.expTable=new Int32Array(p),this.logTable=new Int32Array(p);let v=1;for(let _=0;_<p;_++)this.expTable[_]=v,v=v*A%p;for(let _=0;_<p-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new po(this,new Int32Array([0])),this.one=new po(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,A){if(p<0)throw new c;if(A===0)return this.zero;let v=new Int32Array(p+1);return v[0]=A,new po(this,v)}}yg.PDF417_GF=new yg($i.NUMBER_OF_CODEWORDS,3);class D1{constructor(){this.field=yg.PDF417_GF}decode(p,A,v){let _=new po(this.field,p),w=new Int32Array(A),C=!1;for(let we=A;we>0;we--){let De=_.evaluateAt(this.field.exp(we));w[A-we]=De,De!==0&&(C=!0)}if(!C)return 0;let T=this.field.getOne();if(v!=null)for(let we of v){let De=this.field.exp(p.length-1-we),Ue=new po(this.field,new Int32Array([this.field.subtract(0,De),1]));T=T.multiply(Ue)}let N=new po(this.field,w),z=this.runEuclideanAlgorithm(this.field.buildMonomial(A,1),N,A),K=z[0],ee=z[1],oe=this.findErrorLocations(K),ge=this.findErrorMagnitudes(ee,K,oe);for(let we=0;we<oe.length;we++){let De=p.length-1-this.field.log(oe[we]);if(De<0)throw h.getChecksumInstance();p[De]=this.field.subtract(p[De],ge[we])}return oe.length}runEuclideanAlgorithm(p,A,v){if(p.getDegree()<A.getDegree()){let oe=p;p=A,A=oe}let _=p,w=A,C=this.field.getZero(),T=this.field.getOne();for(;w.getDegree()>=Math.round(v/2);){let oe=_,ge=C;if(_=w,C=T,_.isZero())throw h.getChecksumInstance();w=oe;let we=this.field.getZero(),De=_.getCoefficient(_.getDegree()),Ue=this.field.inverse(De);for(;w.getDegree()>=_.getDegree()&&!w.isZero();){let Ke=w.getDegree()-_.getDegree(),Et=this.field.multiply(w.getCoefficient(w.getDegree()),Ue);we=we.add(this.field.buildMonomial(Ke,Et)),w=w.subtract(_.multiplyByMonomial(Ke,Et))}T=we.multiply(C).subtract(ge).negative()}let N=T.getCoefficient(0);if(N===0)throw h.getChecksumInstance();let z=this.field.inverse(N),K=T.multiply(z),ee=w.multiply(z);return[K,ee]}findErrorLocations(p){let A=p.getDegree(),v=new Int32Array(A),_=0;for(let w=1;w<this.field.getSize()&&_<A;w++)p.evaluateAt(w)===0&&(v[_]=this.field.inverse(w),_++);if(_!==A)throw h.getChecksumInstance();return v}findErrorMagnitudes(p,A,v){let _=A.getDegree(),w=new Int32Array(_);for(let z=1;z<=_;z++)w[_-z]=this.field.multiply(z,A.getCoefficient(z));let C=new po(this.field,w),T=v.length,N=new Int32Array(T);for(let z=0;z<T;z++){let K=this.field.inverse(v[z]),ee=this.field.subtract(0,p.evaluateAt(K)),oe=this.field.inverse(C.evaluateAt(K));N[z]=this.field.multiply(ee,oe)}return N}}class eh{constructor(p,A,v,_,w){p instanceof eh?this.constructor_2(p):this.constructor_1(p,A,v,_,w)}constructor_1(p,A,v,_,w){let C=A==null||v==null,T=_==null||w==null;if(C&&T)throw new X;C?(A=new ae(0,_.getY()),v=new ae(0,w.getY())):T&&(_=new ae(p.getWidth()-1,A.getY()),w=new ae(p.getWidth()-1,v.getY())),this.image=p,this.topLeft=A,this.bottomLeft=v,this.topRight=_,this.bottomRight=w,this.minX=Math.trunc(Math.min(A.getX(),v.getX())),this.maxX=Math.trunc(Math.max(_.getX(),w.getX())),this.minY=Math.trunc(Math.min(A.getY(),_.getY())),this.maxY=Math.trunc(Math.max(v.getY(),w.getY()))}constructor_2(p){this.image=p.image,this.topLeft=p.getTopLeft(),this.bottomLeft=p.getBottomLeft(),this.topRight=p.getTopRight(),this.bottomRight=p.getBottomRight(),this.minX=p.getMinX(),this.maxX=p.getMaxX(),this.minY=p.getMinY(),this.maxY=p.getMaxY()}static merge(p,A){return p==null?A:A==null?p:new eh(p.image,p.topLeft,p.bottomLeft,A.topRight,A.bottomRight)}addMissingRows(p,A,v){let _=this.topLeft,w=this.bottomLeft,C=this.topRight,T=this.bottomRight;if(p>0){let N=v?this.topLeft:this.topRight,z=Math.trunc(N.getY()-p);z<0&&(z=0);let K=new ae(N.getX(),z);v?_=K:C=K}if(A>0){let N=v?this.bottomLeft:this.bottomRight,z=Math.trunc(N.getY()+A);z>=this.image.getHeight()&&(z=this.image.getHeight()-1);let K=new ae(N.getX(),z);v?w=K:T=K}return new eh(this.image,_,w,C,T)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class yB{constructor(p,A,v,_){this.columnCount=p,this.errorCorrectionLevel=_,this.rowCountUpperPart=A,this.rowCountLowerPart=v,this.rowCount=A+v}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class cA{constructor(){this.buffer=""}static form(p,A){let v=-1;function _(C,T,N,z,K,ee){if(C==="%%")return"%";if(A[++v]===void 0)return;C=z?parseInt(z.substr(1)):void 0;let oe=K?parseInt(K.substr(1)):void 0,ge;switch(ee){case"s":ge=A[v];break;case"c":ge=A[v][0];break;case"f":ge=parseFloat(A[v]).toFixed(C);break;case"p":ge=parseFloat(A[v]).toPrecision(C);break;case"e":ge=parseFloat(A[v]).toExponential(C);break;case"x":ge=parseInt(A[v]).toString(oe||16);break;case"d":ge=parseFloat(parseInt(A[v],oe||10).toPrecision(C)).toFixed(0);break}ge=typeof ge=="object"?JSON.stringify(ge):(+ge).toString(oe);let we=parseInt(N),De=N&&N[0]+""=="0"?"0":" ";for(;ge.length<we;)ge=T!==void 0?ge+De:De+ge;return ge}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(w,_)}format(p,...A){this.buffer+=cA.form(p,A)}toString(){return this.buffer}}let Zw=(()=>{class V{constructor(A){this.boundingBox=new eh(A),this.codewords=new Array(A.getMaxY()-A.getMinY()+1)}getCodewordNearby(A){let v=this.getCodeword(A);if(v!=null)return v;for(let _=1;_<V.MAX_NEARBY_DISTANCE;_++){let w=this.imageRowToCodewordIndex(A)-_;if(w>=0&&(v=this.codewords[w],v!=null)||(w=this.imageRowToCodewordIndex(A)+_,w<this.codewords.length&&(v=this.codewords[w],v!=null)))return v}return null}imageRowToCodewordIndex(A){return A-this.boundingBox.getMinY()}setCodeword(A,v){this.codewords[this.imageRowToCodewordIndex(A)]=v}getCodeword(A){return this.codewords[this.imageRowToCodewordIndex(A)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let A=new cA,v=0;for(let _ of this.codewords){if(_==null){A.format("%3d:    |   %n",v++);continue}A.format("%3d: %3d|%3d%n",v++,_.getRowNumber(),_.getValue())}return A.toString()}}return V.MAX_NEARBY_DISTANCE=5,V})();class ef{constructor(){this.values=new Map}setValue(p){p=Math.trunc(p);let A=this.values.get(p);A==null&&(A=0),A++,this.values.set(p,A)}getValue(){let p=-1,A=new Array;for(let[v,_]of this.values.entries()){let w={getKey:()=>v,getValue:()=>_};w.getValue()>p?(p=w.getValue(),A=[],A.push(w.getKey())):w.getValue()===p&&A.push(w.getKey())}return $i.toIntArray(A)}getConfidence(p){return this.values.get(p)}}class R1 extends Zw{constructor(p,A){super(p),this._isLeft=A}setRowNumbers(){for(let p of this.getCodewords())p?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(p){let A=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(A,p);let v=this.getBoundingBox(),_=this._isLeft?v.getTopLeft():v.getTopRight(),w=this._isLeft?v.getBottomLeft():v.getBottomRight(),C=this.imageRowToCodewordIndex(Math.trunc(_.getY())),T=this.imageRowToCodewordIndex(Math.trunc(w.getY())),N=-1,z=1,K=0;for(let ee=C;ee<T;ee++){if(A[ee]==null)continue;let oe=A[ee],ge=oe.getRowNumber()-N;if(ge===0)K++;else if(ge===1)z=Math.max(z,K),K=1,N=oe.getRowNumber();else if(ge<0||oe.getRowNumber()>=p.getRowCount()||ge>ee)A[ee]=null;else{let we;z>2?we=(z-2)*ge:we=ge;let De=we>=ee;for(let Ue=1;Ue<=we&&!De;Ue++)De=A[ee-Ue]!=null;De?A[ee]=null:(N=oe.getRowNumber(),K=1)}}}getRowHeights(){let p=this.getBarcodeMetadata();if(p==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(p);let A=new Int32Array(p.getRowCount());for(let v of this.getCodewords())if(v!=null){let _=v.getRowNumber();if(_>=A.length)continue;A[_]++}return A}adjustIncompleteIndicatorColumnRowNumbers(p){let A=this.getBoundingBox(),v=this._isLeft?A.getTopLeft():A.getTopRight(),_=this._isLeft?A.getBottomLeft():A.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(v.getY())),C=this.imageRowToCodewordIndex(Math.trunc(_.getY())),T=this.getCodewords(),N=-1;for(let z=w;z<C;z++){if(T[z]==null)continue;let K=T[z];K.setRowNumberAsRowIndicatorColumn();let ee=K.getRowNumber()-N;ee===0||(ee===1?N=K.getRowNumber():K.getRowNumber()>=p.getRowCount()?T[z]=null:N=K.getRowNumber())}}getBarcodeMetadata(){let p=this.getCodewords(),A=new ef,v=new ef,_=new ef,w=new ef;for(let T of p){if(T==null)continue;T.setRowNumberAsRowIndicatorColumn();let N=T.getValue()%30,z=T.getRowNumber();switch(this._isLeft||(z+=2),z%3){case 0:v.setValue(N*3+1);break;case 1:w.setValue(N/3),_.setValue(N%3);break;case 2:A.setValue(N+1);break}}if(A.getValue().length===0||v.getValue().length===0||_.getValue().length===0||w.getValue().length===0||A.getValue()[0]<1||v.getValue()[0]+_.getValue()[0]<$i.MIN_ROWS_IN_BARCODE||v.getValue()[0]+_.getValue()[0]>$i.MAX_ROWS_IN_BARCODE)return null;let C=new yB(A.getValue()[0],v.getValue()[0],_.getValue()[0],w.getValue()[0]);return this.removeIncorrectCodewords(p,C),C}removeIncorrectCodewords(p,A){for(let v=0;v<p.length;v++){let _=p[v];if(p[v]==null)continue;let w=_.getValue()%30,C=_.getRowNumber();if(C>A.getRowCount()){p[v]=null;continue}switch(this._isLeft||(C+=2),C%3){case 0:w*3+1!==A.getRowCountUpperPart()&&(p[v]=null);break;case 1:(Math.trunc(w/3)!==A.getErrorCorrectionLevel()||w%3!==A.getRowCountLowerPart())&&(p[v]=null);break;case 2:w+1!==A.getColumnCount()&&(p[v]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class tf{constructor(p,A){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=p,this.barcodeColumnCount=p.getColumnCount(),this.boundingBox=A,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let p=$i.MAX_CODEWORDS_IN_BARCODE,A;do A=p,p=this.adjustRowNumbersAndGetCount();while(p>0&&p<A);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(p){p?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let p=this.adjustRowNumbersByRow();if(p===0)return 0;for(let A=1;A<this.barcodeColumnCount+1;A++){let v=this.detectionResultColumns[A].getCodewords();for(let _=0;_<v.length;_++)v[_]!=null&&(v[_].hasValidRowNumber()||this.adjustRowNumbers(A,_,v))}return p}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let p=this.detectionResultColumns[0].getCodewords(),A=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<p.length;v++)if(p[v]!=null&&A[v]!=null&&p[v].getRowNumber()===A[v].getRowNumber())for(let _=1;_<=this.barcodeColumnCount;_++){let w=this.detectionResultColumns[_].getCodewords()[v];w!=null&&(w.setRowNumber(p[v].getRowNumber()),w.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[v]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let p=0,A=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<A.length;v++){if(A[v]==null)continue;let _=A[v].getRowNumber(),w=0;for(let C=this.barcodeColumnCount+1;C>0&&w<this.ADJUST_ROW_NUMBER_SKIP;C--){let T=this.detectionResultColumns[C].getCodewords()[v];T!=null&&(w=tf.adjustRowNumberIfValid(_,w,T),T.hasValidRowNumber()||p++)}}return p}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let p=0,A=this.detectionResultColumns[0].getCodewords();for(let v=0;v<A.length;v++){if(A[v]==null)continue;let _=A[v].getRowNumber(),w=0;for(let C=1;C<this.barcodeColumnCount+1&&w<this.ADJUST_ROW_NUMBER_SKIP;C++){let T=this.detectionResultColumns[C].getCodewords()[v];T!=null&&(w=tf.adjustRowNumberIfValid(_,w,T),T.hasValidRowNumber()||p++)}}return p}static adjustRowNumberIfValid(p,A,v){return v==null||v.hasValidRowNumber()||(v.isValidRowNumber(p)?(v.setRowNumber(p),A=0):++A),A}adjustRowNumbers(p,A,v){if(!this.detectionResultColumns[p-1])return;let _=v[A],w=this.detectionResultColumns[p-1].getCodewords(),C=w;this.detectionResultColumns[p+1]!=null&&(C=this.detectionResultColumns[p+1].getCodewords());let T=new Array(14);T[2]=w[A],T[3]=C[A],A>0&&(T[0]=v[A-1],T[4]=w[A-1],T[5]=C[A-1]),A>1&&(T[8]=v[A-2],T[10]=w[A-2],T[11]=C[A-2]),A<v.length-1&&(T[1]=v[A+1],T[6]=w[A+1],T[7]=C[A+1]),A<v.length-2&&(T[9]=v[A+2],T[12]=w[A+2],T[13]=C[A+2]);for(let N of T)if(tf.adjustRowNumber(_,N))return}static adjustRowNumber(p,A){return A==null?!1:A.hasValidRowNumber()&&A.getBucket()===p.getBucket()?(p.setRowNumber(A.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(p){this.boundingBox=p}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(p,A){this.detectionResultColumns[p]=A}getDetectionResultColumn(p){return this.detectionResultColumns[p]}toString(){let p=this.detectionResultColumns[0];p==null&&(p=this.detectionResultColumns[this.barcodeColumnCount+1]);let A=new cA;for(let v=0;v<p.getCodewords().length;v++){A.format("CW %3d:",v);for(let _=0;_<this.barcodeColumnCount+2;_++){if(this.detectionResultColumns[_]==null){A.format("    |   ");continue}let w=this.detectionResultColumns[_].getCodewords()[v];if(w==null){A.format("    |   ");continue}A.format(" %3d|%3d",w.getRowNumber(),w.getValue())}A.format("%n")}return A.toString()}}let xB=(()=>{class V{constructor(A,v,_,w){this.rowNumber=V.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(A),this.endX=Math.trunc(v),this.bucket=Math.trunc(_),this.value=Math.trunc(w)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(A){return A!==V.BARCODE_ROW_UNKNOWN&&this.bucket===A%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(A){this.rowNumber=A}toString(){return this.rowNumber+"|"+this.value}}return V.BARCODE_ROW_UNKNOWN=-1,V})();class fs{static initialize(){for(let p=0;p<$i.SYMBOL_TABLE.length;p++){let A=$i.SYMBOL_TABLE[p],v=A&1;for(let _=0;_<$i.BARS_IN_MODULE;_++){let w=0;for(;(A&1)===v;)w+=1,A>>=1;v=A&1,fs.RATIOS_TABLE[p]||(fs.RATIOS_TABLE[p]=new Array($i.BARS_IN_MODULE)),fs.RATIOS_TABLE[p][$i.BARS_IN_MODULE-_-1]=Math.fround(w/$i.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(p){let A=fs.getDecodedCodewordValue(fs.sampleBitCounts(p));return A!==-1?A:fs.getClosestDecodedValue(p)}static sampleBitCounts(p){let A=Xt.sum(p),v=new Int32Array($i.BARS_IN_MODULE),_=0,w=0;for(let C=0;C<$i.MODULES_IN_CODEWORD;C++){let T=A/(2*$i.MODULES_IN_CODEWORD)+C*A/$i.MODULES_IN_CODEWORD;w+p[_]<=T&&(w+=p[_],_++),v[_]++}return v}static getDecodedCodewordValue(p){let A=fs.getBitValue(p);return $i.getCodeword(A)===-1?-1:A}static getBitValue(p){let A=0;for(let v=0;v<p.length;v++)for(let _=0;_<p[v];_++)A=A<<1|(v%2===0?1:0);return Math.trunc(A)}static getClosestDecodedValue(p){let A=Xt.sum(p),v=new Array($i.BARS_IN_MODULE);if(A>1)for(let C=0;C<v.length;C++)v[C]=Math.fround(p[C]/A);let _=Oi.MAX_VALUE,w=-1;this.bSymbolTableReady||fs.initialize();for(let C=0;C<fs.RATIOS_TABLE.length;C++){let T=0,N=fs.RATIOS_TABLE[C];for(let z=0;z<$i.BARS_IN_MODULE;z++){let K=Math.fround(N[z]-v[z]);if(T+=Math.fround(K*K),T>=_)break}T<_&&(_=T,w=$i.SYMBOL_TABLE[C])}return w}}fs.bSymbolTableReady=!1,fs.RATIOS_TABLE=new Array($i.SYMBOL_TABLE.length).map(V=>V=new Array($i.BARS_IN_MODULE));class Ao{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(p){this.segmentIndex=p}getFileId(){return this.fileId}setFileId(p){this.fileId=p}getOptionalData(){return this.optionalData}setOptionalData(p){this.optionalData=p}isLastSegment(){return this.lastSegment}setLastSegment(p){this.lastSegment=p}getSegmentCount(){return this.segmentCount}setSegmentCount(p){this.segmentCount=p}getSender(){return this.sender||null}setSender(p){this.sender=p}getAddressee(){return this.addressee||null}setAddressee(p){this.addressee=p}getFileName(){return this.fileName}setFileName(p){this.fileName=p}getFileSize(){return this.fileSize}setFileSize(p){this.fileSize=p}getChecksum(){return this.checksum}setChecksum(p){this.checksum=p}getTimestamp(){return this.timestamp}setTimestamp(p){this.timestamp=p}}class Jw{static parseLong(p,A=void 0){return parseInt(p,A)}}let rf=(()=>{class V extends s{}return V.kind="NullPointerException",V})();class _B{writeBytes(p){this.writeBytesOffset(p,0,p.length)}writeBytesOffset(p,A,v){if(p==null)throw new rf;if(A<0||A>p.length||v<0||A+v>p.length||A+v<0)throw new m;if(v===0)return;for(let _=0;_<v;_++)this.write(p[A+_])}flush(){}close(){}}class wB extends s{}class bB extends _B{constructor(p=32){if(super(),this.count=0,p<0)throw new c("Negative initial size: "+p);this.buf=new Uint8Array(p)}ensureCapacity(p){p-this.buf.length>0&&this.grow(p)}grow(p){let v=this.buf.length<<1;if(v-p<0&&(v=p),v<0){if(p<0)throw new wB;v=x.MAX_VALUE}this.buf=g.copyOfUint8Array(this.buf,v)}write(p){this.ensureCapacity(this.count+1),this.buf[this.count]=p,this.count+=1}writeBytesOffset(p,A,v){if(A<0||A>p.length||v<0||A+v-p.length>0)throw new m;this.ensureCapacity(this.count+v),f.arraycopy(p,A,this.buf,this.count,v),this.count+=v}writeTo(p){p.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return g.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(p){return p?typeof p=="string"?this.toString_string(p):this.toString_number(p):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(p){return new String(this.buf).toString()}toString_number(p){return new String(this.buf).toString()}close(){}}var On=function(V){return V[V.ALPHA=0]="ALPHA",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.PUNCT=3]="PUNCT",V[V.ALPHA_SHIFT=4]="ALPHA_SHIFT",V[V.PUNCT_SHIFT=5]="PUNCT_SHIFT",V}(On||{});function uA(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Yh;function hu(V){if(typeof Yh>"u"&&(Yh=uA()),Yh===null)throw new Error("BigInt is not supported!");return Yh(V)}function SB(){let V=[];V[0]=hu(1);let p=hu(900);V[1]=p;for(let A=2;A<16;A++)V[A]=V[A-1]*p;return V}class qe{static decode(p,A){let v=new j(""),_=F.ISO8859_1;v.enableDecoding(_);let w=1,C=p[w++],T=new Ao;for(;w<p[0];){switch(C){case qe.TEXT_COMPACTION_MODE_LATCH:w=qe.textCompaction(p,w,v);break;case qe.BYTE_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH_6:w=qe.byteCompaction(C,p,_,w,v);break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(p[w++]);break;case qe.NUMERIC_COMPACTION_MODE_LATCH:w=qe.numericCompaction(p,w,v);break;case qe.ECI_CHARSET:let z=F.getCharacterSetECIByValue(p[w++]);break;case qe.ECI_GENERAL_PURPOSE:w+=2;break;case qe.ECI_USER_DEFINED:w++;break;case qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:w=qe.decodeMacroBlock(p,w,T);break;case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case qe.MACRO_PDF417_TERMINATOR:throw new D;default:w--,w=qe.textCompaction(p,w,v);break}if(w<p.length)C=p[w++];else throw D.getFormatInstance()}if(v.length()===0)throw D.getFormatInstance();let N=new dt(null,v.toString(),null,A);return N.setOther(T),N}static decodeMacroBlock(p,A,v){if(A+qe.NUMBER_OF_SEQUENCE_CODEWORDS>p[0])throw D.getFormatInstance();let _=new Int32Array(qe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let T=0;T<qe.NUMBER_OF_SEQUENCE_CODEWORDS;T++,A++)_[T]=p[A];v.setSegmentIndex(x.parseInt(qe.decodeBase900toBase10(_,qe.NUMBER_OF_SEQUENCE_CODEWORDS)));let w=new j;A=qe.textCompaction(p,A,w),v.setFileId(w.toString());let C=-1;for(p[A]===qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(C=A+1);A<p[0];)switch(p[A]){case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(A++,p[A]){case qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let T=new j;A=qe.textCompaction(p,A+1,T),v.setFileName(T.toString());break;case qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let N=new j;A=qe.textCompaction(p,A+1,N),v.setSender(N.toString());break;case qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let z=new j;A=qe.textCompaction(p,A+1,z),v.setAddressee(z.toString());break;case qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let K=new j;A=qe.numericCompaction(p,A+1,K),v.setSegmentCount(x.parseInt(K.toString()));break;case qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ee=new j;A=qe.numericCompaction(p,A+1,ee),v.setTimestamp(Jw.parseLong(ee.toString()));break;case qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let oe=new j;A=qe.numericCompaction(p,A+1,oe),v.setChecksum(x.parseInt(oe.toString()));break;case qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ge=new j;A=qe.numericCompaction(p,A+1,ge),v.setFileSize(Jw.parseLong(ge.toString()));break;default:throw D.getFormatInstance()}break;case qe.MACRO_PDF417_TERMINATOR:A++,v.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(C!==-1){let T=A-C;v.isLastSegment()&&T--,v.setOptionalData(g.copyOfRange(p,C,C+T))}return A}static textCompaction(p,A,v){let _=new Int32Array((p[0]-A)*2),w=new Int32Array((p[0]-A)*2),C=0,T=!1;for(;A<p[0]&&!T;){let N=p[A++];if(N<qe.TEXT_COMPACTION_MODE_LATCH)_[C]=N/30,_[C+1]=N%30,C+=2;else switch(N){case qe.TEXT_COMPACTION_MODE_LATCH:_[C++]=qe.TEXT_COMPACTION_MODE_LATCH;break;case qe.BYTE_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH_6:case qe.NUMERIC_COMPACTION_MODE_LATCH:case qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case qe.MACRO_PDF417_TERMINATOR:A--,T=!0;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[C]=qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,N=p[A++],w[C]=N,C++;break}}return qe.decodeTextCompaction(_,w,C,v),A}static decodeTextCompaction(p,A,v,_){let w=On.ALPHA,C=On.ALPHA,T=0;for(;T<v;){let N=p[T],z="";switch(w){case On.ALPHA:if(N<26)z=String.fromCharCode(65+N);else switch(N){case 26:z=" ";break;case qe.LL:w=On.LOWER;break;case qe.ML:w=On.MIXED;break;case qe.PS:C=w,w=On.PUNCT_SHIFT;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(A[T]);break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break;case On.LOWER:if(N<26)z=String.fromCharCode(97+N);else switch(N){case 26:z=" ";break;case qe.AS:C=w,w=On.ALPHA_SHIFT;break;case qe.ML:w=On.MIXED;break;case qe.PS:C=w,w=On.PUNCT_SHIFT;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(A[T]);break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break;case On.MIXED:if(N<qe.PL)z=qe.MIXED_CHARS[N];else switch(N){case qe.PL:w=On.PUNCT;break;case 26:z=" ";break;case qe.LL:w=On.LOWER;break;case qe.AL:w=On.ALPHA;break;case qe.PS:C=w,w=On.PUNCT_SHIFT;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(A[T]);break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break;case On.PUNCT:if(N<qe.PAL)z=qe.PUNCT_CHARS[N];else switch(N){case qe.PAL:w=On.ALPHA;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(A[T]);break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break;case On.ALPHA_SHIFT:if(w=C,N<26)z=String.fromCharCode(65+N);else switch(N){case 26:z=" ";break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break;case On.PUNCT_SHIFT:if(w=C,N<qe.PAL)z=qe.PUNCT_CHARS[N];else switch(N){case qe.PAL:w=On.ALPHA;break;case qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(A[T]);break;case qe.TEXT_COMPACTION_MODE_LATCH:w=On.ALPHA;break}break}z!==""&&_.append(z),T++}}static byteCompaction(p,A,v,_,w){let C=new bB,T=0,N=0,z=!1;switch(p){case qe.BYTE_COMPACTION_MODE_LATCH:let K=new Int32Array(6),ee=A[_++];for(;_<A[0]&&!z;)switch(K[T++]=ee,N=900*N+ee,ee=A[_++],ee){case qe.TEXT_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH:case qe.NUMERIC_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH_6:case qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case qe.MACRO_PDF417_TERMINATOR:_--,z=!0;break;default:if(T%5===0&&T>0){for(let oe=0;oe<6;++oe)C.write(Number(hu(N)>>hu(8*(5-oe))));N=0,T=0}break}_===A[0]&&ee<qe.TEXT_COMPACTION_MODE_LATCH&&(K[T++]=ee);for(let oe=0;oe<T;oe++)C.write(K[oe]);break;case qe.BYTE_COMPACTION_MODE_LATCH_6:for(;_<A[0]&&!z;){let oe=A[_++];if(oe<qe.TEXT_COMPACTION_MODE_LATCH)T++,N=900*N+oe;else switch(oe){case qe.TEXT_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH:case qe.NUMERIC_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH_6:case qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case qe.MACRO_PDF417_TERMINATOR:_--,z=!0;break}if(T%5===0&&T>0){for(let ge=0;ge<6;++ge)C.write(Number(hu(N)>>hu(8*(5-ge))));N=0,T=0}}break}return w.append(U.decode(C.toByteArray(),v)),_}static numericCompaction(p,A,v){let _=0,w=!1,C=new Int32Array(qe.MAX_NUMERIC_CODEWORDS);for(;A<p[0]&&!w;){let T=p[A++];if(A===p[0]&&(w=!0),T<qe.TEXT_COMPACTION_MODE_LATCH)C[_]=T,_++;else switch(T){case qe.TEXT_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH:case qe.BYTE_COMPACTION_MODE_LATCH_6:case qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case qe.MACRO_PDF417_TERMINATOR:A--,w=!0;break}(_%qe.MAX_NUMERIC_CODEWORDS===0||T===qe.NUMERIC_COMPACTION_MODE_LATCH||w)&&_>0&&(v.append(qe.decodeBase900toBase10(C,_)),_=0)}return A}static decodeBase900toBase10(p,A){let v=hu(0);for(let w=0;w<A;w++)v+=qe.EXP900[A-w-1]*hu(p[w]);let _=v.toString();if(_.charAt(0)!=="1")throw new D;return _.substring(1)}}qe.TEXT_COMPACTION_MODE_LATCH=900,qe.BYTE_COMPACTION_MODE_LATCH=901,qe.NUMERIC_COMPACTION_MODE_LATCH=902,qe.BYTE_COMPACTION_MODE_LATCH_6=924,qe.ECI_USER_DEFINED=925,qe.ECI_GENERAL_PURPOSE=926,qe.ECI_CHARSET=927,qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,qe.MACRO_PDF417_TERMINATOR=922,qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,qe.MAX_NUMERIC_CODEWORDS=15,qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,qe.PL=25,qe.LL=27,qe.AS=27,qe.ML=28,qe.AL=28,qe.PS=29,qe.PAL=29,qe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,qe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",qe.EXP900=uA()?SB():[],qe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mr{constructor(){}static decode(p,A,v,_,w,C,T){let N=new eh(p,A,v,_,w),z=null,K=null,ee;for(let we=!0;;we=!1){if(A!=null&&(z=mr.getRowIndicatorColumn(p,N,A,!0,C,T)),_!=null&&(K=mr.getRowIndicatorColumn(p,N,_,!1,C,T)),ee=mr.merge(z,K),ee==null)throw X.getNotFoundInstance();let De=ee.getBoundingBox();if(we&&De!=null&&(De.getMinY()<N.getMinY()||De.getMaxY()>N.getMaxY()))N=De;else break}ee.setBoundingBox(N);let oe=ee.getBarcodeColumnCount()+1;ee.setDetectionResultColumn(0,z),ee.setDetectionResultColumn(oe,K);let ge=z!=null;for(let we=1;we<=oe;we++){let De=ge?we:oe-we;if(ee.getDetectionResultColumn(De)!==void 0)continue;let Ue;De===0||De===oe?Ue=new R1(N,De===0):Ue=new Zw(N),ee.setDetectionResultColumn(De,Ue);let Ke=-1,Et=Ke;for(let Jt=N.getMinY();Jt<=N.getMaxY();Jt++){if(Ke=mr.getStartColumn(ee,De,Jt,ge),Ke<0||Ke>N.getMaxX()){if(Et===-1)continue;Ke=Et}let ut=mr.detectCodeword(p,N.getMinX(),N.getMaxX(),ge,Ke,Jt,C,T);ut!=null&&(Ue.setCodeword(Jt,ut),Et=Ke,C=Math.min(C,ut.getWidth()),T=Math.max(T,ut.getWidth()))}}return mr.createDecoderResult(ee)}static merge(p,A){if(p==null&&A==null)return null;let v=mr.getBarcodeMetadata(p,A);if(v==null)return null;let _=eh.merge(mr.adjustBoundingBox(p),mr.adjustBoundingBox(A));return new tf(v,_)}static adjustBoundingBox(p){if(p==null)return null;let A=p.getRowHeights();if(A==null)return null;let v=mr.getMax(A),_=0;for(let T of A)if(_+=v-T,T>0)break;let w=p.getCodewords();for(let T=0;_>0&&w[T]==null;T++)_--;let C=0;for(let T=A.length-1;T>=0&&(C+=v-A[T],!(A[T]>0));T--);for(let T=w.length-1;C>0&&w[T]==null;T--)C--;return p.getBoundingBox().addMissingRows(_,C,p.isLeft())}static getMax(p){let A=-1;for(let v of p)A=Math.max(A,v);return A}static getBarcodeMetadata(p,A){let v;if(p==null||(v=p.getBarcodeMetadata())==null)return A==null?null:A.getBarcodeMetadata();let _;return A==null||(_=A.getBarcodeMetadata())==null?v:v.getColumnCount()!==_.getColumnCount()&&v.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&v.getRowCount()!==_.getRowCount()?null:v}static getRowIndicatorColumn(p,A,v,_,w,C){let T=new R1(A,_);for(let N=0;N<2;N++){let z=N===0?1:-1,K=Math.trunc(Math.trunc(v.getX()));for(let ee=Math.trunc(Math.trunc(v.getY()));ee<=A.getMaxY()&&ee>=A.getMinY();ee+=z){let oe=mr.detectCodeword(p,0,p.getWidth(),_,K,ee,w,C);oe!=null&&(T.setCodeword(ee,oe),_?K=oe.getStartX():K=oe.getEndX())}}return T}static adjustCodewordCount(p,A){let v=A[0][1],_=v.getValue(),w=p.getBarcodeColumnCount()*p.getBarcodeRowCount()-mr.getNumberOfECCodeWords(p.getBarcodeECLevel());if(_.length===0){if(w<1||w>$i.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();v.setValue(w)}else _[0]!==w&&v.setValue(w)}static createDecoderResult(p){let A=mr.createBarcodeMatrix(p);mr.adjustCodewordCount(p,A);let v=new Array,_=new Int32Array(p.getBarcodeRowCount()*p.getBarcodeColumnCount()),w=[],C=new Array;for(let N=0;N<p.getBarcodeRowCount();N++)for(let z=0;z<p.getBarcodeColumnCount();z++){let K=A[N][z+1].getValue(),ee=N*p.getBarcodeColumnCount()+z;K.length===0?v.push(ee):K.length===1?_[ee]=K[0]:(C.push(ee),w.push(K))}let T=new Array(w.length);for(let N=0;N<T.length;N++)T[N]=w[N];return mr.createDecoderResultFromAmbiguousValues(p.getBarcodeECLevel(),_,$i.toIntArray(v),$i.toIntArray(C),T)}static createDecoderResultFromAmbiguousValues(p,A,v,_,w){let C=new Int32Array(_.length),T=100;for(;T-- >0;){for(let N=0;N<C.length;N++)A[_[N]]=w[N][C[N]];try{return mr.decodeCodewords(A,p,v)}catch(N){if(!(N instanceof h))throw N}if(C.length===0)throw h.getChecksumInstance();for(let N=0;N<C.length;N++)if(C[N]<w[N].length-1){C[N]++;break}else if(C[N]=0,N===C.length-1)throw h.getChecksumInstance()}throw h.getChecksumInstance()}static createBarcodeMatrix(p){let A=Array.from({length:p.getBarcodeRowCount()},()=>new Array(p.getBarcodeColumnCount()+2));for(let _=0;_<A.length;_++)for(let w=0;w<A[_].length;w++)A[_][w]=new ef;let v=0;for(let _ of p.getDetectionResultColumns()){if(_!=null){for(let w of _.getCodewords())if(w!=null){let C=w.getRowNumber();if(C>=0){if(C>=A.length)continue;A[C][v].setValue(w.getValue())}}}v++}return A}static isValidBarcodeColumn(p,A){return A>=0&&A<=p.getBarcodeColumnCount()+1}static getStartColumn(p,A,v,_){let w=_?1:-1,C=null;if(mr.isValidBarcodeColumn(p,A-w)&&(C=p.getDetectionResultColumn(A-w).getCodeword(v)),C!=null)return _?C.getEndX():C.getStartX();if(C=p.getDetectionResultColumn(A).getCodewordNearby(v),C!=null)return _?C.getStartX():C.getEndX();if(mr.isValidBarcodeColumn(p,A-w)&&(C=p.getDetectionResultColumn(A-w).getCodewordNearby(v)),C!=null)return _?C.getEndX():C.getStartX();let T=0;for(;mr.isValidBarcodeColumn(p,A-w);){A-=w;for(let N of p.getDetectionResultColumn(A).getCodewords())if(N!=null)return(_?N.getEndX():N.getStartX())+w*T*(N.getEndX()-N.getStartX());T++}return _?p.getBoundingBox().getMinX():p.getBoundingBox().getMaxX()}static detectCodeword(p,A,v,_,w,C,T,N){w=mr.adjustCodewordStartColumn(p,A,v,_,w,C);let z=mr.getModuleBitCount(p,A,v,_,w,C);if(z==null)return null;let K,ee=Xt.sum(z);if(_)K=w+ee;else{for(let we=0;we<z.length/2;we++){let De=z[we];z[we]=z[z.length-1-we],z[z.length-1-we]=De}K=w,w=K-ee}if(!mr.checkCodewordSkew(ee,T,N))return null;let oe=fs.getDecodedValue(z),ge=$i.getCodeword(oe);return ge===-1?null:new xB(w,K,mr.getCodewordBucketNumber(oe),ge)}static getModuleBitCount(p,A,v,_,w,C){let T=w,N=new Int32Array(8),z=0,K=_?1:-1,ee=_;for(;(_?T<v:T>=A)&&z<N.length;)p.get(T,C)===ee?(N[z]++,T+=K):(z++,ee=!ee);return z===N.length||T===(_?v:A)&&z===N.length-1?N:null}static getNumberOfECCodeWords(p){return 2<<p}static adjustCodewordStartColumn(p,A,v,_,w,C){let T=w,N=_?-1:1;for(let z=0;z<2;z++){for(;(_?T>=A:T<v)&&_===p.get(T,C);){if(Math.abs(w-T)>mr.CODEWORD_SKEW_SIZE)return w;T+=N}N=-N,_=!_}return T}static checkCodewordSkew(p,A,v){return A-mr.CODEWORD_SKEW_SIZE<=p&&p<=v+mr.CODEWORD_SKEW_SIZE}static decodeCodewords(p,A,v){if(p.length===0)throw D.getFormatInstance();let _=1<<A+1,w=mr.correctErrors(p,v,_);mr.verifyCodewordCount(p,_);let C=qe.decode(p,""+A);return C.setErrorsCorrected(w),C.setErasures(v.length),C}static correctErrors(p,A,v){if(A!=null&&A.length>v/2+mr.MAX_ERRORS||v<0||v>mr.MAX_EC_CODEWORDS)throw h.getChecksumInstance();return mr.errorCorrection.decode(p,v,A)}static verifyCodewordCount(p,A){if(p.length<4)throw D.getFormatInstance();let v=p[0];if(v>p.length)throw D.getFormatInstance();if(v===0)if(A<p.length)p[0]=p.length-A;else throw D.getFormatInstance()}static getBitCountForCodeword(p){let A=new Int32Array(8),v=0,_=A.length-1;for(;!((p&1)!==v&&(v=p&1,_--,_<0));)A[_]++,p>>=1;return A}static getCodewordBucketNumber(p){return p instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(p):this.getCodewordBucketNumber_number(p)}static getCodewordBucketNumber_number(p){return mr.getCodewordBucketNumber(mr.getBitCountForCodeword(p))}static getCodewordBucketNumber_Int32Array(p){return(p[0]-p[2]+p[4]-p[6]+9)%9}static toString(p){let A=new cA;for(let v=0;v<p.length;v++){A.format("Row %2d: ",v);for(let _=0;_<p[v].length;_++){let w=p[v][_];w.getValue().length===0?A.format("        ",null):A.format("%4d(%2d)",w.getValue()[0],w.getConfidence(w.getValue()[0]))}A.format("%n")}return A.toString()}}mr.CODEWORD_SKEW_SIZE=2,mr.MAX_ERRORS=3,mr.MAX_EC_CODEWORDS=512,mr.errorCorrection=new D1;class Ka{decode(p,A=null){let v=Ka.decode(p,A,!1);if(v==null||v.length===0||v[0]==null)throw X.getNotFoundInstance();return v[0]}decodeMultiple(p,A=null){try{return Ka.decode(p,A,!0)}catch(v){throw v instanceof D||v instanceof h?X.getNotFoundInstance():v}}static decode(p,A,v){let _=new Array,w=Sr.detectMultiple(p,A,v);for(let C of w.getPoints()){let T=mr.decode(w.getBits(),C[4],C[5],C[6],C[7],Ka.getMinCodewordWidth(C),Ka.getMaxCodewordWidth(C)),N=new Oe(T.getText(),T.getRawBytes(),void 0,C,Se.PDF_417);N.putMetadata(rt.ERROR_CORRECTION_LEVEL,T.getECLevel());let z=T.getOther();z!=null&&N.putMetadata(rt.PDF417_EXTRA_METADATA,z),_.push(N)}return _.map(C=>C)}static getMaxWidth(p,A){return p==null||A==null?0:Math.trunc(Math.abs(p.getX()-A.getX()))}static getMinWidth(p,A){return p==null||A==null?x.MAX_VALUE:Math.trunc(Math.abs(p.getX()-A.getX()))}static getMaxCodewordWidth(p){return Math.floor(Math.max(Math.max(Ka.getMaxWidth(p[0],p[4]),Ka.getMaxWidth(p[6],p[2])*$i.MODULES_IN_CODEWORD/$i.MODULES_IN_STOP_PATTERN),Math.max(Ka.getMaxWidth(p[1],p[5]),Ka.getMaxWidth(p[7],p[3])*$i.MODULES_IN_CODEWORD/$i.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(p){return Math.floor(Math.min(Math.min(Ka.getMinWidth(p[0],p[4]),Ka.getMinWidth(p[6],p[2])*$i.MODULES_IN_CODEWORD/$i.MODULES_IN_STOP_PATTERN),Math.min(Ka.getMinWidth(p[1],p[5]),Ka.getMinWidth(p[7],p[3])*$i.MODULES_IN_CODEWORD/$i.MODULES_IN_STOP_PATTERN)))}reset(){}}let P1=(()=>{class V extends s{}return V.kind="ReaderException",V})();class $w{constructor(p,A){this.verbose=p===!0,A&&this.setHints(A)}decode(p,A){return A&&this.setHints(A),this.decodeInternal(p)}decodeWithState(p){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(p)}setHints(p){this.hints=p;let A=!e(p)&&p.get(E.TRY_HARDER)===!0,v=e(p)?null:p.get(E.POSSIBLE_FORMATS),_=new Array;if(!e(v)){let w=v.some(C=>C===Se.UPC_A||C===Se.UPC_E||C===Se.EAN_13||C===Se.EAN_8||C===Se.CODABAR||C===Se.CODE_39||C===Se.CODE_93||C===Se.CODE_128||C===Se.ITF||C===Se.RSS_14||C===Se.RSS_EXPANDED);w&&!A&&_.push(new Ri(p,this.verbose)),v.includes(Se.QR_CODE)&&_.push(new $u),v.includes(Se.DATA_MATRIX)&&_.push(new el),v.includes(Se.AZTEC)&&_.push(new Zi),v.includes(Se.PDF_417)&&_.push(new Ka),w&&A&&_.push(new Ri(p,this.verbose))}_.length===0&&(A||_.push(new Ri(p,this.verbose)),_.push(new $u),_.push(new el),_.push(new Zi),_.push(new Ka),A&&_.push(new Ri(p,this.verbose))),this.readers=_}reset(){if(this.readers!==null)for(let p of this.readers)p.reset()}decodeInternal(p){if(this.readers===null)throw new P1("No readers where selected, nothing can be read.");for(let A of this.readers)try{return A.decode(p,this.hints)}catch(v){if(v instanceof P1)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class CB extends Re{constructor(p=null,A=500){let v=new $w;v.setHints(p),super(v,A)}decodeBitmap(p){return this.reader.decodeWithState(p)}}class EB extends Re{constructor(p=500){super(new Ka,p)}}class TB extends Re{constructor(p=500){super(new $u,p)}}var eb=function(V){return V[V.ERROR_CORRECTION=0]="ERROR_CORRECTION",V[V.CHARACTER_SET=1]="CHARACTER_SET",V[V.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",V[V.MIN_SIZE=3]="MIN_SIZE",V[V.MAX_SIZE=4]="MAX_SIZE",V[V.MARGIN=5]="MARGIN",V[V.PDF417_COMPACT=6]="PDF417_COMPACT",V[V.PDF417_COMPACTION=7]="PDF417_COMPACTION",V[V.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",V[V.AZTEC_LAYERS=9]="AZTEC_LAYERS",V[V.QR_VERSION=10]="QR_VERSION",V}(eb||{}),Xa=eb;class L1{constructor(p){this.field=p,this.cachedGenerators=[],this.cachedGenerators.push(new ht(p,Int32Array.from([1])))}buildGenerator(p){let A=this.cachedGenerators;if(p>=A.length){let v=A[A.length-1],_=this.field;for(let w=A.length;w<=p;w++){let C=v.multiply(new ht(_,Int32Array.from([1,_.exp(w-1+_.getGeneratorBase())])));A.push(C),v=C}}return A[p]}encode(p,A){if(A===0)throw new c("No error correction bytes");let v=p.length-A;if(v<=0)throw new c("No data bytes provided");let _=this.buildGenerator(A),w=new Int32Array(v);f.arraycopy(p,0,w,0,v);let C=new ht(this.field,w);C=C.multiplyByMonomial(A,1);let N=C.divide(_)[1].getCoefficients(),z=A-N.length;for(let K=0;K<z;K++)p[v+K]=0;f.arraycopy(N,0,p,v+z,N.length)}}let nf=(()=>{class V{constructor(){}static applyMaskPenaltyRule1(A){return V.applyMaskPenaltyRule1Internal(A,!0)+V.applyMaskPenaltyRule1Internal(A,!1)}static applyMaskPenaltyRule2(A){let v=0,_=A.getArray(),w=A.getWidth(),C=A.getHeight();for(let T=0;T<C-1;T++){let N=_[T];for(let z=0;z<w-1;z++){let K=N[z];K===N[z+1]&&K===_[T+1][z]&&K===_[T+1][z+1]&&v++}}return V.N2*v}static applyMaskPenaltyRule3(A){let v=0,_=A.getArray(),w=A.getWidth(),C=A.getHeight();for(let T=0;T<C;T++)for(let N=0;N<w;N++){let z=_[T];N+6<w&&z[N]===1&&z[N+1]===0&&z[N+2]===1&&z[N+3]===1&&z[N+4]===1&&z[N+5]===0&&z[N+6]===1&&(V.isWhiteHorizontal(z,N-4,N)||V.isWhiteHorizontal(z,N+7,N+11))&&v++,T+6<C&&_[T][N]===1&&_[T+1][N]===0&&_[T+2][N]===1&&_[T+3][N]===1&&_[T+4][N]===1&&_[T+5][N]===0&&_[T+6][N]===1&&(V.isWhiteVertical(_,N,T-4,T)||V.isWhiteVertical(_,N,T+7,T+11))&&v++}return v*V.N3}static isWhiteHorizontal(A,v,_){v=Math.max(v,0),_=Math.min(_,A.length);for(let w=v;w<_;w++)if(A[w]===1)return!1;return!0}static isWhiteVertical(A,v,_,w){_=Math.max(_,0),w=Math.min(w,A.length);for(let C=_;C<w;C++)if(A[C][v]===1)return!1;return!0}static applyMaskPenaltyRule4(A){let v=0,_=A.getArray(),w=A.getWidth(),C=A.getHeight();for(let z=0;z<C;z++){let K=_[z];for(let ee=0;ee<w;ee++)K[ee]===1&&v++}let T=A.getHeight()*A.getWidth();return Math.floor(Math.abs(v*2-T)*10/T)*V.N4}static getDataMaskBit(A,v,_){let w,C;switch(A){case 0:w=_+v&1;break;case 1:w=_&1;break;case 2:w=v%3;break;case 3:w=(_+v)%3;break;case 4:w=Math.floor(_/2)+Math.floor(v/3)&1;break;case 5:C=_*v,w=(C&1)+C%3;break;case 6:C=_*v,w=(C&1)+C%3&1;break;case 7:C=_*v,w=C%3+(_+v&1)&1;break;default:throw new c("Invalid mask pattern: "+A)}return w===0}static applyMaskPenaltyRule1Internal(A,v){let _=0,w=v?A.getHeight():A.getWidth(),C=v?A.getWidth():A.getHeight(),T=A.getArray();for(let N=0;N<w;N++){let z=0,K=-1;for(let ee=0;ee<C;ee++){let oe=v?T[N][ee]:T[ee][N];oe===K?z++:(z>=5&&(_+=V.N1+(z-5)),z=1,K=oe)}z>=5&&(_+=V.N1+(z-5))}return _}}return V.N1=3,V.N2=3,V.N3=40,V.N4=10,V})();class xg{constructor(p,A){this.width=p,this.height=A;let v=new Array(A);for(let _=0;_!==A;_++)v[_]=new Uint8Array(p);this.bytes=v}getHeight(){return this.height}getWidth(){return this.width}get(p,A){return this.bytes[A][p]}getArray(){return this.bytes}setNumber(p,A,v){this.bytes[A][p]=v}setBoolean(p,A,v){this.bytes[A][p]=v?1:0}clear(p){for(let A of this.bytes)g.fill(A,p)}equals(p){if(!(p instanceof xg))return!1;let A=p;if(this.width!==A.width||this.height!==A.height)return!1;for(let v=0,_=this.height;v<_;++v){let w=this.bytes[v],C=A.bytes[v];for(let T=0,N=this.width;T<N;++T)if(w[T]!==C[T])return!1}return!0}toString(){let p=new j;for(let A=0,v=this.height;A<v;++A){let _=this.bytes[A];for(let w=0,C=this.width;w<C;++w)switch(_[w]){case 0:p.append(" 0");break;case 1:p.append(" 1");break;default:p.append("  ");break}p.append(`
`)}return p.toString()}}let _g=(()=>{class V{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let A=new j;return A.append(`<<
`),A.append(" mode: "),A.append(this.mode?this.mode.toString():"null"),A.append(`
 ecLevel: `),A.append(this.ecLevel?this.ecLevel.toString():"null"),A.append(`
 version: `),A.append(this.version?this.version.toString():"null"),A.append(`
 maskPattern: `),A.append(this.maskPattern.toString()),this.matrix?(A.append(`
 matrix:
`),A.append(this.matrix.toString())):A.append(`
 matrix: null
`),A.append(`>>
`),A.toString()}setMode(A){this.mode=A}setECLevel(A){this.ecLevel=A}setVersion(A){this.version=A}setMaskPattern(A){this.maskPattern=A}setMatrix(A){this.matrix=A}static isValidMaskPattern(A){return A>=0&&A<V.NUM_MASK_PATTERNS}}return V.NUM_MASK_PATTERNS=8,V})(),Vn=(()=>{class V extends s{}return V.kind="WriterException",V})();class Gi{constructor(){}static clearMatrix(p){p.clear(255)}static buildMatrix(p,A,v,_,w){Gi.clearMatrix(w),Gi.embedBasicPatterns(v,w),Gi.embedTypeInfo(A,_,w),Gi.maybeEmbedVersionInfo(v,w),Gi.embedDataBits(p,_,w)}static embedBasicPatterns(p,A){Gi.embedPositionDetectionPatternsAndSeparators(A),Gi.embedDarkDotAtLeftBottomCorner(A),Gi.maybeEmbedPositionAdjustmentPatterns(p,A),Gi.embedTimingPatterns(A)}static embedTypeInfo(p,A,v){let _=new b;Gi.makeTypeInfoBits(p,A,_);for(let w=0,C=_.getSize();w<C;++w){let T=_.get(_.getSize()-1-w),N=Gi.TYPE_INFO_COORDINATES[w],z=N[0],K=N[1];if(v.setBoolean(z,K,T),w<8){let ee=v.getWidth()-w-1,oe=8;v.setBoolean(ee,oe,T)}else{let oe=v.getHeight()-7+(w-8);v.setBoolean(8,oe,T)}}}static maybeEmbedVersionInfo(p,A){if(p.getVersionNumber()<7)return;let v=new b;Gi.makeVersionInfoBits(p,v);let _=6*3-1;for(let w=0;w<6;++w)for(let C=0;C<3;++C){let T=v.get(_);_--,A.setBoolean(w,A.getHeight()-11+C,T),A.setBoolean(A.getHeight()-11+C,w,T)}}static embedDataBits(p,A,v){let _=0,w=-1,C=v.getWidth()-1,T=v.getHeight()-1;for(;C>0;){for(C===6&&(C-=1);T>=0&&T<v.getHeight();){for(let N=0;N<2;++N){let z=C-N;if(!Gi.isEmpty(v.get(z,T)))continue;let K;_<p.getSize()?(K=p.get(_),++_):K=!1,A!==255&&nf.getDataMaskBit(A,z,T)&&(K=!K),v.setBoolean(z,T,K)}T+=w}w=-w,T+=w,C-=2}if(_!==p.getSize())throw new Vn("Not all bits consumed: "+_+"/"+p.getSize())}static findMSBSet(p){return 32-x.numberOfLeadingZeros(p)}static calculateBCHCode(p,A){if(A===0)throw new c("0 polynomial");let v=Gi.findMSBSet(A);for(p<<=v-1;Gi.findMSBSet(p)>=v;)p^=A<<Gi.findMSBSet(p)-v;return p}static makeTypeInfoBits(p,A,v){if(!_g.isValidMaskPattern(A))throw new Vn("Invalid mask pattern");let _=p.getBits()<<3|A;v.appendBits(_,5);let w=Gi.calculateBCHCode(_,Gi.TYPE_INFO_POLY);v.appendBits(w,10);let C=new b;if(C.appendBits(Gi.TYPE_INFO_MASK_PATTERN,15),v.xor(C),v.getSize()!==15)throw new Vn("should not happen but we got: "+v.getSize())}static makeVersionInfoBits(p,A){A.appendBits(p.getVersionNumber(),6);let v=Gi.calculateBCHCode(p.getVersionNumber(),Gi.VERSION_INFO_POLY);if(A.appendBits(v,12),A.getSize()!==18)throw new Vn("should not happen but we got: "+A.getSize())}static isEmpty(p){return p===255}static embedTimingPatterns(p){for(let A=8;A<p.getWidth()-8;++A){let v=(A+1)%2;Gi.isEmpty(p.get(A,6))&&p.setNumber(A,6,v),Gi.isEmpty(p.get(6,A))&&p.setNumber(6,A,v)}}static embedDarkDotAtLeftBottomCorner(p){if(p.get(8,p.getHeight()-8)===0)throw new Vn;p.setNumber(8,p.getHeight()-8,1)}static embedHorizontalSeparationPattern(p,A,v){for(let _=0;_<8;++_){if(!Gi.isEmpty(v.get(p+_,A)))throw new Vn;v.setNumber(p+_,A,0)}}static embedVerticalSeparationPattern(p,A,v){for(let _=0;_<7;++_){if(!Gi.isEmpty(v.get(p,A+_)))throw new Vn;v.setNumber(p,A+_,0)}}static embedPositionAdjustmentPattern(p,A,v){for(let _=0;_<5;++_){let w=Gi.POSITION_ADJUSTMENT_PATTERN[_];for(let C=0;C<5;++C)v.setNumber(p+C,A+_,w[C])}}static embedPositionDetectionPattern(p,A,v){for(let _=0;_<7;++_){let w=Gi.POSITION_DETECTION_PATTERN[_];for(let C=0;C<7;++C)v.setNumber(p+C,A+_,w[C])}}static embedPositionDetectionPatternsAndSeparators(p){let A=Gi.POSITION_DETECTION_PATTERN[0].length;Gi.embedPositionDetectionPattern(0,0,p),Gi.embedPositionDetectionPattern(p.getWidth()-A,0,p),Gi.embedPositionDetectionPattern(0,p.getWidth()-A,p);let v=8;Gi.embedHorizontalSeparationPattern(0,v-1,p),Gi.embedHorizontalSeparationPattern(p.getWidth()-v,v-1,p),Gi.embedHorizontalSeparationPattern(0,p.getWidth()-v,p);let _=7;Gi.embedVerticalSeparationPattern(_,0,p),Gi.embedVerticalSeparationPattern(p.getHeight()-_-1,0,p),Gi.embedVerticalSeparationPattern(_,p.getHeight()-_,p)}static maybeEmbedPositionAdjustmentPatterns(p,A){if(p.getVersionNumber()<2)return;let v=p.getVersionNumber()-1,_=Gi.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[v];for(let w=0,C=_.length;w!==C;w++){let T=_[w];if(T>=0)for(let N=0;N!==C;N++){let z=_[N];z>=0&&Gi.isEmpty(A.get(z,T))&&Gi.embedPositionAdjustmentPattern(z-2,T-2,A)}}}}Gi.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Gi.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Gi.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Gi.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Gi.VERSION_INFO_POLY=7973,Gi.TYPE_INFO_POLY=1335,Gi.TYPE_INFO_MASK_PATTERN=21522;class MB{constructor(p,A){this.dataBytes=p,this.errorCorrectionBytes=A}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qn{constructor(){}static calculateMaskPenalty(p){return nf.applyMaskPenaltyRule1(p)+nf.applyMaskPenaltyRule2(p)+nf.applyMaskPenaltyRule3(p)+nf.applyMaskPenaltyRule4(p)}static encode(p,A,v=null){let _=qn.DEFAULT_BYTE_MODE_ENCODING,w=v!==null&&v.get(Xa.CHARACTER_SET)!==void 0;w&&(_=v.get(Xa.CHARACTER_SET).toString());let C=this.chooseMode(p,_),T=new b;if(C===Xe.BYTE&&(w||qn.DEFAULT_BYTE_MODE_ENCODING!==_)){let Jt=F.getCharacterSetECIByName(_);Jt!==void 0&&this.appendECI(Jt,T)}this.appendModeInfo(C,T);let N=new b;this.appendBytes(p,C,N,_);let z;if(v!==null&&v.get(Xa.QR_VERSION)!==void 0){let Jt=Number.parseInt(v.get(Xa.QR_VERSION).toString(),10);z=Ci.getVersionForNumber(Jt);let ut=this.calculateBitsNeeded(C,T,N,z);if(!this.willFit(ut,z,A))throw new Vn("Data too big for requested version")}else z=this.recommendVersion(A,C,T,N);let K=new b;K.appendBitArray(T);let ee=C===Xe.BYTE?N.getSizeInBytes():p.length;this.appendLengthInfo(ee,z,C,K),K.appendBitArray(N);let oe=z.getECBlocksForLevel(A),ge=z.getTotalCodewords()-oe.getTotalECCodewords();this.terminateBits(ge,K);let we=this.interleaveWithECBytes(K,z.getTotalCodewords(),ge,oe.getNumBlocks()),De=new _g;De.setECLevel(A),De.setMode(C),De.setVersion(z);let Ue=z.getDimensionForVersion(),Ke=new xg(Ue,Ue),Et=this.chooseMaskPattern(we,A,z,Ke);return De.setMaskPattern(Et),Gi.buildMatrix(we,A,z,Et,Ke),De.setMatrix(Ke),De}static recommendVersion(p,A,v,_){let w=this.calculateBitsNeeded(A,v,_,Ci.getVersionForNumber(1)),C=this.chooseVersion(w,p),T=this.calculateBitsNeeded(A,v,_,C);return this.chooseVersion(T,p)}static calculateBitsNeeded(p,A,v,_){return A.getSize()+p.getCharacterCountBits(_)+v.getSize()}static getAlphanumericCode(p){return p<qn.ALPHANUMERIC_TABLE.length?qn.ALPHANUMERIC_TABLE[p]:-1}static chooseMode(p,A=null){if(F.SJIS.getName()===A&&this.isOnlyDoubleByteKanji(p))return Xe.KANJI;let v=!1,_=!1;for(let w=0,C=p.length;w<C;++w){let T=p.charAt(w);if(qn.isDigit(T))v=!0;else if(this.getAlphanumericCode(T.charCodeAt(0))!==-1)_=!0;else return Xe.BYTE}return _?Xe.ALPHANUMERIC:v?Xe.NUMERIC:Xe.BYTE}static isOnlyDoubleByteKanji(p){let A;try{A=U.encode(p,F.SJIS)}catch{return!1}let v=A.length;if(v%2!==0)return!1;for(let _=0;_<v;_+=2){let w=A[_]&255;if((w<129||w>159)&&(w<224||w>235))return!1}return!0}static chooseMaskPattern(p,A,v,_){let w=Number.MAX_SAFE_INTEGER,C=-1;for(let T=0;T<_g.NUM_MASK_PATTERNS;T++){Gi.buildMatrix(p,A,v,T,_);let N=this.calculateMaskPenalty(_);N<w&&(w=N,C=T)}return C}static chooseVersion(p,A){for(let v=1;v<=40;v++){let _=Ci.getVersionForNumber(v);if(qn.willFit(p,_,A))return _}throw new Vn("Data too big")}static willFit(p,A,v){let _=A.getTotalCodewords(),C=A.getECBlocksForLevel(v).getTotalECCodewords(),T=_-C,N=(p+7)/8;return T>=N}static terminateBits(p,A){let v=p*8;if(A.getSize()>v)throw new Vn("data bits cannot fit in the QR Code"+A.getSize()+" > "+v);for(let C=0;C<4&&A.getSize()<v;++C)A.appendBit(!1);let _=A.getSize()&7;if(_>0)for(let C=_;C<8;C++)A.appendBit(!1);let w=p-A.getSizeInBytes();for(let C=0;C<w;++C)A.appendBits(C&1?17:236,8);if(A.getSize()!==v)throw new Vn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(p,A,v,_,w,C){if(_>=v)throw new Vn("Block ID too large");let T=p%v,N=v-T,z=Math.floor(p/v),K=z+1,ee=Math.floor(A/v),oe=ee+1,ge=z-ee,we=K-oe;if(ge!==we)throw new Vn("EC bytes mismatch");if(v!==N+T)throw new Vn("RS blocks mismatch");if(p!==(ee+ge)*N+(oe+we)*T)throw new Vn("Total bytes mismatch");_<N?(w[0]=ee,C[0]=ge):(w[0]=oe,C[0]=we)}static interleaveWithECBytes(p,A,v,_){if(p.getSizeInBytes()!==v)throw new Vn("Number of bits and data bytes does not match");let w=0,C=0,T=0,N=new Array;for(let K=0;K<_;++K){let ee=new Int32Array(1),oe=new Int32Array(1);qn.getNumDataBytesAndNumECBytesForBlockID(A,v,_,K,ee,oe);let ge=ee[0],we=new Uint8Array(ge);p.toBytes(8*w,we,0,ge);let De=qn.generateECBytes(we,oe[0]);N.push(new MB(we,De)),C=Math.max(C,ge),T=Math.max(T,De.length),w+=ee[0]}if(v!==w)throw new Vn("Data bytes does not match offset");let z=new b;for(let K=0;K<C;++K)for(let ee of N){let oe=ee.getDataBytes();K<oe.length&&z.appendBits(oe[K],8)}for(let K=0;K<T;++K)for(let ee of N){let oe=ee.getErrorCorrectionBytes();K<oe.length&&z.appendBits(oe[K],8)}if(A!==z.getSizeInBytes())throw new Vn("Interleaving error: "+A+" and "+z.getSizeInBytes()+" differ.");return z}static generateECBytes(p,A){let v=p.length,_=new Int32Array(v+A);for(let C=0;C<v;C++)_[C]=p[C]&255;new L1(Je.QR_CODE_FIELD_256).encode(_,A);let w=new Uint8Array(A);for(let C=0;C<A;C++)w[C]=_[v+C];return w}static appendModeInfo(p,A){A.appendBits(p.getBits(),4)}static appendLengthInfo(p,A,v,_){let w=v.getCharacterCountBits(A);if(p>=1<<w)throw new Vn(p+" is bigger than "+((1<<w)-1));_.appendBits(p,w)}static appendBytes(p,A,v,_){switch(A){case Xe.NUMERIC:qn.appendNumericBytes(p,v);break;case Xe.ALPHANUMERIC:qn.appendAlphanumericBytes(p,v);break;case Xe.BYTE:qn.append8BitBytes(p,v,_);break;case Xe.KANJI:qn.appendKanjiBytes(p,v);break;default:throw new Vn("Invalid mode: "+A)}}static getDigit(p){return p.charCodeAt(0)-48}static isDigit(p){let A=qn.getDigit(p);return A>=0&&A<=9}static appendNumericBytes(p,A){let v=p.length,_=0;for(;_<v;){let w=qn.getDigit(p.charAt(_));if(_+2<v){let C=qn.getDigit(p.charAt(_+1)),T=qn.getDigit(p.charAt(_+2));A.appendBits(w*100+C*10+T,10),_+=3}else if(_+1<v){let C=qn.getDigit(p.charAt(_+1));A.appendBits(w*10+C,7),_+=2}else A.appendBits(w,4),_++}}static appendAlphanumericBytes(p,A){let v=p.length,_=0;for(;_<v;){let w=qn.getAlphanumericCode(p.charCodeAt(_));if(w===-1)throw new Vn;if(_+1<v){let C=qn.getAlphanumericCode(p.charCodeAt(_+1));if(C===-1)throw new Vn;A.appendBits(w*45+C,11),_+=2}else A.appendBits(w,6),_++}}static append8BitBytes(p,A,v){let _;try{_=U.encode(p,v)}catch(w){throw new Vn(w)}for(let w=0,C=_.length;w!==C;w++){let T=_[w];A.appendBits(T,8)}}static appendKanjiBytes(p,A){let v;try{v=U.encode(p,F.SJIS)}catch(w){throw new Vn(w)}let _=v.length;for(let w=0;w<_;w+=2){let C=v[w]&255,T=v[w+1]&255,N=C<<8&4294967295|T,z=-1;if(N>=33088&&N<=40956?z=N-33088:N>=57408&&N<=60351&&(z=N-49472),z===-1)throw new Vn("Invalid byte sequence");let K=(z>>8)*192+(z&255);A.appendBits(K,13)}}static appendECI(p,A){A.appendBits(Xe.ECI.getBits(),4),A.appendBits(p.getValue(),8)}}qn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qn.DEFAULT_BYTE_MODE_ENCODING=F.UTF8.getName();let IB=(()=>{class V{write(A,v,_,w=null){if(A.length===0)throw new c("Found empty contents");if(v<0||_<0)throw new c("Requested dimensions are too small: "+v+"x"+_);let C=tn.L,T=V.QUIET_ZONE_SIZE;w!==null&&(w.get(Xa.ERROR_CORRECTION)!==void 0&&(C=tn.fromString(w.get(Xa.ERROR_CORRECTION).toString())),w.get(Xa.MARGIN)!==void 0&&(T=Number.parseInt(w.get(Xa.MARGIN).toString(),10)));let N=qn.encode(A,C,w);return this.renderResult(N,v,_,T)}writeToDom(A,v,_,w,C=null){typeof A=="string"&&(A=document.querySelector(A));let T=this.write(v,_,w,C);A&&A.appendChild(T)}renderResult(A,v,_,w){let C=A.getMatrix();if(C===null)throw new Bi;let T=C.getWidth(),N=C.getHeight(),z=T+w*2,K=N+w*2,ee=Math.max(v,z),oe=Math.max(_,K),ge=Math.min(Math.floor(ee/z),Math.floor(oe/K)),we=Math.floor((ee-T*ge)/2),De=Math.floor((oe-N*ge)/2),Ue=this.createSVGElement(ee,oe);for(let Ke=0,Et=De;Ke<N;Ke++,Et+=ge)for(let Jt=0,ut=we;Jt<T;Jt++,ut+=ge)if(C.get(Jt,Ke)===1){let er=this.createSvgRectElement(ut,Et,ge,ge);Ue.appendChild(er)}return Ue}createSVGElement(A,v){let _=document.createElementNS(V.SVG_NS,"svg");return _.setAttributeNS(null,"height",A.toString()),_.setAttributeNS(null,"width",v.toString()),_}createSvgRectElement(A,v,_,w){let C=document.createElementNS(V.SVG_NS,"rect");return C.setAttributeNS(null,"x",A.toString()),C.setAttributeNS(null,"y",v.toString()),C.setAttributeNS(null,"height",_.toString()),C.setAttributeNS(null,"width",w.toString()),C.setAttributeNS(null,"fill","#000000"),C}}return V.QUIET_ZONE_SIZE=4,V.SVG_NS="http://www.w3.org/2000/svg",V})(),tb=(()=>{class V{encode(A,v,_,w,C){if(A.length===0)throw new c("Found empty contents");if(v!==Se.QR_CODE)throw new c("Can only encode QR_CODE, but got "+v);if(_<0||w<0)throw new c(`Requested dimensions are too small: ${_}x${w}`);let T=tn.L,N=V.QUIET_ZONE_SIZE;C!==null&&(C.get(Xa.ERROR_CORRECTION)!==void 0&&(T=tn.fromString(C.get(Xa.ERROR_CORRECTION).toString())),C.get(Xa.MARGIN)!==void 0&&(N=Number.parseInt(C.get(Xa.MARGIN).toString(),10)));let z=qn.encode(A,T,C);return V.renderResult(z,_,w,N)}static renderResult(A,v,_,w){let C=A.getMatrix();if(C===null)throw new Bi;let T=C.getWidth(),N=C.getHeight(),z=T+w*2,K=N+w*2,ee=Math.max(v,z),oe=Math.max(_,K),ge=Math.min(Math.floor(ee/z),Math.floor(oe/K)),we=Math.floor((ee-T*ge)/2),De=Math.floor((oe-N*ge)/2),Ue=new q(ee,oe);for(let Ke=0,Et=De;Ke<N;Ke++,Et+=ge)for(let Jt=0,ut=we;Jt<T;Jt++,ut+=ge)C.get(Jt,Ke)===1&&Ue.setRegion(ut,Et,ge,ge);return Ue}}return V.QUIET_ZONE_SIZE=4,V})();class BB{encode(p,A,v,_,w){let C;switch(A){case Se.QR_CODE:C=new tb;break;default:throw new c("No encoder available for format "+A)}return C.encode(p,A,v,_,w)}}let DB=(()=>{class V extends te{constructor(A,v,_,w,C,T,N,z){if(super(T,N),this.yuvData=A,this.dataWidth=v,this.dataHeight=_,this.left=w,this.top=C,w+T>v||C+N>_)throw new c("Crop rectangle does not fit within image data.");z&&this.reverseHorizontal(T,N)}getRow(A,v){if(A<0||A>=this.getHeight())throw new c("Requested row is outside the image: "+A);let _=this.getWidth();(v==null||v.length<_)&&(v=new Uint8ClampedArray(_));let w=(A+this.top)*this.dataWidth+this.left;return f.arraycopy(this.yuvData,w,v,0,_),v}getMatrix(){let A=this.getWidth(),v=this.getHeight();if(A===this.dataWidth&&v===this.dataHeight)return this.yuvData;let _=A*v,w=new Uint8ClampedArray(_),C=this.top*this.dataWidth+this.left;if(A===this.dataWidth)return f.arraycopy(this.yuvData,C,w,0,_),w;for(let T=0;T<v;T++){let N=T*A;f.arraycopy(this.yuvData,C,w,N,A),C+=this.dataWidth}return w}isCropSupported(){return!0}crop(A,v,_,w){return new V(this.yuvData,this.dataWidth,this.dataHeight,this.left+A,this.top+v,_,w,!1)}renderThumbnail(){let A=this.getWidth()/V.THUMBNAIL_SCALE_FACTOR,v=this.getHeight()/V.THUMBNAIL_SCALE_FACTOR,_=new Int32Array(A*v),w=this.yuvData,C=this.top*this.dataWidth+this.left;for(let T=0;T<v;T++){let N=T*A;for(let z=0;z<A;z++){let K=w[C+z*V.THUMBNAIL_SCALE_FACTOR]&255;_[N+z]=4278190080|K*65793}C+=this.dataWidth*V.THUMBNAIL_SCALE_FACTOR}return _}getThumbnailWidth(){return this.getWidth()/V.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/V.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(A,v){let _=this.yuvData;for(let w=0,C=this.top*this.dataWidth+this.left;w<v;w++,C+=this.dataWidth){let T=C+A/2;for(let N=C,z=C+A-1;N<T;N++,z--){let K=_[N];_[N]=_[z],_[z]=K}}}invert(){return new de(this)}}return V.THUMBNAIL_SCALE_FACTOR=2,V})();class O1 extends te{constructor(p,A,v,_,w,C,T){if(super(A,v),this.dataWidth=_,this.dataHeight=w,this.left=C,this.top=T,p.BYTES_PER_ELEMENT===4){let N=A*v,z=new Uint8ClampedArray(N);for(let K=0;K<N;K++){let ee=p[K],oe=ee>>16&255,ge=ee>>7&510,we=ee&255;z[K]=(oe+ge+we)/4&255}this.luminances=z}else this.luminances=p;if(_===void 0&&(this.dataWidth=A),w===void 0&&(this.dataHeight=v),C===void 0&&(this.left=0),T===void 0&&(this.top=0),this.left+A>this.dataWidth||this.top+v>this.dataHeight)throw new c("Crop rectangle does not fit within image data.")}getRow(p,A){if(p<0||p>=this.getHeight())throw new c("Requested row is outside the image: "+p);let v=this.getWidth();(A==null||A.length<v)&&(A=new Uint8ClampedArray(v));let _=(p+this.top)*this.dataWidth+this.left;return f.arraycopy(this.luminances,_,A,0,v),A}getMatrix(){let p=this.getWidth(),A=this.getHeight();if(p===this.dataWidth&&A===this.dataHeight)return this.luminances;let v=p*A,_=new Uint8ClampedArray(v),w=this.top*this.dataWidth+this.left;if(p===this.dataWidth)return f.arraycopy(this.luminances,w,_,0,v),_;for(let C=0;C<A;C++){let T=C*p;f.arraycopy(this.luminances,w,_,T,p),w+=this.dataWidth}return _}isCropSupported(){return!0}crop(p,A,v,_){return new O1(this.luminances,v,_,this.dataWidth,this.dataHeight,this.left+p,this.top+A)}invert(){return new de(this)}}class ib extends F{static forName(p){return this.getCharacterSetECIByName(p)}}class hA{}hA.ISO_8859_1=F.ISO8859_1;class F1{isCompact(){return this.compact}setCompact(p){this.compact=p}getSize(){return this.size}setSize(p){this.size=p}getLayers(){return this.layers}setLayers(p){this.layers=p}getCodeWords(){return this.codeWords}setCodeWords(p){this.codeWords=p}getMatrix(){return this.matrix}setMatrix(p){this.matrix=p}}class N1{static singletonList(p){return[p]}static min(p,A){return p.sort(A)[0]}}class dA{constructor(p){this.previous=p}getPrevious(){return this.previous}}class Nl extends dA{constructor(p,A,v){super(p),this.value=A,this.bitCount=v}appendTo(p,A){p.appendBits(this.value,this.bitCount)}add(p,A){return new Nl(this,p,A)}addBinaryShift(p,A){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nl(this,p,A)}toString(){let p=this.value&(1<<this.bitCount)-1;return p|=1<<this.bitCount,"<"+x.toBinaryString(p|1<<this.bitCount).substring(1)+">"}}class mn extends Nl{constructor(p,A,v){super(p,0,0),this.binaryShiftStart=A,this.binaryShiftByteCount=v}appendTo(p,A){for(let v=0;v<this.binaryShiftByteCount;v++)(v===0||v===31&&this.binaryShiftByteCount<=62)&&(p.appendBits(31,5),this.binaryShiftByteCount>62?p.appendBits(this.binaryShiftByteCount-31,16):v===0?p.appendBits(Math.min(this.binaryShiftByteCount,31),5):p.appendBits(this.binaryShiftByteCount-31,5)),p.appendBits(A[this.binaryShiftStart+v],8)}addBinaryShift(p,A){return new mn(this,p,A)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function RB(V,p,A){return new mn(V,p,A)}function qh(V,p,A){return new Nl(V,p,A)}let rb=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rs=0,Ps=1,tl=2,du=3,xn=4,nb=new Nl(null,0,0),Ya=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function U1(V){for(let p of V)g.fill(p,-1);return V[Rs][xn]=0,V[Ps][xn]=0,V[Ps][Rs]=28,V[du][xn]=0,V[tl][xn]=0,V[tl][Rs]=15,V}let fu=U1(g.createInt32Array(6,6));class ps{constructor(p,A,v,_){this.token=p,this.mode=A,this.binaryShiftByteCount=v,this.bitCount=_}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(p,A){let v=this.bitCount,_=this.token;if(p!==this.mode){let C=Ya[this.mode][p];_=qh(_,C&65535,C>>16),v+=C>>16}let w=p===tl?4:5;return _=qh(_,A,w),new ps(_,p,0,v+w)}shiftAndAppend(p,A){let v=this.token,_=this.mode===tl?4:5;return v=qh(v,fu[this.mode][p],_),v=qh(v,A,5),new ps(v,this.mode,0,this.bitCount+_+5)}addBinaryShiftChar(p){let A=this.token,v=this.mode,_=this.bitCount;if(this.mode===xn||this.mode===tl){let T=Ya[v][Rs];A=qh(A,T&65535,T>>16),_+=T>>16,v=Rs}let w=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,C=new ps(A,v,this.binaryShiftByteCount+1,_+w);return C.binaryShiftByteCount===2047+31&&(C=C.endBinaryShift(p+1)),C}endBinaryShift(p){if(this.binaryShiftByteCount===0)return this;let A=this.token;return A=RB(A,p-this.binaryShiftByteCount,this.binaryShiftByteCount),new ps(A,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(p){let A=this.bitCount+(Ya[this.mode][p.mode]>>16);return this.binaryShiftByteCount<p.binaryShiftByteCount?A+=ps.calculateBinaryShiftCost(p)-ps.calculateBinaryShiftCost(this):this.binaryShiftByteCount>p.binaryShiftByteCount&&p.binaryShiftByteCount>0&&(A+=10),A<=p.bitCount}toBitArray(p){let A=[];for(let _=this.endBinaryShift(p.length).token;_!==null;_=_.getPrevious())A.unshift(_);let v=new b;for(let _ of A)_.appendTo(v,p);return v}toString(){return k.format("%s bits=%d bytes=%d",rb[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(p){return p.binaryShiftByteCount>62?21:p.binaryShiftByteCount>31?20:p.binaryShiftByteCount>0?10:0}}ps.INITIAL_STATE=new ps(nb,Rs,0,0);function Hn(V){let p=k.getCharCode(" "),A=k.getCharCode("."),v=k.getCharCode(",");V[Rs][p]=1;let _=k.getCharCode("Z"),w=k.getCharCode("A");for(let oe=w;oe<=_;oe++)V[Rs][oe]=oe-w+2;V[Ps][p]=1;let C=k.getCharCode("z"),T=k.getCharCode("a");for(let oe=T;oe<=C;oe++)V[Ps][oe]=oe-T+2;V[tl][p]=1;let N=k.getCharCode("9"),z=k.getCharCode("0");for(let oe=z;oe<=N;oe++)V[tl][oe]=oe-z+2;V[tl][v]=12,V[tl][A]=13;let K=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let oe=0;oe<K.length;oe++)V[du][k.getCharCode(K[oe])]=oe;let ee=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let oe=0;oe<ee.length;oe++)k.getCharCode(ee[oe])>0&&(V[xn][k.getCharCode(ee[oe])]=oe);return V}let wg=Hn(g.createInt32Array(5,256));class af{constructor(p){this.text=p}encode(){let p=k.getCharCode(" "),A=k.getCharCode(`
`),v=N1.singletonList(ps.INITIAL_STATE);for(let w=0;w<this.text.length;w++){let C,T=w+1<this.text.length?this.text[w+1]:0;switch(this.text[w]){case k.getCharCode("\r"):C=T===A?2:0;break;case k.getCharCode("."):C=T===p?3:0;break;case k.getCharCode(","):C=T===p?4:0;break;case k.getCharCode(":"):C=T===p?5:0;break;default:C=0}C>0?(v=af.updateStateListForPair(v,w,C),w++):v=this.updateStateListForChar(v,w)}return N1.min(v,(w,C)=>w.getBitCount()-C.getBitCount()).toBitArray(this.text)}updateStateListForChar(p,A){let v=[];for(let _ of p)this.updateStateForChar(_,A,v);return af.simplifyStates(v)}updateStateForChar(p,A,v){let _=this.text[A]&255,w=wg[p.getMode()][_]>0,C=null;for(let T=0;T<=xn;T++){let N=wg[T][_];if(N>0){if(C==null&&(C=p.endBinaryShift(A)),!w||T===p.getMode()||T===tl){let z=C.latchAndAppend(T,N);v.push(z)}if(!w&&fu[p.getMode()][T]>=0){let z=C.shiftAndAppend(T,N);v.push(z)}}}if(p.getBinaryShiftByteCount()>0||wg[p.getMode()][_]===0){let T=p.addBinaryShiftChar(A);v.push(T)}}static updateStateListForPair(p,A,v){let _=[];for(let w of p)this.updateStateForPair(w,A,v,_);return this.simplifyStates(_)}static updateStateForPair(p,A,v,_){let w=p.endBinaryShift(A);if(_.push(w.latchAndAppend(xn,v)),p.getMode()!==xn&&_.push(w.shiftAndAppend(xn,v)),v===3||v===4){let C=w.latchAndAppend(tl,16-v).latchAndAppend(tl,1);_.push(C)}if(p.getBinaryShiftByteCount()>0){let C=p.addBinaryShiftChar(A).addBinaryShiftChar(A+1);_.push(C)}}static simplifyStates(p){let A=[];for(let v of p){let _=!0;for(let w of A){if(w.isBetterThanOrEqualTo(v)){_=!1;break}v.isBetterThanOrEqualTo(w)&&(A=A.filter(C=>C!==w))}_&&A.push(v)}return A}}class Gr{constructor(){}static encodeBytes(p){return Gr.encode(p,Gr.DEFAULT_EC_PERCENT,Gr.DEFAULT_AZTEC_LAYERS)}static encode(p,A,v){let _=new af(p).encode(),w=x.truncDivision(_.getSize()*A,100)+11,C=_.getSize()+w,T,N,z,K,ee;if(v!==Gr.DEFAULT_AZTEC_LAYERS){if(T=v<0,N=Math.abs(v),N>(T?Gr.MAX_NB_BITS_COMPACT:Gr.MAX_NB_BITS))throw new c(k.format("Illegal value %s for layers",v));z=Gr.totalBitsInLayer(N,T),K=Gr.WORD_SIZE[N];let ut=z-z%K;if(ee=Gr.stuffBits(_,K),ee.getSize()+w>ut)throw new c("Data to large for user specified layer");if(T&&ee.getSize()>K*64)throw new c("Data to large for user specified layer")}else{K=0,ee=null;for(let ut=0;;ut++){if(ut>Gr.MAX_NB_BITS)throw new c("Data too large for an Aztec code");if(T=ut<=3,N=T?ut+1:ut,z=Gr.totalBitsInLayer(N,T),C>z)continue;(ee==null||K!==Gr.WORD_SIZE[N])&&(K=Gr.WORD_SIZE[N],ee=Gr.stuffBits(_,K));let er=z-z%K;if(!(T&&ee.getSize()>K*64)&&ee.getSize()+w<=er)break}}let oe=Gr.generateCheckWords(ee,z,K),ge=ee.getSize()/K,we=Gr.generateModeMessage(T,N,ge),De=(T?11:14)+N*4,Ue=new Int32Array(De),Ke;if(T){Ke=De;for(let ut=0;ut<Ue.length;ut++)Ue[ut]=ut}else{Ke=De+1+2*x.truncDivision(x.truncDivision(De,2)-1,15);let ut=x.truncDivision(De,2),er=x.truncDivision(Ke,2);for(let fr=0;fr<ut;fr++){let As=fr+x.truncDivision(fr,15);Ue[ut-fr-1]=er-As-1,Ue[ut+fr]=er+As+1}}let Et=new q(Ke);for(let ut=0,er=0;ut<N;ut++){let fr=(N-ut)*4+(T?9:12);for(let As=0;As<fr;As++){let Ul=As*2;for(let mo=0;mo<2;mo++)oe.get(er+Ul+mo)&&Et.set(Ue[ut*2+mo],Ue[ut*2+As]),oe.get(er+fr*2+Ul+mo)&&Et.set(Ue[ut*2+As],Ue[De-1-ut*2-mo]),oe.get(er+fr*4+Ul+mo)&&Et.set(Ue[De-1-ut*2-mo],Ue[De-1-ut*2-As]),oe.get(er+fr*6+Ul+mo)&&Et.set(Ue[De-1-ut*2-As],Ue[ut*2+mo])}er+=fr*8}if(Gr.drawModeMessage(Et,T,Ke,we),T)Gr.drawBullsEye(Et,x.truncDivision(Ke,2),5);else{Gr.drawBullsEye(Et,x.truncDivision(Ke,2),7);for(let ut=0,er=0;ut<x.truncDivision(De,2)-1;ut+=15,er+=16)for(let fr=x.truncDivision(Ke,2)&1;fr<Ke;fr+=2)Et.set(x.truncDivision(Ke,2)-er,fr),Et.set(x.truncDivision(Ke,2)+er,fr),Et.set(fr,x.truncDivision(Ke,2)-er),Et.set(fr,x.truncDivision(Ke,2)+er)}let Jt=new F1;return Jt.setCompact(T),Jt.setSize(Ke),Jt.setLayers(N),Jt.setCodeWords(ge),Jt.setMatrix(Et),Jt}static drawBullsEye(p,A,v){for(let _=0;_<v;_+=2)for(let w=A-_;w<=A+_;w++)p.set(w,A-_),p.set(w,A+_),p.set(A-_,w),p.set(A+_,w);p.set(A-v,A-v),p.set(A-v+1,A-v),p.set(A-v,A-v+1),p.set(A+v,A-v),p.set(A+v,A-v+1),p.set(A+v,A+v-1)}static generateModeMessage(p,A,v){let _=new b;return p?(_.appendBits(A-1,2),_.appendBits(v-1,6),_=Gr.generateCheckWords(_,28,4)):(_.appendBits(A-1,5),_.appendBits(v-1,11),_=Gr.generateCheckWords(_,40,4)),_}static drawModeMessage(p,A,v,_){let w=x.truncDivision(v,2);if(A)for(let C=0;C<7;C++){let T=w-3+C;_.get(C)&&p.set(T,w-5),_.get(C+7)&&p.set(w+5,T),_.get(20-C)&&p.set(T,w+5),_.get(27-C)&&p.set(w-5,T)}else for(let C=0;C<10;C++){let T=w-5+C+x.truncDivision(C,5);_.get(C)&&p.set(T,w-7),_.get(C+10)&&p.set(w+7,T),_.get(29-C)&&p.set(T,w+7),_.get(39-C)&&p.set(w-7,T)}}static generateCheckWords(p,A,v){let _=p.getSize()/v,w=new L1(Gr.getGF(v)),C=x.truncDivision(A,v),T=Gr.bitsToWords(p,v,C);w.encode(T,C-_);let N=A%v,z=new b;z.appendBits(0,N);for(let K of Array.from(T))z.appendBits(K,v);return z}static bitsToWords(p,A,v){let _=new Int32Array(v),w,C;for(w=0,C=p.getSize()/A;w<C;w++){let T=0;for(let N=0;N<A;N++)T|=p.get(w*A+N)?1<<A-N-1:0;_[w]=T}return _}static getGF(p){switch(p){case 4:return Je.AZTEC_PARAM;case 6:return Je.AZTEC_DATA_6;case 8:return Je.AZTEC_DATA_8;case 10:return Je.AZTEC_DATA_10;case 12:return Je.AZTEC_DATA_12;default:throw new c("Unsupported word size "+p)}}static stuffBits(p,A){let v=new b,_=p.getSize(),w=(1<<A)-2;for(let C=0;C<_;C+=A){let T=0;for(let N=0;N<A;N++)(C+N>=_||p.get(C+N))&&(T|=1<<A-1-N);(T&w)===w?(v.appendBits(T&w,A),C--):T&w?v.appendBits(T,A):(v.appendBits(T|1,A),C--)}return v}static totalBitsInLayer(p,A){return((A?88:112)+16*p)*p}}Gr.DEFAULT_EC_PERCENT=33,Gr.DEFAULT_AZTEC_LAYERS=0,Gr.MAX_NB_BITS=32,Gr.MAX_NB_BITS_COMPACT=4,Gr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class fA{encode(p,A,v,_){return this.encodeWithHints(p,A,v,_,null)}encodeWithHints(p,A,v,_,w){let C=hA.ISO_8859_1,T=Gr.DEFAULT_EC_PERCENT,N=Gr.DEFAULT_AZTEC_LAYERS;return w!=null&&(w.has(Xa.CHARACTER_SET)&&(C=ib.forName(w.get(Xa.CHARACTER_SET).toString())),w.has(Xa.ERROR_CORRECTION)&&(T=x.parseInt(w.get(Xa.ERROR_CORRECTION).toString())),w.has(Xa.AZTEC_LAYERS)&&(N=x.parseInt(w.get(Xa.AZTEC_LAYERS).toString()))),fA.encodeLayers(p,A,v,_,C,T,N)}static encodeLayers(p,A,v,_,w,C,T){if(A!==Se.AZTEC)throw new c("Can only encode AZTEC, but got "+A);let N=Gr.encode(k.getBytes(p,w),C,T);return fA.renderResult(N,v,_)}static renderResult(p,A,v){let _=p.getMatrix();if(_==null)throw new Bi;let w=_.getWidth(),C=_.getHeight(),T=Math.max(A,w),N=Math.max(v,C),z=Math.min(T/w,N/C),K=(T-w*z)/2,ee=(N-C*z)/2,oe=new q(T,N);for(let ge=0,we=ee;ge<C;ge++,we+=z)for(let De=0,Ue=K;De<w;De++,Ue+=z)_.get(De,ge)&&oe.setRegion(Ue,we,z,z);return oe}}i.AbstractExpandedDecoder=Ol,i.ArgumentException=l,i.ArithmeticException=pt,i.AztecCode=F1,i.AztecCodeReader=Zi,i.AztecCodeWriter=fA,i.AztecDecoder=Ct,i.AztecDetector=Ni,i.AztecDetectorResult=Ge,i.AztecEncoder=Gr,i.AztecHighLevelEncoder=af,i.AztecPoint=Qt,i.BarcodeFormat=Se,i.Binarizer=d,i.BinaryBitmap=u,i.BitArray=b,i.BitMatrix=q,i.BitSource=Wa,i.BrowserAztecCodeReader=vt,i.BrowserBarcodeReader=Yr,i.BrowserCodeReader=Re,i.BrowserDatamatrixCodeReader=Pr,i.BrowserMultiFormatReader=CB,i.BrowserPDF417Reader=EB,i.BrowserQRCodeReader=TB,i.BrowserQRCodeSvgWriter=IB,i.CharacterSetECI=F,i.ChecksumException=h,i.Code128Reader=lt,i.Code39Reader=Wi,i.DataMatrixDecodedBitStreamParser=ha,i.DataMatrixReader=el,i.DecodeHintType=E,i.DecoderResult=dt,i.DefaultGridSampler=Ti,i.DetectorResult=se,i.EAN13Reader=Rt,i.EncodeHintType=Xa,i.Exception=s,i.FormatException=D,i.GenericGF=Je,i.GenericGFPoly=ht,i.GlobalHistogramBinarizer=Y,i.GridSampler=gt,i.GridSamplerInstance=kt,i.HTMLCanvasElementLuminanceSource=ue,i.HybridBinarizer=J,i.ITFReader=Lt,i.IllegalArgumentException=c,i.IllegalStateException=Bi,i.InvertedLuminanceSource=de,i.LuminanceSource=te,i.MathUtils=Xt,i.MultiFormatOneDReader=Ri,i.MultiFormatReader=$w,i.MultiFormatWriter=BB,i.NotFoundException=X,i.OneDReader=vi,i.PDF417DecodedBitStreamParser=qe,i.PDF417DecoderErrorCorrection=D1,i.PDF417Reader=Ka,i.PDF417ResultMetadata=Ao,i.PerspectiveTransform=mt,i.PlanarYUVLuminanceSource=DB,i.QRCodeByteMatrix=xg,i.QRCodeDataMask=ne,i.QRCodeDecodedBitStreamParser=oi,i.QRCodeDecoderErrorCorrectionLevel=tn,i.QRCodeDecoderFormatInformation=rn,i.QRCodeEncoder=qn,i.QRCodeEncoderQRCode=_g,i.QRCodeMaskUtil=nf,i.QRCodeMatrixUtil=Gi,i.QRCodeMode=Xe,i.QRCodeReader=$u,i.QRCodeVersion=Ci,i.QRCodeWriter=tb,i.RGBLuminanceSource=O1,i.RSS14Reader=Zt,i.RSSExpandedReader=ze,i.ReaderException=P1,i.ReedSolomonDecoder=_t,i.ReedSolomonEncoder=L1,i.ReedSolomonException=Ie,i.Result=Oe,i.ResultMetadataType=rt,i.ResultPoint=ae,i.StringUtils=k,i.UnsupportedOperationException=H,i.VideoInputDevice=ve,i.WhiteRectangleDetector=bt,i.WriterException=Vn,i.ZXingArrays=g,i.ZXingCharset=ib,i.ZXingInteger=x,i.ZXingStandardCharsets=hA,i.ZXingStringBuilder=j,i.ZXingStringEncoding=U,i.ZXingSystem=f,i.createAbstractExpandedDecoder=ai,Object.defineProperty(i,"__esModule",{value:!0})})});var Xz=un((exports,module)=>{"use strict";(function(i,e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var r in t)(typeof exports=="object"?exports:i)[r]=t[r]}})(typeof self<"u"?self:exports,function(){return function(i){var e={};function t(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return i[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=i,t.c=e,t.d=function(r,n,a){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:a})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n||4&n&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&n&&typeof r!="string")for(var o in r)t.d(a,o,(function(s){return r[s]}).bind(null,o));return a},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="/",t(t.s=0)}({"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });
/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });

/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });





const version = "2.0.3";
const OBJ = {
    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],
    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],
    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],
    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],
    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],
    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],
    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],
    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],
    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],
    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],
    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],
    version,
};
/**
 * @namespace
 */



//# sourceURL=webpack:///./src/index.ts?`)},"./src/layout.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });
var TYPES;
(function (TYPES) {
    TYPES["BYTE"] = "BYTE";
    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";
    TYPES["SHORT"] = "SHORT";
    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";
    TYPES["FLOAT"] = "FLOAT";
})(TYPES || (TYPES = {}));
/**
 * An exception for when two or more of the same attributes are found in the
 * same layout.
 * @private
 */
class DuplicateAttributeException extends Error {
    /**
     * Create a DuplicateAttributeException
     * @param {Attribute} attribute - The attribute that was found more than
     *        once in the {@link Layout}
     */
    constructor(attribute) {
        super(\`found duplicate attribute: \${attribute.key}\`);
    }
}
/**
 * Represents how a vertex attribute should be packed into an buffer.
 * @private
 */
class Attribute {
    /**
     * Create an attribute. Do not call this directly, use the predefined
     * constants.
     * @param {string} key - The name of this attribute as if it were a key in
     *        an Object. Use the camel case version of the upper snake case
     *        const name.
     * @param {number} size - The number of components per vertex attribute.
     *        Must be 1, 2, 3, or 4.
     * @param {string} type - The data type of each component for this
     *        attribute. Possible values:<br/>
     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>
     *        "SHORT": signed 16-bit integer, with values in
     *            [-32768, 32767]<br/>
     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in
     *            [0, 255]<br/>
     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in
     *            [0, 65535]<br/>
     *        "FLOAT": 32-bit floating point number
     * @param {boolean} normalized - Whether integer data values should be
     *        normalized when being casted to a float.<br/>
     *        If true, signed integers are normalized to [-1, 1].<br/>
     *        If true, unsigned integers are normalized to [0, 1].<br/>
     *        For type "FLOAT", this parameter has no effect.
     */
    constructor(key, size, type, normalized = false) {
        this.key = key;
        this.size = size;
        this.type = type;
        this.normalized = normalized;
        switch (type) {
            case "BYTE":
            case "UNSIGNED_BYTE":
                this.sizeOfType = 1;
                break;
            case "SHORT":
            case "UNSIGNED_SHORT":
                this.sizeOfType = 2;
                break;
            case "FLOAT":
                this.sizeOfType = 4;
                break;
            default:
                throw new Error(\`Unknown gl type: \${type}\`);
        }
        this.sizeInBytes = this.sizeOfType * size;
    }
}
/**
 * A class to represent the memory layout for a vertex attribute array. Used by
 * {@link Mesh}'s TBD(...) method to generate a packed array from mesh data.
 * <p>
 * Layout can sort of be thought of as a C-style struct declaration.
 * {@link Mesh}'s TBD(...) method will use the {@link Layout} instance to
 * pack an array in the given attribute order.
 * <p>
 * Layout also is very helpful when calling a WebGL context's
 * <code>vertexAttribPointer</code> method. If you've created a buffer using
 * a Layout instance, then the same Layout instance can be used to determine
 * the size, type, normalized, stride, and offset parameters for
 * <code>vertexAttribPointer</code>.
 * <p>
 * For example:
 * <pre><code>
 *
 * const index = glctx.getAttribLocation(shaderProgram, "pos");
 * glctx.vertexAttribPointer(
 *   layout.position.size,
 *   glctx[layout.position.type],
 *   layout.position.normalized,
 *   layout.position.stride,
 *   layout.position.offset);
 * </code></pre>
 * @see {@link Mesh}
 */
class Layout {
    /**
     * Create a Layout object. This constructor will throw if any duplicate
     * attributes are given.
     * @param {Array} ...attributes - An ordered list of attributes that
     *        describe the desired memory layout for each vertex attribute.
     *        <p>
     *
     * @see {@link Mesh}
     */
    constructor(...attributes) {
        this.attributes = attributes;
        this.attributeMap = {};
        let offset = 0;
        let maxStrideMultiple = 0;
        for (const attribute of attributes) {
            if (this.attributeMap[attribute.key]) {
                throw new DuplicateAttributeException(attribute);
            }
            // Add padding to satisfy WebGL's requirement that all
            // vertexAttribPointer calls have an offset that is a multiple of
            // the type size.
            if (offset % attribute.sizeOfType !== 0) {
                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);
                console.warn("Layout requires padding before " + attribute.key + " attribute");
            }
            this.attributeMap[attribute.key] = {
                attribute: attribute,
                size: attribute.size,
                type: attribute.type,
                normalized: attribute.normalized,
                offset: offset,
            };
            offset += attribute.sizeInBytes;
            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);
        }
        // Add padding to the end to satisfy WebGL's requirement that all
        // vertexAttribPointer calls have a stride that is a multiple of the
        // type size. Because we're putting differently sized attributes into
        // the same buffer, it must be padded to a multiple of the largest
        // type size.
        if (offset % maxStrideMultiple !== 0) {
            offset += maxStrideMultiple - (offset % maxStrideMultiple);
            console.warn("Layout requires padding at the back");
        }
        this.stride = offset;
        for (const attribute of attributes) {
            this.attributeMap[attribute.key].stride = this.stride;
        }
    }
}
// Geometry attributes
/**
 * Attribute layout to pack a vertex's x, y, & z as floats
 *
 * @see {@link Layout}
 */
Layout.POSITION = new Attribute("position", 3, TYPES.FLOAT);
/**
 * Attribute layout to pack a vertex's normal's x, y, & z as floats
 *
 * @see {@link Layout}
 */
Layout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);
/**
 * Attribute layout to pack a vertex's normal's x, y, & z as floats.
 * <p>
 * This value will be computed on-the-fly based on the texture coordinates.
 * If no texture coordinates are available, the generated value will default to
 * 0, 0, 0.
 *
 * @see {@link Layout}
 */
Layout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);
/**
 * Attribute layout to pack a vertex's normal's bitangent x, y, & z as floats.
 * <p>
 * This value will be computed on-the-fly based on the texture coordinates.
 * If no texture coordinates are available, the generated value will default to
 * 0, 0, 0.
 * @see {@link Layout}
 */
Layout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);
/**
 * Attribute layout to pack a vertex's texture coordinates' u & v as floats
 *
 * @see {@link Layout}
 */
Layout.UV = new Attribute("uv", 2, TYPES.FLOAT);
// Material attributes
/**
 * Attribute layout to pack an unsigned short to be interpreted as a the index
 * into a {@link Mesh}'s materials list.
 * <p>
 * The intention of this value is to send all of the {@link Mesh}'s materials
 * into multiple shader uniforms and then reference the current one by this
 * vertex attribute.
 * <p>
 * example glsl code:
 *
 * <pre><code>
 *  // this is bound using MATERIAL_INDEX
 *  attribute int materialIndex;
 *
 *  struct Material {
 *    vec3 diffuse;
 *    vec3 specular;
 *    vec3 specularExponent;
 *  };
 *
 *  uniform Material materials[MAX_MATERIALS];
 *
 *  // ...
 *
 *  vec3 diffuse = materials[materialIndex];
 *
 * </code></pre>
 * TODO: More description & test to make sure subscripting by attributes even
 * works for webgl
 *
 * @see {@link Layout}
 */
Layout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);
Layout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);
Layout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);
Layout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);
Layout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);
Layout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);
Layout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);
Layout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);
Layout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);
Layout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);
Layout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);
Layout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);
Layout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);
Layout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);
Layout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);
Layout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);
Layout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);
Layout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);
Layout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);
Layout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);
Layout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);
Layout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);


//# sourceURL=webpack:///./src/layout.ts?`)},"./src/material.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });
/**
 * The Material class.
 */
class Material {
    constructor(name) {
        this.name = name;
        /**
         * Constructor
         * @param {String} name the unique name of the material
         */
        // The values for the following attibutes
        // are an array of R, G, B normalized values.
        // Ka - Ambient Reflectivity
        this.ambient = [0, 0, 0];
        // Kd - Defuse Reflectivity
        this.diffuse = [0, 0, 0];
        // Ks
        this.specular = [0, 0, 0];
        // Ke
        this.emissive = [0, 0, 0];
        // Tf
        this.transmissionFilter = [0, 0, 0];
        // d
        this.dissolve = 0;
        // valid range is between 0 and 1000
        this.specularExponent = 0;
        // either d or Tr; valid values are normalized
        this.transparency = 0;
        // illum - the enum of the illumination model to use
        this.illumination = 0;
        // Ni - Set to "normal" (air).
        this.refractionIndex = 1;
        // sharpness
        this.sharpness = 0;
        // map_Kd
        this.mapDiffuse = emptyTextureOptions();
        // map_Ka
        this.mapAmbient = emptyTextureOptions();
        // map_Ks
        this.mapSpecular = emptyTextureOptions();
        // map_Ns
        this.mapSpecularExponent = emptyTextureOptions();
        // map_d
        this.mapDissolve = emptyTextureOptions();
        // map_aat
        this.antiAliasing = false;
        // map_bump or bump
        this.mapBump = emptyTextureOptions();
        // disp
        this.mapDisplacement = emptyTextureOptions();
        // decal
        this.mapDecal = emptyTextureOptions();
        // map_Ke
        this.mapEmissive = emptyTextureOptions();
        // refl - when the reflection type is a cube, there will be multiple refl
        //        statements for each side of the cube. If it's a spherical
        //        reflection, there should only ever be one.
        this.mapReflections = [];
    }
}
const SENTINEL_MATERIAL = new Material("sentinel");
/**
 * https://en.wikipedia.org/wiki/Wavefront_.obj_file
 * http://paulbourke.net/dataformats/mtl/
 */
class MaterialLibrary {
    constructor(data) {
        this.data = data;
        /**
         * Constructs the Material Parser
         * @param mtlData the MTL file contents
         */
        this.currentMaterial = SENTINEL_MATERIAL;
        this.materials = {};
        this.parse();
    }
    /* eslint-disable camelcase */
    /* the function names here disobey camelCase conventions
     to make parsing/routing easier. see the parse function
     documentation for more information. */
    /**
     * Creates a new Material object and adds to the registry.
     * @param tokens the tokens associated with the directive
     */
    parse_newmtl(tokens) {
        const name = tokens[0];
        // console.info('Parsing new Material:', name);
        this.currentMaterial = new Material(name);
        this.materials[name] = this.currentMaterial;
    }
    /**
     * See the documenation for parse_Ka below for a better understanding.
     *
     * Given a list of possible color tokens, returns an array of R, G, and B
     * color values.
     *
     * @param tokens the tokens associated with the directive
     * @return {*} a 3 element array containing the R, G, and B values
     * of the color.
     */
    parseColor(tokens) {
        if (tokens[0] == "spectral") {
            throw new Error("The MTL parser does not support spectral curve files. You will " +
                "need to convert the MTL colors to either RGB or CIEXYZ.");
        }
        if (tokens[0] == "xyz") {
            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +
                "XYZ values to RGB or create an issue to add support for XYZ");
        }
        // from my understanding of the spec, RGB values at this point
        // will either be 3 floats or exactly 1 float, so that's the check
        // that i'm going to perform here
        if (tokens.length == 3) {
            const [x, y, z] = tokens;
            return [parseFloat(x), parseFloat(y), parseFloat(z)];
        }
        // Since tokens at this point has a length of 3, we're going to assume
        // it's exactly 1, skipping the check for 2.
        const value = parseFloat(tokens[0]);
        // in this case, all values are equivalent
        return [value, value, value];
    }
    /**
     * Parse the ambient reflectivity
     *
     * A Ka directive can take one of three forms:
     *   - Ka r g b
     *   - Ka spectral file.rfl
     *   - Ka xyz x y z
     * These three forms are mutually exclusive in that only one
     * declaration can exist per material. It is considered a syntax
     * error otherwise.
     *
     * The "Ka" form specifies the ambient reflectivity using RGB values.
     * The "g" and "b" values are optional. If only the "r" value is
     * specified, then the "g" and "b" values are assigned the value of
     * "r". Values are normally in the range 0.0 to 1.0. Values outside
     * of this range increase or decrease the reflectivity accordingly.
     *
     * The "Ka spectral" form specifies the ambient reflectivity using a
     * spectral curve. "file.rfl" is the name of the ".rfl" file containing
     * the curve data. "factor" is an optional argument which is a multiplier
     * for the values in the .rfl file and defaults to 1.0 if not specified.
     *
     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.
     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments
     * are optional and take on the value of the "x" component if only "x" is
     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and
     * increase or decrease ambient reflectivity accordingly outside of that
     * range.
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Ka(tokens) {
        this.currentMaterial.ambient = this.parseColor(tokens);
    }
    /**
     * Diffuse Reflectivity
     *
     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules
     * are the same
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Kd(tokens) {
        this.currentMaterial.diffuse = this.parseColor(tokens);
    }
    /**
     * Spectral Reflectivity
     *
     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules
     * are the same
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Ks(tokens) {
        this.currentMaterial.specular = this.parseColor(tokens);
    }
    /**
     * Emissive
     *
     * The amount and color of light emitted by the object.
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Ke(tokens) {
        this.currentMaterial.emissive = this.parseColor(tokens);
    }
    /**
     * Transmission Filter
     *
     * Any light passing through the object is filtered by the transmission
     * filter, which only allows specific colors to pass through. For example, Tf
     * 0 1 0 allows all of the green to pass through and filters out all of the
     * red and blue.
     *
     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules
     * are the same
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Tf(tokens) {
        this.currentMaterial.transmissionFilter = this.parseColor(tokens);
    }
    /**
     * Specifies the dissolve for the current material.
     *
     * Statement: d [-halo] \`factor\`
     *
     * Example: "d 0.5"
     *
     * The factor is the amount this material dissolves into the background. A
     * factor of 1.0 is fully opaque. This is the default when a new material is
     * created. A factor of 0.0 is fully dissolved (completely transparent).
     *
     * Unlike a real transparent material, the dissolve does not depend upon
     * material thickness nor does it have any spectral character. Dissolve works
     * on all illumination models.
     *
     * The dissolve statement allows for an optional "-halo" flag which indicates
     * that a dissolve is dependent on the surface orientation relative to the
     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",
     * will be fully dissolved at its center and will appear gradually more opaque
     * toward its edge.
     *
     * "factor" is the minimum amount of dissolve applied to the material. The
     * amount of dissolve will vary between 1.0 (fully opaque) and the specified
     * "factor". The formula is:
     *
     *    dissolve = 1.0 - (N*v)(1.0-factor)
     *
     * @param tokens the tokens associated with the directive
     */
    parse_d(tokens) {
        // this ignores the -halo option as I can't find any documentation on what
        // it's supposed to be.
        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");
    }
    /**
     * The "illum" statement specifies the illumination model to use in the
     * material. Illumination models are mathematical equations that represent
     * various material lighting and shading effects.
     *
     * The illumination number can be a number from 0 to 10. The following are
     * the list of illumination enumerations and their summaries:
     * 0. Color on and Ambient off
     * 1. Color on and Ambient on
     * 2. Highlight on
     * 3. Reflection on and Ray trace on
     * 4. Transparency: Glass on, Reflection: Ray trace on
     * 5. Reflection: Fresnel on and Ray trace on
     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on
     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on
     * 8. Reflection on and Ray trace off
     * 9. Transparency: Glass on, Reflection: Ray trace off
     * 10. Casts shadows onto invisible surfaces
     *
     * Example: "illum 2" to specify the "Highlight on" model
     *
     * @param tokens the tokens associated with the directive
     */
    parse_illum(tokens) {
        this.currentMaterial.illumination = parseInt(tokens[0]);
    }
    /**
     * Optical Density (AKA Index of Refraction)
     *
     * Statement: Ni \`index\`
     *
     * Example: Ni 1.0
     *
     * Specifies the optical density for the surface. \`index\` is the value
     * for the optical density. The values can range from 0.001 to 10.  A value of
     * 1.0 means that light does not bend as it passes through an object.
     * Increasing the optical_density increases the amount of bending. Glass has
     * an index of refraction of about 1.5. Values of less than 1.0 produce
     * bizarre results and are not recommended
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Ni(tokens) {
        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);
    }
    /**
     * Specifies the specular exponent for the current material. This defines the
     * focus of the specular highlight.
     *
     * Statement: Ns \`exponent\`
     *
     * Example: "Ns 250"
     *
     * \`exponent\` is the value for the specular exponent. A high exponent results
     * in a tight, concentrated highlight. Ns Values normally range from 0 to
     * 1000.
     *
     * @param tokens the tokens associated with the directive
     */
    parse_Ns(tokens) {
        this.currentMaterial.specularExponent = parseInt(tokens[0]);
    }
    /**
     * Specifies the sharpness of the reflections from the local reflection map.
     *
     * Statement: sharpness \`value\`
     *
     * Example: "sharpness 100"
     *
     * If a material does not have a local reflection map defined in its material
     * defintions, sharpness will apply to the global reflection map defined in
     * PreView.
     *
     * \`value\` can be a number from 0 to 1000. The default is 60. A high value
     * results in a clear reflection of objects in the reflection map.
     *
     * Tip: sharpness values greater than 100 introduce aliasing effects in
     * flat surfaces that are viewed at a sharp angle.
     *
     * @param tokens the tokens associated with the directive
     */
    parse_sharpness(tokens) {
        this.currentMaterial.sharpness = parseInt(tokens[0]);
    }
    /**
     * Parses the -cc flag and updates the options object with the values.
     *
     * @param values the values passed to the -cc flag
     * @param options the Object of all image options
     */
    parse_cc(values, options) {
        options.colorCorrection = values[0] == "on";
    }
    /**
     * Parses the -blendu flag and updates the options object with the values.
     *
     * @param values the values passed to the -blendu flag
     * @param options the Object of all image options
     */
    parse_blendu(values, options) {
        options.horizontalBlending = values[0] == "on";
    }
    /**
     * Parses the -blendv flag and updates the options object with the values.
     *
     * @param values the values passed to the -blendv flag
     * @param options the Object of all image options
     */
    parse_blendv(values, options) {
        options.verticalBlending = values[0] == "on";
    }
    /**
     * Parses the -boost flag and updates the options object with the values.
     *
     * @param values the values passed to the -boost flag
     * @param options the Object of all image options
     */
    parse_boost(values, options) {
        options.boostMipMapSharpness = parseFloat(values[0]);
    }
    /**
     * Parses the -mm flag and updates the options object with the values.
     *
     * @param values the values passed to the -mm flag
     * @param options the Object of all image options
     */
    parse_mm(values, options) {
        options.modifyTextureMap.brightness = parseFloat(values[0]);
        options.modifyTextureMap.contrast = parseFloat(values[1]);
    }
    /**
     * Parses and sets the -o, -s, and -t  u, v, and w values
     *
     * @param values the values passed to the -o, -s, -t flag
     * @param {Object} option the Object of either the -o, -s, -t option
     * @param {Integer} defaultValue the Object of all image options
     */
    parse_ost(values, option, defaultValue) {
        while (values.length < 3) {
            values.push(defaultValue.toString());
        }
        option.u = parseFloat(values[0]);
        option.v = parseFloat(values[1]);
        option.w = parseFloat(values[2]);
    }
    /**
     * Parses the -o flag and updates the options object with the values.
     *
     * @param values the values passed to the -o flag
     * @param options the Object of all image options
     */
    parse_o(values, options) {
        this.parse_ost(values, options.offset, 0);
    }
    /**
     * Parses the -s flag and updates the options object with the values.
     *
     * @param values the values passed to the -s flag
     * @param options the Object of all image options
     */
    parse_s(values, options) {
        this.parse_ost(values, options.scale, 1);
    }
    /**
     * Parses the -t flag and updates the options object with the values.
     *
     * @param values the values passed to the -t flag
     * @param options the Object of all image options
     */
    parse_t(values, options) {
        this.parse_ost(values, options.turbulence, 0);
    }
    /**
     * Parses the -texres flag and updates the options object with the values.
     *
     * @param values the values passed to the -texres flag
     * @param options the Object of all image options
     */
    parse_texres(values, options) {
        options.textureResolution = parseFloat(values[0]);
    }
    /**
     * Parses the -clamp flag and updates the options object with the values.
     *
     * @param values the values passed to the -clamp flag
     * @param options the Object of all image options
     */
    parse_clamp(values, options) {
        options.clamp = values[0] == "on";
    }
    /**
     * Parses the -bm flag and updates the options object with the values.
     *
     * @param values the values passed to the -bm flag
     * @param options the Object of all image options
     */
    parse_bm(values, options) {
        options.bumpMultiplier = parseFloat(values[0]);
    }
    /**
     * Parses the -imfchan flag and updates the options object with the values.
     *
     * @param values the values passed to the -imfchan flag
     * @param options the Object of all image options
     */
    parse_imfchan(values, options) {
        options.imfChan = values[0];
    }
    /**
     * This only exists for relection maps and denotes the type of reflection.
     *
     * @param values the values passed to the -type flag
     * @param options the Object of all image options
     */
    parse_type(values, options) {
        options.reflectionType = values[0];
    }
    /**
     * Parses the texture's options and returns an options object with the info
     *
     * @param tokens all of the option tokens to pass to the texture
     * @return {Object} a complete object of objects to apply to the texture
     */
    parseOptions(tokens) {
        const options = emptyTextureOptions();
        let option;
        let values;
        const optionsToValues = {};
        tokens.reverse();
        while (tokens.length) {
            // token is guaranteed to exists here, hence the explicit "as"
            const token = tokens.pop();
            if (token.startsWith("-")) {
                option = token.substr(1);
                optionsToValues[option] = [];
            }
            else if (option) {
                optionsToValues[option].push(token);
            }
        }
        for (option in optionsToValues) {
            if (!optionsToValues.hasOwnProperty(option)) {
                continue;
            }
            values = optionsToValues[option];
            const optionMethod = this[\`parse_\${option}\`];
            if (optionMethod) {
                optionMethod.bind(this)(values, options);
            }
        }
        return options;
    }
    /**
     * Parses the given texture map line.
     *
     * @param tokens all of the tokens representing the texture
     * @return a complete object of objects to apply to the texture
     */
    parseMap(tokens) {
        // according to wikipedia:
        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)
        // there is at least one vendor that places the filename before the options
        // rather than after (which is to spec). All options start with a '-'
        // so if the first token doesn't start with a '-', we're going to assume
        // it's the name of the map file.
        let optionsString;
        let filename = "";
        if (!tokens[0].startsWith("-")) {
            [filename, ...optionsString] = tokens;
        }
        else {
            filename = tokens.pop();
            optionsString = tokens;
        }
        const options = this.parseOptions(optionsString);
        options.filename = filename.replace(/\\\\/g, "/");
        return options;
    }
    /**
     * Parses the ambient map.
     *
     * @param tokens list of tokens for the map_Ka direcive
     */
    parse_map_Ka(tokens) {
        this.currentMaterial.mapAmbient = this.parseMap(tokens);
    }
    /**
     * Parses the diffuse map.
     *
     * @param tokens list of tokens for the map_Kd direcive
     */
    parse_map_Kd(tokens) {
        this.currentMaterial.mapDiffuse = this.parseMap(tokens);
    }
    /**
     * Parses the specular map.
     *
     * @param tokens list of tokens for the map_Ks direcive
     */
    parse_map_Ks(tokens) {
        this.currentMaterial.mapSpecular = this.parseMap(tokens);
    }
    /**
     * Parses the emissive map.
     *
     * @param tokens list of tokens for the map_Ke direcive
     */
    parse_map_Ke(tokens) {
        this.currentMaterial.mapEmissive = this.parseMap(tokens);
    }
    /**
     * Parses the specular exponent map.
     *
     * @param tokens list of tokens for the map_Ns direcive
     */
    parse_map_Ns(tokens) {
        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);
    }
    /**
     * Parses the dissolve map.
     *
     * @param tokens list of tokens for the map_d direcive
     */
    parse_map_d(tokens) {
        this.currentMaterial.mapDissolve = this.parseMap(tokens);
    }
    /**
     * Parses the anti-aliasing option.
     *
     * @param tokens list of tokens for the map_aat direcive
     */
    parse_map_aat(tokens) {
        this.currentMaterial.antiAliasing = tokens[0] == "on";
    }
    /**
     * Parses the bump map.
     *
     * @param tokens list of tokens for the map_bump direcive
     */
    parse_map_bump(tokens) {
        this.currentMaterial.mapBump = this.parseMap(tokens);
    }
    /**
     * Parses the bump map.
     *
     * @param tokens list of tokens for the bump direcive
     */
    parse_bump(tokens) {
        this.parse_map_bump(tokens);
    }
    /**
     * Parses the disp map.
     *
     * @param tokens list of tokens for the disp direcive
     */
    parse_disp(tokens) {
        this.currentMaterial.mapDisplacement = this.parseMap(tokens);
    }
    /**
     * Parses the decal map.
     *
     * @param tokens list of tokens for the map_decal direcive
     */
    parse_decal(tokens) {
        this.currentMaterial.mapDecal = this.parseMap(tokens);
    }
    /**
     * Parses the refl map.
     *
     * @param tokens list of tokens for the refl direcive
     */
    parse_refl(tokens) {
        this.currentMaterial.mapReflections.push(this.parseMap(tokens));
    }
    /**
     * Parses the MTL file.
     *
     * Iterates line by line parsing each MTL directive.
     *
     * This function expects the first token in the line
     * to be a valid MTL directive. That token is then used
     * to try and run a method on this class. parse_[directive]
     * E.g., the \`newmtl\` directive would try to call the method
     * parse_newmtl. Each parsing function takes in the remaining
     * list of tokens and updates the currentMaterial class with
     * the attributes provided.
     */
    parse() {
        const lines = this.data.split(/\\r?\\n/);
        for (let line of lines) {
            line = line.trim();
            if (!line || line.startsWith("#")) {
                continue;
            }
            const [directive, ...tokens] = line.split(/\\s/);
            const parseMethod = this[\`parse_\${directive}\`];
            if (!parseMethod) {
                console.warn(\`Don't know how to parse the directive: "\${directive}"\`);
                continue;
            }
            // console.log(\`Parsing "\${directive}" with tokens: \${tokens}\`);
            parseMethod.bind(this)(tokens);
        }
        // some cleanup. These don't need to be exposed as public data.
        delete this.data;
        this.currentMaterial = SENTINEL_MATERIAL;
    }
}
function emptyTextureOptions() {
    return {
        colorCorrection: false,
        horizontalBlending: true,
        verticalBlending: true,
        boostMipMapSharpness: 0,
        modifyTextureMap: {
            brightness: 0,
            contrast: 1,
        },
        offset: { u: 0, v: 0, w: 0 },
        scale: { u: 1, v: 1, w: 1 },
        turbulence: { u: 0, v: 0, w: 0 },
        clamp: false,
        textureResolution: null,
        bumpMultiplier: 1,
        imfChan: null,
        filename: "",
    };
}


//# sourceURL=webpack:///./src/material.ts?`)},"./src/mesh.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");

/**
 * The main Mesh class. The constructor will parse through the OBJ file data
 * and collect the vertex, vertex normal, texture, and face information. This
 * information can then be used later on when creating your VBOs. See
 * OBJ.initMeshBuffers for an example of how to use the newly created Mesh
 */
class Mesh {
    /**
     * Create a Mesh
     * @param {String} objectData - a string representation of an OBJ file with
     *     newlines preserved.
     * @param {Object} options - a JS object containing valid options. See class
     *     documentation for options.
     * @param {bool} options.enableWTextureCoord - Texture coordinates can have
     *     an optional "w" coordinate after the u and v coordinates. This extra
     *     value can be used in order to perform fancy transformations on the
     *     textures themselves. Default is to truncate to only the u an v
     *     coordinates. Passing true will provide a default value of 0 in the
     *     event that any or all texture coordinates don't provide a w value.
     *     Always use the textureStride attribute in order to determine the
     *     stride length of the texture coordinates when rendering the element
     *     array.
     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents
     *     and bitangents when loading of the OBJ is completed. This adds two new
     *     attributes to the Mesh instance: \`tangents\` and \`bitangents\`.
     */
    constructor(objectData, options) {
        this.name = "";
        this.indicesPerMaterial = [];
        this.materialsByIndex = {};
        this.tangents = [];
        this.bitangents = [];
        options = options || {};
        options.materials = options.materials || {};
        options.enableWTextureCoord = !!options.enableWTextureCoord;
        // the list of unique vertex, normal, texture, attributes
        this.vertexNormals = [];
        this.textures = [];
        // the indicies to draw the faces
        this.indices = [];
        this.textureStride = options.enableWTextureCoord ? 3 : 2;
        /*
        The OBJ file format does a sort of compression when saving a model in a
        program like Blender. There are at least 3 sections (4 including textures)
        within the file. Each line in a section begins with the same string:
          * 'v': indicates vertex section
          * 'vn': indicates vertex normal section
          * 'f': indicates the faces section
          * 'vt': indicates vertex texture section (if textures were used on the model)
        Each of the above sections (except for the faces section) is a list/set of
        unique vertices.

        Each line of the faces section contains a list of
        (vertex, [texture], normal) groups.

        **Note:** The following documentation will use a capital "V" Vertex to
        denote the above (vertex, [texture], normal) groups whereas a lowercase
        "v" vertex is used to denote an X, Y, Z coordinate.

        Some examples:
            // the texture index is optional, both formats are possible for models
            // without a texture applied
            f 1/25 18/46 12/31
            f 1//25 18//46 12//31

            // A 3 vertex face with texture indices
            f 16/92/11 14/101/22 1/69/1

            // A 4 vertex face
            f 16/92/11 40/109/40 38/114/38 14/101/22

        The first two lines are examples of a 3 vertex face without a texture applied.
        The second is an example of a 3 vertex face with a texture applied.
        The third is an example of a 4 vertex face. Note: a face can contain N
        number of vertices.

        Each number that appears in one of the groups is a 1-based index
        corresponding to an item from the other sections (meaning that indexing
        starts at one and *not* zero).

        For example:
            \`f 16/92/11\` is saying to
              - take the 16th element from the [v] vertex array
              - take the 92nd element from the [vt] texture array
              - take the 11th element from the [vn] normal array
            and together they make a unique vertex.
        Using all 3+ unique Vertices from the face line will produce a polygon.

        Now, you could just go through the OBJ file and create a new vertex for
        each face line and WebGL will draw what appears to be the same model.
        However, vertices will be overlapped and duplicated all over the place.

        Consider a cube in 3D space centered about the origin and each side is
        2 units long. The front face (with the positive Z-axis pointing towards
        you) would have a Top Right vertex (looking orthogonal to its normal)
        mapped at (1,1,1) The right face would have a Top Left vertex (looking
        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom
        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face
        has a vertex at the same coordinates, however, three distinct vertices
        will be drawn at the same spot.

        To solve the issue of duplicate Vertices (the \`(vertex, [texture], normal)\`
        groups), while iterating through the face lines, when a group is encountered
        the whole group string ('16/92/11') is checked to see if it exists in the
        packed.hashindices object, and if it doesn't, the indices it specifies
        are used to look up each attribute in the corresponding attribute arrays
        already created. The values are then copied to the corresponding unpacked
        array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),
        the group string is added to the hashindices set and the current unpacked
        index is used as this hashindices value so that the group of elements can
        be reused. The unpacked index is incremented. If the group string already
        exists in the hashindices object, its corresponding value is the index of
        that group and is appended to the unpacked indices array.
       */
        const verts = [];
        const vertNormals = [];
        const textures = [];
        const materialNamesByIndex = [];
        const materialIndicesByName = {};
        // keep track of what material we've seen last
        let currentMaterialIndex = -1;
        let currentObjectByMaterialIndex = 0;
        // unpacking stuff
        const unpacked = {
            verts: [],
            norms: [],
            textures: [],
            hashindices: {},
            indices: [[]],
            materialIndices: [],
            index: 0,
        };
        const VERTEX_RE = /^v\\s/;
        const NORMAL_RE = /^vn\\s/;
        const TEXTURE_RE = /^vt\\s/;
        const FACE_RE = /^f\\s/;
        const WHITESPACE_RE = /\\s+/;
        const USE_MATERIAL_RE = /^usemtl/;
        // array of lines separated by the newline
        const lines = objectData.split("\\n");
        for (let line of lines) {
            line = line.trim();
            if (!line || line.startsWith("#")) {
                continue;
            }
            const elements = line.split(WHITESPACE_RE);
            elements.shift();
            if (VERTEX_RE.test(line)) {
                // if this is a vertex
                verts.push(...elements);
            }
            else if (NORMAL_RE.test(line)) {
                // if this is a vertex normal
                vertNormals.push(...elements);
            }
            else if (TEXTURE_RE.test(line)) {
                let coords = elements;
                // by default, the loader will only look at the U and V
                // coordinates of the vt declaration. So, this truncates the
                // elements to only those 2 values. If W texture coordinate
                // support is enabled, then the texture coordinate is
                // expected to have three values in it.
                if (elements.length > 2 && !options.enableWTextureCoord) {
                    coords = elements.slice(0, 2);
                }
                else if (elements.length === 2 && options.enableWTextureCoord) {
                    // If for some reason W texture coordinate support is enabled
                    // and only the U and V coordinates are given, then we supply
                    // the default value of 0 so that the stride length is correct
                    // when the textures are unpacked below.
                    coords.push("0");
                }
                textures.push(...coords);
            }
            else if (USE_MATERIAL_RE.test(line)) {
                const materialName = elements[0];
                // check to see if we've ever seen it before
                if (!(materialName in materialIndicesByName)) {
                    // new material we've never seen
                    materialNamesByIndex.push(materialName);
                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;
                    // push new array into indices
                    // already contains an array at index zero, don't add
                    if (materialIndicesByName[materialName] > 0) {
                        unpacked.indices.push([]);
                    }
                }
                // keep track of the current material index
                currentMaterialIndex = materialIndicesByName[materialName];
                // update current index array
                currentObjectByMaterialIndex = currentMaterialIndex;
            }
            else if (FACE_RE.test(line)) {
                // if this is a face
                /*
                split this face into an array of Vertex groups
                for example:
                   f 16/92/11 14/101/22 1/69/1
                becomes:
                  ['16/92/11', '14/101/22', '1/69/1'];
                */
                const triangles = triangulate(elements);
                for (const triangle of triangles) {
                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {
                        const hash = triangle[j] + "," + currentMaterialIndex;
                        if (hash in unpacked.hashindices) {
                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                        }
                        else {
                            /*
                        Each element of the face line array is a Vertex which has its
                        attributes delimited by a forward slash. This will separate
                        each attribute into another array:
                            '19/92/11'
                        becomes:
                            Vertex = ['19', '92', '11'];
                        where
                            Vertex[0] is the vertex index
                            Vertex[1] is the texture index
                            Vertex[2] is the normal index
                         Think of faces having Vertices which are comprised of the
                         attributes location (v), texture (vt), and normal (vn).
                         */
                            const vertex = triangle[j].split("/");
                            // it's possible for faces to only specify the vertex
                            // and the normal. In this case, vertex will only have
                            // a length of 2 and not 3 and the normal will be the
                            // second item in the list with an index of 1.
                            const normalIndex = vertex.length - 1;
                            /*
                         The verts, textures, and vertNormals arrays each contain a
                         flattend array of coordinates.

                         Because it gets confusing by referring to Vertex and then
                         vertex (both are different in my descriptions) I will explain
                         what's going on using the vertexNormals array:

                         vertex[2] will contain the one-based index of the vertexNormals
                         section (vn). One is subtracted from this index number to play
                         nice with javascript's zero-based array indexing.

                         Because vertexNormal is a flattened array of x, y, z values,
                         simple pointer arithmetic is used to skip to the start of the
                         vertexNormal, then the offset is added to get the correct
                         component: +0 is x, +1 is y, +2 is z.

                         This same process is repeated for verts and textures.
                         */
                            // Vertex position
                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);
                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);
                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);
                            // Vertex textures
                            if (textures.length) {
                                const stride = options.enableWTextureCoord ? 3 : 2;
                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);
                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);
                                if (options.enableWTextureCoord) {
                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);
                                }
                            }
                            // Vertex normals
                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);
                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);
                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);
                            // Vertex material indices
                            unpacked.materialIndices.push(currentMaterialIndex);
                            // add the newly created Vertex to the list of indices
                            unpacked.hashindices[hash] = unpacked.index;
                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                            // increment the counter
                            unpacked.index += 1;
                        }
                    }
                }
            }
        }
        this.vertices = unpacked.verts;
        this.vertexNormals = unpacked.norms;
        this.textures = unpacked.textures;
        this.vertexMaterialIndices = unpacked.materialIndices;
        this.indices = unpacked.indices[currentObjectByMaterialIndex];
        this.indicesPerMaterial = unpacked.indices;
        this.materialNames = materialNamesByIndex;
        this.materialIndices = materialIndicesByName;
        this.materialsByIndex = {};
        if (options.calcTangentsAndBitangents) {
            this.calculateTangentsAndBitangents();
        }
    }
    /**
     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the
     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix
     * when distorting the normals through normal maps.
     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/
     *
     * This method requires the normals and texture coordinates to be parsed and set up correctly.
     * Adds the tangents and bitangents as members of the class instance.
     */
    calculateTangentsAndBitangents() {
        console.assert(!!(this.vertices &&
            this.vertices.length &&
            this.vertexNormals &&
            this.vertexNormals.length &&
            this.textures &&
            this.textures.length), "Missing attributes for calculating tangents and bitangents");
        const unpacked = {
            tangents: [...new Array(this.vertices.length)].map(_ => 0),
            bitangents: [...new Array(this.vertices.length)].map(_ => 0),
        };
        // Loop through all faces in the whole mesh
        const indices = this.indices;
        const vertices = this.vertices;
        const normals = this.vertexNormals;
        const uvs = this.textures;
        for (let i = 0; i < indices.length; i += 3) {
            const i0 = indices[i + 0];
            const i1 = indices[i + 1];
            const i2 = indices[i + 2];
            const x_v0 = vertices[i0 * 3 + 0];
            const y_v0 = vertices[i0 * 3 + 1];
            const z_v0 = vertices[i0 * 3 + 2];
            const x_uv0 = uvs[i0 * 2 + 0];
            const y_uv0 = uvs[i0 * 2 + 1];
            const x_v1 = vertices[i1 * 3 + 0];
            const y_v1 = vertices[i1 * 3 + 1];
            const z_v1 = vertices[i1 * 3 + 2];
            const x_uv1 = uvs[i1 * 2 + 0];
            const y_uv1 = uvs[i1 * 2 + 1];
            const x_v2 = vertices[i2 * 3 + 0];
            const y_v2 = vertices[i2 * 3 + 1];
            const z_v2 = vertices[i2 * 3 + 2];
            const x_uv2 = uvs[i2 * 2 + 0];
            const y_uv2 = uvs[i2 * 2 + 1];
            const x_deltaPos1 = x_v1 - x_v0;
            const y_deltaPos1 = y_v1 - y_v0;
            const z_deltaPos1 = z_v1 - z_v0;
            const x_deltaPos2 = x_v2 - x_v0;
            const y_deltaPos2 = y_v2 - y_v0;
            const z_deltaPos2 = z_v2 - z_v0;
            const x_uvDeltaPos1 = x_uv1 - x_uv0;
            const y_uvDeltaPos1 = y_uv1 - y_uv0;
            const x_uvDeltaPos2 = x_uv2 - x_uv0;
            const y_uvDeltaPos2 = y_uv2 - y_uv0;
            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;
            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);
            // Tangent
            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;
            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;
            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;
            // Bitangent
            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;
            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;
            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;
            // Gram-Schmidt orthogonalize
            //t = glm::normalize(t - n * glm:: dot(n, t));
            const x_n0 = normals[i0 * 3 + 0];
            const y_n0 = normals[i0 * 3 + 1];
            const z_n0 = normals[i0 * 3 + 2];
            const x_n1 = normals[i1 * 3 + 0];
            const y_n1 = normals[i1 * 3 + 1];
            const z_n1 = normals[i1 * 3 + 2];
            const x_n2 = normals[i2 * 3 + 0];
            const y_n2 = normals[i2 * 3 + 1];
            const z_n2 = normals[i2 * 3 + 2];
            // Tangent
            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;
            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;
            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;
            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;
            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;
            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;
            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;
            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;
            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;
            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;
            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;
            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;
            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);
            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);
            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);
            // Bitangent
            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;
            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;
            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;
            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;
            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;
            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;
            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;
            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;
            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;
            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;
            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;
            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;
            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +
                y_resBitangent0 * y_resBitangent0 +
                z_resBitangent0 * z_resBitangent0);
            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +
                y_resBitangent1 * y_resBitangent1 +
                z_resBitangent1 * z_resBitangent1);
            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +
                y_resBitangent2 * y_resBitangent2 +
                z_resBitangent2 * z_resBitangent2);
            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;
            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;
            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;
            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;
            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;
            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;
            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;
            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;
            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;
            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;
            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;
            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;
            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;
            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;
            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;
            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;
            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;
            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;
            // TODO: check handedness
        }
        this.tangents = unpacked.tangents;
        this.bitangents = unpacked.bitangents;
    }
    /**
     * @param layout - A {@link Layout} object that describes the
     * desired memory layout of the generated buffer
     * @return The packed array in the ... TODO
     */
    makeBufferData(layout) {
        const numItems = this.vertices.length / 3;
        const buffer = new ArrayBuffer(layout.stride * numItems);
        buffer.numItems = numItems;
        const dataView = new DataView(buffer);
        for (let i = 0, vertexOffset = 0; i < numItems; i++) {
            vertexOffset = i * layout.stride;
            // copy in the vertex data in the order and format given by the
            // layout param
            for (const attribute of layout.attributes) {
                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;
                switch (attribute.key) {
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:
                        dataView.setFloat32(offset, this.vertices[i * 3], true);
                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);
                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);
                        break;
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:
                        dataView.setFloat32(offset, this.textures[i * 2], true);
                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);
                        break;
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:
                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);
                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);
                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);
                        break;
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:
                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);
                        break;
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.ambient[0], true);
                        dataView.setFloat32(offset + 4, material.ambient[1], true);
                        dataView.setFloat32(offset + 8, material.ambient[2], true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.diffuse[0], true);
                        dataView.setFloat32(offset + 4, material.diffuse[1], true);
                        dataView.setFloat32(offset + 8, material.diffuse[2], true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.specular[0], true);
                        dataView.setFloat32(offset + 4, material.specular[1], true);
                        dataView.setFloat32(offset + 8, material.specular[2], true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.specularExponent, true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.emissive[0], true);
                        dataView.setFloat32(offset + 4, material.emissive[1], true);
                        dataView.setFloat32(offset + 8, material.emissive[2], true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.transmissionFilter[0], true);
                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);
                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.dissolve, true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setInt16(offset, material.illumination, true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.refractionIndex, true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setFloat32(offset, material.sharpness, true);
                        break;
                    }
                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {
                        const materialIndex = this.vertexMaterialIndices[i];
                        const material = this.materialsByIndex[materialIndex];
                        if (!material) {
                            console.warn('Material "' +
                                this.materialNames[materialIndex] +
                                '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                            break;
                        }
                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);
                        break;
                    }
                }
            }
        }
        return buffer;
    }
    makeIndexBufferData() {
        const buffer = new Uint16Array(this.indices);
        buffer.numItems = this.indices.length;
        return buffer;
    }
    makeIndexBufferDataForMaterials(...materialIndices) {
        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));
        const buffer = new Uint16Array(indices);
        buffer.numItems = indices.length;
        return buffer;
    }
    addMaterialLibrary(mtl) {
        for (const name in mtl.materials) {
            if (!(name in this.materialIndices)) {
                // This material is not referenced by the mesh
                continue;
            }
            const material = mtl.materials[name];
            // Find the material index for this material
            const materialIndex = this.materialIndices[material.name];
            // Put the material into the materialsByIndex object at the right
            // spot as determined when the obj file was parsed
            this.materialsByIndex[materialIndex] = material;
        }
    }
}
function* triangulate(elements) {
    if (elements.length <= 3) {
        yield elements;
    }
    else if (elements.length === 4) {
        yield [elements[0], elements[1], elements[2]];
        yield [elements[2], elements[3], elements[0]];
    }
    else {
        for (let i = 1; i < elements.length - 1; i++) {
            yield [elements[0], elements[i], elements[i + 1]];
        }
    }
}


//# sourceURL=webpack:///./src/mesh.ts?`)},"./src/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });
/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");
/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");


function downloadMtlTextures(mtl, root) {
    const mapAttributes = [
        "mapDiffuse",
        "mapAmbient",
        "mapSpecular",
        "mapDissolve",
        "mapBump",
        "mapDisplacement",
        "mapDecal",
        "mapEmissive",
    ];
    if (!root.endsWith("/")) {
        root += "/";
    }
    const textures = [];
    for (const materialName in mtl.materials) {
        if (!mtl.materials.hasOwnProperty(materialName)) {
            continue;
        }
        const material = mtl.materials[materialName];
        for (const attr of mapAttributes) {
            const mapData = material[attr];
            if (!mapData || !mapData.filename) {
                continue;
            }
            const url = root + mapData.filename;
            textures.push(fetch(url)
                .then(response => {
                if (!response.ok) {
                    throw new Error();
                }
                return response.blob();
            })
                .then(function (data) {
                const image = new Image();
                image.src = URL.createObjectURL(data);
                mapData.texture = image;
                return new Promise(resolve => (image.onload = resolve));
            })
                .catch(() => {
                console.error(\`Unable to download texture: \${url}\`);
            }));
        }
    }
    return Promise.all(textures);
}
function getMtl(modelOptions) {
    if (!(typeof modelOptions.mtl === "string")) {
        return modelOptions.obj.replace(/\\.obj$/, ".mtl");
    }
    return modelOptions.mtl;
}
/**
 * Accepts a list of model request objects and returns a Promise that
 * resolves when all models have been downloaded and parsed.
 *
 * The list of model objects follow this interface:
 * {
 *  obj: 'path/to/model.obj',
 *  mtl: true | 'path/to/model.mtl',
 *  downloadMtlTextures: true | false
 *  mtlTextureRoot: '/models/suzanne/maps'
 *  name: 'suzanne'
 * }
 *
 * The \`obj\` attribute is required and should be the path to the
 * model's .obj file relative to the current repo (absolute URLs are
 * suggested).
 *
 * The \`mtl\` attribute is optional and can either be a boolean or
 * a path to the model's .mtl file relative to the current URL. If
 * the value is \`true\`, then the path and basename given for the \`obj\`
 * attribute is used replacing the .obj suffix for .mtl
 * E.g.: {obj: 'models/foo.obj', mtl: true} would search for 'models/foo.mtl'
 *
 * The \`name\` attribute is optional and is a human friendly name to be
 * included with the parsed OBJ and MTL files. If not given, the base .obj
 * filename will be used.
 *
 * The \`downloadMtlTextures\` attribute is a flag for automatically downloading
 * any images found in the MTL file and attaching them to each Material
 * created from that file. For example, if material.mapDiffuse is set (there
 * was data in the MTL file), then material.mapDiffuse.texture will contain
 * the downloaded image. This option defaults to \`true\`. By default, the MTL's
 * URL will be used to determine the location of the images.
 *
 * The \`mtlTextureRoot\` attribute is optional and should point to the location
 * on the server that this MTL's texture files are located. The default is to
 * use the MTL file's location.
 *
 * @returns {Promise} the result of downloading the given list of models. The
 * promise will resolve with an object whose keys are the names of the models
 * and the value is its Mesh object. Each Mesh object will automatically
 * have its addMaterialLibrary() method called to set the given MTL data (if given).
 */
function downloadModels(models) {
    const finished = [];
    for (const model of models) {
        if (!model.obj) {
            throw new Error('"obj" attribute of model object not set. The .obj file is required to be set ' +
                "in order to use downloadModels()");
        }
        const options = {
            indicesPerMaterial: !!model.indicesPerMaterial,
            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,
        };
        // if the name is not provided, dervive it from the given OBJ
        let name = model.name;
        if (!name) {
            const parts = model.obj.split("/");
            name = parts[parts.length - 1].replace(".obj", "");
        }
        const namePromise = Promise.resolve(name);
        const meshPromise = fetch(model.obj)
            .then(response => response.text())
            .then(data => {
            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);
        });
        let mtlPromise;
        // Download MaterialLibrary file?
        if (model.mtl) {
            const mtl = getMtl(model);
            mtlPromise = fetch(mtl)
                .then(response => response.text())
                .then((data) => {
                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);
                if (model.downloadMtlTextures !== false) {
                    let root = model.mtlTextureRoot;
                    if (!root) {
                        // get the directory of the MTL file as default
                        root = mtl.substr(0, mtl.lastIndexOf("/"));
                    }
                    // downloadMtlTextures returns a Promise that
                    // is resolved once all of the images it
                    // contains are downloaded. These are then
                    // attached to the map data objects
                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);
                }
                return Promise.all([Promise.resolve(material), undefined]);
            })
                .then((value) => {
                return value[0];
            });
        }
        const parsed = [namePromise, meshPromise, mtlPromise];
        finished.push(Promise.all(parsed));
    }
    return Promise.all(finished).then(ms => {
        // the "finished" promise is a list of name, Mesh instance,
        // and MaterialLibary instance. This unpacks and returns an
        // object mapping name to Mesh (Mesh points to MTL).
        const models = {};
        for (const model of ms) {
            const [name, mesh, mtl] = model;
            mesh.name = name;
            if (mtl) {
                mesh.addMaterialLibrary(mtl);
            }
            models[name] = mesh;
        }
        return models;
    });
}
/**
 * Takes in an object of \`mesh_name\`, \`'/url/to/OBJ/file'\` pairs and a callback
 * function. Each OBJ file will be ajaxed in and automatically converted to
 * an OBJ.Mesh. When all files have successfully downloaded the callback
 * function provided will be called and passed in an object containing
 * the newly created meshes.
 *
 * **Note:** In order to use this function as a way to download meshes, a
 * webserver of some sort must be used.
 *
 * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file
 *
 * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object
 *
 * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }
 *
 */
function downloadMeshes(nameAndURLs, completionCallback, meshes) {
    if (meshes === undefined) {
        meshes = {};
    }
    const completed = [];
    for (const mesh_name in nameAndURLs) {
        if (!nameAndURLs.hasOwnProperty(mesh_name)) {
            continue;
        }
        const url = nameAndURLs[mesh_name];
        completed.push(fetch(url)
            .then(response => response.text())
            .then(data => {
            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];
        }));
    }
    Promise.all(completed).then(ms => {
        for (const [name, mesh] of ms) {
            meshes[name] = mesh;
        }
        return completionCallback(meshes);
    });
}
function _buildBuffer(gl, type, data, itemSize) {
    const buffer = gl.createBuffer();
    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;
    gl.bindBuffer(type, buffer);
    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);
    buffer.itemSize = itemSize;
    buffer.numItems = data.length / itemSize;
    return buffer;
}
/**
 * Takes in the WebGL context and a Mesh, then creates and appends the buffers
 * to the mesh object as attributes.
 *
 * @param {WebGLRenderingContext} gl the \`canvas.getContext('webgl')\` context instance
 * @param {Mesh} mesh a single \`OBJ.Mesh\` instance
 *
 * The newly created mesh attributes are:
 *
 * Attrbute | Description
 * :--- | ---
 * **normalBuffer**       |contains the model&#39;s Vertex Normals
 * normalBuffer.itemSize  |set to 3 items
 * normalBuffer.numItems  |the total number of vertex normals
 * |
 * **textureBuffer**      |contains the model&#39;s Texture Coordinates
 * textureBuffer.itemSize |set to 2 items
 * textureBuffer.numItems |the number of texture coordinates
 * |
 * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)
 * vertexBuffer.itemSize  |set to 3 items
 * vertexBuffer.numItems  |the total number of vertices
 * |
 * **indexBuffer**        |contains the indices of the faces
 * indexBuffer.itemSize   |is set to 1
 * indexBuffer.numItems   |the total number of indices
 *
 * A simple example (a lot of steps are missing, so don't copy and paste):
 *
 *     const gl   = canvas.getContext('webgl'),
 *         mesh = OBJ.Mesh(obj_file_data);
 *     // compile the shaders and create a shader program
 *     const shaderProgram = gl.createProgram();
 *     // compilation stuff here
 *     ...
 *     // make sure you have vertex, vertex normal, and texture coordinate
 *     // attributes located in your shaders and attach them to the shader program
 *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
 *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
 *
 *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
 *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);
 *
 *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
 *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
 *
 *     // create and initialize the vertex, vertex normal, and texture coordinate buffers
 *     // and save on to the mesh object
 *     OBJ.initMeshBuffers(gl, mesh);
 *
 *     // now to render the mesh
 *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);
 *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
 *     // it's possible that the mesh doesn't contain
 *     // any texture coordinates (e.g. suzanne.obj in the development branch).
 *     // in this case, the texture vertexAttribArray will need to be disabled
 *     // before the call to drawElements
 *     if(!mesh.textures.length){
 *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);
 *     }
 *     else{
 *       // if the texture vertexAttribArray has been previously
 *       // disabled, then it needs to be re-enabled
 *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
 *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);
 *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);
 *     }
 *
 *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);
 *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);
 *
 *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);
 *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
 */
function initMeshBuffers(gl, mesh) {
    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);
    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);
    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);
    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);
    return mesh;
}
function deleteMeshBuffers(gl, mesh) {
    gl.deleteBuffer(mesh.normalBuffer);
    gl.deleteBuffer(mesh.textureBuffer);
    gl.deleteBuffer(mesh.vertexBuffer);
    gl.deleteBuffer(mesh.indexBuffer);
}


//# sourceURL=webpack:///./src/utils.ts?`)},0:function(module,exports,__webpack_require__){eval(`module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");


//# sourceURL=webpack:///multi_./src/index.ts?`)}})})});var ice=un((GLt,AB)=>{"use strict";(function(i,e,t,r){"use strict";var n=["","webkit","Moz","MS","ms","o"],a=e.createElement("div"),o="function",s=Math.round,l=Math.abs,c=Date.now;function u(ne,he,be){return setTimeout(b(ne,be),he)}function h(ne,he,be){return Array.isArray(ne)?(d(ne,be[he],be),!0):!1}function d(ne,he,be){var Qe;if(ne)if(ne.forEach)ne.forEach(he,be);else if(ne.length!==r)for(Qe=0;Qe<ne.length;)he.call(be,ne[Qe],Qe,ne),Qe++;else for(Qe in ne)ne.hasOwnProperty(Qe)&&he.call(be,ne[Qe],Qe,ne)}function f(ne,he,be){var Qe="DEPRECATED METHOD: "+he+`
`+be+` AT 
`;return function(){var Xe=new Error("get-stack-trace"),oi=Xe&&Xe.stack?Xe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_r=i.console&&(i.console.warn||i.console.log);return _r&&_r.call(i.console,Qe,oi),ne.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(he){if(he===r||he===null)throw new TypeError("Cannot convert undefined or null to object");for(var be=Object(he),Qe=1;Qe<arguments.length;Qe++){var Xe=arguments[Qe];if(Xe!==r&&Xe!==null)for(var oi in Xe)Xe.hasOwnProperty(oi)&&(be[oi]=Xe[oi])}return be}:m=Object.assign;var y=f(function(he,be,Qe){for(var Xe=Object.keys(be),oi=0;oi<Xe.length;)(!Qe||Qe&&he[Xe[oi]]===r)&&(he[Xe[oi]]=be[Xe[oi]]),oi++;return he},"extend","Use `assign`."),g=f(function(he,be){return y(he,be,!0)},"merge","Use `assign`.");function x(ne,he,be){var Qe=he.prototype,Xe;Xe=ne.prototype=Object.create(Qe),Xe.constructor=ne,Xe._super=Qe,be&&m(Xe,be)}function b(ne,he){return function(){return ne.apply(he,arguments)}}function S(ne,he){return typeof ne==o?ne.apply(he&&he[0]||r,he):ne}function E(ne,he){return ne===r?he:ne}function D(ne,he,be){d(U(he),function(Qe){ne.addEventListener(Qe,be,!1)})}function B(ne,he,be){d(U(he),function(Qe){ne.removeEventListener(Qe,be,!1)})}function F(ne,he){for(;ne;){if(ne==he)return!0;ne=ne.parentNode}return!1}function H(ne,he){return ne.indexOf(he)>-1}function U(ne){return ne.trim().split(/\s+/g)}function k(ne,he,be){if(ne.indexOf&&!be)return ne.indexOf(he);for(var Qe=0;Qe<ne.length;){if(be&&ne[Qe][be]==he||!be&&ne[Qe]===he)return Qe;Qe++}return-1}function j(ne){return Array.prototype.slice.call(ne,0)}function q(ne,he,be){for(var Qe=[],Xe=[],oi=0;oi<ne.length;){var _r=he?ne[oi][he]:ne[oi];k(Xe,_r)<0&&Qe.push(ne[oi]),Xe[oi]=_r,oi++}return be&&(he?Qe=Qe.sort(function(Ln,Fa){return Ln[he]>Fa[he]}):Qe=Qe.sort()),Qe}function X(ne,he){for(var be,Qe,Xe=he[0].toUpperCase()+he.slice(1),oi=0;oi<n.length;){if(be=n[oi],Qe=be?be+Xe:he,Qe in ne)return Qe;oi++}return r}var Y=1;function J(){return Y++}function te(ne){var he=ne.ownerDocument||ne;return he.defaultView||he.parentWindow||i}var de=/mobile|tablet|ip(ad|hone|od)|android/i,ue="ontouchstart"in i,ve=X(i,"PointerEvent")!==r,_e=ue&&de.test(navigator.userAgent),Re="touch",Oe="pen",Te="mouse",Se="kinect",nt=25,rt=1,dt=2,tt=4,ht=8,pt=1,Je=2,Ie=4,Bi=8,_t=16,It=Je|Ie,Ct=Bi|_t,Xt=It|Ct,Oi=["x","y"],ae=["clientX","clientY"];function se(ne,he){var be=this;this.manager=ne,this.callback=he,this.element=ne.element,this.target=ne.options.inputTarget,this.domHandler=function(Qe){S(ne.options.enable,[ne])&&be.handler(Qe)},this.init()}se.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(te(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&B(this.element,this.evEl,this.domHandler),this.evTarget&&B(this.target,this.evTarget,this.domHandler),this.evWin&&B(te(this.element),this.evWin,this.domHandler)}};function Ge(ne){var he,be=ne.options.inputClass;return be?he=be:ve?he=Gt:_e?he=Er:ue?he=us:he=Br,new he(ne,bt)}function bt(ne,he,be){var Qe=be.pointers.length,Xe=be.changedPointers.length,oi=he&rt&&Qe-Xe===0,_r=he&(tt|ht)&&Qe-Xe===0;be.isFirst=!!oi,be.isFinal=!!_r,oi&&(ne.session={}),be.eventType=he,gt(ne,be),ne.emit("hammer.input",be),ne.recognize(be),ne.session.prevInput=be}function gt(ne,he){var be=ne.session,Qe=he.pointers,Xe=Qe.length;be.firstInput||(be.firstInput=kt(he)),Xe>1&&!be.firstMultiple?be.firstMultiple=kt(he):Xe===1&&(be.firstMultiple=!1);var oi=be.firstInput,_r=be.firstMultiple,va=_r?_r.center:oi.center,Ln=he.center=Qt(Qe);he.timeStamp=c(),he.deltaTime=he.timeStamp-oi.timeStamp,he.angle=vi(va,Ln),he.distance=vt(va,Ln),mt(be,he),he.offsetDirection=Zi(he.deltaX,he.deltaY);var Fa=Ni(he.deltaTime,he.deltaX,he.deltaY);he.overallVelocityX=Fa.x,he.overallVelocityY=Fa.y,he.overallVelocity=l(Fa.x)>l(Fa.y)?Fa.x:Fa.y,he.scale=_r?Wi(_r.pointers,Qe):1,he.rotation=_r?lt(_r.pointers,Qe):0,he.maxPointers=be.prevInput?he.pointers.length>be.prevInput.maxPointers?he.pointers.length:be.prevInput.maxPointers:he.pointers.length,Ti(be,he);var ds=ne.element;F(he.srcEvent.target,ds)&&(ds=he.srcEvent.target),he.target=ds}function mt(ne,he){var be=he.center,Qe=ne.offsetDelta||{},Xe=ne.prevDelta||{},oi=ne.prevInput||{};(he.eventType===rt||oi.eventType===tt)&&(Xe=ne.prevDelta={x:oi.deltaX||0,y:oi.deltaY||0},Qe=ne.offsetDelta={x:be.x,y:be.y}),he.deltaX=Xe.x+(be.x-Qe.x),he.deltaY=Xe.y+(be.y-Qe.y)}function Ti(ne,he){var be=ne.lastInterval||he,Qe=he.timeStamp-be.timeStamp,Xe,oi,_r,va;if(he.eventType!=ht&&(Qe>nt||be.velocity===r)){var Ln=he.deltaX-be.deltaX,Fa=he.deltaY-be.deltaY,ds=Ni(Qe,Ln,Fa);oi=ds.x,_r=ds.y,Xe=l(ds.x)>l(ds.y)?ds.x:ds.y,va=Zi(Ln,Fa),ne.lastInterval=he}else Xe=be.velocity,oi=be.velocityX,_r=be.velocityY,va=be.direction;he.velocity=Xe,he.velocityX=oi,he.velocityY=_r,he.direction=va}function kt(ne){for(var he=[],be=0;be<ne.pointers.length;)he[be]={clientX:s(ne.pointers[be].clientX),clientY:s(ne.pointers[be].clientY)},be++;return{timeStamp:c(),pointers:he,center:Qt(he),deltaX:ne.deltaX,deltaY:ne.deltaY}}function Qt(ne){var he=ne.length;if(he===1)return{x:s(ne[0].clientX),y:s(ne[0].clientY)};for(var be=0,Qe=0,Xe=0;Xe<he;)be+=ne[Xe].clientX,Qe+=ne[Xe].clientY,Xe++;return{x:s(be/he),y:s(Qe/he)}}function Ni(ne,he,be){return{x:he/ne||0,y:be/ne||0}}function Zi(ne,he){return ne===he?pt:l(ne)>=l(he)?ne<0?Je:Ie:he<0?Bi:_t}function vt(ne,he,be){be||(be=Oi);var Qe=he[be[0]]-ne[be[0]],Xe=he[be[1]]-ne[be[1]];return Math.sqrt(Qe*Qe+Xe*Xe)}function vi(ne,he,be){be||(be=Oi);var Qe=he[be[0]]-ne[be[0]],Xe=he[be[1]]-ne[be[1]];return Math.atan2(Xe,Qe)*180/Math.PI}function lt(ne,he){return vi(he[1],he[0],ae)+vi(ne[1],ne[0],ae)}function Wi(ne,he){return vt(he[0],he[1],ae)/vt(ne[0],ne[1],ae)}var Lt={mousedown:rt,mousemove:dt,mouseup:tt},Ot="mousedown",Hi="mousemove mouseup";function Br(){this.evEl=Ot,this.evWin=Hi,this.pressed=!1,se.apply(this,arguments)}x(Br,se,{handler:function(he){var be=Lt[he.type];be&rt&&he.button===0&&(this.pressed=!0),be&dt&&he.which!==1&&(be=tt),this.pressed&&(be&tt&&(this.pressed=!1),this.callback(this.manager,be,{pointers:[he],changedPointers:[he],pointerType:Te,srcEvent:he}))}});var An={pointerdown:rt,pointermove:dt,pointerup:tt,pointercancel:ht,pointerout:ht},ti={2:Re,3:Oe,4:Te,5:Se},Rt="pointerdown",Be="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Rt="MSPointerDown",Be="MSPointerMove MSPointerUp MSPointerCancel");function Gt(){this.evEl=Rt,this.evWin=Be,se.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x(Gt,se,{handler:function(he){var be=this.store,Qe=!1,Xe=he.type.toLowerCase().replace("ms",""),oi=An[Xe],_r=ti[he.pointerType]||he.pointerType,va=_r==Re,Ln=k(be,he.pointerId,"pointerId");oi&rt&&(he.button===0||va)?Ln<0&&(be.push(he),Ln=be.length-1):oi&(tt|ht)&&(Qe=!0),!(Ln<0)&&(be[Ln]=he,this.callback(this.manager,oi,{pointers:be,changedPointers:[he],pointerType:_r,srcEvent:he}),Qe&&be.splice(Ln,1))}});var Bt={touchstart:rt,touchmove:dt,touchend:tt,touchcancel:ht},Qi="touchstart",_i="touchstart touchmove touchend touchcancel";function Cr(){this.evTarget=Qi,this.evWin=_i,this.started=!1,se.apply(this,arguments)}x(Cr,se,{handler:function(he){var be=Bt[he.type];if(be===rt&&(this.started=!0),!!this.started){var Qe=zr.call(this,he,be);be&(tt|ht)&&Qe[0].length-Qe[1].length===0&&(this.started=!1),this.callback(this.manager,be,{pointers:Qe[0],changedPointers:Qe[1],pointerType:Re,srcEvent:he})}}});function zr(ne,he){var be=j(ne.touches),Qe=j(ne.changedTouches);return he&(tt|ht)&&(be=q(be.concat(Qe),"identifier",!0)),[be,Qe]}var en={touchstart:rt,touchmove:dt,touchend:tt,touchcancel:ht},Ga="touchstart touchmove touchend touchcancel";function Er(){this.evTarget=Ga,this.targetIds={},se.apply(this,arguments)}x(Er,se,{handler:function(he){var be=en[he.type],Qe=ga.call(this,he,be);Qe&&this.callback(this.manager,be,{pointers:Qe[0],changedPointers:Qe[1],pointerType:Re,srcEvent:he})}});function ga(ne,he){var be=j(ne.touches),Qe=this.targetIds;if(he&(rt|dt)&&be.length===1)return Qe[be[0].identifier]=!0,[be,be];var Xe,oi,_r=j(ne.changedTouches),va=[],Ln=this.target;if(oi=be.filter(function(Fa){return F(Fa.target,Ln)}),he===rt)for(Xe=0;Xe<oi.length;)Qe[oi[Xe].identifier]=!0,Xe++;for(Xe=0;Xe<_r.length;)Qe[_r[Xe].identifier]&&va.push(_r[Xe]),he&(tt|ht)&&delete Qe[_r[Xe].identifier],Xe++;if(va.length)return[q(oi.concat(va),"identifier",!0),va]}var Di=2500,Oo=25;function us(){se.apply(this,arguments);var ne=b(this.handler,this);this.touch=new Er(this.manager,ne),this.mouse=new Br(this.manager,ne),this.primaryTouch=null,this.lastTouches=[]}x(us,se,{handler:function(he,be,Qe){var Xe=Qe.pointerType==Re,oi=Qe.pointerType==Te;if(!(oi&&Qe.sourceCapabilities&&Qe.sourceCapabilities.firesTouchEvents)){if(Xe)Wt.call(this,be,Qe);else if(oi&&Ol.call(this,Qe))return;this.callback(he,be,Qe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wt(ne,he){ne&rt?(this.primaryTouch=he.changedPointers[0].identifier,hs.call(this,he)):ne&(tt|ht)&&hs.call(this,he)}function hs(ne){var he=ne.changedPointers[0];if(he.identifier===this.primaryTouch){var be={x:he.clientX,y:he.clientY};this.lastTouches.push(be);var Qe=this.lastTouches,Xe=function(){var oi=Qe.indexOf(be);oi>-1&&Qe.splice(oi,1)};setTimeout(Xe,Di)}}function Ol(ne){for(var he=ne.srcEvent.clientX,be=ne.srcEvent.clientY,Qe=0;Qe<this.lastTouches.length;Qe++){var Xe=this.lastTouches[Qe],oi=Math.abs(he-Xe.x),_r=Math.abs(be-Xe.y);if(oi<=Oo&&_r<=Oo)return!0}return!1}var no=X(a.style,"touchAction"),Kh=no!==r,Xh="compute",uu="auto",Ju="manipulation",fe="none",ke="pan-x",Ze="pan-y",$e=Ai();function je(ne,he){this.manager=ne,this.set(he)}je.prototype={set:function(ne){ne==Xh&&(ne=this.compute()),Kh&&this.manager.element.style&&$e[ne]&&(this.manager.element.style[no]=ne),this.actions=ne.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ne=[];return d(this.manager.recognizers,function(he){S(he.options.enable,[he])&&(ne=ne.concat(he.getTouchAction()))}),ai(ne.join(" "))},preventDefaults:function(ne){var he=ne.srcEvent,be=ne.offsetDirection;if(this.manager.session.prevented){he.preventDefault();return}var Qe=this.actions,Xe=H(Qe,fe)&&!$e[fe],oi=H(Qe,Ze)&&!$e[Ze],_r=H(Qe,ke)&&!$e[ke];if(Xe){var va=ne.pointers.length===1,Ln=ne.distance<2,Fa=ne.deltaTime<250;if(va&&Ln&&Fa)return}if(!(_r&&oi)&&(Xe||oi&&be&It||_r&&be&Ct))return this.preventSrc(he)},preventSrc:function(ne){this.manager.session.prevented=!0,ne.preventDefault()}};function ai(ne){if(H(ne,fe))return fe;var he=H(ne,ke),be=H(ne,Ze);return he&&be?fe:he||be?he?ke:Ze:H(ne,Ju)?Ju:uu}function Ai(){if(!Kh)return!1;var ne={},he=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(be){ne[be]=he?i.CSS.supports("touch-action",be):!0}),ne}var Ui=1,ze=2,Ji=4,Zt=8,Ri=Zt,Yr=16,zi=32;function Mi(ne){this.options=m({},this.defaults,ne||{}),this.id=J(),this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Ui,this.simultaneous={},this.requireFail=[]}Mi.prototype={defaults:{},set:function(ne){return m(this.options,ne),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ne){if(h(ne,"recognizeWith",this))return this;var he=this.simultaneous;return ne=tr(ne,this),he[ne.id]||(he[ne.id]=ne,ne.recognizeWith(this)),this},dropRecognizeWith:function(ne){return h(ne,"dropRecognizeWith",this)?this:(ne=tr(ne,this),delete this.simultaneous[ne.id],this)},requireFailure:function(ne){if(h(ne,"requireFailure",this))return this;var he=this.requireFail;return ne=tr(ne,this),k(he,ne)===-1&&(he.push(ne),ne.requireFailure(this)),this},dropRequireFailure:function(ne){if(h(ne,"dropRequireFailure",this))return this;ne=tr(ne,this);var he=k(this.requireFail,ne);return he>-1&&this.requireFail.splice(he,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ne){return!!this.simultaneous[ne.id]},emit:function(ne){var he=this,be=this.state;function Qe(Xe){he.manager.emit(Xe,ne)}be<Zt&&Qe(he.options.event+Ki(be)),Qe(he.options.event),ne.additionalEvent&&Qe(ne.additionalEvent),be>=Zt&&Qe(he.options.event+Ki(be))},tryEmit:function(ne){if(this.canEmit())return this.emit(ne);this.state=zi},canEmit:function(){for(var ne=0;ne<this.requireFail.length;){if(!(this.requireFail[ne].state&(zi|Ui)))return!1;ne++}return!0},recognize:function(ne){var he=m({},ne);if(!S(this.options.enable,[this,he])){this.reset(),this.state=zi;return}this.state&(Ri|Yr|zi)&&(this.state=Ui),this.state=this.process(he),this.state&(ze|Ji|Zt|Yr)&&this.tryEmit(he)},process:function(ne){},getTouchAction:function(){},reset:function(){}};function Ki(ne){return ne&Yr?"cancel":ne&Zt?"end":ne&Ji?"move":ne&ze?"start":""}function Qr(ne){return ne==_t?"down":ne==Bi?"up":ne==Je?"left":ne==Ie?"right":""}function tr(ne,he){var be=he.manager;return be?be.get(ne):ne}function Wa(){Mi.apply(this,arguments)}x(Wa,Mi,{defaults:{pointers:1},attrTest:function(ne){var he=this.options.pointers;return he===0||ne.pointers.length===he},process:function(ne){var he=this.state,be=ne.eventType,Qe=he&(ze|Ji),Xe=this.attrTest(ne);return Qe&&(be&ht||!Xe)?he|Yr:Qe||Xe?be&tt?he|Zt:he&ze?he|Ji:ze:zi}});function nr(){Wa.apply(this,arguments),this.pX=null,this.pY=null}x(nr,Wa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Xt},getTouchAction:function(){var ne=this.options.direction,he=[];return ne&It&&he.push(Ze),ne&Ct&&he.push(ke),he},directionTest:function(ne){var he=this.options,be=!0,Qe=ne.distance,Xe=ne.direction,oi=ne.deltaX,_r=ne.deltaY;return Xe&he.direction||(he.direction&It?(Xe=oi===0?pt:oi<0?Je:Ie,be=oi!=this.pX,Qe=Math.abs(ne.deltaX)):(Xe=_r===0?pt:_r<0?Bi:_t,be=_r!=this.pY,Qe=Math.abs(ne.deltaY))),ne.direction=Xe,be&&Qe>he.threshold&&Xe&he.direction},attrTest:function(ne){return Wa.prototype.attrTest.call(this,ne)&&(this.state&ze||!(this.state&ze)&&this.directionTest(ne))},emit:function(ne){this.pX=ne.deltaX,this.pY=ne.deltaY;var he=Qr(ne.direction);he&&(ne.additionalEvent=this.options.event+he),this._super.emit.call(this,ne)}});function ha(){Wa.apply(this,arguments)}x(ha,Wa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(ne){return this._super.attrTest.call(this,ne)&&(Math.abs(ne.scale-1)>this.options.threshold||this.state&ze)},emit:function(ne){if(ne.scale!==1){var he=ne.scale<1?"in":"out";ne.additionalEvent=this.options.event+he}this._super.emit.call(this,ne)}});function Fl(){Mi.apply(this,arguments),this._timer=null,this._input=null}x(Fl,Mi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[uu]},process:function(ne){var he=this.options,be=ne.pointers.length===he.pointers,Qe=ne.distance<he.threshold,Xe=ne.deltaTime>he.time;if(this._input=ne,!Qe||!be||ne.eventType&(tt|ht)&&!Xe)this.reset();else if(ne.eventType&rt)this.reset(),this._timer=u(function(){this.state=Ri,this.tryEmit()},he.time,this);else if(ne.eventType&tt)return Ri;return zi},reset:function(){clearTimeout(this._timer)},emit:function(ne){this.state===Ri&&(ne&&ne.eventType&tt?this.manager.emit(this.options.event+"up",ne):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Vr(){Wa.apply(this,arguments)}x(Vr,Wa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(ne){return this._super.attrTest.call(this,ne)&&(Math.abs(ne.rotation)>this.options.threshold||this.state&ze)}});function el(){Wa.apply(this,arguments)}x(el,Wa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:It|Ct,pointers:1},getTouchAction:function(){return nr.prototype.getTouchAction.call(this)},attrTest:function(ne){var he=this.options.direction,be;return he&(It|Ct)?be=ne.overallVelocity:he&It?be=ne.overallVelocityX:he&Ct&&(be=ne.overallVelocityY),this._super.attrTest.call(this,ne)&&he&ne.offsetDirection&&ne.distance>this.options.threshold&&ne.maxPointers==this.options.pointers&&l(be)>this.options.velocity&&ne.eventType&tt},emit:function(ne){var he=Qr(ne.offsetDirection);he&&this.manager.emit(this.options.event+he,ne),this.manager.emit(this.options.event,ne)}});function Pr(){Mi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}x(Pr,Mi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ju]},process:function(ne){var he=this.options,be=ne.pointers.length===he.pointers,Qe=ne.distance<he.threshold,Xe=ne.deltaTime<he.time;if(this.reset(),ne.eventType&rt&&this.count===0)return this.failTimeout();if(Qe&&Xe&&be){if(ne.eventType!=tt)return this.failTimeout();var oi=this.pTime?ne.timeStamp-this.pTime<he.interval:!0,_r=!this.pCenter||vt(this.pCenter,ne.center)<he.posThreshold;this.pTime=ne.timeStamp,this.pCenter=ne.center,!_r||!oi?this.count=1:this.count+=1,this._input=ne;var va=this.count%he.taps;if(va===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Ri,this.tryEmit()},he.interval,this),ze):Ri}return zi},failTimeout:function(){return this._timer=u(function(){this.state=zi},this.options.interval,this),zi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ri&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function da(ne,he){return he=he||{},he.recognizers=E(he.recognizers,da.defaults.preset),new Ve(ne,he)}da.VERSION="2.0.7",da.defaults={domEvents:!1,touchAction:Xh,enable:!0,inputTarget:null,inputClass:null,preset:[[Vr,{enable:!1}],[ha,{enable:!1},["rotate"]],[el,{direction:It}],[nr,{direction:It},["swipe"]],[Pr],[Pr,{event:"doubletap",taps:2},["tap"]],[Fl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var tn=1,rn=2;function Ve(ne,he){this.options=m({},da.defaults,he||{}),this.options.inputTarget=this.options.inputTarget||ne,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ne,this.input=Ge(this),this.touchAction=new je(this,this.options.touchAction),me(this,!0),d(this.options.recognizers,function(be){var Qe=this.add(new be[0](be[1]));be[2]&&Qe.recognizeWith(be[2]),be[3]&&Qe.requireFailure(be[3])},this)}Ve.prototype={set:function(ne){return m(this.options,ne),ne.touchAction&&this.touchAction.update(),ne.inputTarget&&(this.input.destroy(),this.input.target=ne.inputTarget,this.input.init()),this},stop:function(ne){this.session.stopped=ne?rn:tn},recognize:function(ne){var he=this.session;if(!he.stopped){this.touchAction.preventDefaults(ne);var be,Qe=this.recognizers,Xe=he.curRecognizer;(!Xe||Xe&&Xe.state&Ri)&&(Xe=he.curRecognizer=null);for(var oi=0;oi<Qe.length;)be=Qe[oi],he.stopped!==rn&&(!Xe||be==Xe||be.canRecognizeWith(Xe))?be.recognize(ne):be.reset(),!Xe&&be.state&(ze|Ji|Zt)&&(Xe=he.curRecognizer=be),oi++}},get:function(ne){if(ne instanceof Mi)return ne;for(var he=this.recognizers,be=0;be<he.length;be++)if(he[be].options.event==ne)return he[be];return null},add:function(ne){if(h(ne,"add",this))return this;var he=this.get(ne.options.event);return he&&this.remove(he),this.recognizers.push(ne),ne.manager=this,this.touchAction.update(),ne},remove:function(ne){if(h(ne,"remove",this))return this;if(ne=this.get(ne),ne){var he=this.recognizers,be=k(he,ne);be!==-1&&(he.splice(be,1),this.touchAction.update())}return this},on:function(ne,he){if(ne!==r&&he!==r){var be=this.handlers;return d(U(ne),function(Qe){be[Qe]=be[Qe]||[],be[Qe].push(he)}),this}},off:function(ne,he){if(ne!==r){var be=this.handlers;return d(U(ne),function(Qe){he?be[Qe]&&be[Qe].splice(k(be[Qe],he),1):delete be[Qe]}),this}},emit:function(ne,he){this.options.domEvents&&Ci(ne,he);var be=this.handlers[ne]&&this.handlers[ne].slice();if(!(!be||!be.length)){he.type=ne,he.preventDefault=function(){he.srcEvent.preventDefault()};for(var Qe=0;Qe<be.length;)be[Qe](he),Qe++}},destroy:function(){this.element&&me(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function me(ne,he){var be=ne.element;if(be.style){var Qe;d(ne.options.cssProps,function(Xe,oi){Qe=X(be.style,oi),he?(ne.oldCssProps[Qe]=be.style[Qe],be.style[Qe]=Xe):be.style[Qe]=ne.oldCssProps[Qe]||""}),he||(ne.oldCssProps={})}}function Ci(ne,he){var be=e.createEvent("Event");be.initEvent(ne,!0,!0),be.gesture=he,he.target.dispatchEvent(be)}m(da,{INPUT_START:rt,INPUT_MOVE:dt,INPUT_END:tt,INPUT_CANCEL:ht,STATE_POSSIBLE:Ui,STATE_BEGAN:ze,STATE_CHANGED:Ji,STATE_ENDED:Zt,STATE_RECOGNIZED:Ri,STATE_CANCELLED:Yr,STATE_FAILED:zi,DIRECTION_NONE:pt,DIRECTION_LEFT:Je,DIRECTION_RIGHT:Ie,DIRECTION_UP:Bi,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:It,DIRECTION_VERTICAL:Ct,DIRECTION_ALL:Xt,Manager:Ve,Input:se,TouchAction:je,TouchInput:Er,MouseInput:Br,PointerEventInput:Gt,TouchMouseInput:us,SingleTouchInput:Cr,Recognizer:Mi,AttrRecognizer:Wa,Tap:Pr,Pan:nr,Swipe:el,Pinch:ha,Rotate:Vr,Press:Fl,on:D,off:B,each:d,merge:g,extend:y,assign:m,inherit:x,bindFn:b,prefixed:X});var ja=typeof i<"u"?i:typeof self<"u"?self:{};ja.Hammer=da,typeof define=="function"&&define.amd?define(function(){return da}):typeof AB<"u"&&AB.exports?AB.exports=da:i[t]=da})(window,document,"Hammer")});var oce=un((Yz,qz)=>{"use strict";(function(i,e){typeof Yz=="object"&&typeof qz<"u"?qz.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.html2canvas=e())})(Yz,function(){"use strict";var i=function(I,M){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,R){P.__proto__=R}||function(P,R){for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(P[G]=R[G])},i(I,M)};function e(I,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");i(I,M);function P(){this.constructor=I}I.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)}var t=function(){return t=Object.assign||function(M){for(var P,R=1,G=arguments.length;R<G;R++){P=arguments[R];for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(M[Z]=P[Z])}return M},t.apply(this,arguments)};function r(I,M,P,R){function G(Z){return Z instanceof P?Z:new P(function(re){re(Z)})}return new(P||(P=Promise))(function(Z,re){function Ae(Fe){try{Pe(R.next(Fe))}catch(He){re(He)}}function pe(Fe){try{Pe(R.throw(Fe))}catch(He){re(He)}}function Pe(Fe){Fe.done?Z(Fe.value):G(Fe.value).then(Ae,pe)}Pe((R=R.apply(I,M||[])).next())})}function n(I,M){var P={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},R,G,Z,re;return re={next:Ae(0),throw:Ae(1),return:Ae(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function Ae(Pe){return function(Fe){return pe([Pe,Fe])}}function pe(Pe){if(R)throw new TypeError("Generator is already executing.");for(;P;)try{if(R=1,G&&(Z=Pe[0]&2?G.return:Pe[0]?G.throw||((Z=G.return)&&Z.call(G),0):G.next)&&!(Z=Z.call(G,Pe[1])).done)return Z;switch(G=0,Z&&(Pe=[Pe[0]&2,Z.value]),Pe[0]){case 0:case 1:Z=Pe;break;case 4:return P.label++,{value:Pe[1],done:!1};case 5:P.label++,G=Pe[1],Pe=[0];continue;case 7:Pe=P.ops.pop(),P.trys.pop();continue;default:if(Z=P.trys,!(Z=Z.length>0&&Z[Z.length-1])&&(Pe[0]===6||Pe[0]===2)){P=0;continue}if(Pe[0]===3&&(!Z||Pe[1]>Z[0]&&Pe[1]<Z[3])){P.label=Pe[1];break}if(Pe[0]===6&&P.label<Z[1]){P.label=Z[1],Z=Pe;break}if(Z&&P.label<Z[2]){P.label=Z[2],P.ops.push(Pe);break}Z[2]&&P.ops.pop(),P.trys.pop();continue}Pe=M.call(I,P)}catch(Fe){Pe=[6,Fe],G=0}finally{R=Z=0}if(Pe[0]&5)throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}}function a(I,M,P){if(P||arguments.length===2)for(var R=0,G=M.length,Z;R<G;R++)(Z||!(R in M))&&(Z||(Z=Array.prototype.slice.call(M,0,R)),Z[R]=M[R]);return I.concat(Z||M)}for(var o=function(){function I(M,P,R,G){this.left=M,this.top=P,this.width=R,this.height=G}return I.prototype.add=function(M,P,R,G){return new I(this.left+M,this.top+P,this.width+R,this.height+G)},I.fromClientRect=function(M,P){return new I(P.left+M.windowBounds.left,P.top+M.windowBounds.top,P.width,P.height)},I.fromDOMRectList=function(M,P){var R=Array.from(P).find(function(G){return G.width!==0});return R?new I(R.left+M.windowBounds.left,R.top+M.windowBounds.top,R.width,R.height):I.EMPTY},I.EMPTY=new I(0,0,0,0),I}(),s=function(I,M){return o.fromClientRect(I,M.getBoundingClientRect())},l=function(I){var M=I.body,P=I.documentElement;if(!M||!P)throw new Error("Unable to get document size");var R=Math.max(Math.max(M.scrollWidth,P.scrollWidth),Math.max(M.offsetWidth,P.offsetWidth),Math.max(M.clientWidth,P.clientWidth)),G=Math.max(Math.max(M.scrollHeight,P.scrollHeight),Math.max(M.offsetHeight,P.offsetHeight),Math.max(M.clientHeight,P.clientHeight));return new o(0,0,R,G)},c=function(I){for(var M=[],P=0,R=I.length;P<R;){var G=I.charCodeAt(P++);if(G>=55296&&G<=56319&&P<R){var Z=I.charCodeAt(P++);(Z&64512)===56320?M.push(((G&1023)<<10)+(Z&1023)+65536):(M.push(G),P--)}else M.push(G)}return M},u=function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];if(String.fromCodePoint)return String.fromCodePoint.apply(String,I);var P=I.length;if(!P)return"";for(var R=[],G=-1,Z="";++G<P;){var re=I[G];re<=65535?R.push(re):(re-=65536,R.push((re>>10)+55296,re%1024+56320)),(G+1===P||R.length>16384)&&(Z+=String.fromCharCode.apply(String,R),R.length=0)}return Z},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=typeof Uint8Array>"u"?[]:new Uint8Array(256),f=0;f<h.length;f++)d[h.charCodeAt(f)]=f;for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=typeof Uint8Array>"u"?[]:new Uint8Array(256),g=0;g<m.length;g++)y[m.charCodeAt(g)]=g;for(var x=function(I){var M=I.length*.75,P=I.length,R,G=0,Z,re,Ae,pe;I[I.length-1]==="="&&(M--,I[I.length-2]==="="&&M--);var Pe=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(M):new Array(M),Fe=Array.isArray(Pe)?Pe:new Uint8Array(Pe);for(R=0;R<P;R+=4)Z=y[I.charCodeAt(R)],re=y[I.charCodeAt(R+1)],Ae=y[I.charCodeAt(R+2)],pe=y[I.charCodeAt(R+3)],Fe[G++]=Z<<2|re>>4,Fe[G++]=(re&15)<<4|Ae>>2,Fe[G++]=(Ae&3)<<6|pe&63;return Pe},b=function(I){for(var M=I.length,P=[],R=0;R<M;R+=2)P.push(I[R+1]<<8|I[R]);return P},S=function(I){for(var M=I.length,P=[],R=0;R<M;R+=4)P.push(I[R+3]<<24|I[R+2]<<16|I[R+1]<<8|I[R]);return P},E=5,D=6+5,B=2,F=D-E,H=65536>>E,U=1<<E,k=U-1,j=1024>>E,q=H+j,X=q,Y=32,J=X+Y,te=65536>>D,de=1<<F,ue=de-1,ve=function(I,M,P){return I.slice?I.slice(M,P):new Uint16Array(Array.prototype.slice.call(I,M,P))},_e=function(I,M,P){return I.slice?I.slice(M,P):new Uint32Array(Array.prototype.slice.call(I,M,P))},Re=function(I,M){var P=x(I),R=Array.isArray(P)?S(P):new Uint32Array(P),G=Array.isArray(P)?b(P):new Uint16Array(P),Z=24,re=ve(G,Z/2,R[4]/2),Ae=R[5]===2?ve(G,(Z+R[4])/2):_e(R,Math.ceil((Z+R[4])/4));return new Oe(R[0],R[1],R[2],R[3],re,Ae)},Oe=function(){function I(M,P,R,G,Z,re){this.initialValue=M,this.errorValue=P,this.highStart=R,this.highValueIndex=G,this.index=Z,this.data=re}return I.prototype.get=function(M){var P;if(M>=0){if(M<55296||M>56319&&M<=65535)return P=this.index[M>>E],P=(P<<B)+(M&k),this.data[P];if(M<=65535)return P=this.index[H+(M-55296>>E)],P=(P<<B)+(M&k),this.data[P];if(M<this.highStart)return P=J-te+(M>>D),P=this.index[P],P+=M>>E&ue,P=this.index[P],P=(P<<B)+(M&k),this.data[P];if(M<=1114111)return this.data[this.highValueIndex]}return this.errorValue},I}(),Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Se=typeof Uint8Array>"u"?[]:new Uint8Array(256),nt=0;nt<Te.length;nt++)Se[Te.charCodeAt(nt)]=nt;var rt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dt=50,tt=1,ht=2,pt=3,Je=4,Ie=5,Bi=7,_t=8,It=9,Ct=10,Xt=11,Oi=12,ae=13,se=14,Ge=15,bt=16,gt=17,mt=18,Ti=19,kt=20,Qt=21,Ni=22,Zi=23,vt=24,vi=25,lt=26,Wi=27,Lt=28,Ot=29,Hi=30,Br=31,An=32,ti=33,Rt=34,Be=35,Gt=36,Bt=37,Qi=38,_i=39,Cr=40,zr=41,en=42,Ga=43,Er=[9001,65288],ga="!",Di="\xD7",Oo="\xF7",us=Re(rt),Wt=[Hi,Gt],hs=[tt,ht,pt,Ie],Ol=[Ct,_t],no=[Wi,lt],Kh=hs.concat(Ol),Xh=[Qi,_i,Cr,Rt,Be],uu=[Ge,ae],Ju=function(I,M){M===void 0&&(M="strict");var P=[],R=[],G=[];return I.forEach(function(Z,re){var Ae=us.get(Z);if(Ae>dt?(G.push(!0),Ae-=dt):G.push(!1),["normal","auto","loose"].indexOf(M)!==-1&&[8208,8211,12316,12448].indexOf(Z)!==-1)return R.push(re),P.push(bt);if(Ae===Je||Ae===Xt){if(re===0)return R.push(re),P.push(Hi);var pe=P[re-1];return Kh.indexOf(pe)===-1?(R.push(R[re-1]),P.push(pe)):(R.push(re),P.push(Hi))}if(R.push(re),Ae===Br)return P.push(M==="strict"?Qt:Bt);if(Ae===en||Ae===Ot)return P.push(Hi);if(Ae===Ga)return Z>=131072&&Z<=196605||Z>=196608&&Z<=262141?P.push(Bt):P.push(Hi);P.push(Ae)}),[R,P,G]},fe=function(I,M,P,R){var G=R[P];if(Array.isArray(I)?I.indexOf(G)!==-1:I===G)for(var Z=P;Z<=R.length;){Z++;var re=R[Z];if(re===M)return!0;if(re!==Ct)break}if(G===Ct)for(var Z=P;Z>0;){Z--;var Ae=R[Z];if(Array.isArray(I)?I.indexOf(Ae)!==-1:I===Ae)for(var pe=P;pe<=R.length;){pe++;var re=R[pe];if(re===M)return!0;if(re!==Ct)break}if(Ae!==Ct)break}return!1},ke=function(I,M){for(var P=I;P>=0;){var R=M[P];if(R===Ct)P--;else return R}return 0},Ze=function(I,M,P,R,G){if(P[R]===0)return Di;var Z=R-1;if(Array.isArray(G)&&G[Z]===!0)return Di;var re=Z-1,Ae=Z+1,pe=M[Z],Pe=re>=0?M[re]:0,Fe=M[Ae];if(pe===ht&&Fe===pt)return Di;if(hs.indexOf(pe)!==-1)return ga;if(hs.indexOf(Fe)!==-1||Ol.indexOf(Fe)!==-1)return Di;if(ke(Z,M)===_t)return Oo;if(us.get(I[Z])===Xt||(pe===An||pe===ti)&&us.get(I[Ae])===Xt||pe===Bi||Fe===Bi||pe===It||[Ct,ae,Ge].indexOf(pe)===-1&&Fe===It||[gt,mt,Ti,vt,Lt].indexOf(Fe)!==-1||ke(Z,M)===Ni||fe(Zi,Ni,Z,M)||fe([gt,mt],Qt,Z,M)||fe(Oi,Oi,Z,M))return Di;if(pe===Ct)return Oo;if(pe===Zi||Fe===Zi)return Di;if(Fe===bt||pe===bt)return Oo;if([ae,Ge,Qt].indexOf(Fe)!==-1||pe===se||Pe===Gt&&uu.indexOf(pe)!==-1||pe===Lt&&Fe===Gt||Fe===kt||Wt.indexOf(Fe)!==-1&&pe===vi||Wt.indexOf(pe)!==-1&&Fe===vi||pe===Wi&&[Bt,An,ti].indexOf(Fe)!==-1||[Bt,An,ti].indexOf(pe)!==-1&&Fe===lt||Wt.indexOf(pe)!==-1&&no.indexOf(Fe)!==-1||no.indexOf(pe)!==-1&&Wt.indexOf(Fe)!==-1||[Wi,lt].indexOf(pe)!==-1&&(Fe===vi||[Ni,Ge].indexOf(Fe)!==-1&&M[Ae+1]===vi)||[Ni,Ge].indexOf(pe)!==-1&&Fe===vi||pe===vi&&[vi,Lt,vt].indexOf(Fe)!==-1)return Di;if([vi,Lt,vt,gt,mt].indexOf(Fe)!==-1)for(var He=Z;He>=0;){var at=M[He];if(at===vi)return Di;if([Lt,vt].indexOf(at)!==-1)He--;else break}if([Wi,lt].indexOf(Fe)!==-1)for(var He=[gt,mt].indexOf(pe)!==-1?re:Z;He>=0;){var at=M[He];if(at===vi)return Di;if([Lt,vt].indexOf(at)!==-1)He--;else break}if(Qi===pe&&[Qi,_i,Rt,Be].indexOf(Fe)!==-1||[_i,Rt].indexOf(pe)!==-1&&[_i,Cr].indexOf(Fe)!==-1||[Cr,Be].indexOf(pe)!==-1&&Fe===Cr||Xh.indexOf(pe)!==-1&&[kt,lt].indexOf(Fe)!==-1||Xh.indexOf(Fe)!==-1&&pe===Wi||Wt.indexOf(pe)!==-1&&Wt.indexOf(Fe)!==-1||pe===vt&&Wt.indexOf(Fe)!==-1||Wt.concat(vi).indexOf(pe)!==-1&&Fe===Ni&&Er.indexOf(I[Ae])===-1||Wt.concat(vi).indexOf(Fe)!==-1&&pe===mt)return Di;if(pe===zr&&Fe===zr){for(var ui=P[Z],Ft=1;ui>0&&(ui--,M[ui]===zr);)Ft++;if(Ft%2!==0)return Di}return pe===An&&Fe===ti?Di:Oo},$e=function(I,M){M||(M={lineBreak:"normal",wordBreak:"normal"});var P=Ju(I,M.lineBreak),R=P[0],G=P[1],Z=P[2];(M.wordBreak==="break-all"||M.wordBreak==="break-word")&&(G=G.map(function(Ae){return[vi,Hi,en].indexOf(Ae)!==-1?Bt:Ae}));var re=M.wordBreak==="keep-all"?Z.map(function(Ae,pe){return Ae&&I[pe]>=19968&&I[pe]<=40959}):void 0;return[R,G,re]},je=function(){function I(M,P,R,G){this.codePoints=M,this.required=P===ga,this.start=R,this.end=G}return I.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},I}(),ai=function(I,M){var P=c(I),R=$e(P,M),G=R[0],Z=R[1],re=R[2],Ae=P.length,pe=0,Pe=0;return{next:function(){if(Pe>=Ae)return{done:!0,value:null};for(var Fe=Di;Pe<Ae&&(Fe=Ze(P,Z,G,++Pe,re))===Di;);if(Fe!==Di||Pe===Ae){var He=new je(P,Fe,pe,Pe);return pe=Pe,{value:He,done:!1}}return{done:!0,value:null}}}},Ai=1,Ui=2,ze=4,Ji=8,Zt=10,Ri=47,Yr=92,zi=9,Mi=32,Ki=34,Qr=61,tr=35,Wa=36,nr=37,ha=39,Fl=40,Vr=41,el=95,Pr=45,da=33,tn=60,rn=62,Ve=64,me=91,Ci=93,ja=61,ne=123,he=63,be=125,Qe=124,Xe=126,oi=128,_r=65533,va=42,Ln=43,Fa=44,ds=58,gB=59,sA=46,lA=0,$u=8,$i=11,vB=14,Sr=31,po=127,dc=-1,yg=48,D1=97,eh=101,yB=102,cA=117,Zw=122,ef=65,R1=69,tf=70,xB=85,fs=90,Ao=function(I){return I>=yg&&I<=57},Jw=function(I){return I>=55296&&I<=57343},rf=function(I){return Ao(I)||I>=ef&&I<=tf||I>=D1&&I<=yB},_B=function(I){return I>=D1&&I<=Zw},wB=function(I){return I>=ef&&I<=fs},bB=function(I){return _B(I)||wB(I)},On=function(I){return I>=oi},uA=function(I){return I===Zt||I===zi||I===Mi},Yh=function(I){return bB(I)||On(I)||I===el},hu=function(I){return Yh(I)||Ao(I)||I===Pr},SB=function(I){return I>=lA&&I<=$u||I===$i||I>=vB&&I<=Sr||I===po},qe=function(I,M){return I!==Yr?!1:M!==Zt},mr=function(I,M,P){return I===Pr?Yh(M)||qe(M,P):Yh(I)?!0:!!(I===Yr&&qe(I,M))},Ka=function(I,M,P){return I===Ln||I===Pr?Ao(M)?!0:M===sA&&Ao(P):Ao(I===sA?M:I)},P1=function(I){var M=0,P=1;(I[M]===Ln||I[M]===Pr)&&(I[M]===Pr&&(P=-1),M++);for(var R=[];Ao(I[M]);)R.push(I[M++]);var G=R.length?parseInt(u.apply(void 0,R),10):0;I[M]===sA&&M++;for(var Z=[];Ao(I[M]);)Z.push(I[M++]);var re=Z.length,Ae=re?parseInt(u.apply(void 0,Z),10):0;(I[M]===R1||I[M]===eh)&&M++;var pe=1;(I[M]===Ln||I[M]===Pr)&&(I[M]===Pr&&(pe=-1),M++);for(var Pe=[];Ao(I[M]);)Pe.push(I[M++]);var Fe=Pe.length?parseInt(u.apply(void 0,Pe),10):0;return P*(G+Ae*Math.pow(10,-re))*Math.pow(10,pe*Fe)},$w={type:2},CB={type:3},EB={type:4},TB={type:13},eb={type:8},Xa={type:21},L1={type:9},nf={type:10},xg={type:11},_g={type:12},Vn={type:14},Gi={type:23},MB={type:1},qn={type:25},IB={type:24},tb={type:26},BB={type:27},DB={type:28},O1={type:29},ib={type:31},hA={type:32},F1=function(){function I(){this._value=[]}return I.prototype.write=function(M){this._value=this._value.concat(c(M))},I.prototype.read=function(){for(var M=[],P=this.consumeToken();P!==hA;)M.push(P),P=this.consumeToken();return M},I.prototype.consumeToken=function(){var M=this.consumeCodePoint();switch(M){case Ki:return this.consumeStringToken(Ki);case tr:var P=this.peekCodePoint(0),R=this.peekCodePoint(1),G=this.peekCodePoint(2);if(hu(P)||qe(R,G)){var Z=mr(P,R,G)?Ui:Ai,re=this.consumeName();return{type:5,value:re,flags:Z}}break;case Wa:if(this.peekCodePoint(0)===Qr)return this.consumeCodePoint(),TB;break;case ha:return this.consumeStringToken(ha);case Fl:return $w;case Vr:return CB;case va:if(this.peekCodePoint(0)===Qr)return this.consumeCodePoint(),Vn;break;case Ln:if(Ka(M,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(M),this.consumeNumericToken();break;case Fa:return EB;case Pr:var Ae=M,pe=this.peekCodePoint(0),Pe=this.peekCodePoint(1);if(Ka(Ae,pe,Pe))return this.reconsumeCodePoint(M),this.consumeNumericToken();if(mr(Ae,pe,Pe))return this.reconsumeCodePoint(M),this.consumeIdentLikeToken();if(pe===Pr&&Pe===rn)return this.consumeCodePoint(),this.consumeCodePoint(),IB;break;case sA:if(Ka(M,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(M),this.consumeNumericToken();break;case Ri:if(this.peekCodePoint(0)===va)for(this.consumeCodePoint();;){var Fe=this.consumeCodePoint();if(Fe===va&&(Fe=this.consumeCodePoint(),Fe===Ri))return this.consumeToken();if(Fe===dc)return this.consumeToken()}break;case ds:return tb;case gB:return BB;case tn:if(this.peekCodePoint(0)===da&&this.peekCodePoint(1)===Pr&&this.peekCodePoint(2)===Pr)return this.consumeCodePoint(),this.consumeCodePoint(),qn;break;case Ve:var He=this.peekCodePoint(0),at=this.peekCodePoint(1),ui=this.peekCodePoint(2);if(mr(He,at,ui)){var re=this.consumeName();return{type:7,value:re}}break;case me:return DB;case Yr:if(qe(M,this.peekCodePoint(0)))return this.reconsumeCodePoint(M),this.consumeIdentLikeToken();break;case Ci:return O1;case ja:if(this.peekCodePoint(0)===Qr)return this.consumeCodePoint(),eb;break;case ne:return xg;case be:return _g;case cA:case xB:var Ft=this.peekCodePoint(0),ni=this.peekCodePoint(1);return Ft===Ln&&(rf(ni)||ni===he)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(M),this.consumeIdentLikeToken();case Qe:if(this.peekCodePoint(0)===Qr)return this.consumeCodePoint(),L1;if(this.peekCodePoint(0)===Qe)return this.consumeCodePoint(),Xa;break;case Xe:if(this.peekCodePoint(0)===Qr)return this.consumeCodePoint(),nf;break;case dc:return hA}return uA(M)?(this.consumeWhiteSpace(),ib):Ao(M)?(this.reconsumeCodePoint(M),this.consumeNumericToken()):Yh(M)?(this.reconsumeCodePoint(M),this.consumeIdentLikeToken()):{type:6,value:u(M)}},I.prototype.consumeCodePoint=function(){var M=this._value.shift();return typeof M>"u"?-1:M},I.prototype.reconsumeCodePoint=function(M){this._value.unshift(M)},I.prototype.peekCodePoint=function(M){return M>=this._value.length?-1:this._value[M]},I.prototype.consumeUnicodeRangeToken=function(){for(var M=[],P=this.consumeCodePoint();rf(P)&&M.length<6;)M.push(P),P=this.consumeCodePoint();for(var R=!1;P===he&&M.length<6;)M.push(P),P=this.consumeCodePoint(),R=!0;if(R){var G=parseInt(u.apply(void 0,M.map(function(pe){return pe===he?yg:pe})),16),Z=parseInt(u.apply(void 0,M.map(function(pe){return pe===he?tf:pe})),16);return{type:30,start:G,end:Z}}var re=parseInt(u.apply(void 0,M),16);if(this.peekCodePoint(0)===Pr&&rf(this.peekCodePoint(1))){this.consumeCodePoint(),P=this.consumeCodePoint();for(var Ae=[];rf(P)&&Ae.length<6;)Ae.push(P),P=this.consumeCodePoint();var Z=parseInt(u.apply(void 0,Ae),16);return{type:30,start:re,end:Z}}else return{type:30,start:re,end:re}},I.prototype.consumeIdentLikeToken=function(){var M=this.consumeName();return M.toLowerCase()==="url"&&this.peekCodePoint(0)===Fl?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Fl?(this.consumeCodePoint(),{type:19,value:M}):{type:20,value:M}},I.prototype.consumeUrlToken=function(){var M=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===dc)return{type:22,value:""};var P=this.peekCodePoint(0);if(P===ha||P===Ki){var R=this.consumeStringToken(this.consumeCodePoint());return R.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===dc||this.peekCodePoint(0)===Vr)?(this.consumeCodePoint(),{type:22,value:R.value}):(this.consumeBadUrlRemnants(),Gi)}for(;;){var G=this.consumeCodePoint();if(G===dc||G===Vr)return{type:22,value:u.apply(void 0,M)};if(uA(G))return this.consumeWhiteSpace(),this.peekCodePoint(0)===dc||this.peekCodePoint(0)===Vr?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,M)}):(this.consumeBadUrlRemnants(),Gi);if(G===Ki||G===ha||G===Fl||SB(G))return this.consumeBadUrlRemnants(),Gi;if(G===Yr)if(qe(G,this.peekCodePoint(0)))M.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Gi;else M.push(G)}},I.prototype.consumeWhiteSpace=function(){for(;uA(this.peekCodePoint(0));)this.consumeCodePoint()},I.prototype.consumeBadUrlRemnants=function(){for(;;){var M=this.consumeCodePoint();if(M===Vr||M===dc)return;qe(M,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},I.prototype.consumeStringSlice=function(M){for(var P=5e4,R="";M>0;){var G=Math.min(P,M);R+=u.apply(void 0,this._value.splice(0,G)),M-=G}return this._value.shift(),R},I.prototype.consumeStringToken=function(M){var P="",R=0;do{var G=this._value[R];if(G===dc||G===void 0||G===M)return P+=this.consumeStringSlice(R),{type:0,value:P};if(G===Zt)return this._value.splice(0,R),MB;if(G===Yr){var Z=this._value[R+1];Z!==dc&&Z!==void 0&&(Z===Zt?(P+=this.consumeStringSlice(R),R=-1,this._value.shift()):qe(G,Z)&&(P+=this.consumeStringSlice(R),P+=u(this.consumeEscapedCodePoint()),R=-1))}R++}while(!0)},I.prototype.consumeNumber=function(){var M=[],P=ze,R=this.peekCodePoint(0);for((R===Ln||R===Pr)&&M.push(this.consumeCodePoint());Ao(this.peekCodePoint(0));)M.push(this.consumeCodePoint());R=this.peekCodePoint(0);var G=this.peekCodePoint(1);if(R===sA&&Ao(G))for(M.push(this.consumeCodePoint(),this.consumeCodePoint()),P=Ji;Ao(this.peekCodePoint(0));)M.push(this.consumeCodePoint());R=this.peekCodePoint(0),G=this.peekCodePoint(1);var Z=this.peekCodePoint(2);if((R===R1||R===eh)&&((G===Ln||G===Pr)&&Ao(Z)||Ao(G)))for(M.push(this.consumeCodePoint(),this.consumeCodePoint()),P=Ji;Ao(this.peekCodePoint(0));)M.push(this.consumeCodePoint());return[P1(M),P]},I.prototype.consumeNumericToken=function(){var M=this.consumeNumber(),P=M[0],R=M[1],G=this.peekCodePoint(0),Z=this.peekCodePoint(1),re=this.peekCodePoint(2);if(mr(G,Z,re)){var Ae=this.consumeName();return{type:15,number:P,flags:R,unit:Ae}}return G===nr?(this.consumeCodePoint(),{type:16,number:P,flags:R}):{type:17,number:P,flags:R}},I.prototype.consumeEscapedCodePoint=function(){var M=this.consumeCodePoint();if(rf(M)){for(var P=u(M);rf(this.peekCodePoint(0))&&P.length<6;)P+=u(this.consumeCodePoint());uA(this.peekCodePoint(0))&&this.consumeCodePoint();var R=parseInt(P,16);return R===0||Jw(R)||R>1114111?_r:R}return M===dc?_r:M},I.prototype.consumeName=function(){for(var M="";;){var P=this.consumeCodePoint();if(hu(P))M+=u(P);else if(qe(P,this.peekCodePoint(0)))M+=u(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(P),M}},I}(),N1=function(){function I(M){this._tokens=M}return I.create=function(M){var P=new F1;return P.write(M),new I(P.read())},I.parseValue=function(M){return I.create(M).parseComponentValue()},I.parseValues=function(M){return I.create(M).parseComponentValues()},I.prototype.parseComponentValue=function(){for(var M=this.consumeToken();M.type===31;)M=this.consumeToken();if(M.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(M);var P=this.consumeComponentValue();do M=this.consumeToken();while(M.type===31);if(M.type===32)return P;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},I.prototype.parseComponentValues=function(){for(var M=[];;){var P=this.consumeComponentValue();if(P.type===32)return M;M.push(P),M.push()}},I.prototype.consumeComponentValue=function(){var M=this.consumeToken();switch(M.type){case 11:case 28:case 2:return this.consumeSimpleBlock(M.type);case 19:return this.consumeFunction(M)}return M},I.prototype.consumeSimpleBlock=function(M){for(var P={type:M,values:[]},R=this.consumeToken();;){if(R.type===32||tl(R,M))return P;this.reconsumeToken(R),P.values.push(this.consumeComponentValue()),R=this.consumeToken()}},I.prototype.consumeFunction=function(M){for(var P={name:M.value,values:[],type:18};;){var R=this.consumeToken();if(R.type===32||R.type===3)return P;this.reconsumeToken(R),P.values.push(this.consumeComponentValue())}},I.prototype.consumeToken=function(){var M=this._tokens.shift();return typeof M>"u"?hA:M},I.prototype.reconsumeToken=function(M){this._tokens.unshift(M)},I}(),dA=function(I){return I.type===15},Nl=function(I){return I.type===17},mn=function(I){return I.type===20},RB=function(I){return I.type===0},qh=function(I,M){return mn(I)&&I.value===M},rb=function(I){return I.type!==31},Rs=function(I){return I.type!==31&&I.type!==4},Ps=function(I){var M=[],P=[];return I.forEach(function(R){if(R.type===4){if(P.length===0)throw new Error("Error parsing function args, zero tokens for arg");M.push(P),P=[];return}R.type!==31&&P.push(R)}),P.length&&M.push(P),M},tl=function(I,M){return M===11&&I.type===12||M===28&&I.type===29?!0:M===2&&I.type===3},du=function(I){return I.type===17||I.type===15},xn=function(I){return I.type===16||du(I)},nb=function(I){return I.length>1?[I[0],I[1]]:[I[0]]},Ya={type:17,number:0,flags:ze},U1={type:16,number:50,flags:ze},fu={type:16,number:100,flags:ze},ps=function(I,M,P){var R=I[0],G=I[1];return[Hn(R,M),Hn(typeof G<"u"?G:R,P)]},Hn=function(I,M){if(I.type===16)return I.number/100*M;if(dA(I))switch(I.unit){case"rem":case"em":return 16*I.number;case"px":default:return I.number}return I.number},wg="deg",af="grad",Gr="rad",fA="turn",V={name:"angle",parse:function(I,M){if(M.type===15)switch(M.unit){case wg:return Math.PI*M.number/180;case af:return Math.PI/200*M.number;case Gr:return M.number;case fA:return Math.PI*2*M.number}throw new Error("Unsupported angle type")}},p=function(I){return I.type===15&&(I.unit===wg||I.unit===af||I.unit===Gr||I.unit===fA)},A=function(I){var M=I.filter(mn).map(function(P){return P.value}).join(" ");switch(M){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ya,Ya];case"to top":case"bottom":return v(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ya,fu];case"to right":case"left":return v(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[fu,fu];case"to bottom":case"top":return v(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[fu,Ya];case"to left":case"right":return v(270)}return 0},v=function(I){return Math.PI*I/180},_={name:"color",parse:function(I,M){if(M.type===18){var P=oe[M.name];if(typeof P>"u")throw new Error('Attempting to parse an unsupported color function "'+M.name+'"');return P(I,M.values)}if(M.type===5){if(M.value.length===3){var R=M.value.substring(0,1),G=M.value.substring(1,2),Z=M.value.substring(2,3);return T(parseInt(R+R,16),parseInt(G+G,16),parseInt(Z+Z,16),1)}if(M.value.length===4){var R=M.value.substring(0,1),G=M.value.substring(1,2),Z=M.value.substring(2,3),re=M.value.substring(3,4);return T(parseInt(R+R,16),parseInt(G+G,16),parseInt(Z+Z,16),parseInt(re+re,16)/255)}if(M.value.length===6){var R=M.value.substring(0,2),G=M.value.substring(2,4),Z=M.value.substring(4,6);return T(parseInt(R,16),parseInt(G,16),parseInt(Z,16),1)}if(M.value.length===8){var R=M.value.substring(0,2),G=M.value.substring(2,4),Z=M.value.substring(4,6),re=M.value.substring(6,8);return T(parseInt(R,16),parseInt(G,16),parseInt(Z,16),parseInt(re,16)/255)}}if(M.type===20){var Ae=we[M.value.toUpperCase()];if(typeof Ae<"u")return Ae}return we.TRANSPARENT}},w=function(I){return(255&I)===0},C=function(I){var M=255&I,P=255&I>>8,R=255&I>>16,G=255&I>>24;return M<255?"rgba("+G+","+R+","+P+","+M/255+")":"rgb("+G+","+R+","+P+")"},T=function(I,M,P,R){return(I<<24|M<<16|P<<8|Math.round(R*255)<<0)>>>0},N=function(I,M){if(I.type===17)return I.number;if(I.type===16){var P=M===3?1:255;return M===3?I.number/100*P:Math.round(I.number/100*P)}return 0},z=function(I,M){var P=M.filter(Rs);if(P.length===3){var R=P.map(N),G=R[0],Z=R[1],re=R[2];return T(G,Z,re,1)}if(P.length===4){var Ae=P.map(N),G=Ae[0],Z=Ae[1],re=Ae[2],pe=Ae[3];return T(G,Z,re,pe)}return 0};function K(I,M,P){return P<0&&(P+=1),P>=1&&(P-=1),P<1/6?(M-I)*P*6+I:P<1/2?M:P<2/3?(M-I)*6*(2/3-P)+I:I}var ee=function(I,M){var P=M.filter(Rs),R=P[0],G=P[1],Z=P[2],re=P[3],Ae=(R.type===17?v(R.number):V.parse(I,R))/(Math.PI*2),pe=xn(G)?G.number/100:0,Pe=xn(Z)?Z.number/100:0,Fe=typeof re<"u"&&xn(re)?Hn(re,1):1;if(pe===0)return T(Pe*255,Pe*255,Pe*255,1);var He=Pe<=.5?Pe*(pe+1):Pe+pe-Pe*pe,at=Pe*2-He,ui=K(at,He,Ae+1/3),Ft=K(at,He,Ae),ni=K(at,He,Ae-1/3);return T(ui*255,Ft*255,ni*255,Fe)},oe={hsl:ee,hsla:ee,rgb:z,rgba:z},ge=function(I,M){return _.parse(I,N1.create(M).parseComponentValue())},we={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},De={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(I,M){return M.map(function(P){if(mn(P))switch(P.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ue={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ke=function(I,M){var P=_.parse(I,M[0]),R=M[1];return R&&xn(R)?{color:P,stop:R}:{color:P,stop:null}},Et=function(I,M){var P=I[0],R=I[I.length-1];P.stop===null&&(P.stop=Ya),R.stop===null&&(R.stop=fu);for(var G=[],Z=0,re=0;re<I.length;re++){var Ae=I[re].stop;if(Ae!==null){var pe=Hn(Ae,M);pe>Z?G.push(pe):G.push(Z),Z=pe}else G.push(null)}for(var Pe=null,re=0;re<G.length;re++){var Fe=G[re];if(Fe===null)Pe===null&&(Pe=re);else if(Pe!==null){for(var He=re-Pe,at=G[Pe-1],ui=(Fe-at)/(He+1),Ft=1;Ft<=He;Ft++)G[Pe+Ft-1]=ui*Ft;Pe=null}}return I.map(function(ni,Tr){var Pi=ni.color;return{color:Pi,stop:Math.max(Math.min(1,G[Tr]/M),0)}})},Jt=function(I,M,P){var R=M/2,G=P/2,Z=Hn(I[0],M)-R,re=G-Hn(I[1],P);return(Math.atan2(re,Z)+Math.PI*2)%(Math.PI*2)},ut=function(I,M,P){var R=typeof I=="number"?I:Jt(I,M,P),G=Math.abs(M*Math.sin(R))+Math.abs(P*Math.cos(R)),Z=M/2,re=P/2,Ae=G/2,pe=Math.sin(R-Math.PI/2)*Ae,Pe=Math.cos(R-Math.PI/2)*Ae;return[G,Z-Pe,Z+Pe,re-pe,re+pe]},er=function(I,M){return Math.sqrt(I*I+M*M)},fr=function(I,M,P,R,G){var Z=[[0,0],[0,M],[I,0],[I,M]];return Z.reduce(function(re,Ae){var pe=Ae[0],Pe=Ae[1],Fe=er(P-pe,R-Pe);return(G?Fe<re.optimumDistance:Fe>re.optimumDistance)?{optimumCorner:Ae,optimumDistance:Fe}:re},{optimumDistance:G?1/0:-1/0,optimumCorner:null}).optimumCorner},As=function(I,M,P,R,G){var Z=0,re=0;switch(I.size){case 0:I.shape===0?Z=re=Math.min(Math.abs(M),Math.abs(M-R),Math.abs(P),Math.abs(P-G)):I.shape===1&&(Z=Math.min(Math.abs(M),Math.abs(M-R)),re=Math.min(Math.abs(P),Math.abs(P-G)));break;case 2:if(I.shape===0)Z=re=Math.min(er(M,P),er(M,P-G),er(M-R,P),er(M-R,P-G));else if(I.shape===1){var Ae=Math.min(Math.abs(P),Math.abs(P-G))/Math.min(Math.abs(M),Math.abs(M-R)),pe=fr(R,G,M,P,!0),Pe=pe[0],Fe=pe[1];Z=er(Pe-M,(Fe-P)/Ae),re=Ae*Z}break;case 1:I.shape===0?Z=re=Math.max(Math.abs(M),Math.abs(M-R),Math.abs(P),Math.abs(P-G)):I.shape===1&&(Z=Math.max(Math.abs(M),Math.abs(M-R)),re=Math.max(Math.abs(P),Math.abs(P-G)));break;case 3:if(I.shape===0)Z=re=Math.max(er(M,P),er(M,P-G),er(M-R,P),er(M-R,P-G));else if(I.shape===1){var Ae=Math.max(Math.abs(P),Math.abs(P-G))/Math.max(Math.abs(M),Math.abs(M-R)),He=fr(R,G,M,P,!1),Pe=He[0],Fe=He[1];Z=er(Pe-M,(Fe-P)/Ae),re=Ae*Z}break}return Array.isArray(I.size)&&(Z=Hn(I.size[0],R),re=I.size.length===2?Hn(I.size[1],G):Z),[Z,re]},Ul=function(I,M){var P=v(180),R=[];return Ps(M).forEach(function(G,Z){if(Z===0){var re=G[0];if(re.type===20&&re.value==="to"){P=A(G);return}else if(p(re)){P=V.parse(I,re);return}}var Ae=Ke(I,G);R.push(Ae)}),{angle:P,stops:R,type:1}},mo=function(I,M){var P=v(180),R=[];return Ps(M).forEach(function(G,Z){if(Z===0){var re=G[0];if(re.type===20&&["top","left","right","bottom"].indexOf(re.value)!==-1){P=A(G);return}else if(p(re)){P=(V.parse(I,re)+v(270))%v(360);return}}var Ae=Ke(I,G);R.push(Ae)}),{angle:P,stops:R,type:1}},Fn=function(I,M){var P=v(180),R=[],G=1,Z=0,re=3,Ae=[];return Ps(M).forEach(function(pe,Pe){var Fe=pe[0];if(Pe===0){if(mn(Fe)&&Fe.value==="linear"){G=1;return}else if(mn(Fe)&&Fe.value==="radial"){G=2;return}}if(Fe.type===18){if(Fe.name==="from"){var He=_.parse(I,Fe.values[0]);R.push({stop:Ya,color:He})}else if(Fe.name==="to"){var He=_.parse(I,Fe.values[0]);R.push({stop:fu,color:He})}else if(Fe.name==="color-stop"){var at=Fe.values.filter(Rs);if(at.length===2){var He=_.parse(I,at[1]),ui=at[0];Nl(ui)&&R.push({stop:{type:16,number:ui.number*100,flags:ui.flags},color:He})}}}}),G===1?{angle:(P+v(180))%v(360),stops:R,type:G}:{size:re,shape:Z,stops:R,position:Ae,type:G}},ao="closest-side",ms="farthest-side",Zh="closest-corner",Jh="farthest-corner",ab="circle",ob="ellipse",s8="cover",l8="contain",Wce=function(I,M){var P=0,R=3,G=[],Z=[];return Ps(M).forEach(function(re,Ae){var pe=!0;if(Ae===0){var Pe=!1;pe=re.reduce(function(He,at){if(Pe)if(mn(at))switch(at.value){case"center":return Z.push(U1),He;case"top":case"left":return Z.push(Ya),He;case"right":case"bottom":return Z.push(fu),He}else(xn(at)||du(at))&&Z.push(at);else if(mn(at))switch(at.value){case ab:return P=0,!1;case ob:return P=1,!1;case"at":return Pe=!0,!1;case ao:return R=0,!1;case s8:case ms:return R=1,!1;case l8:case Zh:return R=2,!1;case Jh:return R=3,!1}else if(du(at)||xn(at))return Array.isArray(R)||(R=[]),R.push(at),!1;return He},pe)}if(pe){var Fe=Ke(I,re);G.push(Fe)}}),{size:R,shape:P,stops:G,position:Z,type:2}},sb=function(I,M){var P=0,R=3,G=[],Z=[];return Ps(M).forEach(function(re,Ae){var pe=!0;if(Ae===0?pe=re.reduce(function(Fe,He){if(mn(He))switch(He.value){case"center":return Z.push(U1),!1;case"top":case"left":return Z.push(Ya),!1;case"right":case"bottom":return Z.push(fu),!1}else if(xn(He)||du(He))return Z.push(He),!1;return Fe},pe):Ae===1&&(pe=re.reduce(function(Fe,He){if(mn(He))switch(He.value){case ab:return P=0,!1;case ob:return P=1,!1;case l8:case ao:return R=0,!1;case ms:return R=1,!1;case Zh:return R=2,!1;case s8:case Jh:return R=3,!1}else if(du(He)||xn(He))return Array.isArray(R)||(R=[]),R.push(He),!1;return Fe},pe)),pe){var Pe=Ke(I,re);G.push(Pe)}}),{size:R,shape:P,stops:G,position:Z,type:2}},jce=function(I){return I.type===1},Kce=function(I){return I.type===2},PB={name:"image",parse:function(I,M){if(M.type===22){var P={url:M.value,type:0};return I.cache.addImage(M.value),P}if(M.type===18){var R=c8[M.name];if(typeof R>"u")throw new Error('Attempting to parse an unsupported image function "'+M.name+'"');return R(I,M.values)}throw new Error("Unsupported image type "+M.type)}};function Xce(I){return!(I.type===20&&I.value==="none")&&(I.type!==18||!!c8[I.name])}for(var c8={"linear-gradient":Ul,"-moz-linear-gradient":mo,"-ms-linear-gradient":mo,"-o-linear-gradient":mo,"-webkit-linear-gradient":mo,"radial-gradient":Wce,"-moz-radial-gradient":sb,"-ms-radial-gradient":sb,"-o-radial-gradient":sb,"-webkit-radial-gradient":sb,"-webkit-gradient":Fn},Yce={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(I,M){if(M.length===0)return[];var P=M[0];return P.type===20&&P.value==="none"?[]:M.filter(function(R){return Rs(R)&&Xce(R)}).map(function(R){return PB.parse(I,R)})}},qce={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(I,M){return M.map(function(P){if(mn(P))switch(P.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Zce={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(I,M){return Ps(M).map(function(P){return P.filter(xn)}).map(nb)}},Jce={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(I,M){return Ps(M).map(function(P){return P.filter(mn).map(function(R){return R.value}).join(" ")}).map($ce)}},$ce=function(I){switch(I){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},k1=function(I){return I.AUTO="auto",I.CONTAIN="contain",I.COVER="cover",I}(k1||{}),eue={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(I,M){return Ps(M).map(function(P){return P.filter(tue)})}},tue=function(I){return mn(I)||xn(I)},lb=function(I){return{name:"border-"+I+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},iue=lb("top"),rue=lb("right"),nue=lb("bottom"),aue=lb("left"),cb=function(I){return{name:"border-radius-"+I,initialValue:"0 0",prefix:!1,type:1,parse:function(M,P){return nb(P.filter(xn))}}},oue=cb("top-left"),sue=cb("top-right"),lue=cb("bottom-right"),cue=cb("bottom-left"),ub=function(I){return{name:"border-"+I+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(M,P){switch(P){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},uue=ub("top"),hue=ub("right"),due=ub("bottom"),fue=ub("left"),hb=function(I){return{name:"border-"+I+"-width",initialValue:"0",type:0,prefix:!1,parse:function(M,P){return dA(P)?P.number:0}}},pue=hb("top"),Aue=hb("right"),mue=hb("bottom"),gue=hb("left"),vue={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yue={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(I,M){switch(M){case"rtl":return 1;case"ltr":default:return 0}}},xue={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(I,M){return M.filter(mn).reduce(function(P,R){return P|_ue(R.value)},0)}},_ue=function(I){switch(I){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},wue={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(I,M){switch(M){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},bue={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(I,M){return M.type===20&&M.value==="normal"?0:M.type===17||M.type===15?M.number:0}},LB=function(I){return I.NORMAL="normal",I.STRICT="strict",I}(LB||{}),Sue={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(I,M){switch(M){case"strict":return LB.STRICT;case"normal":default:return LB.NORMAL}}},Cue={name:"line-height",initialValue:"normal",prefix:!1,type:4},u8=function(I,M){return mn(I)&&I.value==="normal"?1.2*M:I.type===17?M*I.number:xn(I)?Hn(I,M):M},Eue={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(I,M){return M.type===20&&M.value==="none"?null:PB.parse(I,M)}},Tue={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(I,M){switch(M){case"inside":return 0;case"outside":default:return 1}}},OB={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(I,M){switch(M){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},db=function(I){return{name:"margin-"+I,initialValue:"0",prefix:!1,type:4}},Mue=db("top"),Iue=db("right"),Bue=db("bottom"),Due=db("left"),Rue={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(I,M){return M.filter(mn).map(function(P){switch(P.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Pue={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(I,M){switch(M){case"break-word":return"break-word";case"normal":default:return"normal"}}},fb=function(I){return{name:"padding-"+I,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Lue=fb("top"),Oue=fb("right"),Fue=fb("bottom"),Nue=fb("left"),Uue={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(I,M){switch(M){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kue={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(I,M){switch(M){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zue={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(I,M){return M.length===1&&qh(M[0],"none")?[]:Ps(M).map(function(P){for(var R={color:we.TRANSPARENT,offsetX:Ya,offsetY:Ya,blur:Ya},G=0,Z=0;Z<P.length;Z++){var re=P[Z];du(re)?(G===0?R.offsetX=re:G===1?R.offsetY=re:R.blur=re,G++):R.color=_.parse(I,re)}return R})}},Vue={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(I,M){switch(M){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Hue={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(I,M){if(M.type===20&&M.value==="none")return null;if(M.type===18){var P=Wue[M.name];if(typeof P>"u")throw new Error('Attempting to parse an unsupported transform function "'+M.name+'"');return P(M.values)}return null}},Que=function(I){var M=I.filter(function(P){return P.type===17}).map(function(P){return P.number});return M.length===6?M:null},Gue=function(I){var M=I.filter(function(pe){return pe.type===17}).map(function(pe){return pe.number}),P=M[0],R=M[1];M[2],M[3];var G=M[4],Z=M[5];M[6],M[7],M[8],M[9],M[10],M[11];var re=M[12],Ae=M[13];return M[14],M[15],M.length===16?[P,R,G,Z,re,Ae]:null},Wue={matrix:Que,matrix3d:Gue},h8={type:16,number:50,flags:ze},jue=[h8,h8],Kue={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(I,M){var P=M.filter(xn);return P.length!==2?jue:[P[0],P[1]]}},Xue={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(I,M){switch(M){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pb=function(I){return I.NORMAL="normal",I.BREAK_ALL="break-all",I.KEEP_ALL="keep-all",I}(pb||{}),Yue={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(I,M){switch(M){case"break-all":return pb.BREAK_ALL;case"keep-all":return pb.KEEP_ALL;case"normal":default:return pb.NORMAL}}},que={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(I,M){if(M.type===20)return{auto:!0,order:0};if(Nl(M))return{auto:!1,order:M.number};throw new Error("Invalid z-index number parsed")}},d8={name:"time",parse:function(I,M){if(M.type===15)switch(M.unit.toLowerCase()){case"s":return 1e3*M.number;case"ms":return M.number}throw new Error("Unsupported time type")}},Zue={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(I,M){return Nl(M)?M.number:1}},Jue={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$ue={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(I,M){return M.filter(mn).map(function(P){switch(P.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(P){return P!==0})}},ehe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(I,M){var P=[],R=[];return M.forEach(function(G){switch(G.type){case 20:case 0:P.push(G.value);break;case 17:P.push(G.number.toString());break;case 4:R.push(P.join(" ")),P.length=0;break}}),P.length&&R.push(P.join(" ")),R.map(function(G){return G.indexOf(" ")===-1?G:"'"+G+"'"})}},the={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ihe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(I,M){if(Nl(M))return M.number;if(mn(M))switch(M.value){case"bold":return 700;case"normal":default:return 400}return 400}},rhe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(I,M){return M.filter(mn).map(function(P){return P.value})}},nhe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(I,M){switch(M){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},go=function(I,M){return(I&M)!==0},ahe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(I,M){if(M.length===0)return[];var P=M[0];return P.type===20&&P.value==="none"?[]:M}},ohe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(I,M){if(M.length===0)return null;var P=M[0];if(P.type===20&&P.value==="none")return null;for(var R=[],G=M.filter(rb),Z=0;Z<G.length;Z++){var re=G[Z],Ae=G[Z+1];if(re.type===20){var pe=Ae&&Nl(Ae)?Ae.number:1;R.push({counter:re.value,increment:pe})}}return R}},she={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(I,M){if(M.length===0)return[];for(var P=[],R=M.filter(rb),G=0;G<R.length;G++){var Z=R[G],re=R[G+1];if(mn(Z)&&Z.value!=="none"){var Ae=re&&Nl(re)?re.number:0;P.push({counter:Z.value,reset:Ae})}}return P}},lhe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(I,M){return M.filter(dA).map(function(P){return d8.parse(I,P)})}},che={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(I,M){if(M.length===0)return null;var P=M[0];if(P.type===20&&P.value==="none")return null;var R=[],G=M.filter(RB);if(G.length%2!==0)return null;for(var Z=0;Z<G.length;Z+=2){var re=G[Z].value,Ae=G[Z+1].value;R.push({open:re,close:Ae})}return R}},f8=function(I,M,P){if(!I)return"";var R=I[Math.min(M,I.length-1)];return R?P?R.open:R.close:""},uhe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(I,M){return M.length===1&&qh(M[0],"none")?[]:Ps(M).map(function(P){for(var R={color:255,offsetX:Ya,offsetY:Ya,blur:Ya,spread:Ya,inset:!1},G=0,Z=0;Z<P.length;Z++){var re=P[Z];qh(re,"inset")?R.inset=!0:du(re)?(G===0?R.offsetX=re:G===1?R.offsetY=re:G===2?R.blur=re:R.spread=re,G++):R.color=_.parse(I,re)}return R})}},hhe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(I,M){var P=[0,1,2],R=[];return M.filter(mn).forEach(function(G){switch(G.value){case"stroke":R.push(1);break;case"fill":R.push(0);break;case"markers":R.push(2);break}}),P.forEach(function(G){R.indexOf(G)===-1&&R.push(G)}),R}},dhe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fhe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(I,M){return dA(M)?M.number:0}},phe=function(){function I(M,P){var R,G;this.animationDuration=fi(M,lhe,P.animationDuration),this.backgroundClip=fi(M,De,P.backgroundClip),this.backgroundColor=fi(M,Ue,P.backgroundColor),this.backgroundImage=fi(M,Yce,P.backgroundImage),this.backgroundOrigin=fi(M,qce,P.backgroundOrigin),this.backgroundPosition=fi(M,Zce,P.backgroundPosition),this.backgroundRepeat=fi(M,Jce,P.backgroundRepeat),this.backgroundSize=fi(M,eue,P.backgroundSize),this.borderTopColor=fi(M,iue,P.borderTopColor),this.borderRightColor=fi(M,rue,P.borderRightColor),this.borderBottomColor=fi(M,nue,P.borderBottomColor),this.borderLeftColor=fi(M,aue,P.borderLeftColor),this.borderTopLeftRadius=fi(M,oue,P.borderTopLeftRadius),this.borderTopRightRadius=fi(M,sue,P.borderTopRightRadius),this.borderBottomRightRadius=fi(M,lue,P.borderBottomRightRadius),this.borderBottomLeftRadius=fi(M,cue,P.borderBottomLeftRadius),this.borderTopStyle=fi(M,uue,P.borderTopStyle),this.borderRightStyle=fi(M,hue,P.borderRightStyle),this.borderBottomStyle=fi(M,due,P.borderBottomStyle),this.borderLeftStyle=fi(M,fue,P.borderLeftStyle),this.borderTopWidth=fi(M,pue,P.borderTopWidth),this.borderRightWidth=fi(M,Aue,P.borderRightWidth),this.borderBottomWidth=fi(M,mue,P.borderBottomWidth),this.borderLeftWidth=fi(M,gue,P.borderLeftWidth),this.boxShadow=fi(M,uhe,P.boxShadow),this.color=fi(M,vue,P.color),this.direction=fi(M,yue,P.direction),this.display=fi(M,xue,P.display),this.float=fi(M,wue,P.cssFloat),this.fontFamily=fi(M,ehe,P.fontFamily),this.fontSize=fi(M,the,P.fontSize),this.fontStyle=fi(M,nhe,P.fontStyle),this.fontVariant=fi(M,rhe,P.fontVariant),this.fontWeight=fi(M,ihe,P.fontWeight),this.letterSpacing=fi(M,bue,P.letterSpacing),this.lineBreak=fi(M,Sue,P.lineBreak),this.lineHeight=fi(M,Cue,P.lineHeight),this.listStyleImage=fi(M,Eue,P.listStyleImage),this.listStylePosition=fi(M,Tue,P.listStylePosition),this.listStyleType=fi(M,OB,P.listStyleType),this.marginTop=fi(M,Mue,P.marginTop),this.marginRight=fi(M,Iue,P.marginRight),this.marginBottom=fi(M,Bue,P.marginBottom),this.marginLeft=fi(M,Due,P.marginLeft),this.opacity=fi(M,Zue,P.opacity);var Z=fi(M,Rue,P.overflow);this.overflowX=Z[0],this.overflowY=Z[Z.length>1?1:0],this.overflowWrap=fi(M,Pue,P.overflowWrap),this.paddingTop=fi(M,Lue,P.paddingTop),this.paddingRight=fi(M,Oue,P.paddingRight),this.paddingBottom=fi(M,Fue,P.paddingBottom),this.paddingLeft=fi(M,Nue,P.paddingLeft),this.paintOrder=fi(M,hhe,P.paintOrder),this.position=fi(M,kue,P.position),this.textAlign=fi(M,Uue,P.textAlign),this.textDecorationColor=fi(M,Jue,(R=P.textDecorationColor)!==null&&R!==void 0?R:P.color),this.textDecorationLine=fi(M,$ue,(G=P.textDecorationLine)!==null&&G!==void 0?G:P.textDecoration),this.textShadow=fi(M,zue,P.textShadow),this.textTransform=fi(M,Vue,P.textTransform),this.transform=fi(M,Hue,P.transform),this.transformOrigin=fi(M,Kue,P.transformOrigin),this.visibility=fi(M,Xue,P.visibility),this.webkitTextStrokeColor=fi(M,dhe,P.webkitTextStrokeColor),this.webkitTextStrokeWidth=fi(M,fhe,P.webkitTextStrokeWidth),this.wordBreak=fi(M,Yue,P.wordBreak),this.zIndex=fi(M,que,P.zIndex)}return I.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},I.prototype.isTransparent=function(){return w(this.backgroundColor)},I.prototype.isTransformed=function(){return this.transform!==null},I.prototype.isPositioned=function(){return this.position!==0},I.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},I.prototype.isFloating=function(){return this.float!==0},I.prototype.isInlineLevel=function(){return go(this.display,4)||go(this.display,33554432)||go(this.display,268435456)||go(this.display,536870912)||go(this.display,67108864)||go(this.display,134217728)},I}(),Ahe=function(){function I(M,P){this.content=fi(M,ahe,P.content),this.quotes=fi(M,che,P.quotes)}return I}(),p8=function(){function I(M,P){this.counterIncrement=fi(M,ohe,P.counterIncrement),this.counterReset=fi(M,she,P.counterReset)}return I}(),fi=function(I,M,P){var R=new F1,G=P!==null&&typeof P<"u"?P.toString():M.initialValue;R.write(G);var Z=new N1(R.read());switch(M.type){case 2:var re=Z.parseComponentValue();return M.parse(I,mn(re)?re.value:M.initialValue);case 0:return M.parse(I,Z.parseComponentValue());case 1:return M.parse(I,Z.parseComponentValues());case 4:return Z.parseComponentValue();case 3:switch(M.format){case"angle":return V.parse(I,Z.parseComponentValue());case"color":return _.parse(I,Z.parseComponentValue());case"image":return PB.parse(I,Z.parseComponentValue());case"length":var Ae=Z.parseComponentValue();return du(Ae)?Ae:Ya;case"length-percentage":var pe=Z.parseComponentValue();return xn(pe)?pe:Ya;case"time":return d8.parse(I,Z.parseComponentValue())}break}},mhe="data-html2canvas-debug",ghe=function(I){var M=I.getAttribute(mhe);switch(M){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},NB=function(I,M){var P=ghe(I);return P===1||M===P},th=function(){function I(M,P){if(this.context=M,this.textNodes=[],this.elements=[],this.flags=0,NB(P,3))debugger;this.styles=new phe(M,window.getComputedStyle(P,null)),ZB(P)&&(this.styles.animationDuration.some(function(R){return R>0})&&(P.style.animationDuration="0s"),this.styles.transform!==null&&(P.style.transform="none")),this.bounds=s(this.context,P),NB(P,4)&&(this.flags|=16)}return I}(),vhe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",A8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z1=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ab=0;Ab<A8.length;Ab++)z1[A8.charCodeAt(Ab)]=Ab;for(var yhe=function(I){var M=I.length*.75,P=I.length,R,G=0,Z,re,Ae,pe;I[I.length-1]==="="&&(M--,I[I.length-2]==="="&&M--);var Pe=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(M):new Array(M),Fe=Array.isArray(Pe)?Pe:new Uint8Array(Pe);for(R=0;R<P;R+=4)Z=z1[I.charCodeAt(R)],re=z1[I.charCodeAt(R+1)],Ae=z1[I.charCodeAt(R+2)],pe=z1[I.charCodeAt(R+3)],Fe[G++]=Z<<2|re>>4,Fe[G++]=(re&15)<<4|Ae>>2,Fe[G++]=(Ae&3)<<6|pe&63;return Pe},xhe=function(I){for(var M=I.length,P=[],R=0;R<M;R+=2)P.push(I[R+1]<<8|I[R]);return P},_he=function(I){for(var M=I.length,P=[],R=0;R<M;R+=4)P.push(I[R+3]<<24|I[R+2]<<16|I[R+1]<<8|I[R]);return P},pA=5,UB=6+5,kB=2,whe=UB-pA,m8=65536>>pA,bhe=1<<pA,zB=bhe-1,She=1024>>pA,Che=m8+She,Ehe=Che,The=32,Mhe=Ehe+The,Ihe=65536>>UB,Bhe=1<<whe,Dhe=Bhe-1,g8=function(I,M,P){return I.slice?I.slice(M,P):new Uint16Array(Array.prototype.slice.call(I,M,P))},Rhe=function(I,M,P){return I.slice?I.slice(M,P):new Uint32Array(Array.prototype.slice.call(I,M,P))},Phe=function(I,M){var P=yhe(I),R=Array.isArray(P)?_he(P):new Uint32Array(P),G=Array.isArray(P)?xhe(P):new Uint16Array(P),Z=24,re=g8(G,Z/2,R[4]/2),Ae=R[5]===2?g8(G,(Z+R[4])/2):Rhe(R,Math.ceil((Z+R[4])/4));return new Lhe(R[0],R[1],R[2],R[3],re,Ae)},Lhe=function(){function I(M,P,R,G,Z,re){this.initialValue=M,this.errorValue=P,this.highStart=R,this.highValueIndex=G,this.index=Z,this.data=re}return I.prototype.get=function(M){var P;if(M>=0){if(M<55296||M>56319&&M<=65535)return P=this.index[M>>pA],P=(P<<kB)+(M&zB),this.data[P];if(M<=65535)return P=this.index[m8+(M-55296>>pA)],P=(P<<kB)+(M&zB),this.data[P];if(M<this.highStart)return P=Mhe-Ihe+(M>>UB),P=this.index[P],P+=M>>pA&Dhe,P=this.index[P],P=(P<<kB)+(M&zB),this.data[P];if(M<=1114111)return this.data[this.highValueIndex]}return this.errorValue},I}(),v8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ohe=typeof Uint8Array>"u"?[]:new Uint8Array(256),mb=0;mb<v8.length;mb++)Ohe[v8.charCodeAt(mb)]=mb;var Fhe=1,VB=2,HB=3,y8=4,x8=5,Nhe=7,_8=8,QB=9,GB=10,w8=11,b8=12,S8=13,C8=14,WB=15,Uhe=function(I){for(var M=[],P=0,R=I.length;P<R;){var G=I.charCodeAt(P++);if(G>=55296&&G<=56319&&P<R){var Z=I.charCodeAt(P++);(Z&64512)===56320?M.push(((G&1023)<<10)+(Z&1023)+65536):(M.push(G),P--)}else M.push(G)}return M},khe=function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];if(String.fromCodePoint)return String.fromCodePoint.apply(String,I);var P=I.length;if(!P)return"";for(var R=[],G=-1,Z="";++G<P;){var re=I[G];re<=65535?R.push(re):(re-=65536,R.push((re>>10)+55296,re%1024+56320)),(G+1===P||R.length>16384)&&(Z+=String.fromCharCode.apply(String,R),R.length=0)}return Z},zhe=Phe(vhe),fc="\xD7",jB="\xF7",Vhe=function(I){return zhe.get(I)},Hhe=function(I,M,P){var R=P-2,G=M[R],Z=M[P-1],re=M[P];if(Z===VB&&re===HB)return fc;if(Z===VB||Z===HB||Z===y8||re===VB||re===HB||re===y8)return jB;if(Z===_8&&[_8,QB,w8,b8].indexOf(re)!==-1||(Z===w8||Z===QB)&&(re===QB||re===GB)||(Z===b8||Z===GB)&&re===GB||re===S8||re===x8||re===Nhe||Z===Fhe)return fc;if(Z===S8&&re===C8){for(;G===x8;)G=M[--R];if(G===C8)return fc}if(Z===WB&&re===WB){for(var Ae=0;G===WB;)Ae++,G=M[--R];if(Ae%2===0)return fc}return jB},Qhe=function(I){var M=Uhe(I),P=M.length,R=0,G=0,Z=M.map(Vhe);return{next:function(){if(R>=P)return{done:!0,value:null};for(var re=fc;R<P&&(re=Hhe(M,Z,++R))===fc;);if(re!==fc||R===P){var Ae=khe.apply(null,M.slice(G,R));return G=R,{value:Ae,done:!1}}return{done:!0,value:null}}}},Ghe=function(I){for(var M=Qhe(I),P=[],R;!(R=M.next()).done;)R.value&&P.push(R.value.slice());return P},Whe=function(I){var M=123;if(I.createRange){var P=I.createRange();if(P.getBoundingClientRect){var R=I.createElement("boundtest");R.style.height=M+"px",R.style.display="block",I.body.appendChild(R),P.selectNode(R);var G=P.getBoundingClientRect(),Z=Math.round(G.height);if(I.body.removeChild(R),Z===M)return!0}}return!1},jhe=function(I){var M=I.createElement("boundtest");M.style.width="50px",M.style.display="block",M.style.fontSize="12px",M.style.letterSpacing="0px",M.style.wordSpacing="0px",I.body.appendChild(M);var P=I.createRange();M.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var R=M.firstChild,G=c(R.data).map(function(pe){return u(pe)}),Z=0,re={},Ae=G.every(function(pe,Pe){P.setStart(R,Z),P.setEnd(R,Z+pe.length);var Fe=P.getBoundingClientRect();Z+=pe.length;var He=Fe.x>re.x||Fe.y>re.y;return re=Fe,Pe===0?!0:He});return I.body.removeChild(M),Ae},Khe=function(){return typeof new Image().crossOrigin<"u"},Xhe=function(){return typeof new XMLHttpRequest().responseType=="string"},Yhe=function(I){var M=new Image,P=I.createElement("canvas"),R=P.getContext("2d");if(!R)return!1;M.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{R.drawImage(M,0,0),P.toDataURL()}catch{return!1}return!0},E8=function(I){return I[0]===0&&I[1]===255&&I[2]===0&&I[3]===255},qhe=function(I){var M=I.createElement("canvas"),P=100;M.width=P,M.height=P;var R=M.getContext("2d");if(!R)return Promise.reject(!1);R.fillStyle="rgb(0, 255, 0)",R.fillRect(0,0,P,P);var G=new Image,Z=M.toDataURL();G.src=Z;var re=KB(P,P,0,0,G);return R.fillStyle="red",R.fillRect(0,0,P,P),T8(re).then(function(Ae){R.drawImage(Ae,0,0);var pe=R.getImageData(0,0,P,P).data;R.fillStyle="red",R.fillRect(0,0,P,P);var Pe=I.createElement("div");return Pe.style.backgroundImage="url("+Z+")",Pe.style.height=P+"px",E8(pe)?T8(KB(P,P,0,0,Pe)):Promise.reject(!1)}).then(function(Ae){return R.drawImage(Ae,0,0),E8(R.getImageData(0,0,P,P).data)}).catch(function(){return!1})},KB=function(I,M,P,R,G){var Z="http://www.w3.org/2000/svg",re=document.createElementNS(Z,"svg"),Ae=document.createElementNS(Z,"foreignObject");return re.setAttributeNS(null,"width",I.toString()),re.setAttributeNS(null,"height",M.toString()),Ae.setAttributeNS(null,"width","100%"),Ae.setAttributeNS(null,"height","100%"),Ae.setAttributeNS(null,"x",P.toString()),Ae.setAttributeNS(null,"y",R.toString()),Ae.setAttributeNS(null,"externalResourcesRequired","true"),re.appendChild(Ae),Ae.appendChild(G),re},T8=function(I){return new Promise(function(M,P){var R=new Image;R.onload=function(){return M(R)},R.onerror=P,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})},Go={get SUPPORT_RANGE_BOUNDS(){var I=Whe(document);return Object.defineProperty(Go,"SUPPORT_RANGE_BOUNDS",{value:I}),I},get SUPPORT_WORD_BREAKING(){var I=Go.SUPPORT_RANGE_BOUNDS&&jhe(document);return Object.defineProperty(Go,"SUPPORT_WORD_BREAKING",{value:I}),I},get SUPPORT_SVG_DRAWING(){var I=Yhe(document);return Object.defineProperty(Go,"SUPPORT_SVG_DRAWING",{value:I}),I},get SUPPORT_FOREIGNOBJECT_DRAWING(){var I=typeof Array.from=="function"&&typeof window.fetch=="function"?qhe(document):Promise.resolve(!1);return Object.defineProperty(Go,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:I}),I},get SUPPORT_CORS_IMAGES(){var I=Khe();return Object.defineProperty(Go,"SUPPORT_CORS_IMAGES",{value:I}),I},get SUPPORT_RESPONSE_TYPE(){var I=Xhe();return Object.defineProperty(Go,"SUPPORT_RESPONSE_TYPE",{value:I}),I},get SUPPORT_CORS_XHR(){var I="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Go,"SUPPORT_CORS_XHR",{value:I}),I},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var I=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Go,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:I}),I}},V1=function(){function I(M,P){this.text=M,this.bounds=P}return I}(),Zhe=function(I,M,P,R){var G=ede(M,P),Z=[],re=0;return G.forEach(function(Ae){if(P.textDecorationLine.length||Ae.trim().length>0)if(Go.SUPPORT_RANGE_BOUNDS){var pe=M8(R,re,Ae.length).getClientRects();if(pe.length>1){var Pe=XB(Ae),Fe=0;Pe.forEach(function(at){Z.push(new V1(at,o.fromDOMRectList(I,M8(R,Fe+re,at.length).getClientRects()))),Fe+=at.length})}else Z.push(new V1(Ae,o.fromDOMRectList(I,pe)))}else{var He=R.splitText(Ae.length);Z.push(new V1(Ae,Jhe(I,R))),R=He}else Go.SUPPORT_RANGE_BOUNDS||(R=R.splitText(Ae.length));re+=Ae.length}),Z},Jhe=function(I,M){var P=M.ownerDocument;if(P){var R=P.createElement("html2canvaswrapper");R.appendChild(M.cloneNode(!0));var G=M.parentNode;if(G){G.replaceChild(R,M);var Z=s(I,R);return R.firstChild&&G.replaceChild(R.firstChild,R),Z}}return o.EMPTY},M8=function(I,M,P){var R=I.ownerDocument;if(!R)throw new Error("Node has no owner document");var G=R.createRange();return G.setStart(I,M),G.setEnd(I,M+P),G},XB=function(I){if(Go.SUPPORT_NATIVE_TEXT_SEGMENTATION){var M=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(M.segment(I)).map(function(P){return P.segment})}return Ghe(I)},$he=function(I,M){if(Go.SUPPORT_NATIVE_TEXT_SEGMENTATION){var P=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(P.segment(I)).map(function(R){return R.segment})}return ide(I,M)},ede=function(I,M){return M.letterSpacing!==0?XB(I):$he(I,M)},tde=[32,160,4961,65792,65793,4153,4241],ide=function(I,M){for(var P=ai(I,{lineBreak:M.lineBreak,wordBreak:M.overflowWrap==="break-word"?"break-word":M.wordBreak}),R=[],G,Z=function(){if(G.value){var re=G.value.slice(),Ae=c(re),pe="";Ae.forEach(function(Pe){tde.indexOf(Pe)===-1?pe+=u(Pe):(pe.length&&R.push(pe),R.push(u(Pe)),pe="")}),pe.length&&R.push(pe)}};!(G=P.next()).done;)Z();return R},rde=function(){function I(M,P,R){this.text=nde(P.data,R.textTransform),this.textBounds=Zhe(M,this.text,R,P)}return I}(),nde=function(I,M){switch(M){case 1:return I.toLowerCase();case 3:return I.replace(ade,ode);case 2:return I.toUpperCase();default:return I}},ade=/(^|\s|:|-|\(|\))([a-z])/g,ode=function(I,M,P){return I.length>0?M+P.toUpperCase():I},I8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.src=R.currentSrc||R.src,G.intrinsicWidth=R.naturalWidth,G.intrinsicHeight=R.naturalHeight,G.context.cache.addImage(G.src),G}return M}(th),B8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.canvas=R,G.intrinsicWidth=R.width,G.intrinsicHeight=R.height,G}return M}(th),D8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this,Z=new XMLSerializer,re=s(P,R);return R.setAttribute("width",re.width+"px"),R.setAttribute("height",re.height+"px"),G.svg="data:image/svg+xml,"+encodeURIComponent(Z.serializeToString(R)),G.intrinsicWidth=R.width.baseVal.value,G.intrinsicHeight=R.height.baseVal.value,G.context.cache.addImage(G.svg),G}return M}(th),R8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.value=R.value,G}return M}(th),YB=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.start=R.start,G.reversed=typeof R.reversed=="boolean"&&R.reversed===!0,G}return M}(th),sde=[{type:15,flags:0,unit:"px",number:3}],lde=[{type:16,flags:0,number:50}],cde=function(I){return I.width>I.height?new o(I.left+(I.width-I.height)/2,I.top,I.height,I.height):I.width<I.height?new o(I.left,I.top+(I.height-I.width)/2,I.width,I.width):I},ude=function(I){var M=I.type===hde?new Array(I.value.length+1).join("\u2022"):I.value;return M.length===0?I.placeholder||"":M},gb="checkbox",vb="radio",hde="password",P8=707406591,qB=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;switch(G.type=R.type.toLowerCase(),G.checked=R.checked,G.value=ude(R),(G.type===gb||G.type===vb)&&(G.styles.backgroundColor=3739148031,G.styles.borderTopColor=G.styles.borderRightColor=G.styles.borderBottomColor=G.styles.borderLeftColor=2779096575,G.styles.borderTopWidth=G.styles.borderRightWidth=G.styles.borderBottomWidth=G.styles.borderLeftWidth=1,G.styles.borderTopStyle=G.styles.borderRightStyle=G.styles.borderBottomStyle=G.styles.borderLeftStyle=1,G.styles.backgroundClip=[0],G.styles.backgroundOrigin=[0],G.bounds=cde(G.bounds)),G.type){case gb:G.styles.borderTopRightRadius=G.styles.borderTopLeftRadius=G.styles.borderBottomRightRadius=G.styles.borderBottomLeftRadius=sde;break;case vb:G.styles.borderTopRightRadius=G.styles.borderTopLeftRadius=G.styles.borderBottomRightRadius=G.styles.borderBottomLeftRadius=lde;break}return G}return M}(th),L8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this,Z=R.options[R.selectedIndex||0];return G.value=Z&&Z.text||"",G}return M}(th),O8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.value=R.value,G}return M}(th),F8=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;G.src=R.src,G.width=parseInt(R.width,10)||0,G.height=parseInt(R.height,10)||0,G.backgroundColor=G.styles.backgroundColor;try{if(R.contentWindow&&R.contentWindow.document&&R.contentWindow.document.documentElement){G.tree=U8(P,R.contentWindow.document.documentElement);var Z=R.contentWindow.document.documentElement?ge(P,getComputedStyle(R.contentWindow.document.documentElement).backgroundColor):we.TRANSPARENT,re=R.contentWindow.document.body?ge(P,getComputedStyle(R.contentWindow.document.body).backgroundColor):we.TRANSPARENT;G.backgroundColor=w(Z)?w(re)?G.styles.backgroundColor:re:Z}}catch{}return G}return M}(th),dde=["OL","UL","MENU"],yb=function(I,M,P,R){for(var G=M.firstChild,Z=void 0;G;G=Z)if(Z=G.nextSibling,k8(G)&&G.data.trim().length>0)P.textNodes.push(new rde(I,G,P.styles));else if(bg(G))if(W8(G)&&G.assignedNodes)G.assignedNodes().forEach(function(Ae){return yb(I,Ae,P,R)});else{var re=N8(I,G);re.styles.isVisible()&&(fde(G,re,R)?re.flags|=4:pde(re.styles)&&(re.flags|=2),dde.indexOf(G.tagName)!==-1&&(re.flags|=8),P.elements.push(re),G.slot,G.shadowRoot?yb(I,G.shadowRoot,re,R):!_b(G)&&!z8(G)&&!wb(G)&&yb(I,G,re,R))}},N8=function(I,M){return $B(M)?new I8(I,M):V8(M)?new B8(I,M):z8(M)?new D8(I,M):Ade(M)?new R8(I,M):mde(M)?new YB(I,M):gde(M)?new qB(I,M):wb(M)?new L8(I,M):_b(M)?new O8(I,M):Q8(M)?new F8(I,M):new th(I,M)},U8=function(I,M){var P=N8(I,M);return P.flags|=4,yb(I,M,P,P),P},fde=function(I,M,P){return M.styles.isPositionedWithZIndex()||M.styles.opacity<1||M.styles.isTransformed()||JB(I)&&P.styles.isTransparent()},pde=function(I){return I.isPositioned()||I.isFloating()},k8=function(I){return I.nodeType===Node.TEXT_NODE},bg=function(I){return I.nodeType===Node.ELEMENT_NODE},ZB=function(I){return bg(I)&&typeof I.style<"u"&&!xb(I)},xb=function(I){return typeof I.className=="object"},Ade=function(I){return I.tagName==="LI"},mde=function(I){return I.tagName==="OL"},gde=function(I){return I.tagName==="INPUT"},vde=function(I){return I.tagName==="HTML"},z8=function(I){return I.tagName==="svg"},JB=function(I){return I.tagName==="BODY"},V8=function(I){return I.tagName==="CANVAS"},H8=function(I){return I.tagName==="VIDEO"},$B=function(I){return I.tagName==="IMG"},Q8=function(I){return I.tagName==="IFRAME"},G8=function(I){return I.tagName==="STYLE"},yde=function(I){return I.tagName==="SCRIPT"},_b=function(I){return I.tagName==="TEXTAREA"},wb=function(I){return I.tagName==="SELECT"},W8=function(I){return I.tagName==="SLOT"},j8=function(I){return I.tagName.indexOf("-")>0},xde=function(){function I(){this.counters={}}return I.prototype.getCounterValue=function(M){var P=this.counters[M];return P&&P.length?P[P.length-1]:1},I.prototype.getCounterValues=function(M){var P=this.counters[M];return P||[]},I.prototype.pop=function(M){var P=this;M.forEach(function(R){return P.counters[R].pop()})},I.prototype.parse=function(M){var P=this,R=M.counterIncrement,G=M.counterReset,Z=!0;R!==null&&R.forEach(function(Ae){var pe=P.counters[Ae.counter];pe&&Ae.increment!==0&&(Z=!1,pe.length||pe.push(1),pe[Math.max(0,pe.length-1)]+=Ae.increment)});var re=[];return Z&&G.forEach(function(Ae){var pe=P.counters[Ae.counter];re.push(Ae.counter),pe||(pe=P.counters[Ae.counter]=[]),pe.push(Ae.reset)}),re},I}(),K8={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},X8={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},_de={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},wde={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},Sg=function(I,M,P,R,G,Z){return I<M||I>P?Q1(I,G,Z.length>0):R.integers.reduce(function(re,Ae,pe){for(;I>=Ae;)I-=Ae,re+=R.values[pe];return re},"")+Z},Y8=function(I,M,P,R){var G="";do P||I--,G=R(I)+G,I/=M;while(I*M>=M);return G},qa=function(I,M,P,R,G){var Z=P-M+1;return(I<0?"-":"")+(Y8(Math.abs(I),Z,R,function(re){return u(Math.floor(re%Z)+M)})+G)},AA=function(I,M,P){P===void 0&&(P=". ");var R=M.length;return Y8(Math.abs(I),R,!1,function(G){return M[Math.floor(G%R)]})+P},Cg=1,of=2,sf=4,H1=8,$h=function(I,M,P,R,G,Z){if(I<-9999||I>9999)return Q1(I,4,G.length>0);var re=Math.abs(I),Ae=G;if(re===0)return M[0]+Ae;for(var pe=0;re>0&&pe<=4;pe++){var Pe=re%10;Pe===0&&go(Z,Cg)&&Ae!==""?Ae=M[Pe]+Ae:Pe>1||Pe===1&&pe===0||Pe===1&&pe===1&&go(Z,of)||Pe===1&&pe===1&&go(Z,sf)&&I>100||Pe===1&&pe>1&&go(Z,H1)?Ae=M[Pe]+(pe>0?P[pe-1]:"")+Ae:Pe===1&&pe>0&&(Ae=P[pe-1]+Ae),re=Math.floor(re/10)}return(I<0?R:"")+Ae},q8="\u5341\u767E\u5343\u842C",Z8="\u62FE\u4F70\u4EDF\u842C",J8="\u30DE\u30A4\u30CA\u30B9",eD="\uB9C8\uC774\uB108\uC2A4",Q1=function(I,M,P){var R=P?". ":"",G=P?"\u3001":"",Z=P?", ":"",re=P?" ":"";switch(M){case 0:return"\u2022"+re;case 1:return"\u25E6"+re;case 2:return"\u25FE"+re;case 5:var Ae=qa(I,48,57,!0,R);return Ae.length<4?"0"+Ae:Ae;case 4:return AA(I,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",G);case 6:return Sg(I,1,3999,K8,3,R).toLowerCase();case 7:return Sg(I,1,3999,K8,3,R);case 8:return qa(I,945,969,!1,R);case 9:return qa(I,97,122,!1,R);case 10:return qa(I,65,90,!1,R);case 11:return qa(I,1632,1641,!0,R);case 12:case 49:return Sg(I,1,9999,X8,3,R);case 35:return Sg(I,1,9999,X8,3,R).toLowerCase();case 13:return qa(I,2534,2543,!0,R);case 14:case 30:return qa(I,6112,6121,!0,R);case 15:return AA(I,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",G);case 16:return AA(I,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",G);case 17:case 48:return $h(I,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",q8,"\u8CA0",G,of|sf|H1);case 47:return $h(I,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",Z8,"\u8CA0",G,Cg|of|sf|H1);case 42:return $h(I,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",q8,"\u8D1F",G,of|sf|H1);case 41:return $h(I,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",Z8,"\u8D1F",G,Cg|of|sf|H1);case 26:return $h(I,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",J8,G,0);case 25:return $h(I,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",J8,G,Cg|of|sf);case 31:return $h(I,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",eD,Z,Cg|of|sf);case 33:return $h(I,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",eD,Z,0);case 32:return $h(I,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",eD,Z,Cg|of|sf);case 18:return qa(I,2406,2415,!0,R);case 20:return Sg(I,1,19999,wde,3,R);case 21:return qa(I,2790,2799,!0,R);case 22:return qa(I,2662,2671,!0,R);case 22:return Sg(I,1,10999,_de,3,R);case 23:return AA(I,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case 24:return AA(I,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case 27:return qa(I,3302,3311,!0,R);case 28:return AA(I,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",G);case 29:return AA(I,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",G);case 34:return qa(I,3792,3801,!0,R);case 37:return qa(I,6160,6169,!0,R);case 38:return qa(I,4160,4169,!0,R);case 39:return qa(I,2918,2927,!0,R);case 40:return qa(I,1776,1785,!0,R);case 43:return qa(I,3046,3055,!0,R);case 44:return qa(I,3174,3183,!0,R);case 45:return qa(I,3664,3673,!0,R);case 46:return qa(I,3872,3881,!0,R);case 3:default:return qa(I,48,57,!0,R)}},$8="data-html2canvas-ignore",eV=function(){function I(M,P,R){if(this.context=M,this.options=R,this.scrolledElements=[],this.referenceElement=P,this.counters=new xde,this.quoteDepth=0,!P.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(P.ownerDocument.documentElement,!1)}return I.prototype.toIFrame=function(M,P){var R=this,G=bde(M,P);if(!G.contentWindow)return Promise.reject("Unable to find iframe window");var Z=M.defaultView.pageXOffset,re=M.defaultView.pageYOffset,Ae=G.contentWindow,pe=Ae.document,Pe=Ede(G).then(function(){return r(R,void 0,void 0,function(){var Fe,He;return n(this,function(at){switch(at.label){case 0:return this.scrolledElements.forEach(Bde),Ae&&(Ae.scrollTo(P.left,P.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ae.scrollY!==P.top||Ae.scrollX!==P.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ae.scrollX-P.left,Ae.scrollY-P.top,0,0))),Fe=this.options.onclone,He=this.clonedReferenceElement,typeof He>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:pe.fonts&&pe.fonts.ready?[4,pe.fonts.ready]:[3,2];case 1:at.sent(),at.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Cde(pe)]:[3,4];case 3:at.sent(),at.label=4;case 4:return typeof Fe=="function"?[2,Promise.resolve().then(function(){return Fe(pe,He)}).then(function(){return G})]:[2,G]}})})});return pe.open(),pe.write(Mde(document.doctype)+"<html></html>"),Ide(this.referenceElement.ownerDocument,Z,re),pe.replaceChild(pe.adoptNode(this.documentElement),pe.documentElement),pe.close(),Pe},I.prototype.createElementClone=function(M){if(NB(M,2))debugger;if(V8(M))return this.createCanvasClone(M);if(H8(M))return this.createVideoClone(M);if(G8(M))return this.createStyleClone(M);var P=M.cloneNode(!1);return $B(P)&&($B(M)&&M.currentSrc&&M.currentSrc!==M.src&&(P.src=M.currentSrc,P.srcset=""),P.loading==="lazy"&&(P.loading="eager")),j8(P)?this.createCustomElementClone(P):P},I.prototype.createCustomElementClone=function(M){var P=document.createElement("html2canvascustomelement");return tD(M.style,P),P},I.prototype.createStyleClone=function(M){try{var P=M.sheet;if(P&&P.cssRules){var R=[].slice.call(P.cssRules,0).reduce(function(Z,re){return re&&typeof re.cssText=="string"?Z+re.cssText:Z},""),G=M.cloneNode(!1);return G.textContent=R,G}}catch(Z){if(this.context.logger.error("Unable to access cssRules property",Z),Z.name!=="SecurityError")throw Z}return M.cloneNode(!1)},I.prototype.createCanvasClone=function(M){var P;if(this.options.inlineImages&&M.ownerDocument){var R=M.ownerDocument.createElement("img");try{return R.src=M.toDataURL(),R}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",M)}}var G=M.cloneNode(!1);try{G.width=M.width,G.height=M.height;var Z=M.getContext("2d"),re=G.getContext("2d");if(re)if(!this.options.allowTaint&&Z)re.putImageData(Z.getImageData(0,0,M.width,M.height),0,0);else{var Ae=(P=M.getContext("webgl2"))!==null&&P!==void 0?P:M.getContext("webgl");if(Ae){var pe=Ae.getContextAttributes();pe?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",M)}re.drawImage(M,0,0)}return G}catch{this.context.logger.info("Unable to clone canvas as it is tainted",M)}return G},I.prototype.createVideoClone=function(M){var P=M.ownerDocument.createElement("canvas");P.width=M.offsetWidth,P.height=M.offsetHeight;var R=P.getContext("2d");try{return R&&(R.drawImage(M,0,0,P.width,P.height),this.options.allowTaint||R.getImageData(0,0,P.width,P.height)),P}catch{this.context.logger.info("Unable to clone video as it is tainted",M)}var G=M.ownerDocument.createElement("canvas");return G.width=M.offsetWidth,G.height=M.offsetHeight,G},I.prototype.appendChildNode=function(M,P,R){(!bg(P)||!yde(P)&&!P.hasAttribute($8)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(P)))&&(!this.options.copyStyles||!bg(P)||!G8(P))&&M.appendChild(this.cloneNode(P,R))},I.prototype.cloneChildNodes=function(M,P,R){for(var G=this,Z=M.shadowRoot?M.shadowRoot.firstChild:M.firstChild;Z;Z=Z.nextSibling)if(bg(Z)&&W8(Z)&&typeof Z.assignedNodes=="function"){var re=Z.assignedNodes();re.length&&re.forEach(function(Ae){return G.appendChildNode(P,Ae,R)})}else this.appendChildNode(P,Z,R)},I.prototype.cloneNode=function(M,P){if(k8(M))return document.createTextNode(M.data);if(!M.ownerDocument)return M.cloneNode(!1);var R=M.ownerDocument.defaultView;if(R&&bg(M)&&(ZB(M)||xb(M))){var G=this.createElementClone(M);G.style.transitionProperty="none";var Z=R.getComputedStyle(M),re=R.getComputedStyle(M,":before"),Ae=R.getComputedStyle(M,":after");this.referenceElement===M&&ZB(G)&&(this.clonedReferenceElement=G),JB(G)&&Pde(G);var pe=this.counters.parse(new p8(this.context,Z)),Pe=this.resolvePseudoContent(M,G,re,bb.BEFORE);j8(M)&&(P=!0),H8(M)||this.cloneChildNodes(M,G,P),Pe&&G.insertBefore(Pe,G.firstChild);var Fe=this.resolvePseudoContent(M,G,Ae,bb.AFTER);return Fe&&G.appendChild(Fe),this.counters.pop(pe),(Z&&(this.options.copyStyles||xb(M))&&!Q8(M)||P)&&tD(Z,G),(M.scrollTop!==0||M.scrollLeft!==0)&&this.scrolledElements.push([G,M.scrollLeft,M.scrollTop]),(_b(M)||wb(M))&&(_b(G)||wb(G))&&(G.value=M.value),G}return M.cloneNode(!1)},I.prototype.resolvePseudoContent=function(M,P,R,G){var Z=this;if(R){var re=R.content,Ae=P.ownerDocument;if(!(!Ae||!re||re==="none"||re==="-moz-alt-content"||R.display==="none")){this.counters.parse(new p8(this.context,R));var pe=new Ahe(this.context,R),Pe=Ae.createElement("html2canvaspseudoelement");tD(R,Pe),pe.content.forEach(function(He){if(He.type===0)Pe.appendChild(Ae.createTextNode(He.value));else if(He.type===22){var at=Ae.createElement("img");at.src=He.value,at.style.opacity="1",Pe.appendChild(at)}else if(He.type===18){if(He.name==="attr"){var ui=He.values.filter(mn);ui.length&&Pe.appendChild(Ae.createTextNode(M.getAttribute(ui[0].value)||""))}else if(He.name==="counter"){var Ft=He.values.filter(Rs),ni=Ft[0],Tr=Ft[1];if(ni&&mn(ni)){var Pi=Z.counters.getCounterValue(ni.value),wi=Tr&&mn(Tr)?OB.parse(Z.context,Tr.value):3;Pe.appendChild(Ae.createTextNode(Q1(Pi,wi,!1)))}}else if(He.name==="counters"){var gn=He.values.filter(Rs),ni=gn[0],Dr=gn[1],Tr=gn[2];if(ni&&mn(ni)){var ur=Z.counters.getCounterValues(ni.value),ci=Tr&&mn(Tr)?OB.parse(Z.context,Tr.value):3,nn=Dr&&Dr.type===0?Dr.value:"",an=ur.map(function(il){return Q1(il,ci,!1)}).join(nn);Pe.appendChild(Ae.createTextNode(an))}}}else if(He.type===20)switch(He.value){case"open-quote":Pe.appendChild(Ae.createTextNode(f8(pe.quotes,Z.quoteDepth++,!0)));break;case"close-quote":Pe.appendChild(Ae.createTextNode(f8(pe.quotes,--Z.quoteDepth,!1)));break;default:Pe.appendChild(Ae.createTextNode(He.value))}}),Pe.className=iD+" "+rD;var Fe=G===bb.BEFORE?" "+iD:" "+rD;return xb(P)?P.className.baseValue+=Fe:P.className+=Fe,Pe}}},I.destroy=function(M){return M.parentNode?(M.parentNode.removeChild(M),!0):!1},I}(),bb=function(I){return I[I.BEFORE=0]="BEFORE",I[I.AFTER=1]="AFTER",I}(bb||{}),bde=function(I,M){var P=I.createElement("iframe");return P.className="html2canvas-container",P.style.visibility="hidden",P.style.position="fixed",P.style.left="-10000px",P.style.top="0px",P.style.border="0",P.width=M.width.toString(),P.height=M.height.toString(),P.scrolling="no",P.setAttribute($8,"true"),I.body.appendChild(P),P},Sde=function(I){return new Promise(function(M){if(I.complete){M();return}if(!I.src){M();return}I.onload=M,I.onerror=M})},Cde=function(I){return Promise.all([].slice.call(I.images,0).map(Sde))},Ede=function(I){return new Promise(function(M,P){var R=I.contentWindow;if(!R)return P("No window assigned for iframe");var G=R.document;R.onload=I.onload=function(){R.onload=I.onload=null;var Z=setInterval(function(){G.body.childNodes.length>0&&G.readyState==="complete"&&(clearInterval(Z),M(I))},50)}})},Tde=["all","d","content"],tD=function(I,M){for(var P=I.length-1;P>=0;P--){var R=I.item(P);Tde.indexOf(R)===-1&&M.style.setProperty(R,I.getPropertyValue(R))}return M},Mde=function(I){var M="";return I&&(M+="<!DOCTYPE ",I.name&&(M+=I.name),I.internalSubset&&(M+=I.internalSubset),I.publicId&&(M+='"'+I.publicId+'"'),I.systemId&&(M+='"'+I.systemId+'"'),M+=">"),M},Ide=function(I,M,P){I&&I.defaultView&&(M!==I.defaultView.pageXOffset||P!==I.defaultView.pageYOffset)&&I.defaultView.scrollTo(M,P)},Bde=function(I){var M=I[0],P=I[1],R=I[2];M.scrollLeft=P,M.scrollTop=R},Dde=":before",Rde=":after",iD="___html2canvas___pseudoelement_before",rD="___html2canvas___pseudoelement_after",tV=`{
    content: "" !important;
    display: none !important;
}`,Pde=function(I){Lde(I,"."+iD+Dde+tV+`
         .`+rD+Rde+tV)},Lde=function(I,M){var P=I.ownerDocument;if(P){var R=P.createElement("style");R.textContent=M,I.appendChild(R)}},iV=function(){function I(){}return I.getOrigin=function(M){var P=I._link;return P?(P.href=M,P.href=P.href,P.protocol+P.hostname+P.port):"about:blank"},I.isSameOrigin=function(M){return I.getOrigin(M)===I._origin},I.setContext=function(M){I._link=M.document.createElement("a"),I._origin=I.getOrigin(M.location.href)},I._origin="about:blank",I}(),Ode=function(){function I(M,P){this.context=M,this._options=P,this._cache={}}return I.prototype.addImage=function(M){var P=Promise.resolve();return this.has(M)||(aD(M)||kde(M))&&(this._cache[M]=this.loadImage(M)).catch(function(){}),P},I.prototype.match=function(M){return this._cache[M]},I.prototype.loadImage=function(M){return r(this,void 0,void 0,function(){var P,R,G,Z,re=this;return n(this,function(Ae){switch(Ae.label){case 0:return P=iV.isSameOrigin(M),R=!nD(M)&&this._options.useCORS===!0&&Go.SUPPORT_CORS_IMAGES&&!P,G=!nD(M)&&!P&&!aD(M)&&typeof this._options.proxy=="string"&&Go.SUPPORT_CORS_XHR&&!R,!P&&this._options.allowTaint===!1&&!nD(M)&&!aD(M)&&!G&&!R?[2]:(Z=M,G?[4,this.proxy(Z)]:[3,2]);case 1:Z=Ae.sent(),Ae.label=2;case 2:return this.context.logger.debug("Added image "+M.substring(0,256)),[4,new Promise(function(pe,Pe){var Fe=new Image;Fe.onload=function(){return pe(Fe)},Fe.onerror=Pe,(zde(Z)||R)&&(Fe.crossOrigin="anonymous"),Fe.src=Z,Fe.complete===!0&&setTimeout(function(){return pe(Fe)},500),re._options.imageTimeout>0&&setTimeout(function(){return Pe("Timed out ("+re._options.imageTimeout+"ms) loading image")},re._options.imageTimeout)})];case 3:return[2,Ae.sent()]}})})},I.prototype.has=function(M){return typeof this._cache[M]<"u"},I.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},I.prototype.proxy=function(M){var P=this,R=this._options.proxy;if(!R)throw new Error("No proxy defined");var G=M.substring(0,256);return new Promise(function(Z,re){var Ae=Go.SUPPORT_RESPONSE_TYPE?"blob":"text",pe=new XMLHttpRequest;pe.onload=function(){if(pe.status===200)if(Ae==="text")Z(pe.response);else{var He=new FileReader;He.addEventListener("load",function(){return Z(He.result)},!1),He.addEventListener("error",function(at){return re(at)},!1),He.readAsDataURL(pe.response)}else re("Failed to proxy resource "+G+" with status code "+pe.status)},pe.onerror=re;var Pe=R.indexOf("?")>-1?"&":"?";if(pe.open("GET",""+R+Pe+"url="+encodeURIComponent(M)+"&responseType="+Ae),Ae!=="text"&&pe instanceof XMLHttpRequest&&(pe.responseType=Ae),P._options.imageTimeout){var Fe=P._options.imageTimeout;pe.timeout=Fe,pe.ontimeout=function(){return re("Timed out ("+Fe+"ms) proxying "+G)}}pe.send()})},I}(),Fde=/^data:image\/svg\+xml/i,Nde=/^data:image\/.*;base64,/i,Ude=/^data:image\/.*/i,kde=function(I){return Go.SUPPORT_SVG_DRAWING||!Vde(I)},nD=function(I){return Ude.test(I)},zde=function(I){return Nde.test(I)},aD=function(I){return I.substr(0,4)==="blob"},Vde=function(I){return I.substr(-3).toLowerCase()==="svg"||Fde.test(I)},li=function(){function I(M,P){this.type=0,this.x=M,this.y=P}return I.prototype.add=function(M,P){return new I(this.x+M,this.y+P)},I}(),Eg=function(I,M,P){return new li(I.x+(M.x-I.x)*P,I.y+(M.y-I.y)*P)},Sb=function(){function I(M,P,R,G){this.type=1,this.start=M,this.startControl=P,this.endControl=R,this.end=G}return I.prototype.subdivide=function(M,P){var R=Eg(this.start,this.startControl,M),G=Eg(this.startControl,this.endControl,M),Z=Eg(this.endControl,this.end,M),re=Eg(R,G,M),Ae=Eg(G,Z,M),pe=Eg(re,Ae,M);return P?new I(this.start,R,re,pe):new I(pe,Ae,Z,this.end)},I.prototype.add=function(M,P){return new I(this.start.add(M,P),this.startControl.add(M,P),this.endControl.add(M,P),this.end.add(M,P))},I.prototype.reverse=function(){return new I(this.end,this.endControl,this.startControl,this.start)},I}(),pc=function(I){return I.type===1},Hde=function(){function I(M){var P=M.styles,R=M.bounds,G=ps(P.borderTopLeftRadius,R.width,R.height),Z=G[0],re=G[1],Ae=ps(P.borderTopRightRadius,R.width,R.height),pe=Ae[0],Pe=Ae[1],Fe=ps(P.borderBottomRightRadius,R.width,R.height),He=Fe[0],at=Fe[1],ui=ps(P.borderBottomLeftRadius,R.width,R.height),Ft=ui[0],ni=ui[1],Tr=[];Tr.push((Z+pe)/R.width),Tr.push((Ft+He)/R.width),Tr.push((re+ni)/R.height),Tr.push((Pe+at)/R.height);var Pi=Math.max.apply(Math,Tr);Pi>1&&(Z/=Pi,re/=Pi,pe/=Pi,Pe/=Pi,He/=Pi,at/=Pi,Ft/=Pi,ni/=Pi);var wi=R.width-pe,gn=R.height-at,Dr=R.width-He,ur=R.height-ni,ci=P.borderTopWidth,nn=P.borderRightWidth,an=P.borderBottomWidth,dr=P.borderLeftWidth,oo=Hn(P.paddingTop,M.bounds.width),il=Hn(P.paddingRight,M.bounds.width),kl=Hn(P.paddingBottom,M.bounds.width),Qn=Hn(P.paddingLeft,M.bounds.width);this.topLeftBorderDoubleOuterBox=Z>0||re>0?ya(R.left+dr/3,R.top+ci/3,Z-dr/3,re-ci/3,Nn.TOP_LEFT):new li(R.left+dr/3,R.top+ci/3),this.topRightBorderDoubleOuterBox=Z>0||re>0?ya(R.left+wi,R.top+ci/3,pe-nn/3,Pe-ci/3,Nn.TOP_RIGHT):new li(R.left+R.width-nn/3,R.top+ci/3),this.bottomRightBorderDoubleOuterBox=He>0||at>0?ya(R.left+Dr,R.top+gn,He-nn/3,at-an/3,Nn.BOTTOM_RIGHT):new li(R.left+R.width-nn/3,R.top+R.height-an/3),this.bottomLeftBorderDoubleOuterBox=Ft>0||ni>0?ya(R.left+dr/3,R.top+ur,Ft-dr/3,ni-an/3,Nn.BOTTOM_LEFT):new li(R.left+dr/3,R.top+R.height-an/3),this.topLeftBorderDoubleInnerBox=Z>0||re>0?ya(R.left+dr*2/3,R.top+ci*2/3,Z-dr*2/3,re-ci*2/3,Nn.TOP_LEFT):new li(R.left+dr*2/3,R.top+ci*2/3),this.topRightBorderDoubleInnerBox=Z>0||re>0?ya(R.left+wi,R.top+ci*2/3,pe-nn*2/3,Pe-ci*2/3,Nn.TOP_RIGHT):new li(R.left+R.width-nn*2/3,R.top+ci*2/3),this.bottomRightBorderDoubleInnerBox=He>0||at>0?ya(R.left+Dr,R.top+gn,He-nn*2/3,at-an*2/3,Nn.BOTTOM_RIGHT):new li(R.left+R.width-nn*2/3,R.top+R.height-an*2/3),this.bottomLeftBorderDoubleInnerBox=Ft>0||ni>0?ya(R.left+dr*2/3,R.top+ur,Ft-dr*2/3,ni-an*2/3,Nn.BOTTOM_LEFT):new li(R.left+dr*2/3,R.top+R.height-an*2/3),this.topLeftBorderStroke=Z>0||re>0?ya(R.left+dr/2,R.top+ci/2,Z-dr/2,re-ci/2,Nn.TOP_LEFT):new li(R.left+dr/2,R.top+ci/2),this.topRightBorderStroke=Z>0||re>0?ya(R.left+wi,R.top+ci/2,pe-nn/2,Pe-ci/2,Nn.TOP_RIGHT):new li(R.left+R.width-nn/2,R.top+ci/2),this.bottomRightBorderStroke=He>0||at>0?ya(R.left+Dr,R.top+gn,He-nn/2,at-an/2,Nn.BOTTOM_RIGHT):new li(R.left+R.width-nn/2,R.top+R.height-an/2),this.bottomLeftBorderStroke=Ft>0||ni>0?ya(R.left+dr/2,R.top+ur,Ft-dr/2,ni-an/2,Nn.BOTTOM_LEFT):new li(R.left+dr/2,R.top+R.height-an/2),this.topLeftBorderBox=Z>0||re>0?ya(R.left,R.top,Z,re,Nn.TOP_LEFT):new li(R.left,R.top),this.topRightBorderBox=pe>0||Pe>0?ya(R.left+wi,R.top,pe,Pe,Nn.TOP_RIGHT):new li(R.left+R.width,R.top),this.bottomRightBorderBox=He>0||at>0?ya(R.left+Dr,R.top+gn,He,at,Nn.BOTTOM_RIGHT):new li(R.left+R.width,R.top+R.height),this.bottomLeftBorderBox=Ft>0||ni>0?ya(R.left,R.top+ur,Ft,ni,Nn.BOTTOM_LEFT):new li(R.left,R.top+R.height),this.topLeftPaddingBox=Z>0||re>0?ya(R.left+dr,R.top+ci,Math.max(0,Z-dr),Math.max(0,re-ci),Nn.TOP_LEFT):new li(R.left+dr,R.top+ci),this.topRightPaddingBox=pe>0||Pe>0?ya(R.left+Math.min(wi,R.width-nn),R.top+ci,wi>R.width+nn?0:Math.max(0,pe-nn),Math.max(0,Pe-ci),Nn.TOP_RIGHT):new li(R.left+R.width-nn,R.top+ci),this.bottomRightPaddingBox=He>0||at>0?ya(R.left+Math.min(Dr,R.width-dr),R.top+Math.min(gn,R.height-an),Math.max(0,He-nn),Math.max(0,at-an),Nn.BOTTOM_RIGHT):new li(R.left+R.width-nn,R.top+R.height-an),this.bottomLeftPaddingBox=Ft>0||ni>0?ya(R.left+dr,R.top+Math.min(ur,R.height-an),Math.max(0,Ft-dr),Math.max(0,ni-an),Nn.BOTTOM_LEFT):new li(R.left+dr,R.top+R.height-an),this.topLeftContentBox=Z>0||re>0?ya(R.left+dr+Qn,R.top+ci+oo,Math.max(0,Z-(dr+Qn)),Math.max(0,re-(ci+oo)),Nn.TOP_LEFT):new li(R.left+dr+Qn,R.top+ci+oo),this.topRightContentBox=pe>0||Pe>0?ya(R.left+Math.min(wi,R.width+dr+Qn),R.top+ci+oo,wi>R.width+dr+Qn?0:pe-dr+Qn,Pe-(ci+oo),Nn.TOP_RIGHT):new li(R.left+R.width-(nn+il),R.top+ci+oo),this.bottomRightContentBox=He>0||at>0?ya(R.left+Math.min(Dr,R.width-(dr+Qn)),R.top+Math.min(gn,R.height+ci+oo),Math.max(0,He-(nn+il)),at-(an+kl),Nn.BOTTOM_RIGHT):new li(R.left+R.width-(nn+il),R.top+R.height-(an+kl)),this.bottomLeftContentBox=Ft>0||ni>0?ya(R.left+dr+Qn,R.top+ur,Math.max(0,Ft-(dr+Qn)),ni-(an+kl),Nn.BOTTOM_LEFT):new li(R.left+dr+Qn,R.top+R.height-(an+kl))}return I}(),Nn=function(I){return I[I.TOP_LEFT=0]="TOP_LEFT",I[I.TOP_RIGHT=1]="TOP_RIGHT",I[I.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",I[I.BOTTOM_LEFT=3]="BOTTOM_LEFT",I}(Nn||{}),ya=function(I,M,P,R,G){var Z=4*((Math.sqrt(2)-1)/3),re=P*Z,Ae=R*Z,pe=I+P,Pe=M+R;switch(G){case Nn.TOP_LEFT:return new Sb(new li(I,Pe),new li(I,Pe-Ae),new li(pe-re,M),new li(pe,M));case Nn.TOP_RIGHT:return new Sb(new li(I,M),new li(I+re,M),new li(pe,Pe-Ae),new li(pe,Pe));case Nn.BOTTOM_RIGHT:return new Sb(new li(pe,M),new li(pe,M+Ae),new li(I+re,Pe),new li(I,Pe));case Nn.BOTTOM_LEFT:default:return new Sb(new li(pe,Pe),new li(pe-re,Pe),new li(I,M+Ae),new li(I,M))}},Cb=function(I){return[I.topLeftBorderBox,I.topRightBorderBox,I.bottomRightBorderBox,I.bottomLeftBorderBox]},Qde=function(I){return[I.topLeftContentBox,I.topRightContentBox,I.bottomRightContentBox,I.bottomLeftContentBox]},Eb=function(I){return[I.topLeftPaddingBox,I.topRightPaddingBox,I.bottomRightPaddingBox,I.bottomLeftPaddingBox]},Gde=function(){function I(M,P,R){this.offsetX=M,this.offsetY=P,this.matrix=R,this.type=0,this.target=6}return I}(),Tb=function(){function I(M,P){this.path=M,this.target=P,this.type=1}return I}(),Wde=function(){function I(M){this.opacity=M,this.type=2,this.target=6}return I}(),jde=function(I){return I.type===0},rV=function(I){return I.type===1},Kde=function(I){return I.type===2},nV=function(I,M){return I.length===M.length?I.some(function(P,R){return P===M[R]}):!1},Xde=function(I,M,P,R,G){return I.map(function(Z,re){switch(re){case 0:return Z.add(M,P);case 1:return Z.add(M+R,P);case 2:return Z.add(M+R,P+G);case 3:return Z.add(M,P+G)}return Z})},aV=function(){function I(M){this.element=M,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return I}(),oV=function(){function I(M,P){if(this.container=M,this.parent=P,this.effects=[],this.curves=new Hde(this.container),this.container.styles.opacity<1&&this.effects.push(new Wde(this.container.styles.opacity)),this.container.styles.transform!==null){var R=this.container.bounds.left+this.container.styles.transformOrigin[0].number,G=this.container.bounds.top+this.container.styles.transformOrigin[1].number,Z=this.container.styles.transform;this.effects.push(new Gde(R,G,Z))}if(this.container.styles.overflowX!==0){var re=Cb(this.curves),Ae=Eb(this.curves);nV(re,Ae)?this.effects.push(new Tb(re,6)):(this.effects.push(new Tb(re,2)),this.effects.push(new Tb(Ae,4)))}}return I.prototype.getEffects=function(M){for(var P=[2,3].indexOf(this.container.styles.position)===-1,R=this.parent,G=this.effects.slice(0);R;){var Z=R.effects.filter(function(pe){return!rV(pe)});if(P||R.container.styles.position!==0||!R.parent){if(G.unshift.apply(G,Z),P=[2,3].indexOf(R.container.styles.position)===-1,R.container.styles.overflowX!==0){var re=Cb(R.curves),Ae=Eb(R.curves);nV(re,Ae)||G.unshift(new Tb(Ae,6))}}else G.unshift.apply(G,Z);R=R.parent}return G.filter(function(pe){return go(pe.target,M)})},I}(),oD=function(I,M,P,R){I.container.elements.forEach(function(G){var Z=go(G.flags,4),re=go(G.flags,2),Ae=new oV(G,I);go(G.styles.display,2048)&&R.push(Ae);var pe=go(G.flags,8)?[]:R;if(Z||re){var Pe=Z||G.styles.isPositioned()?P:M,Fe=new aV(Ae);if(G.styles.isPositioned()||G.styles.opacity<1||G.styles.isTransformed()){var He=G.styles.zIndex.order;if(He<0){var at=0;Pe.negativeZIndex.some(function(Ft,ni){return He>Ft.element.container.styles.zIndex.order?(at=ni,!1):at>0}),Pe.negativeZIndex.splice(at,0,Fe)}else if(He>0){var ui=0;Pe.positiveZIndex.some(function(Ft,ni){return He>=Ft.element.container.styles.zIndex.order?(ui=ni+1,!1):ui>0}),Pe.positiveZIndex.splice(ui,0,Fe)}else Pe.zeroOrAutoZIndexOrTransformedOrOpacity.push(Fe)}else G.styles.isFloating()?Pe.nonPositionedFloats.push(Fe):Pe.nonPositionedInlineLevel.push(Fe);oD(Ae,Fe,Z?Fe:P,pe)}else G.styles.isInlineLevel()?M.inlineLevel.push(Ae):M.nonInlineLevel.push(Ae),oD(Ae,M,P,pe);go(G.flags,8)&&sV(G,pe)})},sV=function(I,M){for(var P=I instanceof YB?I.start:1,R=I instanceof YB?I.reversed:!1,G=0;G<M.length;G++){var Z=M[G];Z.container instanceof R8&&typeof Z.container.value=="number"&&Z.container.value!==0&&(P=Z.container.value),Z.listValue=Q1(P,Z.container.styles.listStyleType,!0),P+=R?-1:1}},Yde=function(I){var M=new oV(I,null),P=new aV(M),R=[];return oD(M,P,P,R),sV(M.container,R),P},lV=function(I,M){switch(M){case 0:return Ac(I.topLeftBorderBox,I.topLeftPaddingBox,I.topRightBorderBox,I.topRightPaddingBox);case 1:return Ac(I.topRightBorderBox,I.topRightPaddingBox,I.bottomRightBorderBox,I.bottomRightPaddingBox);case 2:return Ac(I.bottomRightBorderBox,I.bottomRightPaddingBox,I.bottomLeftBorderBox,I.bottomLeftPaddingBox);case 3:default:return Ac(I.bottomLeftBorderBox,I.bottomLeftPaddingBox,I.topLeftBorderBox,I.topLeftPaddingBox)}},qde=function(I,M){switch(M){case 0:return Ac(I.topLeftBorderBox,I.topLeftBorderDoubleOuterBox,I.topRightBorderBox,I.topRightBorderDoubleOuterBox);case 1:return Ac(I.topRightBorderBox,I.topRightBorderDoubleOuterBox,I.bottomRightBorderBox,I.bottomRightBorderDoubleOuterBox);case 2:return Ac(I.bottomRightBorderBox,I.bottomRightBorderDoubleOuterBox,I.bottomLeftBorderBox,I.bottomLeftBorderDoubleOuterBox);case 3:default:return Ac(I.bottomLeftBorderBox,I.bottomLeftBorderDoubleOuterBox,I.topLeftBorderBox,I.topLeftBorderDoubleOuterBox)}},Zde=function(I,M){switch(M){case 0:return Ac(I.topLeftBorderDoubleInnerBox,I.topLeftPaddingBox,I.topRightBorderDoubleInnerBox,I.topRightPaddingBox);case 1:return Ac(I.topRightBorderDoubleInnerBox,I.topRightPaddingBox,I.bottomRightBorderDoubleInnerBox,I.bottomRightPaddingBox);case 2:return Ac(I.bottomRightBorderDoubleInnerBox,I.bottomRightPaddingBox,I.bottomLeftBorderDoubleInnerBox,I.bottomLeftPaddingBox);case 3:default:return Ac(I.bottomLeftBorderDoubleInnerBox,I.bottomLeftPaddingBox,I.topLeftBorderDoubleInnerBox,I.topLeftPaddingBox)}},Jde=function(I,M){switch(M){case 0:return Mb(I.topLeftBorderStroke,I.topRightBorderStroke);case 1:return Mb(I.topRightBorderStroke,I.bottomRightBorderStroke);case 2:return Mb(I.bottomRightBorderStroke,I.bottomLeftBorderStroke);case 3:default:return Mb(I.bottomLeftBorderStroke,I.topLeftBorderStroke)}},Mb=function(I,M){var P=[];return pc(I)?P.push(I.subdivide(.5,!1)):P.push(I),pc(M)?P.push(M.subdivide(.5,!0)):P.push(M),P},Ac=function(I,M,P,R){var G=[];return pc(I)?G.push(I.subdivide(.5,!1)):G.push(I),pc(P)?G.push(P.subdivide(.5,!0)):G.push(P),pc(R)?G.push(R.subdivide(.5,!0).reverse()):G.push(R),pc(M)?G.push(M.subdivide(.5,!1).reverse()):G.push(M),G},cV=function(I){var M=I.bounds,P=I.styles;return M.add(P.borderLeftWidth,P.borderTopWidth,-(P.borderRightWidth+P.borderLeftWidth),-(P.borderTopWidth+P.borderBottomWidth))},Ib=function(I){var M=I.styles,P=I.bounds,R=Hn(M.paddingLeft,P.width),G=Hn(M.paddingRight,P.width),Z=Hn(M.paddingTop,P.width),re=Hn(M.paddingBottom,P.width);return P.add(R+M.borderLeftWidth,Z+M.borderTopWidth,-(M.borderRightWidth+M.borderLeftWidth+R+G),-(M.borderTopWidth+M.borderBottomWidth+Z+re))},$de=function(I,M){return I===0?M.bounds:I===2?Ib(M):cV(M)},efe=function(I,M){return I===0?M.bounds:I===2?Ib(M):cV(M)},sD=function(I,M,P){var R=$de(Mg(I.styles.backgroundOrigin,M),I),G=efe(Mg(I.styles.backgroundClip,M),I),Z=tfe(Mg(I.styles.backgroundSize,M),P,R),re=Z[0],Ae=Z[1],pe=ps(Mg(I.styles.backgroundPosition,M),R.width-re,R.height-Ae),Pe=ife(Mg(I.styles.backgroundRepeat,M),pe,Z,R,G),Fe=Math.round(R.left+pe[0]),He=Math.round(R.top+pe[1]);return[Pe,Fe,He,re,Ae]},Tg=function(I){return mn(I)&&I.value===k1.AUTO},Bb=function(I){return typeof I=="number"},tfe=function(I,M,P){var R=M[0],G=M[1],Z=M[2],re=I[0],Ae=I[1];if(!re)return[0,0];if(xn(re)&&Ae&&xn(Ae))return[Hn(re,P.width),Hn(Ae,P.height)];var pe=Bb(Z);if(mn(re)&&(re.value===k1.CONTAIN||re.value===k1.COVER)){if(Bb(Z)){var Pe=P.width/P.height;return Pe<Z!=(re.value===k1.COVER)?[P.width,P.width/Z]:[P.height*Z,P.height]}return[P.width,P.height]}var Fe=Bb(R),He=Bb(G),at=Fe||He;if(Tg(re)&&(!Ae||Tg(Ae))){if(Fe&&He)return[R,G];if(!pe&&!at)return[P.width,P.height];if(at&&pe){var ui=Fe?R:G*Z,Ft=He?G:R/Z;return[ui,Ft]}var ni=Fe?R:P.width,Tr=He?G:P.height;return[ni,Tr]}if(pe){var Pi=0,wi=0;return xn(re)?Pi=Hn(re,P.width):xn(Ae)&&(wi=Hn(Ae,P.height)),Tg(re)?Pi=wi*Z:(!Ae||Tg(Ae))&&(wi=Pi/Z),[Pi,wi]}var gn=null,Dr=null;if(xn(re)?gn=Hn(re,P.width):Ae&&xn(Ae)&&(Dr=Hn(Ae,P.height)),gn!==null&&(!Ae||Tg(Ae))&&(Dr=Fe&&He?gn/R*G:P.height),Dr!==null&&Tg(re)&&(gn=Fe&&He?Dr/G*R:P.width),gn!==null&&Dr!==null)return[gn,Dr];throw new Error("Unable to calculate background-size for element")},Mg=function(I,M){var P=I[M];return typeof P>"u"?I[0]:P},ife=function(I,M,P,R,G){var Z=M[0],re=M[1],Ae=P[0],pe=P[1];switch(I){case 2:return[new li(Math.round(R.left),Math.round(R.top+re)),new li(Math.round(R.left+R.width),Math.round(R.top+re)),new li(Math.round(R.left+R.width),Math.round(pe+R.top+re)),new li(Math.round(R.left),Math.round(pe+R.top+re))];case 3:return[new li(Math.round(R.left+Z),Math.round(R.top)),new li(Math.round(R.left+Z+Ae),Math.round(R.top)),new li(Math.round(R.left+Z+Ae),Math.round(R.height+R.top)),new li(Math.round(R.left+Z),Math.round(R.height+R.top))];case 1:return[new li(Math.round(R.left+Z),Math.round(R.top+re)),new li(Math.round(R.left+Z+Ae),Math.round(R.top+re)),new li(Math.round(R.left+Z+Ae),Math.round(R.top+re+pe)),new li(Math.round(R.left+Z),Math.round(R.top+re+pe))];default:return[new li(Math.round(G.left),Math.round(G.top)),new li(Math.round(G.left+G.width),Math.round(G.top)),new li(Math.round(G.left+G.width),Math.round(G.height+G.top)),new li(Math.round(G.left),Math.round(G.height+G.top))]}},rfe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",uV="Hidden Text",nfe=function(){function I(M){this._data={},this._document=M}return I.prototype.parseMetrics=function(M,P){var R=this._document.createElement("div"),G=this._document.createElement("img"),Z=this._document.createElement("span"),re=this._document.body;R.style.visibility="hidden",R.style.fontFamily=M,R.style.fontSize=P,R.style.margin="0",R.style.padding="0",R.style.whiteSpace="nowrap",re.appendChild(R),G.src=rfe,G.width=1,G.height=1,G.style.margin="0",G.style.padding="0",G.style.verticalAlign="baseline",Z.style.fontFamily=M,Z.style.fontSize=P,Z.style.margin="0",Z.style.padding="0",Z.appendChild(this._document.createTextNode(uV)),R.appendChild(Z),R.appendChild(G);var Ae=G.offsetTop-Z.offsetTop+2;R.removeChild(Z),R.appendChild(this._document.createTextNode(uV)),R.style.lineHeight="normal",G.style.verticalAlign="super";var pe=G.offsetTop-R.offsetTop+2;return re.removeChild(R),{baseline:Ae,middle:pe}},I.prototype.getMetrics=function(M,P){var R=M+" "+P;return typeof this._data[R]>"u"&&(this._data[R]=this.parseMetrics(M,P)),this._data[R]},I}(),hV=function(){function I(M,P){this.context=M,this.options=P}return I}(),afe=1e4,ofe=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G._activeEffects=[],G.canvas=R.canvas?R.canvas:document.createElement("canvas"),G.ctx=G.canvas.getContext("2d"),R.canvas||(G.canvas.width=Math.floor(R.width*R.scale),G.canvas.height=Math.floor(R.height*R.scale),G.canvas.style.width=R.width+"px",G.canvas.style.height=R.height+"px"),G.fontMetrics=new nfe(document),G.ctx.scale(G.options.scale,G.options.scale),G.ctx.translate(-R.x,-R.y),G.ctx.textBaseline="bottom",G._activeEffects=[],G.context.logger.debug("Canvas renderer initialized ("+R.width+"x"+R.height+") with scale "+R.scale),G}return M.prototype.applyEffects=function(P){for(var R=this;this._activeEffects.length;)this.popEffect();P.forEach(function(G){return R.applyEffect(G)})},M.prototype.applyEffect=function(P){this.ctx.save(),Kde(P)&&(this.ctx.globalAlpha=P.opacity),jde(P)&&(this.ctx.translate(P.offsetX,P.offsetY),this.ctx.transform(P.matrix[0],P.matrix[1],P.matrix[2],P.matrix[3],P.matrix[4],P.matrix[5]),this.ctx.translate(-P.offsetX,-P.offsetY)),rV(P)&&(this.path(P.path),this.ctx.clip()),this._activeEffects.push(P)},M.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},M.prototype.renderStack=function(P){return r(this,void 0,void 0,function(){var R;return n(this,function(G){switch(G.label){case 0:return R=P.element.container.styles,R.isVisible()?[4,this.renderStackContent(P)]:[3,2];case 1:G.sent(),G.label=2;case 2:return[2]}})})},M.prototype.renderNode=function(P){return r(this,void 0,void 0,function(){return n(this,function(R){switch(R.label){case 0:if(go(P.container.flags,16))debugger;return P.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(P)]:[3,3];case 1:return R.sent(),[4,this.renderNodeContent(P)];case 2:R.sent(),R.label=3;case 3:return[2]}})})},M.prototype.renderTextWithLetterSpacing=function(P,R,G){var Z=this;if(R===0)this.ctx.fillText(P.text,P.bounds.left,P.bounds.top+G);else{var re=XB(P.text);re.reduce(function(Ae,pe){return Z.ctx.fillText(pe,Ae,P.bounds.top+G),Ae+Z.ctx.measureText(pe).width},P.bounds.left)}},M.prototype.createFontStyle=function(P){var R=P.fontVariant.filter(function(re){return re==="normal"||re==="small-caps"}).join(""),G=hfe(P.fontFamily).join(", "),Z=dA(P.fontSize)?""+P.fontSize.number+P.fontSize.unit:P.fontSize.number+"px";return[[P.fontStyle,R,P.fontWeight,Z,G].join(" "),G,Z]},M.prototype.renderTextNode=function(P,R){return r(this,void 0,void 0,function(){var G,Z,re,Ae,pe,Pe,Fe,He,at=this;return n(this,function(ui){return G=this.createFontStyle(R),Z=G[0],re=G[1],Ae=G[2],this.ctx.font=Z,this.ctx.direction=R.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",pe=this.fontMetrics.getMetrics(re,Ae),Pe=pe.baseline,Fe=pe.middle,He=R.paintOrder,P.textBounds.forEach(function(Ft){He.forEach(function(ni){switch(ni){case 0:at.ctx.fillStyle=C(R.color),at.renderTextWithLetterSpacing(Ft,R.letterSpacing,Pe);var Tr=R.textShadow;Tr.length&&Ft.text.trim().length&&(Tr.slice(0).reverse().forEach(function(Pi){at.ctx.shadowColor=C(Pi.color),at.ctx.shadowOffsetX=Pi.offsetX.number*at.options.scale,at.ctx.shadowOffsetY=Pi.offsetY.number*at.options.scale,at.ctx.shadowBlur=Pi.blur.number,at.renderTextWithLetterSpacing(Ft,R.letterSpacing,Pe)}),at.ctx.shadowColor="",at.ctx.shadowOffsetX=0,at.ctx.shadowOffsetY=0,at.ctx.shadowBlur=0),R.textDecorationLine.length&&(at.ctx.fillStyle=C(R.textDecorationColor||R.color),R.textDecorationLine.forEach(function(Pi){switch(Pi){case 1:at.ctx.fillRect(Ft.bounds.left,Math.round(Ft.bounds.top+Pe),Ft.bounds.width,1);break;case 2:at.ctx.fillRect(Ft.bounds.left,Math.round(Ft.bounds.top),Ft.bounds.width,1);break;case 3:at.ctx.fillRect(Ft.bounds.left,Math.ceil(Ft.bounds.top+Fe),Ft.bounds.width,1);break}}));break;case 1:R.webkitTextStrokeWidth&&Ft.text.trim().length&&(at.ctx.strokeStyle=C(R.webkitTextStrokeColor),at.ctx.lineWidth=R.webkitTextStrokeWidth,at.ctx.lineJoin=window.chrome?"miter":"round",at.ctx.strokeText(Ft.text,Ft.bounds.left,Ft.bounds.top+Pe)),at.ctx.strokeStyle="",at.ctx.lineWidth=0,at.ctx.lineJoin="miter";break}})}),[2]})})},M.prototype.renderReplacedElement=function(P,R,G){if(G&&P.intrinsicWidth>0&&P.intrinsicHeight>0){var Z=Ib(P),re=Eb(R);this.path(re),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(G,0,0,P.intrinsicWidth,P.intrinsicHeight,Z.left,Z.top,Z.width,Z.height),this.ctx.restore()}},M.prototype.renderNodeContent=function(P){return r(this,void 0,void 0,function(){var R,G,Z,re,Ae,pe,wi,wi,Pe,Fe,He,at,Dr,ui,Ft,ur,ni,Tr,Pi,wi,gn,Dr,ur;return n(this,function(ci){switch(ci.label){case 0:this.applyEffects(P.getEffects(4)),R=P.container,G=P.curves,Z=R.styles,re=0,Ae=R.textNodes,ci.label=1;case 1:return re<Ae.length?(pe=Ae[re],[4,this.renderTextNode(pe,Z)]):[3,4];case 2:ci.sent(),ci.label=3;case 3:return re++,[3,1];case 4:if(!(R instanceof I8))return[3,8];ci.label=5;case 5:return ci.trys.push([5,7,,8]),[4,this.context.cache.match(R.src)];case 6:return wi=ci.sent(),this.renderReplacedElement(R,G,wi),[3,8];case 7:return ci.sent(),this.context.logger.error("Error loading image "+R.src),[3,8];case 8:if(R instanceof B8&&this.renderReplacedElement(R,G,R.canvas),!(R instanceof D8))return[3,12];ci.label=9;case 9:return ci.trys.push([9,11,,12]),[4,this.context.cache.match(R.svg)];case 10:return wi=ci.sent(),this.renderReplacedElement(R,G,wi),[3,12];case 11:return ci.sent(),this.context.logger.error("Error loading svg "+R.svg.substring(0,255)),[3,12];case 12:return R instanceof F8&&R.tree?(Pe=new M(this.context,{scale:this.options.scale,backgroundColor:R.backgroundColor,x:0,y:0,width:R.width,height:R.height}),[4,Pe.render(R.tree)]):[3,14];case 13:Fe=ci.sent(),R.width&&R.height&&this.ctx.drawImage(Fe,0,0,R.width,R.height,R.bounds.left,R.bounds.top,R.bounds.width,R.bounds.height),ci.label=14;case 14:if(R instanceof qB&&(He=Math.min(R.bounds.width,R.bounds.height),R.type===gb?R.checked&&(this.ctx.save(),this.path([new li(R.bounds.left+He*.39363,R.bounds.top+He*.79),new li(R.bounds.left+He*.16,R.bounds.top+He*.5549),new li(R.bounds.left+He*.27347,R.bounds.top+He*.44071),new li(R.bounds.left+He*.39694,R.bounds.top+He*.5649),new li(R.bounds.left+He*.72983,R.bounds.top+He*.23),new li(R.bounds.left+He*.84,R.bounds.top+He*.34085),new li(R.bounds.left+He*.39363,R.bounds.top+He*.79)]),this.ctx.fillStyle=C(P8),this.ctx.fill(),this.ctx.restore()):R.type===vb&&R.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(R.bounds.left+He/2,R.bounds.top+He/2,He/4,0,Math.PI*2,!0),this.ctx.fillStyle=C(P8),this.ctx.fill(),this.ctx.restore())),sfe(R)&&R.value.length){switch(at=this.createFontStyle(Z),Dr=at[0],ui=at[1],Ft=this.fontMetrics.getMetrics(Dr,ui).baseline,this.ctx.font=Dr,this.ctx.fillStyle=C(Z.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=cfe(R.styles.textAlign),ur=Ib(R),ni=0,R.styles.textAlign){case 1:ni+=ur.width/2;break;case 2:ni+=ur.width;break}Tr=ur.add(ni,0,0,-ur.height/2+1),this.ctx.save(),this.path([new li(ur.left,ur.top),new li(ur.left+ur.width,ur.top),new li(ur.left+ur.width,ur.top+ur.height),new li(ur.left,ur.top+ur.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new V1(R.value,Tr),Z.letterSpacing,Ft),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!go(R.styles.display,2048))return[3,20];if(R.styles.listStyleImage===null)return[3,19];if(Pi=R.styles.listStyleImage,Pi.type!==0)return[3,18];wi=void 0,gn=Pi.url,ci.label=15;case 15:return ci.trys.push([15,17,,18]),[4,this.context.cache.match(gn)];case 16:return wi=ci.sent(),this.ctx.drawImage(wi,R.bounds.left-(wi.width+10),R.bounds.top),[3,18];case 17:return ci.sent(),this.context.logger.error("Error loading list-style-image "+gn),[3,18];case 18:return[3,20];case 19:P.listValue&&R.styles.listStyleType!==-1&&(Dr=this.createFontStyle(Z)[0],this.ctx.font=Dr,this.ctx.fillStyle=C(Z.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ur=new o(R.bounds.left,R.bounds.top+Hn(R.styles.paddingTop,R.bounds.width),R.bounds.width,u8(Z.lineHeight,Z.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new V1(P.listValue,ur),Z.letterSpacing,u8(Z.lineHeight,Z.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ci.label=20;case 20:return[2]}})})},M.prototype.renderStackContent=function(P){return r(this,void 0,void 0,function(){var R,G,Pi,Z,re,Pi,Ae,pe,Pi,Pe,Fe,Pi,He,at,Pi,ui,Ft,Pi,ni,Tr,Pi;return n(this,function(wi){switch(wi.label){case 0:if(go(P.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(P.element)];case 1:wi.sent(),R=0,G=P.negativeZIndex,wi.label=2;case 2:return R<G.length?(Pi=G[R],[4,this.renderStack(Pi)]):[3,5];case 3:wi.sent(),wi.label=4;case 4:return R++,[3,2];case 5:return[4,this.renderNodeContent(P.element)];case 6:wi.sent(),Z=0,re=P.nonInlineLevel,wi.label=7;case 7:return Z<re.length?(Pi=re[Z],[4,this.renderNode(Pi)]):[3,10];case 8:wi.sent(),wi.label=9;case 9:return Z++,[3,7];case 10:Ae=0,pe=P.nonPositionedFloats,wi.label=11;case 11:return Ae<pe.length?(Pi=pe[Ae],[4,this.renderStack(Pi)]):[3,14];case 12:wi.sent(),wi.label=13;case 13:return Ae++,[3,11];case 14:Pe=0,Fe=P.nonPositionedInlineLevel,wi.label=15;case 15:return Pe<Fe.length?(Pi=Fe[Pe],[4,this.renderStack(Pi)]):[3,18];case 16:wi.sent(),wi.label=17;case 17:return Pe++,[3,15];case 18:He=0,at=P.inlineLevel,wi.label=19;case 19:return He<at.length?(Pi=at[He],[4,this.renderNode(Pi)]):[3,22];case 20:wi.sent(),wi.label=21;case 21:return He++,[3,19];case 22:ui=0,Ft=P.zeroOrAutoZIndexOrTransformedOrOpacity,wi.label=23;case 23:return ui<Ft.length?(Pi=Ft[ui],[4,this.renderStack(Pi)]):[3,26];case 24:wi.sent(),wi.label=25;case 25:return ui++,[3,23];case 26:ni=0,Tr=P.positiveZIndex,wi.label=27;case 27:return ni<Tr.length?(Pi=Tr[ni],[4,this.renderStack(Pi)]):[3,30];case 28:wi.sent(),wi.label=29;case 29:return ni++,[3,27];case 30:return[2]}})})},M.prototype.mask=function(P){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(P.slice(0).reverse()),this.ctx.closePath()},M.prototype.path=function(P){this.ctx.beginPath(),this.formatPath(P),this.ctx.closePath()},M.prototype.formatPath=function(P){var R=this;P.forEach(function(G,Z){var re=pc(G)?G.start:G;Z===0?R.ctx.moveTo(re.x,re.y):R.ctx.lineTo(re.x,re.y),pc(G)&&R.ctx.bezierCurveTo(G.startControl.x,G.startControl.y,G.endControl.x,G.endControl.y,G.end.x,G.end.y)})},M.prototype.renderRepeat=function(P,R,G,Z){this.path(P),this.ctx.fillStyle=R,this.ctx.translate(G,Z),this.ctx.fill(),this.ctx.translate(-G,-Z)},M.prototype.resizeImage=function(P,R,G){var Z;if(P.width===R&&P.height===G)return P;var re=(Z=this.canvas.ownerDocument)!==null&&Z!==void 0?Z:document,Ae=re.createElement("canvas");Ae.width=Math.max(1,R),Ae.height=Math.max(1,G);var pe=Ae.getContext("2d");return pe.drawImage(P,0,0,P.width,P.height,0,0,R,G),Ae},M.prototype.renderBackgroundImage=function(P){return r(this,void 0,void 0,function(){var R,G,Z,re,Ae,pe;return n(this,function(Pe){switch(Pe.label){case 0:R=P.styles.backgroundImage.length-1,G=function(Fe){var He,at,ui,oo,rl,nl,Qn,Wo,an,Ft,oo,rl,nl,Qn,Wo,ni,Tr,Pi,wi,gn,Dr,ur,ci,nn,an,dr,oo,il,kl,Qn,Wo,lf,rl,nl,mA,ih,cf,gA,vA,ed,yA,td;return n(this,function(Ig){switch(Ig.label){case 0:if(Fe.type!==0)return[3,5];He=void 0,at=Fe.url,Ig.label=1;case 1:return Ig.trys.push([1,3,,4]),[4,Z.context.cache.match(at)];case 2:return He=Ig.sent(),[3,4];case 3:return Ig.sent(),Z.context.logger.error("Error loading background-image "+at),[3,4];case 4:return He&&(ui=sD(P,R,[He.width,He.height,He.width/He.height]),oo=ui[0],rl=ui[1],nl=ui[2],Qn=ui[3],Wo=ui[4],an=Z.ctx.createPattern(Z.resizeImage(He,Qn,Wo),"repeat"),Z.renderRepeat(oo,an,rl,nl)),[3,6];case 5:jce(Fe)?(Ft=sD(P,R,[null,null,null]),oo=Ft[0],rl=Ft[1],nl=Ft[2],Qn=Ft[3],Wo=Ft[4],ni=ut(Fe.angle,Qn,Wo),Tr=ni[0],Pi=ni[1],wi=ni[2],gn=ni[3],Dr=ni[4],ur=document.createElement("canvas"),ur.width=Qn,ur.height=Wo,ci=ur.getContext("2d"),nn=ci.createLinearGradient(Pi,gn,wi,Dr),Et(Fe.stops,Tr).forEach(function(G1){return nn.addColorStop(G1.stop,C(G1.color))}),ci.fillStyle=nn,ci.fillRect(0,0,Qn,Wo),Qn>0&&Wo>0&&(an=Z.ctx.createPattern(ur,"repeat"),Z.renderRepeat(oo,an,rl,nl))):Kce(Fe)&&(dr=sD(P,R,[null,null,null]),oo=dr[0],il=dr[1],kl=dr[2],Qn=dr[3],Wo=dr[4],lf=Fe.position.length===0?[U1]:Fe.position,rl=Hn(lf[0],Qn),nl=Hn(lf[lf.length-1],Wo),mA=As(Fe,rl,nl,Qn,Wo),ih=mA[0],cf=mA[1],ih>0&&cf>0&&(gA=Z.ctx.createRadialGradient(il+rl,kl+nl,0,il+rl,kl+nl,ih),Et(Fe.stops,ih*2).forEach(function(G1){return gA.addColorStop(G1.stop,C(G1.color))}),Z.path(oo),Z.ctx.fillStyle=gA,ih!==cf?(vA=P.bounds.left+.5*P.bounds.width,ed=P.bounds.top+.5*P.bounds.height,yA=cf/ih,td=1/yA,Z.ctx.save(),Z.ctx.translate(vA,ed),Z.ctx.transform(1,0,0,yA,0,0),Z.ctx.translate(-vA,-ed),Z.ctx.fillRect(il,td*(kl-ed)+ed,Qn,Wo*td),Z.ctx.restore()):Z.ctx.fill())),Ig.label=6;case 6:return R--,[2]}})},Z=this,re=0,Ae=P.styles.backgroundImage.slice(0).reverse(),Pe.label=1;case 1:return re<Ae.length?(pe=Ae[re],[5,G(pe)]):[3,4];case 2:Pe.sent(),Pe.label=3;case 3:return re++,[3,1];case 4:return[2]}})})},M.prototype.renderSolidBorder=function(P,R,G){return r(this,void 0,void 0,function(){return n(this,function(Z){return this.path(lV(G,R)),this.ctx.fillStyle=C(P),this.ctx.fill(),[2]})})},M.prototype.renderDoubleBorder=function(P,R,G,Z){return r(this,void 0,void 0,function(){var re,Ae;return n(this,function(pe){switch(pe.label){case 0:return R<3?[4,this.renderSolidBorder(P,G,Z)]:[3,2];case 1:return pe.sent(),[2];case 2:return re=qde(Z,G),this.path(re),this.ctx.fillStyle=C(P),this.ctx.fill(),Ae=Zde(Z,G),this.path(Ae),this.ctx.fill(),[2]}})})},M.prototype.renderNodeBackgroundAndBorders=function(P){return r(this,void 0,void 0,function(){var R,G,Z,re,Ae,pe,Pe,Fe,He=this;return n(this,function(at){switch(at.label){case 0:return this.applyEffects(P.getEffects(2)),R=P.container.styles,G=!w(R.backgroundColor)||R.backgroundImage.length,Z=[{style:R.borderTopStyle,color:R.borderTopColor,width:R.borderTopWidth},{style:R.borderRightStyle,color:R.borderRightColor,width:R.borderRightWidth},{style:R.borderBottomStyle,color:R.borderBottomColor,width:R.borderBottomWidth},{style:R.borderLeftStyle,color:R.borderLeftColor,width:R.borderLeftWidth}],re=lfe(Mg(R.backgroundClip,0),P.curves),G||R.boxShadow.length?(this.ctx.save(),this.path(re),this.ctx.clip(),w(R.backgroundColor)||(this.ctx.fillStyle=C(R.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(P.container)]):[3,2];case 1:at.sent(),this.ctx.restore(),R.boxShadow.slice(0).reverse().forEach(function(ui){He.ctx.save();var Ft=Cb(P.curves),ni=ui.inset?0:afe,Tr=Xde(Ft,-ni+(ui.inset?1:-1)*ui.spread.number,(ui.inset?1:-1)*ui.spread.number,ui.spread.number*(ui.inset?-2:2),ui.spread.number*(ui.inset?-2:2));ui.inset?(He.path(Ft),He.ctx.clip(),He.mask(Tr)):(He.mask(Ft),He.ctx.clip(),He.path(Tr)),He.ctx.shadowOffsetX=ui.offsetX.number+ni,He.ctx.shadowOffsetY=ui.offsetY.number,He.ctx.shadowColor=C(ui.color),He.ctx.shadowBlur=ui.blur.number,He.ctx.fillStyle=ui.inset?C(ui.color):"rgba(0,0,0,1)",He.ctx.fill(),He.ctx.restore()}),at.label=2;case 2:Ae=0,pe=0,Pe=Z,at.label=3;case 3:return pe<Pe.length?(Fe=Pe[pe],Fe.style!==0&&!w(Fe.color)&&Fe.width>0?Fe.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Fe.color,Fe.width,Ae,P.curves,2)]:[3,11]):[3,13];case 4:return at.sent(),[3,11];case 5:return Fe.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Fe.color,Fe.width,Ae,P.curves,3)];case 6:return at.sent(),[3,11];case 7:return Fe.style!==4?[3,9]:[4,this.renderDoubleBorder(Fe.color,Fe.width,Ae,P.curves)];case 8:return at.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Fe.color,Ae,P.curves)];case 10:at.sent(),at.label=11;case 11:Ae++,at.label=12;case 12:return pe++,[3,3];case 13:return[2]}})})},M.prototype.renderDashedDottedBorder=function(P,R,G,Z,re){return r(this,void 0,void 0,function(){var Ae,pe,Pe,Fe,He,at,ui,Ft,ni,Tr,Pi,wi,gn,Dr,ur,ci,ur,ci;return n(this,function(nn){return this.ctx.save(),Ae=Jde(Z,G),pe=lV(Z,G),re===2&&(this.path(pe),this.ctx.clip()),pc(pe[0])?(Pe=pe[0].start.x,Fe=pe[0].start.y):(Pe=pe[0].x,Fe=pe[0].y),pc(pe[1])?(He=pe[1].end.x,at=pe[1].end.y):(He=pe[1].x,at=pe[1].y),G===0||G===2?ui=Math.abs(Pe-He):ui=Math.abs(Fe-at),this.ctx.beginPath(),re===3?this.formatPath(Ae):this.formatPath(pe.slice(0,2)),Ft=R<3?R*3:R*2,ni=R<3?R*2:R,re===3&&(Ft=R,ni=R),Tr=!0,ui<=Ft*2?Tr=!1:ui<=Ft*2+ni?(Pi=ui/(2*Ft+ni),Ft*=Pi,ni*=Pi):(wi=Math.floor((ui+ni)/(Ft+ni)),gn=(ui-wi*Ft)/(wi-1),Dr=(ui-(wi+1)*Ft)/wi,ni=Dr<=0||Math.abs(ni-gn)<Math.abs(ni-Dr)?gn:Dr),Tr&&(re===3?this.ctx.setLineDash([0,Ft+ni]):this.ctx.setLineDash([Ft,ni])),re===3?(this.ctx.lineCap="round",this.ctx.lineWidth=R):this.ctx.lineWidth=R*2+1.1,this.ctx.strokeStyle=C(P),this.ctx.stroke(),this.ctx.setLineDash([]),re===2&&(pc(pe[0])&&(ur=pe[3],ci=pe[0],this.ctx.beginPath(),this.formatPath([new li(ur.end.x,ur.end.y),new li(ci.start.x,ci.start.y)]),this.ctx.stroke()),pc(pe[1])&&(ur=pe[1],ci=pe[2],this.ctx.beginPath(),this.formatPath([new li(ur.end.x,ur.end.y),new li(ci.start.x,ci.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},M.prototype.render=function(P){return r(this,void 0,void 0,function(){var R;return n(this,function(G){switch(G.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=C(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),R=Yde(P),[4,this.renderStack(R)];case 1:return G.sent(),this.applyEffects([]),[2,this.canvas]}})})},M}(hV),sfe=function(I){return I instanceof O8||I instanceof L8?!0:I instanceof qB&&I.type!==vb&&I.type!==gb},lfe=function(I,M){switch(I){case 0:return Cb(M);case 2:return Qde(M);case 1:default:return Eb(M)}},cfe=function(I){switch(I){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ufe=["-apple-system","system-ui"],hfe=function(I){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?I.filter(function(M){return ufe.indexOf(M)===-1}):I},dfe=function(I){e(M,I);function M(P,R){var G=I.call(this,P,R)||this;return G.canvas=R.canvas?R.canvas:document.createElement("canvas"),G.ctx=G.canvas.getContext("2d"),G.options=R,G.canvas.width=Math.floor(R.width*R.scale),G.canvas.height=Math.floor(R.height*R.scale),G.canvas.style.width=R.width+"px",G.canvas.style.height=R.height+"px",G.ctx.scale(G.options.scale,G.options.scale),G.ctx.translate(-R.x,-R.y),G.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+R.width+"x"+R.height+" at "+R.x+","+R.y+") with scale "+R.scale),G}return M.prototype.render=function(P){return r(this,void 0,void 0,function(){var R,G;return n(this,function(Z){switch(Z.label){case 0:return R=KB(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,P),[4,ffe(R)];case 1:return G=Z.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=C(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(G,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},M}(hV),ffe=function(I){return new Promise(function(M,P){var R=new Image;R.onload=function(){M(R)},R.onerror=P,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})},pfe=function(){function I(M){var P=M.id,R=M.enabled;this.id=P,this.enabled=R,this.start=Date.now()}return I.prototype.debug=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a([this.id,this.getTime()+"ms"],M)):this.info.apply(this,M))},I.prototype.getTime=function(){return Date.now()-this.start},I.prototype.info=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a([this.id,this.getTime()+"ms"],M))},I.prototype.warn=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a([this.id,this.getTime()+"ms"],M)):this.info.apply(this,M))},I.prototype.error=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a([this.id,this.getTime()+"ms"],M)):this.info.apply(this,M))},I.instances={},I}(),Afe=function(){function I(M,P){var R;this.windowBounds=P,this.instanceName="#"+I.instanceCount++,this.logger=new pfe({id:this.instanceName,enabled:M.logging}),this.cache=(R=M.cache)!==null&&R!==void 0?R:new Ode(this,M)}return I.instanceCount=1,I}(),mfe=function(I,M){return M===void 0&&(M={}),gfe(I,M)};typeof window<"u"&&iV.setContext(window);var gfe=function(I,M){return r(void 0,void 0,void 0,function(){var P,R,G,Z,re,Ae,pe,Pe,Fe,He,at,ui,Ft,ni,Tr,Pi,wi,gn,Dr,ur,nn,ci,nn,an,dr,oo,il,kl,Qn,Wo,lf,rl,nl,mA,ih,cf,gA,vA,ed,yA;return n(this,function(td){switch(td.label){case 0:if(!I||typeof I!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(P=I.ownerDocument,!P)throw new Error("Element is not attached to a Document");if(R=P.defaultView,!R)throw new Error("Document is not attached to a Window");return G={allowTaint:(an=M.allowTaint)!==null&&an!==void 0?an:!1,imageTimeout:(dr=M.imageTimeout)!==null&&dr!==void 0?dr:15e3,proxy:M.proxy,useCORS:(oo=M.useCORS)!==null&&oo!==void 0?oo:!1},Z=t({logging:(il=M.logging)!==null&&il!==void 0?il:!0,cache:M.cache},G),re={windowWidth:(kl=M.windowWidth)!==null&&kl!==void 0?kl:R.innerWidth,windowHeight:(Qn=M.windowHeight)!==null&&Qn!==void 0?Qn:R.innerHeight,scrollX:(Wo=M.scrollX)!==null&&Wo!==void 0?Wo:R.pageXOffset,scrollY:(lf=M.scrollY)!==null&&lf!==void 0?lf:R.pageYOffset},Ae=new o(re.scrollX,re.scrollY,re.windowWidth,re.windowHeight),pe=new Afe(Z,Ae),Pe=(rl=M.foreignObjectRendering)!==null&&rl!==void 0?rl:!1,Fe={allowTaint:(nl=M.allowTaint)!==null&&nl!==void 0?nl:!1,onclone:M.onclone,ignoreElements:M.ignoreElements,inlineImages:Pe,copyStyles:Pe},pe.logger.debug("Starting document clone with size "+Ae.width+"x"+Ae.height+" scrolled to "+-Ae.left+","+-Ae.top),He=new eV(pe,I,Fe),at=He.clonedReferenceElement,at?[4,He.toIFrame(P,Ae)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return ui=td.sent(),Ft=JB(at)||vde(at)?l(at.ownerDocument):s(pe,at),ni=Ft.width,Tr=Ft.height,Pi=Ft.left,wi=Ft.top,gn=vfe(pe,at,M.backgroundColor),Dr={canvas:M.canvas,backgroundColor:gn,scale:(ih=(mA=M.scale)!==null&&mA!==void 0?mA:R.devicePixelRatio)!==null&&ih!==void 0?ih:1,x:((cf=M.x)!==null&&cf!==void 0?cf:0)+Pi,y:((gA=M.y)!==null&&gA!==void 0?gA:0)+wi,width:(vA=M.width)!==null&&vA!==void 0?vA:Math.ceil(ni),height:(ed=M.height)!==null&&ed!==void 0?ed:Math.ceil(Tr)},Pe?(pe.logger.debug("Document cloned, using foreign object rendering"),nn=new dfe(pe,Dr),[4,nn.render(at)]):[3,3];case 2:return ur=td.sent(),[3,5];case 3:return pe.logger.debug("Document cloned, element located at "+Pi+","+wi+" with size "+ni+"x"+Tr+" using computed rendering"),pe.logger.debug("Starting DOM parsing"),ci=U8(pe,at),gn===ci.styles.backgroundColor&&(ci.styles.backgroundColor=we.TRANSPARENT),pe.logger.debug("Starting renderer for element at "+Dr.x+","+Dr.y+" with size "+Dr.width+"x"+Dr.height),nn=new ofe(pe,Dr),[4,nn.render(ci)];case 4:ur=td.sent(),td.label=5;case 5:return(!((yA=M.removeContainer)!==null&&yA!==void 0)||yA)&&(eV.destroy(ui)||pe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),pe.logger.debug("Finished rendering"),[2,ur]}})})},vfe=function(I,M,P){var R=M.ownerDocument,G=R.documentElement?ge(I,getComputedStyle(R.documentElement).backgroundColor):we.TRANSPARENT,Z=R.body?ge(I,getComputedStyle(R.body).backgroundColor):we.TRANSPARENT,re=typeof P=="string"?ge(I,P):P===null?we.TRANSPARENT:4294967295;return M===R.documentElement?w(G)?w(Z)?re:Z:G:re};return mfe})});var iy=class{},Jb=class{},Ja=class i{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let n=t.slice(0,r),a=n.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(n,a),this.headers.has(a)?this.headers.get(a).push(o):this.headers.set(a,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new i;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let n=(e.op==="a"?this.headers.get(t):void 0)||[];n.push(...r),this.headers.set(t,n);break;case"d":let a=e.value;if(!a)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(s=>a.indexOf(s)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),n=e.toLowerCase();this.headers.set(n,r),this.maybeSetNormalizedName(e,n)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var CD=class{encodeKey(e){return ZV(e)}encodeValue(e){return ZV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function wfe(i,e){let t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(n=>{let a=n.indexOf("="),[o,s]=a==-1?[e.decodeKey(n),""]:[e.decodeKey(n.slice(0,a)),e.decodeValue(n.slice(a+1))],l=t.get(o)||[];l.push(s),t.set(o,l)}),t}var bfe=/%(\d[a-f0-9])/gi,Sfe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZV(i){return encodeURIComponent(i).replace(bfe,(e,t)=>Sfe[t]??e)}function Zb(i){return`${i}`}var Fs=class i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new CD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=wfe(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],n=Array.isArray(r)?r.map(Zb):[Zb(r)];this.map.set(t,n)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let n=e[r];Array.isArray(n)?n.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:n,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zb(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],n=r.indexOf(Zb(e.value));n!==-1&&r.splice(n,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ED=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Cfe(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JV(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function $V(i){return typeof Blob<"u"&&i instanceof Blob}function e6(i){return typeof FormData<"u"&&i instanceof FormData}function Efe(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var ty=class i{constructor(e,t,r,n){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let a;if(Cfe(this.method)||n?(this.body=r!==void 0?r:null,a=n):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers||(this.headers=new Ja),this.context||(this.context=new ED),!this.params)this.params=new Fs,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let s=t.indexOf("?"),l=s===-1?"?":s<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:JV(this.body)||$V(this.body)||e6(this.body)||Efe(this.body)||typeof this.body=="string"?this.body:this.body instanceof Fs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||e6(this.body)?null:$V(this.body)?this.body.type||null:JV(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,n=e.responseType||this.responseType,a=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,s=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),c)),new i(t,r,a,{params:c,headers:l,context:u,reportProgress:s,responseType:n,withCredentials:o})}},kg=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(kg||{}),ry=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ja,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},TD=class i extends ry{constructor(e={}){super(e),this.type=kg.ResponseHeader}clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$b=class i extends ry{constructor(e={}){super(e),this.type=kg.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},eS=class extends ry{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function SD(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var Un=(()=>{let e=class e{constructor(r){this.handler=r}request(r,n,a={}){let o;if(r instanceof ty)o=r;else{let c;a.headers instanceof Ja?c=a.headers:c=new Ja(a.headers);let u;a.params&&(a.params instanceof Fs?u=a.params:u=new Fs({fromObject:a.params})),o=new ty(r,n,a.body!==void 0?a.body:null,{headers:c,context:a.context,params:u,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}let s=ar(o).pipe(uf(c=>this.handler.handle(c)));if(r instanceof ty||a.observe==="events")return s;let l=s.pipe(pu(c=>c instanceof $b));switch(a.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(qr(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(qr(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(qr(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(qr(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(r,n={}){return this.request("DELETE",r,n)}get(r,n={}){return this.request("GET",r,n)}head(r,n={}){return this.request("HEAD",r,n)}jsonp(r,n){return this.request("JSONP",r,{params:new Fs().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,n={}){return this.request("OPTIONS",r,n)}patch(r,n,a={}){return this.request("PATCH",r,SD(a,n))}post(r,n,a={}){return this.request("POST",r,SD(a,n))}put(r,n,a={}){return this.request("PUT",r,SD(a,n))}};e.\u0275fac=function(n){return new(n||e)(Nt(iy))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();function n6(i,e){return e(i)}function Tfe(i,e){return(t,r)=>e.intercept(t,{handle:n=>i(n,r)})}function Mfe(i,e,t){return(r,n)=>nh(t,()=>e(r,a=>i(a,n)))}var Ife=new Zr(""),MD=new Zr(""),Bfe=new Zr(""),Dfe=new Zr("");function Rfe(){let i=null;return(e,t)=>{i===null&&(i=(Vi(Ife,{optional:!0})??[]).reduceRight(Tfe,n6));let r=Vi($1),n=r.add();return i(e,t).pipe(_A(()=>r.remove(n)))}}var t6=(()=>{let e=class e extends iy{constructor(r,n){super(),this.backend=r,this.injector=n,this.chain=null,this.pendingTasks=Vi($1);let a=Vi(Dfe,{optional:!0});this.backend=a??r}handle(r){if(this.chain===null){let a=Array.from(new Set([...this.injector.get(MD),...this.injector.get(Bfe,[])]));this.chain=a.reduceRight((o,s)=>Mfe(o,s,this.injector),n6)}let n=this.pendingTasks.add();return this.chain(r,a=>this.backend.handle(a)).pipe(_A(()=>this.pendingTasks.remove(n)))}};e.\u0275fac=function(n){return new(n||e)(Nt(Jb),Nt(wA))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();var Pfe=/^\)\]\}',?\n/;function Lfe(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var i6=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Sn(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?jo(n.\u0275loadImpl()):ar(null)).pipe(Vl(()=>new Rb(o=>{let s=n.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,x)=>s.setRequestHeader(g,x.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let l=r.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=s.statusText||"OK",x=new Ja(s.getAllResponseHeaders()),b=Lfe(s)||r.url;return c=new TD({headers:x,status:s.status,statusText:g,url:b}),c},h=()=>{let{headers:g,status:x,statusText:b,url:S}=u(),E=null;x!==204&&(E=typeof s.response>"u"?s.responseText:s.response),x===0&&(x=E?200:0);let D=x>=200&&x<300;if(r.responseType==="json"&&typeof E=="string"){let B=E;E=E.replace(Pfe,"");try{E=E!==""?JSON.parse(E):null}catch(F){E=B,D&&(D=!1,E={error:F,text:E})}}D?(o.next(new $b({body:E,headers:g,status:x,statusText:b,url:S||void 0})),o.complete()):o.error(new eS({error:E,headers:g,status:x,statusText:b,url:S||void 0}))},d=g=>{let{url:x}=u(),b=new eS({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(b)},f=!1,m=g=>{f||(o.next(u()),f=!0);let x={type:kg.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(x.total=g.total),r.responseType==="text"&&s.responseText&&(x.partialText=s.responseText),o.next(x)},y=g=>{let x={type:kg.UploadProgress,loaded:g.loaded};g.lengthComputable&&(x.total=g.total),o.next(x)};return s.addEventListener("load",h),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",m),l!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(l),o.next({type:kg.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",h),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",m),l!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}};e.\u0275fac=function(n){return new(n||e)(Nt(qb))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),a6=new Zr("XSRF_ENABLED"),Ofe="XSRF-TOKEN",Ffe=new Zr("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Ofe}),Nfe="X-XSRF-TOKEN",Ufe=new Zr("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Nfe}),tS=class{},kfe=(()=>{let e=class e{constructor(r,n,a){this.doc=r,this.platform=n,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xb(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(n){return new(n||e)(Nt(_a),Nt(mu),Nt(Ffe))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();function zfe(i,e){let t=i.url.toLowerCase();if(!Vi(a6)||i.method==="GET"||i.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(i);let r=Vi(tS).getToken(),n=Vi(Ufe);return r!=null&&!i.headers.has(n)&&(i=i.clone({headers:i.headers.set(n,r)})),e(i)}var o6=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(o6||{});function Vfe(i,e){return{\u0275kind:i,\u0275providers:e}}function Hfe(...i){let e=[Un,i6,t6,{provide:iy,useExisting:t6},{provide:Jb,useExisting:i6},{provide:MD,useValue:zfe,multi:!0},{provide:a6,useValue:!0},{provide:tS,useClass:kfe}];for(let t of i)e.push(...t.\u0275providers);return Lg(e)}var r6=new Zr("LEGACY_INTERCEPTOR_FN");function Qfe(){return Vfe(o6.LegacyInterceptors,[{provide:r6,useFactory:Rfe},{provide:MD,useExisting:r6,multi:!0}])}var s6=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({providers:[Hfe(Qfe())]});let i=e;return i})();var DD=class extends WV{constructor(){super(...arguments),this.supportsDOMEvents=!0}},RD=class i extends DD{static makeCurrent(){GV(new i)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Wfe();return t==null?null:jfe(t)}resetBaseElement(){ny=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xb(document.cookie,e)}},ny=null;function Wfe(){return ny=ny||document.querySelector("base"),ny?ny.getAttribute("href"):null}function jfe(i){return new URL(i,document.baseURI).pathname}var PD=class{addToWindow(e){df.getAngularTestability=(r,n=!0)=>{let a=e.findTestabilityInTree(r,n);if(a==null)throw new Sn(5103,!1);return a},df.getAllAngularTestabilities=()=>e.getAllTestabilities(),df.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let n=df.getAllAngularTestabilities(),a=n.length,o=!1,s=function(l){o=o||l,a--,a==0&&r(o)};n.forEach(l=>{l.whenStable(s)})};df.frameworkStabilizers||(df.frameworkStabilizers=[]),df.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let n=e.getTestability(t);return n??(r?SA().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Kfe=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),LD=new Zr("EventManagerPlugins"),u6=(()=>{let e=class e{constructor(r,n){this._zone=n,this._eventNameToPlugin=new Map,r.forEach(a=>{a.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,n,a){return this._findPluginFor(n).addEventListener(r,n,a)}getZone(){return this._zone}_findPluginFor(r){let n=this._eventNameToPlugin.get(r);if(n)return n;if(n=this._plugins.find(o=>o.supports(r)),!n)throw new Sn(5101,!1);return this._eventNameToPlugin.set(r,n),n}};e.\u0275fac=function(n){return new(n||e)(Nt(LD),Nt(fa))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),iS=class{constructor(e){this._doc=e}},ID="ng-app-id",h6=(()=>{let e=class e{constructor(r,n,a,o={}){this.doc=r,this.appId=n,this.nonce=a,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=bD(o),this.resetHostNodes()}addStyles(r){for(let n of r)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(r){for(let n of r)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(n=>n.remove()),r.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let n of this.getAllStyles())this.addStyleToHost(r,n)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let n of this.hostNodes)this.addStyleToHost(n,r)}onStyleRemoved(r){let n=this.styleRef;n.get(r)?.elements?.forEach(a=>a.remove()),n.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ID}="${this.appId}"]`);if(r?.length){let n=new Map;return r.forEach(a=>{a.textContent!=null&&n.set(a.textContent,a)}),n}return null}changeUsageCount(r,n){let a=this.styleRef;if(a.has(r)){let o=a.get(r);return o.usage+=n,o.usage}return a.set(r,{usage:n,elements:[]}),n}getStyleElement(r,n){let a=this.styleNodesInDOM,o=a?.get(n);if(o?.parentNode===r)return a.delete(n),o.removeAttribute(ID),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=n,this.platformIsServer&&s.setAttribute(ID,this.appId),r.appendChild(s),s}}addStyleToHost(r,n){let a=this.getStyleElement(r,n),o=this.styleRef,s=o.get(n)?.elements;s?s.push(a):o.set(n,{elements:[a],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(n){return new(n||e)(Nt(_a),Nt(X1),Nt(Y1,8),Nt(mu))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),BD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ND=/%COMP%/g,d6="%COMP%",Xfe=`_nghost-${d6}`,Yfe=`_ngcontent-${d6}`,qfe=!0,Zfe=new Zr("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>qfe});function Jfe(i){return Yfe.replace(ND,i)}function $fe(i){return Xfe.replace(ND,i)}function f6(i,e){return e.map(t=>t.replace(ND,i))}var rS=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u=null){this.eventManager=r,this.sharedStylesHost=n,this.appId=a,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=bD(l),this.defaultRenderer=new ay(r,s,c,this.platformIsServer)}createRenderer(r,n){if(!r||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===K1.ShadowDom&&(n=xa(hi({},n),{encapsulation:K1.Emulated}));let a=this.getOrCreateRenderer(r,n);return a instanceof nS?a.applyToHost(r):a instanceof oy&&a.applyStyles(),a}getOrCreateRenderer(r,n){let a=this.rendererByCompId,o=a.get(n.id);if(!o){let s=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(n.encapsulation){case K1.Emulated:o=new nS(c,u,n,this.appId,h,s,l,d);break;case K1.ShadowDom:return new OD(c,u,r,n,s,l,this.nonce,d);default:o=new oy(c,u,n,h,s,l,d);break}a.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(n){return new(n||e)(Nt(u6),Nt(h6),Nt(X1),Nt(Zfe),Nt(_a),Nt(mu),Nt(fa),Nt(Y1))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),ay=class{constructor(e,t,r,n){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(BD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(l6(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(l6(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Sn(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,n){if(n){t=n+":"+t;let a=BD[n];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let n=BD[r];n?e.removeAttributeNS(n,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,n){n&(q1.DashCase|q1.Important)?e.style.setProperty(t,r,n&q1.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&q1.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=SA().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function l6(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var OD=class extends ay{constructor(e,t,r,n,a,o,s,l){super(e,a,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=f6(n.id,n.styles);for(let u of c){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oy=class extends ay{constructor(e,t,r,n,a,o,s,l){super(e,a,o,s),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=n,this.styles=l?f6(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nS=class extends oy{constructor(e,t,r,n,a,o,s,l){let c=n+"-"+r.id;super(e,t,r,a,o,s,l,c),this.contentAttr=Jfe(c),this.hostAttr=$fe(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},epe=(()=>{let e=class e extends iS{constructor(r){super(r)}supports(r){return!0}addEventListener(r,n,a){return r.addEventListener(n,a,!1),()=>this.removeEventListener(r,n,a)}removeEventListener(r,n,a){return r.removeEventListener(n,a)}};e.\u0275fac=function(n){return new(n||e)(Nt(_a))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})(),c6=["alt","control","meta","shift"],tpe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ipe={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},rpe=(()=>{let e=class e extends iS{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,n,a){let o=e.parseEventName(n),s=e.eventCallback(o.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>SA().onAndCancel(r,o.domEventName,s))}static parseEventName(r){let n=r.toLowerCase().split("."),a=n.shift();if(n.length===0||!(a==="keydown"||a==="keyup"))return null;let o=e._normalizeKey(n.pop()),s="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),s="code."),c6.forEach(u=>{let h=n.indexOf(u);h>-1&&(n.splice(h,1),s+=u+".")}),s+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=a,c.fullKey=s,c}static matchEventFullKeyCode(r,n){let a=tpe[r.key]||r.key,o="";return n.indexOf("code.")>-1&&(a=r.code,o="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),c6.forEach(s=>{if(s!==a){let l=ipe[s];l(r)&&(o+=s+".")}}),o+=a,o===n)}static eventCallback(r,n,a){return o=>{e.matchEventFullKeyCode(o,r)&&a.runGuarded(()=>n(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(n){return new(n||e)(Nt(_a))},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();function npe(){RD.makeCurrent()}function ape(){return new vD}function ope(){return SV(document),document}var spe=[{provide:mu,useValue:YV},{provide:CV,useValue:npe,multi:!0},{provide:_a,useFactory:ope,deps:[]}],p6=zV(VV,"browser",spe),lpe=new Zr(""),cpe=[{provide:Wb,useClass:PD,deps:[]},{provide:kV,useClass:jb,deps:[fa,xD,Wb]},{provide:jb,useClass:jb,deps:[fa,xD,Wb]}],upe=[{provide:bV,useValue:"root"},{provide:vD,useFactory:ape,deps:[]},{provide:LD,useClass:epe,multi:!0,deps:[_a,fa,mu]},{provide:LD,useClass:rpe,multi:!0,deps:[_a]},rS,h6,u6,{provide:Nb,useExisting:rS},{provide:qb,useClass:Kfe,deps:[]},[]],A6=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:X1,useValue:r.appId}]}}};e.\u0275fac=function(n){return new(n||e)(Nt(lpe,12))},e.\u0275mod=sr({type:e}),e.\u0275inj=or({providers:[...upe,...cpe],imports:[lr,HV]});let i=e;return i})();function hpe(){return new UD(Nt(_a))}var UD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(n){return new(n||e)(Nt(_a))},e.\u0275prov=ii({token:e,factory:function(n){let a=null;return n?a=new n:a=hpe(),a},providedIn:"root"});let i=e;return i})();var kD=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:function(n){let a=null;return n?a=new(n||e):a=Nt(m6),a},providedIn:"root"});let i=e;return i})();function dpe(i){return new m6(i.get(_a))}var m6=(()=>{let e=class e extends kD{constructor(r){super(),this._doc=r}sanitize(r,n){if(n==null)return null;switch(r){case bA.NONE:return n;case bA.HTML:return Ng(n,"HTML")?Fg(n):RV(this._doc,String(n)).toString();case bA.STYLE:return Ng(n,"Style")?Fg(n):n;case bA.SCRIPT:if(Ng(n,"Script"))return Fg(n);throw new Sn(5200,!1);case bA.URL:return Ng(n,"URL")?Fg(n):DV(String(n));case bA.RESOURCE_URL:if(Ng(n,"ResourceURL"))return Fg(n);throw new Sn(5201,!1);default:throw new Sn(5202,!1)}}bypassSecurityTrustHtml(r){return EV(r)}bypassSecurityTrustStyle(r){return TV(r)}bypassSecurityTrustScript(r){return MV(r)}bypassSecurityTrustUrl(r){return IV(r)}bypassSecurityTrustResourceUrl(r){return BV(r)}};e.\u0275fac=function(n){return new(n||e)(Nt(_a))},e.\u0275prov=ii({token:e,factory:function(n){let a=null;return n?a=new n:a=dpe(Nt(pf)),a},providedIn:"root"});let i=e;return i})();var sy="assets/wasm/index.js",ly="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.9/wasm/index.js",fpe="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js",ppe="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",Ape={audio:!1,video:!0},v6={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},y6={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},g6={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:Ape,canvasStyles:[v6,y6]},x6=()=>"zbarWasm"in window;var CA=(i,e,t)=>{t?i.error(t):i.next(e),i.complete()},mpe=(i=!1)=>{if(i===!1)return;let e=new Audio(ppe);e.oncanplaythrough=()=>{let t=e.play();t&&t.catch(r=>{r.name==="NotAllowedError"||r.name})}};var gpe=(i,e,t)=>{let r=e.getContext("2d",{willReadFrequently:!0});for(let n=0;n<i.length;n++){let a=i[n],o={},s=[],l=[],c=0,h=t[1]?.font?.split(" ")?.[0]?.replace(/[^0-9]/g,"");h&&/[0-9]/g.test(h)&&(c=parseFloat(h));let d=a.points;for(let b=0;b<d.length;b++){let S=d?.[b]?.x??0,E=d?.[b]?.y??0;o[`x${b+1}`]=S,o[`y${b+1}`]=E,s.push(S),l.push(E)}let f=Math.min(...s),m=Math.min(...l),y=()=>{for(let E in t[0])r[E]=t[0][E];let b=[];for(let E=0;E<s.length;E++)b.push(o[`x${E+1}`]),b.push(o[`y${E+1}`]);let S=b.slice(0);for(r.beginPath(),r.moveTo(S.shift(),S.shift());S.length;)r.lineTo(S.shift(),S.shift());r.closePath(),r.fill(),r.stroke()},g=document.createElement("canvas"),x=()=>{let b=t[1]?.font?.split(" ")?.[1];g.height=e.height,g.width=e.width;let S=g.getContext("2d",{willReadFrequently:!0});S.font=c+"px "+b;for(let E in t[1])S[E]=t[1][E];_pe(S,a.value,f,m-5)};y(),x(),r.drawImage(g,0,0)}},vpe=(i,e)=>{let t=e?.decode??g6.decode,r=e?.canvasStyles?.length===2?e?.canvasStyles:[v6,y6],n=e?.isBeep??g6.isBeep;return new Promise((a,o)=>{let s=new FileReader;s.onload=()=>{let l={name:i.name,file:i,url:URL.createObjectURL(i)},c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=()=>al(void 0,null,function*(){let u=document.createElement("canvas");u.width=c.naturalWidth||c.width,u.height=c.naturalHeight||c.height;let h=u.getContext("2d");h.drawImage(c,0,0,u.width,u.height);let d=h.getImageData(0,0,u.width,u.height);if(x6()){let f=yield zbarWasm.scanImageData(d);if(f?.length){f.forEach(x=>x.value=x.decode(t?.toLocaleLowerCase())),gpe(f,u,r);let m=yield ype(u),y=URL.createObjectURL(m);a(Object.assign({},l,{data:f,url:y,canvas:u,file:((x,b)=>new File([x],b,{lastModified:new Date().getTime(),type:x.type}))(m,l.name)})),mpe(n)}else a(Object.assign({},l,{data:f,canvas:u}))}}),c.src=l.url},s.onerror=l=>o(l),s.readAsDataURL(i)})},ype=(i,e)=>new Promise((t,r)=>i.toBlob(n=>t(n),e));var xpe=(i=[],e,t,r,n=new Dg)=>(_6(i,t,r).then(a=>{Promise.all(Object.assign([],a).map(o=>vpe(o,e))).then(o=>{CA(n,o)}).catch(o=>CA(n,null,o))}),n),_pe=(i,e,t,r)=>{let n=i.measureText("M").width*1.2,a=e.split(`
`);for(var o=0;o<a.length;++o)i.fillText(a[o],t,r),i.strokeText(a[o],t,r),r+=n},_6=(i=[],e=100,t=100)=>{if(i.length&&(e<100||t<100)){let r=[];return new Promise((n,a)=>{for(let o of i){let s=new Image,l=new FileReader;l.onload=function(c){s.onload=function(){let u=document.createElement("canvas"),h=u.getContext("2d"),d=Math.round(s.width*(e/100)),f=Math.round(s.height*(e/100));u.width=d,u.height=f,h.drawImage(s,0,0,d,f),u.toBlob(m=>{let y=new File([m],o.name,{type:o.type});r.push(y),i.length===r.length&&n(r)},o.type,t/100)},s.src=c.target.result},l.onerror=c=>a(c),l.readAsDataURL(o)}})}else return Promise.resolve(i)};var wpe=(()=>{let e=class e{loadFiles(r=[],n,a){let o=new Dg;return _6(r,n,a).then(s=>{Promise.all(Object.assign([],s).map(l=>this.readAsDataURL(l))).then(l=>CA(o,l)).catch(l=>CA(o,null,l))}),o}loadFilesToScan(r=[],n,a,o){return xpe(r,n,a,o)}readAsDataURL(r){return new Promise((n,a)=>{let o=new FileReader;o.onload=()=>{let s={name:r.name,file:r,url:URL.createObjectURL(r)};n(s)},o.onerror=s=>a(s),o.readAsDataURL(r)})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),w6=(i=new Dg,e)=>{let t=0,r=(n=!1)=>{let a=()=>{let l;try{let c=()=>{clearTimeout(l),x6()?setTimeout(()=>CA(i,!0)):l=setTimeout(()=>c())};setTimeout(()=>c()),setTimeout(()=>clearTimeout(l),3e3)}catch{clearTimeout(l)}},o=document.querySelectorAll(`script[src="${ly}"]`),s=document.querySelectorAll(`script[src="${fpe}"]`);if(o.length||s.length)a();else{let l=document.querySelectorAll(`script[src="${sy}"]`);if(l.length===1)a();else if(l.forEach(c=>c.remove()),e){let c=e.createElement("script");e.setAttribute(c,"src",n?ly:sy),e.setAttribute(c,"type","text/javascript"),e.setAttribute(c,"async",""),e.appendChild(document.head,c),c.onload=()=>a(),c.onerror=()=>{t<2?(document.head.removeChild(c),r(!0)):CA(i,!1,"Could not load script "+n?ly:sy)},t+=1}else{let c=document.createElement("script");c.setAttribute("src",n?ly:sy),c.setAttribute("type","text/javascript"),c.setAttribute("async",""),document.head.appendChild(c),c.onload=()=>a(),c.onerror=()=>{t<2?(document.head.removeChild(c),r(!0)):CA(i,!1,"Could not load script "+n?ly:sy)},t+=1}}};return r(),i};var aS=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({providers:[wpe]});let i=e;return i})();var Mr="primary",by=Symbol("RouteTitle"),WD=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Gg(i){return new WD(i)}function Spe(i,e,t){let r=t.path.split("/");if(r.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<i.length))return null;let n={};for(let a=0;a<r.length;a++){let o=r[a],s=i[a];if(o.startsWith(":"))n[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:i.slice(0,r.length),posParams:n}}function Cpe(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!oh(i[t],e[t]))return!1;return!0}function oh(i,e){let t=i?jD(i):void 0,r=e?jD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let n;for(let a=0;a<t.length;a++)if(n=t[a],!D6(i[n],e[n]))return!1;return!0}function jD(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function D6(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),r=[...e].sort();return t.every((n,a)=>r[a]===n)}else return i===e}function R6(i){return i.length>0?i[i.length-1]:null}function Sf(i){return Pb(i)?i:zb(i)?jo(Promise.resolve(i)):ar(i)}var Epe={exact:L6,subset:O6},P6={exact:Tpe,subset:Mpe,ignored:()=>!0};function b6(i,e,t){return Epe[t.paths](i.root,e.root,t.matrixParams)&&P6[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function Tpe(i,e){return oh(i,e)}function L6(i,e,t){if(!TA(i.segments,e.segments)||!lS(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!i.children[r]||!L6(i.children[r],e.children[r],t))return!1;return!0}function Mpe(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>D6(i[t],e[t]))}function O6(i,e,t){return F6(i,e,e.segments,t)}function F6(i,e,t,r){if(i.segments.length>t.length){let n=i.segments.slice(0,t.length);return!(!TA(n,t)||e.hasChildren()||!lS(n,t,r))}else if(i.segments.length===t.length){if(!TA(i.segments,t)||!lS(i.segments,t,r))return!1;for(let n in e.children)if(!i.children[n]||!O6(i.children[n],e.children[n],r))return!1;return!0}else{let n=t.slice(0,i.segments.length),a=t.slice(i.segments.length);return!TA(i.segments,n)||!lS(i.segments,n,r)||!i.children[Mr]?!1:F6(i.children[Mr],e,a,r)}}function lS(i,e,t){return e.every((r,n)=>P6[t](i[n].parameters,r.parameters))}var _f=class{constructor(e=new Cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gg(this.queryParams)),this._queryParamMap}toString(){return Dpe.serialize(this)}},Cn=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cS(this)}},EA=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gg(this.parameters)),this._parameterMap}toString(){return U6(this)}};function Ipe(i,e){return TA(i,e)&&i.every((t,r)=>oh(t.parameters,e[r].parameters))}function TA(i,e){return i.length!==e.length?!1:i.every((t,r)=>t.path===e[r].path)}function Bpe(i,e){let t=[];return Object.entries(i.children).forEach(([r,n])=>{r===Mr&&(t=t.concat(e(n,r)))}),Object.entries(i.children).forEach(([r,n])=>{r!==Mr&&(t=t.concat(e(n,r)))}),t}var Sy=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:()=>(()=>new Ay)(),providedIn:"root"});let i=e;return i})(),Ay=class{parse(e){let t=new XD(e);return new _f(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${cy(e.root,!0)}`,r=Lpe(e.queryParams),n=typeof e.fragment=="string"?`#${Rpe(e.fragment)}`:"";return`${t}${r}${n}`}},Dpe=new Ay;function cS(i){return i.segments.map(e=>U6(e)).join("/")}function cy(i,e){if(!i.hasChildren())return cS(i);if(e){let t=i.children[Mr]?cy(i.children[Mr],!1):"",r=[];return Object.entries(i.children).forEach(([n,a])=>{n!==Mr&&r.push(`${n}:${cy(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Bpe(i,(r,n)=>n===Mr?[cy(i.children[Mr],!1)]:[`${n}:${cy(r,!1)}`]);return Object.keys(i.children).length===1&&i.children[Mr]!=null?`${cS(i)}/${t[0]}`:`${cS(i)}/(${t.join("//")})`}}function N6(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oS(i){return N6(i).replace(/%3B/gi,";")}function Rpe(i){return encodeURI(i)}function KD(i){return N6(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uS(i){return decodeURIComponent(i)}function S6(i){return uS(i.replace(/\+/g,"%20"))}function U6(i){return`${KD(i.path)}${Ppe(i.parameters)}`}function Ppe(i){return Object.keys(i).map(e=>`;${KD(e)}=${KD(i[e])}`).join("")}function Lpe(i){let e=Object.keys(i).map(t=>{let r=i[t];return Array.isArray(r)?r.map(n=>`${oS(t)}=${oS(n)}`).join("&"):`${oS(t)}=${oS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var Ope=/^[^\/()?;#]+/;function VD(i){let e=i.match(Ope);return e?e[0]:""}var Fpe=/^[^\/()?;=#]+/;function Npe(i){let e=i.match(Fpe);return e?e[0]:""}var Upe=/^[^=?&#]+/;function kpe(i){let e=i.match(Upe);return e?e[0]:""}var zpe=/^[^&#]+/;function Vpe(i){let e=i.match(zpe);return e?e[0]:""}var XD=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mr]=new Cn(e,t)),r}parseSegment(){let e=VD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Sn(4009,!1);return this.capture(e),new EA(uS(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Npe(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let n=VD(this.remaining);n&&(r=n,this.capture(r))}e[uS(t)]=uS(r)}parseQueryParam(e){let t=kpe(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Vpe(this.remaining);o&&(r=o,this.capture(r))}let n=S6(t),a=S6(r);if(e.hasOwnProperty(n)){let o=e[n];Array.isArray(o)||(o=[o],e[n]=o),o.push(a)}else e[n]=a}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=VD(this.remaining),n=this.remaining[r.length];if(n!=="/"&&n!==")"&&n!==";")throw new Sn(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Mr);let o=this.parseChildren();t[a]=Object.keys(o).length===1?o[Mr]:new Cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Sn(4011,!1)}};function k6(i){return i.segments.length>0?new Cn([],{[Mr]:i}):i}function z6(i){let e={};for(let r of Object.keys(i.children)){let n=i.children[r],a=z6(n);if(r===Mr&&a.segments.length===0&&a.hasChildren())for(let[o,s]of Object.entries(a.children))e[o]=s;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}let t=new Cn(i.segments,e);return Hpe(t)}function Hpe(i){if(i.numberOfChildren===1&&i.children[Mr]){let e=i.children[Mr];return new Cn(i.segments.concat(e.segments),e.children)}return i}function Wg(i){return i instanceof _f}function Qpe(i,e,t=null,r=null){let n=V6(i);return H6(n,e,t,r)}function V6(i){let e;function t(a){let o={};for(let l of a.children){let c=t(l);o[l.outlet]=c}let s=new Cn(a.url,o);return a===i&&(e=s),s}let r=t(i.root),n=k6(r);return e??n}function H6(i,e,t,r){let n=i;for(;n.parent;)n=n.parent;if(e.length===0)return HD(n,n,n,t,r);let a=Gpe(e);if(a.toRoot())return HD(n,n,new Cn([],{}),t,r);let o=Wpe(a,n,i),s=o.processChildren?dy(o.segmentGroup,o.index,a.commands):G6(o.segmentGroup,o.index,a.commands);return HD(n,o.segmentGroup,s,t,r)}function hS(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function my(i){return typeof i=="object"&&i!=null&&i.outlets}function HD(i,e,t,r,n){let a={};r&&Object.entries(r).forEach(([l,c])=>{a[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;i===e?o=t:o=Q6(i,e,t);let s=k6(z6(o));return new _f(s,a,n)}function Q6(i,e,t){let r={};return Object.entries(i.children).forEach(([n,a])=>{a===e?r[n]=t:r[n]=Q6(a,e,t)}),new Cn(i.segments,r)}var dS=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hS(r[0]))throw new Sn(4003,!1);let n=r.find(my);if(n&&n!==R6(r))throw new Sn(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gpe(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new dS(!0,0,i);let e=0,t=!1,r=i.reduce((n,a,o)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let s={};return Object.entries(a.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:s}]}if(a.segmentPath)return[...n,a.segmentPath]}return typeof a!="string"?[...n,a]:o===0?(a.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?t=!0:s===".."?e++:s!=""&&n.push(s))}),n):[...n,a]},[]);return new dS(t,e,r)}var Hg=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Wpe(i,e,t){if(i.isAbsolute)return new Hg(e,!0,0);if(!t)return new Hg(e,!1,NaN);if(t.parent===null)return new Hg(t,!0,0);let r=hS(i.commands[0])?0:1,n=t.segments.length-1+r;return jpe(t,n,i.numberOfDoubleDots)}function jpe(i,e,t){let r=i,n=e,a=t;for(;a>n;){if(a-=n,r=r.parent,!r)throw new Sn(4005,!1);n=r.segments.length}return new Hg(r,!1,n-a)}function Kpe(i){return my(i[0])?i[0].outlets:{[Mr]:i}}function G6(i,e,t){if(i||(i=new Cn([],{})),i.segments.length===0&&i.hasChildren())return dy(i,e,t);let r=Xpe(i,e,t),n=t.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){let a=new Cn(i.segments.slice(0,r.pathIndex),{});return a.children[Mr]=new Cn(i.segments.slice(r.pathIndex),i.children),dy(a,0,n)}else return r.match&&n.length===0?new Cn(i.segments,{}):r.match&&!i.hasChildren()?YD(i,e,t):r.match?dy(i,0,n):YD(i,e,t)}function dy(i,e,t){if(t.length===0)return new Cn(i.segments,{});{let r=Kpe(t),n={};if(Object.keys(r).some(a=>a!==Mr)&&i.children[Mr]&&i.numberOfChildren===1&&i.children[Mr].segments.length===0){let a=dy(i.children[Mr],e,t);return new Cn(i.segments,a.children)}return Object.entries(r).forEach(([a,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[a]=G6(i.children[a],e,o))}),Object.entries(i.children).forEach(([a,o])=>{r[a]===void 0&&(n[a]=o)}),new Cn(i.segments,n)}}function Xpe(i,e,t){let r=0,n=e,a={match:!1,pathIndex:0,commandIndex:0};for(;n<i.segments.length;){if(r>=t.length)return a;let o=i.segments[n],s=t[r];if(my(s))break;let l=`${s}`,c=r<t.length-1?t[r+1]:null;if(n>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!E6(l,c,o))return a;r+=2}else{if(!E6(l,{},o))return a;r++}n++}return{match:!0,pathIndex:n,commandIndex:r}}function YD(i,e,t){let r=i.segments.slice(0,e),n=0;for(;n<t.length;){let a=t[n];if(my(a)){let l=Ype(a.outlets);return new Cn(r,l)}if(n===0&&hS(t[0])){let l=i.segments[e];r.push(new EA(l.path,C6(t[0]))),n++;continue}let o=my(a)?a.outlets[Mr]:`${a}`,s=n<t.length-1?t[n+1]:null;o&&s&&hS(s)?(r.push(new EA(o,C6(s))),n+=2):(r.push(new EA(o,{})),n++)}return new Cn(r,{})}function Ype(i){let e={};return Object.entries(i).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=YD(new Cn([],{}),0,r))}),e}function C6(i){let e={};return Object.entries(i).forEach(([t,r])=>e[t]=`${r}`),e}function E6(i,e,t){return i==t.path&&oh(e,t.parameters)}var fy="imperative",xc=class{constructor(e,t){this.id=e,this.url=t}},jg=class extends xc{constructor(e,t,r="imperative",n=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sh=class extends xc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wf=class extends xc{constructor(e,t,r,n){super(e,t),this.reason=r,this.code=n,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bf=class extends xc{constructor(e,t,r,n){super(e,t),this.reason=r,this.code=n,this.type=16}},gy=class extends xc{constructor(e,t,r,n){super(e,t),this.error=r,this.target=n,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fS=class extends xc{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qD=class extends xc{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZD=class extends xc{constructor(e,t,r,n,a){super(e,t),this.urlAfterRedirects=r,this.state=n,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},JD=class extends xc{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$D=class extends xc{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eR=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tR=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},iR=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rR=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nR=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aR=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pS=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vy=class{},yy=class{constructor(e){this.url=e}};var oR=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cy,this.attachRef=null}},Cy=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,n){let a=this.getOrCreateContext(r);a.outlet=n,this.contexts.set(r,a)}onChildOutletDestroyed(r){let n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new oR,this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),AS=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=sR(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=sR(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lR(e,this._root);return t.length<2?[]:t[t.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return lR(e,this._root).map(t=>t.value)}};function sR(i,e){if(i===e.value)return e;for(let t of e.children){let r=sR(i,t);if(r)return r}return null}function lR(i,e){if(i===e.value)return[e];for(let t of e.children){let r=lR(i,t);if(r.length)return r.unshift(e),r}return[]}var Ql=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vg(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var mS=class extends AS{constructor(e,t){super(e),this.snapshot=t,vR(this,e)}toString(){return this.snapshot.toString()}};function W6(i,e){let t=qpe(i,e),r=new vo([new EA("",{})]),n=new vo({}),a=new vo({}),o=new vo({}),s=new vo(""),l=new Ir(r,n,o,s,a,Mr,e,t.root);return l.snapshot=t.root,new mS(new Ql(l,[]),t)}function qpe(i,e){let t={},r={},n={},a="",o=new xy([],t,n,a,r,Mr,e,null,{});return new gS("",new Ql(o,[]))}var Ir=class{constructor(e,t,r,n,a,o,s,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=n,this.dataSubject=a,this.outlet=o,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(qr(c=>c[by]))??ar(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(qr(e=>Gg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(qr(e=>Gg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gR(i,e,t="emptyOnly"){let r,{routeConfig:n}=i;return e!==null&&(t==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:hi(hi({},e.params),i.params),data:hi(hi({},e.data),i.data),resolve:hi(hi(hi(hi({},i.data),e.data),n?.data),i._resolvedData)}:r={params:i.params,data:i.data,resolve:hi(hi({},i.data),i._resolvedData??{})},n&&K6(n)&&(r.resolve[by]=n.title),r}var xy=class{get title(){return this.data?.[by]}constructor(e,t,r,n,a,o,s,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gg(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gS=class extends AS{constructor(e,t){super(t),this.url=e,vR(this,t)}toString(){return j6(this._root)}};function vR(i,e){e.value._routerState=i,e.children.forEach(t=>vR(i,t))}function j6(i){let e=i.children.length>0?` { ${i.children.map(j6).join(", ")} } `:"";return`${i.value}${e}`}function QD(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,oh(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),oh(e.params,t.params)||i.paramsSubject.next(t.params),Cpe(e.url,t.url)||i.urlSubject.next(t.url),oh(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function cR(i,e){let t=oh(i.params,e.params)&&Ipe(i.url,e.url),r=!i.parent!=!e.parent;return t&&!r&&(!i.parent||cR(i.parent,e.parent))}function K6(i){return typeof i.title=="string"||i.title===null}var rd=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mr,this.activateEvents=new Za,this.deactivateEvents=new Za,this.attachEvents=new Za,this.detachEvents=new Za,this.parentContexts=Vi(Cy),this.location=Vi(FV),this.changeDetector=Vi(Af),this.environmentInjector=Vi(wA),this.inputBinder=Vi(wS,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:n,previousValue:a}=r.name;if(n)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Sn(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Sn(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Sn(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,n){this.activated=r,this._activatedRoute=n,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,n){if(this.isActivated)throw new Sn(4013,!1);this._activatedRoute=r;let a=this.location,s=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new uR(r,l,a.injector);this.activated=a.createComponent(s,{index:a.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ta({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[No]});let i=e;return i})(),uR=class{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ir?this.route:e===Cy?this.childContexts:this.parent.get(e,t)}},wS=new Zr(""),T6=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:n}=r,a=Rg([n.queryParams,n.params,n.data]).pipe(Vl(([o,s,l],c)=>(l=hi(hi(hi({},o),s),l),c===0?ar(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(r);return}let s=QV(n.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of s.inputs)r.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(r,a)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();function Zpe(i,e,t){let r=_y(i,e._root,t?t._root:void 0);return new mS(r,e)}function _y(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let n=Jpe(i,e,t);return new Ql(r,n)}else{if(i.shouldAttach(e.value)){let a=i.retrieve(e.value);if(a!==null){let o=a.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(s=>_y(i,s)),o}}let r=$pe(e.value),n=e.children.map(a=>_y(i,a));return new Ql(r,n)}}function Jpe(i,e,t){return e.children.map(r=>{for(let n of t.children)if(i.shouldReuseRoute(r.value,n.value.snapshot))return _y(i,r,n);return _y(i,r)})}function $pe(i){return new Ir(new vo(i.url),new vo(i.params),new vo(i.queryParams),new vo(i.fragment),new vo(i.data),i.outlet,i.component,i)}var X6="ngNavigationCancelingError";function Y6(i,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=q6(!1,0,e);return n.url=t,n.navigationBehaviorOptions=r,n}function q6(i,e,t){let r=new Error("NavigationCancelingError: "+(i||""));return r[X6]=!0,r.cancellationCode=e,t&&(r.url=t),r}function eAe(i){return Z6(i)&&Wg(i.url)}function Z6(i){return i&&i[X6]}var tAe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["ng-component"]],standalone:!0,features:[gr],decls:1,vars:0,template:function(n,a){n&1&&ce(0,"router-outlet")},dependencies:[rd],encapsulation:2});let i=e;return i})();function iAe(i,e){return i.providers&&!i._injector&&(i._injector=yD(i.providers,e,`Route: ${i.path}`)),i._injector??e}function yR(i){let e=i.children&&i.children.map(yR),t=e?xa(hi({},i),{children:e}):hi({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mr&&(t.component=tAe),t}function lh(i){return i.outlet||Mr}function rAe(i,e){let t=i.filter(r=>lh(r)===e);return t.push(...i.filter(r=>lh(r)!==e)),t}function Ey(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var nAe=(i,e,t,r)=>qr(n=>(new hR(e,n.targetRouterState,n.currentRouterState,t,r).activate(i),n)),hR=class{constructor(e,t,r,n,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=n,this.inputBindingEnabled=a}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),QD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let n=Vg(t);e.children.forEach(a=>{let o=a.value.outlet;this.deactivateRoutes(a,n[o],r),delete n[o]}),Object.values(n).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){let n=e.value,a=t?t.value:null;if(n===a)if(n.component){let o=r.getContext(n.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),n=r&&e.value.component?r.children:t,a=Vg(e);for(let o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],n);if(r&&r.outlet){let o=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:s})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),n=r&&e.value.component?r.children:t,a=Vg(e);for(let o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],n);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let n=Vg(t);e.children.forEach(a=>{this.activateRoutes(a,n[a.value.outlet],r),this.forwardEvent(new aR(a.value.snapshot))}),e.children.length&&this.forwardEvent(new rR(e.value.snapshot))}activateRoutes(e,t,r){let n=e.value,a=t?t.value:null;if(QD(n),n===a)if(n.component){let o=r.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(n.component){let o=r.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),QD(s.route.value),this.activateChildRoutes(e,null,o.children)}else{let s=Ey(n.snapshot);o.attachRef=null,o.route=n,o.injector=s,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},vS=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qg=class{constructor(e,t){this.component=e,this.route=t}};function aAe(i,e,t){let r=i._root,n=e?e._root:null;return uy(r,n,t,[r.value])}function oAe(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function Xg(i,e){let t=Symbol(),r=e.get(i,t);return r===t?typeof i=="function"&&!_V(i)?i:e.get(i):r}function uy(i,e,t,r,n={canDeactivateChecks:[],canActivateChecks:[]}){let a=Vg(e);return i.children.forEach(o=>{sAe(o,a[o.value.outlet],t,r.concat([o.value]),n),delete a[o.value.outlet]}),Object.entries(a).forEach(([o,s])=>py(s,t.getContext(o),n)),n}function sAe(i,e,t,r,n={canDeactivateChecks:[],canActivateChecks:[]}){let a=i.value,o=e?e.value:null,s=t?t.getContext(i.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){let l=lAe(o,a,a.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new vS(r)):(a.data=o.data,a._resolvedData=o._resolvedData),a.component?uy(i,e,s?s.children:null,r,n):uy(i,e,t,r,n),l&&s&&s.outlet&&s.outlet.isActivated&&n.canDeactivateChecks.push(new Qg(s.outlet.component,o))}else o&&py(e,s,n),n.canActivateChecks.push(new vS(r)),a.component?uy(i,null,s?s.children:null,r,n):uy(i,null,t,r,n);return n}function lAe(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!TA(i.url,e.url);case"pathParamsOrQueryParamsChange":return!TA(i.url,e.url)||!oh(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cR(i,e)||!oh(i.queryParams,e.queryParams);case"paramsChange":default:return!cR(i,e)}}function py(i,e,t){let r=Vg(i),n=i.value;Object.entries(r).forEach(([a,o])=>{n.component?e?py(o,e.children.getContext(a),t):py(o,null,t):py(o,e,t)}),n.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Qg(e.outlet.component,n)):t.canDeactivateChecks.push(new Qg(null,n)):t.canDeactivateChecks.push(new Qg(null,n))}function Ty(i){return typeof i=="function"}function cAe(i){return typeof i=="boolean"}function uAe(i){return i&&Ty(i.canLoad)}function hAe(i){return i&&Ty(i.canActivate)}function dAe(i){return i&&Ty(i.canActivateChild)}function fAe(i){return i&&Ty(i.canDeactivate)}function pAe(i){return i&&Ty(i.canMatch)}function J6(i){return i instanceof AV||i?.name==="EmptyError"}var sS=Symbol("INITIAL_VALUE");function Kg(){return Vl(i=>Rg(i.map(e=>e.pipe(Au(1),Ob(sS)))).pipe(qr(e=>{for(let t of e)if(t!==!0){if(t===sS)return sS;if(t===!1||t instanceof _f)return t}return!0}),pu(e=>e!==sS),Au(1)))}function AAe(i,e){return zl(t=>{let{targetSnapshot:r,currentSnapshot:n,guards:{canActivateChecks:a,canDeactivateChecks:o}}=t;return o.length===0&&a.length===0?ar(xa(hi({},t),{guardsResult:!0})):mAe(o,r,n,i).pipe(zl(s=>s&&cAe(s)?gAe(r,a,i,e):ar(s)),qr(s=>xa(hi({},t),{guardsResult:s})))})}function mAe(i,e,t,r){return jo(i).pipe(zl(n=>wAe(n.component,n.route,t,e,r)),hf(n=>n!==!0,!0))}function gAe(i,e,t,r){return jo(e).pipe(uf(n=>Lb(yAe(n.route.parent,r),vAe(n.route,r),_Ae(i,n.path,t),xAe(i,n.route,t))),hf(n=>n!==!0,!0))}function vAe(i,e){return i!==null&&e&&e(new nR(i)),ar(!0)}function yAe(i,e){return i!==null&&e&&e(new iR(i)),ar(!0)}function xAe(i,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ar(!0);let n=r.map(a=>hD(()=>{let o=Ey(e)??t,s=Xg(a,o),l=hAe(s)?s.canActivate(e,i):nh(o,()=>s(e,i));return Sf(l).pipe(hf())}));return ar(n).pipe(Kg())}function _Ae(i,e,t){let r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(o=>oAe(o)).filter(o=>o!==null).map(o=>hD(()=>{let s=o.guards.map(l=>{let c=Ey(o.node)??t,u=Xg(l,c),h=dAe(u)?u.canActivateChild(r,i):nh(c,()=>u(r,i));return Sf(h).pipe(hf())});return ar(s).pipe(Kg())}));return ar(a).pipe(Kg())}function wAe(i,e,t,r,n){let a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||a.length===0)return ar(!0);let o=a.map(s=>{let l=Ey(e)??n,c=Xg(s,l),u=fAe(c)?c.canDeactivate(i,e,t,r):nh(l,()=>c(i,e,t,r));return Sf(u).pipe(hf())});return ar(o).pipe(Kg())}function bAe(i,e,t,r){let n=e.canLoad;if(n===void 0||n.length===0)return ar(!0);let a=n.map(o=>{let s=Xg(o,i),l=uAe(s)?s.canLoad(e,t):nh(i,()=>s(e,t));return Sf(l)});return ar(a).pipe(Kg(),$6(r))}function $6(i){return fV(Fo(e=>{if(Wg(e))throw Y6(i,e)}),qr(e=>e===!0))}function SAe(i,e,t,r){let n=e.canMatch;if(!n||n.length===0)return ar(!0);let a=n.map(o=>{let s=Xg(o,i),l=pAe(s)?s.canMatch(e,t):nh(i,()=>s(e,t));return Sf(l)});return ar(a).pipe(Kg(),$6(r))}var wy=class{constructor(e){this.segmentGroup=e||null}},yS=class extends Error{constructor(e){super(),this.urlTree=e}};function zg(i){return W1(new wy(i))}function CAe(i){return W1(new Sn(4e3,!1))}function EAe(i){return W1(q6(!1,3))}var dR=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],n=t.root;for(;;){if(r=r.concat(n.segments),n.numberOfChildren===0)return ar(r);if(n.numberOfChildren>1||!n.children[Mr])return CAe(e.redirectTo);n=n.children[Mr]}}applyRedirectCommands(e,t,r){let n=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new yS(n);return n}applyRedirectCreateUrlTree(e,t,r,n){let a=this.createSegmentGroup(e,t.root,r,n);return new _f(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([n,a])=>{if(typeof a=="string"&&a.startsWith(":")){let s=a.substring(1);r[n]=t[s]}else r[n]=a}),r}createSegmentGroup(e,t,r,n){let a=this.createSegments(e,t.segments,r,n),o={};return Object.entries(t.children).forEach(([s,l])=>{o[s]=this.createSegmentGroup(e,l,r,n)}),new Cn(a,o)}createSegments(e,t,r,n){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,n):this.findOrReturn(a,r))}findPosParam(e,t,r){let n=r[t.path.substring(1)];if(!n)throw new Sn(4001,!1);return n}findOrReturn(e,t){let r=0;for(let n of t){if(n.path===e.path)return t.splice(r),n;r++}return e}},fR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TAe(i,e,t,r,n){let a=xR(i,e,t);return a.matched?(r=iAe(e,r),SAe(r,e,t,n).pipe(qr(o=>o===!0?a:hi({},fR)))):ar(a)}function xR(i,e,t){if(e.path==="**")return MAe(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?hi({},fR):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let n=(e.matcher||Spe)(t,i,e);if(!n)return hi({},fR);let a={};Object.entries(n.posParams??{}).forEach(([s,l])=>{a[s]=l.path});let o=n.consumed.length>0?hi(hi({},a),n.consumed[n.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:n.consumed,remainingSegments:t.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function MAe(i){return{matched:!0,parameters:i.length>0?R6(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function M6(i,e,t,r){return t.length>0&&DAe(i,t,r)?{segmentGroup:new Cn(e,BAe(r,new Cn(t,i.children))),slicedSegments:[]}:t.length===0&&RAe(i,t,r)?{segmentGroup:new Cn(i.segments,IAe(i,e,t,r,i.children)),slicedSegments:t}:{segmentGroup:new Cn(i.segments,i.children),slicedSegments:t}}function IAe(i,e,t,r,n){let a={};for(let o of r)if(bS(i,t,o)&&!n[lh(o)]){let s=new Cn([],{});a[lh(o)]=s}return hi(hi({},n),a)}function BAe(i,e){let t={};t[Mr]=e;for(let r of i)if(r.path===""&&lh(r)!==Mr){let n=new Cn([],{});t[lh(r)]=n}return t}function DAe(i,e,t){return t.some(r=>bS(i,e,r)&&lh(r)!==Mr)}function RAe(i,e,t){return t.some(r=>bS(i,e,r))}function bS(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function PAe(i,e,t,r){return lh(i)!==r&&(r===Mr||!bS(e,t,i))?!1:xR(e,i,t).matched}function LAe(i,e,t){return e.length===0&&!i.children[t]}var pR=class{};function OAe(i,e,t,r,n,a,o="emptyOnly"){return new AR(i,e,t,r,n,o,a).recognize()}var FAe=31,AR=class{constructor(e,t,r,n,a,o,s){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=n,this.urlTree=a,this.paramsInheritanceStrategy=o,this.urlSerializer=s,this.applyRedirects=new dR(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Sn(4002,`'${e.segmentGroup}'`)}recognize(){let e=M6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(qr(t=>{let r=new xy([],Object.freeze({}),Object.freeze(hi({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mr,this.rootComponentType,null,{}),n=new Ql(r,t),a=new gS("",n),o=Qpe(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(a._root,null),{state:a,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Mr).pipe(Pg(r=>{if(r instanceof yS)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wy?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,n=gR(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(n.params),r.data=Object.freeze(n.data),e.children.forEach(a=>this.inheritParamsAndData(a,r))}processSegmentGroup(e,t,r,n){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,n,!0).pipe(qr(a=>a instanceof Ql?[a]:[]))}processChildren(e,t,r){let n=[];for(let a of Object.keys(r.children))a==="primary"?n.unshift(a):n.push(a);return jo(n).pipe(uf(a=>{let o=r.children[a],s=rAe(t,a);return this.processSegmentGroup(e,s,o,a)}),xV((a,o)=>(a.push(...o),a)),dD(null),yV(),zl(a=>{if(a===null)return zg(r);let o=eH(a);return NAe(o),ar(o)}))}processSegment(e,t,r,n,a,o){return jo(t).pipe(uf(s=>this.processSegmentAgainstRoute(s._injector??e,t,s,r,n,a,o).pipe(Pg(l=>{if(l instanceof wy)return ar(null);throw l}))),hf(s=>!!s),Pg(s=>{if(J6(s))return LAe(r,n,a)?ar(new pR):zg(r);throw s}))}processSegmentAgainstRoute(e,t,r,n,a,o,s){return PAe(r,n,a,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,r,a,o):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,r,a,o):zg(n):zg(n)}expandSegmentAgainstRouteUsingRedirect(e,t,r,n,a,o){let{matched:s,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=xR(t,n,a);if(!s)return zg(t);n.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>FAe&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,n.redirectTo,c);return this.applyRedirects.lineralizeSegments(n,h).pipe(zl(d=>this.processSegment(e,r,t,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,n,a){let o=TAe(t,r,n,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(Vl(s=>s.matched?(e=r._injector??e,this.getChildConfig(e,r,n).pipe(Vl(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:d}=s,f=new xy(u,d,Object.freeze(hi({},this.urlTree.queryParams)),this.urlTree.fragment,kAe(r),lh(r),r.component??r._loadedComponent??null,r,zAe(r)),{segmentGroup:m,slicedSegments:y}=M6(t,u,h,l);if(y.length===0&&m.hasChildren())return this.processChildren(c,l,m).pipe(qr(x=>x===null?null:new Ql(f,x)));if(l.length===0&&y.length===0)return ar(new Ql(f,[]));let g=lh(r)===a;return this.processSegment(c,l,m,y,g?Mr:a,!0).pipe(qr(x=>new Ql(f,x instanceof Ql?[x]:[])))}))):zg(t)))}getChildConfig(e,t,r){return t.children?ar({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ar({routes:t._loadedRoutes,injector:t._loadedInjector}):bAe(e,t,r,this.urlSerializer).pipe(zl(n=>n?this.configLoader.loadChildren(e,t).pipe(Fo(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):EAe(t))):ar({routes:[],injector:e})}};function NAe(i){i.sort((e,t)=>e.value.outlet===Mr?-1:t.value.outlet===Mr?1:e.value.outlet.localeCompare(t.value.outlet))}function UAe(i){let e=i.value.routeConfig;return e&&e.path===""}function eH(i){let e=[],t=new Set;for(let r of i){if(!UAe(r)){e.push(r);continue}let n=e.find(a=>r.value.routeConfig===a.value.routeConfig);n!==void 0?(n.children.push(...r.children),t.add(n)):e.push(r)}for(let r of t){let n=eH(r.children);e.push(new Ql(r.value,n))}return e.filter(r=>!t.has(r))}function kAe(i){return i.data||{}}function zAe(i){return i.resolve||{}}function VAe(i,e,t,r,n,a){return zl(o=>OAe(i,e,t,r,o.extractedUrl,n,a).pipe(qr(({state:s,tree:l})=>xa(hi({},o),{targetSnapshot:s,urlAfterRedirects:l}))))}function HAe(i,e){return zl(t=>{let{targetSnapshot:r,guards:{canActivateChecks:n}}=t;if(!n.length)return ar(t);let a=new Set(n.map(l=>l.route)),o=new Set;for(let l of a)if(!o.has(l))for(let c of tH(l))o.add(c);let s=0;return jo(o).pipe(uf(l=>a.has(l)?QAe(l,r,i,e):(l.data=gR(l,l.parent,i).resolve,ar(void 0))),Fo(()=>s++),fD(1),zl(l=>s===o.size?ar(t):xA))})}function tH(i){let e=i.children.map(t=>tH(t)).flat();return[i,...e]}function QAe(i,e,t,r){let n=i.routeConfig,a=i._resolve;return n?.title!==void 0&&!K6(n)&&(a[by]=n.title),GAe(a,i,e,r).pipe(qr(o=>(i._resolvedData=o,i.data=gR(i,i.parent,t).resolve,null)))}function GAe(i,e,t,r){let n=jD(i);if(n.length===0)return ar({});let a={};return jo(n).pipe(zl(o=>WAe(i[o],e,t,r).pipe(hf(),Fo(s=>{a[o]=s}))),fD(1),vV(a),Pg(o=>J6(o)?xA:W1(o)))}function WAe(i,e,t,r){let n=Ey(e)??r,a=Xg(i,n),o=a.resolve?a.resolve(e,t):nh(n,()=>a(e,t));return Sf(o)}function GD(i){return Vl(e=>{let t=i(e);return t?jo(t).pipe(qr(()=>e)):ar(e)})}var iH=(()=>{let e=class e{buildTitle(r){let n,a=r.root;for(;a!==void 0;)n=this.getResolvedTitleForRoute(a)??n,a=a.children.find(o=>o.outlet===Mr);return n}getResolvedTitleForRoute(r){return r.data[by]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:()=>(()=>Vi(jAe))(),providedIn:"root"});let i=e;return i})(),jAe=(()=>{let e=class e extends iH{constructor(r){super(),this.title=r}updateTitle(r){let n=this.buildTitle(r);n!==void 0&&this.title.setTitle(n)}};e.\u0275fac=function(n){return new(n||e)(Nt(UD))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),My=new Zr("",{providedIn:"root",factory:()=>({})}),xS=new Zr("ROUTES"),_R=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Vi(Gb)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ar(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let n=Sf(r.loadComponent()).pipe(qr(rH),Fo(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),_A(()=>{this.componentLoaders.delete(r)})),a=new cD(n,()=>new rh).pipe(lD());return this.componentLoaders.set(r,a),a}loadChildren(r,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ar({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=KAe(n,this.compiler,r,this.onLoadEndListener).pipe(_A(()=>{this.childrenLoaders.delete(n)})),s=new cD(o,()=>new rh).pipe(lD());return this.childrenLoaders.set(n,s),s}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function KAe(i,e,t,r){return Sf(i.loadChildren()).pipe(qr(rH),zl(n=>n instanceof NV||Array.isArray(n)?ar(n):jo(e.compileModuleAsync(n))),qr(n=>{r&&r(i);let a,o,s=!1;return Array.isArray(n)?(o=n,s=!0):(a=n.create(t).injector,o=a.get(xS,[],{optional:!0,self:!0}).flat()),{routes:o.map(yR),injector:a}}))}function XAe(i){return i&&typeof i=="object"&&"default"in i}function rH(i){return XAe(i)?i.default:i}var wR=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:()=>(()=>Vi(YAe))(),providedIn:"root"});let i=e;return i})(),YAe=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),nH=new Zr(""),aH=new Zr("");function qAe(i,e,t){let r=i.get(aH),n=i.get(_a);return i.get(fa).runOutsideAngular(()=>{if(!n.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let a,o=new Promise(c=>{a=c}),s=n.startViewTransition(()=>(a(),ZAe(i))),{onViewTransitionCreated:l}=r;return l&&nh(i,()=>l({transition:s,from:e,to:t})),o})}function ZAe(i){return new Promise(e=>{OV(e,{injector:i})})}var bR=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rh,this.transitionAbortSubject=new rh,this.configLoader=Vi(_R),this.environmentInjector=Vi(wA),this.urlSerializer=Vi(Sy),this.rootContexts=Vi(Cy),this.location=Vi(Zn),this.inputBindingEnabled=Vi(wS,{optional:!0})!==null,this.titleStrategy=Vi(iH),this.options=Vi(My,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Vi(wR),this.createViewTransition=Vi(nH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ar(void 0),this.rootComponentType=null;let r=a=>this.events.next(new eR(a)),n=a=>this.events.next(new tR(a));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let n=++this.navigationId;this.transitions?.next(xa(hi(hi({},this.transitions.value),r),{id:n}))}setupNavigations(r,n,a){return this.transitions=new vo({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fy,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pu(o=>o.id!==0),qr(o=>xa(hi({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vl(o=>{this.currentTransition=o;let s=!1,l=!1;return ar(o).pipe(Fo(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xa(hi({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vl(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&h!=="reload"){let d="";return this.events.next(new bf(c.id,this.urlSerializer.serialize(c.rawUrl),d,0)),c.resolve(null),xA}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ar(c).pipe(Vl(d=>{let f=this.transitions?.getValue();return this.events.next(new jg(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?xA:Promise.resolve(d)}),VAe(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Fo(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=xa(hi({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new fS(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:m,restoredState:y,extras:g}=c,x=new jg(d,this.urlSerializer.serialize(f),m,y);this.events.next(x);let b=W6(f,this.rootComponentType).snapshot;return this.currentTransition=o=xa(hi({},c),{targetSnapshot:b,urlAfterRedirects:f,extras:xa(hi({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,ar(o)}else{let d="";return this.events.next(new bf(c.id,this.urlSerializer.serialize(c.extractedUrl),d,1)),c.resolve(null),xA}}),Fo(c=>{let u=new qD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),qr(c=>(this.currentTransition=o=xa(hi({},c),{guards:aAe(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),AAe(this.environmentInjector,c=>this.events.next(c)),Fo(c=>{if(o.guardsResult=c.guardsResult,Wg(c.guardsResult))throw Y6(this.urlSerializer,c.guardsResult);let u=new ZD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),pu(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),GD(c=>{if(c.guards.canActivateChecks.length)return ar(c).pipe(Fo(u=>{let h=new JD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Vl(u=>{let h=!1;return ar(u).pipe(HAe(this.paramsInheritanceStrategy,this.environmentInjector),Fo({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),Fo(u=>{let h=new $D(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),GD(c=>{let u=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(Fo(f=>{h.component=f}),qr(()=>{})));for(let f of h.children)d.push(...u(f));return d};return Rg(u(c.targetSnapshot.root)).pipe(dD(),Au(1))}),GD(()=>this.afterPreactivation()),Vl(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?jo(h).pipe(qr(()=>o)):ar(o)}),qr(c=>{let u=Zpe(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xa(hi({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Fo(()=>{this.events.next(new vy)}),nAe(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Au(1),Fo({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Fb(this.transitionAbortSubject.pipe(Fo(c=>{throw c}))),_A(()=>{if(!s&&!l){let c="";this.cancelNavigationTransition(o,c,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Pg(c=>{if(l=!0,Z6(c))this.events.next(new wf(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),eAe(c)?this.events.next(new yy(c.url)):o.resolve(!1);else{this.events.next(new gy(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(u){o.reject(u)}}return xA}))}))}cancelNavigationTransition(r,n,a){let o=new wf(r.id,this.urlSerializer.serialize(r.extractedUrl),n,a);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function JAe(i){return i!==fy}var $Ae=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:()=>(()=>Vi(eme))(),providedIn:"root"});let i=e;return i})(),mR=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},eme=(()=>{let e=class e extends mR{};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),oH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:()=>(()=>Vi(tme))(),providedIn:"root"});let i=e;return i})(),tme=(()=>{let e=class e extends oH{constructor(){super(...arguments),this.location=Vi(Zn),this.urlSerializer=Vi(Sy),this.options=Vi(My,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Vi(wR),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _f,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=W6(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(n=>{n.type==="popstate"&&r(n.url,n.state)})}handleRouterEvent(r,n){if(r instanceof jg)this.stateMemento=this.createStateMemento();else if(r instanceof bf)this.rawUrlTree=n.initialUrl;else if(r instanceof fS){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let a=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(a,n)}}else r instanceof vy?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):r instanceof wf&&(r.code===3||r.code===2)?this.restoreHistory(n):r instanceof gy?this.restoreHistory(n,!0):r instanceof sh&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,n){let a=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(a)||n.extras.replaceUrl){let o=this.browserPageId,s=hi(hi({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(a,"",s)}else{let o=hi(hi({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(a,"",o)}}restoreHistory(r,n=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,o=this.currentPageId-a;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,n){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:n}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),hy=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(hy||{});function sH(i,e){i.events.pipe(pu(t=>t instanceof sh||t instanceof wf||t instanceof gy||t instanceof bf),qr(t=>t instanceof sh||t instanceof bf?hy.COMPLETE:(t instanceof wf?t.code===0||t.code===1:!1)?hy.REDIRECTING:hy.FAILED),pu(t=>t!==hy.REDIRECTING),Au(1)).subscribe(()=>{e()})}function ime(i){throw i}var rme={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nme={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Vi(Qb),this.stateManager=Vi(oH),this.options=Vi(My,{optional:!0})||{},this.pendingTasks=Vi($1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Vi(bR),this.urlSerializer=Vi(Sy),this.location=Vi(Zn),this.urlHandlingStrategy=Vi(wR),this._events=new rh,this.errorHandler=this.options.errorHandler||ime,this.navigated=!1,this.routeReuseStrategy=Vi($Ae),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Vi(xS,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Vi(wS,{optional:!0}),this.eventsSubscription=new dV,this.isNgZoneEnabled=Vi(fa)instanceof fa&&fa.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(n=>{try{let a=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(a!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof wf&&n.code!==0&&n.code!==1)this.navigated=!0;else if(n instanceof sh)this.navigated=!0;else if(n instanceof yy){let s=this.urlHandlingStrategy.merge(n.url,a.currentRawUrl),l={skipLocationChange:a.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||JAe(a.source)};this.scheduleNavigation(s,fy,null,l,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}ome(n)&&this._events.next(n)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",n)},0)}))}navigateToSyncWithBrowser(r,n,a){let o={replaceUrl:!0},s=a?.navigationId?a:null;if(a){let c=hi({},a);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(yR),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,n={}){let{relativeTo:a,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:c}=n,u=c?this.currentUrlTree.fragment:s,h=null;switch(l){case"merge":h=hi(hi({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let f=a?a.snapshot:this.routerState.snapshot.root;d=V6(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return H6(d,r,h,u??null)}navigateByUrl(r,n={skipLocationChange:!1}){let a=Wg(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(o,fy,null,n)}navigate(r,n={skipLocationChange:!1}){return ame(r),this.navigateByUrl(this.createUrlTree(r,n),n)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,n){let a;if(n===!0?a=hi({},rme):n===!1?a=hi({},nme):a=n,Wg(r))return b6(this.currentUrlTree,r,a);let o=this.parseUrl(r);return b6(this.currentUrlTree,o,a)}removeEmptyProps(r){return Object.keys(r).reduce((n,a)=>{let o=r[a];return o!=null&&(n[a]=o),n},{})}scheduleNavigation(r,n,a,o,s){if(this.disposed)return Promise.resolve(!1);let l,c,u;s?(l=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,f)=>{l=d,c=f});let h=this.pendingTasks.add();return sH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function ame(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new Sn(4008,!1)}function ome(i){return!(i instanceof vy)&&!(i instanceof yy)}var Yg=(()=>{let e=class e{constructor(r,n,a,o,s,l){this.router=r,this.route=n,this.tabIndexAttribute=a,this.renderer=o,this.el=s,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new rh,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof sh&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,n,a,o,s){if(this.urlTree===null||this.isAnchorElement&&(r!==0||n||a||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:PV(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,n){let a=this.renderer,o=this.el.nativeElement;n!==null?a.setAttribute(o,r,n):a.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(n){return new(n||e)(xe(bi),xe(Ir),AD("tabindex"),xe(ah),xe(Ko),xe(ey))},e.\u0275dir=ta({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,a){n&1&&ye("click",function(s){return a.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&mf("target",a.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",yf],skipLocationChange:["skipLocationChange","skipLocationChange",yf],replaceUrl:["replaceUrl","replaceUrl",yf],routerLink:"routerLink"},standalone:!0,features:[Z1,No]});let i=e;return i})();var _S=class{};var sme=(()=>{let e=class e{constructor(r,n,a,o,s){this.router=r,this.injector=a,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pu(r=>r instanceof sh),uf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,n){let a=[];for(let o of n){o.providers&&!o._injector&&(o._injector=yD(o.providers,r,`Route: ${o.path}`));let s=o._injector??r,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&a.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&a.push(this.processRoutes(l,o.children??o._loadedRoutes))}return jo(a).pipe(uD())}preloadConfig(r,n){return this.preloadingStrategy.preload(n,()=>{let a;n.loadChildren&&n.canLoad===void 0?a=this.loader.loadChildren(r,n):a=ar(null);let o=a.pipe(zl(s=>s===null?ar(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return jo([o,s]).pipe(uD())}else return o})}};e.\u0275fac=function(n){return new(n||e)(Nt(bi),Nt(Gb),Nt(wA),Nt(_S),Nt(_R))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),lH=new Zr(""),lme=(()=>{let e=class e{constructor(r,n,a,o,s={}){this.urlSerializer=r,this.transitions=n,this.viewportScroller=a,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof jg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof sh?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof bf&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof pS&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pS(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(n){LV()},e.\u0275prov=ii({token:e,factory:e.\u0275fac});let i=e;return i})();function cme(i){return i.routerState.root}function Iy(i,e){return{\u0275kind:i,\u0275providers:e}}function ume(){let i=Vi(pf);return e=>{let t=i.get(Kb);if(e!==t.components[0])return;let r=i.get(bi),n=i.get(cH);i.get(SR)===1&&r.initialNavigation(),i.get(uH,null,pD.Optional)?.setUpPreloading(),i.get(lH,null,pD.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var cH=new Zr("",{factory:()=>new rh}),SR=new Zr("",{providedIn:"root",factory:()=>1});function hme(){return Iy(2,[{provide:SR,useValue:0},{provide:_D,multi:!0,deps:[pf],useFactory:e=>{let t=e.get(jV,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let n=e.get(bi),a=e.get(cH);sH(n,()=>{r(!0)}),e.get(bR).afterPreactivation=()=>(r(!0),a.closed?ar(void 0):a),n.initialNavigation()}))}}])}function dme(){return Iy(3,[{provide:_D,multi:!0,useFactory:()=>{let e=Vi(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:SR,useValue:2}])}var uH=new Zr("");function fme(i){return Iy(0,[{provide:uH,useExisting:sme},{provide:_S,useExisting:i}])}function pme(){return Iy(8,[T6,{provide:wS,useExisting:T6}])}function Ame(i){let e=[{provide:nH,useValue:qAe},{provide:aH,useValue:hi({skipNextTransition:!!i?.skipInitialTransition},i)}];return Iy(9,e)}var I6=new Zr("ROUTER_FORROOT_GUARD"),mme=[Zn,{provide:Sy,useClass:Ay},bi,Cy,{provide:Ir,useFactory:cme,deps:[bi]},_R,[]],Ia=(()=>{let e=class e{constructor(r){}static forRoot(r,n){return{ngModule:e,providers:[mme,[],{provide:xS,multi:!0,useValue:r},{provide:I6,useFactory:xme,deps:[[bi,new mD,new wV]]},{provide:My,useValue:n||{}},n?.useHash?vme():yme(),gme(),n?.preloadingStrategy?fme(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?_me(n):[],n?.bindToComponentInputs?pme().\u0275providers:[],n?.enableViewTransitions?Ame().\u0275providers:[],wme()]}}static forChild(r){return{ngModule:e,providers:[{provide:xS,multi:!0,useValue:r}]}}};e.\u0275fac=function(n){return new(n||e)(Nt(I6,8))},e.\u0275mod=sr({type:e}),e.\u0275inj=or({});let i=e;return i})();function gme(){return{provide:lH,useFactory:()=>{let i=Vi(qV),e=Vi(fa),t=Vi(My),r=Vi(bR),n=Vi(Sy);return t.scrollOffset&&i.setOffset(t.scrollOffset),new lme(n,r,i,e,t)}}}function vme(){return{provide:ey,useClass:XV}}function yme(){return{provide:ey,useClass:KV}}function xme(i){return"guarded"}function _me(i){return[i.initialNavigation==="disabled"?dme().\u0275providers:[],i.initialNavigation==="enabledBlocking"?hme().\u0275providers:[]]}var B6=new Zr("");function wme(){return[{provide:B6,useFactory:ume},{provide:wD,multi:!0,useExisting:B6}]}var hH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"footer","text-center"],["href","https://arte.ovh/withu"]],template:function(n,a){n&1&&(L(0,"footer",0),Q(1," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(2,"a",1),Q(3,"WithU"),O(),Q(4,`.
`),O())}});let i=e;return i})();var CR=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-auth-layout"]],decls:3,vars:0,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center"]],template:function(n,a){n&1&&(L(0,"div",0),ce(1,"router-outlet"),O(),ce(2,"app-footer"))},dependencies:[rd,hH],styles:['.auth-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondo-login-7BPGYFN7.jpg");background-size:cover}']});let i=e;return i})();var yH=(()=>{let e=class e{constructor(r,n){this._renderer=r,this._elementRef=n,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(r,n){this._renderer.setProperty(this._elementRef.nativeElement,r,n)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(n){return new(n||e)(xe(ah),xe(Ko))},e.\u0275dir=ta({type:e});let i=e;return i})(),IR=(()=>{let e=class e extends yH{};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275dir=ta({type:e,features:[mc]});let i=e;return i})(),Py=new Zr("NgValueAccessor");var Sme={provide:Py,useExisting:id(()=>En),multi:!0};function Cme(){let i=SA()?SA().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Eme=new Zr("CompositionEventMode"),En=(()=>{let e=class e extends yH{constructor(r,n,a){super(r,n),this._compositionMode=a,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Cme())}writeValue(r){let n=r??"";this.setProperty("value",n)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(n){return new(n||e)(xe(ah),xe(Ko),xe(Eme,8))},e.\u0275dir=ta({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,a){n&1&&ye("input",function(s){return a._handleInput(s.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(s){return a._compositionEnd(s.target.value)})},features:[Hl([Sme]),mc]});let i=e;return i})();function Cf(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function xH(i){return i!=null&&typeof i.length=="number"}var Ly=new Zr("NgValidators"),PS=new Zr("NgAsyncValidators"),Tme=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vs=class{static min(e){return Mme(e)}static max(e){return Ime(e)}static required(e){return _H(e)}static requiredTrue(e){return Bme(e)}static email(e){return Dme(e)}static minLength(e){return Rme(e)}static maxLength(e){return Pme(e)}static pattern(e){return Lme(e)}static nullValidator(e){return CS(e)}static compose(e){return TH(e)}static composeAsync(e){return MH(e)}};function Mme(i){return e=>{if(Cf(e.value)||Cf(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function Ime(i){return e=>{if(Cf(e.value)||Cf(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function _H(i){return Cf(i.value)?{required:!0}:null}function Bme(i){return i.value===!0?null:{required:!0}}function Dme(i){return Cf(i.value)||Tme.test(i.value)?null:{email:!0}}function Rme(i){return e=>Cf(e.value)||!xH(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function Pme(i){return e=>xH(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function Lme(i){if(!i)return CS;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),r=>{if(Cf(r.value))return null;let n=r.value;return e.test(n)?null:{pattern:{requiredPattern:t,actualValue:n}}}}function CS(i){return null}function wH(i){return i!=null}function bH(i){return zb(i)?jo(i):i}function SH(i){let e={};return i.forEach(t=>{e=t!=null?hi(hi({},e),t):e}),Object.keys(e).length===0?null:e}function CH(i,e){return e.map(t=>t(i))}function Ome(i){return!i.validate}function EH(i){return i.map(e=>Ome(e)?e:t=>e.validate(t))}function TH(i){if(!i)return null;let e=i.filter(wH);return e.length==0?null:function(t){return SH(CH(t,e))}}function BR(i){return i!=null?TH(EH(i)):null}function MH(i){if(!i)return null;let e=i.filter(wH);return e.length==0?null:function(t){let r=CH(t,e).map(bH);return mV(r).pipe(qr(SH))}}function DR(i){return i!=null?MH(EH(i)):null}function dH(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function IH(i){return i._rawValidators}function BH(i){return i._rawAsyncValidators}function ER(i){return i?Array.isArray(i)?i:[i]:[]}function ES(i,e){return Array.isArray(i)?i.includes(e):i===e}function fH(i,e){let t=ER(e);return ER(i).forEach(n=>{ES(t,n)||t.push(n)}),t}function pH(i,e){return ER(e).filter(t=>!ES(i,t))}var TS=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ef=class extends TS{get formDirective(){return null}get path(){return null}},MA=class extends TS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},MS=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Fme={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ZVe=xa(hi({},Fme),{"[class.ng-submitted]":"isSubmitted"}),Gn=(()=>{let e=class e extends MS{constructor(r){super(r)}};e.\u0275fac=function(n){return new(n||e)(xe(MA,2))},e.\u0275dir=ta({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,a){n&2&&so("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[mc]});let i=e;return i})(),Wn=(()=>{let e=class e extends MS{constructor(r){super(r)}};e.\u0275fac=function(n){return new(n||e)(xe(Ef,10))},e.\u0275dir=ta({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,a){n&2&&so("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[mc]});let i=e;return i})();var By="VALID",SS="INVALID",qg="PENDING",Dy="DISABLED";function RR(i){return(LS(i)?i.validators:i)||null}function Nme(i){return Array.isArray(i)?BR(i):i||null}function PR(i,e){return(LS(e)?e.asyncValidators:i)||null}function Ume(i){return Array.isArray(i)?DR(i):i||null}function LS(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function DH(i,e,t){let r=i.controls;if(!(e?Object.keys(r):r).length)throw new Sn(1e3,"");if(!r[t])throw new Sn(1001,"")}function RH(i,e,t){i._forEachChild((r,n)=>{if(t[n]===void 0)throw new Sn(1002,"")})}var Zg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===By}get invalid(){return this.status===SS}get pending(){return this.status==qg}get disabled(){return this.status===Dy}get enabled(){return this.status!==Dy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pH(e,this._rawAsyncValidators))}hasValidator(e){return ES(this._rawValidators,e)}hasAsyncValidator(e){return ES(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qg,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dy,this.errors=null,this._forEachChild(r=>{r.disable(xa(hi({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xa(hi({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=By,this._forEachChild(r=>{r.enable(xa(hi({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(xa(hi({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===By||this.status===qg)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dy:By}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qg,this._hasOwnPendingAsyncValidator=!0;let t=bH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,n)=>r&&r._find(n),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Za,this.statusChanges=new Za}_calculateStatus(){return this._allControlsDisabled()?Dy:this.errors?SS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qg)?qg:this._anyControlsHaveStatus(SS)?SS:By}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){LS(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Nme(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ume(this._rawAsyncValidators)}},ra=class extends Zg{constructor(e,t,r){super(RR(t),PR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){RH(this,!0,e),Object.keys(e).forEach(r=>{DH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let n=this.controls[r];n&&n.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,n)=>{r.reset(e?e[n]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,n)=>((r.enabled||this.disabled)&&(t[n]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((n,a)=>{r=t(r,n,a)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var TR=class extends ra{};var Oy=new Zr("CallSetDisabledState",{providedIn:"root",factory:()=>OS}),OS="always";function kme(i,e){return[...e.path,i]}function IS(i,e,t=OS){LR(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Vme(i,e),Qme(i,e),Hme(i,e),zme(i,e)}function BS(i,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),RS(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function DS(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zme(i,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function LR(i,e){let t=IH(i);e.validator!==null?i.setValidators(dH(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let r=BH(i);e.asyncValidator!==null?i.setAsyncValidators(dH(r,e.asyncValidator)):typeof r=="function"&&i.setAsyncValidators([r]);let n=()=>i.updateValueAndValidity();DS(e._rawValidators,n),DS(e._rawAsyncValidators,n)}function RS(i,e){let t=!1;if(i!==null){if(e.validator!==null){let n=IH(i);if(Array.isArray(n)&&n.length>0){let a=n.filter(o=>o!==e.validator);a.length!==n.length&&(t=!0,i.setValidators(a))}}if(e.asyncValidator!==null){let n=BH(i);if(Array.isArray(n)&&n.length>0){let a=n.filter(o=>o!==e.asyncValidator);a.length!==n.length&&(t=!0,i.setAsyncValidators(a))}}}let r=()=>{};return DS(e._rawValidators,r),DS(e._rawAsyncValidators,r),t}function Vme(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&PH(i,e)})}function Hme(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&PH(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function PH(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Qme(i,e){let t=(r,n)=>{e.valueAccessor.writeValue(r),n&&e.viewToModelUpdate(r)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function LH(i,e){i==null,LR(i,e)}function Gme(i,e){return RS(i,e)}function OH(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Wme(i){return Object.getPrototypeOf(i.constructor)===IR}function FH(i,e){i._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function NH(i,e){if(!e)return null;Array.isArray(e);let t,r,n;return e.forEach(a=>{a.constructor===En?t=a:Wme(a)?r=a:n=a}),n||r||t||null}function jme(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var Kme={provide:Ef,useExisting:id(()=>OR)},Ry=(()=>Promise.resolve())(),OR=(()=>{let e=class e extends Ef{constructor(r,n,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Za,this.form=new ra({},BR(r),DR(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ry.then(()=>{let n=this._findContainer(r.path);r.control=n.registerControl(r.name,r.control),IS(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ry.then(()=>{let n=this._findContainer(r.path);n&&n.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ry.then(()=>{let n=this._findContainer(r.path),a=new ra({});LH(a,r),n.registerControl(r.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ry.then(()=>{let n=this._findContainer(r.path);n&&n.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,n){Ry.then(()=>{this.form.get(r.path).setValue(n)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,FH(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(n){return new(n||e)(xe(Ly,10),xe(PS,10),xe(Oy,8))},e.\u0275dir=ta({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,a){n&1&&ye("submit",function(s){return a.onSubmit(s)})("reset",function(){return a.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hl([Kme]),mc]});let i=e;return i})();function AH(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function mH(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var wt=class extends Zg{constructor(e=null,t,r){super(RR(t),PR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),LS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mH(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Xme=i=>i instanceof wt;var jn=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ta({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})();var Yme=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({});let i=e;return i})();var FR=new Zr("NgModelWithFormControlWarning"),qme={provide:MA,useExisting:id(()=>vu)},vu=(()=>{let e=class e extends MA{set isDisabled(r){}constructor(r,n,a,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new Za,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(n),this.valueAccessor=NH(this,a)}ngOnChanges(r){if(this._isControlChanged(r)){let n=r.form.previousValue;n&&BS(n,this,!1),IS(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}OH(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&BS(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(xe(Ly,10),xe(PS,10),xe(Py,10),xe(FR,8),xe(Oy,8))},e.\u0275dir=ta({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Hl([qme]),mc,No]});let i=e;return i})(),Zme={provide:Ef,useExisting:id(()=>xo)},xo=(()=>{let e=class e extends Ef{constructor(r,n,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Za,this._setValidators(r),this._setAsyncValidators(n)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(RS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let n=this.form.get(r.path);return IS(n,r,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),n}getControl(r){return this.form.get(r.path)}removeControl(r){BS(r.control||null,r,!1),jme(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,n){this.form.get(r.path).setValue(n)}onSubmit(r){return this.submitted=!0,FH(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let n=r.control,a=this.form.get(r.path);n!==a&&(BS(n||null,r),Xme(a)&&(IS(a,r,this.callSetDisabledState),r.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let n=this.form.get(r.path);LH(n,r),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let n=this.form.get(r.path);n&&Gme(n,r)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LR(this.form,this),this._oldForm&&RS(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(n){return new(n||e)(xe(Ly,10),xe(PS,10),xe(Oy,8))},e.\u0275dir=ta({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,a){n&1&&ye("submit",function(s){return a.onSubmit(s)})("reset",function(){return a.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hl([Zme]),mc,No]});let i=e;return i})();var Jme={provide:MA,useExisting:id(()=>_o)},_o=(()=>{let e=class e extends MA{set isDisabled(r){}constructor(r,n,a,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Za,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(n),this._setAsyncValidators(a),this.valueAccessor=NH(this,o)}ngOnChanges(r){this._added||this._setUpControl(),OH(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return kme(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(xe(Ef,13),xe(Ly,10),xe(PS,10),xe(Py,10),xe(FR,8))},e.\u0275dir=ta({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Hl([Jme]),mc,No]});let i=e;return i})(),$me={provide:Py,useExisting:id(()=>wa),multi:!0};function UH(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function ege(i){return i.split(":")[0]}var wa=(()=>{let e=class e extends IR{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let n=this._getOptionId(r),a=UH(n,r);this.setProperty("value",a)}registerOnChange(r){this.onChange=n=>{this.value=this._getOptionValue(n),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),r))return n;return null}_getOptionValue(r){let n=ege(r);return this._optionMap.has(n)?this._optionMap.get(n):r}};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275dir=ta({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,a){n&1&&ye("change",function(s){return a.onChange(s.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[Hl([$me]),mc]});let i=e;return i})(),na=(()=>{let e=class e{constructor(r,n,a){this._element=r,this._renderer=n,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(UH(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(n){return new(n||e)(xe(Ko),xe(ah),xe(wa,9))},e.\u0275dir=ta({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),tge={provide:Py,useExisting:id(()=>kH),multi:!0};function gH(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function ige(i){return i.split(":")[0]}var kH=(()=>{let e=class e extends IR{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let n;if(Array.isArray(r)){let a=r.map(o=>this._getOptionId(o));n=(o,s)=>{o._setSelected(a.indexOf(s.toString())>-1)}}else n=(a,o)=>{a._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(r){this.onChange=n=>{let a=[],o=n.selectedOptions;if(o!==void 0){let s=o;for(let l=0;l<s.length;l++){let c=s[l],u=this._getOptionValue(c.value);a.push(u)}}else{let s=n.options;for(let l=0;l<s.length;l++){let c=s[l];if(c.selected){let u=this._getOptionValue(c.value);a.push(u)}}}this.value=a,r(a)}}_registerOption(r){let n=(this._idCounter++).toString();return this._optionMap.set(n,r),n}_getOptionId(r){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,r))return n;return null}_getOptionValue(r){let n=ige(r);return this._optionMap.has(n)?this._optionMap.get(n)._value:r}};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275dir=ta({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,a){n&1&&ye("change",function(s){return a.onChange(s.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[Hl([tge]),mc]});let i=e;return i})(),aa=(()=>{let e=class e{constructor(r,n,a){this._element=r,this._renderer=n,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(gH(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(gH(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(n){return new(n||e)(xe(Ko),xe(ah),xe(kH,9))},e.\u0275dir=ta({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();var rge=(()=>{let e=class e{constructor(){this._validator=CS}ngOnChanges(r){if(this.inputName in r){let n=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):CS,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ta({type:e,features:[No]});let i=e;return i})();var nge={provide:Ly,useExisting:id(()=>NR),multi:!0};var NR=(()=>{let e=class e extends rge{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=yf,this.createValidator=r=>_H}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(a){return(r||(r=ff(e)))(a||e)}})(),e.\u0275dir=ta({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,a){n&2&&mf("required",a._enabled?"":null)},inputs:{required:"required"},features:[Hl([nge]),mc]});let i=e;return i})();var zH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Yme]});let i=e;return i})(),MR=class extends Zg{constructor(e,t,r){super(RR(t),PR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),t&&(this.controls.splice(n,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){RH(this,!1,e),e.forEach((r,n)=>{DH(this,!1,n),this.at(n).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,n)=>{this.at(n)&&this.at(n).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,n)=>{r.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function vH(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var VH=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,n=null){let a=this._reduceControls(r),o={};return vH(n)?o=n:n!==null&&(o.validators=n.validator,o.asyncValidators=n.asyncValidator),new ra(a,o)}record(r,n=null){let a=this._reduceControls(r);return new TR(a,n)}control(r,n,a){let o={};return this.useNonNullable?(vH(n)?o=n:(o.validators=n,o.asyncValidators=a),new wt(r,xa(hi({},o),{nonNullable:!0}))):new wt(r,n,a)}array(r,n,a){let o=r.map(s=>this._createControl(s));return new MR(o,n,a)}_reduceControls(r){let n={};return Object.keys(r).forEach(a=>{n[a]=this._createControl(r[a])}),n}_createControl(r){if(r instanceof wt)return r;if(r instanceof Zg)return r;if(Array.isArray(r)){let n=r[0],a=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(n,a,o)}else return this.control(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var sl=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Oy,useValue:r.callSetDisabledState??OS}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[zH]});let i=e;return i})(),Wr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:FR,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Oy,useValue:r.callSetDisabledState??OS}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[zH]});let i=e;return i})();var Fi={production:!1,apiURL:"https://arte.ovh/api"};var UR=class{constructor(){}loadScript(e,t,r,n=null){if(typeof document<"u"&&!document.getElementById(e)){let a=document.createElement("script");a.async=!0,a.src=t,a.onload=r,n||(n=document.head),n.appendChild(a)}}},kR=class{},age={oneTapEnabled:!0},Tf=(()=>{let e=class e extends UR{constructor(r,n){super(),this.clientId=r,this.initOptions=n,this.changeUser=new Za,this._socialUser=new vo(null),this._accessToken=new vo(null),this._receivedAccessToken=new Za,this.initOptions=hi(hi({},age),this.initOptions),this._socialUser.pipe(j1(1)).subscribe(this.changeUser),this._accessToken.pipe(j1(1)).subscribe(this._receivedAccessToken)}initialize(r){return new Promise((n,a)=>{try{this.loadScript(e.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:r,callback:({credential:o})=>{let s=this.createSocialUser(o);this._socialUser.next(s)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(pu(o=>o===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(s=>s).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:s=>{s.error?this._accessToken.error({code:s.error,description:s.error_description,uri:s.error_uri}):this._accessToken.next(s.access_token)}})}n()})}catch(o){a(o)}})}getLoginStatus(){return new Promise((r,n)=>{this._socialUser.value?r(this._socialUser.value):n(`No user is currently logged in with ${e.PROVIDER_ID}`)})}refreshToken(){return new Promise((r,n)=>{google.accounts.id.revoke(this._socialUser.value.id,a=>{a.error?n(a.error):r(this._socialUser.value)})})}getAccessToken(){return new Promise((r,n)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(Au(1)).subscribe(r)):this._socialUser.value?n("No token client was instantiated, you should specify some scopes."):n("You should be logged-in first.")})}revokeAccessToken(){return new Promise((r,n)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),r()}):n("No access token to revoke"):n("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return al(this,null,function*(){google.accounts.id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(r){let n=new kR;n.idToken=r;let a=this.decodeJwt(r);return n.id=a.sub,n.name=a.name,n.email=a.email,n.photoUrl=a.picture,n.firstName=a.given_name,n.lastName=a.family_name,n}decodeJwt(r){let a=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(a).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}};e.PROVIDER_ID="GOOGLE";let i=e;return i})(),Fy=(()=>{let e=class e{get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(r,n,a){this._ngZone=n,this._injector=a,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new pV(1),this.initialized=!1,this._initState=new Dg,r instanceof Promise?r.then(o=>{this.initialize(o)}):this.initialize(r)}initialize(r){this.autoLogin=r.autoLogin!==void 0?r.autoLogin:!1;let{onError:n=console.error}=r;r.providers.forEach(a=>{this.providers.set(a.id,"prototype"in a.provider?this._injector.get(a.provider):a.provider)}),Promise.all(Array.from(this.providers.values()).map(a=>a.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){let a=[],o=!1;this.providers.forEach((s,l)=>{let c=s.getLoginStatus();a.push(c),c.then(u=>{this.setUser(u,l),o=!0}).catch(console.debug)}),Promise.all(a).catch(()=>{o||(this._user=null,this._authState.next(null))})}this.providers.forEach((a,o)=>{Pb(a.changeUser)&&a.changeUser.subscribe(s=>{this._ngZone.run(()=>{this.setUser(s,o)})})})}).catch(a=>{n(a)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(r){return al(this,null,function*(){let n=this.providers.get(r);if(this.initialized)if(n){if(!(n instanceof Tf))throw e.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN}else throw e.ERR_LOGIN_PROVIDER_NOT_FOUND;else throw e.ERR_NOT_INITIALIZED;return yield n.getAccessToken()})}refreshAuthToken(r){return new Promise((n,a)=>{if(!this.initialized)a(e.ERR_NOT_INITIALIZED);else{let o=this.providers.get(r);o?typeof o.refreshToken!="function"?a(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):o.refreshToken().then(s=>{this.setUser(s,r),n()}).catch(s=>{a(s)}):a(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}refreshAccessToken(r){return new Promise((n,a)=>{if(!this.initialized)a(e.ERR_NOT_INITIALIZED);else if(r!==Tf.PROVIDER_ID)a(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{let o=this.providers.get(r);o instanceof Tf?o.revokeAccessToken().then(n).catch(a):a(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signIn(r,n){return new Promise((a,o)=>{if(!this.initialized)o(e.ERR_NOT_INITIALIZED);else{let s=this.providers.get(r);s?s.signIn(n).then(l=>{this.setUser(l,r),a(l)}).catch(l=>{o(l)}):o(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signOut(r=!1){return new Promise((n,a)=>{if(!this.initialized)a(e.ERR_NOT_INITIALIZED);else if(!this._user)a(e.ERR_NOT_LOGGED_IN);else{let o=this._user.provider,s=this.providers.get(o);s?s.signOut(r).then(()=>{n(),this.setUser(null)}).catch(l=>{a(l)}):a(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}setUser(r,n){r&&n&&(r.provider=n),this._user=r,this._authState.next(r)}};e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",e.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",e.\u0275fac=function(n){return new(n||e)(Nt("SocialAuthServiceConfig"),Nt(fa),Nt(pf))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),HH=(()=>{let e=class e{static initialize(r){return{ngModule:e,providers:[Fy,{provide:"SocialAuthServiceConfig",useValue:r}]}}constructor(r){if(r)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}};e.\u0275fac=function(n){return new(n||e)(Nt(e,12))},e.\u0275mod=sr({type:e}),e.\u0275inj=or({providers:[Fy],imports:[lr]});let i=e;return i})();var QH=(()=>{let e=class e{constructor(r,n){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width=0,this.locale="",n.initState.pipe(Au(1)).subscribe(()=>{Promise.resolve(this.width).then(a=>{a>400||a<200&&a!=0?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(r.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}};e.\u0275fac=function(n){return new(n||e)(xe(Ko),xe(Fy))},e.\u0275dir=ta({type:e,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}});let i=e;return i})(),GH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({});let i=e;return i})();var Kn=(()=>{let e=class e{constructor(r,n){this.document=r,this.platformId=n,this.documentIsAccessible=Yb(this.platformId)}static getCookieRegExp(r){let n=r.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+n+"|;\\s*"+n+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(r){try{return decodeURIComponent(r)}catch{return r}}check(r){return this.documentIsAccessible?(r=encodeURIComponent(r),e.getCookieRegExp(r).test(this.document.cookie)):!1}get(r){if(this.documentIsAccessible&&this.check(r)){r=encodeURIComponent(r);let a=e.getCookieRegExp(r).exec(this.document.cookie);return a[1]?e.safeDecodeURIComponent(a[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let r={},n=this.document;return n.cookie&&n.cookie!==""&&n.cookie.split(";").forEach(a=>{let[o,s]=a.split("=");r[e.safeDecodeURIComponent(o.replace(/^ /,""))]=e.safeDecodeURIComponent(s)}),r}set(r,n,a,o,s,l,c){if(!this.documentIsAccessible)return;if(typeof a=="number"||a instanceof Date||o||s||l||c){let d={expires:a,path:o,domain:s,secure:l,sameSite:c||"Lax"};this.set(r,n,d);return}let u=encodeURIComponent(r)+"="+encodeURIComponent(n)+";",h=a||{};if(h.expires)if(typeof h.expires=="number"){let d=new Date(new Date().getTime()+h.expires*1e3*60*60*24);u+="expires="+d.toUTCString()+";"}else u+="expires="+h.expires.toUTCString()+";";h.path&&(u+="path="+h.path+";"),h.domain&&(u+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${r} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(u+="secure;"),h.sameSite||(h.sameSite="Lax"),u+="sameSite="+h.sameSite+";",this.document.cookie=u}delete(r,n,a,o,s="Lax"){if(!this.documentIsAccessible)return;let l=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(r,"",{expires:l,path:n,domain:a,secure:o,sameSite:s})}deleteAll(r,n,a,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let l in s)s.hasOwnProperty(l)&&this.delete(l,r,n,a,o)}};e.\u0275fac=function(n){return new(n||e)(Nt(_a),Nt(mu))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var WH=(()=>{let e=class e{constructor(r,n,a,o){this.http=r,this.router=n,this.cookies=a,this.authService=o,this.nombre=new wt(""),this.contrasenya=new wt("")}ngOnInit(){this.authService.authState.subscribe(r=>{this.user=r,this.loggedIn=r!=null,console.log(r);try{this.http.post(Fi.apiURL+"/auth/googlelogin",r).subscribe(n=>{console.log(n),this.cookies.set("withuUserToken",n.token),this.router.navigate(["/administrador"])})}catch{console.log("Usuario no permitido")}})}refreshToken(){this.authService.refreshAuthToken(Tf.PROVIDER_ID)}decodeJWTToken(r){return JSON.parse(atob(r.split(".")[1]))}handleOauthResponse(r){let n=this.decodeJWTToken(r.credential);console.log(n),this.cookies.set("withuUserToken",JSON.stringify(n)),this.router.navigate(["/administrador"])}login(r){r.preventDefault();try{this.http.post(Fi.apiURL+"/auth/login",{nombre:this.nombre.value,contrasenya:this.contrasenya.value}).subscribe(n=>{console.log(n),this.cookies.set("withuUserToken",n.token),location.href="/administrador"})}catch{console.log("Usuario y contrase\xF1a incorrectos.")}}};e.\u0275fac=function(n){return new(n||e)(xe(Un),xe(bi),xe(Kn),xe(Fy))},e.\u0275cmp=St({type:e,selectors:[["app-login"]],decls:36,vars:2,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12"],[1,"card","p-3"],[1,"row"],[1,"col-md-5","p-md-4",2,"border-right","1px solid #787e83"],[1,"card-body"],[1,"text-center"],["src","../../assets/images/logos/logo_arte.png","width","185px","alt","logo"],[1,"text-center","p-md-4","mt-sm-4",2,"font-size","18px"],[1,"mb-3",2,"color","#F2EFE8"],[1,"text-muted"],[1,"col-md-7","col-sm-12","p-md-4","p-sm-0"],[3,"submit"],[1,"text-muted","pb-3",2,"font-size","25px"],[1,"mb-3"],["type","text","placeholder","Usuario","required","",1,"form-control",3,"formControl"],["type","password","placeholder","Contrase\xF1a","required","",1,"form-control",3,"formControl"],[1,"text-center","mb-3"],["href","#",1,"text-muted"],["type","submit",1,"btn","btn-block","p-2","btn-custom"],[1,"text-center","mb-3","text-muted"],[1,"d-flex","justify-content-center"],["type","standard","data-text","continue_with"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),ce(8,"img",8),O(),L(9,"div",9)(10,"h3",10),Q(11,"\xA1Bienvenido a ARte!"),O(),L(12,"p",11),Q(13,"Ingrese sus credenciales para iniciar sesi\xF3n."),O()()()(),L(14,"div",12)(15,"div",6)(16,"form",13),ye("submit",function(s){return a.login(s)}),L(17,"div",14)(18,"span"),Q(19,"Login"),O()(),L(20,"div",15),ce(21,"input",16),O(),L(22,"div",15),ce(23,"input",17),O(),L(24,"div",18)(25,"a",19),Q(26,"\xBFOlvidaste tu contrase\xF1a?"),O()(),L(27,"div",7)(28,"button",20),Q(29,"INICIAR SESI\xD3N"),O()(),ce(30,"br"),L(31,"div",21)(32,"p"),Q(33,"O inicia sesi\xF3n con:"),O(),L(34,"div",22),ce(35,"asl-google-signin-button",23),O()()()()()()()()()()),n&2&&(ie(21),Le("formControl",a.nombre),ie(2),Le("formControl",a.contrasenya))},dependencies:[jn,En,Gn,Wn,NR,vu,QH],styles:[".card[_ngcontent-%COMP%]{background-color:#1f262d;box-shadow:0 2px 2px #000c;margin:0 auto}.container[_ngcontent-%COMP%]{width:900px}.btn-custom[_ngcontent-%COMP%]{background-color:#a77552;color:#fff;border:none}#google-signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.g_id_signin[_ngcontent-%COMP%]{margin:0 auto}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:100%}.card-body[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.col-md-5[_ngcontent-%COMP%]{border-right:none!important}}"]});let i=e;return i})();var jH=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-recovery"]],decls:18,vars:0,consts:[["id","recoverform"],[1,"text-center"],[1,"text-white"],[1,"row","m-t-20"],["action","index.html",1,"col-12"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text","bg-danger","text-white"],[1,"ti-email"],["type","text","placeholder","Email Address","aria-label","Username","aria-describedby","basic-addon1",1,"form-control","form-control-lg"],[1,"row","m-t-20","p-t-20","border-top","border-secondary"],[1,"col-12"],["id","to-recover","type","button","routerLink","/login",1,"btn","btn-info"],[1,"fa","fa-key","m-r-5"],["type","button","name","action",1,"btn","btn-success","float-right"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"span",2),Q(3,"Enter your e-mail address below and we will send you instructions how to recover a password."),O()(),L(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"span",7),ce(9,"i",8),O()(),ce(10,"input",9),O(),L(11,"div",10)(12,"div",11)(13,"button",12),ce(14,"i",13),Q(15," Volver al login"),O(),L(16,"button",14),Q(17,"Recuperar"),O()()()()()())},dependencies:[Yg,jn,Wn]});let i=e;return i})();var KH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:Tf.PROVIDER_ID,provider:new Tf("228816553901-3benjbidk25uj07mc9n2oeo1acrnrko2.apps.googleusercontent.com")}],onError:r=>{console.error(r)}}}],imports:[lr,Ia,Wr,HH,GH]});let i=e;return i})();var sge=[{path:"login",component:CR,children:[{path:"",component:WH}]},{path:"recovery",component:CR,children:[{path:"",component:jH}]}],XH=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Ia.forChild(sge),Ia]});let i=e;return i})();var lge=i=>({selected:i});function cge(i,e){if(i&1){let t=Li();L(0,"li",4),ye("click",function(){let a=zt(t).$index,o=it();return Vt(o.seleccionarItem(a))}),L(1,"a",5),ce(2,"i",6),L(3,"span",7),Q(4),O()()()}if(i&2){let t=e.$implicit;Le("ngClass",yo(4,lge,t.selected)),ie(1),Le("routerLink",t.link),ie(1),Le("ngClass","mdi "+t.icon),ie(2),We(t.title)}}var YH=(()=>{let e=class e{constructor(r,n){this.route=r,this.location=n,this.sidebarItems=[{title:"Inicio",icon:"mdi-view-dashboard",selected:!1,link:"/administrador"},{title:"Indicadores",icon:"mdi-chart-bar",selected:!1,link:"/administrador/indicadores"},{title:"Exposiciones",icon:"mdi-map",selected:!1,link:"/administrador/exposiciones"},{title:"Salas",icon:"mdi-border-all",selected:!1,link:"/administrador/salas"},{title:"Piezas",icon:"mdi-image-multiple",selected:!1,link:"/administrador/piezas"},{title:"Juegos",icon:"mdi-puzzle",selected:!1,link:"/administrador/juegos"}]}ngOnInit(){let r=this.location.path();console.log("ruta: ",r),this.seleccionarItem(this.sidebarItems.findIndex(n=>n.link.split("/")[2]===r.split("/")[2]))}seleccionarItem(r){this.sidebarItems.map(n=>{n.selected=!1}),this.sidebarItems[r].selected=!0,console.log(r,this.sidebarItems)}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(Zn))},e.\u0275cmp=St({type:e,selectors:[["app-sidebar"]],decls:6,vars:0,consts:[["data-sidebarbg","skin5",1,"left-sidebar"],[1,"scroll-sidebar"],[1,"sidebar-nav"],[1,"p-t-30"],[1,"sidebar-item",2,"border-bottom","1px solid #3f3f3f","padding-top","4px","padding-bottom","4px",3,"ngClass","click"],[1,"sidebar-link","waves-effect","waves-dark",2,"font-size","16px",3,"routerLink"],[2,"font-size","22px","padding-left","10px",3,"ngClass"],[1,"hide-menu","pl-2"],["class","sidebar-item","style","border-bottom: 1px solid #3f3f3f; padding-top: 4px; padding-bottom: 4px;",3,"ngClass"]],template:function(n,a){n&1&&(L(0,"aside",0)(1,"div",1)(2,"nav",2)(3,"ul",3),Lr(4,cge,5,6,"li",8,J1),O()()()()),n&2&&(ie(4),Or(a.sidebarItems))},dependencies:[gs,Yg],styles:[".sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .sidebar-item.selected[_ngcontent-%COMP%] > .sidebar-link[_ngcontent-%COMP%]:before{width:6px;background-color:#b7835e}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .sidebar-item.selected[_ngcontent-%COMP%] > .sidebar-link[_ngcontent-%COMP%]{padding-left:10px;background-color:#1f262d;color:#ccac98}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .sidebar-item.selected[_ngcontent-%COMP%] > .sidebar-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ccac98}"]});let i=e;return i})();var qH=(()=>{let e=class e{constructor(r,n,a){this.cookies=r,this.http=n,this.router=a,this.flagUrl="es.jpg",this.user="Error, sin usuario"}ngOnInit(){this.getUsuario()}changeLanguage(r){this.flagUrl=r+".jpg"}signOut(){this.cookies.delete("withuUserToken"),location.href="/login"}getUsuario(){let r=this.cookies.get("withuUserToken");this.http.get(Fi.apiURL+"/auth/editor",{headers:{Authorization:"Bearer "+r}}).subscribe(n=>{this.user=n.nombre},n=>{console.error(n.error.error),location.href="/login"})}goToMuseo(){let r=this.router.createUrlTree(["../pieza/exposiciones/es"]).toString();window.open(r,"_blank")}};e.\u0275fac=function(n){return new(n||e)(xe(Kn),xe(Un),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-navbar"]],decls:65,vars:2,consts:[["data-navbarbg","skin5",1,"topbar"],[1,"navbar","top-navbar","navbar-expand-md","navbar-dark"],["data-logobg","skin5",1,"navbar-header","pt-1"],["href","javascript:void(0)",1,"nav-toggler","waves-effect","waves-light","d-block","d-md-none"],[1,"ti-menu","ti-close"],["href","administrador",1,"navbar-brand"],[1,"logo-icon","p-l-10"],["src","../../assets/images/logos/logo_arte_header.png","width","36px","alt","homepage",1,"light-logo",2,"padding-top","15px"],[1,"logo-text"],["src","../../assets/images/logos/logo_arte_rte.png","width","62px","alt","homepage",1,"light-logo",2,"padding-top","15px"],["href","javascript:void(0)","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"topbartoggler","d-block","d-md-none","waves-effect","waves-light"],[1,"ti-more"],["id","navbarSupportedContent","data-navbarbg","skin5",1,"navbar-collapse","collapse","pt-1","pb-1"],[1,"navbar-nav","float-left","mr-auto"],[1,"nav-item","d-none","d-md-block"],["href","javascript:void(0)","data-sidebartype","mini-sidebar",1,"nav-link","sidebartoggler","waves-effect","waves-light"],[1,"mdi","mdi-menu","font-24"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"d-none","d-md-block"],[1,"fa","fa-angle-down"],[1,"d-block","d-md-none"],[1,"fa","fa-plus"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["routerLink","/administrador/exposiciones/crear",1,"dropdown-item","mt-2"],["routerLink","/administrador/salas/crear",1,"dropdown-item"],["routerLink","/administrador/piezas/crear",1,"dropdown-item"],["routerLink","/administrador/juegos/crear",1,"dropdown-item"],[1,"d-flex","align-items-center","nav-link"],[1,"text-muted",2,"text-decoration","underline","font-size","15px",3,"click"],[1,"mdi","mdi-link","pr-2"],[1,"navbar-nav","float-right",2,"margin-right","10px"],["id","selectedLanguage","alt","bandera","width","18",3,"src"],["aria-labelledby","navbarDropdown",1,"dropdown-menu",2,"padding-top","8px","margin-right","50px"],[1,"dropdown-item",2,"font-size","13px",3,"click"],[1,"nav-item","dropdown",2,"padding-right","30px","margin-top","-2px","font-size","12px"],["href","#","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle","text-muted","waves-effect","waves-dark","pro-pic"],[1,"nav-item","dropdown",2,"font-size","15px","color","white"],[1,"dropdown-menu","dropdown-menu-right","user-dd","animated","user-dropdown",2,"margin-top","16px"],["routerLink","/administrador/perfil","href","javascript:void(0)",1,"dropdown-item"],[1,"dropdown-divider"],["href","javascript:void(0)",1,"dropdown-item",2,"font-size","14px",3,"click"]],template:function(n,a){n&1&&(L(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),ce(4,"i",4),O(),L(5,"a",5)(6,"b",6),ce(7,"img",7),O(),L(8,"span",8),ce(9,"img",9),O(),L(10,"span",8)(11,"h4"),Q(12," \xA0 MUA"),O()()(),L(13,"a",10),ce(14,"i",11),O()(),L(15,"div",12)(16,"ul",13)(17,"li",14)(18,"a",15),ce(19,"i",16),O()(),L(20,"li",17)(21,"a",18)(22,"span",19),Q(23," Crear Nuevo \xA0 "),ce(24,"i",20),O(),L(25,"span",21),ce(26,"i",22),O()(),L(27,"div",23)(28,"a",24),Q(29,"Exposici\xF3n"),O(),L(30,"a",25),Q(31,"Sala"),O(),L(32,"a",26),Q(33,"Pieza"),O(),L(34,"a",27),Q(35,"Juego"),O()()(),L(36,"div",17)(37,"div",28)(38,"a",29),ye("click",function(){return a.goToMuseo()}),ce(39,"i",30),Q(40,"Ir al museo"),O()()()(),L(41,"ul",31)(42,"li",17)(43,"a",18)(44,"span",19),ce(45,"img",32),Q(46," \xA0 "),ce(47,"i",20),O()(),L(48,"div",33)(49,"a",34),ye("click",function(){return a.changeLanguage("es")}),Q(50,"\xA0CASTELLANO"),O(),L(51,"a",34),ye("click",function(){return a.changeLanguage("val")}),Q(52,"\xA0VALENCI\xC0"),O(),L(53,"a",34),ye("click",function(){return a.changeLanguage("en")}),Q(54,"\xA0ENGLISH"),O()()()(),L(55,"div",35)(56,"a",36)(57,"span",37),Q(58),O()(),L(59,"div",38)(60,"a",39),Q(61,"Mi perfil"),O(),ce(62,"div",40),L(63,"a",41),ye("click",function(){return a.signOut()}),Q(64,"Cerrar sesi\xF3n"),O()()()()()()),n&2&&(ie(45),Le("src","../../assets/images/paises/"+a.flagUrl,wr),ie(13),We(a.user))},dependencies:[Yg],styles:[".user-dropdown[_ngcontent-%COMP%]{background-color:#fff;color:#1f262d}.user-dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1f262d!important}.user-dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#eee;color:#1f262d!important}.dropdown-menu-right[_ngcontent-%COMP%]{font-size:14px;border:1px solid #ccc;border-radius:.75rem;padding-top:10px;width:220px;min-width:220px}.dropdown-menu[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #ccc}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#fff}.dropdown-divider[_ngcontent-%COMP%]{height:2px;background-color:#ccc}"]});let i=e;return i})();var vr=(()=>{let e=class e{constructor(){this.pageTitleSource=new vo("Dashboard"),this.pageTitle=this.pageTitleSource.asObservable(),this.breadcrumbSource=new vo([]),this.breadcrumb=this.breadcrumbSource.asObservable()}updateBreadcrumb(r,n){this.pageTitleSource.next(r),this.breadcrumbSource.next(n);var a=document.getElementById("page-breadcrumb");r==""?a&&(a.style.display="none"):a&&(a.style.display="block")}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function dge(i,e){if(i&1&&(Ls(0),Q(1),Os()),i&2){let t=it().$implicit;ie(1),We(t)}}function fge(i,e){if(i&1&&(L(0,"strong"),Q(1),O()),i&2){let t=it().$implicit;ie(1),We(t)}}var pge=i=>({active:i});function Age(i,e){if(i&1&&(L(0,"li",9),Dt(1,dge,2,1,"ng-container",10)(2,fge,2,1,"ng-template",null,11,UV),O()),i&2){let t=e.last,r=gc(3);Le("ngClass",yo(3,pge,t)),ie(1),Le("ngIf",!t)("ngIfElse",r)}}var ZH=(()=>{let e=class e{constructor(r){this.breadcrumbService=r,this.pageTitle="Default Title",this.breadcrumb=[]}ngOnInit(){this.breadcrumbService.pageTitle.subscribe(r=>this.pageTitle=r),this.breadcrumbService.breadcrumb.subscribe(r=>this.breadcrumb=r)}};e.\u0275fac=function(n){return new(n||e)(xe(vr))},e.\u0275cmp=St({type:e,selectors:[["app-breadcrumb"]],decls:10,vars:2,consts:[["href","https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap","rel","stylesheet"],["id","page-breadcrumb",1,"page-breadcrumb"],[1,"row"],[1,"col-12","d-flex","align-items-center"],[1,"titulo-pagina",2,"font-family","'Nunito', sans-serif","color","#3A3A3A"],["aria-label","breadcrumb"],[1,"breadcrumb",2,"padding-left","30px","padding-top","18px"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"dropdown-divider",2,"background-color","#8F8F8F","height","2px","margin-bottom","10px"],[1,"breadcrumb-item",3,"ngClass"],[4,"ngIf","ngIfElse"],["lastItem",""]],template:function(n,a){n&1&&(ce(0,"link",0),L(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Q(5),O(),L(6,"nav",5)(7,"ol",6),Dt(8,Age,4,5,"li",7),O()()()(),ce(9,"div",8),O()),n&2&&(ie(5),We(a.pageTitle),ie(3),Le("ngForOf",a.breadcrumb))},dependencies:[gs,ia,vn],styles:[".titulo-pagina[_ngcontent-%COMP%]{margin-top:15px}.breadcrumb[_ngcontent-%COMP%]{margin-right:30px}"]});let i=e;return i})();var JH=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-footer"]],decls:7,vars:0,consts:[[1,"footer","text-center"],["href","https://arte.ovh/withu",1,"mr-2"],["href","politica-de-privacidad",1,"ml-2"]],template:function(n,a){n&1&&(L(0,"footer",0),Q(1," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(2,"a",1),Q(3,"WithU"),O(),Q(4," | "),L(5,"a",2),Q(6,"Pol\xEDtica de Privacidad y Cookies"),O()())},styles:["footer[_ngcontent-%COMP%]{background-color:#fff}"]});let i=e;return i})();var FS=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-admin-layout"]],decls:8,vars:0,consts:[["id","main-wrapper"],[1,"page-wrapper"],[1,"container-fluid"]],template:function(n,a){n&1&&(L(0,"div",0),ce(1,"app-sidebar")(2,"app-navbar"),L(3,"div",1),ce(4,"app-breadcrumb"),L(5,"div",2),ce(6,"router-outlet"),O()()(),ce(7,"app-footer"))},dependencies:[rd,YH,qH,ZH,JH],styles:[".page-wrapper[_ngcontent-%COMP%]{padding:0 1em}"]});let i=e;return i})();var ba=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/piezas",this.headers=new Ja({Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.params=new Fs,this.options={headers:this.headers,params:this.params}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getAll(){return this.http.get(this.apiUrl,this.options)}getLista(r,n){return n&&(this.options.params=this.options.params.set("nombre",n?.nombre?.value).set("sala",n?.sala?.value).set("pag",n?.pagina).set("lim",n?.numero?.value)),this.http.get(`${this.apiUrl}/lista/${r}`,this.options)}getInfo(r,n){return this.http.get(`${this.apiUrl}/info/${r}/${n}`,this.options)}createNew(r){return this.http.post(this.apiUrl,r,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Tn=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/sala",this.headers=new Ja({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.options={headers:this.headers}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getAll(){return this.http.get(this.apiUrl,this.options)}getExposicionSala(r){return this.http.get(`${this.apiUrl}/${r}/exposicion`,this.options)}getNumSalas(r,n,a,o){return this.http.get(this.apiUrl,{params:{desde:r,hasta:n,nombre:a,exposicion_id:o},headers:this.headers})}createNew(r){return this.http.post(this.apiUrl,r,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var sn=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/exposicion",this.headers=new Ja({Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.options={headers:this.headers}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getSalasExposicion(r){return this.http.get(`${this.apiUrl}/${r}/salas`,this.options)}getAll(){return this.http.get(this.apiUrl,this.options)}getNumExposiciones(r,n,a){return this.http.get(this.apiUrl,{params:{desde:r,hasta:n,nombre:a},headers:this.headers})}createNew(r){return console.log(r.get("imagen")),this.http.post(this.apiUrl,r,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Mf=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrlPieza=Fi.apiURL+"/indicadores/escaneoPieza",this.apiUrlJuego=Fi.apiURL+"/indicadores/escaneoJuego",this.apiUrlUsuario=Fi.apiURL+"/usuario",this.headers=new Ja({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.options={headers:this.headers}}getAllEscaneosPiezas(){return this.http.get(this.apiUrlPieza,{headers:this.headers})}getAllEscaneosPieza(r){return this.http.get(this.apiUrlPieza,{params:{pieza_id:r},headers:this.headers})}getFiltroEscaneosPieza(r,n,a,o){let s=new Fs().set("year",r.toString());return n!==void 0&&(s=s.set("month",n.toString())),a!==void 0&&(s=s.set("week",a.toString())),o!==void 0&&(s=s.set("day",o.toString())),console.log("URL:",`${this.apiUrlPieza}/filtro?${s.toString()}`),this.http.get(`${this.apiUrlPieza}/filtro`,{params:s,headers:this.headers})}createNewEscaneosPieza(r){return this.http.post(this.apiUrlPieza,r,this.options)}editarEscaneosPieza(r,n){return this.http.put(`${this.apiUrlPieza}/${r}`,n,this.options)}getUsoIdiomas(){return this.http.get(`${this.apiUrlPieza}/idiomas`,{headers:this.headers})}getAllEscaneosJuegos(){return this.http.get(this.apiUrlJuego,{headers:this.headers})}getAllEscaneosJuego(r){return this.http.get(this.apiUrlJuego,{params:{juego_id:r},headers:this.headers})}getFiltroEscaneosJuego(r,n,a,o){let s=new Fs().set("year",r.toString());return n!==void 0&&(s=s.set("month",n.toString())),a!==void 0&&(s=s.set("week",a.toString())),o!==void 0&&(s=s.set("day",o.toString())),console.log("URL:",`${this.apiUrlJuego}/filtro?${s.toString()}`),this.http.get(`${this.apiUrlJuego}/filtro`,{params:s,headers:this.headers})}createNewEscaneosJuego(r){return this.http.post(this.apiUrlJuego,r,this.options)}editarEscaneosJuego(r,n){return this.http.put(`${this.apiUrlJuego}/${r}`,n,this.options)}getAllUsuarios(){return this.http.get(this.apiUrlUsuario,{headers:this.headers})}getIndicadorUsuarios(){return this.http.get(`${this.apiUrlUsuario}/indicadores`,{headers:this.headers})}createNewUsuarioAdulto(){let r={adulto:1,ni\u00F1o:0};return this.http.post(this.apiUrlUsuario,r)}createNewUsuarioNino(){let r={ni\u00F1o:1,adulto:0};return this.http.post(this.apiUrlUsuario,r)}addNino(r){let n={ni\u00F1o:1};return this.http.put(`${this.apiUrlUsuario}/${r}`,n,this.options)}addAdulto(r){let n={adulto:1};return this.http.put(`${this.apiUrlUsuario}/${r}`,n,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ys=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/juego",this.headers=new Ja({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.params=new Fs,this.options={headers:this.headers,params:this.params}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getAll(r){return r.nombre.value&&r.nombre.value!==""&&this.options.params.set("nombre",r.nombre.value),r.exposicion.value&&this.options.params.set("exposicion",r.exposicion.value),r.pagina.value&&this.options.params.set("pag",r.pagina.value),r.numero.value&&this.options.params.set("lim",r.numero.value),this.http.get(this.apiUrl,this.options)}createNew(r){return this.http.post(this.apiUrl,r,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var zR=function(i,e){return zR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},zR(i,e)};function le(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zR(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vge=function(){function i(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return i}(),yge=function(){function i(){this.browser=new vge,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return i}(),IA=new yge;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(IA.wxa=!0,IA.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?IA.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(IA.node=!0,IA.svgSupported=!0):xge(navigator.userAgent,IA);function xge(i,e){var t=e.browser,r=i.match(/Firefox\/([\d.]+)/),n=i.match(/MSIE\s([\d.]+)/)||i.match(/Trident\/.+?rv:(([\d.]+))/),a=i.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(i);r&&(t.firefox=!0,t.version=r[1]),n&&(t.ie=!0,t.version=n[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var ki=IA;var US=12,VR="sans-serif",Wl=US+"px "+VR,_ge=20,wge=100,bge="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Sge(i){var e={};if(typeof JSON>"u")return e;for(var t=0;t<i.length;t++){var r=String.fromCharCode(t+32),n=(i.charCodeAt(t)-_ge)/wge;e[r]=n}return e}var Cge=Sge(bge),xs={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var i,e;return function(t,r){if(!i){var n=xs.createCanvas();i=n&&n.getContext("2d")}if(i)return e!==r&&(e=i.font=r||Wl),i.measureText(t);t=t||"",r=r||Wl;var a=/(\d+)px/.exec(r),o=a&&+a[1]||US,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var l=0;l<t.length;l++){var c=Cge[t[l]];s+=c==null?o:c*o}return{width:s}}}(),loadImage:function(i,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=i,r}};var tQ=qo(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(i,e){return i["[object "+e+"]"]=!0,i},{}),iQ=qo(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(i,e){return i["[object "+e+"Array]"]=!0,i},{}),Jg=Object.prototype.toString,zS=Array.prototype,Ege=zS.forEach,Tge=zS.filter,HR=zS.slice,Mge=zS.map,$H=(function(){}).constructor,kS=$H?$H.prototype:null,QR="__proto__",Ige=2311;function VS(){return Ige++}function BA(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];typeof console<"u"&&console.error.apply(console,i)}function Tt(i){if(i==null||typeof i!="object")return i;var e=i,t=Jg.call(i);if(t==="[object Array]"){if(!Ny(i)){e=[];for(var r=0,n=i.length;r<n;r++)e[r]=Tt(i[r])}}else if(iQ[t]){if(!Ny(i)){var a=i.constructor;if(a.from)e=a.from(i);else{e=new a(i.length);for(var r=0,n=i.length;r<n;r++)e[r]=i[r]}}}else if(!tQ[t]&&!Ny(i)&&!Bf(i)){e={};for(var o in i)i.hasOwnProperty(o)&&o!==QR&&(e[o]=Tt(i[o]))}return e}function ri(i,e,t){if(!yt(e)||!yt(i))return t?Tt(e):i;for(var r in e)if(e.hasOwnProperty(r)&&r!==QR){var n=i[r],a=e[r];yt(a)&&yt(n)&&!Ee(a)&&!Ee(n)&&!Bf(a)&&!Bf(n)&&!eQ(a)&&!eQ(n)&&!Ny(a)&&!Ny(n)?ri(n,a,t):(t||!(r in i))&&(i[r]=Tt(e[r]))}return i}function $g(i,e){for(var t=i[0],r=1,n=i.length;r<n;r++)t=ri(t,i[r],e);return t}function Ce(i,e){if(Object.assign)Object.assign(i,e);else for(var t in e)e.hasOwnProperty(t)&&t!==QR&&(i[t]=e[t]);return i}function At(i,e,t){for(var r=si(e),n=0;n<r.length;n++){var a=r[n];(t?e[a]!=null:i[a]==null)&&(i[a]=e[a])}return i}var nHe=xs.createCanvas;function qt(i,e){if(i){if(i.indexOf)return i.indexOf(e);for(var t=0,r=i.length;t<r;t++)if(i[t]===e)return t}return-1}function rQ(i,e){var t=i.prototype;function r(){}r.prototype=e.prototype,i.prototype=new r;for(var n in t)t.hasOwnProperty(n)&&(i.prototype[n]=t[n]);i.prototype.constructor=i,i.superClass=e}function jr(i,e,t){if(i="prototype"in i?i.prototype:i,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var a=r[n];a!=="constructor"&&(t?e[a]!=null:i[a]==null)&&(i[a]=e[a])}else At(i,e,t)}function Sa(i){return!i||typeof i=="string"?!1:typeof i.length=="number"}function W(i,e,t){if(i&&e)if(i.forEach&&i.forEach===Ege)i.forEach(e,t);else if(i.length===+i.length)for(var r=0,n=i.length;r<n;r++)e.call(t,i[r],r,i);else for(var a in i)i.hasOwnProperty(a)&&e.call(t,i[a],a,i)}function Me(i,e,t){if(!i)return[];if(!e)return HS(i);if(i.map&&i.map===Mge)return i.map(e,t);for(var r=[],n=0,a=i.length;n<a;n++)r.push(e.call(t,i[n],n,i));return r}function qo(i,e,t,r){if(i&&e){for(var n=0,a=i.length;n<a;n++)t=e.call(r,t,i[n],n,i);return t}}function Xi(i,e,t){if(!i)return[];if(!e)return HS(i);if(i.filter&&i.filter===Tge)return i.filter(e,t);for(var r=[],n=0,a=i.length;n<a;n++)e.call(t,i[n],n,i)&&r.push(i[n]);return r}function nQ(i,e,t){if(i&&e){for(var r=0,n=i.length;r<n;r++)if(e.call(t,i[r],r,i))return i[r]}}function si(i){if(!i)return[];if(Object.keys)return Object.keys(i);var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(t);return e}function Bge(i,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return i.apply(e,t.concat(HR.call(arguments)))}}var st=kS&&ft(kS.bind)?kS.call.bind(kS.bind):Bge;function Ut(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return i.apply(this,e.concat(HR.call(arguments)))}}function Ee(i){return Array.isArray?Array.isArray(i):Jg.call(i)==="[object Array]"}function ft(i){return typeof i=="function"}function Ye(i){return typeof i=="string"}function Uy(i){return Jg.call(i)==="[object String]"}function mi(i){return typeof i=="number"}function yt(i){var e=typeof i;return e==="function"||!!i&&e==="object"}function eQ(i){return!!tQ[Jg.call(i)]}function ka(i){return!!iQ[Jg.call(i)]}function Bf(i){return typeof i=="object"&&typeof i.nodeType=="number"&&typeof i.ownerDocument=="object"}function Df(i){return i.colorStops!=null}function aQ(i){return i.image!=null}function oQ(i){return Jg.call(i)==="[object RegExp]"}function Rf(i){return i!==i}function Mn(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=0,r=i.length;t<r;t++)if(i[t]!=null)return i[t]}function Yt(i,e){return i??e}function wo(i,e,t){return i??e??t}function HS(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return HR.apply(i,e)}function e0(i){if(typeof i=="number")return[i,i,i,i];var e=i.length;return e===2?[i[0],i[1],i[0],i[1]]:e===3?[i[0],i[1],i[2],i[1]]:i}function In(i,e){if(!i)throw new Error(e)}function bo(i){return i==null?null:typeof i.trim=="function"?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var sQ="__ec_primitive__";function DA(i){i[sQ]=!0}function Ny(i){return i[sQ]}var Dge=function(){function i(){this.data={}}return i.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},i.prototype.has=function(e){return this.data.hasOwnProperty(e)},i.prototype.get=function(e){return this.data[e]},i.prototype.set=function(e,t){return this.data[e]=t,this},i.prototype.keys=function(){return si(this.data)},i.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},i}(),lQ=typeof Map=="function";function Rge(){return lQ?new Map:new Dge}var Pge=function(){function i(e){var t=Ee(e);this.data=Rge();var r=this;e instanceof i?e.each(n):e&&W(e,n);function n(a,o){t?r.set(a,o):r.set(o,a)}}return i.prototype.hasKey=function(e){return this.data.has(e)},i.prototype.get=function(e){return this.data.get(e)},i.prototype.set=function(e,t){return this.data.set(e,t),t},i.prototype.each=function(e,t){this.data.forEach(function(r,n){e.call(t,r,n)})},i.prototype.keys=function(){var e=this.data.keys();return lQ?Array.from(e):e},i.prototype.removeKey=function(e){this.data.delete(e)},i}();function ct(i){return new Pge(i)}function RA(i,e){for(var t=new i.constructor(i.length+e.length),r=0;r<i.length;r++)t[r]=i[r];for(var n=i.length,r=0;r<e.length;r++)t[r+n]=e[r];return t}function Pf(i,e){var t;if(Object.create)t=Object.create(i);else{var r=function(){};r.prototype=i,t=new r}return e&&Ce(t,e),t}function QS(i){var e=i.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Mt(i,e){return i.hasOwnProperty(e)}function hn(){}var t0=180/Math.PI;var GR=function(i,e){return GR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},GR(i,e)};function Yi(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");GR(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ch(i,e){return i==null&&(i=0),e==null&&(e=0),[i,e]}function So(i,e){return i[0]=e[0],i[1]=e[1],i}function ll(i){return[i[0],i[1]]}function cQ(i,e,t){return i[0]=e,i[1]=t,i}function WR(i,e,t){return i[0]=e[0]+t[0],i[1]=e[1]+t[1],i}function ky(i,e,t,r){return i[0]=e[0]+t[0]*r,i[1]=e[1]+t[1]*r,i}function yu(i,e,t){return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i}function GS(i){return Math.sqrt(Lge(i))}function Lge(i){return i[0]*i[0]+i[1]*i[1]}function i0(i,e,t){return i[0]=e[0]*t,i[1]=e[1]*t,i}function wc(i,e){var t=GS(e);return t===0?(i[0]=0,i[1]=0):(i[0]=e[0]/t,i[1]=e[1]/t),i}function WS(i,e){return Math.sqrt((i[0]-e[0])*(i[0]-e[0])+(i[1]-e[1])*(i[1]-e[1]))}var bc=WS;function Oge(i,e){return(i[0]-e[0])*(i[0]-e[0])+(i[1]-e[1])*(i[1]-e[1])}var nd=Oge;function r0(i,e,t,r){return i[0]=e[0]+r*(t[0]-e[0]),i[1]=e[1]+r*(t[1]-e[1]),i}function Ca(i,e,t){var r=e[0],n=e[1];return i[0]=t[0]*r+t[2]*n+t[4],i[1]=t[1]*r+t[3]*n+t[5],i}function jl(i,e,t){return i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i}function Kl(i,e,t){return i[0]=Math.max(e[0],t[0]),i[1]=Math.max(e[1],t[1]),i}var n0=function(){function i(e,t){this.target=e,this.topTarget=t&&t.topTarget}return i}(),Fge=function(){function i(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return i.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new n0(t,e),"dragstart",e.event))},i.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,n=e.offsetY,a=r-this._x,o=n-this._y;this._x=r,this._y=n,t.drift(a,o,e),this.handler.dispatchToElement(new n0(t,e),"drag",e.event);var s=this.handler.findHover(r,n,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.handler.dispatchToElement(new n0(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new n0(s,e),"dragenter",e.event))}},i.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new n0(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new n0(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},i}(),uQ=Fge;var Nge=function(){function i(e){e&&(this._$eventProcessor=e)}return i.prototype.on=function(e,t,r,n){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(n=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:t,ctx:n||this,callAtLast:r.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,l):a[e].push(l),this},i.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},i.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var n=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&n.push(r[e][a]);r[e]=n}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},i.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],a=this._$eventProcessor;if(n)for(var o=t.length,s=n.length,l=0;l<s;l++){var c=n[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},i.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],a=this._$eventProcessor;if(n)for(var o=t.length,s=t[o-1],l=n.length,c=0;c<l;c++){var u=n[c];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(s);break;case 1:u.h.call(s,t[0]);break;case 2:u.h.call(s,t[0],t[1]);break;default:u.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},i}(),$a=Nge;var Uge=Math.log(2);function jR(i,e,t,r,n,a){var o=r+"-"+n,s=i.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~n)/Uge);return i[t][l]}for(var c=r|1<<t,u=t+1;r&1<<u;)u++;for(var h=0,d=0,f=0;d<s;d++){var m=1<<d;m&n||(h+=(f%2?-1:1)*i[t][d]*jR(i,e-1,u,c,n|m,a),f++)}return a[o]=h,h}function KR(i,e){var t=[[i[0],i[1],1,0,0,0,-e[0]*i[0],-e[0]*i[1]],[0,0,0,i[0],i[1],1,-e[1]*i[0],-e[1]*i[1]],[i[2],i[3],1,0,0,0,-e[2]*i[2],-e[2]*i[3]],[0,0,0,i[2],i[3],1,-e[3]*i[2],-e[3]*i[3]],[i[4],i[5],1,0,0,0,-e[4]*i[4],-e[4]*i[5]],[0,0,0,i[4],i[5],1,-e[5]*i[4],-e[5]*i[5]],[i[6],i[7],1,0,0,0,-e[6]*i[6],-e[6]*i[7]],[0,0,0,i[6],i[7],1,-e[7]*i[6],-e[7]*i[7]]],r={},n=jR(t,8,0,0,0,r);if(n!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*jR(t,7,o===0?1:0,1<<o,1<<s,r)/n*e[o];return function(l,c,u){var h=c*a[6]+u*a[7]+1;l[0]=(c*a[0]+u*a[1]+a[2])/h,l[1]=(c*a[3]+u*a[4]+a[5])/h}}}var hQ="___zrEVENTSAVED",XR=[];function dQ(i,e,t,r,n){return jS(XR,e,r,n,!0)&&jS(i,t,XR[0],XR[1])}function jS(i,e,t,r,n){if(e.getBoundingClientRect&&ki.domSupported&&!YR(e)){var a=e[hQ]||(e[hQ]={}),o=kge(e,a),s=zge(o,a,n);if(s)return s(i,t,r),!0}return!1}function kge(i,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],n=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",n[c]+":0",r[1-l]+":auto",n[1-c]+":auto",""].join("!important;"),i.appendChild(o),t.push(o)}return t}function zge(i,e,t){for(var r=t?"invTrans":"trans",n=e[r],a=e.srcCoords,o=[],s=[],l=!0,c=0;c<4;c++){var u=i[c].getBoundingClientRect(),h=2*c,d=u.left,f=u.top;o.push(d,f),l=l&&a&&d===a[h]&&f===a[h+1],s.push(i[c].offsetLeft,i[c].offsetTop)}return l&&n?n:(e.srcCoords=o,e[r]=t?KR(s,o):KR(o,s))}function YR(i){return i.nodeName.toUpperCase()==="CANVAS"}var Vge=/([&<>"'])/g,Hge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zo(i){return i==null?"":(i+"").replace(Vge,function(e,t){return Hge[t]})}var Qge=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qR=[],Gge=ki.browser.firefox&&+ki.browser.version.split(".")[0]<39;function KS(i,e,t,r){return t=t||{},r?fQ(i,e,t):Gge&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):fQ(i,e,t),t}function fQ(i,e,t){if(ki.domSupported&&i.getBoundingClientRect){var r=e.clientX,n=e.clientY;if(YR(i)){var a=i.getBoundingClientRect();t.zrX=r-a.left,t.zrY=n-a.top;return}else if(jS(qR,i,r,n)){t.zrX=qR[0],t.zrY=qR[1];return}}t.zrX=t.zrY=0}function XS(i){return i||window.event}function cl(i,e,t){if(e=XS(e),e.zrX!=null)return e;var r=e.type,n=r&&r.indexOf("touch")>=0;if(n){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&KS(i,o,e,t)}else{KS(i,e,e,t);var a=Wge(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&Qge.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function Wge(i){var e=i.wheelDelta;if(e)return e;var t=i.deltaX,r=i.deltaY;if(t==null||r==null)return e;var n=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*n*a}function zy(i,e,t,r){i.addEventListener(e,t,r)}function pQ(i,e,t,r){i.removeEventListener(e,t,r)}var ul=function(i){i.preventDefault(),i.stopPropagation(),i.cancelBubble=!0};function ZR(i){return i.which===2||i.which===3}var mQ=function(){function i(){this._track=[]}return i.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},i.prototype.clear=function(){return this._track.length=0,this},i.prototype._doTrack=function(e,t,r){var n=e.touches;if(n){for(var a={points:[],touches:[],target:t,event:e},o=0,s=n.length;o<s;o++){var l=n[o],c=KS(r,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},i.prototype._recognize=function(e){for(var t in JR)if(JR.hasOwnProperty(t)){var r=JR[t](this._track,e);if(r)return r}},i}();function AQ(i){var e=i[1][0]-i[0][0],t=i[1][1]-i[0][1];return Math.sqrt(e*e+t*t)}function jge(i){return[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]}var JR={pinch:function(i,e){var t=i.length;if(t){var r=(i[t-1]||{}).points,n=(i[t-2]||{}).points||r;if(n&&n.length>1&&r&&r.length>1){var a=AQ(r)/AQ(n);!isFinite(a)&&(a=1),e.pinchScale=a;var o=jge(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:i[0].target,event:e}}}}};function za(){return[1,0,0,1,0,0]}function Lf(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i}function Vy(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function hl(i,e,t){var r=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return i[0]=r,i[1]=n,i[2]=a,i[3]=o,i[4]=s,i[5]=l,i}function Jo(i,e,t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4]+t[0],i[5]=e[5]+t[1],i}function dl(i,e,t,r){r===void 0&&(r=[0,0]);var n=e[0],a=e[2],o=e[4],s=e[1],l=e[3],c=e[5],u=Math.sin(t),h=Math.cos(t);return i[0]=n*h+s*u,i[1]=-n*u+s*h,i[2]=a*h+l*u,i[3]=-a*u+h*l,i[4]=h*(o-r[0])+u*(c-r[1])+r[0],i[5]=h*(c-r[1])-u*(o-r[0])+r[1],i}function o0(i,e,t){var r=t[0],n=t[1];return i[0]=e[0]*r,i[1]=e[1]*n,i[2]=e[2]*r,i[3]=e[3]*n,i[4]=e[4]*r,i[5]=e[5]*n,i}function Sc(i,e){var t=e[0],r=e[2],n=e[4],a=e[1],o=e[3],s=e[5],l=t*o-a*r;return l?(l=1/l,i[0]=o*l,i[1]=-a*l,i[2]=-r*l,i[3]=t*l,i[4]=(r*s-o*n)*l,i[5]=(a*n-t*s)*l,i):null}function gQ(i){var e=za();return Vy(e,i),e}var Kge=function(){function i(e,t){this.x=e||0,this.y=t||0}return i.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.set=function(e,t){return this.x=e,this.y=t,this},i.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},i.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},i.prototype.scale=function(e){this.x*=e,this.y*=e},i.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},i.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},i.prototype.dot=function(e){return this.x*e.x+this.y*e.y},i.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},i.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},i.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},i.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},i.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},i.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},i.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},i.set=function(e,t,r){e.x=t,e.y=r},i.copy=function(e,t){e.x=t.x,e.y=t.y},i.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},i.lenSquare=function(e){return e.x*e.x+e.y*e.y},i.dot=function(e,t){return e.x*t.x+e.y*t.y},i.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},i.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},i.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},i.scaleAndAdd=function(e,t,r,n){e.x=t.x+r.x*n,e.y=t.y+r.y*n},i.lerp=function(e,t,r,n){var a=1-n;e.x=a*t.x+n*r.x,e.y=a*t.y+n*r.y},i}(),Ii=Kge;var YS=Math.min,qS=Math.max,PA=new Ii,LA=new Ii,OA=new Ii,FA=new Ii,Hy=new Ii,Qy=new Ii,Xge=function(){function i(e,t,r,n){r<0&&(e=e+r,r=-r),n<0&&(t=t+n,n=-n),this.x=e,this.y=t,this.width=r,this.height=n}return i.prototype.union=function(e){var t=YS(e.x,this.x),r=YS(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=qS(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=qS(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},i.prototype.applyTransform=function(e){i.applyTransform(this,this,e)},i.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,n=e.height/t.height,a=za();return Jo(a,a,[-t.x,-t.y]),o0(a,a,[r,n]),Jo(a,a,[e.x,e.y]),a},i.prototype.intersect=function(e,t){if(!e)return!1;e instanceof i||(e=i.create(e));var r=this,n=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,h=e.y+e.height,d=!(a<l||c<n||s<u||h<o);if(t){var f=1/0,m=0,y=Math.abs(a-l),g=Math.abs(c-n),x=Math.abs(s-u),b=Math.abs(h-o),S=Math.min(y,g),E=Math.min(x,b);a<l||c<n?S>m&&(m=S,y<g?Ii.set(Qy,-y,0):Ii.set(Qy,g,0)):S<f&&(f=S,y<g?Ii.set(Hy,y,0):Ii.set(Hy,-g,0)),s<u||h<o?E>m&&(m=E,x<b?Ii.set(Qy,0,-x):Ii.set(Qy,0,b)):S<f&&(f=S,x<b?Ii.set(Hy,0,x):Ii.set(Hy,0,-b))}return t&&Ii.copy(t,d?Hy:Qy),d},i.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copy=function(e){i.copy(this,e)},i.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},i.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},i.prototype.isZero=function(){return this.width===0||this.height===0},i.create=function(e){return new i(e.x,e.y,e.width,e.height)},i.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},i.applyTransform=function(e,t,r){if(!r){e!==t&&i.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var n=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*n+o,e.y=t.y*a+s,e.width=t.width*n,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}PA.x=OA.x=t.x,PA.y=FA.y=t.y,LA.x=FA.x=t.x+t.width,LA.y=OA.y=t.y+t.height,PA.transform(r),FA.transform(r),LA.transform(r),OA.transform(r),e.x=YS(PA.x,LA.x,OA.x,FA.x),e.y=YS(PA.y,LA.y,OA.y,FA.y);var l=qS(PA.x,LA.x,OA.x,FA.x),c=qS(PA.y,LA.y,OA.y,FA.y);e.width=l-e.x,e.height=c-e.y},i}(),Ht=Xge;var yQ="silent";function Yge(i,e,t){return{type:i,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:qge}}function qge(){ul(this.event)}var Zge=function(i){Yi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}($a),Gy=function(){function i(e,t){this.x=e,this.y=t}return i}(),Jge=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],$R=new Ht(0,0,0,0),xQ=function(i){Yi(e,i);function e(t,r,n,a,o){var s=i.call(this)||this;return s._hovered=new Gy(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,n=n||new Zge,s.proxy=null,s.setHandlerProxy(n),s._draggingMgr=new uQ(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(W(Jge,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,n=t.zrY,a=_Q(this,r,n),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Gy(r,n):this.findHover(r,n),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==s&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Gy(0,0)},e.prototype.dispatch=function(t,r){var n=this[t];n&&n.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,n){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=Yge(r,t,n);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(t,r,n){var a=this.storage.getDisplayList(),o=new Gy(t,r);if(vQ(a,o,t,r,n),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,c=l/2,u=new Ht(t-c,r-c,l,l),h=a.length-1;h>=0;h--){var d=a[h];d!==n&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&($R.copy(d.getBoundingRect()),d.transform&&$R.applyTransform(d.transform),$R.intersect(u)&&s.push(d))}if(s.length)for(var f=4,m=Math.PI/12,y=Math.PI*2,g=0;g<c;g+=f)for(var x=0;x<y;x+=m){var b=t+g*Math.cos(x),S=r+g*Math.sin(x);if(vQ(s,o,b,S,n),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new mQ);var n=this._gestureMgr;r==="start"&&n.clear();var a=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&n.clear(),a){var o=a.type;t.gestureEvent=o;var s=new Gy;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}($a);W(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(i){xQ.prototype[i]=function(e){var t=e.zrX,r=e.zrY,n=_Q(this,t,r),a,o;if((i!=="mouseup"||!n)&&(a=this.findHover(t,r),o=a.target),i==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(i==="mouseup")this._upEl=o;else if(i==="click"){if(this._downEl!==this._upEl||!this._downPoint||bc(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,i,e)}});function $ge(i,e,t){if(i[i.rectHover?"rectContain":"contain"](e,t)){for(var r=i,n=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(n=!0);var s=r.__hostTarget;r=s||r.parent}return n?yQ:!0}return!1}function vQ(i,e,t,r,n){for(var a=i.length-1;a>=0;a--){var o=i[a],s=void 0;if(o!==n&&!o.ignore&&(s=$ge(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==yQ)){e.target=o;break}}}function _Q(i,e,t){var r=i.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var wQ=xQ;var CQ=32,Wy=7;function e0e(i){for(var e=0;i>=CQ;)e|=i&1,i>>=1;return i+e}function bQ(i,e,t,r){var n=e+1;if(n===t)return 1;if(r(i[n++],i[e])<0){for(;n<t&&r(i[n],i[n-1])<0;)n++;t0e(i,e,n)}else for(;n<t&&r(i[n],i[n-1])>=0;)n++;return n-e}function t0e(i,e,t){for(t--;e<t;){var r=i[e];i[e++]=i[t],i[t--]=r}}function SQ(i,e,t,r,n){for(r===e&&r++;r<t;r++){for(var a=i[r],o=e,s=r,l;o<s;)l=o+s>>>1,n(a,i[l])<0?s=l:o=l+1;var c=r-o;switch(c){case 3:i[o+3]=i[o+2];case 2:i[o+2]=i[o+1];case 1:i[o+1]=i[o];break;default:for(;c>0;)i[o+c]=i[o+c-1],c--}i[o]=a}}function eP(i,e,t,r,n,a){var o=0,s=0,l=1;if(a(i,e[t+n])>0){for(s=r-n;l<s&&a(i,e[t+n+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}else{for(s=n+1;l<s&&a(i,e[t+n-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=n-l,l=n-c}for(o++;o<l;){var u=o+(l-o>>>1);a(i,e[t+u])>0?o=u+1:l=u}return l}function tP(i,e,t,r,n,a){var o=0,s=0,l=1;if(a(i,e[t+n])<0){for(s=n+1;l<s&&a(i,e[t+n-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=n-l,l=n-c}else{for(s=r-n;l<s&&a(i,e[t+n+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}for(o++;o<l;){var u=o+(l-o>>>1);a(i,e[t+u])<0?l=u:o=u+1}return l}function i0e(i,e){var t=Wy,r,n,a=0,o=[];r=[],n=[];function s(f,m){r[a]=f,n[a]=m,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&n[f-1]<=n[f]+n[f+1]||f>=2&&n[f-2]<=n[f]+n[f-1])n[f-1]<n[f+1]&&f--;else if(n[f]>n[f+1])break;u(f)}}function c(){for(;a>1;){var f=a-2;f>0&&n[f-1]<n[f+1]&&f--,u(f)}}function u(f){var m=r[f],y=n[f],g=r[f+1],x=n[f+1];n[f]=y+x,f===a-3&&(r[f+1]=r[f+2],n[f+1]=n[f+2]),a--;var b=tP(i[g],i,m,y,0,e);m+=b,y-=b,y!==0&&(x=eP(i[m+y-1],i,g,x,x-1,e),x!==0&&(y<=x?h(m,y,g,x):d(m,y,g,x)))}function h(f,m,y,g){var x=0;for(x=0;x<m;x++)o[x]=i[f+x];var b=0,S=y,E=f;if(i[E++]=i[S++],--g===0){for(x=0;x<m;x++)i[E+x]=o[b+x];return}if(m===1){for(x=0;x<g;x++)i[E+x]=i[S+x];i[E+g]=o[b];return}for(var D=t,B,F,H;;){B=0,F=0,H=!1;do if(e(i[S],o[b])<0){if(i[E++]=i[S++],F++,B=0,--g===0){H=!0;break}}else if(i[E++]=o[b++],B++,F=0,--m===1){H=!0;break}while((B|F)<D);if(H)break;do{if(B=tP(i[S],o,b,m,0,e),B!==0){for(x=0;x<B;x++)i[E+x]=o[b+x];if(E+=B,b+=B,m-=B,m<=1){H=!0;break}}if(i[E++]=i[S++],--g===0){H=!0;break}if(F=eP(o[b],i,S,g,0,e),F!==0){for(x=0;x<F;x++)i[E+x]=i[S+x];if(E+=F,S+=F,g-=F,g===0){H=!0;break}}if(i[E++]=o[b++],--m===1){H=!0;break}D--}while(B>=Wy||F>=Wy);if(H)break;D<0&&(D=0),D+=2}if(t=D,t<1&&(t=1),m===1){for(x=0;x<g;x++)i[E+x]=i[S+x];i[E+g]=o[b]}else{if(m===0)throw new Error;for(x=0;x<m;x++)i[E+x]=o[b+x]}}function d(f,m,y,g){var x=0;for(x=0;x<g;x++)o[x]=i[y+x];var b=f+m-1,S=g-1,E=y+g-1,D=0,B=0;if(i[E--]=i[b--],--m===0){for(D=E-(g-1),x=0;x<g;x++)i[D+x]=o[x];return}if(g===1){for(E-=m,b-=m,B=E+1,D=b+1,x=m-1;x>=0;x--)i[B+x]=i[D+x];i[E]=o[S];return}for(var F=t;;){var H=0,U=0,k=!1;do if(e(o[S],i[b])<0){if(i[E--]=i[b--],H++,U=0,--m===0){k=!0;break}}else if(i[E--]=o[S--],U++,H=0,--g===1){k=!0;break}while((H|U)<F);if(k)break;do{if(H=m-tP(o[S],i,f,m,m-1,e),H!==0){for(E-=H,b-=H,m-=H,B=E+1,D=b+1,x=H-1;x>=0;x--)i[B+x]=i[D+x];if(m===0){k=!0;break}}if(i[E--]=o[S--],--g===1){k=!0;break}if(U=g-eP(i[b],o,0,g,g-1,e),U!==0){for(E-=U,S-=U,g-=U,B=E+1,D=S+1,x=0;x<U;x++)i[B+x]=o[D+x];if(g<=1){k=!0;break}}if(i[E--]=i[b--],--m===0){k=!0;break}F--}while(H>=Wy||U>=Wy);if(k)break;F<0&&(F=0),F+=2}if(t=F,t<1&&(t=1),g===1){for(E-=m,b-=m,B=E+1,D=b+1,x=m-1;x>=0;x--)i[B+x]=i[D+x];i[E]=o[S]}else{if(g===0)throw new Error;for(D=E-(g-1),x=0;x<g;x++)i[D+x]=o[x]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function NA(i,e,t,r){t||(t=0),r||(r=i.length);var n=r-t;if(!(n<2)){var a=0;if(n<CQ){a=bQ(i,t,r,e),SQ(i,t,r,t+a,e);return}var o=i0e(i,e),s=e0e(n);do{if(a=bQ(i,t,r,e),a<s){var l=n;l>s&&(l=s),SQ(i,t,t+l,t+a,e),a=l}o.pushRun(t,a),o.mergeRuns(),n-=a,t+=a}while(n!==0);o.forceMergeRuns()}}var lo=1,UA=2,Of=4;var EQ=!1;function iP(){EQ||(EQ=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function TQ(i,e){return i.zlevel===e.zlevel?i.z===e.z?i.z2-e.z2:i.z-e.z:i.zlevel-e.zlevel}var r0e=function(){function i(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=TQ}return i.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},i.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},i.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,n=0,a=t.length;n<a;n++)this._updateAndAddDisplayable(t[n],null,e);r.length=this._displayListLen,NA(r,TQ)},i.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var n=e.getClipPath();if(e.ignoreClip)t=null;else if(n){t?t=t.slice():t=[];for(var a=n,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty|=lo),this._updateAndAddDisplayable(c,t,r)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(iP(),u.z=0),isNaN(u.z2)&&(iP(),u.z2=0),isNaN(u.zlevel)&&(iP(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var h=e.getDecalElement&&e.getDecalElement();h&&this._updateAndAddDisplayable(h,t,r);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},i.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},i.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var n=qt(this._roots,e);n>=0&&this._roots.splice(n,1)},i.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},i.prototype.getRoots=function(){return this._roots},i.prototype.dispose=function(){this._displayList=null,this._roots=null},i}(),MQ=r0e;var IQ;IQ=ki.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(i){return setTimeout(i,16)};var jy=IQ;var ZS={linear:function(i){return i},quadraticIn:function(i){return i*i},quadraticOut:function(i){return i*(2-i)},quadraticInOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)},cubicIn:function(i){return i*i*i},cubicOut:function(i){return--i*i*i+1},cubicInOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)},quarticIn:function(i){return i*i*i*i},quarticOut:function(i){return 1- --i*i*i*i},quarticInOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)},quinticIn:function(i){return i*i*i*i*i},quinticOut:function(i){return--i*i*i*i*i+1},quinticInOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)},sinusoidalIn:function(i){return 1-Math.cos(i*Math.PI/2)},sinusoidalOut:function(i){return Math.sin(i*Math.PI/2)},sinusoidalInOut:function(i){return .5*(1-Math.cos(Math.PI*i))},exponentialIn:function(i){return i===0?0:Math.pow(1024,i-1)},exponentialOut:function(i){return i===1?1:1-Math.pow(2,-10*i)},exponentialInOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)},circularIn:function(i){return 1-Math.sqrt(1-i*i)},circularOut:function(i){return Math.sqrt(1- --i*i)},circularInOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)},elasticIn:function(i){var e,t=.1,r=.4;return i===0?0:i===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(i-=1))*Math.sin((i-e)*(2*Math.PI)/r)))},elasticOut:function(i){var e,t=.1,r=.4;return i===0?0:i===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*i)*Math.sin((i-e)*(2*Math.PI)/r)+1)},elasticInOut:function(i){var e,t=.1,r=.4;return i===0?0:i===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-e)*(2*Math.PI)/r)*.5+1)},backIn:function(i){var e=1.70158;return i*i*((e+1)*i-e)},backOut:function(i){var e=1.70158;return--i*i*((e+1)*i+e)+1},backInOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)},bounceIn:function(i){return 1-ZS.bounceOut(1-i)},bounceOut:function(i){return i<.36363636363636365?7.5625*i*i:i<.7272727272727273?7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?7.5625*(i-=.8181818181818182)*i+.9375:7.5625*(i-=.9545454545454546)*i+.984375},bounceInOut:function(i){return i<.5?ZS.bounceIn(i*2)*.5:ZS.bounceOut(i*2-1)*.5+.5}},JS=ZS;var $S=Math.pow,Nf=Math.sqrt,tC=1e-8,DQ=1e-4,BQ=Nf(3),eC=1/3,uh=ch(),Cc=ch(),s0=ch();function Ff(i){return i>-tC&&i<tC}function RQ(i){return i>tC||i<-tC}function Ea(i,e,t,r,n){var a=1-n;return a*a*(a*i+3*n*e)+n*n*(n*r+3*a*t)}function rP(i,e,t,r,n){var a=1-n;return 3*(((e-i)*a+2*(t-e)*n)*a+(r-t)*n*n)}function kA(i,e,t,r,n,a){var o=r+3*(e-t)-i,s=3*(t-e*2+i),l=3*(e-i),c=i-n,u=s*s-3*o*l,h=s*l-9*o*c,d=l*l-3*s*c,f=0;if(Ff(u)&&Ff(h))if(Ff(s))a[0]=0;else{var m=-l/s;m>=0&&m<=1&&(a[f++]=m)}else{var y=h*h-4*u*d;if(Ff(y)){var g=h/u,m=-s/o+g,x=-g/2;m>=0&&m<=1&&(a[f++]=m),x>=0&&x<=1&&(a[f++]=x)}else if(y>0){var b=Nf(y),S=u*s+1.5*o*(-h+b),E=u*s+1.5*o*(-h-b);S<0?S=-$S(-S,eC):S=$S(S,eC),E<0?E=-$S(-E,eC):E=$S(E,eC);var m=(-s-(S+E))/(3*o);m>=0&&m<=1&&(a[f++]=m)}else{var D=(2*u*s-3*o*h)/(2*Nf(u*u*u)),B=Math.acos(D)/3,F=Nf(u),H=Math.cos(B),m=(-s-2*F*H)/(3*o),x=(-s+F*(H+BQ*Math.sin(B)))/(3*o),U=(-s+F*(H-BQ*Math.sin(B)))/(3*o);m>=0&&m<=1&&(a[f++]=m),x>=0&&x<=1&&(a[f++]=x),U>=0&&U<=1&&(a[f++]=U)}}return f}function iC(i,e,t,r,n){var a=6*t-12*e+6*i,o=9*e+3*r-3*i-9*t,s=3*e-3*i,l=0;if(Ff(o)){if(RQ(a)){var c=-s/a;c>=0&&c<=1&&(n[l++]=c)}}else{var u=a*a-4*o*s;if(Ff(u))n[0]=-a/(2*o);else if(u>0){var h=Nf(u),c=(-a+h)/(2*o),d=(-a-h)/(2*o);c>=0&&c<=1&&(n[l++]=c),d>=0&&d<=1&&(n[l++]=d)}}return l}function Ec(i,e,t,r,n,a){var o=(e-i)*n+i,s=(t-e)*n+e,l=(r-t)*n+t,c=(s-o)*n+o,u=(l-s)*n+s,h=(u-c)*n+c;a[0]=i,a[1]=o,a[2]=c,a[3]=h,a[4]=h,a[5]=u,a[6]=l,a[7]=r}function rC(i,e,t,r,n,a,o,s,l,c,u){var h,d=.005,f=1/0,m,y,g,x;uh[0]=l,uh[1]=c;for(var b=0;b<1;b+=.05)Cc[0]=Ea(i,t,n,o,b),Cc[1]=Ea(e,r,a,s,b),g=nd(uh,Cc),g<f&&(h=b,f=g);f=1/0;for(var S=0;S<32&&!(d<DQ);S++)m=h-d,y=h+d,Cc[0]=Ea(i,t,n,o,m),Cc[1]=Ea(e,r,a,s,m),g=nd(Cc,uh),m>=0&&g<f?(h=m,f=g):(s0[0]=Ea(i,t,n,o,y),s0[1]=Ea(e,r,a,s,y),x=nd(s0,uh),y<=1&&x<f?(h=y,f=x):d*=.5);return u&&(u[0]=Ea(i,t,n,o,h),u[1]=Ea(e,r,a,s,h)),Nf(f)}function PQ(i,e,t,r,n,a,o,s,l){for(var c=i,u=e,h=0,d=1/l,f=1;f<=l;f++){var m=f*d,y=Ea(i,t,n,o,m),g=Ea(e,r,a,s,m),x=y-c,b=g-u;h+=Math.sqrt(x*x+b*b),c=y,u=g}return h}function Ba(i,e,t,r){var n=1-r;return n*(n*i+2*r*e)+r*r*t}function Ky(i,e,t,r){return 2*((1-r)*(e-i)+r*(t-e))}function LQ(i,e,t,r,n){var a=i-2*e+t,o=2*(e-i),s=i-r,l=0;if(Ff(a)){if(RQ(o)){var c=-s/o;c>=0&&c<=1&&(n[l++]=c)}}else{var u=o*o-4*a*s;if(Ff(u)){var c=-o/(2*a);c>=0&&c<=1&&(n[l++]=c)}else if(u>0){var h=Nf(u),c=(-o+h)/(2*a),d=(-o-h)/(2*a);c>=0&&c<=1&&(n[l++]=c),d>=0&&d<=1&&(n[l++]=d)}}return l}function nC(i,e,t){var r=i+t-2*e;return r===0?.5:(i-e)/r}function Uf(i,e,t,r,n){var a=(e-i)*r+i,o=(t-e)*r+e,s=(o-a)*r+a;n[0]=i,n[1]=a,n[2]=s,n[3]=s,n[4]=o,n[5]=t}function aC(i,e,t,r,n,a,o,s,l){var c,u=.005,h=1/0;uh[0]=o,uh[1]=s;for(var d=0;d<1;d+=.05){Cc[0]=Ba(i,t,n,d),Cc[1]=Ba(e,r,a,d);var f=nd(uh,Cc);f<h&&(c=d,h=f)}h=1/0;for(var m=0;m<32&&!(u<DQ);m++){var y=c-u,g=c+u;Cc[0]=Ba(i,t,n,y),Cc[1]=Ba(e,r,a,y);var f=nd(Cc,uh);if(y>=0&&f<h)c=y,h=f;else{s0[0]=Ba(i,t,n,g),s0[1]=Ba(e,r,a,g);var x=nd(s0,uh);g<=1&&x<h?(c=g,h=x):u*=.5}}return l&&(l[0]=Ba(i,t,n,c),l[1]=Ba(e,r,a,c)),Nf(h)}function OQ(i,e,t,r,n,a,o){for(var s=i,l=e,c=0,u=1/o,h=1;h<=o;h++){var d=h*u,f=Ba(i,t,n,d),m=Ba(e,r,a,d),y=f-s,g=m-l;c+=Math.sqrt(y*y+g*g),s=f,l=m}return c}var n0e=/cubic-bezier\(([0-9,\.e ]+)\)/;function l0(i){var e=i&&n0e.exec(i);if(e){var t=e[1].split(","),r=+bo(t[0]),n=+bo(t[1]),a=+bo(t[2]),o=+bo(t[3]);if(isNaN(r+n+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:kA(0,r,a,1,l,s)&&Ea(0,n,o,1,s[0])}}}var a0e=function(){function i(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||hn,this.ondestroy=e.ondestroy||hn,this.onrestart=e.onrestart||hn,e.easing&&this.setEasing(e.easing)}return i.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,n=e-this._startTime-this._pausedTime,a=n/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=n%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.prototype.setEasing=function(e){this.easing=e,this.easingFunc=ft(e)?e:JS[e]||l0(e)},i}(),FQ=a0e;var NQ=function(){function i(e){this.value=e}return i}();var o0e=function(){function i(){this._len=0}return i.prototype.insert=function(e){var t=new NQ(e);return this.insertEntry(t),t},i.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},i.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},i.prototype.len=function(){return this._len},i.prototype.clear=function(){this.head=this.tail=null,this._len=0},i}();var s0e=function(){function i(e){this._list=new o0e,this._maxSize=10,this._map={},this._maxSize=e}return i.prototype.put=function(e,t){var r=this._list,n=this._map,a=null;if(n[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete n[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new NQ(t),s.key=e,r.insertEntry(s),n[e]=s}return a},i.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},i.prototype.clear=function(){this._list.clear(),this._map={}},i.prototype.len=function(){return this._list.len()},i}(),ad=s0e;var UQ={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function xu(i){return i=Math.round(i),i<0?0:i>255?255:i}function l0e(i){return i=Math.round(i),i<0?0:i>360?360:i}function Yy(i){return i<0?0:i>1?1:i}function nP(i){var e=i;return e.length&&e.charAt(e.length-1)==="%"?xu(parseFloat(e)/100*255):xu(parseInt(e,10))}function zA(i){var e=i;return e.length&&e.charAt(e.length-1)==="%"?Yy(parseFloat(e)/100):Yy(parseFloat(e))}function aP(i,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?i+(e-i)*t*6:t*2<1?e:t*3<2?i+(e-i)*(2/3-t)*6:i}function kf(i,e,t){return i+(e-i)*t}function Tc(i,e,t,r,n){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function oP(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i}var zQ=new ad(20),oC=null;function c0(i,e){oC&&oP(oC,e),oC=zQ.put(i,oC||e.slice())}function Uo(i,e){if(i){e=e||[];var t=zQ.get(i);if(t)return oP(e,t);i=i+"";var r=i.replace(/ /g,"").toLowerCase();if(r in UQ)return oP(e,UQ[r]),c0(i,e),e;var n=r.length;if(r.charAt(0)==="#"){if(n===4||n===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Tc(e,0,0,0,1);return}return Tc(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,n===5?parseInt(r.slice(4),16)/15:1),c0(i,e),e}else if(n===7||n===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Tc(e,0,0,0,1);return}return Tc(e,(a&16711680)>>16,(a&65280)>>8,a&255,n===9?parseInt(r.slice(7),16)/255:1),c0(i,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===n){var l=r.substr(0,o),c=r.substr(o+1,s-(o+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Tc(e,+c[0],+c[1],+c[2],1):Tc(e,0,0,0,1);u=zA(c.pop());case"rgb":if(c.length>=3)return Tc(e,nP(c[0]),nP(c[1]),nP(c[2]),c.length===3?u:zA(c[3])),c0(i,e),e;Tc(e,0,0,0,1);return;case"hsla":if(c.length!==4){Tc(e,0,0,0,1);return}return c[3]=zA(c[3]),sP(c,e),c0(i,e),e;case"hsl":if(c.length!==3){Tc(e,0,0,0,1);return}return sP(c,e),c0(i,e),e;default:return}}Tc(e,0,0,0,1)}}function sP(i,e){var t=(parseFloat(i[0])%360+360)%360/360,r=zA(i[1]),n=zA(i[2]),a=n<=.5?n*(r+1):n+r-n*r,o=n*2-a;return e=e||[],Tc(e,xu(aP(o,a,t+1/3)*255),xu(aP(o,a,t)*255),xu(aP(o,a,t-1/3)*255),1),i.length===4&&(e[3]=i[3]),e}function c0e(i){if(i){var e=i[0]/255,t=i[1]/255,r=i[2]/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=a-n,s=(a+n)/2,l,c;if(o===0)l=0,c=0;else{s<.5?c=o/(a+n):c=o/(2-a-n);var u=((a-e)/6+o/2)/o,h=((a-t)/6+o/2)/o,d=((a-r)/6+o/2)/o;e===a?l=d-h:t===a?l=1/3+u-d:r===a&&(l=2/3+h-u),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,c,s];return i[3]!=null&&f.push(i[3]),f}}function sC(i,e){var t=Uo(i);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return Mc(t,t.length===4?"rgba":"rgb")}}function lC(i,e,t){if(!(!(e&&e.length)||!(i>=0&&i<=1))){t=t||[];var r=i*(e.length-1),n=Math.floor(r),a=Math.ceil(r),o=e[n],s=e[a],l=r-n;return t[0]=xu(kf(o[0],s[0],l)),t[1]=xu(kf(o[1],s[1],l)),t[2]=xu(kf(o[2],s[2],l)),t[3]=Yy(kf(o[3],s[3],l)),t}}function VQ(i,e,t){if(!(!(e&&e.length)||!(i>=0&&i<=1))){var r=i*(e.length-1),n=Math.floor(r),a=Math.ceil(r),o=Uo(e[n]),s=Uo(e[a]),l=r-n,c=Mc([xu(kf(o[0],s[0],l)),xu(kf(o[1],s[1],l)),xu(kf(o[2],s[2],l)),Yy(kf(o[3],s[3],l))],"rgba");return t?{color:c,leftIndex:n,rightIndex:a,value:r}:c}}function VA(i,e,t,r){var n=Uo(i);if(i)return n=c0e(n),e!=null&&(n[0]=l0e(e)),t!=null&&(n[1]=zA(t)),r!=null&&(n[2]=zA(r)),Mc(sP(n),"rgba")}function HA(i,e){var t=Uo(i);if(t&&e!=null)return t[3]=Yy(e),Mc(t,"rgba")}function Mc(i,e){if(!(!i||!i.length)){var t=i[0]+","+i[1]+","+i[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+i[3]),e+"("+t+")"}}function u0(i,e){var t=Uo(i);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var kQ=new ad(100);function qy(i){if(Ye(i)){var e=kQ.get(i);return e||(e=sC(i,-.1),kQ.put(i,e)),e}else if(Df(i)){var t=Ce({},i);return t.colorStops=Me(i.colorStops,function(r){return{offset:r.offset,color:sC(r.color,-.1)}}),t}return i}var uC=Math.round;function zf(i){var e;if(!i||i==="transparent")i="none";else if(typeof i=="string"&&i.indexOf("rgba")>-1){var t=Uo(i);t&&(i="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:i,opacity:e??1}}var HQ=1e-4;function hh(i){return i<HQ&&i>-HQ}function cC(i){return uC(i*1e3)/1e3}function hC(i){return uC(i*1e4)/1e4}function QQ(i){return"matrix("+cC(i[0])+","+cC(i[1])+","+cC(i[2])+","+cC(i[3])+","+hC(i[4])+","+hC(i[5])+")"}var GQ={left:"start",right:"end",center:"middle",middle:"middle"};function WQ(i,e,t){return t==="top"?i+=e/2:t==="bottom"&&(i-=e/2),i}function jQ(i){return i&&(i.shadowBlur||i.shadowOffsetX||i.shadowOffsetY)}function KQ(i){var e=i.style,t=i.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function cP(i){return i&&!!i.image}function u0e(i){return i&&!!i.svgElement}function Zy(i){return cP(i)||u0e(i)}function dC(i){return i.type==="linear"}function fC(i){return i.type==="radial"}function pC(i){return i&&(i.type==="linear"||i.type==="radial")}function Jy(i){return"url(#"+i+")"}function AC(i){var e=i.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function mC(i){var e=i.x||0,t=i.y||0,r=(i.rotation||0)*t0,n=Yt(i.scaleX,1),a=Yt(i.scaleY,1),o=i.skewX||0,s=i.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(n!==1||a!==1)&&l.push("scale("+n+","+a+")"),(o||s)&&l.push("skew("+uC(o*t0)+"deg, "+uC(s*t0)+"deg)"),l.join(" ")}var XQ=function(){return ki.hasGlobalWindow&&ft(window.btoa)?function(i){return window.btoa(unescape(encodeURIComponent(i)))}:typeof Buffer<"u"?function(i){return Buffer.from(i).toString("base64")}:function(i){return null}}();var hP=Array.prototype.slice;function od(i,e,t){return(e-i)*t+i}function uP(i,e,t,r){for(var n=e.length,a=0;a<n;a++)i[a]=od(e[a],t[a],r);return i}function h0e(i,e,t,r){for(var n=e.length,a=n&&e[0].length,o=0;o<n;o++){i[o]||(i[o]=[]);for(var s=0;s<a;s++)i[o][s]=od(e[o][s],t[o][s],r)}return i}function gC(i,e,t,r){for(var n=e.length,a=0;a<n;a++)i[a]=e[a]+t[a]*r;return i}function YQ(i,e,t,r){for(var n=e.length,a=n&&e[0].length,o=0;o<n;o++){i[o]||(i[o]=[]);for(var s=0;s<a;s++)i[o][s]=e[o][s]+t[o][s]*r}return i}function d0e(i,e){for(var t=i.length,r=e.length,n=t>r?e:i,a=Math.min(t,r),o=n[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)n.push({offset:o.offset,color:o.color.slice()})}function f0e(i,e,t){var r=i,n=e;if(!(!r.push||!n.push)){var a=r.length,o=n.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(t===1?n[l]:hP.call(n[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=n[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=n[l][u])}}function QA(i){if(Sa(i)){var e=i.length;if(Sa(i[0])){for(var t=[],r=0;r<e;r++)t.push(hP.call(i[r]));return t}return hP.call(i)}return i}function xC(i){return i[0]=Math.floor(i[0])||0,i[1]=Math.floor(i[1])||0,i[2]=Math.floor(i[2])||0,i[3]=i[3]==null?1:i[3],"rgba("+i.join(",")+")"}function p0e(i){return Sa(i&&i[0])?2:1}var vC=0,_C=1,JQ=2,ex=3,dP=4,fP=5,qQ=6;function ZQ(i){return i===dP||i===fP}function yC(i){return i===_C||i===JQ}var $y=[0,0,0,0],A0e=function(){function i(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return i.prototype.isFinished=function(){return this._finished},i.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},i.prototype.needsAnimate=function(){return this.keyframes.length>=1},i.prototype.getAdditiveTrack=function(){return this._additiveTrack},i.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var n=this.keyframes,a=n.length,o=!1,s=qQ,l=t;if(Sa(t)){var c=p0e(t);s=c,(c===1&&!mi(t[0])||c===2&&!mi(t[0][0]))&&(o=!0)}else if(mi(t)&&!Rf(t))s=vC;else if(Ye(t))if(!isNaN(+t))s=vC;else{var u=Uo(t);u&&(l=u,s=ex)}else if(Df(t)){var h=Ce({},l);h.colorStops=Me(t.colorStops,function(f){return{offset:f.offset,color:Uo(f.color)}}),dC(t)?s=dP:fC(t)&&(s=fP),l=h}a===0?this.valType=s:(s!==this.valType||s===qQ)&&(o=!0),this.discrete=this.discrete||o;var d={time:e,value:l,rawValue:t,percent:0};return r&&(d.easing=r,d.easingFunc=ft(r)?r:JS[r]||l0(r)),n.push(d),d},i.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(y,g){return y.time-g.time});for(var n=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=yC(n),c=ZQ(n),u=0;u<a;u++){var h=r[u],d=h.value,f=o.value;h.percent=h.time/e,s||(l&&u!==a-1?f0e(d,f,n):c&&d0e(d.colorStops,f.colorStops))}if(!s&&n!==fP&&t&&this.needsAnimate()&&t.needsAnimate()&&n===t.valType&&!t._finished){this._additiveTrack=t;for(var m=r[0].value,u=0;u<a;u++)n===vC?r[u].additiveValue=r[u].value-m:n===ex?r[u].additiveValue=gC([],r[u].value,m,-1):yC(n)&&(r[u].additiveValue=n===_C?gC([],r[u].value,m,-1):YQ([],r[u].value,m,-1))}},i.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,n=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,c=a===ex,u,h=this._lastFr,d=Math.min,f,m;if(s===1)f=m=o[0];else{if(t<0)u=0;else if(t<this._lastFrP){var y=d(h+1,s-1);for(u=y;u>=0&&!(o[u].percent<=t);u--);u=d(u,s-2)}else{for(u=h;u<s&&!(o[u].percent>t);u++);u=d(u-1,s-2)}m=o[u+1],f=o[u]}if(f&&m){this._lastFr=u,this._lastFrP=t;var g=m.percent-f.percent,x=g===0?1:d((t-f.percent)/g,1);m.easingFunc&&(x=m.easingFunc(x));var b=r?this._additiveValue:c?$y:e[l];if((yC(a)||c)&&!b&&(b=this._additiveValue=[]),this.discrete)e[l]=x<1?f.rawValue:m.rawValue;else if(yC(a))a===_C?uP(b,f[n],m[n],x):h0e(b,f[n],m[n],x);else if(ZQ(a)){var S=f[n],E=m[n],D=a===dP;e[l]={type:D?"linear":"radial",x:od(S.x,E.x,x),y:od(S.y,E.y,x),colorStops:Me(S.colorStops,function(F,H){var U=E.colorStops[H];return{offset:od(F.offset,U.offset,x),color:xC(uP([],F.color,U.color,x))}}),global:E.global},D?(e[l].x2=od(S.x2,E.x2,x),e[l].y2=od(S.y2,E.y2,x)):e[l].r=od(S.r,E.r,x)}else if(c)uP(b,f[n],m[n],x),r||(e[l]=xC(b));else{var B=od(f[n],m[n],x);r?this._additiveValue=B:e[l]=B}r&&this._addToTarget(e)}}},i.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,n=this._additiveValue;t===vC?e[r]=e[r]+n:t===ex?(Uo(e[r],$y),gC($y,$y,n,1),e[r]=xC($y)):t===_C?gC(e[r],e[r],n,1):t===JQ&&YQ(e[r],e[r],n,1)},i}(),m0e=function(){function i(e,t,r,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&n){BA("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=r}return i.prototype.getMaxTime=function(){return this._maxTime},i.prototype.getDelay=function(){return this._delay},i.prototype.getLoop=function(){return this._loop},i.prototype.getTarget=function(){return this._target},i.prototype.changeTarget=function(e){this._target=e},i.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,si(t),r)},i.prototype.whenWithKeys=function(e,t,r,n){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new A0e(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var h=u.keyframes,d=h[h.length-1];c=d&&d.value,u.valType===ex&&c&&(c=xC(c))}else c=this._target[s];if(c==null)continue;e>0&&l.addKeyframe(0,QA(c),n),this._trackKeys.push(s)}l.addKeyframe(e,QA(t[s]),n)}return this._maxTime=Math.max(this._maxTime,e),this},i.prototype.pause=function(){this._clip.pause(),this._paused=!0},i.prototype.resume=function(){this._clip.resume(),this._paused=!1},i.prototype.isPaused=function(){return!!this._paused},i.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},i.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},i.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},i.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},i.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var n=0;n<r.length;n++){var a=r[n].getTrack(e);a&&(t=a)}return t},i.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],n=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes,u=c.length;if(s.prepare(n,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var h=c[u-1];h&&(t._target[s.propName]=h.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var d=new FQ({life:n,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var m=t._additiveAnimators;if(m){for(var y=!1,g=0;g<m.length;g++)if(m[g]._clip){y=!0;break}y||(t._additiveAnimators=null)}for(var g=0;g<r.length;g++)r[g].step(t._target,f);var x=t._onframeCbs;if(x)for(var g=0;g<x.length;g++)x[g](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},i.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},i.prototype.delay=function(e){return this._delay=e,this},i.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},i.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},i.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},i.prototype.getClip=function(){return this._clip},i.prototype.getTrack=function(e){return this._tracks[e]},i.prototype.getTracks=function(){var e=this;return Me(this._trackKeys,function(t){return e._tracks[t]})},i.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,n=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<n.length;a++)if(!r[n[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},i.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var n=0;n<t.length;n++){var a=t[n],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=QA(l.rawValue))}}}},i.prototype.__changeFinalValue=function(e,t){t=t||si(e);for(var r=0;r<t.length;r++){var n=t[r],a=this._tracks[n];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[n]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},i}(),tx=m0e;function GA(){return new Date().getTime()}var g0e=function(i){Yi(e,i);function e(t){var r=i.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,n=t.next;r?r.next=n:this._head=n,n?n.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=GA()-this._pausedTime,n=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,n);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(jy(r),!t._paused&&t.update())}jy(r)},e.prototype.start=function(){this._running||(this._time=GA(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=GA(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=GA()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var n=new tx(t,r.loop);return this.addAnimator(n),n},e}($a),$Q=g0e;var v0e=300,pP=ki.domSupported,AP=function(){var i=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Me(i,function(n){var a=n.replace("mouse","pointer");return t.hasOwnProperty(a)?a:n});return{mouse:i,touch:e,pointer:r}}(),e7={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},t7=!1;function vP(i){var e=i.pointerType;return e==="pen"||e==="touch"}function y0e(i){i.touching=!0,i.touchTimer!=null&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)}function mP(i){i&&(i.zrByTouch=!0)}function x0e(i,e){return cl(i.dom,new _0e(i,e),!0)}function r7(i,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===i.painterRoot);)t=t.parentNode;return r}var _0e=function(){function i(e,t){this.stopPropagation=hn,this.stopImmediatePropagation=hn,this.preventDefault=hn,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return i}(),_u={mousedown:function(i){i=cl(this.dom,i),this.__mayPointerCapture=[i.zrX,i.zrY],this.trigger("mousedown",i)},mousemove:function(i){i=cl(this.dom,i);var e=this.__mayPointerCapture;e&&(i.zrX!==e[0]||i.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",i)},mouseup:function(i){i=cl(this.dom,i),this.__togglePointerCapture(!1),this.trigger("mouseup",i)},mouseout:function(i){i=cl(this.dom,i);var e=i.toElement||i.relatedTarget;r7(this,e)||(this.__pointerCapturing&&(i.zrEventControl="no_globalout"),this.trigger("mouseout",i))},wheel:function(i){t7=!0,i=cl(this.dom,i),this.trigger("mousewheel",i)},mousewheel:function(i){t7||(i=cl(this.dom,i),this.trigger("mousewheel",i))},touchstart:function(i){i=cl(this.dom,i),mP(i),this.__lastTouchMoment=new Date,this.handler.processGesture(i,"start"),_u.mousemove.call(this,i),_u.mousedown.call(this,i)},touchmove:function(i){i=cl(this.dom,i),mP(i),this.handler.processGesture(i,"change"),_u.mousemove.call(this,i)},touchend:function(i){i=cl(this.dom,i),mP(i),this.handler.processGesture(i,"end"),_u.mouseup.call(this,i),+new Date-+this.__lastTouchMoment<v0e&&_u.click.call(this,i)},pointerdown:function(i){_u.mousedown.call(this,i)},pointermove:function(i){vP(i)||_u.mousemove.call(this,i)},pointerup:function(i){_u.mouseup.call(this,i)},pointerout:function(i){vP(i)||_u.mouseout.call(this,i)}};W(["click","dblclick","contextmenu"],function(i){_u[i]=function(e){e=cl(this.dom,e),this.trigger(i,e)}});var yP={pointermove:function(i){vP(i)||yP.mousemove.call(this,i)},pointerup:function(i){yP.mouseup.call(this,i)},mousemove:function(i){this.trigger("mousemove",i)},mouseup:function(i){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",i),e&&(i.zrEventControl="only_globalout",this.trigger("mouseout",i))}};function w0e(i,e){var t=e.domHandlers;ki.pointerEventsSupported?W(AP.pointer,function(r){wC(e,r,function(n){t[r].call(i,n)})}):(ki.touchEventsSupported&&W(AP.touch,function(r){wC(e,r,function(n){t[r].call(i,n),y0e(e)})}),W(AP.mouse,function(r){wC(e,r,function(n){n=XS(n),e.touching||t[r].call(i,n)})}))}function b0e(i,e){ki.pointerEventsSupported?W(e7.pointer,t):ki.touchEventsSupported||W(e7.mouse,t);function t(r){function n(a){a=XS(a),r7(i,a.target)||(a=x0e(i,a),e.domHandlers[r].call(i,a))}wC(e,r,n,{capture:!0})}}function wC(i,e,t,r){i.mounted[e]=t,i.listenerOpts[e]=r,zy(i.domTarget,e,t,r)}function gP(i){var e=i.mounted;for(var t in e)e.hasOwnProperty(t)&&pQ(i.domTarget,t,e[t],i.listenerOpts[t]);i.mounted={}}var i7=function(){function i(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return i}(),S0e=function(i){Yi(e,i);function e(t,r){var n=i.call(this)||this;return n.__pointerCapturing=!1,n.dom=t,n.painterRoot=r,n._localHandlerScope=new i7(t,_u),pP&&(n._globalHandlerScope=new i7(document,yP)),w0e(n,n._localHandlerScope),n}return e.prototype.dispose=function(){gP(this._localHandlerScope),pP&&gP(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,pP&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?b0e(this,r):gP(r)}},e}($a),n7=S0e;var a7=1;ki.hasGlobalWindow&&(a7=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var WA=a7,ix=.4,rx="#333",nx="#ccc",o7="#eee";var s7=Lf,l7=5e-5;function jA(i){return i>l7||i<-l7}var KA=[],h0=[],xP=za(),_P=Math.abs,C0e=function(){function i(){}return i.prototype.getLocalTransform=function(e){return i.getLocalTransform(this,e)},i.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},i.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},i.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},i.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},i.prototype.needLocalTransform=function(){return jA(this.rotation)||jA(this.x)||jA(this.y)||jA(this.scaleX-1)||jA(this.scaleY-1)||jA(this.skewX)||jA(this.skewY)},i.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(s7(r),this.invTransform=null);return}r=r||za(),t?this.getLocalTransform(r):s7(r),e&&(t?hl(r,e,r):Vy(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},i.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(KA);var r=KA[0]<0?-1:1,n=KA[1]<0?-1:1,a=((KA[0]-r)*t+r)/KA[0]||0,o=((KA[1]-n)*t+n)/KA[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||za(),Sc(this.invTransform,e)},i.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},i.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],n=Math.atan2(e[1],e[0]),a=Math.PI/2+n-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-n,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},i.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||za(),hl(h0,e.invTransform,t),t=h0);var r=this.originX,n=this.originY;(r||n)&&(xP[4]=r,xP[5]=n,hl(h0,t,xP),h0[4]-=r,h0[5]-=n,t=h0),this.setLocalTransform(t)}},i.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},i.prototype.transformCoordToLocal=function(e,t){var r=[e,t],n=this.invTransform;return n&&Ca(r,r,n),r},i.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],n=this.transform;return n&&Ca(r,r,n),r},i.prototype.getLineScale=function(){var e=this.transform;return e&&_P(e[0]-1)>1e-10&&_P(e[3]-1)>1e-10?Math.sqrt(_P(e[0]*e[3]-e[2]*e[1])):1},i.prototype.copyTransform=function(e){wP(this,e)},i.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,n=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,h=e.y,d=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||n||s||l){var m=r+s,y=n+l;t[4]=-m*a-d*y*o,t[5]=-y*o-f*m*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=f*a,t[2]=d*o,c&&dl(t,t,c),t[4]+=r+u,t[5]+=n+h,t},i.initDefaultProps=function(){var e=i.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),i}(),Yl=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function wP(i,e){for(var t=0;t<Yl.length;t++){var r=Yl[t];i[r]=e[r]}}var fl=C0e;var c7={};function pl(i,e){e=e||Wl;var t=c7[e];t||(t=c7[e]=new ad(500));var r=t.get(i);return r==null&&(r=xs.measureText(i,e).width,t.put(i,r)),r}function u7(i,e,t,r){var n=pl(i,e),a=f0(e),o=d0(0,n,t),s=XA(0,a,r),l=new Ht(o,s,n,a);return l}function dh(i,e,t,r){var n=((i||"")+"").split(`
`),a=n.length;if(a===1)return u7(n[0],e,t,r);for(var o=new Ht(0,0,0,0),s=0;s<n.length;s++){var l=u7(n[s],e,t,r);s===0?o.copy(l):o.union(l)}return o}function d0(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function XA(i,e,t){return t==="middle"?i-=e/2:t==="bottom"&&(i-=e),i}function f0(i){return pl("\u56FD",i)}function $o(i,e){return typeof i=="string"?i.lastIndexOf("%")>=0?parseFloat(i)/100*e:parseFloat(i):i}function YA(i,e,t){var r=e.position||"inside",n=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,l=t.x,c=t.y,u="left",h="top";if(r instanceof Array)l+=$o(r[0],t.width),c+=$o(r[1],t.height),u=null,h=null;else switch(r){case"left":l-=n,c+=s,u="right",h="middle";break;case"right":l+=n+o,c+=s,h="middle";break;case"top":l+=o/2,c-=n,u="center",h="bottom";break;case"bottom":l+=o/2,c+=a+n,u="center";break;case"inside":l+=o/2,c+=s,u="center",h="middle";break;case"insideLeft":l+=n,c+=s,h="middle";break;case"insideRight":l+=o-n,c+=s,u="right",h="middle";break;case"insideTop":l+=o/2,c+=n,u="center";break;case"insideBottom":l+=o/2,c+=a-n,u="center",h="bottom";break;case"insideTopLeft":l+=n,c+=n;break;case"insideTopRight":l+=o-n,c+=n,u="right";break;case"insideBottomLeft":l+=n,c+=a-n,h="bottom";break;case"insideBottomRight":l+=o-n,c+=a-n,u="right",h="bottom";break}return i=i||{},i.x=l,i.y=c,i.align=u,i.verticalAlign=h,i}var bP="__zr_normal__",SP=Yl.concat(["ignore"]),E0e=qo(Yl,function(i,e){return i[e]=!0,i},{ignore:!1}),p0={},T0e=new Ht(0,0,0,0),TP=function(){function i(e){this.id=VS(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return i.prototype._init=function(e){this.attr(e)},i.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=e,n[5]+=t,this.decomposeTransform(),this.markRedraw()},i.prototype.beforeUpdate=function(){},i.prototype.afterUpdate=function(){},i.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},i.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,n=r.local,a=t.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=n?this:null;var c=!1;if(a.copyTransform(t),r.position!=null){var u=T0e;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),n||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(p0,r,u):YA(p0,r,u),a.x=p0.x,a.y=p0.y,o=p0.align,s=p0.verticalAlign;var h=r.origin;if(h&&r.rotation!=null){var d=void 0,f=void 0;h==="center"?(d=u.width*.5,f=u.height*.5):(d=$o(h[0],u.width),f=$o(h[1],u.height)),c=!0,a.originX=-a.x+d+(n?0:u.x),a.originY=-a.y+f+(n?0:u.y)}}r.rotation!=null&&(a.rotation=r.rotation);var m=r.offset;m&&(a.x+=m[0],a.y+=m[1],c||(a.originX=-m[0],a.originY=-m[1]));var y=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),x=void 0,b=void 0,S=void 0;y&&this.canBeInsideText()?(x=r.insideFill,b=r.insideStroke,(x==null||x==="auto")&&(x=this.getInsideTextFill()),(b==null||b==="auto")&&(b=this.getInsideTextStroke(x),S=!0)):(x=r.outsideFill,b=r.outsideStroke,(x==null||x==="auto")&&(x=this.getOutsideFill()),(b==null||b==="auto")&&(b=this.getOutsideStroke(x),S=!0)),x=x||"#000",(x!==g.fill||b!==g.stroke||S!==g.autoStroke||o!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=x,g.stroke=b,g.autoStroke=S,g.align=o,g.verticalAlign=s,t.setDefaultTextStyle(g)),t.__dirty|=lo,l&&t.dirtyStyle(!0)}},i.prototype.canBeInsideText=function(){return!0},i.prototype.getInsideTextFill=function(){return"#fff"},i.prototype.getInsideTextStroke=function(e){return"#000"},i.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?nx:rx},i.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Uo(t);r||(r=[255,255,255,1]);for(var n=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*n+(a?0:255)*(1-n);return r[3]=1,Mc(r,"rgba")},i.prototype.traverse=function(e,t){},i.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Ce(this.extra,t)):this[e]=t},i.prototype.hide=function(){this.ignore=!0,this.markRedraw()},i.prototype.show=function(){this.ignore=!1,this.markRedraw()},i.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(yt(e))for(var r=e,n=si(r),a=0;a<n.length;a++){var o=n[a];this.attrKV(o,e[o])}return this.markRedraw(),this},i.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var n=this.animators[r],a=n.__fromStateTransition;if(!(n.getLoop()||a&&a!==bP)){var o=n.targetName,s=o?t[o]:t;n.saveTo(s)}}},i.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,SP)},i.prototype._savePrimaryToNormal=function(e,t,r){for(var n=0;n<r.length;n++){var a=r[n];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},i.prototype.hasState=function(){return this.currentStates.length>0},i.prototype.getState=function(e){return this.states[e]},i.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},i.prototype.clearStates=function(e){this.useState(bP,!1,e)},i.prototype.useState=function(e,t,r,n){var a=e===bP,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(qt(s,e)>=0&&(t||s.length===1))){var c;if(this.stateProxy&&!a&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!a){BA("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||n);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,d=this._textGuide;return h&&h.useState(e,t,r,u),d&&d.useState(e,t,r,u),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~lo),c}}},i.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var n=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&n.push(u)}var h=n[o-1],d=!!(h&&h.hoverLayer||r);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(n),m=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&m&&m.duration>0,m);var y=this._textContent,g=this._textGuide;y&&y.useStates(e,t,d),g&&g.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~lo)}},i.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},i.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},i.prototype.removeState=function(e){var t=qt(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},i.prototype.replaceState=function(e,t,r){var n=this.currentStates.slice(),a=qt(n,e),o=qt(n,t)>=0;a>=0?o?n.splice(a,1):n[a]=t:r&&!o&&n.push(t),this.useStates(n)},i.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},i.prototype._mergeStates=function(e){for(var t={},r,n=0;n<e.length;n++){var a=e[n];Ce(t,a),a.textConfig&&(r=r||{},Ce(r,a.textConfig))}return r&&(t.textConfig=r),t},i.prototype._applyStateObj=function(e,t,r,n,a,o){var s=!(t&&n);t&&t.textConfig?(this.textConfig=Ce({},n?this.textConfig:r.textConfig),Ce(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<SP.length;u++){var h=SP[u],d=a&&E0e[h];t&&t[h]!=null?d?(c=!0,l[h]=t[h]):this[h]=t[h]:s&&r[h]!=null&&(d?(c=!0,l[h]=r[h]):this[h]=r[h])}if(!a)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],m=f.targetName;f.getLoop()||f.__changeFinalValue(m?(t||r)[m]:t||r)}c&&this._transitionState(e,l,o)},i.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},i.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},i.prototype.getClipPath=function(){return this._clipPath},i.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},i.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},i.prototype.getTextContent=function(){return this._textContent},i.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new fl,this._attachComponent(e),this._textContent=e,this.markRedraw())},i.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Ce(this.textConfig,e),this.markRedraw()},i.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},i.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},i.prototype.getTextGuideLine=function(){return this._textGuide},i.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},i.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},i.prototype.markRedraw=function(){this.__dirty|=lo;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},i.prototype.dirty=function(){this.markRedraw()},i.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},i.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},i.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},i.prototype.animate=function(e,t,r){var n=e?this[e]:this,a=new tx(n,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},i.prototype.addAnimator=function(e,t){var r=this.__zr,n=this;e.during(function(){n.updateDuringAnimation(t)}).done(function(){var a=n.animators,o=qt(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},i.prototype.updateDuringAnimation=function(e){this.markRedraw()},i.prototype.stopAnimation=function(e,t){for(var r=this.animators,n=r.length,a=[],o=0;o<n;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},i.prototype.animateTo=function(e,t,r){CP(this,e,t,r)},i.prototype.animateFrom=function(e,t,r){CP(this,e,t,r,!0)},i.prototype._transitionState=function(e,t,r,n){for(var a=CP(this,t,r,n),o=0;o<a.length;o++)a[o].__fromStateTransition=e},i.prototype.getBoundingRect=function(){return null},i.prototype.getPaintRect=function(){return null},i.initDefaultProps=function(){var e=i.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=lo;var t={};function r(a,o,s){t[a+o+s]||(console.warn("DEPRECATED: '"+a+"' has been deprecated. use '"+o+"', '"+s+"' instead"),t[a+o+s]=!0)}function n(a,o,s,l){Object.defineProperty(e,a,{get:function(){if(!this[o]){var u=this[o]=[];c(this,u)}return this[o]},set:function(u){this[s]=u[0],this[l]=u[1],this[o]=u,c(this,u)}});function c(u,h){Object.defineProperty(h,0,{get:function(){return u[s]},set:function(d){u[s]=d}}),Object.defineProperty(h,1,{get:function(){return u[l]},set:function(d){u[l]=d}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),i}();jr(TP,$a);jr(TP,fl);function CP(i,e,t,r,n){t=t||{};var a=[];h7(i,"",i,e,t,r,a,n);var o=a.length,s=!1,l=t.done,c=t.aborted,u=function(){s=!0,o--,o<=0&&(s?l&&l():c&&c())},h=function(){o--,o<=0&&(s?l&&l():c&&c())};o||l&&l(),a.length>0&&t.during&&a[0].during(function(m,y){t.during(y)});for(var d=0;d<a.length;d++){var f=a[d];u&&f.done(u),h&&f.aborted(h),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function EP(i,e,t){for(var r=0;r<t;r++)i[r]=e[r]}function M0e(i){return Sa(i[0])}function I0e(i,e,t){if(Sa(e[t]))if(Sa(i[t])||(i[t]=[]),ka(e[t])){var r=e[t].length;i[t].length!==r&&(i[t]=new e[t].constructor(r),EP(i[t],e[t],r))}else{var n=e[t],a=i[t],o=n.length;if(M0e(n))for(var s=n[0].length,l=0;l<o;l++)a[l]?EP(a[l],n[l],s):a[l]=Array.prototype.slice.call(n[l]);else EP(a,n,o);a.length=n.length}else i[t]=e[t]}function B0e(i,e){return i===e||Sa(i)&&Sa(e)&&D0e(i,e)}function D0e(i,e){var t=i.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function h7(i,e,t,r,n,a,o,s){for(var l=si(r),c=n.duration,u=n.delay,h=n.additive,d=n.setToFinal,f=!yt(a),m=i.animators,y=[],g=0;g<l.length;g++){var x=l[g],b=r[x];if(b!=null&&t[x]!=null&&(f||a[x]))if(yt(b)&&!Sa(b)&&!Df(b)){if(e){s||(t[x]=b,i.updateDuringAnimation(e));continue}h7(i,x,t[x],b,n,a&&a[x],o,s)}else y.push(x);else s||(t[x]=b,i.updateDuringAnimation(e),y.push(x))}var S=y.length;if(!h&&S)for(var E=0;E<m.length;E++){var D=m[E];if(D.targetName===e){var B=D.stopTracks(y);if(B){var F=qt(m,D);m.splice(F,1)}}}if(n.force||(y=Xi(y,function(j){return!B0e(r[j],t[j])}),S=y.length),S>0||n.force&&!o.length){var H=void 0,U=void 0,k=void 0;if(s){U={},d&&(H={});for(var E=0;E<S;E++){var x=y[E];U[x]=t[x],d?H[x]=r[x]:t[x]=r[x]}}else if(d){k={};for(var E=0;E<S;E++){var x=y[E];k[x]=QA(t[x]),I0e(t,r,x)}}var D=new tx(t,!1,!1,h?Xi(m,function(q){return q.targetName===e}):null);D.targetName=e,n.scope&&(D.scope=n.scope),d&&H&&D.whenWithKeys(0,H,y),k&&D.whenWithKeys(0,k,y),D.whenWithKeys(c??500,s?U:r,y).delay(u||0),i.addAnimator(D,e),o.push(D)}}var SC=TP;var d7=function(i){Yi(e,i);function e(t){var r=i.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,n=0;n<r.length;n++)if(r[n].name===t)return r[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var n=this._children,a=n.indexOf(r);a>=0&&(n.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var n=qt(this._children,t);return n>=0&&this.replaceAt(r,n),this},e.prototype.replaceAt=function(t,r){var n=this._children,a=n[r];if(t&&t!==this&&t.parent!==this&&t!==a){n[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,n=this._children,a=qt(n,t);return a<0?this:(n.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,n=0;n<t.length;n++){var a=t[n];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var n=this._children,a=0;a<n.length;a++){var o=n[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var n=0;n<this._children.length;n++){var a=this._children[n],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){i.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){i.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new Ht(0,0,0,0),n=t||this._children,a=[],o=null,s=0;s<n.length;s++){var l=n[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(a);u?(Ht.applyTransform(r,c,u),o=o||r.clone(),o.union(r)):(o=o||c.clone(),o.union(c))}}return o||r},e}(SC);d7.prototype.type="group";var xt=d7;var CC={},f7={};function R0e(i){delete f7[i]}function P0e(i){if(!i)return!1;if(typeof i=="string")return u0(i,1)<ix;if(i.colorStops){for(var e=i.colorStops,t=0,r=e.length,n=0;n<r;n++)t+=u0(e[n].color,1);return t/=r,t<ix}return!1}var L0e=function(){function i(e,t,r){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new MQ,o=r.renderer||"canvas";CC[o]||(o=si(CC)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new CC[o](t,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var c=!ki.node&&!ki.worker&&!l?new n7(s.getViewportRoot(),s.root):null,u=r.useCoarsePointer,h=u==null||u==="auto"?ki.touchEventsSupported:!!u,d=44,f;h&&(f=Yt(r.pointerSize,d)),this.handler=new wQ(a,s,c,s.root,f),this.animation=new $Q({stage:{update:l?null:function(){return n._flush(!0)}}}),l||this.animation.start()}return i.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},i.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},i.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},i.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=P0e(e))},i.prototype.getBackgroundColor=function(){return this._backgroundColor},i.prototype.setDarkMode=function(e){this._darkMode=e},i.prototype.isDarkMode=function(){return this._darkMode},i.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},i.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},i.prototype.flush=function(){this._disposed||this._flush(!1)},i.prototype._flush=function(e){var t,r=GA();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var n=GA();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},i.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},i.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},i.prototype.refreshHover=function(){this._needsRefreshHover=!0},i.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},i.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},i.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},i.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},i.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},i.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},i.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},i.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},i.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},i.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},i.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof xt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},i.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,R0e(this.id))},i}();function IP(i,e){var t=new L0e(VS(),i,e);return f7[t.id]=t,t}function p7(i,e){CC[i]=e}var MP;function A7(i){if(typeof MP=="function")return MP(i)}function m7(i){MP=i}var g7=1e-4,v7=20;function F0e(i){return i.replace(/^\s+|\s+$/g,"")}function yr(i,e,t,r){var n=e[0],a=e[1],o=t[0],s=t[1],l=a-n,c=s-o;if(l===0)return c===0?o:(o+s)/2;if(r)if(l>0){if(i<=n)return o;if(i>=a)return s}else{if(i>=n)return o;if(i<=a)return s}else{if(i===n)return o;if(i===a)return s}return(i-n)/l*c+o}function ot(i,e){switch(i){case"center":case"middle":i="50%";break;case"left":case"top":i="0%";break;case"right":case"bottom":i="100%";break}return Ye(i)?F0e(i).match(/%$/)?parseFloat(i)/100*e:parseFloat(i):i==null?NaN:+i}function dn(i,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),v7),i=(+i).toFixed(e),t?i:+i}function co(i){return i.sort(function(e,t){return e-t}),i}function Us(i){if(i=+i,isNaN(i))return 0;if(i>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(i*e)/e===i)return t}return N0e(i)}function N0e(i){var e=i.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,n=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:n-1-a;return Math.max(0,o-r)}function EC(i,e){var t=Math.log,r=Math.LN10,n=Math.floor(t(i[1]-i[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-n+a,0),20);return isFinite(o)?o:20}function y7(i,e){var t=qo(i,function(f,m){return f+(isNaN(m)?0:m)},0);if(t===0)return[];for(var r=Math.pow(10,e),n=Me(i,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,o=Me(n,function(f){return Math.floor(f)}),s=qo(o,function(f,m){return f+m},0),l=Me(n,function(f,m){return f-o[m]});s<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,h=0,d=l.length;h<d;++h)l[h]>c&&(c=l[h],u=h);++o[u],l[u]=0,++s}return Me(o,function(f){return f/r})}function x7(i,e){var t=Math.max(Us(i),Us(e)),r=i+e;return t>v7?r:dn(r,t)}var BP=9007199254740991;function DP(i){var e=Math.PI*2;return(i%e+e)%e}function qA(i){return i>-g7&&i<g7}var U0e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ks(i){if(i instanceof Date)return i;if(Ye(i)){var e=U0e.exec(i);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(i==null)return new Date(NaN);return new Date(Math.round(i))}function _7(i){return Math.pow(10,TC(i))}function TC(i){if(i===0)return 0;var e=Math.floor(Math.log(i)/Math.LN10);return i/Math.pow(10,e)>=10&&e++,e}function MC(i,e){var t=TC(i),r=Math.pow(10,t),n=i/r,a;return e?n<1.5?a=1:n<2.5?a=2:n<4?a=3:n<7?a=5:a=10:n<1?a=1:n<2?a=2:n<3?a=3:n<5?a=5:a=10,i=a*r,t>=-20?+i.toFixed(t<0?-t:0):i}function IC(i,e){var t=(i.length-1)*e+1,r=Math.floor(t),n=+i[r-1],a=t-r;return a?n+a*(i[r]-n):n}function RP(i){i.sort(function(l,c){return s(l,c,0)?-1:1});for(var e=-1/0,t=1,r=0;r<i.length;){for(var n=i[r].interval,a=i[r].close,o=0;o<2;o++)n[o]<=e&&(n[o]=e,a[o]=o?1:1-t),e=n[o],t=a[o];n[0]===n[1]&&a[0]*a[1]!==1?i.splice(r,1):r++}return i;function s(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&s(l,c,1))}}function Ic(i){var e=parseFloat(i);return e==i&&(e!==0||!Ye(i)||i.indexOf("x")<=0)?e:NaN}function ax(i){return!isNaN(Ic(i))}function BC(){return Math.round(Math.random()*9)}function w7(i,e){return e===0?i:w7(e,i%e)}function PP(i,e){return i==null?e:e==null?i:i*e/w7(i,e)}var k0e="[ECharts] ",b7={},z0e=typeof console<"u"&&console.warn&&console.log;function V0e(i,e,t){if(z0e){if(t){if(b7[e])return;b7[e]=!0}console[i](k0e+e)}}function S7(i,e){V0e("warn",i,e)}function xr(i){throw new Error(i)}function C7(i,e,t){return(e-i)*t+i}var E7="series\0",T7="\0_ec_\0";function cr(i){return i instanceof Array?i:i==null?[]:[i]}function ql(i,e,t){if(i){i[e]=i[e]||{},i.emphasis=i.emphasis||{},i.emphasis[e]=i.emphasis[e]||{};for(var r=0,n=t.length;r<n;r++){var a=t[r];!i.emphasis[e].hasOwnProperty(a)&&i[e].hasOwnProperty(a)&&(i.emphasis[e][a]=i[e][a])}}}var LP=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function wu(i){return yt(i)&&!Ee(i)&&!(i instanceof Date)?i.value:i}function M7(i){return yt(i)&&!(i instanceof Array)}function DC(i,e,t){var r=t==="normalMerge",n=t==="replaceMerge",a=t==="replaceAll";i=i||[],e=(e||[]).slice();var o=ct();W(e,function(l,c){if(!yt(l)){e[c]=null;return}});var s=H0e(i,o,t);return(r||n)&&Q0e(s,i,o,e),r&&G0e(s,e),r||n?W0e(s,e,n):a&&j0e(s,e),K0e(s),s}function H0e(i,e,t){var r=[];if(t==="replaceAll")return r;for(var n=0;n<i.length;n++){var a=i[n];a&&a.id!=null&&e.set(a.id,n),r.push({existing:t==="replaceMerge"||A0(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function Q0e(i,e,t,r){W(r,function(n,a){if(!(!n||n.id==null)){var o=ox(n.id),s=t.get(o);if(s!=null){var l=i[s];In(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=n,l.existing=e[s],r[a]=null}}})}function G0e(i,e){W(e,function(t,r){if(!(!t||t.name==null))for(var n=0;n<i.length;n++){var a=i[n].existing;if(!i[n].newOption&&a&&(a.id==null||t.id==null)&&!A0(t)&&!A0(a)&&I7("name",a,t)){i[n].newOption=t,e[r]=null;return}}})}function W0e(i,e,t){W(e,function(r){if(r){for(var n,a=0;(n=i[a])&&(n.newOption||A0(n.existing)||n.existing&&r.id!=null&&!I7("id",r,n.existing));)a++;n?(n.newOption=r,n.brandNew=t):i.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function j0e(i,e){W(e,function(t){i.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function K0e(i){var e=ct();W(i,function(t){var r=t.existing;r&&e.set(r.id,t)}),W(i,function(t){var r=t.newOption;In(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),W(i,function(t,r){var n=t.existing,a=t.newOption,o=t.keyInfo;if(yt(a)){if(o.name=a.name!=null?ox(a.name):n?n.name:E7+r,n)o.id=ox(n.id);else if(a.id!=null)o.id=ox(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function I7(i,e,t){var r=kn(e[i],null),n=kn(t[i],null);return r!=null&&n!=null&&r===n}function ox(i){return kn(i,"")}function kn(i,e){return i==null?e:Ye(i)?i:mi(i)||Uy(i)?i+"":e}function m0(i){var e=i.name;return!!(e&&e.indexOf(E7))}function A0(i){return i&&i.id!=null&&ox(i.id).indexOf(T7)===0}function B7(i){return T7+i}function D7(i,e,t){W(i,function(r){var n=r.newOption;yt(n)&&(r.keyInfo.mainType=e,r.keyInfo.subType=X0e(e,n,r.existing,t))})}function X0e(i,e,t,r){var n=e.type?e.type:t?t.subType:r.determineSubType(i,e);return n}function R7(i,e){var t={},r={};return n(i||[],t),n(e||[],r,t),[a(t),a(r)];function n(o,s,l){for(var c=0,u=o.length;c<u;c++){var h=kn(o[c].seriesId,null);if(h==null)return;for(var d=cr(o[c].dataIndex),f=l&&l[h],m=0,y=d.length;m<y;m++){var g=d[m];f&&f[g]?f[g]=null:(s[h]||(s[h]={}))[g]=1}}}function a(o,s){var l=[];for(var c in o)if(o.hasOwnProperty(c)&&o[c]!=null)if(s)l.push(+c);else{var u=a(o[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function Bc(i,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Ee(e.dataIndex)?Me(e.dataIndex,function(t){return i.indexOfRawIndex(t)}):i.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Ee(e.name)?Me(e.name,function(t){return i.indexOfName(t)}):i.indexOfName(e.name)}function $t(){var i="__ec_inner_"+Y0e++;return function(e){return e[i]||(e[i]={})}}var Y0e=BC();function Vf(i,e,t){var r=sx(e,t),n=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=t?t.defaultMainType:null;return!n&&l&&a.set(l,{}),a.each(function(c,u){var h=Hf(i,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[u+"Models"]=h.models,s[u+"Model"]=h.models[0]}),s}function sx(i,e){var t;if(Ye(i)){var r={};r[i+"Index"]=0,t=r}else t=i;var n=ct(),a={},o=!1;return W(t,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],h=(c[2]||"").toLowerCase();if(!(!u||!h||e&&e.includeMainTypes&&qt(e.includeMainTypes,u)<0)){o=o||!!u;var d=n.get(u)||n.set(u,{});d[h]=s}}),{mainTypeSpecified:o,queryOptionMap:n,others:a}}var Jr={useDefault:!0,enableAll:!1,enableNone:!1},P7={useDefault:!1,enableAll:!0,enableNone:!0};function Hf(i,e,t,r){r=r||Jr;var n=t.index,a=t.id,o=t.name,s={models:null,specified:n!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=i.getComponent(e))?[l]:[],s}return n==="none"||n===!1?(In(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(n==="all"&&(In(r.enableAll,'`"all"` is not a valid value on index option.'),n=a=o=null),s.models=i.queryComponents({mainType:e,index:n,id:a,name:o}),s)}function OP(i,e,t){i.setAttribute?i.setAttribute(e,t):i[e]=t}function L7(i,e){return i.getAttribute?i.getAttribute(e):i[e]}function O7(i){return i==="auto"?ki.domSupported?"html":"richText":i||"html"}function lx(i,e){var t=ct(),r=[];return W(i,function(n){var a=e(n);(t.get(a)||(r.push(a),t.set(a,[]))).push(n)}),{keys:r,buckets:t}}function RC(i,e,t,r,n){var a=e==null||e==="auto";if(r==null)return r;if(mi(r)){var o=C7(t||0,r,n);return dn(o,a?Math.max(Us(t||0),Us(r)):e)}else{if(Ye(r))return n<1?t:r;for(var s=[],l=t,c=r,u=Math.max(l?l.length:0,c.length),h=0;h<u;++h){var d=i.getDimensionInfo(h);if(d&&d.type==="ordinal")s[h]=(n<1&&l?l:c)[h];else{var f=l&&l[h]?l[h]:0,m=c[h],o=C7(f,m,n);s[h]=dn(o,a?Math.max(Us(f),Us(m)):e)}}return s}}var q0e=".",ZA="___EC__COMPONENT__CONTAINER___",F7="___EC__EXTENDED_CLASS___";function ml(i){var e={main:"",sub:""};if(i){var t=i.split(q0e);e.main=t[0]||"",e.sub=t[1]||""}return e}function Z0e(i){In(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(i),'componentType "'+i+'" illegal')}function N7(i){return!!(i&&i[F7])}function g0(i,e){i.$constructor=i,i.extend=function(t){var r=this,n;return J0e(r)?n=function(a){le(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(n=function(){(t.$constructor||r).apply(this,arguments)},rQ(n,this)),Ce(n.prototype,t),n[F7]=!0,n.extend=this.extend,n.superCall=eve,n.superApply=tve,n.superClass=r,n}}function J0e(i){return ft(i)&&/^class\s/.test(Function.prototype.toString.call(i))}function PC(i,e){i.extend=e.extend}var $0e=Math.round(Math.random()*10);function U7(i){var e=["__\0is_clz",$0e++].join("_");i.prototype[e]=!0,i.isInstance=function(t){return!!(t&&t[e])}}function eve(i,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(i,t)}function tve(i,e,t){return this.superClass.prototype[e].apply(i,t)}function Qf(i){var e={};i.registerClass=function(r){var n=r.type||r.prototype.type;if(n){Z0e(n),r.prototype.type=n;var a=ml(n);if(!a.sub)e[a.main]=r;else if(a.sub!==ZA){var o=t(a);o[a.sub]=r}}return r},i.getClass=function(r,n,a){var o=e[r];if(o&&o[ZA]&&(o=n?o[n]:null),a&&!o)throw new Error(n?"Component "+r+"."+(n||"")+" is used but not imported.":r+".type should be specified.");return o},i.getClassesByMainType=function(r){var n=ml(r),a=[],o=e[n.main];return o&&o[ZA]?W(o,function(s,l){l!==ZA&&a.push(s)}):a.push(o),a},i.hasClass=function(r){var n=ml(r);return!!e[n.main]},i.getAllClassMainTypes=function(){var r=[];return W(e,function(n,a){r.push(a)}),r},i.hasSubTypes=function(r){var n=ml(r),a=e[n.main];return a&&a[ZA]};function t(r){var n=e[r.main];return(!n||!n[ZA])&&(n=e[r.main]={},n[ZA]=!0),n}}function gl(i,e){for(var t=0;t<i.length;t++)i[t][1]||(i[t][1]=i[t][0]);return e=e||!1,function(r,n,a){for(var o={},s=0;s<i.length;s++){var l=i[s][1];if(!(n&&qt(n,l)>=0||a&&qt(a,l)<0)){var c=r.getShallow(l,e);c!=null&&(o[i[s][0]]=c)}}return o}}var ive=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],rve=gl(ive),k7=function(){function i(){}return i.prototype.getAreaStyle=function(e,t){return rve(this,e,t)},i}();var NP=new ad(50);function V7(i){if(typeof i=="string"){var e=NP.get(i);return e&&e.image}else return i}function cx(i,e,t,r,n){if(i)if(typeof i=="string"){if(e&&e.__zrImageSrc===i||!t)return e;var a=NP.get(i),o={hostEl:t,cb:r,cbPayload:n};return a?(e=a.image,!v0(e)&&a.pending.push(o)):(e=xs.loadImage(i,z7,z7),e.__zrImageSrc=i,NP.put(i,e.__cachedImgObj={image:e,pending:[o]})),e}else return i;else return e}function z7(){var i=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<i.pending.length;e++){var t=i.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}i.pending.length=0}function v0(i){return i&&i.width&&i.height}var UP=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ave(i,e,t,r,n){if(!e)return"";var a=(i+"").split(`
`);n=Q7(e,t,r,n);for(var o=0,s=a.length;o<s;o++)a[o]=G7(a[o],n);return a.join(`
`)}function Q7(i,e,t,r){r=r||{};var n=Ce({},r);n.font=e,t=Yt(t,"..."),n.maxIterations=Yt(r.maxIterations,2);var a=n.minChar=Yt(r.minChar,0);n.cnCharWidth=pl("\u56FD",e);var o=n.ascCharWidth=pl("a",e);n.placeholder=Yt(r.placeholder,"");for(var s=i=Math.max(0,i-1),l=0;l<a&&s>=o;l++)s-=o;var c=pl(t,e);return c>s&&(t="",c=0),s=i-c,n.ellipsis=t,n.ellipsisWidth=c,n.contentWidth=s,n.containerWidth=i,n}function G7(i,e){var t=e.containerWidth,r=e.font,n=e.contentWidth;if(!t)return"";var a=pl(i,r);if(a<=t)return i;for(var o=0;;o++){if(a<=n||o>=e.maxIterations){i+=e.ellipsis;break}var s=o===0?ove(i,n,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(i.length*n/a):0;i=i.substr(0,s),a=pl(i,r)}return i===""&&(i=e.placeholder),i}function ove(i,e,t,r){for(var n=0,a=0,o=i.length;a<o&&n<e;a++){var s=i.charCodeAt(a);n+=0<=s&&s<=127?t:r}return a}function W7(i,e){i!=null&&(i+="");var t=e.overflow,r=e.padding,n=e.font,a=t==="truncate",o=f0(n),s=Yt(e.lineHeight,o),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=e.width,h;u!=null&&(t==="break"||t==="breakAll")?h=i?K7(i,e.font,u,t==="breakAll",0).lines:[]:h=i?i.split(`
`):[];var d=h.length*s,f=Yt(e.height,d);if(d>f&&c){var m=Math.floor(f/s);h=h.slice(0,m)}if(i&&a&&u!=null)for(var y=Q7(u,n,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),g=0;g<h.length;g++)h[g]=G7(h[g],y);for(var x=f,b=0,g=0;g<h.length;g++)b=Math.max(pl(h[g],n),b);u==null&&(u=b);var S=b;return r&&(x+=r[0]+r[2],S+=r[1]+r[3],u+=r[1]+r[3]),l&&(S=u),{lines:h,height:f,outerWidth:S,outerHeight:x,lineHeight:s,calculatedLineHeight:o,contentWidth:b,contentHeight:d,width:u}}var sve=function(){function i(){}return i}(),H7=function(){function i(e){this.tokens=[],e&&(this.tokens=e)}return i}(),lve=function(){function i(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return i}();function j7(i,e){var t=new lve;if(i!=null&&(i+=""),!i)return t;for(var r=e.width,n=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=UP.lastIndex=0,l;(l=UP.exec(i))!=null;){var c=l.index;c>s&&kP(t,i.substring(s,c),e,o),kP(t,l[2],e,o,l[1]),s=UP.lastIndex}s<i.length&&kP(t,i.substring(s,i.length),e,o);var u=[],h=0,d=0,f=e.padding,m=a==="truncate",y=e.lineOverflow==="truncate";function g(ue,ve,_e){ue.width=ve,ue.lineHeight=_e,h+=_e,d=Math.max(d,ve)}e:for(var x=0;x<t.lines.length;x++){for(var b=t.lines[x],S=0,E=0,D=0;D<b.tokens.length;D++){var B=b.tokens[D],F=B.styleName&&e.rich[B.styleName]||{},H=B.textPadding=F.padding,U=H?H[1]+H[3]:0,k=B.font=F.font||e.font;B.contentHeight=f0(k);var j=Yt(F.height,B.contentHeight);if(B.innerHeight=j,H&&(j+=H[0]+H[2]),B.height=j,B.lineHeight=wo(F.lineHeight,e.lineHeight,j),B.align=F&&F.align||e.align,B.verticalAlign=F&&F.verticalAlign||"middle",y&&n!=null&&h+B.lineHeight>n){D>0?(b.tokens=b.tokens.slice(0,D),g(b,E,S),t.lines=t.lines.slice(0,x+1)):t.lines=t.lines.slice(0,x);break e}var q=F.width,X=q==null||q==="auto";if(typeof q=="string"&&q.charAt(q.length-1)==="%")B.percentWidth=q,u.push(B),B.contentWidth=pl(B.text,k);else{if(X){var Y=F.backgroundColor,J=Y&&Y.image;J&&(J=V7(J),v0(J)&&(B.width=Math.max(B.width,J.width*j/J.height)))}var te=m&&r!=null?r-E:null;te!=null&&te<B.width?!X||te<U?(B.text="",B.width=B.contentWidth=0):(B.text=ave(B.text,te-U,k,e.ellipsis,{minChar:e.truncateMinChar}),B.width=B.contentWidth=pl(B.text,k)):B.contentWidth=pl(B.text,k)}B.width+=U,E+=B.width,F&&(S=Math.max(S,B.lineHeight))}g(b,E,S)}t.outerWidth=t.width=Yt(r,d),t.outerHeight=t.height=Yt(n,h),t.contentHeight=h,t.contentWidth=d,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var x=0;x<u.length;x++){var B=u[x],de=B.percentWidth;B.width=parseInt(de,10)/100*t.width}return t}function kP(i,e,t,r,n){var a=e==="",o=n&&t.rich[n]||{},s=i.lines,l=o.font||t.font,c=!1,u,h;if(r){var d=o.padding,f=d?d[1]+d[3]:0;if(o.width!=null&&o.width!=="auto"){var m=$o(o.width,r.width)+f;s.length>0&&m+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=m}else{var y=K7(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=y.accumWidth+f,h=y.linesWidths,u=y.lines}}else u=e.split(`
`);for(var g=0;g<u.length;g++){var x=u[g],b=new sve;if(b.styleName=n,b.text=x,b.isLineHolder=!x&&!a,typeof o.width=="number"?b.width=o.width:b.width=h?h[g]:pl(x,l),!g&&!c){var S=(s[s.length-1]||(s[0]=new H7)).tokens,E=S.length;E===1&&S[0].isLineHolder?S[0]=b:(x||!E||a)&&S.push(b)}else s.push(new H7([b]))}}function cve(i){var e=i.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var uve=qo(",&?/;] ".split(""),function(i,e){return i[e]=!0,i},{});function hve(i){return cve(i)?!!uve[i]:!0}function K7(i,e,t,r,n){for(var a=[],o=[],s="",l="",c=0,u=0,h=0;h<i.length;h++){var d=i.charAt(h);if(d===`
`){l&&(s+=l,u+=c),a.push(s),o.push(u),s="",l="",c=0,u=0;continue}var f=pl(d,e),m=r?!1:!hve(d);if(a.length?u+f>t:n+u+f>t){u?(s||l)&&(m?(s||(s=l,l="",c=0,u=c),a.push(s),o.push(u-c),l+=d,c+=f,s="",u=c):(l&&(s+=l,l="",c=0),a.push(s),o.push(u),s=d,u=f)):m?(a.push(l),o.push(c),l=d,c=f):(a.push(d),o.push(f));continue}u+=f,m?(l+=d,c+=f):(l&&(s+=l,l="",c=0),s+=d)}return!a.length&&!s&&(s=i,l="",c=0),l&&(s+=l),s&&(a.push(s),o.push(u)),a.length===1&&(u+=n),{accumWidth:u,lines:a,linesWidths:o}}var HP="__zr_style_"+Math.round(Math.random()*10),fh={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},JA={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};fh[HP]=!0;var X7=["z","z2","invisible"],dve=["invisible"],fve=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype._init=function(t){for(var r=si(t),n=0;n<r.length;n++){var a=r[n];a==="style"?this.useStyle(t[a]):i.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,n,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&pve(this,t,r)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var n=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,n=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Ht(0,0,0,0)),r?Ht.applyTransform(t,n,r):t.copy(n),(o||s||l)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(l),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+l-o));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Ht(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?i.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Ce(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=UA,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&UA)},e.prototype.styleUpdated=function(){this.__dirty&=~UA},e.prototype.createStyle=function(t){return Pf(fh,t)},e.prototype.useStyle=function(t){t[HP]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[HP]},e.prototype._innerSaveToNormal=function(t){i.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,X7)},e.prototype._applyStateObj=function(t,r,n,a,o,s){i.prototype._applyStateObj.call(this,t,r,n,a,o,s);var l=!(r&&a),c;if(r&&r.style?o?a?c=r.style:(c=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),a?this.style:n.style),this._mergeStyle(c,r.style)):l&&(c=n.style),c)if(o){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var h=si(u),d=0;d<h.length;d++){var f=h[d];f in c&&(c[f]=c[f],this.style[f]=u[f])}for(var m=si(c),d=0;d<m.length;d++){var f=m[d];this.style[f]=this.style[f]}this._transitionState(t,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var y=this.__inHover?dve:X7,d=0;d<y.length;d++){var f=y[d];r&&r[f]!=null?this[f]=r[f]:l&&n[f]!=null&&(this[f]=n[f])}},e.prototype._mergeStates=function(t){for(var r=i.prototype._mergeStates.call(this,t),n,a=0;a<t.length;a++){var o=t[a];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(r.style=n),r},e.prototype._mergeStyle=function(t,r){return Ce(t,r),t},e.prototype.getAnimationStyleProps=function(){return JA},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=lo|UA}(),e}(SC),zP=new Ht(0,0,0,0),VP=new Ht(0,0,0,0);function pve(i,e,t){return zP.copy(i.getBoundingRect()),i.transform&&zP.applyTransform(i.transform),VP.width=e,VP.height=t,!zP.intersect(VP)}var Da=fve;var vl=Math.min,yl=Math.max,QP=Math.sin,GP=Math.cos,$A=Math.PI*2,LC=ch(),OC=ch(),FC=ch();function em(i,e,t){if(i.length!==0){for(var r=i[0],n=r[0],a=r[0],o=r[1],s=r[1],l=1;l<i.length;l++)r=i[l],n=vl(n,r[0]),a=yl(a,r[0]),o=vl(o,r[1]),s=yl(s,r[1]);e[0]=n,e[1]=o,t[0]=a,t[1]=s}}function WP(i,e,t,r,n,a){n[0]=vl(i,t),n[1]=vl(e,r),a[0]=yl(i,t),a[1]=yl(e,r)}var Y7=[],q7=[];function Z7(i,e,t,r,n,a,o,s,l,c){var u=iC,h=Ea,d=u(i,t,n,o,Y7);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<d;f++){var m=h(i,t,n,o,Y7[f]);l[0]=vl(m,l[0]),c[0]=yl(m,c[0])}d=u(e,r,a,s,q7);for(var f=0;f<d;f++){var y=h(e,r,a,s,q7[f]);l[1]=vl(y,l[1]),c[1]=yl(y,c[1])}l[0]=vl(i,l[0]),c[0]=yl(i,c[0]),l[0]=vl(o,l[0]),c[0]=yl(o,c[0]),l[1]=vl(e,l[1]),c[1]=yl(e,c[1]),l[1]=vl(s,l[1]),c[1]=yl(s,c[1])}function J7(i,e,t,r,n,a,o,s){var l=nC,c=Ba,u=yl(vl(l(i,t,n),1),0),h=yl(vl(l(e,r,a),1),0),d=c(i,t,n,u),f=c(e,r,a,h);o[0]=vl(i,n,d),o[1]=vl(e,a,f),s[0]=yl(i,n,d),s[1]=yl(e,a,f)}function $7(i,e,t,r,n,a,o,s,l){var c=jl,u=Kl,h=Math.abs(n-a);if(h%$A<1e-4&&h>1e-4){s[0]=i-t,s[1]=e-r,l[0]=i+t,l[1]=e+r;return}if(LC[0]=GP(n)*t+i,LC[1]=QP(n)*r+e,OC[0]=GP(a)*t+i,OC[1]=QP(a)*r+e,c(s,LC,OC),u(l,LC,OC),n=n%$A,n<0&&(n=n+$A),a=a%$A,a<0&&(a=a+$A),n>a&&!o?a+=$A:n<a&&o&&(n+=$A),o){var d=a;a=n,n=d}for(var f=0;f<a;f+=Math.PI/2)f>n&&(FC[0]=GP(f)*t+i,FC[1]=QP(f)*r+e,c(s,FC,s),u(l,FC,l))}var Bn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tm=[],im=[],ph=[],Gf=[],Ah=[],mh=[],jP=Math.min,KP=Math.max,rm=Math.cos,nm=Math.sin,sd=Math.abs,qP=Math.PI,Wf=qP*2,XP=typeof Float32Array<"u",ux=[];function YP(i){var e=Math.round(i/qP*1e8)/1e8;return e%2*qP}function hx(i,e){var t=YP(i[0]);t<0&&(t+=Wf);var r=t-i[0],n=i[1];n+=r,!e&&n-t>=Wf?n=t+Wf:e&&t-n>=Wf?n=t-Wf:!e&&t>n?n=t+(Wf-YP(t-n)):e&&t<n&&(n=t-(Wf-YP(n-t))),i[0]=t,i[1]=n}var Ave=function(){function i(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return i.prototype.increaseVersion=function(){this._version++},i.prototype.getVersion=function(){return this._version},i.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=sd(r/WA/e)||0,this._uy=sd(r/WA/t)||0)},i.prototype.setDPR=function(e){this.dpr=e},i.prototype.setContext=function(e){this._ctx=e},i.prototype.getContext=function(){return this._ctx},i.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},i.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},i.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Bn.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},i.prototype.lineTo=function(e,t){var r=sd(e-this._xi),n=sd(t-this._yi),a=r>this._ux||n>this._uy;if(this.addData(Bn.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+n*n;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},i.prototype.bezierCurveTo=function(e,t,r,n,a,o){return this._drawPendingPt(),this.addData(Bn.C,e,t,r,n,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,n,a,o),this._xi=a,this._yi=o,this},i.prototype.quadraticCurveTo=function(e,t,r,n){return this._drawPendingPt(),this.addData(Bn.Q,e,t,r,n),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,n),this._xi=r,this._yi=n,this},i.prototype.arc=function(e,t,r,n,a,o){this._drawPendingPt(),ux[0]=n,ux[1]=a,hx(ux,o),n=ux[0],a=ux[1];var s=a-n;return this.addData(Bn.A,e,t,r,r,n,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,n,a,o),this._xi=rm(a)*r+e,this._yi=nm(a)*r+t,this},i.prototype.arcTo=function(e,t,r,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,n,a),this},i.prototype.rect=function(e,t,r,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,n),this.addData(Bn.R,e,t,r,n),this},i.prototype.closePath=function(){this._drawPendingPt(),this.addData(Bn.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},i.prototype.fill=function(e){e&&e.fill(),this.toStatic()},i.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},i.prototype.len=function(){return this._len},i.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&XP&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},i.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,n=this._len,a=0;a<t;a++)r+=e[a].len();XP&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},i.prototype.addData=function(e,t,r,n,a,o,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var h=0;h<arguments.length;h++)u[this._len++]=arguments[h]}},i.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},i.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},i.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,XP&&this._len>11&&(this.data=new Float32Array(e)))}},i.prototype.getBoundingRect=function(){ph[0]=ph[1]=Ah[0]=Ah[1]=Number.MAX_VALUE,Gf[0]=Gf[1]=mh[0]=mh[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,n=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(t=e[o],r=e[o+1],n=t,a=r),s){case Bn.M:t=n=e[o++],r=a=e[o++],Ah[0]=n,Ah[1]=a,mh[0]=n,mh[1]=a;break;case Bn.L:WP(t,r,e[o],e[o+1],Ah,mh),t=e[o++],r=e[o++];break;case Bn.C:Z7(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Ah,mh),t=e[o++],r=e[o++];break;case Bn.Q:J7(t,r,e[o++],e[o++],e[o],e[o+1],Ah,mh),t=e[o++],r=e[o++];break;case Bn.A:var c=e[o++],u=e[o++],h=e[o++],d=e[o++],f=e[o++],m=e[o++]+f;o+=1;var y=!e[o++];l&&(n=rm(f)*h+c,a=nm(f)*d+u),$7(c,u,h,d,f,m,y,Ah,mh),t=rm(m)*h+c,r=nm(m)*d+u;break;case Bn.R:n=t=e[o++],a=r=e[o++];var g=e[o++],x=e[o++];WP(n,a,n+g,a+x,Ah,mh);break;case Bn.Z:t=n,r=a;break}jl(ph,ph,Ah),Kl(Gf,Gf,mh)}return o===0&&(ph[0]=ph[1]=Gf[0]=Gf[1]=0),new Ht(ph[0],ph[1],Gf[0]-ph[0],Gf[1]-ph[1])},i.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,n=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,h=0,d=0;d<t;){var f=e[d++],m=d===1;m&&(a=e[d],o=e[d+1],s=a,l=o);var y=-1;switch(f){case Bn.M:a=s=e[d++],o=l=e[d++];break;case Bn.L:{var g=e[d++],x=e[d++],b=g-a,S=x-o;(sd(b)>r||sd(S)>n||d===t-1)&&(y=Math.sqrt(b*b+S*S),a=g,o=x);break}case Bn.C:{var E=e[d++],D=e[d++],g=e[d++],x=e[d++],B=e[d++],F=e[d++];y=PQ(a,o,E,D,g,x,B,F,10),a=B,o=F;break}case Bn.Q:{var E=e[d++],D=e[d++],g=e[d++],x=e[d++];y=OQ(a,o,E,D,g,x,10),a=g,o=x;break}case Bn.A:var H=e[d++],U=e[d++],k=e[d++],j=e[d++],q=e[d++],X=e[d++],Y=X+q;d+=1,m&&(s=rm(q)*k+H,l=nm(q)*j+U),y=KP(k,j)*jP(Wf,Math.abs(X)),a=rm(Y)*k+H,o=nm(Y)*j+U;break;case Bn.R:{s=a=e[d++],l=o=e[d++];var J=e[d++],te=e[d++];y=J*2+te*2;break}case Bn.Z:{var b=s-a,S=l-o;y=Math.sqrt(b*b+S*S),a=s,o=l;break}}y>=0&&(c[h++]=y,u+=y)}return this._pathLen=u,u},i.prototype.rebuildPath=function(e,t){var r=this.data,n=this._ux,a=this._uy,o=this._len,s,l,c,u,h,d,f=t<1,m,y,g=0,x=0,b,S=0,E,D;if(!(f&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,y=this._pathLen,b=t*y,!b)))e:for(var B=0;B<o;){var F=r[B++],H=B===1;switch(H&&(c=r[B],u=r[B+1],s=c,l=u),F!==Bn.L&&S>0&&(e.lineTo(E,D),S=0),F){case Bn.M:s=c=r[B++],l=u=r[B++],e.moveTo(c,u);break;case Bn.L:{h=r[B++],d=r[B++];var U=sd(h-c),k=sd(d-u);if(U>n||k>a){if(f){var j=m[x++];if(g+j>b){var q=(b-g)/j;e.lineTo(c*(1-q)+h*q,u*(1-q)+d*q);break e}g+=j}e.lineTo(h,d),c=h,u=d,S=0}else{var X=U*U+k*k;X>S&&(E=h,D=d,S=X)}break}case Bn.C:{var Y=r[B++],J=r[B++],te=r[B++],de=r[B++],ue=r[B++],ve=r[B++];if(f){var j=m[x++];if(g+j>b){var q=(b-g)/j;Ec(c,Y,te,ue,q,tm),Ec(u,J,de,ve,q,im),e.bezierCurveTo(tm[1],im[1],tm[2],im[2],tm[3],im[3]);break e}g+=j}e.bezierCurveTo(Y,J,te,de,ue,ve),c=ue,u=ve;break}case Bn.Q:{var Y=r[B++],J=r[B++],te=r[B++],de=r[B++];if(f){var j=m[x++];if(g+j>b){var q=(b-g)/j;Uf(c,Y,te,q,tm),Uf(u,J,de,q,im),e.quadraticCurveTo(tm[1],im[1],tm[2],im[2]);break e}g+=j}e.quadraticCurveTo(Y,J,te,de),c=te,u=de;break}case Bn.A:var _e=r[B++],Re=r[B++],Oe=r[B++],Te=r[B++],Se=r[B++],nt=r[B++],rt=r[B++],dt=!r[B++],tt=Oe>Te?Oe:Te,ht=sd(Oe-Te)>.001,pt=Se+nt,Je=!1;if(f){var j=m[x++];g+j>b&&(pt=Se+nt*(b-g)/j,Je=!0),g+=j}if(ht&&e.ellipse?e.ellipse(_e,Re,Oe,Te,rt,Se,pt,dt):e.arc(_e,Re,tt,Se,pt,dt),Je)break e;H&&(s=rm(Se)*Oe+_e,l=nm(Se)*Te+Re),c=rm(pt)*Oe+_e,u=nm(pt)*Te+Re;break;case Bn.R:s=c=r[B],l=u=r[B+1],h=r[B++],d=r[B++];var Ie=r[B++],Bi=r[B++];if(f){var j=m[x++];if(g+j>b){var _t=b-g;e.moveTo(h,d),e.lineTo(h+jP(_t,Ie),d),_t-=Ie,_t>0&&e.lineTo(h+Ie,d+jP(_t,Bi)),_t-=Bi,_t>0&&e.lineTo(h+KP(Ie-_t,0),d+Bi),_t-=Ie,_t>0&&e.lineTo(h,d+KP(Bi-_t,0));break e}g+=j}e.rect(h,d,Ie,Bi);break;case Bn.Z:if(f){var j=m[x++];if(g+j>b){var q=(b-g)/j;e.lineTo(c*(1-q)+s*q,u*(1-q)+l*q);break e}g+=j}e.closePath(),c=s,u=l}}},i.prototype.clone=function(){var e=new i,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},i.CMD=Bn,i.initDefaultProps=function(){var e=i.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),i}(),To=Ave;function gh(i,e,t,r,n,a,o){if(n===0)return!1;var s=n,l=0,c=i;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>i+s&&a>t+s||a<i-s&&a<t-s)return!1;if(i!==t)l=(e-r)/(i-t),c=(i*r-t*e)/(i-t);else return Math.abs(a-i)<=s/2;var u=l*a-o+c,h=u*u/(l*l+1);return h<=s/2*s/2}function iG(i,e,t,r,n,a,o,s,l,c,u){if(l===0)return!1;var h=l;if(u>e+h&&u>r+h&&u>a+h&&u>s+h||u<e-h&&u<r-h&&u<a-h&&u<s-h||c>i+h&&c>t+h&&c>n+h&&c>o+h||c<i-h&&c<t-h&&c<n-h&&c<o-h)return!1;var d=rC(i,e,t,r,n,a,o,s,c,u,null);return d<=h/2}function NC(i,e,t,r,n,a,o,s,l){if(o===0)return!1;var c=o;if(l>e+c&&l>r+c&&l>a+c||l<e-c&&l<r-c&&l<a-c||s>i+c&&s>t+c&&s>n+c||s<i-c&&s<t-c&&s<n-c)return!1;var u=aC(i,e,t,r,n,a,s,l,null);return u<=c/2}var nG=Math.PI*2;function es(i){return i%=nG,i<0&&(i+=nG),i}var dx=Math.PI*2;function aG(i,e,t,r,n,a,o,s,l){if(o===0)return!1;var c=o;s-=i,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(r-n)%dx<1e-4)return!0;if(a){var h=r;r=es(n),n=es(h)}else r=es(r),n=es(n);r>n&&(n+=dx);var d=Math.atan2(l,s);return d<0&&(d+=dx),d>=r&&d<=n||d+dx>=r&&d+dx<=n}function Dc(i,e,t,r,n,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(t-i)+i;return l===n?1/0:l>n?s:0}var jf=To.CMD,am=Math.PI*2,vve=1e-4;function yve(i,e){return Math.abs(i-e)<vve}var zs=[-1,-1,-1],Rc=[-1,-1];function xve(){var i=Rc[0];Rc[0]=Rc[1],Rc[1]=i}function _ve(i,e,t,r,n,a,o,s,l,c){if(c>e&&c>r&&c>a&&c>s||c<e&&c<r&&c<a&&c<s)return 0;var u=kA(e,r,a,s,c,zs);if(u===0)return 0;for(var h=0,d=-1,f=void 0,m=void 0,y=0;y<u;y++){var g=zs[y],x=g===0||g===1?.5:1,b=Ea(i,t,n,o,g);b<l||(d<0&&(d=iC(e,r,a,s,Rc),Rc[1]<Rc[0]&&d>1&&xve(),f=Ea(e,r,a,s,Rc[0]),d>1&&(m=Ea(e,r,a,s,Rc[1]))),d===2?g<Rc[0]?h+=f<e?x:-x:g<Rc[1]?h+=m<f?x:-x:h+=s<m?x:-x:g<Rc[0]?h+=f<e?x:-x:h+=s<f?x:-x)}return h}function wve(i,e,t,r,n,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=LQ(e,r,a,s,zs);if(l===0)return 0;var c=nC(e,r,a);if(c>=0&&c<=1){for(var u=0,h=Ba(e,r,a,c),d=0;d<l;d++){var f=zs[d]===0||zs[d]===1?.5:1,m=Ba(i,t,n,zs[d]);m<o||(zs[d]<c?u+=h<e?f:-f:u+=a<h?f:-f)}return u}else{var f=zs[0]===0||zs[0]===1?.5:1,m=Ba(i,t,n,zs[0]);return m<o?0:a<e?f:-f}}function bve(i,e,t,r,n,a,o,s){if(s-=e,s>t||s<-t)return 0;var l=Math.sqrt(t*t-s*s);zs[0]=-l,zs[1]=l;var c=Math.abs(r-n);if(c<1e-4)return 0;if(c>=am-1e-4){r=0,n=am;var u=a?1:-1;return o>=zs[0]+i&&o<=zs[1]+i?u:0}if(r>n){var h=r;r=n,n=h}r<0&&(r+=am,n+=am);for(var d=0,f=0;f<2;f++){var m=zs[f];if(m+i>o){var y=Math.atan2(s,m),u=a?1:-1;y<0&&(y=am+y),(y>=r&&y<=n||y+am>=r&&y+am<=n)&&(y>Math.PI/2&&y<Math.PI*1.5&&(u=-u),d+=u)}}return d}function oG(i,e,t,r,n){for(var a=i.data,o=i.len(),s=0,l=0,c=0,u=0,h=0,d,f,m=0;m<o;){var y=a[m++],g=m===1;switch(y===jf.M&&m>1&&(t||(s+=Dc(l,c,u,h,r,n))),g&&(l=a[m],c=a[m+1],u=l,h=c),y){case jf.M:u=a[m++],h=a[m++],l=u,c=h;break;case jf.L:if(t){if(gh(l,c,a[m],a[m+1],e,r,n))return!0}else s+=Dc(l,c,a[m],a[m+1],r,n)||0;l=a[m++],c=a[m++];break;case jf.C:if(t){if(iG(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],e,r,n))return!0}else s+=_ve(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],r,n)||0;l=a[m++],c=a[m++];break;case jf.Q:if(t){if(NC(l,c,a[m++],a[m++],a[m],a[m+1],e,r,n))return!0}else s+=wve(l,c,a[m++],a[m++],a[m],a[m+1],r,n)||0;l=a[m++],c=a[m++];break;case jf.A:var x=a[m++],b=a[m++],S=a[m++],E=a[m++],D=a[m++],B=a[m++];m+=1;var F=!!(1-a[m++]);d=Math.cos(D)*S+x,f=Math.sin(D)*E+b,g?(u=d,h=f):s+=Dc(l,c,d,f,r,n);var H=(r-x)*E/S+x;if(t){if(aG(x,b,E,D,D+B,F,e,H,n))return!0}else s+=bve(x,b,E,D,D+B,F,H,n);l=Math.cos(D+B)*S+x,c=Math.sin(D+B)*E+b;break;case jf.R:u=l=a[m++],h=c=a[m++];var U=a[m++],k=a[m++];if(d=u+U,f=h+k,t){if(gh(u,h,d,h,e,r,n)||gh(d,h,d,f,e,r,n)||gh(d,f,u,f,e,r,n)||gh(u,f,u,h,e,r,n))return!0}else s+=Dc(d,h,d,f,r,n),s+=Dc(u,f,u,h,r,n);break;case jf.Z:if(t){if(gh(l,c,u,h,e,r,n))return!0}else s+=Dc(l,c,u,h,r,n);l=u,c=h;break}}return!t&&!yve(c,h)&&(s+=Dc(l,c,u,h,r,n)||0),s!==0}function sG(i,e,t){return oG(i,0,!1,e,t)}function lG(i,e,t,r){return oG(i,e,!0,t,r)}var y0=At({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},fh),Cve={style:At({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},JA.style)},ZP=Yl.concat(["invisible","culling","z","z2","zlevel","parent"]),Eve=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.update=function(){var t=this;i.prototype.update.call(this);var r=this.style;if(r.decal){var n=this._decalEl=this._decalEl||new e;n.buildPath===e.prototype.buildPath&&(n.buildPath=function(l){t.buildPath(l,t.shape)}),n.silent=!0;var a=n.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<ZP.length;++s)n[ZP[s]]=this[ZP[s]];n.__dirty|=lo}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=si(t);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?Ce(this.style,s):this.useStyle(s):o==="shape"?Ce(this.shape,s):i.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(Ye(t)){var r=u0(t,0);return r>.5?rx:r>.2?o7:nx}else if(t)return nx}return rx},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(Ye(r)){var n=this.__zr,a=!!(n&&n.isDarkMode()),o=u0(t,0)<ix;if(a===o)return r}},e.prototype.buildPath=function(t,r,n){},e.prototype.pathUpdated=function(){this.__dirty&=~Of},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new To(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,n=!t;if(n){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Of)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){s.copy(t);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return t},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=n[0],r=n[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),lG(s,l/c,t,r)))return!0}if(this.hasFill())return sG(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Of,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):i.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var n=this.shape;return n||(n=this.shape={}),typeof t=="string"?n[t]=r:Ce(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Of)},e.prototype.createStyle=function(t){return Pf(y0,t)},e.prototype._innerSaveToNormal=function(t){i.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Ce({},this.shape))},e.prototype._applyStateObj=function(t,r,n,a,o,s){i.prototype._applyStateObj.call(this,t,r,n,a,o,s);var l=!(r&&a),c;if(r&&r.shape?o?a?c=r.shape:(c=Ce({},n.shape),Ce(c,r.shape)):(c=Ce({},a?this.shape:n.shape),Ce(c,r.shape)):l&&(c=n.shape),c)if(o){this.shape=Ce({},this.shape);for(var u={},h=si(c),d=0;d<h.length;d++){var f=h[d];typeof c[f]=="object"?this.shape[f]=c[f]:u[f]=c[f]}this._transitionState(t,{shape:u},s)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=i.prototype._mergeStates.call(this,t),n,a=0;a<t.length;a++){var o=t[a];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(r.shape=n),r},e.prototype.getAnimationStyleProps=function(){return Cve},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){Yi(o,a);function o(s){var l=a.call(this,s)||this;return t.init&&t.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Tt(t.style)},o.prototype.getDefaultShape=function(){return Tt(t.shape)},o}(e);for(var n in t)typeof t[n]=="function"&&(r.prototype[n]=t[n]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=lo|UA|Of}(),e}(Da),Kt=Eve;var Tve=At({strokeFirst:!0,font:Wl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},y0),cG=function(i){Yi(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return Pf(Tve,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var n=dh(r,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;n.x-=a/2,n.y-=a/2,n.width+=a,n.height+=a}this._rect=n}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Da);cG.prototype.type="tspan";var ld=cG;var Mve=At({x:0,y:0},fh),Ive={style:At({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},JA.style)};function Bve(i){return!!(i&&typeof i!="string"&&i.width&&i.height)}var uG=function(i){Yi(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return Pf(Mve,t)},e.prototype._getSize=function(t){var r=this.style,n=r[t];if(n!=null)return n;var a=Bve(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Ive},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Ht(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Da);uG.prototype.type="image";var yn=uG;function hG(i,e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.r,s,l,c,u;n<0&&(t=t+n,n=-n),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=c=u=o:o instanceof Array?o.length===1?s=l=c=u=o[0]:o.length===2?(s=c=o[0],l=u=o[1]):o.length===3?(s=o[0],l=u=o[1],c=o[2]):(s=o[0],l=o[1],c=o[2],u=o[3]):s=l=c=u=0;var h;s+l>n&&(h=s+l,s*=n/h,l*=n/h),c+u>n&&(h=c+u,c*=n/h,u*=n/h),l+c>a&&(h=l+c,l*=a/h,c*=a/h),s+u>a&&(h=s+u,s*=a/h,u*=a/h),i.moveTo(t+s,r),i.lineTo(t+n-l,r),l!==0&&i.arc(t+n-l,r+l,l,-Math.PI/2,0),i.lineTo(t+n,r+a-c),c!==0&&i.arc(t+n-c,r+a-c,c,0,Math.PI/2),i.lineTo(t+u,r+a),u!==0&&i.arc(t+u,r+a-u,u,Math.PI/2,Math.PI),i.lineTo(t,r+s),s!==0&&i.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var x0=Math.round;function UC(i,e,t){if(e){var r=e.x1,n=e.x2,a=e.y1,o=e.y2;i.x1=r,i.x2=n,i.y1=a,i.y2=o;var s=t&&t.lineWidth;return s&&(x0(r*2)===x0(n*2)&&(i.x1=i.x2=Kf(r,s,!0)),x0(a*2)===x0(o*2)&&(i.y1=i.y2=Kf(a,s,!0))),i}}function kC(i,e,t){if(e){var r=e.x,n=e.y,a=e.width,o=e.height;i.x=r,i.y=n,i.width=a,i.height=o;var s=t&&t.lineWidth;return s&&(i.x=Kf(r,s,!0),i.y=Kf(n,s,!0),i.width=Math.max(Kf(r+a,s,!1)-i.x,a===0?0:1),i.height=Math.max(Kf(n+o,s,!1)-i.y,o===0?0:1)),i}}function Kf(i,e,t){if(!e)return i;var r=x0(i*2);return(r+x0(e))%2===0?r/2:(r+(t?1:-1))/2}var Pve=function(){function i(){this.x=0,this.y=0,this.width=0,this.height=0}return i}();var Lve={},dG=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Pve},e.prototype.buildPath=function(t,r){var n,a,o,s;if(this.subPixelOptimize){var l=kC(Lve,r,this.style);n=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else n=r.x,a=r.y,o=r.width,s=r.height;r.r?hG(t,r):t.rect(n,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Kt);dG.prototype.type="rect";var pi=dG;var fG={fill:"#000"},pG=2,Ove={style:At({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},JA.style)},wG=function(i){Yi(e,i);function e(t){var r=i.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=fG,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){i.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):i.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):i.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),i.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Uve(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){i.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){i.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Ht(0,0,0,0),r=this._children,n=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),c=s.getLocalTransform(n);c?(t.copy(l),t.applyTransform(c),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||fG},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var n=r.rich,a=t.rich||n&&{};return Ce(t,r),n&&a?(this._mergeRich(a,n),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var n=si(r),a=0;a<n.length;a++){var o=n[a];t[o]=t[o]||{},Ce(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return Ove},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||Wl,n=t.padding,a=_G(t),o=W7(a,t),s=JP(t),l=!!t.backgroundColor,c=o.outerHeight,u=o.outerWidth,h=o.contentWidth,d=o.lines,f=o.lineHeight,m=this._defaultStyle,y=t.x||0,g=t.y||0,x=t.align||m.align||"left",b=t.verticalAlign||m.verticalAlign||"top",S=y,E=XA(g,o.contentHeight,b);if(s||n){var D=d0(y,u,x),B=XA(g,c,b);s&&this._renderBackground(t,t,D,B,u,c)}E+=f/2,n&&(S=xG(y,x,n),b==="top"?E+=n[0]:b==="bottom"&&(E-=n[2]));for(var F=0,H=!1,U=yG("fill"in t?t.fill:(H=!0,m.fill)),k=vG("stroke"in t?t.stroke:!l&&(!m.autoStroke||H)?(F=pG,m.stroke):null),j=t.textShadowBlur>0,q=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),X=o.calculatedLineHeight,Y=0;Y<d.length;Y++){var J=this._getOrCreateChild(ld),te=J.createStyle();J.useStyle(te),te.text=d[Y],te.x=S,te.y=E,x&&(te.textAlign=x),te.textBaseline="middle",te.opacity=t.opacity,te.strokeFirst=!0,j&&(te.shadowBlur=t.textShadowBlur||0,te.shadowColor=t.textShadowColor||"transparent",te.shadowOffsetX=t.textShadowOffsetX||0,te.shadowOffsetY=t.textShadowOffsetY||0),te.stroke=k,te.fill=U,k&&(te.lineWidth=t.lineWidth||F,te.lineDash=t.lineDash,te.lineDashOffset=t.lineDashOffset||0),te.font=r,mG(te,t),E+=f,q&&J.setBoundingRect(new Ht(d0(te.x,t.width,te.textAlign),XA(te.y,X,te.textBaseline),h,X))}},e.prototype._updateRichTexts=function(){var t=this.style,r=_G(t),n=j7(r,t),a=n.width,o=n.outerWidth,s=n.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,h=this._defaultStyle,d=t.align||h.align,f=t.verticalAlign||h.verticalAlign,m=d0(c,o,d),y=XA(u,s,f),g=m,x=y;l&&(g+=l[3],x+=l[0]);var b=g+a;JP(t)&&this._renderBackground(t,t,m,y,o,s);for(var S=!!t.backgroundColor,E=0;E<n.lines.length;E++){for(var D=n.lines[E],B=D.tokens,F=B.length,H=D.lineHeight,U=D.width,k=0,j=g,q=b,X=F-1,Y=void 0;k<F&&(Y=B[k],!Y.align||Y.align==="left");)this._placeToken(Y,t,H,x,j,"left",S),U-=Y.width,j+=Y.width,k++;for(;X>=0&&(Y=B[X],Y.align==="right");)this._placeToken(Y,t,H,x,q,"right",S),U-=Y.width,q-=Y.width,X--;for(j+=(a-(j-g)-(b-q)-U)/2;k<=X;)Y=B[k],this._placeToken(Y,t,H,x,j+Y.width/2,"center",S),j+=Y.width,k++;x+=H}},e.prototype._placeToken=function(t,r,n,a,o,s,l){var c=r.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,h=a+n/2;u==="top"?h=a+t.height/2:u==="bottom"&&(h=a+n-t.height/2);var d=!t.isLineHolder&&JP(c);d&&this._renderBackground(c,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,h-t.height/2,t.width,t.height);var f=!!c.backgroundColor,m=t.textPadding;m&&(o=xG(o,s,m),h-=t.height/2-m[0]-t.innerHeight/2);var y=this._getOrCreateChild(ld),g=y.createStyle();y.useStyle(g);var x=this._defaultStyle,b=!1,S=0,E=yG("fill"in c?c.fill:"fill"in r?r.fill:(b=!0,x.fill)),D=vG("stroke"in c?c.stroke:"stroke"in r?r.stroke:!f&&!l&&(!x.autoStroke||b)?(S=pG,x.stroke):null),B=c.textShadowBlur>0||r.textShadowBlur>0;g.text=t.text,g.x=o,g.y=h,B&&(g.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,g.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",g.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,g.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=t.font||Wl,g.opacity=wo(c.opacity,r.opacity,1),mG(g,c),D&&(g.lineWidth=wo(c.lineWidth,r.lineWidth,S),g.lineDash=Yt(c.lineDash,r.lineDash),g.lineDashOffset=r.lineDashOffset||0,g.stroke=D),E&&(g.fill=E);var F=t.contentWidth,H=t.contentHeight;y.setBoundingRect(new Ht(d0(g.x,F,g.textAlign),XA(g.y,H,g.textBaseline),F,H))},e.prototype._renderBackground=function(t,r,n,a,o,s){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,h=l&&l.image,d=l&&!h,f=t.borderRadius,m=this,y,g;if(d||t.lineHeight||c&&u){y=this._getOrCreateChild(pi),y.useStyle(y.createStyle()),y.style.fill=null;var x=y.shape;x.x=n,x.y=a,x.width=o,x.height=s,x.r=f,y.dirtyShape()}if(d){var b=y.style;b.fill=l||null,b.fillOpacity=Yt(t.fillOpacity,1)}else if(h){g=this._getOrCreateChild(yn),g.onload=function(){m.dirtyStyle()};var S=g.style;S.image=l.image,S.x=n,S.y=a,S.width=o,S.height=s}if(c&&u){var b=y.style;b.lineWidth=c,b.stroke=u,b.strokeOpacity=Yt(t.strokeOpacity,1),b.lineDash=t.borderDash,b.lineDashOffset=t.borderDashOffset||0,y.strokeContainThreshold=0,y.hasFill()&&y.hasStroke()&&(b.strokeFirst=!0,b.lineWidth*=2)}var E=(y||g).style;E.shadowBlur=t.shadowBlur||0,E.shadowColor=t.shadowColor||"transparent",E.shadowOffsetX=t.shadowOffsetX||0,E.shadowOffsetY=t.shadowOffsetY||0,E.opacity=wo(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return eL(t)&&(r=[t.fontStyle,t.fontWeight,$P(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&bo(r)||t.textFont||t.font},e}(Da),Fve={left:!0,right:1,center:1},Nve={top:1,bottom:1,middle:1},AG=["fontStyle","fontWeight","fontSize","fontFamily"];function $P(i){return typeof i=="string"&&(i.indexOf("px")!==-1||i.indexOf("rem")!==-1||i.indexOf("em")!==-1)?i:isNaN(+i)?US+"px":i+"px"}function mG(i,e){for(var t=0;t<AG.length;t++){var r=AG[t],n=e[r];n!=null&&(i[r]=n)}}function eL(i){return i.fontSize!=null||i.fontFamily||i.fontWeight}function Uve(i){return gG(i),W(i.rich,gG),i}function gG(i){if(i){i.font=wG.makeFont(i);var e=i.align;e==="middle"&&(e="center"),i.align=e==null||Fve[e]?e:"left";var t=i.verticalAlign;t==="center"&&(t="middle"),i.verticalAlign=t==null||Nve[t]?t:"top";var r=i.padding;r&&(i.padding=e0(i.padding))}}function vG(i,e){return i==null||e<=0||i==="transparent"||i==="none"?null:i.image||i.colorStops?"#000":i}function yG(i){return i==null||i==="none"?null:i.image||i.colorStops?"#000":i}function xG(i,e,t){return e==="right"?i-t[1]:e==="center"?i+t[3]/2-t[1]/2:i+t[3]}function _G(i){var e=i.text;return e!=null&&(e+=""),e}function JP(i){return!!(i.backgroundColor||i.lineHeight||i.borderWidth&&i.borderColor)}var yi=wG;var Pt=$t(),fx=function(i,e,t,r){if(r){var n=Pt(r);n.dataIndex=t,n.dataType=e,n.seriesIndex=i,n.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=Pt(a);o.seriesIndex=i,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}};var bG=1,SG={},IG=$t(),rL=$t(),nL=0,om=1,px=2,uo=["emphasis","blur","select"],Xf=["normal","emphasis","blur","select"],cd=10,kve=9,Yf="highlight",Ax="downplay",w0="select",mx="unselect",b0="toggleSelect";function _0(i){return i!=null&&i!=="none"}function VC(i,e,t){i.onHoverStateChange&&(i.hoverState||0)!==t&&i.onHoverStateChange(e),i.hoverState=t}function BG(i){VC(i,"emphasis",px)}function DG(i){i.hoverState===px&&VC(i,"normal",nL)}function aL(i){VC(i,"blur",om)}function RG(i){i.hoverState===om&&VC(i,"normal",nL)}function zve(i){i.selected=!0}function Vve(i){i.selected=!1}function CG(i,e,t){e(i,t)}function ud(i,e,t){CG(i,e,t),i.isGroup&&i.traverse(function(r){CG(r,e,t)})}function sm(i,e){switch(e){case"emphasis":i.hoverState=px;break;case"normal":i.hoverState=nL;break;case"blur":i.hoverState=om;break;case"select":i.selected=!0}}function Hve(i,e,t,r){for(var n=i.style,a={},o=0;o<e.length;o++){var s=e[o],l=n[s];a[s]=l??(r&&r[s])}for(var o=0;o<i.animators.length;o++){var c=i.animators[o];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(a,e)}return a}function Qve(i,e,t,r){var n=t&&qt(t,"select")>=0,a=!1;if(i instanceof Kt){var o=IG(i),s=n&&o.selectFill||o.normalFill,l=n&&o.selectStroke||o.normalStroke;if(_0(s)||_0(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(a=!0,r=Ce({},r),c=Ce({},c),c.fill=s):!_0(c.fill)&&_0(s)?(a=!0,r=Ce({},r),c=Ce({},c),c.fill=qy(s)):!_0(c.stroke)&&_0(l)&&(a||(r=Ce({},r),c=Ce({},c)),c.stroke=qy(l)),r.style=c}}if(r&&r.z2==null){a||(r=Ce({},r));var u=i.z2EmphasisLift;r.z2=i.z2+(u??cd)}return r}function Gve(i,e,t){if(t&&t.z2==null){t=Ce({},t);var r=i.z2SelectLift;t.z2=i.z2+(r??kve)}return t}function Wve(i,e,t){var r=qt(i.currentStates,e)>=0,n=i.style.opacity,a=r?null:Hve(i,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Ce({},t),o=Ce({opacity:r?n:a.opacity*.1},o),t.style=o),t}function tL(i,e){var t=this.states[i];if(this.style){if(i==="emphasis")return Qve(this,i,e,t);if(i==="blur")return Wve(this,i,t);if(i==="select")return Gve(this,i,t)}return t}function bu(i){i.stateProxy=tL;var e=i.getTextContent(),t=i.getTextGuideLine();e&&(e.stateProxy=tL),t&&(t.stateProxy=tL)}function EG(i,e){!PG(i,e)&&!i.__highByOuter&&ud(i,BG)}function TG(i,e){!PG(i,e)&&!i.__highByOuter&&ud(i,DG)}function _s(i,e){i.__highByOuter|=1<<(e||0),ud(i,BG)}function ws(i,e){!(i.__highByOuter&=~(1<<(e||0)))&&ud(i,DG)}function HC(i){ud(i,aL)}function gx(i){ud(i,RG)}function oL(i){ud(i,zve)}function sL(i){ud(i,Vve)}function PG(i,e){return i.__highDownSilentOnTouch&&e.zrByTouch}function lL(i){var e=i.getModel(),t=[],r=[];e.eachComponent(function(n,a){var o=rL(a),s=n==="series",l=s?i.getViewOfSeriesModel(a):i.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(c){RG(c)}),s&&t.push(a)),o.isBlured=!1}),W(r,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(t,!1,e)})}function iL(i,e,t,r){var n=r.getModel();t=t||"coordinateSystem";function a(c,u){for(var h=0;h<u.length;h++){var d=c.getItemGraphicEl(u[h]);d&&gx(d)}}if(i!=null&&!(!e||e==="none")){var o=n.getSeriesByIndex(i),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];n.eachSeries(function(c){var u=o===c,h=c.coordinateSystem;h&&h.master&&(h=h.master);var d=h&&s?h===s:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!d||e==="series"&&u)){var f=r.getViewOfSeriesModel(c);if(f.group.traverse(function(g){g.__highByOuter&&u&&e==="self"||aL(g)}),Sa(e))a(c.getData(),e);else if(yt(e))for(var m=si(e),y=0;y<m.length;y++)a(c.getData(m[y]),e[m[y]]);l.push(c),rL(c).isBlured=!0}}),n.eachComponent(function(c,u){if(c!=="series"){var h=r.getViewOfComponentModel(u);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,n)}})}}function zC(i,e,t){if(!(i==null||e==null)){var r=t.getModel().getComponent(i,e);if(r){rL(r).isBlured=!0;var n=t.getViewOfComponentModel(r);!n||!n.focusBlurEnabled||n.group.traverse(function(a){aL(a)})}}}function LG(i,e,t){var r=i.seriesIndex,n=i.getData(e.dataType);if(n){var a=Bc(n,e);a=(Ee(a)?a[0]:a)||0;var o=n.getItemGraphicEl(a);if(!o)for(var s=n.count(),l=0;!o&&l<s;)o=n.getItemGraphicEl(l++);if(o){var c=Pt(o);iL(r,c.focus,c.blurScope,t)}else{var u=i.get(["emphasis","focus"]),h=i.get(["emphasis","blurScope"]);u!=null&&iL(r,u,h,t)}}}function QC(i,e,t,r){var n={focusSelf:!1,dispatchers:null};if(i==null||i==="series"||e==null||t==null)return n;var a=r.getModel().getComponent(i,e);if(!a)return n;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return n;for(var s=o.findHighDownDispatchers(t),l,c=0;c<s.length;c++)if(Pt(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function OG(i,e,t){var r=Pt(i),n=QC(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=n.dispatchers,o=n.focusSelf;a?(o&&zC(r.componentMainType,r.componentIndex,t),W(a,function(s){return EG(s,e)})):(iL(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&zC(r.componentMainType,r.componentIndex,t),EG(i,e))}function FG(i,e,t){lL(t);var r=Pt(i),n=QC(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;n?W(n,function(a){return TG(a,e)}):TG(i,e)}function NG(i,e,t){if(WC(e)){var r=e.dataType,n=i.getData(r),a=Bc(n,e);Ee(a)||(a=[a]),i[e.type===b0?"toggleSelect":e.type===w0?"select":"unselect"](a,r)}}function cL(i){var e=i.getAllData();W(e,function(t){var r=t.data,n=t.type;r.eachItemGraphicEl(function(a,o){i.isSelected(o,n)?oL(a):sL(a)})})}function UG(i){var e=[];return i.eachSeries(function(t){var r=t.getAllData();W(r,function(n){var a=n.data,o=n.type,s=t.getSelectedDataIndices();if(s.length>0){var l={dataIndex:s,seriesIndex:t.seriesIndex};o!=null&&(l.dataType=o),e.push(l)}})}),e}function vh(i,e,t){hd(i,!0),ud(i,bu),GC(i,e,t)}function jve(i){hd(i,!1)}function pr(i,e,t,r){r?jve(i):vh(i,e,t)}function GC(i,e,t){var r=Pt(i);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var MG=["emphasis","blur","select"],Kve={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Dn(i,e,t,r){t=t||"itemStyle";for(var n=0;n<MG.length;n++){var a=MG[n],o=e.getModel([a,t]),s=i.ensureState(a);s.style=r?r(o):o[Kve[t]]()}}function hd(i,e){var t=e===!1,r=i;i.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=i.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function qf(i){return!!(i&&i.__highDownDispatcher)}function kG(i,e,t){var r=Pt(i);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function zG(i){var e=SG[i];return e==null&&bG<=32&&(e=SG[i]=bG++),e}function WC(i){var e=i.type;return e===w0||e===mx||e===b0}function uL(i){var e=i.type;return e===Yf||e===Ax}function VG(i){var e=IG(i);e.normalFill=i.style.fill,e.normalStroke=i.style.stroke;var t=i.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var gi={};Db(gi,{Arc:()=>bx,BezierCurve:()=>um,BoundingRect:()=>Ht,Circle:()=>Vs,CompoundPath:()=>T0,Ellipse:()=>yx,Group:()=>xt,Image:()=>yn,IncrementalDisplayable:()=>h9,Line:()=>Xn,LinearGradient:()=>xh,OrientedBoundingRect:()=>M0,Path:()=>Kt,Point:()=>Ii,Polygon:()=>oa,Polyline:()=>Jn,RadialGradient:()=>$C,Rect:()=>pi,Ring:()=>cm,Sector:()=>Ra,Text:()=>yi,applyTransform:()=>ts,clipPointsByRect:()=>yL,clipRectByRect:()=>E1e,createIcon:()=>md,extendPath:()=>b1e,extendShape:()=>_1e,getShapeClass:()=>Sx,getTransform:()=>Eu,groupTransition:()=>Ad,initProps:()=>Ar,isElementRemoved:()=>dd,lineLineIntersect:()=>y9,linePolygonIntersect:()=>B0,makeImage:()=>vL,makePath:()=>I0,mergePath:()=>Ss,registerShape:()=>Cu,removeElement:()=>Pc,removeElementWithFadeOut:()=>fd,resizePath:()=>v9,setTooltipConfig:()=>Tu,subPixelOptimize:()=>Cx,subPixelOptimizeLine:()=>pd,subPixelOptimizeRect:()=>S1e,transformDirection:()=>fm,traverseElements:()=>Hs,updateProps:()=>Si});var S0=To.CMD,Xve=[[],[],[]],HG=Math.sqrt,Yve=Math.atan2;function jC(i,e){if(e){var t=i.data,r=i.len(),n,a,o,s,l,c,u=S0.M,h=S0.C,d=S0.L,f=S0.R,m=S0.A,y=S0.Q;for(o=0,s=0;o<r;){switch(n=t[o++],s=o,a=0,n){case u:a=1;break;case d:a=1;break;case h:a=3;break;case y:a=2;break;case m:var g=e[4],x=e[5],b=HG(e[0]*e[0]+e[1]*e[1]),S=HG(e[2]*e[2]+e[3]*e[3]),E=Yve(-e[1]/S,e[0]/b);t[o]*=b,t[o++]+=g,t[o]*=S,t[o++]+=x,t[o++]*=b,t[o++]*=S,t[o++]+=E,t[o++]+=E,o+=2,s=o;break;case f:c[0]=t[o++],c[1]=t[o++],Ca(c,c,e),t[s++]=c[0],t[s++]=c[1],c[0]+=t[o++],c[1]+=t[o++],Ca(c,c,e),t[s++]=c[0],t[s++]=c[1]}for(l=0;l<a;l++){var D=Xve[l];D[0]=t[o++],D[1]=t[o++],Ca(D,D,e),t[s++]=D[0],t[s++]=D[1]}}i.increaseVersion()}}var hL=Math.sqrt,KC=Math.sin,XC=Math.cos,vx=Math.PI;function QG(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function dL(i,e){return(i[0]*e[0]+i[1]*e[1])/(QG(i)*QG(e))}function GG(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(dL(i,e))}function WG(i,e,t,r,n,a,o,s,l,c,u){var h=l*(vx/180),d=XC(h)*(i-t)/2+KC(h)*(e-r)/2,f=-1*KC(h)*(i-t)/2+XC(h)*(e-r)/2,m=d*d/(o*o)+f*f/(s*s);m>1&&(o*=hL(m),s*=hL(m));var y=(n===a?-1:1)*hL((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,g=y*o*f/s,x=y*-s*d/o,b=(i+t)/2+XC(h)*g-KC(h)*x,S=(e+r)/2+KC(h)*g+XC(h)*x,E=GG([1,0],[(d-g)/o,(f-x)/s]),D=[(d-g)/o,(f-x)/s],B=[(-1*d-g)/o,(-1*f-x)/s],F=GG(D,B);if(dL(D,B)<=-1&&(F=vx),dL(D,B)>=1&&(F=0),F<0){var H=Math.round(F/vx*1e6)/1e6;F=vx*2+H%2*vx}u.addData(c,b,S,o,s,E,F,h,a)}var qve=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Zve=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Jve(i){var e=new To;if(!i)return e;var t=0,r=0,n=t,a=r,o,s=To.CMD,l=i.match(qve);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],h=u.charAt(0),d=void 0,f=u.match(Zve)||[],m=f.length,y=0;y<m;y++)f[y]=parseFloat(f[y]);for(var g=0;g<m;){var x=void 0,b=void 0,S=void 0,E=void 0,D=void 0,B=void 0,F=void 0,H=t,U=r,k=void 0,j=void 0;switch(h){case"l":t+=f[g++],r+=f[g++],d=s.L,e.addData(d,t,r);break;case"L":t=f[g++],r=f[g++],d=s.L,e.addData(d,t,r);break;case"m":t+=f[g++],r+=f[g++],d=s.M,e.addData(d,t,r),n=t,a=r,h="l";break;case"M":t=f[g++],r=f[g++],d=s.M,e.addData(d,t,r),n=t,a=r,h="L";break;case"h":t+=f[g++],d=s.L,e.addData(d,t,r);break;case"H":t=f[g++],d=s.L,e.addData(d,t,r);break;case"v":r+=f[g++],d=s.L,e.addData(d,t,r);break;case"V":r=f[g++],d=s.L,e.addData(d,t,r);break;case"C":d=s.C,e.addData(d,f[g++],f[g++],f[g++],f[g++],f[g++],f[g++]),t=f[g-2],r=f[g-1];break;case"c":d=s.C,e.addData(d,f[g++]+t,f[g++]+r,f[g++]+t,f[g++]+r,f[g++]+t,f[g++]+r),t+=f[g-2],r+=f[g-1];break;case"S":x=t,b=r,k=e.len(),j=e.data,o===s.C&&(x+=t-j[k-4],b+=r-j[k-3]),d=s.C,H=f[g++],U=f[g++],t=f[g++],r=f[g++],e.addData(d,x,b,H,U,t,r);break;case"s":x=t,b=r,k=e.len(),j=e.data,o===s.C&&(x+=t-j[k-4],b+=r-j[k-3]),d=s.C,H=t+f[g++],U=r+f[g++],t+=f[g++],r+=f[g++],e.addData(d,x,b,H,U,t,r);break;case"Q":H=f[g++],U=f[g++],t=f[g++],r=f[g++],d=s.Q,e.addData(d,H,U,t,r);break;case"q":H=f[g++]+t,U=f[g++]+r,t+=f[g++],r+=f[g++],d=s.Q,e.addData(d,H,U,t,r);break;case"T":x=t,b=r,k=e.len(),j=e.data,o===s.Q&&(x+=t-j[k-4],b+=r-j[k-3]),t=f[g++],r=f[g++],d=s.Q,e.addData(d,x,b,t,r);break;case"t":x=t,b=r,k=e.len(),j=e.data,o===s.Q&&(x+=t-j[k-4],b+=r-j[k-3]),t+=f[g++],r+=f[g++],d=s.Q,e.addData(d,x,b,t,r);break;case"A":S=f[g++],E=f[g++],D=f[g++],B=f[g++],F=f[g++],H=t,U=r,t=f[g++],r=f[g++],d=s.A,WG(H,U,t,r,B,F,S,E,D,d,e);break;case"a":S=f[g++],E=f[g++],D=f[g++],B=f[g++],F=f[g++],H=t,U=r,t+=f[g++],r+=f[g++],d=s.A,WG(H,U,t,r,B,F,S,E,D,d,e);break}}(h==="z"||h==="Z")&&(d=s.Z,e.addData(d),t=n,r=a),o=d}return e.toStatic(),e}var jG=function(i){Yi(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Kt);function KG(i){return i.setData!=null}function XG(i,e){var t=Jve(i),r=Ce({},e);return r.buildPath=function(n){if(KG(n)){n.setData(t.data);var a=n.getContext();a&&n.rebuildPath(a,1)}else{var a=n;t.rebuildPath(a,1)}},r.applyTransform=function(n){jC(t,n),this.dirtyShape()},r}function YC(i,e){return new jG(XG(i,e))}function YG(i,e){var t=XG(i,e),r=function(n){Yi(a,n);function a(o){var s=n.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(jG);return r}function qG(i,e){for(var t=[],r=i.length,n=0;n<r;n++){var a=i[n];t.push(a.getUpdatedPathProxy(!0))}var o=new Kt(e);return o.createPathProxy(),o.buildPath=function(s){if(KG(s)){s.appendPath(t);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function C0(i,e){e=e||{};var t=new Kt;return i.shape&&t.setShape(i.shape),t.setStyle(i.style),e.bakeTransform?jC(t.path,i.getComputedTransform()):e.toLocal?t.setLocalTransform(i.getComputedTransform()):t.copyTransform(i),t.buildPath=i.buildPath,t.applyTransform=t.applyTransform,t.z=i.z,t.z2=i.z2,t.zlevel=i.zlevel,t}var e1e=function(){function i(){this.cx=0,this.cy=0,this.r=0}return i}();var ZG=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new e1e},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Kt);ZG.prototype.type="circle";var Vs=ZG;var t1e=function(){function i(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return i}();var JG=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new t1e},e.prototype.buildPath=function(t,r){var n=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,c=s*n,u=l*n;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-u,a-c,o-l,a,o-l),t.bezierCurveTo(a+c,o-l,a+s,o-u,a+s,o),t.bezierCurveTo(a+s,o+u,a+c,o+l,a,o+l),t.bezierCurveTo(a-c,o+l,a-s,o+u,a-s,o),t.closePath()},e}(Kt);JG.prototype.type="ellipse";var yx=JG;var e9=Math.PI,fL=e9*2,lm=Math.sin,E0=Math.cos,i1e=Math.acos,bs=Math.atan2,$G=Math.abs,_x=Math.sqrt,xx=Math.max,yh=Math.min,Su=1e-4;function r1e(i,e,t,r,n,a,o,s){var l=t-i,c=r-e,u=o-n,h=s-a,d=h*l-u*c;if(!(d*d<Su))return d=(u*(e-a)-h*(i-n))/d,[i+d*l,e+d*c]}function qC(i,e,t,r,n,a,o){var s=i-t,l=e-r,c=(o?a:-a)/_x(s*s+l*l),u=c*l,h=-c*s,d=i+u,f=e+h,m=t+u,y=r+h,g=(d+m)/2,x=(f+y)/2,b=m-d,S=y-f,E=b*b+S*S,D=n-a,B=d*y-m*f,F=(S<0?-1:1)*_x(xx(0,D*D*E-B*B)),H=(B*S-b*F)/E,U=(-B*b-S*F)/E,k=(B*S+b*F)/E,j=(-B*b+S*F)/E,q=H-g,X=U-x,Y=k-g,J=j-x;return q*q+X*X>Y*Y+J*J&&(H=k,U=j),{cx:H,cy:U,x0:-u,y0:-h,x1:H*(n/D-1),y1:U*(n/D-1)}}function n1e(i){var e;if(Ee(i)){var t=i.length;if(!t)return i;t===1?e=[i[0],i[0],0,0]:t===2?e=[i[0],i[0],i[1],i[1]]:t===3?e=i.concat(i[2]):e=i}else e=[i,i,i,i];return e}function t9(i,e){var t,r=xx(e.r,0),n=xx(e.r0||0,0),a=r>0,o=n>0;if(!(!a&&!o)){if(a||(r=n,n=0),n>r){var s=r;r=n,n=s}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,h=e.cy,d=!!e.clockwise,f=$G(c-l),m=f>fL&&f%fL;if(m>Su&&(f=m),!(r>Su))i.moveTo(u,h);else if(f>fL-Su)i.moveTo(u+r*E0(l),h+r*lm(l)),i.arc(u,h,r,l,c,!d),n>Su&&(i.moveTo(u+n*E0(c),h+n*lm(c)),i.arc(u,h,n,c,l,d));else{var y=void 0,g=void 0,x=void 0,b=void 0,S=void 0,E=void 0,D=void 0,B=void 0,F=void 0,H=void 0,U=void 0,k=void 0,j=void 0,q=void 0,X=void 0,Y=void 0,J=r*E0(l),te=r*lm(l),de=n*E0(c),ue=n*lm(c),ve=f>Su;if(ve){var _e=e.cornerRadius;_e&&(t=n1e(_e),y=t[0],g=t[1],x=t[2],b=t[3]);var Re=$G(r-n)/2;if(S=yh(Re,x),E=yh(Re,b),D=yh(Re,y),B=yh(Re,g),U=F=xx(S,E),k=H=xx(D,B),(F>Su||H>Su)&&(j=r*E0(c),q=r*lm(c),X=n*E0(l),Y=n*lm(l),f<e9)){var Oe=r1e(J,te,X,Y,j,q,de,ue);if(Oe){var Te=J-Oe[0],Se=te-Oe[1],nt=j-Oe[0],rt=q-Oe[1],dt=1/lm(i1e((Te*nt+Se*rt)/(_x(Te*Te+Se*Se)*_x(nt*nt+rt*rt)))/2),tt=_x(Oe[0]*Oe[0]+Oe[1]*Oe[1]);U=yh(F,(r-tt)/(dt+1)),k=yh(H,(n-tt)/(dt-1))}}}if(!ve)i.moveTo(u+J,h+te);else if(U>Su){var ht=yh(x,U),pt=yh(b,U),Je=qC(X,Y,J,te,r,ht,d),Ie=qC(j,q,de,ue,r,pt,d);i.moveTo(u+Je.cx+Je.x0,h+Je.cy+Je.y0),U<F&&ht===pt?i.arc(u+Je.cx,h+Je.cy,U,bs(Je.y0,Je.x0),bs(Ie.y0,Ie.x0),!d):(ht>0&&i.arc(u+Je.cx,h+Je.cy,ht,bs(Je.y0,Je.x0),bs(Je.y1,Je.x1),!d),i.arc(u,h,r,bs(Je.cy+Je.y1,Je.cx+Je.x1),bs(Ie.cy+Ie.y1,Ie.cx+Ie.x1),!d),pt>0&&i.arc(u+Ie.cx,h+Ie.cy,pt,bs(Ie.y1,Ie.x1),bs(Ie.y0,Ie.x0),!d))}else i.moveTo(u+J,h+te),i.arc(u,h,r,l,c,!d);if(!(n>Su)||!ve)i.lineTo(u+de,h+ue);else if(k>Su){var ht=yh(y,k),pt=yh(g,k),Je=qC(de,ue,j,q,n,-pt,d),Ie=qC(J,te,X,Y,n,-ht,d);i.lineTo(u+Je.cx+Je.x0,h+Je.cy+Je.y0),k<H&&ht===pt?i.arc(u+Je.cx,h+Je.cy,k,bs(Je.y0,Je.x0),bs(Ie.y0,Ie.x0),!d):(pt>0&&i.arc(u+Je.cx,h+Je.cy,pt,bs(Je.y0,Je.x0),bs(Je.y1,Je.x1),!d),i.arc(u,h,n,bs(Je.cy+Je.y1,Je.cx+Je.x1),bs(Ie.cy+Ie.y1,Ie.cx+Ie.x1),d),ht>0&&i.arc(u+Ie.cx,h+Ie.cy,ht,bs(Ie.y1,Ie.x1),bs(Ie.y0,Ie.x0),!d))}else i.lineTo(u+de,h+ue),i.arc(u,h,n,c,l,d)}i.closePath()}}}var o1e=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return i}();var i9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new o1e},e.prototype.buildPath=function(t,r){t9(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Kt);i9.prototype.type="sector";var Ra=i9;var s1e=function(){function i(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return i}();var r9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new s1e},e.prototype.buildPath=function(t,r){var n=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(n+r.r,a),t.arc(n,a,r.r,0,o,!1),t.moveTo(n+r.r0,a),t.arc(n,a,r.r0,0,o,!0)},e}(Kt);r9.prototype.type="ring";var cm=r9;function pL(i,e,t,r){var n=[],a=[],o=[],s=[],l,c,u,h;if(r){u=[1/0,1/0],h=[-1/0,-1/0];for(var d=0,f=i.length;d<f;d++)jl(u,u,i[d]),Kl(h,h,i[d]);jl(u,u,r[0]),Kl(h,h,r[1])}for(var d=0,f=i.length;d<f;d++){var m=i[d];if(t)l=i[d?d-1:f-1],c=i[(d+1)%f];else if(d===0||d===f-1){n.push(ll(i[d]));continue}else l=i[d-1],c=i[d+1];yu(a,c,l),i0(a,a,e);var y=WS(m,l),g=WS(m,c),x=y+g;x!==0&&(y/=x,g/=x),i0(o,a,-y),i0(s,a,g);var b=WR([],m,o),S=WR([],m,s);r&&(Kl(b,b,u),jl(b,b,h),Kl(S,S,u),jl(S,S,h)),n.push(b),n.push(S)}return t&&n.push(n.shift()),n}function ZC(i,e,t){var r=e.smooth,n=e.points;if(n&&n.length>=2){if(r){var a=pL(n,r,t,e.smoothConstraint);i.moveTo(n[0][0],n[0][1]);for(var o=n.length,s=0;s<(t?o:o-1);s++){var l=a[s*2],c=a[s*2+1],u=n[(s+1)%o];i.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{i.moveTo(n[0][0],n[0][1]);for(var s=1,h=n.length;s<h;s++)i.lineTo(n[s][0],n[s][1])}t&&i.closePath()}}var l1e=function(){function i(){this.points=null,this.smooth=0,this.smoothConstraint=null}return i}();var a9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new l1e},e.prototype.buildPath=function(t,r){ZC(t,r,!0)},e}(Kt);a9.prototype.type="polygon";var oa=a9;var c1e=function(){function i(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return i}();var o9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new c1e},e.prototype.buildPath=function(t,r){ZC(t,r,!1)},e}(Kt);o9.prototype.type="polyline";var Jn=o9;var u1e={},h1e=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return i}();var s9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new h1e},e.prototype.buildPath=function(t,r){var n,a,o,s;if(this.subPixelOptimize){var l=UC(u1e,r,this.style);n=l.x1,a=l.y1,o=l.x2,s=l.y2}else n=r.x1,a=r.y1,o=r.x2,s=r.y2;var c=r.percent;c!==0&&(t.moveTo(n,a),c<1&&(o=n*(1-c)+o*c,s=a*(1-c)+s*c),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(Kt);s9.prototype.type="line";var Xn=s9;var xl=[],d1e=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return i}();function l9(i,e,t){var r=i.cpx2,n=i.cpy2;return r!=null||n!=null?[(t?rP:Ea)(i.x1,i.cpx1,i.cpx2,i.x2,e),(t?rP:Ea)(i.y1,i.cpy1,i.cpy2,i.y2,e)]:[(t?Ky:Ba)(i.x1,i.cpx1,i.x2,e),(t?Ky:Ba)(i.y1,i.cpy1,i.y2,e)]}var c9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new d1e},e.prototype.buildPath=function(t,r){var n=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,h=r.cpy2,d=r.percent;d!==0&&(t.moveTo(n,a),u==null||h==null?(d<1&&(Uf(n,l,o,d,xl),l=xl[1],o=xl[2],Uf(a,c,s,d,xl),c=xl[1],s=xl[2]),t.quadraticCurveTo(l,c,o,s)):(d<1&&(Ec(n,l,u,o,d,xl),l=xl[1],u=xl[2],o=xl[3],Ec(a,c,h,s,d,xl),c=xl[1],h=xl[2],s=xl[3]),t.bezierCurveTo(l,c,u,h,o,s)))},e.prototype.pointAt=function(t){return l9(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=l9(this.shape,t,!0);return wc(r,r)},e}(Kt);c9.prototype.type="bezier-curve";var um=c9;var f1e=function(){function i(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}();var u9=function(i){Yi(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new f1e},e.prototype.buildPath=function(t,r){var n=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(s),h=Math.sin(s);t.moveTo(u*o+n,h*o+a),t.arc(n,a,o,s,l,!c)},e}(Kt);u9.prototype.type="arc";var bx=u9;var p1e=function(i){Yi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),n=0;n<t.length;n++)r=r||t[n].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(r[0],r[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var n=r.paths||[],a=0;a<n.length;a++)n[a].buildPath(t,n[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Kt.prototype.getBoundingRect.call(this)},e}(Kt),T0=p1e;var A1e=function(){function i(e){this.colorStops=e||[]}return i.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},i}(),JC=A1e;var m1e=function(i){Yi(e,i);function e(t,r,n,a,o,s){var l=i.call(this,o)||this;return l.x=t??0,l.y=r??0,l.x2=n??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(JC),xh=m1e;var g1e=function(i){Yi(e,i);function e(t,r,n,a,o){var s=i.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=n??.5,s.type="radial",s.global=o||!1,s}return e}(JC),$C=g1e;var hm=[0,0],dm=[0,0],eE=new Ii,tE=new Ii,v1e=function(){function i(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Ii;for(var r=0;r<2;r++)this._axes[r]=new Ii;e&&this.fromBoundingRect(e,t)}return i.prototype.fromBoundingRect=function(e,t){var r=this._corners,n=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),t)for(var c=0;c<4;c++)r[c].transform(t);Ii.sub(n[0],r[1],r[0]),Ii.sub(n[1],r[3],r[0]),n[0].normalize(),n[1].normalize();for(var c=0;c<2;c++)this._origin[c]=n[c].dot(r[0])},i.prototype.intersect=function(e,t){var r=!0,n=!t;return eE.set(1/0,1/0),tE.set(0,0),!this._intersectCheckOneSide(this,e,eE,tE,n,1)&&(r=!1,n)||!this._intersectCheckOneSide(e,this,eE,tE,n,-1)&&(r=!1,n)||n||Ii.copy(t,r?eE:tE),r},i.prototype._intersectCheckOneSide=function(e,t,r,n,a,o){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,hm),this._getProjMinMaxOnAxis(l,t._corners,dm),hm[1]<dm[0]||hm[0]>dm[1]){if(s=!1,a)return s;var u=Math.abs(dm[0]-hm[1]),h=Math.abs(hm[0]-dm[1]);Math.min(u,h)>n.len()&&(u<h?Ii.scale(n,c,-u*o):Ii.scale(n,c,h*o))}else if(r){var u=Math.abs(dm[0]-hm[1]),h=Math.abs(hm[0]-dm[1]);Math.min(u,h)<r.len()&&(u<h?Ii.scale(r,c,u*o):Ii.scale(r,c,-h*o))}}return s},i.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var n=this._axes[e],a=this._origin,o=t[0].dot(n)+a[e],s=o,l=o,c=1;c<t.length;c++){var u=t[c].dot(n)+a[e];s=Math.min(u,s),l=Math.max(u,l)}r[0]=s,r[1]=l},i}(),M0=v1e;var y1e=[],x1e=function(i){Yi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Ht(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var n=this._displayables[r],a=n.getBoundingRect().clone();n.needLocalTransform()&&a.applyTransform(n.getLocalTransform(y1e)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(Da),h9=x1e;var f9=$t();function _h(i,e,t,r,n){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=i==="update";if(s){var c=void 0,u=void 0,h=void 0;r?(c=Yt(r.duration,200),u=Yt(r.easing,"cubicOut"),h=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),h=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(c=a.duration),a.easing!=null&&(u=a.easing),a.delay!=null&&(h=a.delay)),ft(h)&&(h=h(t,n)),ft(c)&&(c=c(t));var d={duration:c||0,delay:h,easing:u};return d}else return null}function AL(i,e,t,r,n,a,o){var s=!1,l;ft(n)?(o=a,a=n,n=null):yt(n)&&(a=n.cb,o=n.during,s=n.isFrom,l=n.removeOpt,n=n.dataIndex);var c=i==="leave";c||e.stopAnimation("leave");var u=_h(i,r,n,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,n):null);if(u&&u.duration>0){var h=u.duration,d=u.delay,f=u.easing,m={duration:h,delay:d||0,easing:f,done:a,force:!!a||!!o,setToFinal:!c,scope:i,during:o};s?e.animateFrom(t,m):e.animateTo(t,m)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function Si(i,e,t,r,n,a){AL("update",i,e,t,r,n,a)}function Ar(i,e,t,r,n,a){AL("enter",i,e,t,r,n,a)}function dd(i){if(!i.__zr)return!0;for(var e=0;e<i.animators.length;e++){var t=i.animators[e];if(t.scope==="leave")return!0}return!1}function Pc(i,e,t,r,n,a){dd(i)||AL("leave",i,e,t,r,n,a)}function d9(i,e,t,r){i.removeTextContent(),i.removeTextGuideLine(),Pc(i,{style:{opacity:0}},e,t,r)}function fd(i,e,t){function r(){i.parent&&i.parent.remove(i)}i.isGroup?i.traverse(function(n){n.isGroup||d9(n,e,t,r)}):d9(i,e,t,r)}function eo(i){f9(i).oldStyle=i.style}function p9(i){return f9(i).oldStyle}var iE=Math.max,rE=Math.min,gL={};function _1e(i){return Kt.extend(i)}var w1e=YG;function b1e(i,e){return w1e(i,e)}function Cu(i,e){gL[i]=e}function Sx(i){if(gL.hasOwnProperty(i))return gL[i]}function I0(i,e,t,r){var n=YC(i,e);return t&&(r==="center"&&(t=g9(t,n.getBoundingRect())),v9(n,t)),n}function vL(i,e,t){var r=new yn({style:{image:i,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(n){if(t==="center"){var a={width:n.width,height:n.height};r.setStyle(g9(e,a))}}});return r}function g9(i,e){var t=e.width/e.height,r=i.height*t,n;r<=i.width?n=i.height:(r=i.width,n=r/t);var a=i.x+i.width/2,o=i.y+i.height/2;return{x:a-r/2,y:o-n/2,width:r,height:n}}var Ss=qG;function v9(i,e){if(i.applyTransform){var t=i.getBoundingRect(),r=t.calculateTransform(e);i.applyTransform(r)}}function pd(i,e){return UC(i,i,{lineWidth:e}),i}function S1e(i){return kC(i.shape,i.shape,i.style),i}var Cx=Kf;function Eu(i,e){for(var t=Lf([]);i&&i!==e;)hl(t,i.getLocalTransform(),t),i=i.parent;return t}function ts(i,e,t){return e&&!Sa(e)&&(e=fl.getLocalTransform(e)),t&&(e=Sc([],e)),Ca([],i,e)}function fm(i,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),n=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[i==="left"?-r:i==="right"?r:0,i==="top"?-n:i==="bottom"?n:0];return a=ts(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function A9(i){return!i.isGroup}function C1e(i){return i.shape!=null}function Ad(i,e,t){if(!i||!e)return;function r(o){var s={};return o.traverse(function(l){A9(l)&&l.anid&&(s[l.anid]=l)}),s}function n(o){var s={x:o.x,y:o.y,rotation:o.rotation};return C1e(o)&&(s.shape=Ce({},o.shape)),s}var a=r(i);e.traverse(function(o){if(A9(o)&&o.anid){var s=a[o.anid];if(s){var l=n(o);o.attr(n(s)),Si(o,l,t,Pt(o).dataIndex)}}})}function yL(i,e){return Me(i,function(t){var r=t[0];r=iE(r,e.x),r=rE(r,e.x+e.width);var n=t[1];return n=iE(n,e.y),n=rE(n,e.y+e.height),[r,n]})}function E1e(i,e){var t=iE(i.x,e.x),r=rE(i.x+i.width,e.x+e.width),n=iE(i.y,e.y),a=rE(i.y+i.height,e.y+e.height);if(r>=t&&a>=n)return{x:t,y:n,width:r-t,height:a-n}}function md(i,e,t){var r=Ce({rectHover:!0},e),n=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},i)return i.indexOf("image://")===0?(n.image=i.slice(8),At(n,t),new yn(r)):I0(i.replace("path://",""),r,t,"center")}function B0(i,e,t,r,n){for(var a=0,o=n[n.length-1];a<n.length;a++){var s=n[a];if(y9(i,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function y9(i,e,t,r,n,a,o,s){var l=t-i,c=r-e,u=o-n,h=s-a,d=mL(u,h,l,c);if(T1e(d))return!1;var f=i-n,m=e-a,y=mL(f,m,l,c)/d;if(y<0||y>1)return!1;var g=mL(f,m,u,h)/d;return!(g<0||g>1)}function mL(i,e,t,r){return i*r-t*e}function T1e(i){return i<=1e-6&&i>=-1e-6}function Tu(i){var e=i.itemTooltipOption,t=i.componentModel,r=i.itemName,n=Ye(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=i.formatterParamsExtra;l&&W(si(l),function(u){Mt(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=Pt(i.el);c.componentMainType=a,c.componentIndex=o,c.tooltipConfig={name:r,option:At({content:r,formatterParams:s},n)}}function m9(i,e){var t;i.isGroup&&(t=e(i)),t||i.traverse(e)}function Hs(i,e){if(i)if(Ee(i))for(var t=0;t<i.length;t++)m9(i[t],e);else m9(i,e)}Cu("circle",Vs);Cu("ellipse",yx);Cu("sector",Ra);Cu("ring",cm);Cu("polygon",oa);Cu("polyline",Jn);Cu("rect",pi);Cu("line",Xn);Cu("bezierCurve",um);Cu("arc",bx);var nE={};function S9(i,e){for(var t=0;t<uo.length;t++){var r=uo[t],n=e[r],a=i.ensureState(r);a.style=a.style||{},a.style.text=n}var o=i.currentStates.slice();i.clearStates(!0),i.setStyle({text:e.normal}),i.useStates(o,!0)}function xL(i,e,t){var r=i.labelFetcher,n=i.labelDataIndex,a=i.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(n,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=ft(i.defaultText)?i.defaultText(n,i,t):i.defaultText);for(var l={normal:s},c=0;c<uo.length;c++){var u=uo[c],h=e[u];l[u]=Yt(r?r.getFormattedLabel(n,u,null,a,h&&h.get("formatter")):null,s)}return l}function fn(i,e,t,r){t=t||nE;for(var n=i instanceof yi,a=!1,o=0;o<Xf.length;o++){var s=e[Xf[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=n?i:i.getTextContent();if(a){n||(l||(l=new yi,i.setTextContent(l)),i.stateProxy&&(l.stateProxy=i.stateProxy));var c=xL(t,e),u=e.normal,h=!!u.getShallow("show"),d=br(u,r&&r.normal,t,!1,!n);d.text=c.normal,n||i.setTextConfig(Ex(u,t,!1));for(var o=0;o<uo.length;o++){var f=uo[o],s=e[f];if(s){var m=l.ensureState(f),y=!!Yt(s.getShallow("show"),h);if(y!==h&&(m.ignore=!y),m.style=br(s,r&&r[f],t,!0,!n),m.style.text=c[f],!n){var g=i.ensureState(f);g.textConfig=Ex(s,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!h,l.useStyle(d),l.dirty(),t.enableTextSetter&&(gd(l).setLabelText=function(x){var b=xL(t,e,x);S9(l,b)})}else l&&(l.ignore=!0);i.dirty()}function Kr(i,e){e=e||"label";for(var t={normal:i.getModel(e)},r=0;r<uo.length;r++){var n=uo[r];t[n]=i.getModel([n,e])}return t}function br(i,e,t,r,n){var a={};return M1e(a,i,t,r,n),e&&Ce(a,e),a}function Ex(i,e,t){e=e||{};var r={},n,a=i.getShallow("rotate"),o=Yt(i.getShallow("distance"),t?null:5),s=i.getShallow("offset");return n=i.getShallow("position")||(t?null:"inside"),n==="outside"&&(n=e.defaultOutsidePosition||"top"),n!=null&&(r.position=n),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=i.get("color")==="inherit"?e.inheritColor||null:"auto",r}function M1e(i,e,t,r,n){t=t||nE;var a=e.ecModel,o=a&&a.option.textStyle,s=I1e(e),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=e.getModel(["rich",c]);b9(l[c]={},u,o,t,r,n,!1,!0)}}l&&(i.rich=l);var h=e.get("overflow");h&&(i.overflow=h);var d=e.get("minMargin");d!=null&&(i.margin=d),b9(i,e,o,t,r,n,!0,!1)}function I1e(i){for(var e;i&&i!==i.ecModel;){var t=(i.option||nE).rich;if(t){e=e||{};for(var r=si(t),n=0;n<r.length;n++){var a=r[n];e[a]=1}}i=i.parentModel}return e}var x9=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],_9=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],w9=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function b9(i,e,t,r,n,a,o,s){t=!n&&t||nE;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),h=Yt(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),a||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(i.fill=c),u!=null&&(i.stroke=u);var d=Yt(e.getShallow("textBorderWidth"),t.textBorderWidth);d!=null&&(i.lineWidth=d);var f=Yt(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(i.lineDash=f);var m=Yt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);m!=null&&(i.lineDashOffset=m),!n&&h==null&&!s&&(h=r&&r.defaultOpacity),h!=null&&(i.opacity=h),!n&&!a&&i.fill==null&&r.inheritColor&&(i.fill=r.inheritColor);for(var y=0;y<x9.length;y++){var g=x9[y],x=Yt(e.getShallow(g),t[g]);x!=null&&(i[g]=x)}for(var y=0;y<_9.length;y++){var g=_9[y],x=e.getShallow(g);x!=null&&(i[g]=x)}if(i.verticalAlign==null){var b=e.getShallow("baseline");b!=null&&(i.verticalAlign=b)}if(!o||!r.disableBox){for(var y=0;y<w9.length;y++){var g=w9[y],x=e.getShallow(g);x!=null&&(i[g]=x)}var S=e.getShallow("borderType");S!=null&&(i.borderDash=S),(i.backgroundColor==="auto"||i.backgroundColor==="inherit")&&l&&(i.backgroundColor=l),(i.borderColor==="auto"||i.borderColor==="inherit")&&l&&(i.borderColor=l)}}function D0(i,e){var t=e&&e.getModel("textStyle");return bo([i.fontStyle||t&&t.getShallow("fontStyle")||"",i.fontWeight||t&&t.getShallow("fontWeight")||"",(i.fontSize||t&&t.getShallow("fontSize")||12)+"px",i.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var gd=$t();function aE(i,e,t,r){if(i){var n=gd(i);n.prevValue=n.value,n.value=t;var a=e.normal;n.valueAnimation=a.get("valueAnimation"),n.valueAnimation&&(n.precision=a.get("precision"),n.defaultInterpolatedText=r,n.statesModels=e)}}function oE(i,e,t,r,n){var a=gd(i);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Yt(a.interpolatedValue,a.prevValue),l=a.value;function c(u){var h=RC(t,a.precision,s,l,u);a.interpolatedValue=u===1?null:h;var d=xL({labelDataIndex:e,labelFetcher:n,defaultText:o?o(h):h+""},a.statesModels,h);S9(i,d)}i.percent=0,(a.prevValue==null?Ar:Si)(i,{percent:1},r,e,null,c)}var D1e=["textStyle","color"],_L=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],wL=new yi,R1e=function(){function i(){}return i.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(D1e):null)},i.prototype.getFont=function(){return D0({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},i.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<_L.length;r++)t[_L[r]]=this.getShallow(_L[r]);return wL.useStyle(t),wL.update(),wL.getBoundingRect()},i}(),C9=R1e;var bL=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],P1e=gl(bL),E9=function(){function i(){}return i.prototype.getLineStyle=function(e){return P1e(this,e)},i}();var SL=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],L1e=gl(SL),T9=function(){function i(){}return i.prototype.getItemStyle=function(e,t){return L1e(this,e,t)},i}();var pm=function(){function i(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return i.prototype.init=function(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a]},i.prototype.mergeOption=function(e,t){ri(this.option,e,!0)},i.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},i.prototype.getShallow=function(e,t){var r=this.option,n=r==null?r:r[e];if(n==null&&!t){var a=this.parentModel;a&&(n=a.getShallow(e))}return n},i.prototype.getModel=function(e,t){var r=e!=null,n=r?this.parsePath(e):null,a=r?this._doGet(n):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new i(a,t,this.ecModel)},i.prototype.isEmpty=function(){return this.option==null},i.prototype.restoreData=function(){},i.prototype.clone=function(){var e=this.constructor;return new e(Tt(this.option))},i.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},i.prototype.resolveParentPath=function(e){return e},i.prototype.isAnimationEnabled=function(){if(!ki.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},i.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var n=0;n<e.length&&!(e[n]&&(r=r&&typeof r=="object"?r[e[n]]:null,r==null));n++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},i}();g0(pm);U7(pm);jr(pm,E9);jr(pm,T9);jr(pm,k7);jr(pm,C9);var ir=pm;var O1e=Math.round(Math.random()*10);function Lc(i){return[i||"",O1e++].join("_")}function M9(i){var e={};i.registerSubTypeDefaulter=function(t,r){var n=ml(t);e[n.main]=r},i.determineSubType=function(t,r){var n=r.type;if(!n){var a=ml(t).main;i.hasSubTypes(t)&&e[a]&&(n=e[a](r))}return n}}function I9(i,e){i.topologicalTravel=function(a,o,s,l){if(!a.length)return;var c=t(o),u=c.graph,h=c.noEntryList,d={};for(W(a,function(b){d[b]=!0});h.length;){var f=h.pop(),m=u[f],y=!!d[f];y&&(s.call(l,f,m.originalDeps.slice()),delete d[f]),W(m.successor,y?x:g)}W(d,function(){var b="";throw new Error(b)});function g(b){u[b].entryCount--,u[b].entryCount===0&&h.push(b)}function x(b){d[b]=!0,g(b)}};function t(a){var o={},s=[];return W(a,function(l){var c=r(o,l),u=c.originalDeps=e(l),h=n(u,a);c.entryCount=h.length,c.entryCount===0&&s.push(l),W(h,function(d){qt(c.predecessor,d)<0&&c.predecessor.push(d);var f=r(o,d);qt(f.successor,d)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function n(a,o){var s=[];return W(a,function(l){qt(o,l)>=0&&s.push(l)}),s}}function Cs(i,e){return ri(ri({},i,!0),e,!0)}var B9={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}};var D9={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE",custom:"\u81EA\u5B9A\u4E49\u56FE\u8868",chart:"\u56FE\u8868"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var lE="ZH",EL="EN",R0=EL,sE={},TL={},cE=ki.domSupported?function(){var i=(document.documentElement.lang||navigator.language||navigator.browserLanguage||R0).toUpperCase();return i.indexOf(lE)>-1?lE:R0}():R0;function R9(i,e){i=i.toUpperCase(),TL[i]=new ir(e),sE[i]=e}function P9(i){if(Ye(i)){var e=sE[i.toUpperCase()]||{};return i===lE||i===EL?Tt(e):ri(Tt(e),Tt(sE[R0]),!1)}else return ri(Tt(i),Tt(sE[R0]),!1)}function Tx(i){return TL[i]}function L9(){return TL[R0]}R9(EL,B9);R9(lE,D9);var hE=1e3,dE=hE*60,L0=dE*60,Zl=L0*24,IL=Zl*365,Mx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},uE="{yyyy}-{MM}-{dd}",BL={year:"{yyyy}",month:"{yyyy}-{MM}",day:uE,hour:uE+" "+Mx.hour,minute:uE+" "+Mx.minute,second:uE+" "+Mx.second,millisecond:Mx.none},ML=["year","month","day","hour","minute","second","millisecond"],DL=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function vd(i,e){return i+="","0000".substr(0,e-i.length)+i}function mm(i){switch(i){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return i}}function O9(i){return i===mm(i)}function F9(i){switch(i){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function gm(i,e,t,r){var n=ks(i),a=n[fE(t)](),o=n[Am(t)]()+1,s=Math.floor((o-1)/3)+1,l=n[Ix(t)](),c=n["get"+(t?"UTC":"")+"Day"](),u=n[P0(t)](),h=(u-1)%12+1,d=n[Bx(t)](),f=n[Dx(t)](),m=n[Rx(t)](),y=r instanceof ir?r:Tx(r||cE)||L9(),g=y.getModel("time"),x=g.get("month"),b=g.get("monthAbbr"),S=g.get("dayOfWeek"),E=g.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,vd(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,x[o-1]).replace(/{MMM}/g,b[o-1]).replace(/{MM}/g,vd(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,vd(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[c]).replace(/{ee}/g,E[c]).replace(/{e}/g,c+"").replace(/{HH}/g,vd(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,vd(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,vd(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,vd(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,vd(m,3)).replace(/{S}/g,m+"")}function N9(i,e,t,r,n){var a=null;if(Ye(t))a=t;else if(ft(t))a=t(i.value,e,{level:i.level});else{var o=Ce({},Mx);if(i.level>0)for(var s=0;s<ML.length;++s)o[ML[s]]="{primary|"+o[ML[s]]+"}";var l=t?t.inherit===!1?t:At(t,o):o,c=U9(i.value,n);if(l[c])a=l[c];else if(l.inherit){for(var u=DL.indexOf(c),s=u-1;s>=0;--s)if(l[c]){a=l[c];break}a=a||o.none}if(Ee(a)){var h=i.level==null?0:i.level>=0?i.level:a.length+i.level;h=Math.min(h,a.length-1),a=a[h]}}return gm(new Date(i.value),a,n,r)}function U9(i,e){var t=ks(i),r=t[Am(e)]()+1,n=t[Ix(e)](),a=t[P0(e)](),o=t[Bx(e)](),s=t[Dx(e)](),l=t[Rx(e)](),c=l===0,u=c&&s===0,h=u&&o===0,d=h&&a===0,f=d&&n===1,m=f&&r===1;return m?"year":f?"month":d?"day":h?"hour":u?"minute":c?"second":"millisecond"}function RL(i,e,t){var r=mi(i)?ks(i):i;switch(e=e||U9(i,t),e){case"year":return r[fE(t)]();case"half-year":return r[Am(t)]()>=6?1:0;case"quarter":return Math.floor((r[Am(t)]()+1)/4);case"month":return r[Am(t)]();case"day":return r[Ix(t)]();case"half-day":return r[P0(t)]()/24;case"hour":return r[P0(t)]();case"minute":return r[Bx(t)]();case"second":return r[Dx(t)]();case"millisecond":return r[Rx(t)]()}}function fE(i){return i?"getUTCFullYear":"getFullYear"}function Am(i){return i?"getUTCMonth":"getMonth"}function Ix(i){return i?"getUTCDate":"getDate"}function P0(i){return i?"getUTCHours":"getHours"}function Bx(i){return i?"getUTCMinutes":"getMinutes"}function Dx(i){return i?"getUTCSeconds":"getSeconds"}function Rx(i){return i?"getUTCMilliseconds":"getMilliseconds"}function k9(i){return i?"setUTCFullYear":"setFullYear"}function PL(i){return i?"setUTCMonth":"setMonth"}function LL(i){return i?"setUTCDate":"setDate"}function OL(i){return i?"setUTCHours":"setHours"}function FL(i){return i?"setUTCMinutes":"setMinutes"}function NL(i){return i?"setUTCSeconds":"setSeconds"}function UL(i){return i?"setUTCMilliseconds":"setMilliseconds"}function zL(i){if(!ax(i))return Ye(i)?i:"-";var e=(i+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function pE(i,e){return i=(i||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&i&&(i=i.charAt(0).toUpperCase()+i.slice(1)),i}var Mu=e0;function AE(i,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(u){return u&&bo(u)?u:"-"}function a(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var o=e==="time",s=i instanceof Date;if(o||s){var l=o?ks(i):i;if(isNaN(+l)){if(s)return"-"}else return gm(l,r,t)}if(e==="ordinal")return Uy(i)?n(i):mi(i)&&a(i)?i+"":"-";var c=Ic(i);return a(c)?zL(c):Uy(i)?n(i):typeof i=="boolean"?i+"":"-"}var z9=["a","b","c","d","e","f","g"],kL=function(i,e){return"{"+i+(e??"")+"}"};function mE(i,e,t){Ee(e)||(e=[e]);var r=e.length;if(!r)return"";for(var n=e[0].$vars||[],a=0;a<n.length;a++){var o=z9[a];i=i.replace(kL(o),kL(o,0))}for(var s=0;s<r;s++)for(var l=0;l<n.length;l++){var c=e[s][n[l]];i=i.replace(kL(z9[l],s),t?Zo(c):c)}return i}function V9(i,e,t){return W(e,function(r,n){i=i.replace("{"+n+"}",t?Zo(r):r)}),i}function H9(i,e){var t=Ye(i)?{color:i,extraCssText:e}:i||{},r=t.color,n=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Zo(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Zo(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Iu(i,e){return e=e||"transparent",Ye(i)?i:yt(i)&&i.colorStops&&(i.colorStops[0]||{}).color||e}function vm(i,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=i}else window.open(i,e)}var gE=W,VL=["left","right","top","bottom","width","height"],ym=[["width","left","right"],["height","top","bottom"]];function HL(i,e,t,r,n){var a=0,o=0;r==null&&(r=1/0),n==null&&(n=1/0);var s=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),h=e.childAt(c+1),d=h&&h.getBoundingRect(),f,m;if(i==="horizontal"){var y=u.width+(d?-d.x+u.x:0);f=a+y,f>r||l.newline?(a=0,f=y,o+=s+t,s=u.height):s=Math.max(s,u.height)}else{var g=u.height+(d?-d.y+u.y:0);m=o+g,m>n||l.newline?(a+=s+t,o=0,m=g,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),i==="horizontal"?a=f+t:o=m+t)})}var Bu=HL,vWe=Ut(HL,"vertical"),yWe=Ut(HL,"horizontal");function Q9(i,e,t){var r=e.width,n=e.height,a=ot(i.left,r),o=ot(i.top,n),s=ot(i.right,r),l=ot(i.bottom,n);return(isNaN(a)||isNaN(parseFloat(i.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(i.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(i.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(i.bottom)))&&(l=n),t=Mu(t||0),{width:Math.max(s-a-t[1]-t[3],0),height:Math.max(l-o-t[0]-t[2],0)}}function Fr(i,e,t){t=Mu(t||0);var r=e.width,n=e.height,a=ot(i.left,r),o=ot(i.top,n),s=ot(i.right,r),l=ot(i.bottom,n),c=ot(i.width,r),u=ot(i.height,n),h=t[2]+t[0],d=t[1]+t[3],f=i.aspect;switch(isNaN(c)&&(c=r-s-d-a),isNaN(u)&&(u=n-l-h-o),f!=null&&(isNaN(c)&&isNaN(u)&&(f>r/n?c=r*.8:u=n*.8),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(a)&&(a=r-s-c-d),isNaN(o)&&(o=n-l-u-h),i.left||i.right){case"center":a=r/2-c/2-t[3];break;case"right":a=r-c-d;break}switch(i.top||i.bottom){case"middle":case"center":o=n/2-u/2-t[0];break;case"bottom":o=n-u-h;break}a=a||0,o=o||0,isNaN(c)&&(c=r-d-a-(s||0)),isNaN(u)&&(u=n-h-o-(l||0));var m=new Ht(a+t[3],o+t[0],c,u);return m.margin=t,m}function Zf(i,e,t,r,n,a){var o=!n||!n.hv||n.hv[0],s=!n||!n.hv||n.hv[1],l=n&&n.boundingMode||"all";if(a=a||i,a.x=i.x,a.y=i.y,!o&&!s)return!1;var c;if(l==="raw")c=i.type==="group"?new Ht(0,0,+e.width||0,+e.height||0):i.getBoundingRect();else if(c=i.getBoundingRect(),i.needLocalTransform()){var u=i.getLocalTransform();c=c.clone(),c.applyTransform(u)}var h=Fr(At({width:c.width,height:c.height},e),t,r),d=o?h.x-c.x:0,f=s?h.y-c.y:0;return l==="raw"?(a.x=d,a.y=f):(a.x+=d,a.y+=f),a===i&&i.markRedraw(),!0}function G9(i,e){return i[ym[e][0]]!=null||i[ym[e][1]]!=null&&i[ym[e][2]]!=null}function Jf(i){var e=i.layoutMode||i.constructor.layoutMode;return yt(e)?e:e?{type:e}:null}function _l(i,e,t){var r=t&&t.ignoreSize;!Ee(r)&&(r=[r,r]);var n=o(ym[0],0),a=o(ym[1],1);c(ym[0],i,n),c(ym[1],i,a);function o(u,h){var d={},f=0,m={},y=0,g=2;if(gE(u,function(S){m[S]=i[S]}),gE(u,function(S){s(e,S)&&(d[S]=m[S]=e[S]),l(d,S)&&f++,l(m,S)&&y++}),r[h])return l(e,u[1])?m[u[2]]=null:l(e,u[2])&&(m[u[1]]=null),m;if(y===g||!f)return m;if(f>=g)return d;for(var x=0;x<u.length;x++){var b=u[x];if(!s(d,b)&&s(i,b)){d[b]=i[b];break}}return d}function s(u,h){return u.hasOwnProperty(h)}function l(u,h){return u[h]!=null&&u[h]!=="auto"}function c(u,h,d){gE(u,function(f){h[f]=d[f]})}}function Oc(i){return QL({},i)}function QL(i,e){return e&&i&&gE(VL,function(t){e.hasOwnProperty(t)&&(i[t]=e[t])}),i}var F1e=$t(),O0=function(i){le(e,i);function e(t,r,n){var a=i.call(this,t,r,n)||this;return a.uid=Lc("ec_cpt_model"),a}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=Jf(this),a=n?Oc(t):{},o=r.getTheme();ri(t,o.get(this.mainType)),ri(t,this.getDefaultOption()),n&&_l(t,a,n)},e.prototype.mergeOption=function(t,r){ri(this.option,t,!0);var n=Jf(this);n&&_l(this.option,t,n)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!N7(t))return t.defaultOption;var r=F1e(this);if(!r.defaultOption){for(var n=[],a=t;a;){var o=a.prototype.defaultOption;o&&n.push(o),a=a.superClass}for(var s={},l=n.length-1;l>=0;l--)s=ri(s,n[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var n=t+"Index",a=t+"Id";return Hf(this.ecModel,t,{index:this.get(n,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(ir);PC(O0,ir);Qf(O0);M9(O0);I9(O0,N1e);function N1e(i){var e=[];return W(O0.getClassesByMainType(i),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Me(e,function(t){return ml(t).main}),i!=="dataset"&&qt(e,"dataset")<=0&&e.unshift("dataset"),e}var xi=O0;var W9="";typeof navigator<"u"&&(W9=navigator.platform||"");var F0="rgba(0, 0, 0, 0.2)",j9={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:F0,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:F0,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:F0,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:F0,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:F0,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:F0,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:W9.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var vE=ct(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ko="original",Va="arrayRows",rs="objectRows",Jl="keyedColumns",$l="typedArray",GL="unknown",wl="column",yd="row";var Mo={Must:1,Might:2,Not:3},K9=$t();function X9(i){K9(i).datasetMap=ct()}function yE(i,e,t){var r={},n=xE(e);if(!n||!i)return r;var a=[],o=[],s=e.ecModel,l=K9(s).datasetMap,c=n.uid+"_"+t.seriesLayoutBy,u,h;i=i.slice(),W(i,function(y,g){var x=yt(y)?y:i[g]={name:y};x.type==="ordinal"&&u==null&&(u=g,h=m(x)),r[x.name]=[]});var d=l.get(c)||l.set(c,{categoryWayDim:h,valueWayDim:0});W(i,function(y,g){var x=y.name,b=m(y);if(u==null){var S=d.valueWayDim;f(r[x],S,b),f(o,S,b),d.valueWayDim+=b}else if(u===g)f(r[x],0,b),f(a,0,b);else{var S=d.categoryWayDim;f(r[x],S,b),f(o,S,b),d.categoryWayDim+=b}});function f(y,g,x){for(var b=0;b<x;b++)y.push(g+b)}function m(y){var g=y.dimsDef;return g?g.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function N0(i,e,t){var r={},n=xE(i);if(!n)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===rs||a===Jl)&&W(o,function(u,h){(yt(u)?u.name:u)==="name"&&(s=h)});var l=function(){for(var u={},h={},d=[],f=0,m=Math.min(5,t);f<m;f++){var y=q9(e.data,a,e.seriesLayoutBy,o,e.startIndex,f);d.push(y);var g=y===Mo.Not;if(g&&u.v==null&&f!==s&&(u.v=f),(u.n==null||u.n===u.v||!g&&d[u.n]===Mo.Not)&&(u.n=f),x(u)&&d[u.n]!==Mo.Not)return u;g||(y===Mo.Might&&h.v==null&&f!==s&&(h.v=f),(h.n==null||h.n===h.v)&&(h.n=f))}function x(b){return b.v!=null&&b.n!=null}return x(u)?u:x(h)?h:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function xE(i){var e=i.get("data",!0);if(!e)return Hf(i.ecModel,"dataset",{index:i.get("datasetIndex",!0),id:i.get("datasetId",!0)},Jr).models[0]}function Y9(i){return!i.get("transform",!0)&&!i.get("fromTransformResult",!0)?[]:Hf(i.ecModel,"dataset",{index:i.get("fromDatasetIndex",!0),id:i.get("fromDatasetId",!0)},Jr).models}function _E(i,e){return q9(i.data,i.sourceFormat,i.seriesLayoutBy,i.dimensionsDefine,i.startIndex,e)}function q9(i,e,t,r,n,a){var o,s=5;if(ka(i))return Mo.Not;var l,c;if(r){var u=r[a];yt(u)?(l=u.name,c=u.type):Ye(u)&&(l=u)}if(c!=null)return c==="ordinal"?Mo.Must:Mo.Not;if(e===Va){var h=i;if(t===yd){for(var d=h[a],f=0;f<(d||[]).length&&f<s;f++)if((o=E(d[n+f]))!=null)return o}else for(var f=0;f<h.length&&f<s;f++){var m=h[n+f];if(m&&(o=E(m[a]))!=null)return o}}else if(e===rs){var y=i;if(!l)return Mo.Not;for(var f=0;f<y.length&&f<s;f++){var g=y[f];if(g&&(o=E(g[l]))!=null)return o}}else if(e===Jl){var x=i;if(!l)return Mo.Not;var d=x[l];if(!d||ka(d))return Mo.Not;for(var f=0;f<d.length&&f<s;f++)if((o=E(d[f]))!=null)return o}else if(e===ko)for(var b=i,f=0;f<b.length&&f<s;f++){var g=b[f],S=wu(g);if(!Ee(S))return Mo.Not;if((o=E(S[a]))!=null)return o}function E(D){var B=Ye(D);if(D!=null&&isFinite(D)&&D!=="")return B?Mo.Might:Mo.Not;if(B&&D!=="-")return Mo.Must}return Mo.Not}var WL=ct();function Z9(i,e){In(WL.get(i)==null&&e),WL.set(i,e)}function J9(i,e,t){var r=WL.get(e);if(!r)return t;var n=r(i);if(!n)return t;if(!1)for(var a;a<n.length;a++);return t.concat(n)}var $9=$t(),U1e=$t(),Lx=function(){function i(){}return i.prototype.getColorFromPalette=function(e,t,r){var n=cr(this.get("color",!0)),a=this.get("colorLayer",!0);return eW(this,$9,n,a,e,t,r)},i.prototype.clearColorPalette=function(){z1e(this,$9)},i}();function Ox(i,e,t,r){var n=cr(i.get(["aria","decal","decals"]));return eW(i,U1e,n,null,e,t,r)}function k1e(i,e){for(var t=i.length,r=0;r<t;r++)if(i[r].length>e)return i[r];return i[t-1]}function eW(i,e,t,r,n,a,o){a=a||i;var s=e(a),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(n))return c[n];var u=o==null||!r?t:k1e(r,o);if(u=u||t,!(!u||!u.length)){var h=u[l];return n&&(c[n]=h),s.paletteIdx=(l+1)%u.length,h}}function z1e(i,e){e(i).paletteIdx=0,e(i).paletteNameMap={}}var wE,Fx,tW,iW="\0_ec_inner",V1e=1;var oW=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.init=function(t,r,n,a,o,s){a=a||{},this.option=null,this._theme=new ir(a),this._locale=new ir(o),this._optionManager=s},e.prototype.setOption=function(t,r,n){var a=aW(r);this._optionManager.setOption(t,n,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,aW(r))},e.prototype._resetOption=function(t,r){var n=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?tW(this,o):(this.restoreData(),this._mergeOption(o,r)),n=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(n=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&W(l,function(c){n=!0,this._mergeOption(c,r)},this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var n=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=ct(),c=r&&r.replaceMergeMainTypeMap;X9(this),W(t,function(h,d){h!=null&&(xi.hasClass(d)?d&&(s.push(d),l.set(d,!0)):n[d]=n[d]==null?Tt(h):ri(n[d],h,!0))}),c&&c.each(function(h,d){xi.hasClass(d)&&!l.get(d)&&(s.push(d),l.set(d,!0))}),xi.topologicalTravel(s,xi.getAllClassMainTypes(),u,this);function u(h){var d=J9(this,h,cr(t[h])),f=a.get(h),m=f?c&&c.get(h)?"replaceMerge":"normalMerge":"replaceAll",y=DC(f,d,m);D7(y,h,xi),n[h]=null,a.set(h,null),o.set(h,0);var g=[],x=[],b=0,S,E;W(y,function(D,B){var F=D.existing,H=D.newOption;if(!H)F&&(F.mergeOption({},this),F.optionUpdated({},!1));else{var U=h==="series",k=xi.getClass(h,D.keyInfo.subType,!U);if(!k){if(!1)var j,q;return}if(h==="tooltip"){if(S)return;S=!0}if(F&&F.constructor===k)F.name=D.keyInfo.name,F.mergeOption(H,this),F.optionUpdated(H,!1);else{var X=Ce({componentIndex:B},D.keyInfo);F=new k(H,this,this,X),Ce(F,X),D.brandNew&&(F.__requireNewView=!0),F.init(H,this,this),F.optionUpdated(null,!0)}}F?(g.push(F.option),x.push(F),b++):(g.push(void 0),x.push(void 0))},this),n[h]=g,a.set(h,x),o.set(h,b),h==="series"&&wE(this)}this._seriesIndices||wE(this)},e.prototype.getOption=function(){var t=Tt(this.option);return W(t,function(r,n){if(xi.hasClass(n)){for(var a=cr(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!A0(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,t[n]=a}}),delete t[iW],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var n=this._componentsMap.get(t);if(n){var a=n[r||0];if(a)return a;if(r==null){for(var o=0;o<n.length;o++)if(n[o])return n[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var n=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return n!=null?(l=[],W(cr(n),function(c){s[c]&&l.push(s[c])})):a!=null?l=rW("id",a,s):o!=null?l=rW("name",o,s):l=Xi(s,function(c){return!!c}),nW(l,t)},e.prototype.findComponents=function(t){var r=t.query,n=t.mainType,a=s(r),o=a?this.queryComponents(a):Xi(this._componentsMap.get(n),function(c){return!!c});return l(nW(o,t));function s(c){var u=n+"Index",h=n+"Id",d=n+"Name";return c&&(c[u]!=null||c[h]!=null||c[d]!=null)?{mainType:n,index:c[u],id:c[h],name:c[d]}:null}function l(c){return t.filter?Xi(c,t.filter):c}},e.prototype.eachComponent=function(t,r,n){var a=this._componentsMap;if(ft(t)){var o=r,s=t;a.each(function(h,d){for(var f=0;h&&f<h.length;f++){var m=h[f];m&&s.call(o,d,m,m.componentIndex)}})}else for(var l=Ye(t)?a.get(t):yt(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(n,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=kn(t,null);return Xi(this._componentsMap.get("series"),function(n){return!!n&&r!=null&&n.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Xi(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return Xi(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){Fx(this),W(this._seriesIndices,function(n){var a=this._componentsMap.get("series")[n];t.call(r,a,n)},this)},e.prototype.eachRawSeries=function(t,r){W(this._componentsMap.get("series"),function(n){n&&t.call(r,n,n.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,n){Fx(this),W(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(n,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,n){return W(this.getSeriesByType(t),r,n)},e.prototype.isSeriesFiltered=function(t){return Fx(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){Fx(this);var n=[];W(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&n.push(a)},this),this._seriesIndices=n,this._seriesIndicesMap=ct(n)},e.prototype.restoreData=function(t){wE(this);var r=this._componentsMap,n=[];r.each(function(a,o){xi.hasClass(o)&&n.push(o)}),xi.topologicalTravel(n,xi.getAllClassMainTypes(),function(a){W(r.get(a),function(o){o&&(a!=="series"||!H1e(o,t))&&o.restoreData()})})},e.internalField=function(){wE=function(t){var r=t._seriesIndices=[];W(t._componentsMap.get("series"),function(n){n&&r.push(n.componentIndex)}),t._seriesIndicesMap=ct(r)},Fx=function(t){},tW=function(t,r){t.option={},t.option[iW]=V1e,t._componentsMap=ct({series:[]}),t._componentsCount=ct();var n=r.aria;yt(n)&&n.enabled==null&&(n.enabled=!0),Q1e(r,t._theme.option),ri(r,j9,!1),t._mergeOption(r,null)}}(),e}(ir);function H1e(i,e){if(e){var t=e.seriesIndex,r=e.seriesId,n=e.seriesName;return t!=null&&i.componentIndex!==t||r!=null&&i.id!==r||n!=null&&i.name!==n}}function Q1e(i,e){var t=i.color&&!i.colorLayer;W(e,function(r,n){n==="colorLayer"&&t||xi.hasClass(n)||(typeof r=="object"?i[n]=i[n]?ri(i[n],r,!1):Tt(r):i[n]==null&&(i[n]=r))})}function rW(i,e,t){if(Ee(e)){var r=ct();return W(e,function(a){if(a!=null){var o=kn(a,null);o!=null&&r.set(a,!0)}}),Xi(t,function(a){return a&&r.get(a[i])})}else{var n=kn(e,null);return Xi(t,function(a){return a&&n!=null&&a[i]===n})}}function nW(i,e){return e.hasOwnProperty("subType")?Xi(i,function(t){return t&&t.subType===e.subType}):i}function aW(i){var e=ct();return i&&W(cr(i.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}jr(oW,Lx);var bE=oW;var G1e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],W1e=function(){function i(e){W(G1e,function(t){this[t]=st(e[t],e)},this)}return i}(),SE=W1e;var jL={},j1e=function(){function i(){this._coordinateSystems=[]}return i.prototype.create=function(e,t){var r=[];W(jL,function(n,a){var o=n.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},i.prototype.update=function(e,t){W(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},i.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},i.register=function(e,t){jL[e]=t},i.get=function(e){return jL[e]},i}(),xd=j1e;var K1e=/^(min|max)?(.+)$/,X1e=function(){function i(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return i.prototype.setOption=function(e,t,r){e&&(W(cr(e.series),function(o){o&&o.data&&ka(o.data)&&DA(o.data)}),W(cr(e.dataset),function(o){o&&o.source&&ka(o.source)&&DA(o.source)})),e=Tt(e);var n=this._optionBackup,a=Y1e(e,t,!n);this._newBaseOption=a.baseOption,n?(a.timelineOptions.length&&(n.timelineOptions=a.timelineOptions),a.mediaList.length&&(n.mediaList=a.mediaList),a.mediaDefault&&(n.mediaDefault=a.mediaDefault)):this._optionBackup=a},i.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Tt(e?t.baseOption:this._newBaseOption)},i.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var n=e.getComponent("timeline");n&&(t=Tt(r[n.getCurrentIndex()]))}return t},i.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),n=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!n.length&&!a)return s;for(var l=0,c=n.length;l<c;l++)q1e(n[l].query,t,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!J1e(o,this._currentMediaIndices)&&(s=Me(o,function(u){return Tt(u===-1?a.option:n[u].option)})),this._currentMediaIndices=o,s},i}();function Y1e(i,e,t){var r=[],n,a,o=i.baseOption,s=i.timeline,l=i.options,c=i.media,u=!!i.media,h=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((h||u)&&(i.options=i.media=null),a=i),u&&Ee(c)&&W(c,function(f){f&&f.option&&(f.query?r.push(f):n||(n=f))}),d(a),W(l,function(f){return d(f)}),W(r,function(f){return d(f.option)});function d(f){W(e,function(m){m(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:n,mediaList:r}}function q1e(i,e,t){var r={width:e,height:t,aspectratio:e/t},n=!0;return W(i,function(a,o){var s=o.match(K1e);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();Z1e(r[c],a,l)||(n=!1)}}),n}function Z1e(i,e,t){return t==="min"?i>=e:t==="max"?i<=e:i===e}function J1e(i,e){return i.join(",")===e.join(",")}var sW=X1e;var Du=W,Ux=yt,lW=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function KL(i){var e=i&&i.itemStyle;if(e)for(var t=0,r=lW.length;t<r;t++){var n=lW[t],a=e.normal,o=e.emphasis;a&&a[n]&&(i[n]=i[n]||{},i[n].normal?ri(i[n].normal,a[n]):i[n].normal=a[n],a[n]=null),o&&o[n]&&(i[n]=i[n]||{},i[n].emphasis?ri(i[n].emphasis,o[n]):i[n].emphasis=o[n],o[n]=null)}}function Es(i,e,t){if(i&&i[e]&&(i[e].normal||i[e].emphasis)){var r=i[e].normal,n=i[e].emphasis;r&&(t?(i[e].normal=i[e].emphasis=null,At(i[e],r)):i[e]=r),n&&(i.emphasis=i.emphasis||{},i.emphasis[e]=n,n.focus&&(i.emphasis.focus=n.focus),n.blurScope&&(i.emphasis.blurScope=n.blurScope))}}function Nx(i){Es(i,"itemStyle"),Es(i,"lineStyle"),Es(i,"areaStyle"),Es(i,"label"),Es(i,"labelLine"),Es(i,"upperLabel"),Es(i,"edgeLabel")}function to(i,e){var t=Ux(i)&&i[e],r=Ux(t)&&t.textStyle;if(r)for(var n=0,a=LP.length;n<a;n++){var o=LP[n];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Fc(i){i&&(Nx(i),to(i,"label"),i.emphasis&&to(i.emphasis,"label"))}function $1e(i){if(Ux(i)){KL(i),Nx(i),to(i,"label"),to(i,"upperLabel"),to(i,"edgeLabel"),i.emphasis&&(to(i.emphasis,"label"),to(i.emphasis,"upperLabel"),to(i.emphasis,"edgeLabel"));var e=i.markPoint;e&&(KL(e),Fc(e));var t=i.markLine;t&&(KL(t),Fc(t));var r=i.markArea;r&&Fc(r);var n=i.data;if(i.type==="graph"){n=n||i.nodes;var a=i.links||i.edges;if(a&&!ka(a))for(var o=0;o<a.length;o++)Fc(a[o]);W(i.categories,function(c){Nx(c)})}if(n&&!ka(n))for(var o=0;o<n.length;o++)Fc(n[o]);if(e=i.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)Fc(s[o]);if(t=i.markLine,t&&t.data)for(var l=t.data,o=0;o<l.length;o++)Ee(l[o])?(Fc(l[o][0]),Fc(l[o][1])):Fc(l[o]);i.type==="gauge"?(to(i,"axisLabel"),to(i,"title"),to(i,"detail")):i.type==="treemap"?(Es(i.breadcrumb,"itemStyle"),W(i.levels,function(c){Nx(c)})):i.type==="tree"&&Nx(i.leaves)}}function _d(i){return Ee(i)?i:i?[i]:[]}function cW(i){return(Ee(i)?i[0]:i)||{}}function XL(i,e){Du(_d(i.series),function(r){Ux(r)&&$1e(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Du(t,function(r){Du(_d(i[r]),function(n){n&&(to(n,"axisLabel"),to(n.axisPointer,"label"))})}),Du(_d(i.parallel),function(r){var n=r&&r.parallelAxisDefault;to(n,"axisLabel"),to(n&&n.axisPointer,"label")}),Du(_d(i.calendar),function(r){Es(r,"itemStyle"),to(r,"dayLabel"),to(r,"monthLabel"),to(r,"yearLabel")}),Du(_d(i.radar),function(r){to(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Du(_d(i.geo),function(r){Ux(r)&&(Fc(r),Du(_d(r.regions),function(n){Fc(n)}))}),Du(_d(i.timeline),function(r){Fc(r),Es(r,"label"),Es(r,"itemStyle"),Es(r,"controlStyle",!0);var n=r.data;Ee(n)&&W(n,function(a){yt(a)&&(Es(a,"label"),Es(a,"itemStyle"))})}),Du(_d(i.toolbox),function(r){Es(r,"iconStyle"),Du(r.feature,function(n){Es(n,"iconStyle")})}),to(cW(i.axisPointer),"label"),to(cW(i.tooltip).axisPointer,"label")}function eye(i,e){for(var t=e.split(","),r=i,n=0;n<t.length&&(r=r&&r[t[n]],r!=null);n++);return r}function tye(i,e,t,r){for(var n=e.split(","),a=i,o,s=0;s<n.length-1;s++)o=n[s],a[o]==null&&(a[o]={}),a=a[o];(r||a[n[s]]==null)&&(a[n[s]]=t)}function uW(i){i&&W(iye,function(e){e[0]in i&&!(e[1]in i)&&(i[e[1]]=i[e[0]])})}var iye=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],rye=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],YL=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function kx(i){var e=i&&i.itemStyle;if(e)for(var t=0;t<YL.length;t++){var r=YL[t][1],n=YL[t][0];e[r]!=null&&(e[n]=e[r])}}function hW(i){i&&i.alignTo==="edge"&&i.margin!=null&&i.edgeDistance==null&&(i.edgeDistance=i.margin)}function dW(i){i&&i.downplay&&!i.blur&&(i.blur=i.downplay)}function nye(i){i&&i.focusNodeAdjacency!=null&&(i.emphasis=i.emphasis||{},i.emphasis.focus==null&&(i.emphasis.focus="adjacency"))}function fW(i,e){if(i)for(var t=0;t<i.length;t++)e(i[t]),i[t]&&fW(i[t].children,e)}function CE(i,e){XL(i,e),i.series=cr(i.series),W(i.series,function(t){if(yt(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),hW(t.label);var n=t.data;if(n&&!ka(n))for(var a=0;a<n.length;a++)hW(n[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=eye(t,"pointer.color");o!=null&&tye(t,"itemStyle.color",o)}else if(r==="bar"){kx(t),kx(t.backgroundStyle),kx(t.emphasis);var n=t.data;if(n&&!ka(n))for(var a=0;a<n.length;a++)typeof n[a]=="object"&&(kx(n[a]),kx(n[a]&&n[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),dW(t),fW(t.data,dW)}else r==="graph"||r==="sankey"?nye(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&At(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),uW(t)}}),i.dataRange&&(i.visualMap=i.dataRange),W(rye,function(t){var r=i[t];r&&(Ee(r)||(r=[r]),W(r,function(n){uW(n)}))})}function qL(i){var e=ct();i.eachSeries(function(t){var r=t.get("stack");if(r){var n=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;n.length&&a.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(o)}}),e.each(aye)}function aye(i){W(i,function(e,t){var r=[],n=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(c,u,h){var d=o.get(e.stackedDimension,h);if(isNaN(d))return n;var f,m;s?m=o.getRawIndex(h):f=o.get(e.stackedByDimension,h);for(var y=NaN,g=t-1;g>=0;g--){var x=i[g];if(s||(m=x.data.rawIndexOf(x.stackedByDimension,f)),m>=0){var b=x.data.getByRawIndex(x.stackResultDimension,m);if(l==="all"||l==="positive"&&b>0||l==="negative"&&b<0||l==="samesign"&&d>=0&&b>0||l==="samesign"&&d<=0&&b<0){d=x7(d,b),y=b;break}}}return r[0]=d,r[1]=y,r})})}var EE=function(){function i(e){this.data=e.data||(e.sourceFormat===Jl?{}:[]),this.sourceFormat=e.sourceFormat||GL,this.seriesLayoutBy=e.seriesLayoutBy||wl,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var n=t[r];n.type==null&&_E(this,r)===Mo.Must&&(n.type="ordinal")}}return i}();function U0(i){return i instanceof EE}function zx(i,e,t){t=t||ZL(i);var r=e.seriesLayoutBy,n=oye(i,t,r,e.sourceHeader,e.dimensions),a=new EE({data:i,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Tt(e)});return a}function k0(i){return new EE({data:i,sourceFormat:ka(i)?$l:ko})}function mW(i){return new EE({data:i.data,sourceFormat:i.sourceFormat,seriesLayoutBy:i.seriesLayoutBy,dimensionsDefine:Tt(i.dimensionsDefine),startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount})}function ZL(i){var e=GL;if(ka(i))e=$l;else if(Ee(i)){i.length===0&&(e=Va);for(var t=0,r=i.length;t<r;t++){var n=i[t];if(n!=null){if(Ee(n)||ka(n)){e=Va;break}else if(yt(n)){e=rs;break}}}}else if(yt(i)){for(var a in i)if(Mt(i,a)&&Sa(i[a])){e=Jl;break}}return e}function oye(i,e,t,r,n){var a,o;if(!i)return{dimensionsDefine:pW(n),startIndex:o,dimensionsDetectedCount:a};if(e===Va){var s=i;r==="auto"||r==null?AW(function(c){c!=null&&c!=="-"&&(Ye(c)?o==null&&(o=1):o=0)},t,s,10):o=mi(r)?r:r?1:0,!n&&o===1&&(n=[],AW(function(c,u){n[u]=c!=null?c+"":""},t,s,1/0)),a=n?n.length:t===yd?s.length:s[0]?s[0].length:null}else if(e===rs)n||(n=sye(i));else if(e===Jl)n||(n=[],W(i,function(c,u){n.push(u)}));else if(e===ko){var l=wu(i[0]);a=Ee(l)&&l.length||1}return{startIndex:o,dimensionsDefine:pW(n),dimensionsDetectedCount:a}}function sye(i){for(var e=0,t;e<i.length&&!(t=i[e++]););if(t)return si(t)}function pW(i){if(i){var e=ct();return Me(i,function(t,r){t=yt(t)?t:{name:t};var n={name:t.name,displayName:t.displayName,type:t.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var a=e.get(n.name);return a?n.name+="-"+a.count++:e.set(n.name,{count:1}),n})}}function AW(i,e,t,r){if(e===yd)for(var n=0;n<t.length&&n<r;n++)i(t[n]?t[n][0]:null,n);else for(var a=t[0]||[],n=0;n<a.length&&n<r;n++)i(a[n],n)}function TE(i){var e=i.sourceFormat;return e===rs||e===Jl}var xm,_m,wm,gW,vW,ME=function(){function i(e,t){var r=U0(e)?e:k0(e);this._source=r;var n=this._data=r.data;r.sourceFormat===$l&&(this._offset=0,this._dimSize=t,this._data=n),vW(this,n,r)}return i.prototype.getSource=function(){return this._source},i.prototype.count=function(){return 0},i.prototype.getItem=function(e,t){},i.prototype.appendData=function(e){},i.prototype.clean=function(){},i.protoInitialize=function(){var e=i.prototype;e.pure=!1,e.persistent=!0}(),i.internalField=function(){var e;vW=function(o,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,h=l.startIndex,d=l.dimensionsDefine,f=gW[i3(c,u)];if(Ce(o,f),c===$l)o.getItem=t,o.count=n,o.fillStorage=r;else{var m=$L(c,u);o.getItem=st(m,null,s,h,d);var y=e3(c,u);o.count=st(y,null,s,h,d)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*o,h=0;h<c;h++)s[h]=l[u+h];return s},r=function(o,s,l,c){for(var u=this._data,h=this._dimSize,d=0;d<h;d++){for(var f=c[d],m=f[0]==null?1/0:f[0],y=f[1]==null?-1/0:f[1],g=s-o,x=l[d],b=0;b<g;b++){var S=u[b*h+d];x[o+b]=S,S<m&&(m=S),S>y&&(y=S)}f[0]=m,f[1]=y}},n=function(){return this._data?this._data.length/this._dimSize:0};gW=(e={},e[Va+"_"+wl]={pure:!0,appendData:a},e[Va+"_"+yd]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[rs]={pure:!0,appendData:a},e[Jl]={pure:!0,appendData:function(o){var s=this._data;W(o,function(l,c){for(var u=s[c]||(s[c]=[]),h=0;h<(l||[]).length;h++)u.push(l[h])})}},e[ko]={appendData:a},e[$l]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),i}();var yW=function(i,e,t,r){return i[r]},lye=(xm={},xm[Va+"_"+wl]=function(i,e,t,r){return i[r+e]},xm[Va+"_"+yd]=function(i,e,t,r,n){r+=e;for(var a=n||[],o=i,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},xm[rs]=yW,xm[Jl]=function(i,e,t,r,n){for(var a=n||[],o=0;o<t.length;o++){var s=t[o].name,l=i[s];a[o]=l?l[r]:null}return a},xm[ko]=yW,xm);function $L(i,e){var t=lye[i3(i,e)];return t}var xW=function(i,e,t){return i.length},cye=(_m={},_m[Va+"_"+wl]=function(i,e,t){return Math.max(0,i.length-e)},_m[Va+"_"+yd]=function(i,e,t){var r=i[0];return r?Math.max(0,r.length-e):0},_m[rs]=xW,_m[Jl]=function(i,e,t){var r=t[0].name,n=i[r];return n?n.length:0},_m[ko]=xW,_m);function e3(i,e){var t=cye[i3(i,e)];return t}var JL=function(i,e,t){return i[e]},uye=(wm={},wm[Va]=JL,wm[rs]=function(i,e,t){return i[t]},wm[Jl]=JL,wm[ko]=function(i,e,t){var r=wu(i);return r instanceof Array?r[e]:r},wm[$l]=JL,wm);function t3(i){var e=uye[i];return e}function i3(i,e){return i===Va?i+"_"+e:i}function wd(i,e,t){if(i){var r=i.getRawDataItem(e);if(r!=null){var n=i.getStore(),a=n.getSource().sourceFormat;if(t!=null){var o=i.getDimensionIndex(t),s=n.getDimensionProperty(o);return t3(a)(r,o,s)}else{var l=r;return a===ko&&(l=wu(r)),l}}}}var hye=/\{@(.+?)\}/g,z0=function(){function i(){}return i.prototype.getDataParams=function(e,t){var r=this.getData(t),n=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,h=this.mainType,d=h==="series",f=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:n,color:c,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},i.prototype.getFormattedLabel=function(e,t,r,n,a,o){t=t||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),n!=null&&Ee(l.value)&&(l.value=l.value[n]),!a){var c=s.getItemModel(e);a=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(ft(a))return l.status=t,l.dimensionIndex=n,a(l);if(Ye(a)){var u=mE(a,l);return u.replace(hye,function(h,d){var f=d.length,m=d;m.charAt(0)==="["&&m.charAt(f-1)==="]"&&(m=+m.slice(1,f-1));var y=wd(s,e,m);if(o&&Ee(o.interpolatedValue)){var g=s.getDimensionIndex(m);g>=0&&(y=o.interpolatedValue[g])}return y!=null?y+"":""})}},i.prototype.getRawValue=function(e,t){return wd(this.getData(t),e)},i.prototype.formatTooltip=function(e,t,r){},i}();function r3(i){var e,t;return yt(i)?i.type&&(t=i):e=i,{text:e,frag:t}}function $f(i){return new dye(i)}var dye=function(){function i(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return i.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var n=this.context;n.data=n.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=u(this._modBy),s=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(o!==l||s!==c)&&(a="reset");function u(b){return!(b>=1)&&(b=1),b}var h;(this._dirty||a==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=l,this._modDataCount=c;var d=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,m=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(h||f<m)){var y=this._progress;if(Ee(y))for(var g=0;g<y.length;g++)this._doProgress(y[g],f,m,l,c);else this._doProgress(y,f,m,l,c)}this._dueIndex=m;var x=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=x}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},i.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},i.prototype._doProgress=function(e,t,r,n,a){_W.reset(t,r,n,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:_W.next},this.context)},i.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Ee(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),r},i.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},i.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},i.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},i.prototype.getUpstream=function(){return this._upstream},i.prototype.getDownstream=function(){return this._downstream},i.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},i}();var _W=function(){var i,e,t,r,n,a={reset:function(l,c,u,h){e=l,i=c,t=u,r=h,n=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<i?e++:null}function s(){var l=e%n*t+Math.ceil(e/n),c=e>=i?null:l<r?l:e;return e++,c}}();function Nc(i,e){var t=e&&e.type;return t==="ordinal"?i:(t==="time"&&!mi(i)&&i!=null&&i!=="-"&&(i=+ks(i)),i==null||i===""?NaN:+i)}var fye=ct({number:function(i){return parseFloat(i)},time:function(i){return+ks(i)},trim:function(i){return Ye(i)?bo(i):i}});function IE(i){return fye.get(i)}var wW={lt:function(i,e){return i<e},lte:function(i,e){return i<=e},gt:function(i,e){return i>e},gte:function(i,e){return i>=e}},pye=function(){function i(e,t){if(!mi(t)){var r="";xr(r)}this._opFn=wW[e],this._rvalFloat=Ic(t)}return i.prototype.evaluate=function(e){return mi(e)?this._opFn(e,this._rvalFloat):this._opFn(Ic(e),this._rvalFloat)},i}(),BE=function(){function i(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return i.prototype.evaluate=function(e,t){var r=mi(e)?e:Ic(e),n=mi(t)?t:Ic(t),a=isNaN(r),o=isNaN(n);if(a&&(r=this._incomparable),o&&(n=this._incomparable),a&&o){var s=Ye(e),l=Ye(t);s&&(r=l?e:0),l&&(n=s?t:0)}return r<n?this._resultLT:r>n?-this._resultLT:0},i}();var Aye=function(){function i(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Ic(t)}return i.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=Ic(e)===this._rvalFloat)}return this._isEQ?t:!t},i}();function bW(i,e){return i==="eq"||i==="ne"?new Aye(i==="eq",e):Mt(wW,i)?new pye(i,e):null}var mye=function(){function i(){}return i.prototype.getRawData=function(){throw new Error("not supported")},i.prototype.getRawDataItem=function(e){throw new Error("not supported")},i.prototype.cloneRawData=function(){},i.prototype.getDimensionInfo=function(e){},i.prototype.cloneAllDimensionInfo=function(){},i.prototype.count=function(){},i.prototype.retrieveValue=function(e,t){},i.prototype.retrieveValueFromItem=function(e,t){},i.prototype.convertValue=function(e,t){return Nc(e,t)},i}();function gye(i,e){var t=new mye,r=i.data,n=t.sourceFormat=i.sourceFormat,a=i.startIndex,o="";i.seriesLayoutBy!==wl&&xr(o);var s=[],l={},c=i.dimensionsDefine;if(c)W(c,function(y,g){var x=y.name,b={index:g,name:x,displayName:y.displayName};if(s.push(b),x!=null){var S="";Mt(l,x)&&xr(S),l[x]=b}});else for(var u=0;u<i.dimensionsDetectedCount;u++)s.push({index:u});var h=$L(n,wl);e.__isBuiltIn&&(t.getRawDataItem=function(y){return h(r,a,s,y)},t.getRawData=st(vye,null,i)),t.cloneRawData=st(yye,null,i);var d=e3(n,wl);t.count=st(d,null,r,a,s);var f=t3(n);t.retrieveValue=function(y,g){var x=h(r,a,s,y);return m(x,g)};var m=t.retrieveValueFromItem=function(y,g){if(y!=null){var x=s[g];if(x)return f(y,g,x.name)}};return t.getDimensionInfo=st(xye,null,s,l),t.cloneAllDimensionInfo=st(_ye,null,s),t}function vye(i){var e=i.sourceFormat;if(!n3(e)){var t="";xr(t)}return i.data}function yye(i){var e=i.sourceFormat,t=i.data;if(!n3(e)){var r="";xr(r)}if(e===Va){for(var n=[],a=0,o=t.length;a<o;a++)n.push(t[a].slice());return n}else if(e===rs){for(var n=[],a=0,o=t.length;a<o;a++)n.push(Ce({},t[a]));return n}}function xye(i,e,t){if(t!=null){if(mi(t)||!isNaN(t)&&!Mt(e,t))return i[t];if(Mt(e,t))return e[t]}}function _ye(i){return Tt(i)}var SW=ct();function CW(i){i=Tt(i);var e=i.type,t="";e||xr(t);var r=e.split(":");r.length!==2&&xr(t);var n=!1;r[0]==="echarts"&&(e=r[1],n=!0),i.__isBuiltIn=n,SW.set(e,i)}function EW(i,e,t){var r=cr(i),n=r.length,a="";n||xr(a);for(var o=0,s=n;o<s;o++){var l=r[o];e=wye(l,e,t,n===1?null:o),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function wye(i,e,t,r){var n="";e.length||xr(n),yt(i)||xr(n);var a=i.type,o=SW.get(a);o||xr(n);var s=Me(e,function(u){return gye(u,o)}),l=cr(o.transform({upstream:s[0],upstreamList:s,config:Tt(i.config)}));if(!1&&i.print)var c;return Me(l,function(u,h){var d="";yt(u)||xr(d),u.data||xr(d);var f=ZL(u.data);n3(f)||xr(d);var m,y=e[0];if(y&&h===0&&!u.dimensions){var g=y.startIndex;g&&(u.data=y.data.slice(0,g).concat(u.data)),m={seriesLayoutBy:wl,sourceHeader:g,dimensions:y.metaRawOption.dimensions}}else m={seriesLayoutBy:wl,sourceHeader:0,dimensions:u.dimensions};return zx(u.data,m,null)})}function n3(i){return i===Va||i===rs}var DE="undefined",bye=typeof Uint32Array===DE?Array:Uint32Array,Sye=typeof Uint16Array===DE?Array:Uint16Array,o3=typeof Int32Array===DE?Array:Int32Array,TW=typeof Float64Array===DE?Array:Float64Array,IW={float:TW,int:o3,ordinal:Array,number:Array,time:TW},a3;function Vx(i){return i>65535?bye:Sye}function V0(){return[1/0,-1/0]}function Cye(i){var e=i.constructor;return e===Array?i.slice():new e(i)}function MW(i,e,t,r,n){var a=IW[t||"float"];if(n){var o=i[e],s=o&&o.length;if(s!==r){for(var l=new a(r),c=0;c<s;c++)l[c]=o[c];i[e]=l}}else i[e]=new a(r)}var Eye=function(){function i(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=ct()}return i.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=e.getSource(),a=this.defaultDimValueGetter=a3[n.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[];var o=TE(n);this._dimensions=Me(t,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,e.count())},i.prototype.getProvider=function(){return this._provider},i.prototype.getSource=function(){return this._provider.getSource()},i.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,n=this._dimensions,a=r.get(e);if(a!=null){if(n[a].type===t)return a}else a=n.length;return n[a]={type:t},r.set(e,a),this._chunks[a]=new IW[t||"float"](this._rawCount),this._rawExtent[a]=V0(),a},i.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],n=this._dimensions[e],a=this._rawExtent,o=n.ordinalOffset||0,s=r.length;o===0&&(a[e]=V0());for(var l=a[e],c=o;c<s;c++){var u=r[c]=t.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}n.ordinalMeta=t,n.ordinalOffset=s,n.type="ordinal"},i.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},i.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},i.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var n=t.count();return t.persistent||(n+=r),r<n&&this._initDataFromProvider(r,n,!0),[r,n]},i.prototype.appendValues=function(e,t){for(var r=this._chunks,n=this._dimensions,a=n.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t||0),c=0;c<a;c++){var u=n[c];MW(r,c,u.type,l,!0)}for(var h=[],d=s;d<l;d++)for(var f=d-s,m=0;m<a;m++){var u=n[m],y=a3.arrayRows.call(this,e[f]||h,u.property,f,m);r[m][d]=y;var g=o[m];y<g[0]&&(g[0]=y),y>g[1]&&(g[1]=y)}return this._rawCount=this._count=l,{start:s,end:l}},i.prototype._initDataFromProvider=function(e,t,r){for(var n=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=Me(o,function(b){return b.property}),u=0;u<s;u++){var h=o[u];l[u]||(l[u]=V0()),MW(a,u,h.type,t,r)}if(n.fillStorage)n.fillStorage(e,t,a,l);else for(var d=[],f=e;f<t;f++){d=n.getItem(f,d);for(var m=0;m<s;m++){var y=a[m],g=this._dimValueGetter(d,c[m],f,m);y[f]=g;var x=l[m];g<x[0]&&(x[0]=g),g>x[1]&&(x[1]=g)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=t,this._extent=[]},i.prototype.count=function(){return this._count},i.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},i.prototype.getValues=function(e,t){var r=[],n=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)n.push(a)}else n=e;for(var a=0,o=n.length;a<o;a++)r.push(this.get(n[a],t));return r},i.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},i.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var n=0,a=this.count();n<a;n++){var o=this.get(e,n);isNaN(o)||(r+=o)}return r},i.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),n=this.count();return n===0?0:n%2===1?r[(n-1)/2]:(r[n/2]+r[n/2-1])/2},i.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var n=0,a=this._count-1;n<=a;){var o=(n+a)/2|0;if(t[o]<e)n=o+1;else if(t[o]>e)a=o-1;else return o}return-1},i.prototype.indicesOfNearest=function(e,t,r){var n=this._chunks,a=n[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,u=0,h=this.count();u<h;u++){var d=this.getRawIndex(u),f=t-a[d],m=Math.abs(f);m<=r&&((m<s||m===s&&f>=0&&l<0)&&(s=m,l=f,c=0),f===l&&(o[c++]=u))}return o.length=c,o},i.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,n=this._count;if(r===Array){e=new r(n);for(var a=0;a<n;a++)e[a]=t[a]}else e=new r(t.buffer,0,n)}else{var r=Vx(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},i.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),n=r.count(),a=Vx(r._rawCount),o=new a(n),s=[],l=e.length,c=0,u=e[0],h=r._chunks,d=0;d<n;d++){var f=void 0,m=r.getRawIndex(d);if(l===0)f=t(d);else if(l===1){var y=h[u][m];f=t(y,d)}else{for(var g=0;g<l;g++)s[g]=h[e[g]][m];s[g]=d,f=t.apply(null,s)}f&&(o[c++]=m)}return c<n&&(r._indices=o),r._count=c,r._extent=[],r._updateGetRawIdx(),r},i.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var n=si(e),a=n.length;if(!a)return this;var o=t.count(),s=Vx(t._rawCount),l=new s(o),c=0,u=n[0],h=e[u][0],d=e[u][1],f=t._chunks,m=!1;if(!t._indices){var y=0;if(a===1){for(var g=f[n[0]],x=0;x<r;x++){var b=g[x];(b>=h&&b<=d||isNaN(b))&&(l[c++]=y),y++}m=!0}else if(a===2){for(var g=f[n[0]],S=f[n[1]],E=e[n[1]][0],D=e[n[1]][1],x=0;x<r;x++){var b=g[x],B=S[x];(b>=h&&b<=d||isNaN(b))&&(B>=E&&B<=D||isNaN(B))&&(l[c++]=y),y++}m=!0}}if(!m)if(a===1)for(var x=0;x<o;x++){var F=t.getRawIndex(x),b=f[n[0]][F];(b>=h&&b<=d||isNaN(b))&&(l[c++]=F)}else for(var x=0;x<o;x++){for(var H=!0,F=t.getRawIndex(x),U=0;U<a;U++){var k=n[U],b=f[k][F];(b<e[k][0]||b>e[k][1])&&(H=!1)}H&&(l[c++]=t.getRawIndex(x))}return c<o&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},i.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},i.prototype.modify=function(e,t){this._updateDims(this,e,t)},i.prototype._updateDims=function(e,t,r){for(var n=e._chunks,a=[],o=t.length,s=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=V0();for(var h=0;h<s;h++){for(var d=e.getRawIndex(h),f=0;f<o;f++)l[f]=n[t[f]][d];l[o]=h;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(a[0]=m,m=a);for(var u=0;u<m.length;u++){var y=t[u],g=m[u],x=c[y],b=n[y];b&&(b[d]=g),g<x[0]&&(x[0]=g),g>x[1]&&(x[1]=g)}}}},i.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),n=r._chunks,a=n[e],o=this.count(),s=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,h,d,f=new(Vx(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=c;for(var m=1;m<o-1;m+=l){for(var y=Math.min(m+l,o-1),g=Math.min(m+l*2,o),x=(g+y)/2,b=0,S=y;S<g;S++){var E=this.getRawIndex(S),D=a[E];isNaN(D)||(b+=D)}b/=g-y;var B=m,F=Math.min(m+l,o),H=m-1,U=a[c];u=-1,d=B;for(var k=-1,j=0,S=B;S<F;S++){var E=this.getRawIndex(S),D=a[E];if(isNaN(D)){j++,k<0&&(k=E);continue}h=Math.abs((H-x)*(D-U)-(H-S)*(b-U)),h>u&&(u=h,d=E)}j>0&&j<F-B&&(f[s++]=Math.min(k,d),d=Math.max(k,d)),f[s++]=d,c=d}return f[s++]=this.getRawIndex(o-1),r._count=s,r._indices=f,r.getRawIndex=this._getRawIdx,r},i.prototype.downSample=function(e,t,r,n){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/t),c=o[e],u=this.count(),h=a._rawExtent[e]=V0(),d=new(Vx(this._rawCount))(Math.ceil(u/l)),f=0,m=0;m<u;m+=l){l>u-m&&(l=u-m,s.length=l);for(var y=0;y<l;y++){var g=this.getRawIndex(m+y);s[y]=c[g]}var x=r(s),b=this.getRawIndex(Math.min(m+n(s,x)||0,u-1));c[b]=x,x<h[0]&&(h[0]=x),x>h[1]&&(h[1]=x),d[f++]=b}return a._count=f,a._indices=d,a._updateGetRawIdx(),a},i.prototype.each=function(e,t){if(this._count)for(var r=e.length,n=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(n[e[0]][s],a);break;case 2:t(n[e[0]][s],n[e[1]][s],a);break;default:for(var l=0,c=[];l<r;l++)c[l]=n[e[l]][s];c[l]=a,t.apply(null,c)}}},i.prototype.getDataExtent=function(e){var t=this._chunks[e],r=V0();if(!t)return r;var n=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],c=0;c<n;c++){var u=this.getRawIndex(c),h=t[u];h<s&&(s=h),h>l&&(l=h)}return o=[s,l],this._extent[e]=o,o},i.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],n=this._chunks,a=0;a<n.length;a++)r.push(n[a][t]);return r},i.prototype.clone=function(e,t){var r=new i,n=this._chunks,a=e&&qo(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<n.length;o++)r._chunks[o]=a[o]?Cye(n[o]):n[o];else r._chunks=n;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},i.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Tt(this._extent),e._rawExtent=Tt(this._rawExtent)},i.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var n=0;n<r;n++)t[n]=this._indices[n]}else t=new e(this._indices);return t}return null},i.prototype._getRawIdxIdentity=function(e){return e},i.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},i.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},i.internalField=function(){function e(t,r,n,a){return Nc(t[a],this._dimensions[a])}a3={arrayRows:e,objectRows:function(t,r,n,a){return Nc(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,n,a){var o=t&&(t.value==null?t:t.value);return Nc(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,n,a){return t[a]}}}(),i}(),Hx=Eye;var PE=function(){function i(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return i.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},i.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},i.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},i.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},i.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,n,a;if(RE(e)){var o=e,s=void 0,l=void 0,c=void 0;if(r){var u=t[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,a=[u._getVersionSign()]}else s=o.get("data",!0),l=ka(s)?$l:ko,a=[];var h=this._getSourceMetaRawOption()||{},d=c&&c.metaRawOption||{},f=Yt(h.seriesLayoutBy,d.seriesLayoutBy)||null,m=Yt(h.sourceHeader,d.sourceHeader),y=Yt(h.dimensions,d.dimensions),g=f!==d.seriesLayoutBy||!!m!=!!d.sourceHeader||y;n=g?[zx(s,{seriesLayoutBy:f,sourceHeader:m,dimensions:y},l)]:[]}else{var x=e;if(r){var b=this._applyTransform(t);n=b.sourceList,a=b.upstreamSignList}else{var S=x.get("source",!0);n=[zx(S,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(n,a)},i.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),n=t.get("fromTransformResult",!0);if(n!=null){var a="";e.length!==1&&BW(a)}var o,s=[],l=[];return W(e,function(c){c.prepareSource();var u=c.getSource(n||0),h="";n!=null&&!u&&BW(h),s.push(u),l.push(c._getVersionSign())}),r?o=EW(r,s,{datasetIndex:t.componentIndex}):n!=null&&(o=[mW(s[0])]),{sourceList:o,upstreamSignList:l}},i.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},i.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},i.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},i.prototype._innerGetDataStore=function(e,t,r){var n=0,a=this._storeList,o=a[n];o||(o=a[n]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];RE(this._sourceHost)&&l?s=l._innerGetDataStore(e,t,r):(s=new Hx,s.initData(new ME(t,e.length),e)),o[r]=s}return s},i.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(RE(e)){var t=xE(e);return t?[t.getSourceManager()]:[]}else return Me(Y9(e),function(r){return r.getSourceManager()})},i.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,n;if(RE(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),n=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),n=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:n}},i}();function s3(i){var e=i.option.transform;e&&DA(i.option.transform)}function RE(i){return i.mainType==="series"}function BW(i){throw new Error(i)}var DW="line-height:1";function RW(i,e){var t=i.color||"#6e7079",r=i.fontSize||12,n=i.fontWeight||"400",a=i.color||"#464646",o=i.fontSize||14,s=i.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Zo(r+"")+"px;color:"+Zo(t)+";font-weight:"+Zo(n+""),valueStyle:"font-size:"+Zo(o+"")+"px;color:"+Zo(a)+";font-weight:"+Zo(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:n},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var Tye=[0,10,20,30],Mye=["",`
`,`

`,`


`];function wn(i,e){return e.type=i,e}function l3(i){return i.type==="section"}function PW(i){return l3(i)?Iye:Bye}function LW(i){if(l3(i)){var e=0,t=i.blocks.length,r=t>1||t>0&&!i.noHeader;return W(i.blocks,function(n){var a=LW(n);a>=e&&(e=a+ +(r&&(!a||l3(n)&&!n.noHeader)))}),e}return 0}function Iye(i,e,t,r){var n=e.noHeader,a=Dye(LW(e)),o=[],s=e.blocks||[];In(!s||Ee(s)),s=s||[];var l=i.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(Mt(c,l)){var u=new BE(c[l],null);s.sort(function(m,y){return u.evaluate(m.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}W(s,function(m,y){var g=e.valueFormatter,x=PW(m)(g?Ce(Ce({},i),{valueFormatter:g}):i,m,y>0?a.html:0,r);x!=null&&o.push(x)});var h=i.renderMode==="richText"?o.join(a.richText):c3(o.join(""),n?t:a.html);if(n)return h;var d=AE(e.header,"ordinal",i.useUTC),f=RW(r,i.renderMode).nameStyle;return i.renderMode==="richText"?OW(i,d,f)+a.richText+h:c3('<div style="'+f+";"+DW+';">'+Zo(d)+"</div>"+h,t)}function Bye(i,e,t,r){var n=i.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,c=i.useUTC,u=e.valueFormatter||i.valueFormatter||function(E){return E=Ee(E)?E:[E],Me(E,function(D,B){return AE(D,Ee(f)?f[B]:f,c)})};if(!(a&&o)){var h=s?"":i.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",n),d=a?"":AE(l,"ordinal",c),f=e.valueType,m=o?[]:u(e.value,e.dataIndex),y=!s||!a,g=!s&&a,x=RW(r,n),b=x.nameStyle,S=x.valueStyle;return n==="richText"?(s?"":h)+(a?"":OW(i,d,b))+(o?"":Lye(i,m,y,g,S)):c3((s?"":h)+(a?"":Rye(d,!s,b))+(o?"":Pye(m,y,g,S)),t)}}function u3(i,e,t,r,n,a){if(i){var o=PW(i),s={useUTC:n,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:i.valueFormatter};return o(s,i,0,a)}}function Dye(i){return{html:Tye[i],richText:Mye[i]}}function c3(i,e){var t='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+DW+';">'+i+t+"</div>"}function Rye(i,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+Zo(i)+"</span>"}function Pye(i,e,t,r){var n=t?"10px":"20px",a=e?"float:right;margin-left:"+n:"";return i=Ee(i)?i:[i],'<span style="'+a+";"+r+'">'+Me(i,function(o){return Zo(o)}).join("&nbsp;&nbsp;")+"</span>"}function OW(i,e,t){return i.markupStyleCreator.wrapRichTextStyle(e,t)}function Lye(i,e,t,r,n){var a=[n],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),i.markupStyleCreator.wrapRichTextStyle(Ee(e)?e.join("  "):e,a)}function LE(i,e){var t=i.getData().getItemVisual(e,"style"),r=t[i.visualDrawType];return Iu(r)}function OE(i,e){var t=i.get("padding");return t??(e==="richText"?[8,10]:10)}var FE=function(){function i(){this.richTextStyles={},this._nextStyleNameId=BC()}return i.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},i.prototype.makeTooltipMarker=function(e,t,r){var n=r==="richText"?this._generateStyleName():null,a=H9({color:t,type:e,renderMode:r,markerId:n});return Ye(a)?a:(this.richTextStyles[n]=a.style,a.content)},i.prototype.wrapRichTextStyle=function(e,t){var r={};Ee(t)?W(t,function(a){return Ce(r,a)}):Ce(r,t);var n=this._generateStyleName();return this.richTextStyles[n]=r,"{"+n+"|"+e+"}"},i}();function NE(i){var e=i.series,t=i.dataIndex,r=i.multipleSeries,n=e.getData(),a=n.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),l=Ee(s),c=LE(e,t),u,h,d,f;if(o>1||l&&!o){var m=Oye(s,e,t,a,c);u=m.inlineValues,h=m.inlineValueTypes,d=m.blocks,f=m.inlineValues[0]}else if(o){var y=n.getDimensionInfo(a[0]);f=u=wd(n,t,a[0]),h=y.type}else f=u=l?s[0]:s;var g=m0(e),x=g&&e.name||"",b=n.getName(t),S=r?x:b;return wn("section",{header:x,noHeader:r||!g,sortParam:f,blocks:[wn("nameValue",{markerType:"item",markerColor:c,name:S,noName:!bo(S),value:u,valueType:h,dataIndex:t})].concat(d||[])})}function Oye(i,e,t,r,n){var a=e.getData(),o=qo(i,function(h,d,f){var m=a.getDimensionInfo(f);return h=h||m&&m.tooltip!==!1&&m.displayName!=null},!1),s=[],l=[],c=[];r.length?W(r,function(h){u(wd(a,t,h),h)}):W(i,u);function u(h,d){var f=a.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(o?c.push(wn("nameValue",{markerType:"subItem",markerColor:n,name:f.displayName,value:h,valueType:f.type})):(s.push(h),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var ep=$t();function UE(i,e){return i.getName(e)||i.getId(e)}var Qx="__universalTransitionEnabled",kE=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,n){this.seriesIndex=this.componentIndex,this.dataTask=$f({count:Nye,reset:Uye}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var a=ep(this).sourceManager=new PE(this);a.prepareSource();var o=this.getInitialData(t,n);NW(o,this),this.dataTask.context.data=o,ep(this).dataBeforeProcessed=o,FW(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=Jf(this),a=n?Oc(t):{},o=this.subType;xi.hasClass(o)&&(o+="Series"),ri(t,r.getTheme().get(this.subType)),ri(t,this.getDefaultOption()),ql(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&_l(t,a,n)},e.prototype.mergeOption=function(t,r){t=ri(this.option,t,!0),this.fillDataTextStyle(t.data);var n=Jf(this);n&&_l(this.option,t,n);var a=ep(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);NW(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,ep(this).dataBeforeProcessed=o,FW(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!ka(t))for(var r=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&ql(t[n],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=h3(this);if(r){var n=r.context.data;return t==null?n:n.getLinkedData(t)}else return ep(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=h3(this);if(r){var n=r.context;n.outputData=t,r!==this.dataTask&&(n.data=t)}ep(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return ct(t)},e.prototype.getSourceManager=function(){return ep(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return ep(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,n){return NE({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(ki.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,n){var a=this.ecModel,o=Lx.prototype.getColorFromPalette.call(this,t,r,n);return o||(o=a.getColorFromPalette(t,r,n)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var n=this.option.selectedMap;if(n){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var l=t[s],c=UE(o,l);n[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,r){for(var n=[],a=0;a<t.length;a++)n[0]=t[a],this.isSelected(t[a],r)?this.unselect(n,r):this.select(n,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=si(t),n=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&n.push(o)}return n},e.prototype.isSelected=function(t,r){var n=this.option.selectedMap;if(!n)return!1;var a=this.getData(r);return(n==="all"||n[UE(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Qx])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var n,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){yt(o.selectedMap)||(o.selectedMap={});for(var c=o.selectedMap,u=0;u<l;u++){var h=r[u],d=UE(t,h);c[d]=!0,this._selectedDataIndicesMap[d]=t.getRawIndex(h)}}else if(s==="single"||s===!0){var f=r[l-1],d=UE(t,f);o.selectedMap=(n={},n[d]=!0,n),this._selectedDataIndicesMap=(a={},a[d]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(n){var a=t.getRawDataItem(n);a&&a.selected&&r.push(n)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return xi.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(xi);jr(kE,z0);jr(kE,Lx);PC(kE,xi);function FW(i){var e=i.name;m0(i)||(i.name=Fye(i)||e)}function Fye(i){var e=i.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return W(t,function(n){var a=e.getDimensionInfo(n);a.displayName&&r.push(a.displayName)}),r.join(" ")}function Nye(i){return i.model.getRawData().count()}function Uye(i){var e=i.model;return e.setData(e.getRawData().cloneShallow()),kye}function kye(i,e){e.outputData&&i.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function NW(i,e){W(RA(i.CHANGABLE_METHODS,i.DOWNSAMPLE_METHODS),function(t){i.wrapMethod(t,Ut(zye,e))})}function zye(i,e){var t=h3(i);return t&&t.setOutputEnd((e||this).count()),e}function h3(i){var e=(i.ecModel||{}).scheduler,t=e&&e.getPipeline(i.uid);if(t){var r=t.currentTask;if(r){var n=r.agentStubMap;n&&(r=n.get(i.uid))}return r}}var rr=kE;var d3=function(){function i(){this.group=new xt,this.uid=Lc("viewComponent")}return i.prototype.init=function(e,t){},i.prototype.render=function(e,t,r,n){},i.prototype.dispose=function(e,t){},i.prototype.updateView=function(e,t,r,n){},i.prototype.updateLayout=function(e,t,r,n){},i.prototype.updateVisual=function(e,t,r,n){},i.prototype.toggleBlurSeries=function(e,t,r){},i.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},i}();g0(d3);Qf(d3);var hr=d3;function ec(){var i=$t();return function(e){var t=i(e),r=e.pipelineContext,n=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(n!==o||a!==s)&&"reset"}}var zW=$t(),Vye=ec(),f3=function(){function i(){this.group=new xt,this.uid=Lc("viewChart"),this.renderTask=$f({plan:Hye,reset:Qye}),this.renderTask.context={view:this}}return i.prototype.init=function(e,t){},i.prototype.render=function(e,t,r,n){},i.prototype.highlight=function(e,t,r,n){var a=e.getData(n&&n.dataType);a&&kW(a,n,"emphasis")},i.prototype.downplay=function(e,t,r,n){var a=e.getData(n&&n.dataType);a&&kW(a,n,"normal")},i.prototype.remove=function(e,t){this.group.removeAll()},i.prototype.dispose=function(e,t){},i.prototype.updateView=function(e,t,r,n){this.render(e,t,r,n)},i.prototype.updateLayout=function(e,t,r,n){this.render(e,t,r,n)},i.prototype.updateVisual=function(e,t,r,n){this.render(e,t,r,n)},i.prototype.eachRendered=function(e){Hs(this.group,e)},i.markUpdateMethod=function(e,t){zW(e).updateMethod=t},i.protoInitialize=function(){var e=i.prototype;e.type="chart"}(),i}();function UW(i,e,t){i&&qf(i)&&(e==="emphasis"?_s:ws)(i,t)}function kW(i,e,t){var r=Bc(i,e),n=e&&e.highlightKey!=null?zG(e.highlightKey):null;r!=null?W(cr(r),function(a){UW(i.getItemGraphicEl(a),t,n)}):i.eachItemGraphicEl(function(a){UW(a,t,n)})}g0(f3,["dispose"]);Qf(f3);function Hye(i){return Vye(i.model)}function Qye(i){var e=i.model,t=i.ecModel,r=i.api,n=i.payload,a=e.pipelineContext.progressiveRender,o=i.view,s=n&&zW(n).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,t,r,n),Gye[l]}var Gye={incrementalPrepareRender:{progress:function(i,e){e.view.incrementalRender(i,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(i,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},qi=f3;var zE="\0__throttleOriginMethod",VW="\0__throttleRate",HW="\0__throttleType";function Gx(i,e,t){var r,n=0,a=0,o=null,s,l,c,u;e=e||0;function h(){a=new Date().getTime(),o=null,i.apply(l,c||[])}var d=function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];r=new Date().getTime(),l=this,c=f;var y=u||e,g=u||t;u=null,s=r-(g?n:a)-y,clearTimeout(o),g?o=setTimeout(h,y):s>=0?h():o=setTimeout(h,-s),n=r};return d.clear=function(){o&&(clearTimeout(o),o=null)},d.debounceNextCall=function(f){u=f},d}function Uc(i,e,t,r){var n=i[e];if(n){var a=n[zE]||n,o=n[HW],s=n[VW];if(s!==t||o!==r){if(t==null||!r)return i[e]=a;n=i[e]=Gx(a,t,r==="debounce"),n[zE]=a,n[HW]=r,n[VW]=t}return n}}function bd(i,e){var t=i[e];t&&t[zE]&&(t.clear&&t.clear(),i[e]=t[zE])}var QW=$t(),GW={itemStyle:gl(SL,!0),lineStyle:gl(bL,!0)},Wye={lineStyle:"stroke",itemStyle:"fill"};function WW(i,e){var t=i.visualStyleMapper||GW[e];return t||(console.warn("Unknown style type '"+e+"'."),GW.itemStyle)}function jW(i,e){var t=i.visualDrawType||Wye[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var KW={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,e){var t=i.getData(),r=i.visualStyleAccessPath||"itemStyle",n=i.getModel(r),a=WW(i,r),o=a(n),s=n.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var l=jW(i,r),c=o[l],u=ft(c)?c:null,h=o.fill==="auto"||o.stroke==="auto";if(!o[l]||u||h){var d=i.getColorFromPalette(i.name,null,e.getSeriesCount());o[l]||(o[l]=d,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||ft(o.fill)?d:o.fill,o.stroke=o.stroke==="auto"||ft(o.stroke)?d:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",l),!e.isSeriesFiltered(i)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,m){var y=i.getDataParams(m),g=Ce({},o);g[l]=u(y),f.setItemVisual(m,"style",g)}}}},Wx=new ir,XW={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,e){if(!(i.ignoreStyleOnData||e.isSeriesFiltered(i))){var t=i.getData(),r=i.visualStyleAccessPath||"itemStyle",n=WW(i,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){Wx.option=l[r];var c=n(Wx),u=o.ensureUniqueItemVisual(s,"style");Ce(u,c),Wx.option.decal&&(o.setItemVisual(s,"decal",Wx.option.decal),Wx.option.decal.dirty=!0),a in c&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},YW={performRawSeries:!0,overallReset:function(i){var e=ct();i.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var n=t.type+"-"+r,a=e.get(n);a||(a={},e.set(n,a)),QW(t).scope=a}}),i.eachSeries(function(t){if(!(t.isColorBySeries()||i.isSeriesFiltered(t))){var r=t.getRawData(),n={},a=t.getData(),o=QW(t).scope,s=t.visualStyleAccessPath||"itemStyle",l=jW(t,s);a.each(function(c){var u=a.getRawIndex(c);n[u]=c}),r.each(function(c){var u=n[c],h=a.getItemVisual(u,"colorFromPalette");if(h){var d=a.ensureUniqueItemVisual(u,"style"),f=r.getName(c)||c+"",m=r.count();d[l]=t.getColorFromPalette(f,o,m)}})}})}};var HE=Math.PI;function p3(i,e){e=e||{},At(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new xt,r=new pi({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var n=new yi({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new pi({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new bx({shape:{startAngle:-HE/2,endAngle:-HE/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:HE*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:HE*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=n.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(i.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),u=i.getHeight()/2;e.showSpinner&&o.setShape({cx:c,cy:u}),a.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:i.getWidth(),height:i.getHeight()})},t.resize(),t}var jye=function(){function i(e,t,r,n){this._stageTaskMap=ct(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=r.concat(n)}return i.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var n=r.overallTask;n&&n.dirty()})},i.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),n=r.context,a=!t&&r.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=n&&n.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},i.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},i.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),n=e.getData(),a=n.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},i.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=ct();e.eachSeries(function(n){var a=n.getProgressive(),o=n.uid;r.set(o,{id:o,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:a&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(n,n.dataTask)})},i.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;W(this._allHandlers,function(n){var a=e.get(n.uid)||e.set(n.uid,{}),o="";In(!(n.reset&&n.overallReset),o),n.reset&&this._createSeriesStageTask(n,a,t,r),n.overallReset&&this._createOverallStageTask(n,a,t,r)},this)},i.prototype.prepareView=function(e,t,r,n){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=n,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},i.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},i.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},i.prototype._performStageTasks=function(e,t,r,n){n=n||{};var a=!1,o=this;W(e,function(l,c){if(!(n.visualType&&n.visualType!==l.visualType)){var u=o._stageTaskMap.get(l.uid),h=u.seriesTaskMap,d=u.overallTask;if(d){var f,m=d.agentStubMap;m.each(function(g){s(n,g)&&(g.dirty(),f=!0)}),f&&d.dirty(),o.updatePayload(d,r);var y=o.getPerformArgs(d,n.block);m.each(function(g){g.perform(y)}),d.perform(y)&&(a=!0)}else h&&h.each(function(g,x){s(n,g)&&g.dirty();var b=o.getPerformArgs(g,n.block);b.skip=!l.performRawSeries&&t.isSeriesFiltered(g.context.model),o.updatePayload(g,r),g.perform(b)&&(a=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=a||this.unfinished},i.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},i.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},i.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},i.prototype._createSeriesStageTask=function(e,t,r,n){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=ct(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,n).each(u);function u(h){var d=h.uid,f=s.set(d,o&&o.get(d)||$f({plan:Zye,reset:Jye,count:exe}));f.context={model:h,ecModel:r,api:n,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(h,f)}},i.prototype._createOverallStageTask=function(e,t,r,n){var a=this,o=t.overallTask=t.overallTask||$f({reset:Kye});o.context={ecModel:r,api:n,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=ct(),c=e.seriesType,u=e.getTargetSeries,h=!0,d=!1,f="";In(!e.createOnAllSeries,f),c?r.eachRawSeriesByType(c,m):u?u(r,n).each(m):(h=!1,W(r.getSeries(),m));function m(y){var g=y.uid,x=l.set(g,s&&s.get(g)||(d=!0,$f({reset:Xye,onDirty:qye})));x.context={model:y,overallProgress:h},x.agent=o,x.__block=h,a._pipe(y,x)}d&&o.dirty()},i.prototype._pipe=function(e,t){var r=e.uid,n=this._pipelineMap.get(r);!n.head&&(n.head=t),n.tail&&n.tail.pipe(t),n.tail=t,t.__idxInPipeline=n.count++,t.__pipeline=n},i.wrapStageHandler=function(e,t){return ft(e)&&(e={overallReset:e,seriesType:txe(e)}),e.uid=Lc("stageHandler"),t&&(e.visualType=t),e},i}();function Kye(i){i.overallReset(i.ecModel,i.api,i.payload)}function Xye(i){return i.overallProgress&&Yye}function Yye(){this.agent.dirty(),this.getDownstream().dirty()}function qye(){this.agent&&this.agent.dirty()}function Zye(i){return i.plan?i.plan(i.model,i.ecModel,i.api,i.payload):null}function Jye(i){i.useClearVisual&&i.data.clearAllVisual();var e=i.resetDefines=cr(i.reset(i.model,i.ecModel,i.api,i.payload));return e.length>1?Me(e,function(t,r){return qW(r)}):$ye}var $ye=qW(0);function qW(i){return function(e,t){var r=t.data,n=t.resetDefines[i];if(n&&n.dataEach)for(var a=e.start;a<e.end;a++)n.dataEach(r,a);else n&&n.progress&&n.progress(e,r)}}function exe(i){return i.data.count()}function txe(i){QE=null;try{i(jx,ZW)}catch{}return QE}var jx={},ZW={},QE;JW(jx,bE);JW(ZW,SE);jx.eachSeriesByType=jx.eachRawSeriesByType=function(i){QE=i};jx.eachComponent=function(i){i.mainType==="series"&&i.subType&&(QE=i.subType)};function JW(i,e){for(var t in e.prototype)i[t]=hn}var A3=jye;var $W=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],ej={color:$W,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],$W]};var Qs="#B9B8CE",tj="#100C2A",GE=function(){return{axisLine:{lineStyle:{color:Qs}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},ij=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],rj={darkMode:!0,color:ij,backgroundColor:tj,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Qs}},textStyle:{color:Qs},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Qs}},dataZoom:{borderColor:"#71708A",textStyle:{color:Qs},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Qs}},timeline:{lineStyle:{color:Qs},label:{color:Qs},controlStyle:{color:Qs,borderColor:Qs}},calendar:{itemStyle:{color:tj},dayLabel:{color:Qs},monthLabel:{color:Qs},yearLabel:{color:Qs}},timeAxis:GE(),logAxis:GE(),valueAxis:GE(),categoryAxis:GE(),line:{symbol:"circle"},graph:{color:ij},gauge:{title:{color:Qs},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Qs},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};rj.categoryAxis.splitLine.show=!1;var nj=rj;var aj=function(){function i(){}return i.prototype.normalizeQuery=function(e){var t={},r={},n={};if(Ye(e)){var a=ml(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};W(e,function(l,c){for(var u=!1,h=0;h<o.length;h++){var d=o[h],f=c.lastIndexOf(d);if(f>0&&f===c.length-d.length){var m=c.slice(0,f);m!=="data"&&(t.mainType=m,t[d.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(n[c]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:n}},i.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var n=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,n,a));function u(h,d,f,m){return h[f]==null||d[m||f]===h[f]}},i.prototype.afterTrigger=function(){this.eventInfo=null},i}();var m3=["symbol","symbolSize","symbolRotate","symbolOffset"],oj=m3.concat(["symbolKeepAspect"]),sj={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,e){var t=i.getData();if(i.legendIcon&&t.setVisual("legendIcon",i.legendIcon),!i.hasSymbolVisual)return;for(var r={},n={},a=!1,o=0;o<m3.length;o++){var s=m3[o],l=i.get(s);ft(l)?(a=!0,n[s]=l):r[s]=l}if(r.symbol=r.symbol||i.defaultSymbol,t.setVisual(Ce({legendIcon:i.legendIcon||r.symbol,symbolKeepAspect:i.get("symbolKeepAspect")},r)),e.isSeriesFiltered(i))return;var c=si(n);function u(h,d){for(var f=i.getRawValue(d),m=i.getDataParams(d),y=0;y<c.length;y++){var g=c[y];h.setItemVisual(d,g,n[g](f,m))}}return{dataEach:a?u:null}}},lj={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,e){if(!i.hasSymbolVisual||e.isSeriesFiltered(i))return;var t=i.getData();function r(n,a){for(var o=n.getItemModel(a),s=0;s<oj.length;s++){var l=oj[s],c=o.getShallow(l,!0);c!=null&&n.setItemVisual(a,l,c)}}return{dataEach:t.hasItemOption?r:null}}};function Kx(i,e,t){switch(t){case"color":var r=i.getItemVisual(e,"style");return r[i.getVisual("drawType")];case"opacity":return i.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return i.getItemVisual(e,t);default:}}function wh(i,e){switch(e){case"color":var t=i.getVisual("style");return t[i.getVisual("drawType")];case"opacity":return i.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return i.getVisual(e);default:}}function g3(i,e,t,r){switch(t){case"color":var n=i.ensureUniqueItemVisual(e,"style");n[i.getVisual("drawType")]=r,i.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":i.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":i.setItemVisual(e,t,r);break;default:}}function WE(i,e){function t(r,n){var a=[];return r.eachComponent({mainType:"series",subType:i,query:n},function(o){a.push(o.seriesIndex)}),a}W([[i+"ToggleSelect","toggleSelect"],[i+"Select","select"],[i+"UnSelect","unselect"]],function(r){e(r[0],function(n,a,o){n=Ce({},n),o.dispatchAction(Ce(n,{type:r[1],seriesIndex:t(a,n)}))})})}function H0(i,e,t,r,n){var a=i+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,c=n.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var h=o.getData(),d=Bc(h,n.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:Ee(d)?h.getName(d[0]):h.getName(d),selected:Ye(l)?l:Ce({},l)})}})}function cj(i,e,t){i.on("selectchanged",function(r){var n=t.getModel();r.isFromClick?(H0("map","selectchanged",e,n,r),H0("pie","selectchanged",e,n,r)):r.fromAction==="select"?(H0("map","selected",e,n,r),H0("pie","selected",e,n,r)):r.fromAction==="unselect"&&(H0("map","unselected",e,n,r),H0("pie","unselected",e,n,r))})}function Ru(i,e,t){for(var r;i&&!(e(i)&&(r=i,t));)i=i.__hostTarget||i.parent;return r}var ixe=Math.round(Math.random()*9),rxe=typeof Object.defineProperty=="function",nxe=function(){function i(){this._id="__ec_inner_"+ixe++}return i.prototype.get=function(e){return this._guard(e)[this._id]},i.prototype.set=function(e,t){var r=this._guard(e);return rxe?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},i.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},i.prototype.has=function(e){return!!this._guard(e)[this._id]},i.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},i}(),uj=nxe;var axe=Kt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(i,e){var t=e.cx,r=e.cy,n=e.width/2,a=e.height/2;i.moveTo(t,r-a),i.lineTo(t+n,r+a),i.lineTo(t-n,r+a),i.closePath()}}),oxe=Kt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(i,e){var t=e.cx,r=e.cy,n=e.width/2,a=e.height/2;i.moveTo(t,r-a),i.lineTo(t+n,r),i.lineTo(t,r+a),i.lineTo(t-n,r),i.closePath()}}),sxe=Kt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(i,e){var t=e.x,r=e.y,n=e.width/5*3,a=Math.max(n,e.height),o=n/2,s=o*o/(a-o),l=r-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,h=Math.sin(c),d=Math.cos(c),f=o*.6,m=o*.7;i.moveTo(t-u,l+s),i.arc(t,l,o,Math.PI-c,Math.PI*2+c),i.bezierCurveTo(t+u-h*f,l+s+d*f,t,r-m,t,r),i.bezierCurveTo(t,r-m,t-u+h*f,l+s+d*f,t-u,l+s),i.closePath()}}),lxe=Kt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(i,e){var t=e.height,r=e.width,n=e.x,a=e.y,o=r/3*2;i.moveTo(n,a),i.lineTo(n+o,a+t),i.lineTo(n,a+t/4*3),i.lineTo(n-o,a+t),i.lineTo(n,a),i.closePath()}}),cxe={line:Xn,rect:pi,roundRect:pi,square:pi,circle:Vs,diamond:oxe,pin:sxe,arrow:lxe,triangle:axe},uxe={line:function(i,e,t,r,n){n.x1=i,n.y1=e+r/2,n.x2=i+t,n.y2=e+r/2},rect:function(i,e,t,r,n){n.x=i,n.y=e,n.width=t,n.height=r},roundRect:function(i,e,t,r,n){n.x=i,n.y=e,n.width=t,n.height=r,n.r=Math.min(t,r)/4},square:function(i,e,t,r,n){var a=Math.min(t,r);n.x=i,n.y=e,n.width=a,n.height=a},circle:function(i,e,t,r,n){n.cx=i+t/2,n.cy=e+r/2,n.r=Math.min(t,r)/2},diamond:function(i,e,t,r,n){n.cx=i+t/2,n.cy=e+r/2,n.width=t,n.height=r},pin:function(i,e,t,r,n){n.x=i+t/2,n.y=e+r/2,n.width=t,n.height=r},arrow:function(i,e,t,r,n){n.x=i+t/2,n.y=e+r/2,n.width=t,n.height=r},triangle:function(i,e,t,r,n){n.cx=i+t/2,n.cy=e+r/2,n.width=t,n.height=r}},Xx={};W(cxe,function(i,e){Xx[e]=new i});var hxe=Kt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(i,e,t){var r=YA(i,e,t),n=this.shape;return n&&n.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(i,e,t){var r=e.symbolType;if(r!=="none"){var n=Xx[r];n||(r="rect",n=Xx[r]),uxe[r](e.x,e.y,e.width,e.height,n.shape),n.buildPath(i,n.shape,t)}}});function dxe(i,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=i,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=i:t.fill=i,this.markRedraw()}}function Nr(i,e,t,r,n,a,o){var s=i.indexOf("empty")===0;s&&(i=i.substr(5,1).toLowerCase()+i.substr(6));var l;return i.indexOf("image://")===0?l=vL(i.slice(8),new Ht(e,t,r,n),o?"center":"cover"):i.indexOf("path://")===0?l=I0(i.slice(7),{},new Ht(e,t,r,n),o?"center":"cover"):l=new hxe({shape:{symbolType:i,x:e,y:t,width:r,height:n}}),l.__isEmptyBrush=s,l.setColor=dxe,a&&l.setColor(a),l}function Pu(i){return Ee(i)||(i=[+i,+i]),[i[0]||0,i[1]||0]}function tc(i,e){if(i!=null)return Ee(i)||(i=[i,i]),[ot(i[0],e[0])||0,ot(Yt(i[1],i[0]),e[1])||0]}function bm(i){return isFinite(i)}function fxe(i,e,t){var r=e.x==null?0:e.x,n=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,n=n*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=bm(r)?r:0,n=bm(n)?n:1,a=bm(a)?a:0,o=bm(o)?o:0;var s=i.createLinearGradient(r,a,n,o);return s}function pxe(i,e,t){var r=t.width,n=t.height,a=Math.min(r,n),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*n+t.y,l=l*a),o=bm(o)?o:.5,s=bm(s)?s:.5,l=l>=0&&bm(l)?l:.5;var c=i.createRadialGradient(o,s,0,o,s,l);return c}function Yx(i,e,t){for(var r=e.type==="radial"?pxe(i,e,t):fxe(i,e,t),n=e.colorStops,a=0;a<n.length;a++)r.addColorStop(n[a].offset,n[a].color);return r}function dj(i,e){if(i===e||!i&&!e)return!1;if(!i||!e||i.length!==e.length)return!0;for(var t=0;t<i.length;t++)if(i[t]!==e[t])return!0;return!1}function jE(i){return parseInt(i,10)}function tp(i,e,t){var r=["width","height"][e],n=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(i);return(i[n]||jE(s[r])||jE(i.style[r]))-(jE(s[a])||0)-(jE(s[o])||0)|0}function Axe(i,e){return!i||i==="solid"||!(e>0)?null:i==="dashed"?[4*e,2*e]:i==="dotted"?[e]:mi(i)?[i]:Ee(i)?i:null}function qx(i){var e=i.style,t=e.lineDash&&e.lineWidth>0&&Axe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var n=e.strokeNoScale&&i.getLineScale?i.getLineScale():1;n&&n!==1&&(t=Me(t,function(a){return a/n}),r/=n)}return[t,r]}var mxe=new To(!0);function KE(i){var e=i.stroke;return!(e==null||e==="none"||!(i.lineWidth>0))}function fj(i){return typeof i=="string"&&i!=="none"}function XE(i){var e=i.fill;return e!=null&&e!=="none"}function pj(i,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=i.globalAlpha;i.globalAlpha=e.fillOpacity*e.opacity,i.fill(),i.globalAlpha=t}else i.fill()}function Aj(i,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=i.globalAlpha;i.globalAlpha=e.strokeOpacity*e.opacity,i.stroke(),i.globalAlpha=t}else i.stroke()}function YE(i,e,t){var r=cx(e.image,e.__image,t);if(v0(r)){var n=i.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*t0),a.scaleSelf(e.scaleX||1,e.scaleY||1),n.setTransform(a)}return n}}function gxe(i,e,t,r){var n,a=KE(t),o=XE(t),s=t.strokePercent,l=s<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||mxe,h=e.__dirty;if(!r){var d=t.fill,f=t.stroke,m=o&&!!d.colorStops,y=a&&!!f.colorStops,g=o&&!!d.image,x=a&&!!f.image,b=void 0,S=void 0,E=void 0,D=void 0,B=void 0;(m||y)&&(B=e.getBoundingRect()),m&&(b=h?Yx(i,d,B):e.__canvasFillGradient,e.__canvasFillGradient=b),y&&(S=h?Yx(i,f,B):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),g&&(E=h||!e.__canvasFillPattern?YE(i,d,e):e.__canvasFillPattern,e.__canvasFillPattern=E),x&&(D=h||!e.__canvasStrokePattern?YE(i,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=E),m?i.fillStyle=b:g&&(E?i.fillStyle=E:o=!1),y?i.strokeStyle=S:x&&(D?i.strokeStyle=D:a=!1)}var F=e.getGlobalScale();u.setScale(F[0],F[1],e.segmentIgnoreThreshold);var H,U;i.setLineDash&&t.lineDash&&(n=qx(e),H=n[0],U=n[1]);var k=!0;(c||h&Of)&&(u.setDPR(i.dpr),l?u.setContext(null):(u.setContext(i),k=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),k&&u.rebuildPath(i,l?s:1),H&&(i.setLineDash(H),i.lineDashOffset=U),r||(t.strokeFirst?(a&&Aj(i,t),o&&pj(i,t)):(o&&pj(i,t),a&&Aj(i,t))),H&&i.setLineDash([])}function vxe(i,e,t){var r=e.__image=cx(t.image,e.__image,e,e.onload);if(!(!r||!v0(r))){var n=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;i.drawImage(r,c,u,t.sWidth,t.sHeight,n,a,o,s)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,h=o-c,d=s-u;i.drawImage(r,c,u,h,d,n,a,o,s)}else i.drawImage(r,n,a,o,s)}}function yxe(i,e,t){var r,n=t.text;if(n!=null&&(n+=""),n){i.font=t.font||Wl,i.textAlign=t.textAlign,i.textBaseline=t.textBaseline;var a=void 0,o=void 0;i.setLineDash&&t.lineDash&&(r=qx(e),a=r[0],o=r[1]),a&&(i.setLineDash(a),i.lineDashOffset=o),t.strokeFirst?(KE(t)&&i.strokeText(n,t.x,t.y),XE(t)&&i.fillText(n,t.x,t.y)):(XE(t)&&i.fillText(n,t.x,t.y),KE(t)&&i.strokeText(n,t.x,t.y)),a&&i.setLineDash([])}}var mj=["shadowBlur","shadowOffsetX","shadowOffsetY"],gj=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bj(i,e,t,r,n){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){bl(i,n),a=!0;var o=Math.max(Math.min(e.opacity,1),0);i.globalAlpha=isNaN(o)?fh.opacity:o}(r||e.blend!==t.blend)&&(a||(bl(i,n),a=!0),i.globalCompositeOperation=e.blend||fh.blend);for(var s=0;s<mj.length;s++){var l=mj[s];(r||e[l]!==t[l])&&(a||(bl(i,n),a=!0),i[l]=i.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(bl(i,n),a=!0),i.shadowColor=e.shadowColor||fh.shadowColor),a}function vj(i,e,t,r,n){var a=Zx(e,n.inHover),o=r?null:t&&Zx(t,n.inHover)||{};if(a===o)return!1;var s=bj(i,a,o,r,n);if((r||a.fill!==o.fill)&&(s||(bl(i,n),s=!0),fj(a.fill)&&(i.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(bl(i,n),s=!0),fj(a.stroke)&&(i.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(bl(i,n),s=!0),i.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,c=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);i.lineWidth!==c&&(s||(bl(i,n),s=!0),i.lineWidth=c)}for(var u=0;u<gj.length;u++){var h=gj[u],d=h[0];(r||a[d]!==o[d])&&(s||(bl(i,n),s=!0),i[d]=a[d]||h[1])}return s}function xxe(i,e,t,r,n){return bj(i,Zx(e,n.inHover),t&&Zx(t,n.inHover),r,n)}function Sj(i,e){var t=e.transform,r=i.dpr||1;t?i.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):i.setTransform(r,0,0,r,0,0)}function _xe(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];r=r||a.isZeroArea(),Sj(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function wxe(i,e){return i&&e?i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]||i[4]!==e[4]||i[5]!==e[5]:!(!i&&!e)}var yj=1,xj=2,_j=3,wj=4;function bxe(i){var e=XE(i),t=KE(i);return!(i.lineDash||!(+e^+t)||e&&typeof i.fill!="string"||t&&typeof i.stroke!="string"||i.strokePercent<1||i.strokeOpacity<1||i.fillOpacity<1)}function bl(i,e){e.batchFill&&i.fill(),e.batchStroke&&i.stroke(),e.batchFill="",e.batchStroke=""}function Zx(i,e){return e&&i.__hoverStyle||i.style}function qE(i,e){ip(i,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ip(i,e,t,r){var n=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~lo,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,l=!1;if((!o||dj(a,o))&&(o&&o.length&&(bl(i,t),i.restore(),l=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(bl(i,t),i.save(),_xe(a,i,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=s=!0);var u=e instanceof Kt&&e.autoBatch&&bxe(e.style);s||wxe(n,c.transform)?(bl(i,t),Sj(i,e)):u||bl(i,t);var h=Zx(e,t.inHover);e instanceof Kt?(t.lastDrawType!==yj&&(l=!0,t.lastDrawType=yj),vj(i,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&i.beginPath(),gxe(i,e,h,u),u&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof ld?(t.lastDrawType!==_j&&(l=!0,t.lastDrawType=_j),vj(i,e,c,l,t),yxe(i,e,h)):e instanceof yn?(t.lastDrawType!==xj&&(l=!0,t.lastDrawType=xj),xxe(i,e,c,l,t),vxe(i,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==wj&&(l=!0,t.lastDrawType=wj),Sxe(i,e,t)),u&&r&&bl(i,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Sxe(i,e,t){var r=e.getDisplayables(),n=e.getTemporalDisplayables();i.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ip(i,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var c=0,u=n.length;c<u;c++){var l=n[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ip(i,l,a,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,i.restore()}var v3=new uj,Cj=new ad(100),Ej=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Lu(i,e){if(i==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),n=r.painter.type==="svg";i.dirty&&v3.delete(i);var a=v3.get(i);if(a)return a;var o=At(i,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=n?1:1/t,v3.set(i,s),i.dirty=!1,s;function l(c){for(var u=[t],h=!0,d=0;d<Ej.length;++d){var f=o[Ej[d]];if(f!=null&&!Ee(f)&&!Ye(f)&&!mi(f)&&typeof f!="boolean"){h=!1;break}u.push(f)}var m;if(h){m=u.join(",")+(n?"-svg":"");var y=Cj.get(m);y&&(n?c.svgElement=y:c.image=y)}var g=Mj(o.dashArrayX),x=Cxe(o.dashArrayY),b=Tj(o.symbol),S=Exe(g),E=Ij(x),D=!n&&xs.createCanvas(),B=n&&{tag:"g",attrs:{},key:"dcl",children:[]},F=U(),H;D&&(D.width=F.width*t,D.height=F.height*t,H=D.getContext("2d")),k(),h&&Cj.put(m,D||B),c.image=D,c.svgElement=B,c.svgWidth=F.width,c.svgHeight=F.height;function U(){for(var j=1,q=0,X=S.length;q<X;++q)j=PP(j,S[q]);for(var Y=1,q=0,X=b.length;q<X;++q)Y=PP(Y,b[q].length);j*=Y;var J=E*S.length*b.length;if(!1)var te;return{width:Math.max(1,Math.min(j,o.maxTileWidth)),height:Math.max(1,Math.min(J,o.maxTileHeight))}}function k(){H&&(H.clearRect(0,0,D.width,D.height),o.backgroundColor&&(H.fillStyle=o.backgroundColor,H.fillRect(0,0,D.width,D.height)));for(var j=0,q=0;q<x.length;++q)j+=x[q];if(j<=0)return;for(var X=-E,Y=0,J=0,te=0;X<F.height;){if(Y%2===0){for(var de=J/2%b.length,ue=0,ve=0,_e=0;ue<F.width*2;){for(var Re=0,q=0;q<g[te].length;++q)Re+=g[te][q];if(Re<=0)break;if(ve%2===0){var Oe=(1-o.symbolSize)*.5,Te=ue+g[te][ve]*Oe,Se=X+x[Y]*Oe,nt=g[te][ve]*o.symbolSize,rt=x[Y]*o.symbolSize,dt=_e/2%b[de].length;tt(Te,Se,nt,rt,b[de][dt])}ue+=g[te][ve],++_e,++ve,ve===g[te].length&&(ve=0)}++te,te===g.length&&(te=0)}X+=x[Y],++J,++Y,Y===x.length&&(Y=0)}function tt(ht,pt,Je,Ie,Bi){var _t=n?1:t,It=Nr(Bi,ht*_t,pt*_t,Je*_t,Ie*_t,o.color,o.symbolKeepAspect);if(n){var Ct=r.painter.renderOneToVNode(It);Ct&&B.children.push(Ct)}else qE(H,It)}}}}function Tj(i){if(!i||i.length===0)return[["rect"]];if(Ye(i))return[[i]];for(var e=!0,t=0;t<i.length;++t)if(!Ye(i[t])){e=!1;break}if(e)return Tj([i]);for(var r=[],t=0;t<i.length;++t)Ye(i[t])?r.push([i[t]]):r.push(i[t]);return r}function Mj(i){if(!i||i.length===0)return[[0,0]];if(mi(i)){var e=Math.ceil(i);return[[e,e]]}for(var t=!0,r=0;r<i.length;++r)if(!mi(i[r])){t=!1;break}if(t)return Mj([i]);for(var n=[],r=0;r<i.length;++r)if(mi(i[r])){var e=Math.ceil(i[r]);n.push([e,e])}else{var e=Me(i[r],function(s){return Math.ceil(s)});e.length%2===1?n.push(e.concat(e)):n.push(e)}return n}function Cxe(i){if(!i||typeof i=="object"&&i.length===0)return[0,0];if(mi(i)){var e=Math.ceil(i);return[e,e]}var t=Me(i,function(r){return Math.ceil(r)});return i.length%2?t.concat(t):t}function Exe(i){return Me(i,function(e){return Ij(e)})}function Ij(i){for(var e=0,t=0;t<i.length;++t)e+=i[t];return i.length%2===1?e*2:e}function y3(i,e){i.eachRawSeries(function(t){if(!i.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=Lu(s,e)}});var n=r.getVisual("decal");if(n){var a=r.getVisual("style");a.decal=Lu(n,e)}}})}var Txe=new $a,kc=Txe;var Bj={};function Dj(i,e){Bj[i]=e}function Rj(i){return Bj[i]}var Mxe=1,Ixe=800,Bxe=900,Dxe=1e3,Rxe=2e3,Pxe=5e3,Hj=1e3,Lxe=1100,B3=2e3,Qj=3e3,Oxe=4e3,t2=4500,Fxe=4600,Nxe=5e3,Uxe=6e3,Gj=7e3,Wj={PROCESSOR:{FILTER:Dxe,SERIES_FILTER:Ixe,STATISTIC:Pxe},VISUAL:{LAYOUT:Hj,PROGRESSIVE_LAYOUT:Lxe,GLOBAL:B3,CHART:Qj,POST_CHART_LAYOUT:Fxe,COMPONENT:Oxe,BRUSH:Nxe,CHART_ITEM:t2,ARIA:Uxe,DECAL:Gj}},Ts="__flagInMainProcess",Sl="__pendingUpdate",x3="__needsUpdateStatus",Pj=/^[a-zA-Z0-9_]+$/,_3="__connectUpdateStatus",Lj=0,kxe=1,zxe=2;function jj(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return Xj(this,i,e)}}function Kj(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Xj(this,i,e)}}function Xj(i,e,t){return t[0]=t[0]&&t[0].toLowerCase(),$a.prototype[e].apply(i,t)}var Yj=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}($a),qj=Yj.prototype;qj.on=Kj("on");qj.off=Kj("off");var Q0,w3,ZE,rp,b3,S3,C3,Jx,$x,Oj,Fj,E3,Nj,JE,Uj,Zj,zc,kj,Jj=function(i){le(e,i);function e(t,r,n){var a=i.call(this,new aj)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],n=n||{},Ye(r)&&(r=$j[r]),a._dom=t;var o="canvas",s="auto",l=!1;if(!1)var c;n.ssr&&m7(function(f){var m=Pt(f),y=m.dataIndex;if(y!=null){var g=ct();return g.set("series_index",m.seriesIndex),g.set("data_index",y),m.ssrType&&g.set("ssr_type",m.ssrType),g}});var u=a._zr=IP(t,{renderer:n.renderer||o,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Yt(n.useDirtyRect,l),useCoarsePointer:Yt(n.useCoarsePointer,s),pointerSize:n.pointerSize});a._ssr=n.ssr,a._throttledZrFlush=Gx(st(u.flush,u),17),r=Tt(r),r&&CE(r,!0),a._theme=r,a._locale=P9(n.locale||cE),a._coordSysMgr=new xd;var h=a._api=Uj(a);function d(f,m){return f.__prio-m.__prio}return NA(e2,d),NA(T3,d),a._scheduler=new A3(a,h,T3,e2),a._messageCenter=new Yj,a._initEvents(),a.resize=st(a.resize,a),u.animation.on("frame",a._onframe,a),Oj(u,a),Fj(u,a),DA(a),a}return e.prototype._onframe=function(){if(!this._disposed){kj(this);var t=this._scheduler;if(this[Sl]){var r=this[Sl].silent;this[Ts]=!0;try{Q0(this),rp.update.call(this,null,this[Sl].updateParams)}catch(l){throw this[Ts]=!1,this[Sl]=null,l}this._zr.flush(),this[Ts]=!1,this[Sl]=null,Jx.call(this,r),$x.call(this,r)}else if(t.unfinished){var n=Mxe,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),S3(this,a),t.performVisualTasks(a),JE(this,this._model,o,"remain",{}),n-=+new Date-s}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,n){if(!this[Ts]){if(this._disposed){this.id;return}var a,o,s;if(yt(r)&&(n=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[Ts]=!0,!this._model||r){var l=new sW(this._api),c=this._theme,u=this._model=new bE;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:o},M3);var h={seriesTransition:s,optionChanged:!0};if(n)this[Sl]={silent:a,updateParams:h},this[Ts]=!1,this.getZr().wakeUp();else{try{Q0(this),rp.update.call(this,null,h)}catch(d){throw this[Sl]=null,this[Ts]=!1,d}this._ssr||this._zr.flush(),this[Sl]=null,this[Ts]=!1,Jx.call(this,a),$x.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||ki.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(ki.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return W(r,function(n){n.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,n=this._model,a=[],o=this;W(r,function(l){n.eachComponent({mainType:l},function(c){var u=o._componentsMap[c.__viewId];u.group.ignore||(a.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return W(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",n=this.group,a=Math.min,o=Math.max,s=1/0;if(zj[n]){var l=s,c=s,u=-s,h=-s,d=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();W(t_,function(S,E){if(S.group===n){var D=r?S.getZr().painter.getSvgDom().innerHTML:S.renderToCanvas(Tt(t)),B=S.getDom().getBoundingClientRect();l=a(B.left,l),c=a(B.top,c),u=o(B.right,u),h=o(B.bottom,h),d.push({dom:D,left:B.left,top:B.top})}}),l*=f,c*=f,u*=f,h*=f;var m=u-l,y=h-c,g=xs.createCanvas(),x=IP(g,{renderer:r?"svg":"canvas"});if(x.resize({width:m,height:y}),r){var b="";return W(d,function(S){var E=S.left-l,D=S.top-c;b+='<g transform="translate('+E+","+D+')">'+S.dom+"</g>"}),x.painter.getSvgRoot().innerHTML=b,t.connectedBackgroundColor&&x.painter.setBackgroundColor(t.connectedBackgroundColor),x.refreshImmediately(),x.painter.toDataURL()}else return t.connectedBackgroundColor&&x.add(new pi({shape:{x:0,y:0,width:m,height:y},style:{fill:t.connectedBackgroundColor}})),W(d,function(S){var E=new yn({style:{x:S.left*f-l,y:S.top*f-c,image:S.dom}});x.add(E)}),x.refreshImmediately(),g.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return b3(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return b3(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var n=this._model,a,o=Vf(n,t);return W(o,function(s,l){l.indexOf("Models")>=0&&W(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)a=a||!!u.containPoint(r);else if(l==="seriesModels"){var h=this._chartsMap[c.__viewId];h&&h.containPoint&&(a=a||h.containPoint(r,c))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var n=this._model,a=Vf(n,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?Kx(s,l,r):wh(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;W(Vxe,function(r){var n=function(a){var o=t.getModel(),s=a.target,l,c=r==="globalout";if(c?l={}:s&&Ru(s,function(m){var y=Pt(m);if(y&&y.dataIndex!=null){var g=y.dataModel||o.getSeriesByIndex(y.seriesIndex);return l=g&&g.getDataParams(y.dataIndex,y.dataType,s)||{},!0}else if(y.eventData)return l=Ce({},y.eventData),!0},!0),l){var u=l.componentType,h=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",h=l.seriesIndex);var d=u&&h!=null&&o.getComponent(u,h),f=d&&t[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:d,view:f},t.trigger(r,l)}};n.zrEventfulCallAtLast=!0,t._zr.on(r,n,t)}),W(e_,function(r,n){t._messageCenter.on(n,function(a){this.trigger(n,a)},t)}),W(["selectchanged"],function(r){t._messageCenter.on(r,function(n){this.trigger(r,n)},t)}),cj(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&OP(this.getDom(),R3,"");var r=this,n=r._api,a=r._model;W(r._componentsViews,function(o){o.dispose(a,n)}),W(r._chartsViews,function(o){o.dispose(a,n)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete t_[r.id]},e.prototype.resize=function(t){if(!this[Ts]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var n=r.resetOption("media"),a=t&&t.silent;this[Sl]&&(a==null&&(a=this[Sl].silent),n=!0,this[Sl]=null),this[Ts]=!0;try{n&&Q0(this),rp.update.call(this,{type:"resize",animation:Ce({duration:0},t&&t.animation)})}catch(o){throw this[Ts]=!1,o}this[Ts]=!1,Jx.call(this,a),$x.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(yt(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!I3[t]){var n=I3[t](this._api,r),a=this._zr;this._loadingFX=n,a.add(n)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Ce({},t);return r.type=e_[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(yt(r)||(r={silent:!!r}),!!$E[t.type]&&this._model){if(this[Ts]){this._pendingActions.push(t);return}var n=r.silent;C3.call(this,t,n);var a=r.flush;a?this._zr.flush():a!==!1&&ki.browser.weChat&&this._throttledZrFlush(),Jx.call(this,n),$x.call(this,n)}},e.prototype.updateLabelLayout=function(){kc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,n=this.getModel(),a=n.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Q0=function(h){var d=h._scheduler;d.restorePipelines(h._model),d.prepareStageTasks(),w3(h,!0),w3(h,!1),d.plan()},w3=function(h,d){for(var f=h._model,m=h._scheduler,y=d?h._componentsViews:h._chartsViews,g=d?h._componentsMap:h._chartsMap,x=h._zr,b=h._api,S=0;S<y.length;S++)y[S].__alive=!1;d?f.eachComponent(function(B,F){B!=="series"&&E(F)}):f.eachSeries(E);function E(B){var F=B.__requireNewView;B.__requireNewView=!1;var H="_ec_"+B.id+"_"+B.type,U=!F&&g[H];if(!U){var k=ml(B.type),j=d?hr.getClass(k.main,k.sub):qi.getClass(k.sub);U=new j,U.init(f,b),g[H]=U,y.push(U),x.add(U.group)}B.__viewId=U.__id=H,U.__alive=!0,U.__model=B,U.group.__ecComponentInfo={mainType:B.mainType,index:B.componentIndex},!d&&m.prepareView(U,B,f,b)}for(var S=0;S<y.length;){var D=y[S];D.__alive?S++:(!d&&D.renderTask.dispose(),x.remove(D.group),D.dispose(f,b),y.splice(S,1),g[D.__id]===D&&delete g[D.__id],D.__id=D.group.__ecComponentInfo=null)}},ZE=function(h,d,f,m,y){var g=h._model;if(g.setUpdatePayload(f),!m){W([].concat(h._componentsViews).concat(h._chartsViews),D);return}var x={};x[m+"Id"]=f[m+"Id"],x[m+"Index"]=f[m+"Index"],x[m+"Name"]=f[m+"Name"];var b={mainType:m,query:x};y&&(b.subType=y);var S=f.excludeSeriesId,E;S!=null&&(E=ct(),W(cr(S),function(B){var F=kn(B,null);F!=null&&E.set(F,!0)})),g&&g.eachComponent(b,function(B){var F=E&&E.get(B.id)!=null;if(!F)if(uL(f))if(B instanceof rr)f.type===Yf&&!f.notBlur&&!B.get(["emphasis","disabled"])&&LG(B,f,h._api);else{var H=QC(B.mainType,B.componentIndex,f.name,h._api),U=H.focusSelf,k=H.dispatchers;f.type===Yf&&U&&!f.notBlur&&zC(B.mainType,B.componentIndex,h._api),k&&W(k,function(j){f.type===Yf?_s(j):ws(j)})}else WC(f)&&B instanceof rr&&(NG(B,f,h._api),cL(B),zc(h))},h),g&&g.eachComponent(b,function(B){var F=E&&E.get(B.id)!=null;F||D(h[m==="series"?"_chartsMap":"_componentsMap"][B.__viewId])},h);function D(B){B&&B.__alive&&B[d]&&B[d](B.__model,g,h._api,f)}},rp={prepareAndUpdate:function(h){Q0(this),rp.update.call(this,h,{optionChanged:h.newOption!=null})},update:function(h,d){var f=this._model,m=this._api,y=this._zr,g=this._coordSysMgr,x=this._scheduler;if(f){f.setUpdatePayload(h),x.restoreData(f,h),x.performSeriesTasks(f),g.create(f,m),x.performDataProcessorTasks(f,h),S3(this,f),g.update(f,m),t(f),x.performVisualTasks(f,h),E3(this,f,m,h,d);var b=f.get("backgroundColor")||"transparent",S=f.get("darkMode");y.setBackgroundColor(b),S!=null&&S!=="auto"&&y.setDarkMode(S),kc.trigger("afterupdate",f,m)}},updateTransform:function(h){var d=this,f=this._model,m=this._api;if(f){f.setUpdatePayload(h);var y=[];f.eachComponent(function(x,b){if(x!=="series"){var S=d.getViewOfComponentModel(b);if(S&&S.__alive)if(S.updateTransform){var E=S.updateTransform(b,f,m,h);E&&E.update&&y.push(S)}else y.push(S)}});var g=ct();f.eachSeries(function(x){var b=d._chartsMap[x.__viewId];if(b.updateTransform){var S=b.updateTransform(x,f,m,h);S&&S.update&&g.set(x.uid,1)}else g.set(x.uid,1)}),t(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0,dirtyMap:g}),JE(this,f,m,h,{},g),kc.trigger("afterupdate",f,m)}},updateView:function(h){var d=this._model;d&&(d.setUpdatePayload(h),qi.markUpdateMethod(h,"updateView"),t(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0}),E3(this,d,this._api,h,{}),kc.trigger("afterupdate",d,this._api))},updateVisual:function(h){var d=this,f=this._model;f&&(f.setUpdatePayload(h),f.eachSeries(function(m){m.getData().clearAllVisual()}),qi.markUpdateMethod(h,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,h,{visualType:"visual",setDirty:!0}),f.eachComponent(function(m,y){if(m!=="series"){var g=d.getViewOfComponentModel(y);g&&g.__alive&&g.updateVisual(y,f,d._api,h)}}),f.eachSeries(function(m){var y=d._chartsMap[m.__viewId];y.updateVisual(m,f,d._api,h)}),kc.trigger("afterupdate",f,this._api))},updateLayout:function(h){rp.update.call(this,h)}},b3=function(h,d,f,m){if(h._disposed){h.id;return}for(var y=h._model,g=h._coordSysMgr.getCoordinateSystems(),x,b=Vf(y,f),S=0;S<g.length;S++){var E=g[S];if(E[d]&&(x=E[d](y,b,m))!=null)return x}},S3=function(h,d){var f=h._chartsMap,m=h._scheduler;d.eachSeries(function(y){m.updateStreamModes(y,f[y.__viewId])})},C3=function(h,d){var f=this,m=this.getModel(),y=h.type,g=h.escapeConnect,x=$E[y],b=x.actionInfo,S=(b.update||"update").split(":"),E=S.pop(),D=S[0]!=null&&ml(S[0]);this[Ts]=!0;var B=[h],F=!1;h.batch&&(F=!0,B=Me(h.batch,function(Y){return Y=At(Ce({},Y),h),Y.batch=null,Y}));var H=[],U,k=WC(h),j=uL(h);if(j&&lL(this._api),W(B,function(Y){if(U=x.action(Y,f._model,f._api),U=U||Ce({},Y),U.type=b.event||U.type,H.push(U),j){var J=sx(h),te=J.queryOptionMap,de=J.mainTypeSpecified,ue=de?te.keys()[0]:"series";ZE(f,E,Y,ue),zc(f)}else k?(ZE(f,E,Y,"series"),zc(f)):D&&ZE(f,E,Y,D.main,D.sub)}),E!=="none"&&!j&&!k&&!D)try{this[Sl]?(Q0(this),rp.update.call(this,h),this[Sl]=null):rp[E].call(this,h)}catch(Y){throw this[Ts]=!1,Y}if(F?U={type:b.event||y,escapeConnect:g,batch:H}:U=H[0],this[Ts]=!1,!d){var q=this._messageCenter;if(q.trigger(U.type,U),k){var X={type:"selectchanged",escapeConnect:g,selected:UG(m),isFromClick:h.isFromClick||!1,fromAction:h.type,fromActionPayload:h};q.trigger(X.type,X)}}},Jx=function(h){for(var d=this._pendingActions;d.length;){var f=d.shift();C3.call(this,f,h)}},$x=function(h){!h&&this.trigger("updated")},Oj=function(h,d){h.on("rendered",function(f){d.trigger("rendered",f),h.animation.isFinished()&&!d[Sl]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},Fj=function(h,d){h.on("mouseover",function(f){var m=f.target,y=Ru(m,qf);y&&(OG(y,f,d._api),zc(d))}).on("mouseout",function(f){var m=f.target,y=Ru(m,qf);y&&(FG(y,f,d._api),zc(d))}).on("click",function(f){var m=f.target,y=Ru(m,function(b){return Pt(b).dataIndex!=null},!0);if(y){var g=y.selected?"unselect":"select",x=Pt(y);d._api.dispatchAction({type:g,dataType:x.dataType,dataIndexInside:x.dataIndex,seriesIndex:x.seriesIndex,isFromClick:!0})}})};function t(h){h.clearColorPalette(),h.eachSeries(function(d){d.clearColorPalette()})}function r(h){var d=[],f=[],m=!1;if(h.eachComponent(function(b,S){var E=S.get("zlevel")||0,D=S.get("z")||0,B=S.getZLevelKey();m=m||!!B,(b==="series"?f:d).push({zlevel:E,z:D,idx:S.componentIndex,type:b,key:B})}),m){var y=d.concat(f),g,x;NA(y,function(b,S){return b.zlevel===S.zlevel?b.z-S.z:b.zlevel-S.zlevel}),W(y,function(b){var S=h.getComponent(b.type,b.idx),E=b.zlevel,D=b.key;g!=null&&(E=Math.max(g,E)),D?(E===g&&D!==x&&E++,x=D):x&&(E===g&&E++,x=""),g=E,S.setZLevel(E)})}}E3=function(h,d,f,m,y){r(d),Nj(h,d,f,m,y),W(h._chartsViews,function(g){g.__alive=!1}),JE(h,d,f,m,y),W(h._chartsViews,function(g){g.__alive||g.remove(d,f)})},Nj=function(h,d,f,m,y,g){W(g||h._componentsViews,function(x){var b=x.__model;c(b,x),x.render(b,d,f,m),s(b,x),u(b,x)})},JE=function(h,d,f,m,y,g){var x=h._scheduler;y=Ce(y||{},{updatedSeries:d.getSeries()}),kc.trigger("series:beforeupdate",d,f,y);var b=!1;d.eachSeries(function(S){var E=h._chartsMap[S.__viewId];E.__alive=!0;var D=E.renderTask;x.updatePayload(D,m),c(S,E),g&&g.get(S.uid)&&D.dirty(),D.perform(x.getPerformArgs(D))&&(b=!0),E.group.silent=!!S.get("silent"),o(S,E),cL(S)}),x.unfinished=b||x.unfinished,kc.trigger("series:layoutlabels",d,f,y),kc.trigger("series:transition",d,f,y),d.eachSeries(function(S){var E=h._chartsMap[S.__viewId];s(S,E),u(S,E)}),a(h,d),kc.trigger("series:afterupdate",d,f,y)},zc=function(h){h[x3]=!0,h.getZr().wakeUp()},kj=function(h){h[x3]&&(h.getZr().storage.traverse(function(d){dd(d)||n(d)}),h[x3]=!1)};function n(h){for(var d=[],f=h.currentStates,m=0;m<f.length;m++){var y=f[m];y==="emphasis"||y==="blur"||y==="select"||d.push(y)}h.selected&&h.states.select&&d.push("select"),h.hoverState===px&&h.states.emphasis?d.push("emphasis"):h.hoverState===om&&h.states.blur&&d.push("blur"),h.useStates(d)}function a(h,d){var f=h._zr,m=f.storage,y=0;m.traverse(function(g){g.isGroup||y++}),y>d.get("hoverLayerThreshold")&&!ki.node&&!ki.worker&&d.eachSeries(function(g){if(!g.preventUsingHoverLayer){var x=h._chartsMap[g.__viewId];x.__alive&&x.eachRendered(function(b){b.states.emphasis&&(b.states.emphasis.hoverLayer=!0)})}})}function o(h,d){var f=h.get("blendMode")||null;d.eachRendered(function(m){m.isGroup||(m.style.blend=f)})}function s(h,d){if(!h.preventAutoZ){var f=h.get("z")||0,m=h.get("zlevel")||0;d.eachRendered(function(y){return l(y,f,m,-1/0),!0})}}function l(h,d,f,m){var y=h.getTextContent(),g=h.getTextGuideLine(),x=h.isGroup;if(x)for(var b=h.childrenRef(),S=0;S<b.length;S++)m=Math.max(l(b[S],d,f,m),m);else h.z=d,h.zlevel=f,m=Math.max(h.z2,m);if(y&&(y.z=d,y.zlevel=f,isFinite(m)&&(y.z2=m+2)),g){var E=h.textGuideLineConfig;g.z=d,g.zlevel=f,isFinite(m)&&(g.z2=m+(E&&E.showAbove?1:-1))}return m}function c(h,d){d.eachRendered(function(f){if(!dd(f)){var m=f.getTextContent(),y=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(h,d){var f=h.getModel("stateAnimation"),m=h.isAnimationEnabled(),y=f.get("duration"),g=y>0?{duration:y,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(x){if(x.states&&x.states.emphasis){if(dd(x))return;if(x instanceof Kt&&VG(x),x.__dirty){var b=x.prevStates;b&&x.useStates(b)}if(m){x.stateTransition=g;var S=x.getTextContent(),E=x.getTextGuideLine();S&&(S.stateTransition=g),E&&(E.stateTransition=g)}x.__dirty&&n(x)}})}Uj=function(h){return new(function(d){le(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(m){for(;m;){var y=m.__ecComponentInfo;if(y!=null)return h._model.getComponent(y.mainType,y.index);m=m.parent}},f.prototype.enterEmphasis=function(m,y){_s(m,y),zc(h)},f.prototype.leaveEmphasis=function(m,y){ws(m,y),zc(h)},f.prototype.enterBlur=function(m){HC(m),zc(h)},f.prototype.leaveBlur=function(m){gx(m),zc(h)},f.prototype.enterSelect=function(m){oL(m),zc(h)},f.prototype.leaveSelect=function(m){sL(m),zc(h)},f.prototype.getModel=function(){return h.getModel()},f.prototype.getViewOfComponentModel=function(m){return h.getViewOfComponentModel(m)},f.prototype.getViewOfSeriesModel=function(m){return h.getViewOfSeriesModel(m)},f}(SE))(h)},Zj=function(h){function d(f,m){for(var y=0;y<f.length;y++){var g=f[y];g[_3]=m}}W(e_,function(f,m){h._messageCenter.on(m,function(y){if(zj[h.group]&&h[_3]!==Lj){if(y&&y.escapeConnect)return;var g=h.makeActionFromEvent(y),x=[];W(t_,function(b){b!==h&&b.group===h.group&&x.push(b)}),d(x,Lj),W(x,function(b){b[_3]!==kxe&&b.dispatchAction(g)}),d(x,zxe)}})})}}(),e}($a),D3=Jj.prototype;D3.on=jj("on");D3.off=jj("off");D3.one=function(i,e,t){var r=this;function n(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(i,n)}this.on.call(this,i,n,t)};var Vxe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var $E={},e_={},T3=[],M3=[],e2=[],$j={},I3={},t_={},zj={},Hxe=+new Date-0,yYe=+new Date-0,R3="_echarts_instance_";function Sm(i,e,t){var r=!(t&&t.ssr);if(r){var n=Qxe(i);if(n)return n}var a=new Jj(i,e,t);return a.id="ec_"+Hxe++,t_[a.id]=a,r&&OP(i,R3,a.id),Zj(a),kc.trigger("afterinit",a),a}function Qxe(i){return t_[L7(i,R3)]}function eK(i,e){$j[i]=e}function P3(i){qt(M3,i)<0&&M3.push(i)}function L3(i,e){O3(T3,i,e,Rxe)}function tK(i){i2("afterinit",i)}function iK(i){i2("afterupdate",i)}function i2(i,e){kc.on(i,e)}function Gs(i,e,t){ft(e)&&(t=e,e="");var r=yt(i)?i.type:[i,i={event:e}][0];i.event=(i.event||r).toLowerCase(),e=i.event,!e_[e]&&(In(Pj.test(r)&&Pj.test(e)),$E[r]||($E[r]={action:t,actionInfo:i}),e_[e]=r)}function rK(i,e){xd.register(i,e)}function nK(i,e){O3(e2,i,e,Hj,"layout")}function np(i,e){O3(e2,i,e,Qj,"visual")}var Vj=[];function O3(i,e,t,r,n){if((ft(e)||yt(e))&&(t=e,e=r),!(qt(Vj,t)>=0)){Vj.push(t);var a=A3.wrapStageHandler(t,n);a.__prio=e,a.__raw=t,i.push(a)}}function F3(i,e){I3[i]=e}function aK(i,e,t){var r=Rj("registerMap");r&&r(i,e,t)}var oK=CW;np(B3,KW);np(t2,XW);np(t2,YW);np(B3,sj);np(t2,lj);np(Gj,y3);P3(CE);L3(Bxe,qL);F3("default",p3);Gs({type:Yf,event:Yf,update:Yf},hn);Gs({type:Ax,event:Ax,update:Ax},hn);Gs({type:w0,event:w0,update:w0},hn);Gs({type:mx,event:mx,update:mx},hn);Gs({type:b0,event:b0,update:b0},hn);eK("light",ej);eK("dark",nj);var sK=[],Gxe={registerPreprocessor:P3,registerProcessor:L3,registerPostInit:tK,registerPostUpdate:iK,registerUpdateLifecycle:i2,registerAction:Gs,registerCoordinateSystem:rK,registerLayout:nK,registerVisual:np,registerTransform:oK,registerLoading:F3,registerMap:aK,registerImpl:Dj,PRIORITY:Wj,ComponentModel:xi,ComponentView:hr,SeriesModel:rr,ChartView:qi,registerComponentModel:function(i){xi.registerClass(i)},registerComponentView:function(i){hr.registerClass(i)},registerSeriesModel:function(i){rr.registerClass(i)},registerChartView:function(i){qi.registerClass(i)},registerSubTypeDefaulter:function(i,e){xi.registerSubTypeDefaulter(i,e)},registerPainter:function(i,e){p7(i,e)}};function Ei(i){if(Ee(i)){W(i,function(e){Ei(e)});return}qt(sK,i)>=0||(sK.push(i),ft(i)&&(i={install:i}),i.install(Gxe))}function i_(i){return i==null?0:i.length||1}function lK(i){return i}var Wxe=function(){function i(e,t,r,n,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||lK,this._newKeyGetter=n||lK,this.context=a,this._diffModeMultiple=o==="multiple"}return i.prototype.add=function(e){return this._add=e,this},i.prototype.update=function(e){return this._update=e,this},i.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},i.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},i.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},i.prototype.remove=function(e){return this._remove=e,this},i.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},i.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},n=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,n,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=n[o],l=r[s],c=i_(l);if(c>1){var u=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(u,o)}else c===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},i.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},n={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,n,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],c=r[l],u=n[l],h=i_(c),d=i_(u);if(h>1&&d===1)this._updateManyToOne&&this._updateManyToOne(u,c),n[l]=null;else if(h===1&&d>1)this._updateOneToMany&&this._updateOneToMany(u,c),n[l]=null;else if(h===1&&d===1)this._update&&this._update(u,c),n[l]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(u,c),n[l]=null;else if(h>1)for(var f=0;f<h;f++)this._remove&&this._remove(c[f]);else this._remove&&this._remove(c)}this._performRestAdd(o,n)},i.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=t[n],o=i_(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[n]=null}},i.prototype._initIndexMap=function(e,t,r,n){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[n](e[o],o);if(a||(r[o]=s),!!t){var l=t[s],c=i_(l);c===0?(t[s]=o,a&&r.push(s)):c===1?t[s]=[l,o]:l.push(o)}}},i}(),ns=Wxe;var jxe=function(){function i(e,t){this._encode=e,this._schema=t}return i.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},i.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},i}();function cK(i,e){var t={},r=t.encode={},n=ct(),a=[],o=[],s={};W(i.dimensions,function(d){var f=i.getDimensionInfo(d),m=f.coordDim;if(m){var y=f.coordDimIndex;N3(r,m)[y]=d,f.isExtraCoord||(n.set(m,1),Kxe(f.type)&&(a[0]=d),N3(s,m)[y]=i.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(d)}vE.each(function(g,x){var b=N3(r,x),S=f.otherDims[x];S!=null&&S!==!1&&(b[S]=f.name)})});var l=[],c={};n.each(function(d,f){var m=r[f];c[f]=m[0],l=l.concat(m)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Me(l,function(d){return i.getDimensionInfo(d).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(a=u.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new jxe(s,e),t}function N3(i,e){return i.hasOwnProperty(e)||(i[e]=[]),i[e]}function Cm(i){return i==="category"?"ordinal":i==="time"?"time":"float"}function Kxe(i){return!(i==="ordinal"||i==="time")}var Xxe=function(){function i(e){this.otherDims={},e!=null&&Ce(this,e)}return i}(),G0=Xxe;var Yxe=$t(),qxe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},U3=function(){function i(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return i.prototype.isDimensionOmitted=function(){return this._dimOmitted},i.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=z3(this.source)))},i.prototype.getSourceDimensionIndex=function(e){return Yt(this._dimNameMap.get(e),-1)},i.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},i.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=TE(this.source),r=!V3(e),n="",a=[],o=0,s=0;o<e;o++){var l=void 0,c=void 0,u=void 0,h=this.dimensions[s];if(h&&h.storeDimIndex===o)l=t?h.name:null,c=h.type,u=h.ordinalMeta,s++;else{var d=this.getSourceDimension(o);d&&(l=t?d.name:null,c=d.type)}a.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!h||!h.isCalculationCoord)&&(n+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=qxe[c]||"f",u&&(n+=u.uid),n+="$"}var f=this.source,m=[f.seriesLayoutBy,f.startIndex,n].join("$$");return{dimensions:a,hash:m}},i.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var n=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(n=a.name),r++;else{var o=this.getSourceDimension(t);o&&(n=o.name)}e.push(n)}return e},i.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},i}();function n2(i){return i instanceof U3}function k3(i){for(var e=ct(),t=0;t<(i||[]).length;t++){var r=i[t],n=yt(r)?r.name:r;n!=null&&e.get(n)==null&&e.set(n,t)}return e}function z3(i){var e=Yxe(i);return e.dimNameMap||(e.dimNameMap=k3(i.dimensionsDefine))}function V3(i){return i>30}var r_=yt,ap=Me,Zxe=typeof Int32Array>"u"?Array:Int32Array,Jxe="e\0\0",uK=-1,$xe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],e_e=["_approximateExtent"],hK,a2,n_,a_,H3,o2,Q3,t_e=function(){function i(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,n=!1;n2(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(n=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,c={},u=0;u<r.length;u++){var h=r[u],d=Ye(h)?new G0({name:h}):h instanceof G0?h:new G0(h),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var m=d.otherDims=d.otherDims||{};o.push(f),a[f]=d,c[f]!=null&&(l=!0),d.createInvertedIndices&&(s[f]=[]),m.itemName===0&&(this._nameDimIdx=u),m.itemId===0&&(this._idDimIdx=u),n&&(d.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var y=this._dimIdxToName=ct();W(o,function(g){y.set(a[g].storeDimIndex,g)})}}return i.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var n=this._schema.getSourceDimension(t);if(n)return n.name},i.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},i.prototype._recognizeDimIndex=function(e){if(mi(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},i.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},i.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},i.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},i.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},i.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var n=r.encode[e];return n?n[t]:null},i.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},i.prototype.getStore=function(){return this._store},i.prototype.initData=function(e,t,r){var n=this,a;if(e instanceof Hx&&(a=e),!a){var o=this.dimensions,s=U0(e)||Sa(e)?new ME(e,o.length):e;a=new Hx;var l=ap(o,function(c){return{type:n._dimInfos[c].type,property:c}});a.initData(s,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=cK(this,this._schema),this.userOutput=this._dimSummary.userOutput},i.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},i.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t.length),n=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=n;s<a;s++){var l=s-n;this._nameList[s]=t[l],o&&Q3(this,s)}},i.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var n=this._dimInfos[t[r]];n.ordinalMeta&&e.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},i.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==$l&&!e.fillStorage},i.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,n=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=n.getSource().sourceFormat,l=s===ko;if(l&&!n.pure)for(var c=[],u=e;u<t;u++){var h=n.getItem(u,c);if(!this.hasItemOption&&M7(h)&&(this.hasItemOption=!0),h){var d=h.name;a[u]==null&&d!=null&&(a[u]=kn(d,null));var f=h.id;o[u]==null&&f!=null&&(o[u]=kn(f,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)Q3(this,u);hK(this)}},i.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},i.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},i.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},i.prototype.setCalculationInfo=function(e,t){r_(e)?Ce(this._calculationInfo,e):this._calculationInfo[e]=t},i.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=n_(this,this._nameDimIdx,t)),r==null&&(r=""),r},i.prototype._getCategory=function(e,t){var r=this._store.get(e,t),n=this._store.getOrdinalMeta(e);return n?n.categories[r]:r},i.prototype.getId=function(e){return a2(this,this.getRawIndex(e))},i.prototype.count=function(){return this._store.count()},i.prototype.get=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.get(n.storeDimIndex,t)},i.prototype.getByRawIndex=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.getByRawIndex(n.storeDimIndex,t)},i.prototype.getIndices=function(){return this._store.getIndices()},i.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},i.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},i.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},i.prototype.getValues=function(e,t){var r=this,n=this._store;return Ee(e)?n.getValues(ap(e,function(a){return r._getStoreDimIndex(a)}),t):n.getValues(e)},i.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,n=t.length;r<n;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},i.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},i.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},i.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},i.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],n=r[t];return n==null||isNaN(n)?uK:n},i.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},i.prototype.each=function(e,t,r){"use strict";ft(e)&&(r=t,t=e,e=[]);var n=r||this,a=ap(a_(e),this._getStoreDimIndex,this);this._store.each(a,n?st(t,n):t)},i.prototype.filterSelf=function(e,t,r){"use strict";ft(e)&&(r=t,t=e,e=[]);var n=r||this,a=ap(a_(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,n?st(t,n):t),this},i.prototype.selectRange=function(e){"use strict";var t=this,r={},n=si(e),a=[];return W(n,function(o){var s=t._getStoreDimIndex(o);r[s]=e[o],a.push(s)}),this._store=this._store.selectRange(r),this},i.prototype.mapArray=function(e,t,r){"use strict";ft(e)&&(r=t,t=e,e=[]),r=r||this;var n=[];return this.each(e,function(){n.push(t&&t.apply(this,arguments))},r),n},i.prototype.map=function(e,t,r,n){"use strict";var a=r||n||this,o=ap(a_(e),this._getStoreDimIndex,this),s=o2(this);return s._store=this._store.map(o,a?st(t,a):t),s},i.prototype.modify=function(e,t,r,n){var a=this,o=r||n||this,s=ap(a_(e),this._getStoreDimIndex,this);this._store.modify(s,o?st(t,o):t)},i.prototype.downSample=function(e,t,r,n){var a=o2(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,n),a},i.prototype.lttbDownSample=function(e,t){var r=o2(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},i.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},i.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new ir(r,t,t&&t.ecModel)},i.prototype.diff=function(e){var t=this;return new ns(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return a2(e,r)},function(r){return a2(t,r)})},i.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},i.prototype.setVisual=function(e,t){this._visual=this._visual||{},r_(e)?Ce(this._visual,e):this._visual[e]=t},i.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],n=r&&r[t];return n??this.getVisual(t)},i.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},i.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,n=r[e];n||(n=r[e]={});var a=n[t];return a==null&&(a=this.getVisual(t),Ee(a)?a=a.slice():r_(a)&&(a=Ce({},a)),n[t]=a),a},i.prototype.setItemVisual=function(e,t,r){var n=this._itemVisuals[e]||{};this._itemVisuals[e]=n,r_(t)?Ce(n,t):n[t]=r},i.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},i.prototype.setLayout=function(e,t){r_(e)?Ce(this._layout,e):this._layout[e]=t},i.prototype.getLayout=function(e){return this._layout[e]},i.prototype.getItemLayout=function(e){return this._itemLayouts[e]},i.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Ce(this._itemLayouts[e]||{},t):t},i.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},i.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;fx(r,this.dataType,e,t),this._graphicEls[e]=t},i.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},i.prototype.eachItemGraphicEl=function(e,t){W(this._graphicEls,function(r,n){r&&e&&e.call(t,r,n)})},i.prototype.cloneShallow=function(e){return e||(e=new i(this._schema?this._schema:ap(this.dimensions,this._getDimInfo,this),this.hostModel)),H3(e,this),e._store=this._store,e},i.prototype.wrapMethod=function(e,t){var r=this[e];ft(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var n=r.apply(this,arguments);return t.apply(this,[n].concat(HS(arguments)))})},i.internalField=function(){hK=function(e){var t=e._invertedIndicesMap;W(t,function(r,n){var a=e._dimInfos[n],o=a.ordinalMeta,s=e._store;if(o){r=t[n]=new Zxe(o.categories.length);for(var l=0;l<r.length;l++)r[l]=uK;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},n_=function(e,t,r){return kn(e._getCategory(t,r),null)},a2=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=n_(e,e._idDimIdx,t)),r==null&&(r=Jxe+t),r},a_=function(e){return Ee(e)||(e=e!=null?[e]:[]),e},o2=function(e){var t=new i(e._schema?e._schema:ap(e.dimensions,e._getDimInfo,e),e.hostModel);return H3(t,e),t},H3=function(e,t){W($xe.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,W(e_e,function(r){e[r]=Tt(t[r])}),e._calculationInfo=Ce({},t._calculationInfo)},Q3=function(e,t){var r=e._nameList,n=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=n[t];if(s==null&&a!=null&&(r[t]=s=n_(e,a,t)),l==null&&o!=null&&(n[t]=l=n_(e,o,t)),l==null&&s!=null){var c=e._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),n[t]=l}}}(),i}(),sa=t_e;function Ou(i,e){U0(i)||(i=k0(i)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||i.dimensionsDefine||[],n=ct(),a=[],o=r_e(i,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&V3(o),l=r===i.dimensionsDefine,c=l?z3(i):k3(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(i,o));for(var h=ct(u),d=new o3(o),f=0;f<d.length;f++)d[f]=-1;function m(U){var k=d[U];if(k<0){var j=r[U],q=yt(j)?j:{name:j},X=new G0,Y=q.name;Y!=null&&c.get(Y)!=null&&(X.name=X.displayName=Y),q.type!=null&&(X.type=q.type),q.displayName!=null&&(X.displayName=q.displayName);var J=a.length;return d[U]=J,X.storeDimIndex=U,a.push(X),X}return a[k]}if(!s)for(var f=0;f<o;f++)m(f);h.each(function(U,k){var j=cr(U).slice();if(j.length===1&&!Ye(j[0])&&j[0]<0){h.set(k,!1);return}var q=h.set(k,[]);W(j,function(X,Y){var J=Ye(X)?c.get(X):X;J!=null&&J<o&&(q[Y]=J,g(m(J),k,Y))})});var y=0;W(t,function(U){var k,j,q,X;if(Ye(U))k=U,X={};else{X=U,k=X.name;var Y=X.ordinalMeta;X.ordinalMeta=null,X=Ce({},X),X.ordinalMeta=Y,j=X.dimsDef,q=X.otherDims,X.name=X.coordDim=X.coordDimIndex=X.dimsDef=X.otherDims=null}var J=h.get(k);if(J!==!1){if(J=cr(J),!J.length)for(var te=0;te<(j&&j.length||1);te++){for(;y<o&&m(y).coordDim!=null;)y++;y<o&&J.push(y++)}W(J,function(de,ue){var ve=m(de);if(l&&X.type!=null&&(ve.type=X.type),g(At(ve,X),k,ue),ve.name==null&&j){var _e=j[ue];!yt(_e)&&(_e={name:_e}),ve.name=ve.displayName=_e.name,ve.defaultTooltip=_e.defaultTooltip}q&&At(ve.otherDims,q)})}});function g(U,k,j){vE.get(k)!=null?U.otherDims[k]=j:(U.coordDim=k,U.coordDimIndex=j,n.set(k,!0))}var x=e.generateCoord,b=e.generateCoordCount,S=b!=null;b=x?b||1:0;var E=x||"value";function D(U){U.name==null&&(U.name=U.coordDim)}if(s)W(a,function(U){D(U)}),a.sort(function(U,k){return U.storeDimIndex-k.storeDimIndex});else for(var B=0;B<o;B++){var F=m(B),H=F.coordDim;H==null&&(F.coordDim=n_e(E,n,S),F.coordDimIndex=0,(!x||b<=0)&&(F.isExtraCoord=!0),b--),D(F),F.type==null&&(_E(i,B)===Mo.Must||F.isExtraCoord&&(F.otherDims.itemName!=null||F.otherDims.seriesName!=null))&&(F.type="ordinal")}return i_e(a),new U3({source:i,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function i_e(i){for(var e=ct(),t=0;t<i.length;t++){var r=i[t],n=r.name,a=e.get(n)||0;a>0&&(r.name=n+(a-1)),a++,e.set(n,a)}}function r_e(i,e,t,r){var n=Math.max(i.dimensionsDetectedCount||1,e.length,t.length,r||0);return W(e,function(a){var o;yt(a)&&(o=a.dimsDef)&&(n=Math.max(n,o.length))}),n}function n_e(i,e,t){if(t||e.hasKey(i)){for(var r=0;e.hasKey(i+r);)r++;i+=r}return e.set(i,!0),i}var a_e=function(){function i(e){this.coordSysDims=[],this.axisMap=ct(),this.categoryAxisMap=ct(),this.coordSysName=e}return i}();function dK(i){var e=i.get("coordinateSystem"),t=new a_e(e),r=o_e[e];if(r)return r(i,t,t.axisMap,t.categoryAxisMap),t}var o_e={cartesian2d:function(i,e,t,r){var n=i.getReferringComponents("xAxis",Jr).models[0],a=i.getReferringComponents("yAxis",Jr).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",a),W0(n)&&(r.set("x",n),e.firstCategoryDimIndex=0),W0(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(i,e,t,r){var n=i.getReferringComponents("singleAxis",Jr).models[0];e.coordSysDims=["single"],t.set("single",n),W0(n)&&(r.set("single",n),e.firstCategoryDimIndex=0)},polar:function(i,e,t,r){var n=i.getReferringComponents("polar",Jr).models[0],a=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),W0(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),W0(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(i,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(i,e,t,r){var n=i.ecModel,a=n.getComponent("parallel",i.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();W(a.parallelAxisIndex,function(s,l){var c=n.getComponent("parallelAxis",s),u=o[l];t.set(u,c),W0(c)&&(r.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function W0(i){return i.get("type")==="category"}function fK(i,e,t){t=t||{};var r=t.byIndex,n=t.stackedCoordDimension,a,o,s;s_e(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(i&&i.get("stack")),c,u,h,d;if(W(a,function(b,S){Ye(b)&&(a[S]=b={name:b}),l&&!b.isExtraCoord&&(!r&&!c&&b.ordinalMeta&&(c=b),!u&&b.type!=="ordinal"&&b.type!=="time"&&(!n||n===b.coordDim)&&(u=b))}),u&&!r&&!c&&(r=!0),u){h="__\0ecstackresult_"+i.id,d="__\0ecstackedover_"+i.id,c&&(c.createInvertedIndices=!0);var f=u.coordDim,m=u.type,y=0;W(a,function(b){b.coordDim===f&&y++});var g={name:h,coordDim:f,coordDimIndex:y,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},x={name:d,coordDim:d,coordDimIndex:y+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(g.storeDimIndex=s.ensureCalculationDimension(d,m),x.storeDimIndex=s.ensureCalculationDimension(h,m)),o.appendCalculationDimension(g),o.appendCalculationDimension(x)):(a.push(g),a.push(x))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:d,stackResultDimension:h}}function s_e(i){return!n2(i.schema)}function ic(i,e){return!!e&&e===i.getCalculationInfo("stackedDimension")}function s2(i,e){return ic(i,e)?i.getCalculationInfo("stackResultDimension"):e}function l_e(i,e){var t=i.get("coordinateSystem"),r=xd.get(t),n;return e&&e.coordSysDims&&(n=Me(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=Cm(l)}return o})),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}function c_e(i,e,t){var r,n;return t&&W(i,function(a,o){var s=a.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(n=!0)}),!n&&r!=null&&(i[r].otherDims.itemName=0),r}function u_e(i,e,t){t=t||{};var r=e.getSourceManager(),n,a=!1;i?(a=!0,n=k0(i)):(n=r.getSource(),a=n.sourceFormat===ko);var o=dK(e),s=l_e(e,o),l=t.useEncodeDefaulter,c=ft(l)?l:l?Ut(yE,s,e):null,u={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!a},h=Ou(n,u),d=c_e(h.dimensions,t.createInvertedIndices,o),f=a?null:r.getSharedDataStore(h),m=fK(e,{schema:h,store:f}),y=new sa(h,e);y.setCalculationInfo(m);var g=d!=null&&h_e(n)?function(x,b,S,E){return E===d?S:this.defaultDimValueGetter(x,b,S,E)}:null;return y.hasItemOption=!1,y.initData(a?n:f,null,g),y}function h_e(i){if(i.sourceFormat===ko){var e=d_e(i.data||[]);return!Ee(wu(e))}}function d_e(i){for(var e=0;e<i.length&&i[e]==null;)e++;return i[e]}var zo=u_e;var pK=function(){function i(e){this._setting=e||{},this._extent=[1/0,-1/0]}return i.prototype.getSetting=function(e){return this._setting[e]},i.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},i.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},i.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},i.prototype.isBlank=function(){return this._isBlank},i.prototype.setBlank=function(e){this._isBlank=e},i}();Qf(pK);var Cl=pK;var f_e=0,p_e=function(){function i(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++f_e}return i.createByAxisModel=function(e){var t=e.option,r=t.data,n=r&&Me(r,A_e);return new i({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},i.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},i.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!Ye(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t},i.prototype._getOrCreateMap=function(){return this._map||(this._map=ct(this.categories))},i}();function A_e(i){return yt(i)&&i.value!=null?i.value:i+""}var o_=p_e;function s_(i){return i.type==="interval"||i.type==="log"}function mK(i,e,t,r){var n={},a=i[1]-i[0],o=n.interval=MC(a/e,!0);t!=null&&o<t&&(o=n.interval=t),r!=null&&o>r&&(o=n.interval=r);var s=n.intervalPrecision=G3(o),l=n.niceTickExtent=[dn(Math.ceil(i[0]/o)*o,s),dn(Math.floor(i[1]/o)*o,s)];return m_e(l,i),n}function l2(i){var e=Math.pow(10,TC(i)),t=i/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,dn(t*e)}function G3(i){return Us(i)+2}function AK(i,e,t){i[e]=Math.max(Math.min(i[e],t[1]),t[0])}function m_e(i,e){!isFinite(i[0])&&(i[0]=e[0]),!isFinite(i[1])&&(i[1]=e[1]),AK(i,0,e),AK(i,1,e),i[0]>i[1]&&(i[0]=i[1])}function op(i,e){return i>=e[0]&&i<=e[1]}function sp(i,e){return e[1]===e[0]?.5:(i-e[0])/(e[1]-e[0])}function lp(i,e){return i*(e[1]-e[0])+e[0]}var gK=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;r.type="ordinal";var n=r.getSetting("ordinalMeta");return n||(n=new o_({})),Ee(n)&&(n=new o_({categories:Me(n,function(a){return yt(a)?a.value:a})})),r._ordinalMeta=n,r._extent=r.getSetting("extent")||[0,n.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:Ye(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),op(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),sp(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(lp(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,n=r[0];n<=r[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var c=r[o];n[o]=c,a[c]=o}for(var u=0;o<s;++o){for(;a[u]!=null;)u++;n.push(u),a[u]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[r];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Cl);Cl.registerClass(gK);var l_=gK;var Em=dn,vK=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return op(t,this._extent)},e.prototype.normalize=function(t){return sp(t,this._extent)},e.prototype.scale=function(t){return lp(t,this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(r)||(n[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=G3(t)},e.prototype.getTicks=function(t){var r=this._interval,n=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;n[0]<a[0]&&(t?s.push({value:Em(a[0]-r,o)}):s.push({value:n[0]}));for(var c=a[0];c<=a[1]&&(s.push({value:c}),c=Em(c+r,o),c!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:a[1];return n[1]>u&&(t?s.push({value:Em(u+r,o)}):s.push({value:n[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),n=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],c=0,u=[],h=s.value-l.value,d=h/t;c<t-1;){var f=Em(l.value+(c+1)*d);f>a[0]&&f<a[1]&&u.push(f),c++}n.push(u)}return n},e.prototype.getLabel=function(t,r){if(t==null)return"";var n=r&&r.precision;n==null?n=Us(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var a=Em(t.value,n,!0);return zL(a)},e.prototype.calcNiceTicks=function(t,r,n){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=mK(a,t,r,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var n=Math.abs(r[0]);t.fixMax||(r[1]+=n/2),r[0]-=n/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=Em(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=Em(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(Cl);Cl.registerClass(vK);var El=vK;var yK=typeof Float32Array<"u",g_e=yK?Float32Array:Array;function Ws(i){return Ee(i)?yK?new Float32Array(i):i:new g_e(i)}var W3="__ec_stack_";function j3(i){return i.get("stack")||W3+i.seriesIndex}function K3(i){return i.dim+i.index}function xK(i){var e=[],t=i.axis,r="axis0";if(t.type==="category"){for(var n=t.getBandWidth(),a=0;a<i.count;a++)e.push(At({bandWidth:n,axisKey:r,stackId:W3+a},i));for(var o=_K(e),s=[],a=0;a<i.count;a++){var l=o[r][W3+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function X3(i,e){var t=[];return e.eachSeriesByType(i,function(r){bK(r)&&t.push(r)}),t}function v_e(i){var e={};W(i,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var h=l.getData(),d=u.dim+"_"+u.index,f=h.getDimensionIndex(h.mapDimension(u.dim)),m=h.getStore(),y=0,g=m.count();y<g;++y){var x=m.get(f,y);e[d]?e[d].push(x):e[d]=[x]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(n){n.sort(function(l,c){return l-c});for(var a=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function Y3(i){var e=v_e(i),t=[];return W(i,function(r){var n=r.coordinateSystem,a=n.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,c=e[l],u=Math.abs(o[1]-o[0]),h=a.scale.getExtent(),d=Math.abs(h[1]-h[0]);s=c?u/d*c:u}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var m=ot(r.get("barWidth"),s),y=ot(r.get("barMaxWidth"),s),g=ot(r.get("barMinWidth")||(SK(r)?.5:1),s),x=r.get("barGap"),b=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:m,barMaxWidth:y,barMinWidth:g,barGap:x,barCategoryGap:b,axisKey:K3(a),stackId:j3(r)})}),_K(t)}function _K(i){var e={};W(i,function(r,n){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var c=r.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=r.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var h=r.barMaxWidth;h&&(l[c].maxWidth=h);var d=r.barMinWidth;d&&(l[c].minWidth=d);var f=r.barGap;f!=null&&(s.gap=f);var m=r.barCategoryGap;m!=null&&(s.categoryGap=m)});var t={};return W(e,function(r,n){t[n]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=si(a).length;s=Math.max(35-l*4,15)+"%"}var c=ot(s,o),u=ot(r.gap,1),h=r.remainedWidth,d=r.autoWidthCount,f=(h-c)/(d+(d-1)*u);f=Math.max(f,0),W(a,function(x){var b=x.maxWidth,S=x.minWidth;if(x.width){var E=x.width;b&&(E=Math.min(E,b)),S&&(E=Math.max(E,S)),x.width=E,h-=E+u*E,d--}else{var E=f;b&&b<E&&(E=Math.min(b,h)),S&&S>E&&(E=S),E!==f&&(x.width=E,h-=E+u*E,d--)}}),f=(h-c)/(d+(d-1)*u),f=Math.max(f,0);var m=0,y;W(a,function(x,b){x.width||(x.width=f),y=x,m+=x.width*(1+u)}),y&&(m-=y.width*u);var g=-m/2;W(a,function(x,b){t[n][b]=t[n][b]||{bandWidth:o,offset:g,width:x.width},g+=x.width*(1+u)})}),t}function wK(i,e,t){if(i&&e){var r=i[K3(e)];return r!=null&&t!=null?r[j3(t)]:r}}function u2(i,e){var t=X3(i,e),r=Y3(t);W(t,function(n){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=j3(n),c=r[K3(s)][l],u=c.offset,h=c.width;a.setLayout({bandWidth:c.bandWidth,offset:u,size:h})})}function h2(i){return{seriesType:i,plan:ec(),reset:function(e){if(bK(e)){var t=e.getData(),r=e.coordinateSystem,n=r.getBaseAxis(),a=r.getOtherAxis(n),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(n.dim)),l=e.get("showBackground",!0),c=t.mapDimension(a.dim),u=t.getCalculationInfo("stackResultDimension"),h=ic(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),d=a.isHorizontal(),f=y_e(n,a),m=SK(e),y=e.get("barMinHeight")||0,g=u&&t.getDimensionIndex(u),x=t.getLayout("size"),b=t.getLayout("offset");return{progress:function(S,E){for(var D=S.count,B=m&&Ws(D*3),F=m&&l&&Ws(D*3),H=m&&Ws(D),U=r.master.getRect(),k=d?U.width:U.height,j,q=E.getStore(),X=0;(j=S.next())!=null;){var Y=q.get(h?g:o,j),J=q.get(s,j),te=f,de=void 0;h&&(de=+Y-q.get(o,j));var ue=void 0,ve=void 0,_e=void 0,Re=void 0;if(d){var Oe=r.dataToPoint([Y,J]);if(h){var Te=r.dataToPoint([de,J]);te=Te[0]}ue=te,ve=Oe[1]+b,_e=Oe[0]-te,Re=x,Math.abs(_e)<y&&(_e=(_e<0?-1:1)*y)}else{var Oe=r.dataToPoint([J,Y]);if(h){var Te=r.dataToPoint([J,de]);te=Te[1]}ue=Oe[0]+b,ve=te,_e=x,Re=Oe[1]-te,Math.abs(Re)<y&&(Re=(Re<=0?-1:1)*y)}m?(B[X]=ue,B[X+1]=ve,B[X+2]=d?_e:Re,F&&(F[X]=d?U.x:ue,F[X+1]=d?ve:U.y,F[X+2]=k),H[j]=j):E.setItemLayout(j,{x:ue,y:ve,width:_e,height:Re}),X+=3}m&&E.setLayout({largePoints:B,largeDataIndices:H,largeBackgroundPoints:F,valueAxisHorizontal:d})}}}}}}function bK(i){return i.coordinateSystem&&i.coordinateSystem.type==="cartesian2d"}function SK(i){return i.pipelineContext&&i.pipelineContext.large}function y_e(i,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var x_e=function(i,e,t,r){for(;t<r;){var n=t+r>>>1;i[n][1]<e?t=n+1:r=n}return t},EK=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return gm(t.value,BL[F9(mm(this._minLevelUnit))]||BL.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,n){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return N9(t,r,n,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,n=[];if(!t)return n;n.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=T_e(this._minLevelUnit,this._approxInterval,a,r);return n=n.concat(o),n.push({value:r[1],level:0}),n},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Zl,r[1]+=Zl),r[1]===-1/0&&r[0]===1/0){var n=new Date;r[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),r[0]=r[1]-Zl}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,n){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=d2.length,l=Math.min(x_e(d2,this._approxInterval,0,s),s-1);this._interval=d2[l][1],this._minLevelUnit=d2[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return mi(t)?t:+ks(t)},e.prototype.contain=function(t){return op(this.parse(t),this._extent)},e.prototype.normalize=function(t){return sp(this.parse(t),this._extent)},e.prototype.scale=function(t){return lp(t,this._extent)},e.type="time",e}(El),d2=[["second",hE],["minute",dE],["hour",L0],["quarter-day",L0*6],["half-day",L0*12],["day",Zl*1.2],["half-week",Zl*3.5],["week",Zl*7],["month",Zl*31],["quarter",Zl*95],["half-year",IL/2],["year",IL]];function __e(i,e,t,r){var n=ks(e),a=ks(t),o=function(m){return RL(n,m,r)===RL(a,m,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},c=function(){return l()&&o("day")},u=function(){return c()&&o("hour")},h=function(){return u()&&o("minute")},d=function(){return h()&&o("second")},f=function(){return d()&&o("millisecond")};switch(i){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return h();case"second":return d();case"millisecond":return f()}}function w_e(i,e){return i/=Zl,i>16?16:i>7.5?7:i>3.5?4:i>1.5?2:1}function b_e(i){var e=30*Zl;return i/=e,i>6?6:i>3?3:i>2?2:1}function S_e(i){return i/=L0,i>12?12:i>6?6:i>3.5?4:i>2?2:1}function CK(i,e){return i/=e?dE:hE,i>30?30:i>20?20:i>15?15:i>10?10:i>5?5:i>2?2:1}function C_e(i){return MC(i,!0)}function E_e(i,e,t){var r=new Date(i);switch(mm(e)){case"year":case"month":r[PL(t)](0);case"day":r[LL(t)](1);case"hour":r[OL(t)](0);case"minute":r[FL(t)](0);case"second":r[NL(t)](0),r[UL(t)](0)}return r.getTime()}function T_e(i,e,t,r){var n=1e4,a=DL,o=0;function s(k,j,q,X,Y,J,te){for(var de=new Date(j),ue=j,ve=de[X]();ue<q&&ue<=r[1];)te.push({value:ue}),ve+=k,de[Y](ve),ue=de.getTime();te.push({value:ue,notAdd:!0})}function l(k,j,q){var X=[],Y=!j.length;if(!__e(mm(k),r[0],r[1],t)){Y&&(j=[{value:E_e(new Date(r[0]),k,t)},{value:r[1]}]);for(var J=0;J<j.length-1;J++){var te=j[J].value,de=j[J+1].value;if(te!==de){var ue=void 0,ve=void 0,_e=void 0,Re=!1;switch(k){case"year":ue=Math.max(1,Math.round(e/Zl/365)),ve=fE(t),_e=k9(t);break;case"half-year":case"quarter":case"month":ue=b_e(e),ve=Am(t),_e=PL(t);break;case"week":case"half-week":case"day":ue=w_e(e,31),ve=Ix(t),_e=LL(t),Re=!0;break;case"half-day":case"quarter-day":case"hour":ue=S_e(e),ve=P0(t),_e=OL(t);break;case"minute":ue=CK(e,!0),ve=Bx(t),_e=FL(t);break;case"second":ue=CK(e,!1),ve=Dx(t),_e=NL(t);break;case"millisecond":ue=C_e(e),ve=Rx(t),_e=UL(t);break}s(ue,te,de,ve,_e,Re,X),k==="year"&&q.length>1&&J===0&&q.unshift({value:q[0].value-ue})}}for(var J=0;J<X.length;J++)q.push(X[J]);return X}}for(var c=[],u=[],h=0,d=0,f=0;f<a.length&&o++<n;++f){var m=mm(a[f]);if(O9(a[f])){l(a[f],c[c.length-1]||[],u);var y=a[f+1]?mm(a[f+1]):null;if(m!==y){if(u.length){d=h,u.sort(function(k,j){return k.value-j.value});for(var g=[],x=0;x<u.length;++x){var b=u[x].value;(x===0||u[x-1].value!==b)&&(g.push(u[x]),b>=r[0]&&b<=r[1]&&h++)}var S=(r[1]-r[0])/e;if(h>S*1.5&&d>S/1.5||(c.push(g),h>S||i===a[f]))break}u=[]}}}for(var E=Xi(Me(c,function(k){return Xi(k,function(j){return j.value>=r[0]&&j.value<=r[1]&&!j.notAdd})}),function(k){return k.length>0}),D=[],B=E.length-1,f=0;f<E.length;++f)for(var F=E[f],H=0;H<F.length;++H)D.push({value:F[H].value,level:B-f});D.sort(function(k,j){return k.value-j.value});for(var U=[],f=0;f<D.length;++f)(f===0||D[f].value!==D[f-1].value)&&U.push(D[f]);return U}Cl.registerClass(EK);var f2=EK;var TK=Cl.prototype,c_=El.prototype,M_e=dn,I_e=Math.floor,B_e=Math.ceil,p2=Math.pow,Fu=Math.log,q3=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new El,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,n=this._extent,a=r.getExtent(),o=c_.getTicks.call(this,t);return Me(o,function(s){var l=s.value,c=dn(p2(this.base,l));return c=l===n[0]&&this._fixMin?A2(c,a[0]):c,c=l===n[1]&&this._fixMax?A2(c,a[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,r){var n=Fu(this.base);t=Fu(Math.max(0,t))/n,r=Fu(Math.max(0,r))/n,c_.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=TK.getExtent.call(this);r[0]=p2(t,r[0]),r[1]=p2(t,r[1]);var n=this._originalScale,a=n.getExtent();return this._fixMin&&(r[0]=A2(r[0],a[0])),this._fixMax&&(r[1]=A2(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=Fu(t[0])/Fu(r),t[1]=Fu(t[1])/Fu(r),TK.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,n=r[1]-r[0];if(!(n===1/0||n<=0)){var a=_7(n),o=t/n*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[dn(B_e(r[0]/a)*a),dn(I_e(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){c_.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Fu(t)/Fu(this.base),op(t,this._extent)},e.prototype.normalize=function(t){return t=Fu(t)/Fu(this.base),sp(t,this._extent)},e.prototype.scale=function(t){return t=lp(t,this._extent),p2(this.base,t)},e.type="log",e}(Cl),MK=q3.prototype;MK.getMinorTicks=c_.getMinorTicks;MK.getLabel=c_.getLabel;function A2(i,e){return M_e(i,Us(e))}Cl.registerClass(q3);var IK=q3;var D_e=function(){function i(e,t,r){this._prepareParams(e,t,r)}return i.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=this._modelMinRaw=t.get("min",!0);ft(a)?this._modelMinNum=m2(e,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=m2(e,a));var o=this._modelMaxRaw=t.get("max",!0);if(ft(o)?this._modelMaxNum=m2(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=m2(e,o)),n)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),l=Ee(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[$o(l[0],1),$o(l[1],1)]}},i.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,n=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,c=s!=null,u=l!=null;s==null&&(s=e?n?0:NaN:t-a[0]*o),l==null&&(l=e?n?n-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=Rf(s)||Rf(l)||e&&!n;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(s=d,c=!0),f!=null&&(l=f,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:h}},i.prototype.modifyDataMinMax=function(e,t){this[P_e[e]]=t},i.prototype.setDeterminedMinMax=function(e,t){var r=R_e[e];this[r]=t},i.prototype.freeze=function(){this.frozen=!0},i}();var R_e={min:"_determinedMin",max:"_determinedMax"},P_e={min:"_dataMin",max:"_dataMax"};function g2(i,e,t){var r=i.rawExtentInfo;return r||(r=new D_e(i,e,t),i.rawExtentInfo=r,r)}function m2(i,e){return e==null?null:Rf(e)?NaN:i.parse(e)}function Z3(i,e){var t=i.type,r=g2(i,e,i.getExtent()).calculate();i.setBlank(r.isBlank);var n=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=X3("bar",o),l=!1;if(W(s,function(h){l=l||h.getBaseAxis()===e.axis}),l){var c=Y3(s),u=L_e(n,a,e,c);n=u.min,a=u.max}}return{extent:[n,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function L_e(i,e,t,r){var n=t.axis.getExtent(),a=n[1]-n[0],o=wK(r,t.axis);if(o===void 0)return{min:i,max:e};var s=1/0;W(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;W(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-i,h=1-(s+l)/a,d=u/h-u;return e+=d*(l/c),i-=d*(s/c),{min:i,max:e}}function bh(i,e){var t=e,r=Z3(i,t),n=r.extent,a=t.get("splitNumber");i instanceof IK&&(i.base=t.get("logBase"));var o=i.type,s=t.get("interval"),l=o==="interval"||o==="time";i.setExtent(n[0],n[1]),i.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&i.setInterval&&i.setInterval(s)}function cp(i,e){if(e=e||i.get("type"),e)switch(e){case"category":return new l_({ordinalMeta:i.getOrdinalMeta?i.getOrdinalMeta():i.getCategories(),extent:[1/0,-1/0]});case"time":return new f2({locale:i.ecModel.getLocaleModel(),useUTC:i.ecModel.get("useUTC")});default:return new(Cl.getClass(e)||El)}}function BK(i){var e=i.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function j0(i){var e=i.getLabelModel().get("formatter"),t=i.type==="category"?i.scale.getExtent()[0]:null;return i.scale.type==="time"?function(r){return function(n,a){return i.scale.getFormattedLabel(n,a,r)}}(e):Ye(e)?function(r){return function(n){var a=i.scale.getLabel(n),o=r.replace("{value}",a??"");return o}}(e):ft(e)?function(r){return function(n,a){return t!=null&&(a=n.value-t),r(u_(i,n),a,n.level!=null?{level:n.level}:null)}}(e):function(r){return i.scale.getLabel(r)}}function u_(i,e){return i.type==="category"?i.scale.getLabel(e):e.value}function DK(i){var e=i.model,t=i.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,n,a=t.getExtent();t instanceof l_?n=t.count():(r=t.getTicks(),n=r.length);var o=i.getLabelModel(),s=j0(i),l,c=1;n>40&&(c=Math.ceil(n/40));for(var u=0;u<n;u+=c){var h=r?r[u]:{value:a[0]+u},d=s(h,u),f=o.getTextRect(d),m=O_e(f,o.get("rotate")||0);l?l.union(m):l=m}return l}}function O_e(i,e){var t=e*Math.PI/180,r=i.width,n=i.height,a=r*Math.abs(Math.cos(t))+Math.abs(n*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(n*Math.cos(t)),s=new Ht(i.x,i.y,a,o);return s}function v2(i){var e=i.get("interval");return e??"auto"}function y2(i){return i.type==="category"&&v2(i.getLabelModel())===0}function K0(i,e){var t={};return W(i.mapDimensionsAll(e),function(r){t[s2(i,r)]=!0}),si(t)}function RK(i,e,t){e&&W(K0(e,t),function(r){var n=e.getApproximateExtent(r);n[0]<i[0]&&(i[0]=n[0]),n[1]>i[1]&&(i[1]=n[1])})}var Sh=function(){function i(){}return i.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},i.prototype.getCoordSysModel=function(){},i}();var F_e=1e-8;function PK(i,e){return Math.abs(i-e)<F_e}function Sd(i,e,t){var r=0,n=i[0];if(!n)return!1;for(var a=1;a<i.length;a++){var o=i[a];r+=Dc(n[0],n[1],o[0],o[1],e,t),n=o}var s=i[0];return(!PK(n[0],s[0])||!PK(n[1],s[1]))&&(r+=Dc(n[0],n[1],s[0],s[1],e,t)),r!==0}var N_e=[];function J3(i,e){for(var t=0;t<i.length;t++)Ca(i[t],i[t],e)}function OK(i,e,t,r){for(var n=0;n<i.length;n++){var a=i[n];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(jl(e,e,a),Kl(t,t,a))}}function U_e(i){for(var e=0,t=0,r=0,n=i.length,a=i[n-1][0],o=i[n-1][1],s=0;s<n;s++){var l=i[s][0],c=i[s][1],u=a*c-l*o;e+=u,t+=(a+l)*u,r+=(o+c)*u,a=l,o=c}return e?[t/e/3,r/e/3,e]:[i[0][0]||0,i[0][1]||0]}var FK=function(){function i(e){this.name=e}return i.prototype.setCenter=function(e){this._center=e},i.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},i}();var $3=function(){function i(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return i}();var eO=function(){function i(e){this.type="linestring",this.points=e}return i}();var _2=function(i){le(e,i);function e(t,r,n){var a=i.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=n&&[n[0],n[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,n=0,a=0;a<t.length;a++){var o=t[a],s=o.exterior,l=s&&s.length;l>n&&(r=o,n=l)}if(r)return U_e(r.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var n=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return W(o,function(s){s.type==="polygon"?OK(s.exterior,n,a,t):W(s.points,function(l){OK(l,n,a,t)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])||(n[0]=n[1]=a[0]=a[1]=0),r=new Ht(n[0],n[1],a[0]-n[0],a[1]-n[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),n=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.type==="polygon"){var l=s.exterior,c=s.interiors;if(Sd(l,t[0],t[1])){for(var u=0;u<(c?c.length:0);u++)if(Sd(c[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,n,a){var o=this.getBoundingRect(),s=o.width/o.height;n?a||(a=n/s):n=s*a;for(var l=new Ht(t,r,n,a),c=o.calculateTransform(l),u=this.geometries,h=0;h<u.length;h++){var d=u[h];d.type==="polygon"?(J3(d.exterior,c),W(d.interiors,function(f){J3(f,c)})):W(d.points,function(f){J3(f,c)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(FK);var NK=function(i){le(e,i);function e(t,r){var n=i.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),n=[r.x+r.width/2,r.y+r.height/2],a=Lf(N_e),o=t;o&&!o.isGeoSVGGraphicRoot;)hl(a,o.getLocalTransform(),a),o=o.parent;return Sc(a,a),Ca(n,n,a),n},e}(FK);function k_e(i){if(!i.UTF8Encoding)return i;var e=i,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return W(r,function(n){var a=n.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=UK(s,o,t);break;case"Polygon":tO(s,o,t);break;case"MultiLineString":tO(s,o,t);break;case"MultiPolygon":W(s,function(l,c){return tO(l,o[c],t)})}}),e.UTF8Encoding=!1,e}function tO(i,e,t){for(var r=0;r<i.length;r++)i[r]=UK(i[r],e[r],t)}function UK(i,e,t){for(var r=[],n=e[0],a=e[1],o=0;o<i.length;o+=2){var s=i.charCodeAt(o)-64,l=i.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=n,l+=a,n=s,a=l,r.push([s/t,l/t])}return r}function iO(i,e){return i=k_e(i),Me(Xi(i.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,n=t.geometry,a=[];switch(n.type){case"Polygon":var o=n.coordinates;a.push(new $3(o[0],o.slice(1)));break;case"MultiPolygon":W(n.coordinates,function(l){l[0]&&a.push(new $3(l[0],l.slice(1)))});break;case"LineString":a.push(new eO([n.coordinates]));break;case"MultiLineString":a.push(new eO(n.coordinates))}var s=new _2(r[e||"name"],a,r.cp);return s.properties=r,s})}var h_=$t();function kK(i){return i.type==="category"?z_e(i):H_e(i)}function zK(i,e){return i.type==="category"?V_e(i,e):{ticks:Me(i.scale.getTicks(),function(t){return t.value})}}function z_e(i){var e=i.getLabelModel(),t=HK(i,e);return!e.get("show")||i.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function HK(i,e){var t=QK(i,"labels"),r=v2(e),n=GK(t,r);if(n)return n;var a,o;return ft(r)?a=XK(i,r):(o=r==="auto"?Q_e(i):r,a=KK(i,o)),WK(t,r,{labels:a,labelCategoryInterval:o})}function V_e(i,e){var t=QK(i,"ticks"),r=v2(e),n=GK(t,r);if(n)return n;var a,o;if((!e.get("show")||i.scale.isBlank())&&(a=[]),ft(r))a=XK(i,r,!0);else if(r==="auto"){var s=HK(i,i.getLabelModel());o=s.labelCategoryInterval,a=Me(s.labels,function(l){return l.tickValue})}else o=r,a=KK(i,o,!0);return WK(t,r,{ticks:a,tickCategoryInterval:o})}function H_e(i){var e=i.scale.getTicks(),t=j0(i);return{labels:Me(e,function(r,n){return{level:r.level,formattedLabel:t(r,n),rawLabel:i.scale.getLabel(r),tickValue:r.value}})}}function QK(i,e){return h_(i)[e]||(h_(i)[e]=[])}function GK(i,e){for(var t=0;t<i.length;t++)if(i[t].key===e)return i[t].value}function WK(i,e,t){return i.push({key:e,value:t}),t}function Q_e(i){var e=h_(i).autoInterval;return e??(h_(i).autoInterval=i.calculateCategoryInterval())}function jK(i){var e=G_e(i),t=j0(i),r=(e.axisRotate-e.labelRotate)/180*Math.PI,n=i.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=i.dataToCoord(l+1)-i.dataToCoord(l),u=Math.abs(c*Math.cos(r)),h=Math.abs(c*Math.sin(r)),d=0,f=0;l<=a[1];l+=s){var m=0,y=0,g=dh(t({value:l}),e.font,"center","top");m=g.width*1.3,y=g.height*1.3,d=Math.max(d,m,7),f=Math.max(f,y,7)}var x=d/u,b=f/h;isNaN(x)&&(x=1/0),isNaN(b)&&(b=1/0);var S=Math.max(0,Math.floor(Math.min(x,b))),E=h_(i.model),D=i.getExtent(),B=E.lastAutoInterval,F=E.lastTickCount;return B!=null&&F!=null&&Math.abs(B-S)<=1&&Math.abs(F-o)<=1&&B>S&&E.axisExtent0===D[0]&&E.axisExtent1===D[1]?S=B:(E.lastTickCount=o,E.lastAutoInterval=S,E.axisExtent0=D[0],E.axisExtent1=D[1]),S}function G_e(i){var e=i.getLabelModel();return{axisRotate:i.getRotate?i.getRotate():i.isHorizontal&&!i.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function KK(i,e,t){var r=j0(i),n=i.scale,a=n.getExtent(),o=i.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=a[0],u=n.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var h=y2(i),d=o.get("showMinLabel")||h,f=o.get("showMaxLabel")||h;d&&c!==a[0]&&y(a[0]);for(var m=c;m<=a[1];m+=l)y(m);f&&m-l!==a[1]&&y(a[1]);function y(g){var x={value:g};s.push(t?g:{formattedLabel:r(x),rawLabel:n.getLabel(x),tickValue:g})}return s}function XK(i,e,t){var r=i.scale,n=j0(i),a=[];return W(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(t?l:{formattedLabel:n(o),rawLabel:s,tickValue:l})}),a}var YK=[0,1],W_e=function(){function i(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return i.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=r&&e<=n},i.prototype.containData=function(e){return this.scale.contain(e)},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.getPixelPrecision=function(e){return EC(e||this.scale.getExtent(),this._extent)},i.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},i.prototype.dataToCoord=function(e,t){var r=this._extent,n=this.scale;return e=n.normalize(e),this.onBand&&n.type==="ordinal"&&(r=r.slice(),qK(r,n.count())),yr(e,YK,r,t)},i.prototype.coordToData=function(e,t){var r=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(r=r.slice(),qK(r,n.count()));var a=yr(e,r,YK,t);return this.scale.scale(a)},i.prototype.pointToData=function(e,t){},i.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=zK(this,t),n=r.ticks,a=Me(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return j_e(this,a,o,e.clamp),a},i.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),n=Me(r,function(a){return Me(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},i.prototype.getViewLabels=function(){return kK(this).labels},i.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},i.prototype.getTickModel=function(){return this.model.getModel("axisTick")},i.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/r},i.prototype.calculateCategoryInterval=function(){return jK(this)},i}();function qK(i,e){var t=i[1]-i[0],r=e,n=t/r/2;i[0]+=n,i[1]-=n}function j_e(i,e,t,r){var n=e.length;if(!i.onBand||t||!n)return;var a=i.getExtent(),o,s;if(n===1)e[0].coord=a[0],o=e[1]={coord:a[1]};else{var l=e[n-1].tickValue-e[0].tickValue,c=(e[n-1].coord-e[0].coord)/l;W(e,function(f){f.coord-=c/2});var u=i.scale.getExtent();s=1+u[1]-e[n-1].tickValue,o={coord:e[n-1].coord+c*s},e.push(o)}var h=a[0]>a[1];d(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&d(a[0],e[0].coord)&&e.unshift({coord:a[0]}),d(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&d(o.coord,a[1])&&e.push({coord:a[1]});function d(f,m){return f=dn(f),m=dn(m),h?f>m:f<m}}var Vo=W_e;var d_=Math.PI*2,Tm=To.CMD,K_e=["top","right","bottom","left"];function X_e(i,e,t,r,n){var a=t.width,o=t.height;switch(i){case"top":r.set(t.x+a/2,t.y-e),n.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),n.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),n.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),n.set(1,0);break}}function Y_e(i,e,t,r,n,a,o,s,l){o-=i,s-=e;var c=Math.sqrt(o*o+s*s);o/=c,s/=c;var u=o*t+i,h=s*t+e;if(Math.abs(r-n)%d_<1e-4)return l[0]=u,l[1]=h,c-t;if(a){var d=r;r=es(n),n=es(d)}else r=es(r),n=es(n);r>n&&(n+=d_);var f=Math.atan2(s,o);if(f<0&&(f+=d_),f>=r&&f<=n||f+d_>=r&&f+d_<=n)return l[0]=u,l[1]=h,c-t;var m=t*Math.cos(r)+i,y=t*Math.sin(r)+e,g=t*Math.cos(n)+i,x=t*Math.sin(n)+e,b=(m-o)*(m-o)+(y-s)*(y-s),S=(g-o)*(g-o)+(x-s)*(x-s);return b<S?(l[0]=m,l[1]=y,Math.sqrt(b)):(l[0]=g,l[1]=x,Math.sqrt(S))}function w2(i,e,t,r,n,a,o,s){var l=n-i,c=a-e,u=t-i,h=r-e,d=Math.sqrt(u*u+h*h);u/=d,h/=d;var f=l*u+c*h,m=f/d;s&&(m=Math.min(Math.max(m,0),1)),m*=d;var y=o[0]=i+m*u,g=o[1]=e+m*h;return Math.sqrt((y-n)*(y-n)+(g-a)*(g-a))}function ZK(i,e,t,r,n,a,o){t<0&&(i=i+t,t=-t),r<0&&(e=e+r,r=-r);var s=i+t,l=e+r,c=o[0]=Math.min(Math.max(n,i),s),u=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((c-n)*(c-n)+(u-a)*(u-a))}var Nu=[];function q_e(i,e,t){var r=ZK(e.x,e.y,e.width,e.height,i.x,i.y,Nu);return t.set(Nu[0],Nu[1]),r}function Z_e(i,e,t){for(var r=0,n=0,a=0,o=0,s,l,c=1/0,u=e.data,h=i.x,d=i.y,f=0;f<u.length;){var m=u[f++];f===1&&(r=u[f],n=u[f+1],a=r,o=n);var y=c;switch(m){case Tm.M:a=u[f++],o=u[f++],r=a,n=o;break;case Tm.L:y=w2(r,n,u[f],u[f+1],h,d,Nu,!0),r=u[f++],n=u[f++];break;case Tm.C:y=rC(r,n,u[f++],u[f++],u[f++],u[f++],u[f],u[f+1],h,d,Nu),r=u[f++],n=u[f++];break;case Tm.Q:y=aC(r,n,u[f++],u[f++],u[f],u[f+1],h,d,Nu),r=u[f++],n=u[f++];break;case Tm.A:var g=u[f++],x=u[f++],b=u[f++],S=u[f++],E=u[f++],D=u[f++];f+=1;var B=!!(1-u[f++]);s=Math.cos(E)*b+g,l=Math.sin(E)*S+x,f<=1&&(a=s,o=l);var F=(h-g)*S/b+g;y=Y_e(g,x,S,E,E+D,B,F,d,Nu),r=Math.cos(E+D)*b+g,n=Math.sin(E+D)*S+x;break;case Tm.R:a=r=u[f++],o=n=u[f++];var H=u[f++],U=u[f++];y=ZK(a,o,H,U,h,d,Nu);break;case Tm.Z:y=w2(r,n,a,o,h,d,Nu,!0),r=a,n=o;break}y<c&&(c=y,t.set(Nu[0],Nu[1]))}return c}var Uu=new Ii,zn=new Ii,Ha=new Ii,Eh=new Ii,Ch=new Ii;function nO(i,e){if(i){var t=i.getTextGuideLine(),r=i.getTextContent();if(r&&t){var n=i.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=n.candidates||K_e,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,c=n.anchor,u=i.getComputedTransform(),h=u&&Sc([],u),d=e.get("length2")||0;c&&Ha.copy(c);for(var f=0;f<o.length;f++){var m=o[f];X_e(m,0,s,Uu,Eh),Ii.scaleAndAdd(zn,Uu,Eh,d),zn.transform(h);var y=i.getBoundingRect(),g=c?c.distance(zn):i instanceof Kt?Z_e(zn,i.path,Ha):q_e(zn,y,Ha);g<l&&(l=g,zn.transform(u),Ha.transform(u),Ha.toArray(a[0]),zn.toArray(a[1]),Uu.toArray(a[2]))}aO(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var b2=[],js=new Ii;function aO(i,e){if(e<=180&&e>0){e=e/180*Math.PI,Uu.fromArray(i[0]),zn.fromArray(i[1]),Ha.fromArray(i[2]),Ii.sub(Eh,Uu,zn),Ii.sub(Ch,Ha,zn);var t=Eh.len(),r=Ch.len();if(!(t<.001||r<.001)){Eh.scale(1/t),Ch.scale(1/r);var n=Eh.dot(Ch),a=Math.cos(e);if(a<n){var o=w2(zn.x,zn.y,Ha.x,Ha.y,Uu.x,Uu.y,b2,!1);js.fromArray(b2),js.scaleAndAdd(Ch,o/Math.tan(Math.PI-e));var s=Ha.x!==zn.x?(js.x-zn.x)/(Ha.x-zn.x):(js.y-zn.y)/(Ha.y-zn.y);if(isNaN(s))return;s<0?Ii.copy(js,zn):s>1&&Ii.copy(js,Ha),js.toArray(i[1])}}}}function JK(i,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Uu.fromArray(i[0]),zn.fromArray(i[1]),Ha.fromArray(i[2]),Ii.sub(Eh,zn,Uu),Ii.sub(Ch,Ha,zn);var r=Eh.len(),n=Ch.len();if(!(r<.001||n<.001)){Eh.scale(1/r),Ch.scale(1/n);var a=Eh.dot(e),o=Math.cos(t);if(a<o){var s=w2(zn.x,zn.y,Ha.x,Ha.y,Uu.x,Uu.y,b2,!1);js.fromArray(b2);var l=Math.PI/2,c=Math.acos(Ch.dot(e)),u=l+c-t;if(u>=l)Ii.copy(js,Ha);else{js.scaleAndAdd(Ch,s/Math.tan(Math.PI/2-u));var h=Ha.x!==zn.x?(js.x-zn.x)/(Ha.x-zn.x):(js.y-zn.y)/(Ha.y-zn.y);if(isNaN(h))return;h<0?Ii.copy(js,zn):h>1&&Ii.copy(js,Ha)}js.toArray(i[1])}}}}function rO(i,e,t,r){var n=t==="normal",a=n?i:i.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();n?i.useStyle(s):a.style=s}function J_e(i,e){var t=e.smooth,r=e.points;if(r)if(i.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var n=bc(r[0],r[1]),a=bc(r[1],r[2]);if(!n||!a){i.lineTo(r[1][0],r[1][1]),i.lineTo(r[2][0],r[2][1]);return}var o=Math.min(n,a)*t,s=r0([],r[1],r[0],o/n),l=r0([],r[1],r[2],o/a),c=r0([],s,l,.5);i.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),i.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)i.lineTo(r[u][0],r[u][1])}function X0(i,e,t){var r=i.getTextGuideLine(),n=i.getTextContent();if(!n){r&&i.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=n.ignore,l=0;l<Xf.length;l++){var c=Xf[l],u=e[c],h=c==="normal";if(u){var d=u.get("show"),f=h?s:Yt(n.states[c]&&n.states[c].ignore,s);if(f||!Yt(d,o)){var m=h?r:r&&r.states[c];m&&(m.ignore=!0),r&&rO(r,!0,c,u);continue}r||(r=new Jn,i.setTextGuideLine(r),!h&&(s||!o)&&rO(r,!0,"normal",e.normal),i.stateProxy&&(r.stateProxy=i.stateProxy)),rO(r,!1,c,u)}}if(r){At(r.style,t),r.style.fill=null;var y=a.get("showAbove"),g=i.textGuideLineConfig=i.textGuideLineConfig||{};g.showAbove=y||!1,r.buildPath=J_e}}function Y0(i,e){e=e||"labelLine";for(var t={normal:i.getModel(e)},r=0;r<uo.length;r++){var n=uo[r];t[n]=i.getModel([n,e])}return t}function S2(i){for(var e=[],t=0;t<i.length;t++){var r=i[t];if(!r.defaultAttr.ignore){var n=r.label,a=n.getComputedTransform(),o=n.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=n.style.margin||0,c=o.clone();c.applyTransform(a),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new M0(o,a):null;e.push({label:n,labelLine:r.labelLine,rect:c,localRect:o,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function $K(i,e,t,r,n,a){var o=i.length;if(o<2)return;i.sort(function(U,k){return U.rect[e]-k.rect[e]});for(var s=0,l,c=!1,u=[],h=0,d=0;d<o;d++){var f=i[d],m=f.rect;l=m[e]-s,l<0&&(m[e]-=l,f.label[e]-=l,c=!0);var y=Math.max(-l,0);u.push(y),h+=y,s=m[e]+m[t]}h>0&&a&&B(-h/o,0,o);var g=i[0],x=i[o-1],b,S;E(),b<0&&F(-b,.8),S<0&&F(S,.8),E(),D(b,S,1),D(S,b,-1),E(),b<0&&H(-b),S<0&&H(S);function E(){b=g.rect[e]-r,S=n-x.rect[e]-x.rect[t]}function D(U,k,j){if(U<0){var q=Math.min(k,-U);if(q>0){B(q*j,0,o);var X=q+U;X<0&&F(-X*j,1)}else F(-U*j,1)}}function B(U,k,j){U!==0&&(c=!0);for(var q=k;q<j;q++){var X=i[q],Y=X.rect;Y[e]+=U,X.label[e]+=U}}function F(U,k){for(var j=[],q=0,X=1;X<o;X++){var Y=i[X-1].rect,J=Math.max(i[X].rect[e]-Y[e]-Y[t],0);j.push(J),q+=J}if(q){var te=Math.min(Math.abs(U)/q,k);if(U>0)for(var X=0;X<o-1;X++){var de=j[X]*te;B(de,0,X+1)}else for(var X=o-1;X>0;X--){var de=j[X-1]*te;B(-de,X,o)}}}function H(U){var k=U<0?-1:1;U=Math.abs(U);for(var j=Math.ceil(U/(o-1)),q=0;q<o-1;q++)if(k>0?B(j,0,q+1):B(-j,o-q-1,o),U-=j,U<=0)return}return c}function eX(i,e,t,r){return $K(i,"x","width",e,t,r)}function C2(i,e,t,r){return $K(i,"y","height",e,t,r)}function E2(i){var e=[];i.sort(function(y,g){return g.priority-y.priority});var t=new Ht(0,0,0,0);function r(y){if(!y.ignore){var g=y.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}y.ignore=!0}for(var n=0;n<i.length;n++){var a=i[n],o=a.axisAligned,s=a.localRect,l=a.transform,c=a.label,u=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var h=a.obb,d=!1,f=0;f<e.length;f++){var m=e[f];if(t.intersect(m.rect)){if(o&&m.axisAligned){d=!0;break}if(m.obb||(m.obb=new M0(m.localRect,m.transform)),h||(h=new M0(s,l)),h.intersect(m.obb)){d=!0;break}}}d?(r(c),u&&r(u)):(c.attr("ignore",a.defaultAttr.ignore),u&&u.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function $_e(i){if(i){for(var e=[],t=0;t<i.length;t++)e.push(i[t].slice());return e}}function ewe(i,e){var t=i.label,r=e&&e.getTextGuideLine();return{dataIndex:i.dataIndex,dataType:i.dataType,seriesIndex:i.seriesModel.seriesIndex,text:i.label.style.text,rect:i.hostRect,labelRect:i.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:$_e(r&&r.shape.points)}}var tX=["align","verticalAlign","width","height","fontSize"],Ks=new fl,oO=$t(),twe=$t();function T2(i,e,t){for(var r=0;r<t.length;r++){var n=t[r];e[n]!=null&&(i[n]=e[n])}}var M2=["x","y","rotation"],iwe=function(){function i(){this._labelList=[],this._chartViewList=[]}return i.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},i.prototype._addLabel=function(e,t,r,n,a){var o=n.style,s=n.__hostTarget,l=s.textConfig||{},c=n.getComputedTransform(),u=n.getBoundingRect().plain();Ht.applyTransform(u,u,c),c?Ks.setLocalTransform(c):(Ks.x=Ks.y=Ks.rotation=Ks.originX=Ks.originY=0,Ks.scaleX=Ks.scaleY=1),Ks.rotation=es(Ks.rotation);var h=n.__hostTarget,d;if(h){d=h.getBoundingRect().plain();var f=h.getComputedTransform();Ht.applyTransform(d,d,f)}var m=d&&h.getTextGuideLine();this._labelList.push({label:n,labelLine:m,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:u,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:m&&m.ignore,x:Ks.x,y:Ks.y,scaleX:Ks.scaleX,scaleY:Ks.scaleY,rotation:Ks.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},i.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,n=r.get("labelLayout");(ft(n)||si(n).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Pt(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,n)})},i.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function n(S,E){return function(){nO(S,E)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,c=o.defaultAttr,u=void 0;ft(o.layoutOption)?u=o.layoutOption(ewe(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*h:c.attachedRot,offset:[u.dx||0,u.dy||0]});var d=!1;if(u.x!=null?(s.x=ot(u.x,t),s.setStyle("x",0),d=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=ot(u.y,r),s.setStyle("y",0),d=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:u.labelLinePoints}),d=!1)}var m=oO(s);m.needsUpdateLabelLine=d,s.rotation=u.rotate!=null?u.rotate*h:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var y=0;y<tX.length;y++){var g=tX[y];s.setStyle(g,u[g]!=null?u[g]:c.style[g])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var x=o.seriesModel;if(o.dataIndex!=null){var b=o.seriesModel.getData(o.dataType);x=b.getItemModel(o.dataIndex)}s.on("drag",n(l,x.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},i.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),n=S2(this._labelList),a=Xi(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Xi(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});eX(a,0,t),C2(o,0,r);var s=Xi(n,function(l){return l.layoutOption.hideOverlap});E2(s)},i.prototype.processLabelsOverall=function(){var e=this;W(this._chartViewList,function(t){var r=t.__model,n=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!n,l=o.getTextContent();!s&&l&&(s=oO(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},i.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),n=Pt(e),a=n.dataIndex;if(r&&a!=null){var o=t.getData(n.dataType),s=o.getItemModel(a),l={},c=o.getItemVisual(a,"style");if(c){var u=o.getVisual("drawType");l.stroke=c[u]}var h=s.getModel("labelLine");X0(e,Y0(s),l),nO(e,h)}},i.prototype._animateLabels=function(e,t){var r=e.getTextContent(),n=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!dd(e))){var a=oO(r),o=a.oldLayout,s=Pt(e),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(s.dataType);if(o){r.attr(o);var d=e.prevStates;d&&(qt(d,"select")>=0&&r.attr(a.oldLayoutSelect),qt(d,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),Si(r,c,t,l)}else if(r.attr(c),!gd(r).valueAnimation){var h=Yt(r.style.opacity,1);r.style.opacity=0,Ar(r,{style:{opacity:h}},t,l)}if(a.oldLayout=c,r.states.select){var f=a.oldLayoutSelect={};T2(f,c,M2),T2(f,r.states.select,M2)}if(r.states.emphasis){var m=a.oldLayoutEmphasis={};T2(m,c,M2),T2(m,r.states.emphasis,M2)}oE(r,l,u,t,t)}if(n&&!n.ignore&&!n.invisible){var a=twe(n),o=a.oldLayout,y={points:n.shape.points};o?(n.attr({shape:o}),Si(n,{shape:y},t)):(n.setShape(y),n.style.strokePercent=0,Ar(n,{style:{strokePercent:1}},t)),a.oldLayout=y}},i}(),iX=iwe;var sO=$t();function lO(i){i.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var n=sO(t).labelManager;n||(n=sO(t).labelManager=new iX),n.clearLabels()}),i.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var n=sO(t).labelManager;r.updatedSeries.forEach(function(a){n.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),n.updateLayoutConfig(t),n.layout(t),n.processLabelsOverall()})}var cO=Math.sin,uO=Math.cos,rX=Math.PI,Mm=Math.PI*2,rwe=180/rX,nwe=function(){function i(){}return i.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},i.prototype.moveTo=function(e,t){this._add("M",e,t)},i.prototype.lineTo=function(e,t){this._add("L",e,t)},i.prototype.bezierCurveTo=function(e,t,r,n,a,o){this._add("C",e,t,r,n,a,o)},i.prototype.quadraticCurveTo=function(e,t,r,n){this._add("Q",e,t,r,n)},i.prototype.arc=function(e,t,r,n,a,o){this.ellipse(e,t,r,r,0,n,a,o)},i.prototype.ellipse=function(e,t,r,n,a,o,s,l){var c=s-o,u=!l,h=Math.abs(c),d=hh(h-Mm)||(u?c>=Mm:-c>=Mm),f=c>0?c%Mm:c%Mm+Mm,m=!1;d?m=!0:hh(h)?m=!1:m=f>=rX==!!u;var y=e+r*uO(o),g=t+n*cO(o);this._start&&this._add("M",y,g);var x=Math.round(a*rwe);if(d){var b=1/this._p,S=(u?1:-1)*(Mm-b);this._add("A",r,n,x,1,+u,e+r*uO(o+S),t+n*cO(o+S)),b>.01&&this._add("A",r,n,x,0,+u,y,g)}else{var E=e+r*uO(s),D=t+n*cO(s);this._add("A",r,n,x,+m,+u,E,D)}},i.prototype.rect=function(e,t,r,n){this._add("M",e,t),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},i.prototype.closePath=function(){this._d.length>0&&this._add("Z")},i.prototype._add=function(e,t,r,n,a,o,s,l,c){for(var u=[],h=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*h)/h)}this._d.push(e+u.join(" ")),this._start=e==="Z"},i.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},i.prototype.getStr=function(){return this._str},i}(),I2=nwe;var f_="none",awe=Math.round;function owe(i){var e=i.fill;return e!=null&&e!==f_}function swe(i){var e=i.stroke;return e!=null&&e!==f_}var hO=["lineCap","miterLimit","lineJoin"],lwe=Me(hO,function(i){return"stroke-"+i.toLowerCase()});function dO(i,e,t,r){var n=e.opacity==null?1:e.opacity;if(t instanceof yn){i("opacity",n);return}if(owe(e)){var a=zf(e.fill);i("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*n:a.opacity*n;(r||o<1)&&i("fill-opacity",o)}else i("fill",f_);if(swe(e)){var s=zf(e.stroke);i("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*n:s.opacity*n,h=e.strokeFirst;if((r||c!==1)&&i("stroke-width",c),(r||h)&&i("paint-order",h?"stroke":"fill"),(r||u<1)&&i("stroke-opacity",u),e.lineDash){var d=qx(t),f=d[0],m=d[1];f&&(m=awe(m||0),i("stroke-dasharray",f.join(",")),(m||r)&&i("stroke-dashoffset",m))}else r&&i("stroke-dasharray",f_);for(var y=0;y<hO.length;y++){var g=hO[y];if(r||e[g]!==y0[g]){var x=e[g]||y0[g];x&&i(lwe[y],x)}}}else r&&i("stroke",f_)}var nX="http://www.w3.org/2000/svg",fO="http://www.w3.org/1999/xlink",aX="http://www.w3.org/2000/xmlns/",oX="http://www.w3.org/XML/1998/namespace",pO="ecmeta_";function B2(i){return document.createElementNS(nX,i)}function Qa(i,e,t,r,n){return{tag:i,attrs:t||{},children:r,text:n,key:e}}function cwe(i,e){var t=[];if(e)for(var r in e){var n=e[r],a=r;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),t.push(a))}return"<"+i+" "+t.join(" ")+">"}function uwe(i){return"</"+i+">"}function p_(i,e){e=e||{};var t=e.newline?`
`:"";function r(n){var a=n.children,o=n.tag,s=n.attrs,l=n.text;return cwe(o,s)+(o!=="style"?Zo(l):l||"")+(a?""+t+Me(a,function(c){return r(c)}).join(t)+t:"")+uwe(o)}return r(i)}function sX(i,e,t){t=t||{};var r=t.newline?`
`:"",n=" {"+r,a=r+"}",o=Me(si(i),function(l){return l+n+Me(si(i[l]),function(c){return c+":"+i[l][c]+";"}).join(r)+a}).join(r),s=Me(si(e),function(l){return"@keyframes "+l+n+Me(si(e[l]),function(c){return c+n+Me(si(e[l][c]),function(u){var h=e[l][c][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function A_(i){return{zrId:i,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function AO(i,e,t,r){return Qa("svg","root",{width:i,height:e,xmlns:nX,"xmlns:xlink":fO,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+i+" "+e:!1},t)}var hwe=0;function D2(){return hwe++}var lX={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Im="transform-origin";function dwe(i,e,t){var r=Ce({},i.shape);Ce(r,e),i.buildPath(t,r);var n=new I2;return n.reset(AC(i)),t.rebuildPath(n,1),n.generateStr(),n.getStr()}function fwe(i,e){var t=e.originX,r=e.originY;(t||r)&&(i[Im]=t+"px "+r+"px")}var pwe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function uX(i,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=i,t}function Awe(i,e,t){var r=i.shape.paths,n={},a,o;if(W(r,function(l){var c=A_(t.zrId);c.animation=!0,m_(l,{},c,!0);var u=c.cssAnims,h=c.cssNodes,d=si(u),f=d.length;if(f){o=d[f-1];var m=u[o];for(var y in m){var g=m[y];n[y]=n[y]||{d:""},n[y].d+=g.d||""}for(var x in h){var b=h[x].animation;b.indexOf(o)>=0&&(a=b)}}}),!!a){e.d=!1;var s=uX(n,t);return a.replace(o,s)}}function cX(i){return Ye(i)?lX[i]?"cubic-bezier("+lX[i]+")":l0(i)?i:"":""}function m_(i,e,t,r){var n=i.animators,a=n.length,o=[];if(i instanceof T0){var s=Awe(i,e,t);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},c=0;c<a;c++){var u=n[c],h=[u.getMaxTime()/1e3+"s"],d=cX(u.getClip().easing),f=u.getDelay();d?h.push(d):h.push("linear"),f&&h.push(f/1e3+"s"),u.getLoop()&&h.push("infinite");var m=h.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(u)}function y(b){var S=b[1],E=S.length,D={},B={},F={},H="animation-timing-function";function U(tt,ht,pt){for(var Je=tt.getTracks(),Ie=tt.getMaxTime(),Bi=0;Bi<Je.length;Bi++){var _t=Je[Bi];if(_t.needsAnimate()){var It=_t.keyframes,Ct=_t.propName;if(pt&&(Ct=pt(Ct)),Ct)for(var Xt=0;Xt<It.length;Xt++){var Oi=It[Xt],ae=Math.round(Oi.time/Ie*100)+"%",se=cX(Oi.easing),Ge=Oi.rawValue;(Ye(Ge)||mi(Ge))&&(ht[ae]=ht[ae]||{},ht[ae][Ct]=Oi.rawValue,se&&(ht[ae][H]=se))}}}}for(var k=0;k<E;k++){var j=S[k],q=j.targetName;q?q==="shape"&&U(j,B):!r&&U(j,D)}for(var X in D){var Y={};wP(Y,i),Ce(Y,D[X]);var J=mC(Y),te=D[X][H];F[X]=J?{transform:J}:{},fwe(F[X],Y),te&&(F[X][H]=te)}var de,ue=!0;for(var X in B){F[X]=F[X]||{};var ve=!de,te=B[X][H];ve&&(de=new To);var _e=de.len();de.reset(),F[X].d=dwe(i,B[X],de);var Re=de.len();if(!ve&&_e!==Re){ue=!1;break}te&&(F[X][H]=te)}if(!ue)for(var X in F)delete F[X].d;if(!r)for(var k=0;k<E;k++){var j=S[k],q=j.targetName;q==="style"&&U(j,F,function(Je){return pwe[Je]})}for(var Oe=si(F),Te=!0,Se,k=1;k<Oe.length;k++){var nt=Oe[k-1],rt=Oe[k];if(F[nt][Im]!==F[rt][Im]){Te=!1;break}Se=F[nt][Im]}if(Te&&Se){for(var X in F)F[X][Im]&&delete F[X][Im];e[Im]=Se}if(Xi(Oe,function(tt){return si(F[tt]).length>0}).length){var dt=uX(F,t);return dt+" "+b[0]+" both"}}for(var g in l){var s=y(l[g]);s&&o.push(s)}if(o.length){var x=t.zrId+"-cls-"+D2();t.cssNodes["."+x]={animation:o.join(",")},e.class=x}}function dX(i,e,t){if(!i.ignore)if(i.isSilent()){var r={"pointer-events":"none"};hX(r,e,t,!0)}else{var n=i.states.emphasis&&i.states.emphasis.style?i.states.emphasis.style:{},a=n.fill;if(!a){var o=i.style&&i.style.fill,s=i.states.select&&i.states.select.style&&i.states.select.style.fill,l=i.currentStates.indexOf("select")>=0&&s||o;l&&(a=qy(l))}var c=n.lineWidth;if(c){var u=!n.strokeNoScale&&i.transform?i.transform[0]:1;c=c/u}var r={cursor:"pointer"};a&&(r.fill=a),n.stroke&&(r.stroke=n.stroke),c&&(r["stroke-width"]=c),hX(r,e,t,!0)}}function hX(i,e,t,r){var n=JSON.stringify(i),a=t.cssStyleCache[n];a||(a=t.zrId+"-cls-"+D2(),t.cssStyleCache[n]=a,t.cssNodes["."+a+(r?":hover":"")]=i),e.class=e.class?e.class+" "+a:a}var g_=Math.round;function mX(i){return i&&Ye(i.src)}function gX(i){return i&&ft(i.toDataURL)}function mO(i,e,t,r){dO(function(n,a){var o=n==="fill"||n==="stroke";o&&pC(a)?xO(e,i,n,r):o&&Zy(a)?_O(t,i,n,r):o&&a==="none"?i[n]="transparent":i[n]=a},e,t,!1),wwe(t,i,r)}function gO(i,e){var t=A7(e);t&&(t.each(function(r,n){r!=null&&(i[(pO+n).toLowerCase()]=r+"")}),e.isSilent()&&(i[pO+"silent"]="true"))}function fX(i){return hh(i[0]-1)&&hh(i[1])&&hh(i[2])&&hh(i[3]-1)}function mwe(i){return hh(i[4])&&hh(i[5])}function vO(i,e,t){if(e&&!(mwe(e)&&fX(e))){var r=t?10:1e4;i.transform=fX(e)?"translate("+g_(e[4]*r)/r+" "+g_(e[5]*r)/r+")":QQ(e)}}function pX(i,e,t){for(var r=i.points,n=[],a=0;a<r.length;a++)n.push(g_(r[a][0]*t)/t),n.push(g_(r[a][1]*t)/t);e.points=n.join(" ")}function AX(i){return!i.smooth}function gwe(i){var e=Me(i,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,n){for(var a=0;a<e.length;a++){var o=e[a],s=t[o[0]];s!=null&&(r[o[1]]=g_(s*n)/n)}}}var vwe={circle:[gwe(["cx","cy","r"])],polyline:[pX,AX],polygon:[pX,AX]};function ywe(i){for(var e=i.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function vX(i,e){var t=i.style,r=i.shape,n=vwe[i.type],a={},o=e.animation,s="path",l=i.style.strokePercent,c=e.compress&&AC(i)||4;if(n&&!e.willUpdate&&!(n[1]&&!n[1](r))&&!(o&&ywe(i))&&!(l<1)){s=i.type;var u=Math.pow(10,c);n[0](r,a,u)}else{var h=!i.path||i.shapeChanged();i.path||i.createPathProxy();var d=i.path;h&&(d.beginPath(),i.buildPath(d,i.shape),i.pathUpdated());var f=d.getVersion(),m=i,y=m.__svgPathBuilder;(m.__svgPathVersion!==f||!y||l!==m.__svgPathStrokePercent)&&(y||(y=m.__svgPathBuilder=new I2),y.reset(c),d.rebuildPath(y,l),y.generateStr(),m.__svgPathVersion=f,m.__svgPathStrokePercent=l),a.d=y.getStr()}return vO(a,i.transform),mO(a,t,i,e),gO(a,i),e.animation&&m_(i,a,e),e.emphasis&&dX(i,a,e),Qa(s,i.id+"",a)}function xwe(i,e){var t=i.style,r=t.image;if(r&&!Ye(r)&&(mX(r)?r=r.src:gX(r)&&(r=r.toDataURL())),!!r){var n=t.x||0,a=t.y||0,o=t.width,s=t.height,l={href:r,width:o,height:s};return n&&(l.x=n),a&&(l.y=a),vO(l,i.transform),mO(l,t,i,e),gO(l,i),e.animation&&m_(i,l,e),Qa("image",i.id+"",l)}}function _we(i,e){var t=i.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var n=t.font||Wl,a=t.x||0,o=WQ(t.y||0,f0(n),t.textBaseline),s=GQ[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(eL(t)){var c="",u=t.fontStyle,h=$P(t.fontSize);if(!parseFloat(h))return;var d=t.fontFamily||VR,f=t.fontWeight;c+="font-size:"+h+";font-family:"+d+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),f&&f!=="normal"&&(c+="font-weight:"+f+";"),l.style=c}else l.style="font: "+n;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),vO(l,i.transform),mO(l,t,i,e),gO(l,i),e.animation&&m_(i,l,e),Qa("text",i.id+"",l,void 0,r)}}function yO(i,e){if(i instanceof Kt)return vX(i,e);if(i instanceof yn)return xwe(i,e);if(i instanceof ld)return _we(i,e)}function wwe(i,e,t){var r=i.style;if(jQ(r)){var n=KQ(i),a=t.shadowCache,o=a[n];if(!o){var s=i.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,h=r.shadowOffsetY||0,d=r.shadowBlur,f=zf(r.shadowColor),m=f.opacity,y=f.color,g=d/2/l,x=d/2/c,b=g+" "+x;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=Qa("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Qa("feDropShadow","",{dx:u/l,dy:h/c,stdDeviation:b,"flood-color":y,"flood-opacity":m})]),a[n]=o}e.filter=Jy(o)}}function xO(i,e,t,r){var n=i[t],a,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(dC(n))a="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(fC(n))a="radialGradient",o.cx=Yt(n.x,.5),o.cy=Yt(n.y,.5),o.r=Yt(n.r,.5);else return;for(var s=n.colorStops,l=[],c=0,u=s.length;c<u;++c){var h=hC(s[c].offset)*100+"%",d=s[c].color,f=zf(d),m=f.color,y=f.opacity,g={offset:h};g["stop-color"]=m,y<1&&(g["stop-opacity"]=y),l.push(Qa("stop",c+"",g))}var x=Qa(a,"",o,l),b=p_(x),S=r.gradientCache,E=S[b];E||(E=r.zrId+"-g"+r.gradientIdx++,S[b]=E,o.id=E,r.defs[E]=Qa(a,E,o,l)),e[t]=Jy(E)}function _O(i,e,t,r){var n=i.style[t],a=i.getBoundingRect(),o={},s=n.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",h;if(cP(n)){var d=n.imageWidth,f=n.imageHeight,m=void 0,y=n.image;if(Ye(y)?m=y:mX(y)?m=y.src:gX(y)&&(m=y.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";In(d,g),In(f,g)}else if(d==null||f==null){var x=function(k,j){if(k){var q=k.elm,X=d||j.width,Y=f||j.height;k.tag==="pattern"&&(c?(Y=1,X/=a.width):u&&(X=1,Y/=a.height)),k.attrs.width=X,k.attrs.height=Y,q&&(q.setAttribute("width",X),q.setAttribute("height",Y))}},b=cx(m,null,i,function(k){l||x(B,k),x(h,k)});b&&b.width&&b.height&&(d=d||b.width,f=f||b.height)}h=Qa("image","img",{href:m,width:d,height:f}),o.width=d,o.height=f}else n.svgElement&&(h=Tt(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(h){var S,E;l?S=E=1:c?(E=1,S=o.width/a.width):u?(S=1,E=o.height/a.height):o.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(o.width=S),E!=null&&!isNaN(E)&&(o.height=E);var D=mC(n);D&&(o.patternTransform=D);var B=Qa("pattern","",o,[h]),F=p_(B),H=r.patternCache,U=H[F];U||(U=r.zrId+"-p"+r.patternIdx++,H[F]=U,o.id=U,B=r.defs[U]=Qa("pattern",U,o,[h])),e[t]=Jy(U)}}function yX(i,e,t){var r=t.clipPathCache,n=t.defs,a=r[i.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var o={id:a};r[i.id]=a,n[a]=Qa("clipPath",a,o,[vX(i,t)])}e["clip-path"]=Jy(a)}function wO(i){return document.createTextNode(i)}function up(i,e,t){i.insertBefore(e,t)}function bO(i,e){i.removeChild(e)}function SO(i,e){i.appendChild(e)}function CO(i){return i.parentNode}function EO(i){return i.nextSibling}function R2(i,e){i.textContent=e}var xX=58,Swe=120,Cwe=Qa("","");function TO(i){return i===void 0}function Th(i){return i!==void 0}function Ewe(i,e,t){for(var r={},n=e;n<=t;++n){var a=i[n].key;a!==void 0&&(r[a]=n)}return r}function v_(i,e){var t=i.key===e.key,r=i.tag===e.tag;return r&&t}function y_(i){var e,t=i.children,r=i.tag;if(Th(r)){var n=i.elm=B2(r);if(L2(Cwe,i),Ee(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&SO(n,y_(a))}else Th(i.text)&&!yt(i.text)&&SO(n,wO(i.text))}else i.elm=wO(i.text);return i.elm}function _X(i,e,t,r,n){for(;r<=n;++r){var a=t[r];a!=null&&up(i,y_(a),e)}}function P2(i,e,t,r){for(;t<=r;++t){var n=e[t];if(n!=null)if(Th(n.tag)){var a=CO(n.elm);bO(a,n.elm)}else bO(i,n.elm)}}function L2(i,e){var t,r=e.elm,n=i&&i.attrs||{},a=e.attrs||{};if(n!==a){for(t in a){var o=a[t],s=n[t];s!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==Swe?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(aX,t,o):t.charCodeAt(3)===xX?r.setAttributeNS(oX,t,o):t.charCodeAt(5)===xX?r.setAttributeNS(fO,t,o):r.setAttribute(t,o))}for(t in n)t in a||r.removeAttribute(t)}}function Twe(i,e,t){for(var r=0,n=0,a=e.length-1,o=e[0],s=e[a],l=t.length-1,c=t[0],u=t[l],h,d,f,m;r<=a&&n<=l;)o==null?o=e[++r]:s==null?s=e[--a]:c==null?c=t[++n]:u==null?u=t[--l]:v_(o,c)?(q0(o,c),o=e[++r],c=t[++n]):v_(s,u)?(q0(s,u),s=e[--a],u=t[--l]):v_(o,u)?(q0(o,u),up(i,o.elm,EO(s.elm)),o=e[++r],u=t[--l]):v_(s,c)?(q0(s,c),up(i,s.elm,o.elm),s=e[--a],c=t[++n]):(TO(h)&&(h=Ewe(e,r,a)),d=h[c.key],TO(d)?up(i,y_(c),o.elm):(f=e[d],f.tag!==c.tag?up(i,y_(c),o.elm):(q0(f,c),e[d]=void 0,up(i,f.elm,o.elm))),c=t[++n]);(r<=a||n<=l)&&(r>a?(m=t[l+1]==null?null:t[l+1].elm,_X(i,m,t,n,l)):P2(i,e,r,a))}function q0(i,e){var t=e.elm=i.elm,r=i.children,n=e.children;i!==e&&(L2(i,e),TO(e.text)?Th(r)&&Th(n)?r!==n&&Twe(t,r,n):Th(n)?(Th(i.text)&&R2(t,""),_X(t,null,n,0,n.length-1)):Th(r)?P2(t,r,0,r.length-1):Th(i.text)&&R2(t,""):i.text!==e.text&&(Th(r)&&P2(t,r,0,r.length-1),R2(t,e.text)))}function MO(i,e){if(v_(i,e))q0(i,e);else{var t=i.elm,r=CO(t);y_(e),r!==null&&(up(r,e.elm,EO(t)),P2(r,[i],0,0))}return e}var Mwe=0,Iwe=function(){function i(e,t,r){if(this.type="svg",this.refreshHover=wX("refreshHover"),this.configLayer=wX("configLayer"),this.storage=t,this._opts=r=Ce({},r),this.root=e,this._id="zr"+Mwe++,this._oldVNode=AO(r.width,r.height),e&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=B2("svg");L2(null,this._oldVNode),n.appendChild(a),e.appendChild(n)}this.resize(r.width,r.height)}return i.prototype.getType=function(){return this.type},i.prototype.getViewportRoot=function(){return this._viewport},i.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},i.prototype.getSvgDom=function(){return this._svgDom},i.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",MO(this._oldVNode,e),this._oldVNode=e}},i.prototype.renderOneToVNode=function(e){return yO(e,A_(this._id))},i.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,n=this._height,a=A_(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis;var o=[],s=this._bgVNode=Bwe(r,n,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=Qa("g","main",{},[]);this._paintList(t,a,l?l.children:o),l&&o.push(l);var c=Me(si(a.defs),function(d){return a.defs[d]});if(c.length&&o.push(Qa("defs","defs",{},c)),e.animation){var u=sX(a.cssNodes,a.cssAnims,{newline:!0});if(u){var h=Qa("style","stl",{},[],u);o.push(h)}}return AO(r,n,o,e.useViewBox)},i.prototype.renderToString=function(e){return e=e||{},p_(this.renderToVNode({animation:Yt(e.cssAnimation,!0),emphasis:Yt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Yt(e.useViewBox,!0)}),{newline:!0})},i.prototype.setBackgroundColor=function(e){this._backgroundColor=e},i.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},i.prototype._paintList=function(e,t,r){for(var n=e.length,a=[],o=0,s,l,c=0,u=0;u<n;u++){var h=e[u];if(!h.invisible){var d=h.__clipPaths,f=d&&d.length||0,m=l&&l.length||0,y=void 0;for(y=Math.max(f-1,m-1);y>=0&&!(d&&l&&d[y]===l[y]);y--);for(var g=m-1;g>y;g--)o--,s=a[o-1];for(var x=y+1;x<f;x++){var b={};yX(d[x],b,t);var S=Qa("g","clip-g-"+c++,b,[]);(s?s.children:r).push(S),a[o++]=S,s=S}l=d;var E=yO(h,t);E&&(s?s.children:r).push(E)}}},i.prototype.resize=function(e,t){var r=this._opts,n=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),n&&a&&(a.style.display="none",e=tp(n,0,r),t=tp(n,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var o=a.style;o.width=e+"px",o.height=t+"px"}if(Zy(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},i.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},i.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=XQ(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},i}();function wX(i){return function(){}}function Bwe(i,e,t,r){var n;if(t&&t!=="none")if(n=Qa("rect","bg",{width:i,height:e,x:"0",y:"0"}),pC(t))xO({fill:t},n.attrs,"fill",r);else if(Zy(t))_O({style:{fill:t},dirty:hn,getBoundingRect:function(){return{width:i,height:e}}},n.attrs,"fill",r);else{var a=zf(t),o=a.color,s=a.opacity;n.attrs.fill=o,s<1&&(n.attrs["fill-opacity"]=s)}return n}var bX=Iwe;function IO(i){i.registerPainter("svg",bX)}function SX(i,e,t){var r=xs.createCanvas(),n=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",i)),r.width=n*t,r.height=a*t,r}var Dwe=function(i){Yi(e,i);function e(t,r,n){var a=i.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;n=n||WA,typeof t=="string"?o=SX(t,r,n):yt(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(QS(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=n,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=SX("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new Ht(0,0,0,0);function u(b){if(!(!b.isFinite()||b.isZero()))if(o.length===0){var S=new Ht(0,0,0,0);S.copy(b),o.push(S)}else{for(var E=!1,D=1/0,B=0,F=0;F<o.length;++F){var H=o[F];if(H.intersect(b)){var U=new Ht(0,0,0,0);U.copy(H),U.union(b),o[F]=U,E=!0;break}else if(l){c.copy(b),c.union(H);var k=b.width*b.height,j=H.width*H.height,q=c.width*c.height,X=q-k-j;X<D&&(D=X,B=F)}}if(l&&(o[B].union(b),E=!0),!E){var S=new Ht(0,0,0,0);S.copy(b),o.push(S)}l||(l=o.length>=s)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=t[h];if(d){var f=d.shouldBePainted(n,a,!0,!0),m=d.__isRendered&&(d.__dirty&lo||!f)?d.getPrevPaintRect():null;m&&u(m);var y=f&&(d.__dirty&lo||!d.__isRendered)?d.getPaintRect():null;y&&u(y)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=r[h],f=d&&d.shouldBePainted(n,a,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var m=d.getPrevPaintRect();m&&u(m)}}var g;do{g=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var x=h+1;x<o.length;)o[h].intersect(o[x])?(g=!0,o[h].union(o[x]),o.splice(x,1)):x++;h++}}while(g);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var n=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*n,a.height=r*n,s&&(s.width=t*n,s.height=r*n,n!==1&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,r,n){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr,d=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/h,l/h));var f=this.domBack;function m(y,g,x,b){if(o.clearRect(y,g,x,b),r&&r!=="transparent"){var S=void 0;if(Df(r)){var E=r.global||r.__width===x&&r.__height===b;S=E&&r.__canvasGradient||Yx(o,r,{x:0,y:0,width:x,height:b}),r.__canvasGradient=S,r.__width=x,r.__height=b}else aQ(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,S=YE(o,r,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));o.save(),o.fillStyle=S||r,o.fillRect(y,g,x,b),o.restore()}c&&(o.save(),o.globalAlpha=u,o.drawImage(f,y,g,x,b),o.restore())}!n||c?m(0,0,s,l):n.length&&W(n,function(y){m(y.x*h,y.y*h,y.width*h,y.height*h)})},e}($a),O2=Dwe;var CX=1e5,Bm=314159,F2=.01,Rwe=.001;function Pwe(i){return i?i.__builtin__?!0:!(typeof i.resize!="function"||typeof i.refresh!="function"):!1}function Lwe(i,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+i+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Owe=function(){function i(e,t,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Ce({},r||{}),this.dpr=r.devicePixelRatio||WA,this._singleCanvas=a,this.root=e;var o=e.style;o&&(QS(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var u=e,h=u.width,d=u.height;r.width!=null&&(h=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,u.width=h*this.dpr,u.height=d*this.dpr,this._width=h,this._height=d;var f=new O2(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Bm]=f,f.zlevel=Bm,s.push(Bm),this._domRoot=e}else{this._width=tp(e,0,r),this._height=tp(e,1,r);var c=this._domRoot=Lwe(this._width,this._height);e.appendChild(c)}}return i.prototype.getType=function(){return"canvas"},i.prototype.isSingleCanvas=function(){return this._singleCanvas},i.prototype.getViewportRoot=function(){return this._domRoot},i.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},i.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<n.length;a++){var o=n[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},i.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},i.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(CX)),a||(a=r.ctx,a.save()),ip(a,s,n,o===t-1))}a&&a.restore()}},i.prototype.getHoverLayer=function(){return this.getLayer(CX)},i.prototype.paintOne=function(e,t){qE(e,t)},i.prototype._paintList=function(e,t,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;jy(function(){l._paintList(e,t,r,n)})}}},i.prototype._compositeManually=function(){var e=this.getLayer(Bm).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(n){n.virtual&&e.drawImage(n.dom,0,0,t,r)})},i.prototype._doPaintList=function(e,t,r){for(var n=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&a.push(c)}for(var u=!0,h=!1,d=function(y){var g=a[y],x=g.ctx,b=o&&g.createRepaintRects(e,t,f._width,f._height),S=r?g.__startIndex:g.__drawIndex,E=!r&&g.incremental&&Date.now,D=E&&Date.now(),B=g.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,B,b);else if(S===g.__startIndex){var F=e[S];(!F.incremental||!F.notClear||r)&&g.clear(!1,B,b)}S===-1&&(console.error("For some unknown reason. drawIndex is -1"),S=g.__startIndex);var H,U=function(X){var Y={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(H=S;H<g.__endIndex;H++){var J=e[H];if(J.__inHover&&(h=!0),n._doPaintEl(J,g,o,X,Y,H===g.__endIndex-1),E){var te=Date.now()-D;if(te>15)break}}Y.prevElClipPaths&&x.restore()};if(b)if(b.length===0)H=g.__endIndex;else for(var k=f.dpr,j=0;j<b.length;++j){var q=b[j];x.save(),x.beginPath(),x.rect(q.x*k,q.y*k,q.width*k,q.height*k),x.clip(),U(q),x.restore()}else x.save(),U(),x.restore();g.__drawIndex=H,g.__drawIndex<g.__endIndex&&(u=!1)},f=this,m=0;m<a.length;m++)d(m);return ki.wxa&&W(this._layers,function(y){y&&y.ctx&&y.ctx.draw&&y.ctx.draw()}),{finished:u,needsRefreshHover:h}},i.prototype._doPaintEl=function(e,t,r,n,a,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!n||l&&l.intersect(n))&&(ip(s,e,a,o),e.setPrevPaintRect(l))}else ip(s,e,a,o)},i.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Bm);var r=this._layers[e];return r||(r=new O2("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?ri(r,this._layerConfig[e],!0):this._layerConfig[e-F2]&&ri(r,this._layerConfig[e-F2],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},i.prototype.insertLayer=function(e,t){var r=this._layers,n=this._zlevelList,a=n.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&Pwe(t)){if(a>0&&e>n[0]){for(l=0;l<a-1&&!(n[l]<e&&n[l+1]>e);l++);s=r[n[l]]}if(n.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(t.dom,c.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},i.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n];e.call(t,this._layers[a],a)}},i.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},i.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},i.prototype.getLayers=function(){return this._layers},i.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function t(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var n=e[r];if(n.zlevel!==e[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var n=e[l],c=n.zlevel,u=void 0;s!==c&&(s=c,o=0),n.incremental?(u=this.getLayer(c+Rwe,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(c+(o>0?F2:0),this._needsManuallyCompositing),u.__builtin__||BA("ZLevel "+c+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),a=u),n.__dirty&lo&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},i.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},i.prototype._clearLayer=function(e){e.clear()},i.prototype.setBackgroundColor=function(e){this._backgroundColor=e,W(this._layers,function(t){t.setUnpainted()})},i.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?ri(r[e],t,!0):r[e]=t;for(var n=0;n<this._zlevelList.length;n++){var a=this._zlevelList[n];if(a===e||a===e+F2){var o=this._layers[a];ri(o,r[e],!0)}}}},i.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],r.splice(qt(r,e),1))},i.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,a=this.root;if(e!=null&&(n.width=e),t!=null&&(n.height=t),e=tp(a,0,n),t=tp(a,1,n),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Bm).resize(e,t)}return this},i.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},i.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},i.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Bm].dom;var t=new O2("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,a=t.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,n,a):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];ip(r,u,o,l===c-1)}return t.dom},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i}(),EX=Owe;function BO(i){i.registerPainter("canvas",EX)}var Fwe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){if(!1)var r;return zo(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new xt,n=Nr("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(n),n.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=t.itemHeight*.8,c=Nr(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?o:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(rr),TX=Fwe;function ku(i,e){var t=i.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var n=wd(i,e,t[0]);return n!=null?n+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(wd(i,e,t[o]));return a.join(" ")}}function N2(i,e){var t=i.mapDimensionsAll("defaultedLabel");if(!Ee(e))return e+"";for(var r=[],n=0;n<t.length;n++){var a=i.getDimensionIndex(t[n]);a>=0&&r.push(e[a])}return r.join(" ")}var Nwe=function(i){le(e,i);function e(t,r,n,a){var o=i.call(this)||this;return o.updateData(t,r,n,a),o}return e.prototype._createSymbol=function(t,r,n,a,o){this.removeAll();var s=Nr(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=Uwe,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){_s(this.childAt(0))},e.prototype.downplay=function(){ws(this.childAt(0))},e.prototype.setZ=function(t,r){var n=this.childAt(0);n.zlevel=t,n.z=r},e.prototype.setDraggable=function(t,r){var n=this.childAt(0);n.draggable=t,n.cursor=!r&&t?"move":n.cursor},e.prototype.updateData=function(t,r,n,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),c=o!==this._symbolType,u=a&&a.disableAnimation;if(c){var h=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,h)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?d.attr(f):Si(d,f,s,r),eo(d)}if(this._updateCommon(t,r,l,n,a),c){var d=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,Ar(d,f,s,r)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,n,a,o){var s=this.childAt(0),l=t.hostModel,c,u,h,d,f,m,y,g,x;if(a&&(c=a.emphasisItemStyle,u=a.blurItemStyle,h=a.selectItemStyle,d=a.focus,f=a.blurScope,y=a.labelStatesModels,g=a.hoverScale,x=a.cursorStyle,m=a.emphasisDisabled),!a||t.hasItemOption){var b=a&&a.itemModel?a.itemModel:t.getItemModel(r),S=b.getModel("emphasis");c=S.getModel("itemStyle").getItemStyle(),h=b.getModel(["select","itemStyle"]).getItemStyle(),u=b.getModel(["blur","itemStyle"]).getItemStyle(),d=S.get("focus"),f=S.get("blurScope"),m=S.get("disabled"),y=Kr(b),g=S.getShallow("scale"),x=b.getShallow("cursor")}var E=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(E||0)*Math.PI/180||0);var D=tc(t.getItemVisual(r,"symbolOffset"),n);D&&(s.x=D[0],s.y=D[1]),x&&s.attr("cursor",x);var B=t.getItemVisual(r,"style"),F=B.fill;if(s instanceof yn){var H=s.style;s.useStyle(Ce({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},B))}else s.__isEmptyBrush?s.useStyle(Ce({},B)):s.useStyle(B),s.style.decal=null,s.setColor(F,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var U=t.getItemVisual(r,"liftZ"),k=this._z2;U!=null?k==null&&(this._z2=s.z2,s.z2+=U):k!=null&&(s.z2=k,this._z2=null);var j=o&&o.useNameLabel;fn(s,y,{labelFetcher:l,labelDataIndex:r,defaultText:q,inheritColor:F,defaultOpacity:B.opacity});function q(J){return j?t.getName(J):ku(t,J)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var X=s.ensureState("emphasis");X.style=c,s.ensureState("select").style=h,s.ensureState("blur").style=u;var Y=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;X.scaleX=this._sizeX*Y,X.scaleY=this._sizeY*Y,this.setSymbolScale(1),pr(this,d,f,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,n){var a=this.childAt(0),o=Pt(this).dataIndex,s=n&&n.animation;if(this.silent=a.silent=!0,n&&n.fadeLabel){var l=a.getTextContent();l&&Pc(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Pc(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return Pu(t.getItemVisual(r,"symbolSize"))},e}(xt);function Uwe(i,e){this.parent.drift(i,e)}var Cd=Nwe;function DO(i,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&i.getItemVisual(t,"symbol")!=="none"}function MX(i){return i!=null&&!yt(i)&&(i={isIgnore:i}),i||{}}function IX(i){var e=i.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Kr(e),cursorStyle:e.get("cursor")}}var kwe=function(){function i(e){this.group=new xt,this._SymbolCtor=e||Cd}return i.prototype.updateData=function(e,t){this._progressiveEls=null,t=MX(t);var r=this.group,n=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=IX(e),c={disableAnimation:s},u=t.getSymbolPoint||function(h){return e.getItemLayout(h)};a||r.removeAll(),e.diff(a).add(function(h){var d=u(h);if(DO(e,d,h,t)){var f=new o(e,h,l,c);f.setPosition(d),e.setItemGraphicEl(h,f),r.add(f)}}).update(function(h,d){var f=a.getItemGraphicEl(d),m=u(h);if(!DO(e,m,h,t)){r.remove(f);return}var y=e.getItemVisual(h,"symbol")||"circle",g=f&&f.getSymbolType&&f.getSymbolType();if(!f||g&&g!==y)r.remove(f),f=new o(e,h,l,c),f.setPosition(m);else{f.updateData(e,h,l,c);var x={x:m[0],y:m[1]};s?f.attr(x):Si(f,x,n)}r.add(f),e.setItemGraphicEl(h,f)}).remove(function(h){var d=a.getItemGraphicEl(h);d&&d.fadeOut(function(){r.remove(d)},n)}).execute(),this._getSymbolPoint=u,this._data=e},i.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,n){var a=e._getSymbolPoint(n);r.setPosition(a),r.markRedraw()})},i.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=IX(e),this._data=null,this.group.removeAll()},i.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=MX(r);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(DO(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},i.prototype.eachRendered=function(e){Hs(this._progressiveEls||this.group,e)},i.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},r.hostModel)}):t.removeAll()},i}(),Mh=kwe;function U2(i,e,t){var r=i.getBaseAxis(),n=i.getOtherAxis(r),a=zwe(n,t),o=r.dim,s=n.dim,l=e.mapDimension(s),c=e.mapDimension(o),u=s==="x"||s==="radius"?1:0,h=Me(i.dimensions,function(m){return e.mapDimension(m)}),d=!1,f=e.getCalculationInfo("stackResultDimension");return ic(e,h[0])&&(d=!0,h[0]=f),ic(e,h[1])&&(d=!0,h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!d,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function zwe(i,e){var t=0,r=i.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:mi(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function k2(i,e,t,r){var n=NaN;i.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(n)&&(n=i.valueStart);var a=i.baseDataOffset,o=[];return o[a]=t.get(i.baseDim,r),o[1-a]=n,e.dataToPoint(o)}function Vwe(i,e){var t=[];return e.diff(i).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,n){t.push({cmd:"=",idx:n,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function RO(i,e,t,r,n,a,o,s){for(var l=Vwe(i,e),c=[],u=[],h=[],d=[],f=[],m=[],y=[],g=U2(n,e,o),x=i.getLayout("points")||[],b=e.getLayout("points")||[],S=0;S<l.length;S++){var E=l[S],D=!0,B=void 0,F=void 0;switch(E.cmd){case"=":B=E.idx*2,F=E.idx1*2;var H=x[B],U=x[B+1],k=b[F],j=b[F+1];(isNaN(H)||isNaN(U))&&(H=k,U=j),c.push(H,U),u.push(k,j),h.push(t[B],t[B+1]),d.push(r[F],r[F+1]),y.push(e.getRawIndex(E.idx1));break;case"+":var q=E.idx,X=g.dataDimsForPoint,Y=n.dataToPoint([e.get(X[0],q),e.get(X[1],q)]);F=q*2,c.push(Y[0],Y[1]),u.push(b[F],b[F+1]);var J=k2(g,n,e,q);h.push(J[0],J[1]),d.push(r[F],r[F+1]),y.push(e.getRawIndex(q));break;case"-":D=!1}D&&(f.push(E),m.push(m.length))}m.sort(function(nt,rt){return y[nt]-y[rt]});for(var te=c.length,de=Ws(te),ue=Ws(te),ve=Ws(te),_e=Ws(te),Re=[],S=0;S<m.length;S++){var Oe=m[S],Te=S*2,Se=Oe*2;de[Te]=c[Se],de[Te+1]=c[Se+1],ue[Te]=u[Se],ue[Te+1]=u[Se+1],ve[Te]=h[Se],ve[Te+1]=h[Se+1],_e[Te]=d[Se],_e[Te+1]=d[Se+1],Re[S]=f[Oe]}return{current:de,next:ue,stackedOnCurrent:ve,stackedOnNext:_e,status:Re}}var hp=Math.min,dp=Math.max;function Dm(i,e){return isNaN(i)||isNaN(e)}function PO(i,e,t,r,n,a,o,s,l){for(var c,u,h,d,f,m,y=t,g=0;g<r;g++){var x=e[y*2],b=e[y*2+1];if(y>=n||y<0)break;if(Dm(x,b)){if(l){y+=a;continue}break}if(y===t)i[a>0?"moveTo":"lineTo"](x,b),h=x,d=b;else{var S=x-c,E=b-u;if(S*S+E*E<.5){y+=a;continue}if(o>0){for(var D=y+a,B=e[D*2],F=e[D*2+1];B===x&&F===b&&g<r;)g++,D+=a,y+=a,B=e[D*2],F=e[D*2+1],x=e[y*2],b=e[y*2+1],S=x-c,E=b-u;var H=g+1;if(l)for(;Dm(B,F)&&H<r;)H++,D+=a,B=e[D*2],F=e[D*2+1];var U=.5,k=0,j=0,q=void 0,X=void 0;if(H>=r||Dm(B,F))f=x,m=b;else{k=B-c,j=F-u;var Y=x-c,J=B-x,te=b-u,de=F-b,ue=void 0,ve=void 0;if(s==="x"){ue=Math.abs(Y),ve=Math.abs(J);var _e=k>0?1:-1;f=x-_e*ue*o,m=b,q=x+_e*ve*o,X=b}else if(s==="y"){ue=Math.abs(te),ve=Math.abs(de);var Re=j>0?1:-1;f=x,m=b-Re*ue*o,q=x,X=b+Re*ve*o}else ue=Math.sqrt(Y*Y+te*te),ve=Math.sqrt(J*J+de*de),U=ve/(ve+ue),f=x-k*o*(1-U),m=b-j*o*(1-U),q=x+k*o*U,X=b+j*o*U,q=hp(q,dp(B,x)),X=hp(X,dp(F,b)),q=dp(q,hp(B,x)),X=dp(X,hp(F,b)),k=q-x,j=X-b,f=x-k*ue/ve,m=b-j*ue/ve,f=hp(f,dp(c,x)),m=hp(m,dp(u,b)),f=dp(f,hp(c,x)),m=dp(m,hp(u,b)),k=x-f,j=b-m,q=x+k*ve/ue,X=b+j*ve/ue}i.bezierCurveTo(h,d,f,m,x,b),h=q,d=X}else i.lineTo(x,b)}c=x,u=b,y+=a}return g}var BX=function(){function i(){this.smooth=0,this.smoothConstraint=!0}return i}(),DX=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new BX},e.prototype.buildPath=function(t,r){var n=r.points,a=0,o=n.length/2;if(r.connectNulls){for(;o>0&&Dm(n[o*2-2],n[o*2-1]);o--);for(;a<o&&Dm(n[a*2],n[a*2+1]);a++);}for(;a<o;)a+=PO(t,n,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,a=n.data,o=To.CMD,s,l,c=r==="x",u=[],h=0;h<a.length;){var d=a[h++],f=void 0,m=void 0,y=void 0,g=void 0,x=void 0,b=void 0,S=void 0;switch(d){case o.M:s=a[h++],l=a[h++];break;case o.L:if(f=a[h++],m=a[h++],S=c?(t-s)/(f-s):(t-l)/(m-l),S<=1&&S>=0){var E=c?(m-l)*S+l:(f-s)*S+s;return c?[t,E]:[E,t]}s=f,l=m;break;case o.C:f=a[h++],m=a[h++],y=a[h++],g=a[h++],x=a[h++],b=a[h++];var D=c?kA(s,f,y,x,t,u):kA(l,m,g,b,t,u);if(D>0)for(var B=0;B<D;B++){var F=u[B];if(F<=1&&F>=0){var E=c?Ea(l,m,g,b,F):Ea(s,f,y,x,F);return c?[t,E]:[E,t]}}s=x,l=b;break}}},e}(Kt);var Hwe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(BX),z2=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new Hwe},e.prototype.buildPath=function(t,r){var n=r.points,a=r.stackedOnPoints,o=0,s=n.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Dm(n[s*2-2],n[s*2-1]);s--);for(;o<s&&Dm(n[o*2],n[o*2+1]);o++);}for(;o<s;){var c=PO(t,n,o,s,s,1,r.smooth,l,r.connectNulls);PO(t,a,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,t.closePath()}},e}(Kt);function LO(i,e,t,r,n){var a=i.getArea(),o=a.x,s=a.y,l=a.width,c=a.height,u=t.get(["lineStyle","width"])||2;o-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new pi({shape:{x:o,y:s,width:l,height:c}});if(e){var d=i.getBaseAxis(),f=d.isHorizontal(),m=d.inverse;f?(m&&(h.shape.x+=l),h.shape.width=0):(m||(h.shape.y+=c),h.shape.height=0);var y=ft(n)?function(g){n(g,h)}:null;Ar(h,{shape:{width:l,height:c,x:o,y:s}},t,null,r,y)}return h}function OO(i,e,t){var r=i.getArea(),n=dn(r.r0,1),a=dn(r.r,1),o=new Ra({shape:{cx:dn(i.cx,1),cy:dn(i.cy,1),r0:n,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=i.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=n,Ar(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function Ih(i,e,t,r,n){if(i){if(i.type==="polar")return OO(i,e,t);if(i.type==="cartesian2d")return LO(i,e,t,r,n)}else return null;return null}function Vc(i,e){return i.type===e}function RX(i,e){if(i.length===e.length){for(var t=0;t<i.length;t++)if(i[t]!==e[t])return;return!0}}function PX(i){for(var e=1/0,t=1/0,r=-1/0,n=-1/0,a=0;a<i.length;){var o=i[a++],s=i[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),n=Math.max(s,n))}return[[e,t],[r,n]]}function LX(i,e){var t=PX(i),r=t[0],n=t[1],a=PX(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function OX(i){return mi(i)?i:i?.5:0}function Qwe(i,e,t){if(!t.valueDim)return[];for(var r=e.count(),n=Ws(r*2),a=0;a<r;a++){var o=k2(t,i,e,a);n[a*2]=o[0],n[a*2+1]=o[1]}return n}function fp(i,e,t,r){var n=e.getBaseAxis(),a=n.dim==="x"||n.dim==="radius"?0:1,o=[],s=0,l=[],c=[],u=[],h=[];if(r){for(s=0;s<i.length;s+=2)!isNaN(i[s])&&!isNaN(i[s+1])&&h.push(i[s],i[s+1]);i=h}for(s=0;s<i.length-2;s+=2)switch(u[0]=i[s+2],u[1]=i[s+3],c[0]=i[s],c[1]=i[s+1],o.push(c[0],c[1]),t){case"end":l[a]=u[a],l[1-a]=c[1-a],o.push(l[0],l[1]);break;case"middle":var d=(c[a]+u[a])/2,f=[];l[a]=f[a]=d,l[1-a]=c[1-a],f[1-a]=u[1-a],o.push(l[0],l[1]),o.push(f[0],f[1]);break;default:l[a]=c[a],l[1-a]=u[1-a],o.push(l[0],l[1])}return o.push(i[s++],i[s++]),o}function Gwe(i,e){var t=[],r=i.length,n,a;function o(u,h,d){var f=u.coord,m=(d-f)/(h.coord-f),y=VQ(m,[u.color,h.color]);return{coord:d,color:y}}for(var s=0;s<r;s++){var l=i[s],c=l.coord;if(c<0)n=l;else if(c>e){a?t.push(o(a,l,e)):n&&t.push(o(n,l,0),o(n,l,e));break}else n&&(t.push(o(n,l,0)),n=null),t.push(l),a=l}return t}function Wwe(i,e,t){var r=i.getVisual("visualMeta");if(!(!r||!r.length||!i.count())&&e.type==="cartesian2d"){for(var n,a,o=r.length-1;o>=0;o--){var s=i.getDimensionInfo(r[o].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){a=r[o];break}}if(a){var l=e.getAxis(n),c=Me(a.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),u=c.length,h=a.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),h.reverse());var d=Gwe(c,n==="x"?t.getWidth():t.getHeight()),f=d.length;if(!f&&u)return c[0].coord<0?h[1]?h[1]:c[u-1].color:h[0]?h[0]:c[0].color;var m=10,y=d[0].coord-m,g=d[f-1].coord+m,x=g-y;if(x<.001)return"transparent";W(d,function(S){S.offset=(S.coord-y)/x}),d.push({offset:f?d[f-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:h[0]||"transparent"});var b=new xh(0,0,0,0,d,!0);return b[n]=y,b[n+"2"]=g,b}}}function jwe(i,e,t){var r=i.get("showAllSymbol"),n=r==="auto";if(!(r&&!n)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(n&&Kwe(a,e))){var o=e.mapDimension(a.dim),s={};return W(a.getViewLabels(),function(l){var c=a.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function Kwe(i,e){var t=i.getExtent(),r=Math.abs(t[1]-t[0])/i.scale.count();isNaN(r)&&(r=0);for(var n=e.count(),a=Math.max(1,Math.round(n/5)),o=0;o<n;o+=a)if(Cd.getSymbolSize(e,o)[i.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Xwe(i,e){return isNaN(i)||isNaN(e)}function Ywe(i){for(var e=i.length/2;e>0&&Xwe(i[e*2-2],i[e*2-1]);e--);return e-1}function FX(i,e){return[i[e*2],i[e*2+1]]}function qwe(i,e,t){for(var r=i.length/2,n=t==="x"?0:1,a,o,s=0,l=-1,c=0;c<r;c++)if(o=i[c*2+n],!(isNaN(o)||isNaN(i[c*2+1-n]))){if(c===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=c;break}s=c,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function NX(i){if(i.get(["endLabel","show"]))return!0;for(var e=0;e<uo.length;e++)if(i.get([uo[e],"endLabel","show"]))return!0;return!1}function FO(i,e,t,r){if(Vc(e,"cartesian2d")){var n=r.getModel("endLabel"),a=n.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=NX(r)?function(f,m){i._endLabelOnDuring(f,m,o,s,a,n,e)}:null,c=e.getBaseAxis().isHorizontal(),u=LO(e,t,r,function(){var f=i._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var h=u.shape,d=Math.max(h.width,h.height);c?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,u),u}else return OO(e,t,r)}function Zwe(i,e){var t=e.getBaseAxis(),r=t.isHorizontal(),n=t.inverse,a=r?n?"right":"left":"center",o=r?"middle":n?"top":"bottom";return{normal:{align:i.get("align")||a,verticalAlign:i.get("verticalAlign")||o}}}var Jwe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.init=function(){var t=new xt,r=new Mh;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t},e.prototype.render=function(t,r,n){var a=this,o=t.coordinateSystem,s=this.group,l=t.getData(),c=t.getModel("lineStyle"),u=t.getModel("areaStyle"),h=l.getLayout("points")||[],d=o.type==="polar",f=this._coordSys,m=this._symbolDraw,y=this._polyline,g=this._polygon,x=this._lineGroup,b=!r.ssr&&t.get("animation"),S=!u.isEmpty(),E=u.get("origin"),D=U2(o,l,E),B=S&&Qwe(o,l,D),F=t.get("showSymbol"),H=t.get("connectNulls"),U=F&&!d&&jwe(t,l,o),k=this._data;k&&k.eachItemGraphicEl(function(rt,dt){rt.__temp&&(s.remove(rt),k.setItemGraphicEl(dt,null))}),F||m.remove(),s.add(x);var j=d?!1:t.get("step"),q;o&&o.getArea&&t.get("clip",!0)&&(q=o.getArea(),q.width!=null?(q.x-=.1,q.y-=.1,q.width+=.2,q.height+=.2):q.r0&&(q.r0-=.5,q.r+=.5)),this._clipShapeForSymbol=q;var X=Wwe(l,o,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(y&&f.type===o.type&&j===this._step))F&&m.updateData(l,{isIgnore:U,clipShape:q,disableAnimation:!0,getSymbolPoint:function(rt){return[h[rt*2],h[rt*2+1]]}}),b&&this._initSymbolLabelAnimation(l,o,q),j&&(h=fp(h,o,j,H),B&&(B=fp(B,o,j,H))),y=this._newPolyline(h),S?g=this._newPolygon(h,B):g&&(x.remove(g),g=this._polygon=null),d||this._initOrUpdateEndLabel(t,o,Iu(X)),x.setClipPath(FO(this,o,!0,t));else{S&&!g?g=this._newPolygon(h,B):g&&!S&&(x.remove(g),g=this._polygon=null),d||this._initOrUpdateEndLabel(t,o,Iu(X));var Y=x.getClipPath();if(Y){var J=FO(this,o,!1,t);Ar(Y,{shape:J.shape},t)}else x.setClipPath(FO(this,o,!0,t));F&&m.updateData(l,{isIgnore:U,clipShape:q,disableAnimation:!0,getSymbolPoint:function(rt){return[h[rt*2],h[rt*2+1]]}}),(!RX(this._stackedOnPoints,B)||!RX(this._points,h))&&(b?this._doUpdateAnimation(l,B,o,n,j,E,H):(j&&(h=fp(h,o,j,H),B&&(B=fp(B,o,j,H))),y.setShape({points:h}),g&&g.setShape({points:h,stackedOnPoints:B})))}var te=t.getModel("emphasis"),de=te.get("focus"),ue=te.get("blurScope"),ve=te.get("disabled");if(y.useStyle(At(c.getLineStyle(),{fill:"none",stroke:X,lineJoin:"bevel"})),Dn(y,t,"lineStyle"),y.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var _e=y.getState("emphasis").style;_e.lineWidth=+y.style.lineWidth+1}Pt(y).seriesIndex=t.seriesIndex,pr(y,de,ue,ve);var Re=OX(t.get("smooth")),Oe=t.get("smoothMonotone");if(y.setShape({smooth:Re,smoothMonotone:Oe,connectNulls:H}),g){var Te=l.getCalculationInfo("stackedOnSeries"),Se=0;g.useStyle(At(u.getAreaStyle(),{fill:X,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Te&&(Se=OX(Te.get("smooth"))),g.setShape({smooth:Re,stackedOnSmooth:Se,smoothMonotone:Oe,connectNulls:H}),Dn(g,t,"areaStyle"),Pt(g).seriesIndex=t.seriesIndex,pr(g,de,ue,ve)}var nt=function(rt){a._changePolyState(rt)};l.eachItemGraphicEl(function(rt){rt&&(rt.onHoverStateChange=nt)}),this._polyline.onHoverStateChange=nt,this._data=l,this._coordSys=o,this._stackedOnPoints=B,this._points=h,this._step=j,this._valueOrigin=E,t.get("triggerLineEvent")&&(this.packEventData(t,y),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,r){Pt(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,n,a){var o=t.getData(),s=Bc(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var u=l[s*2],h=l[s*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var d=t.get("zlevel")||0,f=t.get("z")||0;c=new Cd(o,s),c.x=u,c.y=h,c.setZ(d,f);var m=c.getSymbolPath().getTextContent();m&&(m.zlevel=d,m.z=f,m.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else qi.prototype.highlight.call(this,t,r,n,a)},e.prototype.downplay=function(t,r,n,a){var o=t.getData(),s=Bc(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else qi.prototype.downplay.call(this,t,r,n,a)},e.prototype._changePolyState=function(t){var r=this._polygon;sm(this._polyline,t),r&&sm(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new DX({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new z2({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,r,n){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var c=t.hostModel,u=c.get("animationDuration");ft(u)&&(u=u(null));var h=c.get("animationDelay")||0,d=ft(h)?h(null):h;t.eachItemGraphicEl(function(f,m){var y=f;if(y){var g=[f.x,f.y],x=void 0,b=void 0,S=void 0;if(n)if(o){var E=n,D=r.pointToCoord(g);a?(x=E.startAngle,b=E.endAngle,S=-D[1]/180*Math.PI):(x=E.r0,b=E.r,S=D[0])}else{var B=n;a?(x=B.x,b=B.x+B.width,S=f.x):(x=B.y+B.height,b=B.y,S=f.y)}var F=b===x?0:(S-x)/(b-x);l&&(F=1-F);var H=ft(h)?h(m):u*F+d,U=y.getSymbolPath(),k=U.getTextContent();y.attr({scaleX:0,scaleY:0}),y.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:H}),k&&k.animateFrom({style:{opacity:0}},{duration:300,delay:H}),U.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,n){var a=t.getModel("endLabel");if(NX(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new yi({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=Ywe(l);u>=0&&(fn(s,Kr(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:u,defaultText:function(h,d,f){return f!=null?N2(o,f):ku(o,h)},enableTextSetter:!0},Zwe(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,n,a,o,s,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&a.originalX==null&&(a.originalX=c.x,a.originalY=c.y);var h=n.getLayout("points"),d=n.hostModel,f=d.get("connectNulls"),m=s.get("precision"),y=s.get("distance")||0,g=l.getBaseAxis(),x=g.isHorizontal(),b=g.inverse,S=r.shape,E=b?x?S.x:S.y+S.height:x?S.x+S.width:S.y,D=(x?y:0)*(b?-1:1),B=(x?0:-y)*(b?-1:1),F=x?"x":"y",H=qwe(h,E,F),U=H.range,k=U[1]-U[0],j=void 0;if(k>=1){if(k>1&&!f){var q=FX(h,U[0]);c.attr({x:q[0]+D,y:q[1]+B}),o&&(j=d.getRawValue(U[0]))}else{var q=u.getPointOn(E,F);q&&c.attr({x:q[0]+D,y:q[1]+B});var X=d.getRawValue(U[0]),Y=d.getRawValue(U[1]);o&&(j=RC(n,m,X,Y,H.t))}a.lastFrameIndex=U[0]}else{var J=t===1||a.lastFrameIndex>0?U[0]:0,q=FX(h,J);o&&(j=d.getRawValue(J)),c.attr({x:q[0]+D,y:q[1]+B})}if(o){var te=gd(c);typeof te.setLabelText=="function"&&te.setLabelText(j)}}},e.prototype._doUpdateAnimation=function(t,r,n,a,o,s,l){var c=this._polyline,u=this._polygon,h=t.hostModel,d=RO(this._data,t,this._stackedOnPoints,r,this._coordSys,n,this._valueOrigin,s),f=d.current,m=d.stackedOnCurrent,y=d.next,g=d.stackedOnNext;if(o&&(f=fp(d.current,n,o,l),m=fp(d.stackedOnCurrent,n,o,l),y=fp(d.next,n,o,l),g=fp(d.stackedOnNext,n,o,l)),LX(f,y)>3e3||u&&LX(m,g)>3e3){c.stopAnimation(),c.setShape({points:y}),u&&(u.stopAnimation(),u.setShape({points:y,stackedOnPoints:g}));return}c.shape.__points=d.current,c.shape.points=f;var x={shape:{points:y}};d.current!==f&&(x.shape.__points=d.next),c.stopAnimation(),Si(c,x,h),u&&(u.setShape({points:f,stackedOnPoints:m}),u.stopAnimation(),Si(u,{shape:{stackedOnPoints:g}},h),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var b=[],S=d.status,E=0;E<S.length;E++){var D=S[E].cmd;if(D==="="){var B=t.getItemGraphicEl(S[E].idx1);B&&b.push({el:B,ptIdx:E})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var F=c.shape.__points,H=0;H<b.length;H++){var U=b[H].el,k=b[H].ptIdx*2;U.x=F[k],U.y=F[k+1],U.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(qi),UX=Jwe;function zu(i,e){return{seriesType:i,plan:ec(),reset:function(t){var r=t.getData(),n=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(n){var s=Me(n.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");ic(r,s[0])&&(s[0]=c),ic(r,s[1])&&(s[1]=c);var u=r.getStore(),h=r.getDimensionIndex(s[0]),d=r.getDimensionIndex(s[1]);return l&&{progress:function(f,m){for(var y=f.end-f.start,g=o&&Ws(y*l),x=[],b=[],S=f.start,E=0;S<f.end;S++){var D=void 0;if(l===1){var B=u.get(h,S);D=n.dataToPoint(B,null,b)}else x[0]=u.get(h,S),x[1]=u.get(d,S),D=n.dataToPoint(x,null,b);o?(g[E++]=D[0],g[E++]=D[1]):m.setItemLayout(S,D.slice())}o&&m.setLayout("points",g)}}}}}}var $we={average:function(i){for(var e=0,t=0,r=0;r<i.length;r++)isNaN(i[r])||(e+=i[r],t++);return t===0?NaN:e/t},sum:function(i){for(var e=0,t=0;t<i.length;t++)e+=i[t]||0;return e},max:function(i){for(var e=-1/0,t=0;t<i.length;t++)i[t]>e&&(e=i[t]);return isFinite(e)?e:NaN},min:function(i){for(var e=1/0,t=0;t<i.length;t++)i[t]<e&&(e=i[t]);return isFinite(e)?e:NaN},minmax:function(i){for(var e=-1/0,t=-1/0,r=0;r<i.length;r++){var n=i[r],a=Math.abs(n);a>e&&(e=a,t=n)}return isFinite(t)?t:NaN},nearest:function(i){return i[0]}},ebe=function(i){return Math.round(i.length/2)};function x_(i){return{seriesType:i,reset:function(e,t,r){var n=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),c=o.getOtherAxis(l),u=l.getExtent(),h=r.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(h||1),f=Math.round(s/d);if(isFinite(f)&&f>1){a==="lttb"&&e.setData(n.lttbDownSample(n.mapDimension(c.dim),1/f));var m=void 0;Ye(a)?m=$we[a]:ft(a)&&(m=a),m&&e.setData(n.downSample(n.mapDimension(c.dim),1/f,m,ebe))}}}}}function NO(i){i.registerChartView(UX),i.registerSeriesModel(TX),i.registerLayout(zu("line",!0)),i.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,x_("line"))}var kX=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return zo(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,n){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(t),s=a.dataToPoint(o);if(n)W(a.getAxes(),function(d,f){if(d.type==="category"&&r!=null){var m=d.getTicksCoords(),y=d.getTickModel().get("alignWithLabel"),g=o[f],x=r[f]==="x1"||r[f]==="y1";if(x&&!y&&(g+=1),m.length<2)return;if(m.length===2){s[f]=d.toGlobalCoord(d.getExtent()[x?1:0]);return}for(var b=void 0,S=void 0,E=1,D=0;D<m.length;D++){var B=m[D].coord,F=D===m.length-1?m[D-1].tickValue+E:m[D].tickValue;if(F===g){S=B;break}else if(F<g)b=B;else if(b!=null&&F>g){S=(B+b)/2;break}D===1&&(E=F-m[0].tickValue)}S==null&&(b?b&&(S=m[m.length-1].coord):S=m[0].coord),s[f]=d.toGlobalCoord(S)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),h=a.getBaseAxis().isHorizontal()?0:1;s[h]+=c+u/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(rr);rr.registerClass(kX);var Z0=kX;var tbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return zo(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,n){return n.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Cs(Z0.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Z0),zX=tbe;var ibe=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),rbe=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new ibe},e.prototype.buildPath=function(t,r){var n=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,u=r.startAngle,h=r.endAngle,d=r.clockwise,f=Math.PI*2,m=d?h-u<f:u-h<f;m||(u=h-(d?f:-f));var y=Math.cos(u),g=Math.sin(u),x=Math.cos(h),b=Math.sin(h);m?(t.moveTo(y*o+n,g*o+a),t.arc(y*c+n,g*c+a,l,-Math.PI+u,u,!d)):t.moveTo(y*s+n,g*s+a),t.arc(n,a,s,u,h,!d),t.arc(x*c+n,b*c+a,l,h-Math.PI*2,h-Math.PI,!d),o!==0&&t.arc(n,a,o,h,u,d)},e}(Kt),J0=rbe;function VX(i,e){e=e||{};var t=e.isRoundCap;return function(r,n,a){var o=n.position;if(!o||o instanceof Array)return YA(r,n,a);var s=i(o),l=n.distance!=null?n.distance:5,c=this.shape,u=c.cx,h=c.cy,d=c.r,f=c.r0,m=(d+f)/2,y=c.startAngle,g=c.endAngle,x=(y+g)/2,b=t?Math.abs(d-f)/2:0,S=Math.cos,E=Math.sin,D=u+d*S(y),B=h+d*E(y),F="left",H="top";switch(s){case"startArc":D=u+(f-l)*S(x),B=h+(f-l)*E(x),F="center",H="top";break;case"insideStartArc":D=u+(f+l)*S(x),B=h+(f+l)*E(x),F="center",H="bottom";break;case"startAngle":D=u+m*S(y)+V2(y,l+b,!1),B=h+m*E(y)+H2(y,l+b,!1),F="right",H="middle";break;case"insideStartAngle":D=u+m*S(y)+V2(y,-l+b,!1),B=h+m*E(y)+H2(y,-l+b,!1),F="left",H="middle";break;case"middle":D=u+m*S(x),B=h+m*E(x),F="center",H="middle";break;case"endArc":D=u+(d+l)*S(x),B=h+(d+l)*E(x),F="center",H="bottom";break;case"insideEndArc":D=u+(d-l)*S(x),B=h+(d-l)*E(x),F="center",H="top";break;case"endAngle":D=u+m*S(g)+V2(g,l+b,!0),B=h+m*E(g)+H2(g,l+b,!0),F="left",H="middle";break;case"insideEndAngle":D=u+m*S(g)+V2(g,-l+b,!0),B=h+m*E(g)+H2(g,-l+b,!0),F="right",H="middle";break;default:return YA(r,n,a)}return r=r||{},r.x=D,r.y=B,r.align=F,r.verticalAlign=H,r}}function HX(i,e,t,r){if(mi(r)){i.setTextConfig({rotation:r});return}else if(Ee(e)){i.setTextConfig({rotation:0});return}var n=i.shape,a=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(a+o)/2,l,c=t(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:i.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),i.setTextConfig({rotation:u})}function V2(i,e,t){return e*Math.sin(i)*(t?-1:1)}function H2(i,e,t){return e*Math.cos(i)*(t?1:-1)}function Bh(i,e,t){var r=i.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Ee(r)||(r=[r,r,r,r]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Me(r,function(a){return $o(a,n)})}}var UO=Math.max,kO=Math.min;function nbe(i,e){var t=i.getArea&&i.getArea();if(Vc(i,"cartesian2d")){var r=i.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var abe=function(i){le(e,i);function e(){var t=i.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,n,a){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,n):this._renderNormal(t,r,n,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Hs(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,n,a){var o=this.group,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.getBaseAxis(),h;c.type==="cartesian2d"?h=u.isHorizontal():c.type==="polar"&&(h=u.dim==="angle");var d=t.isAnimationEnabled()?t:null,f=obe(t,c);f&&this._enableRealtimeSort(f,s,n);var m=t.get("clip",!0)||f,y=nbe(c,s);o.removeClipPath();var g=t.get("roundCap",!0),x=t.get("showBackground",!0),b=t.getModel("backgroundStyle"),S=b.get("borderRadius")||0,E=[],D=this._backgroundEls,B=a&&a.isInitSort,F=a&&a.type==="changeAxisOrder";function H(j){var q=Q2[c.type](s,j),X=fbe(c,h,q);return X.useStyle(b.getItemStyle()),c.type==="cartesian2d"?X.setShape("r",S):X.setShape("cornerRadius",S),E[j]=X,X}s.diff(l).add(function(j){var q=s.getItemModel(j),X=Q2[c.type](s,j,q);if(x&&H(j),!(!s.hasValue(j)||!KX[c.type](X))){var Y=!1;m&&(Y=QX[c.type](y,X));var J=GX[c.type](t,s,j,X,h,d,u.model,!1,g);f&&(J.forceLabelAnimation=!0),XX(J,s,j,q,X,t,h,c.type==="polar"),B?J.attr({shape:X}):f?WX(f,d,J,X,j,h,!1,!1):Ar(J,{shape:X},t,j),s.setItemGraphicEl(j,J),o.add(J),J.ignore=Y}}).update(function(j,q){var X=s.getItemModel(j),Y=Q2[c.type](s,j,X);if(x){var J=void 0;D.length===0?J=H(q):(J=D[q],J.useStyle(b.getItemStyle()),c.type==="cartesian2d"?J.setShape("r",S):J.setShape("cornerRadius",S),E[j]=J);var te=Q2[c.type](s,j),de=$X(h,te,c);Si(J,{shape:de},d,j)}var ue=l.getItemGraphicEl(q);if(!s.hasValue(j)||!KX[c.type](Y)){o.remove(ue);return}var ve=!1;if(m&&(ve=QX[c.type](y,Y),ve&&o.remove(ue)),ue?eo(ue):ue=GX[c.type](t,s,j,Y,h,d,u.model,!!ue,g),f&&(ue.forceLabelAnimation=!0),F){var _e=ue.getTextContent();if(_e){var Re=gd(_e);Re.prevValue!=null&&(Re.prevValue=Re.value)}}else XX(ue,s,j,X,Y,t,h,c.type==="polar");B?ue.attr({shape:Y}):f?WX(f,d,ue,Y,j,h,!0,F):Si(ue,{shape:Y},t,j,null),s.setItemGraphicEl(j,ue),ue.ignore=ve,o.add(ue)}).remove(function(j){var q=l.getItemGraphicEl(j);q&&fd(q,t,j)}).execute();var U=this._backgroundGroup||(this._backgroundGroup=new xt);U.removeAll();for(var k=0;k<E.length;++k)U.add(E[k]);o.add(U),this._backgroundEls=E,this._data=s},e.prototype._renderLarge=function(t,r,n){this._clear(),qX(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),qX(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Ih(t.coordinateSystem,!1,t),n=this.group;r?n.setClipPath(r):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,n){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,n),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,n){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=n(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Me(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,n){for(var a=n.scale,o=t.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,c=a.getOrdinalMeta().categories.length;l<c;++l){var u=t.rawIndexOf(o,a.getRawOrdinalNumber(l)),h=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(h>s)return!0;s=h}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var n=r.scale,a=n.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,n,a){if(this._isOrderChangedWithinSameData(t,r,n)){var o=this._dataSort(t,n,r);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,n){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(a){fd(a,t,Pt(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(qi),QX={cartesian2d:function(i,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var n=i.x+i.width,a=i.y+i.height,o=UO(e.x,i.x),s=kO(e.x+e.width,n),l=UO(e.y,i.y),c=kO(e.y+e.height,a),u=s<o,h=c<l;return e.x=u&&o>n?s:o,e.y=h&&l>a?c:l,e.width=u?0:s-o,e.height=h?0:c-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(i,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var n=kO(e.r,i.r),a=UO(e.r0,i.r0);e.r=n,e.r0=a;var o=n-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},GX={cartesian2d:function(i,e,t,r,n,a,o,s,l){var c=new pi({shape:Ce({},r),z2:1});if(c.__dataIndex=t,c.name="item",a){var u=c.shape,h=n?"height":"width";u[h]=0}return c},polar:function(i,e,t,r,n,a,o,s,l){var c=!n&&l?J0:Ra,u=new c({shape:r,z2:1});u.name="item";var h=JX(n);if(u.calculateTextPosition=VX(h,{isRoundCap:c===J0}),a){var d=u.shape,f=n?"r":"endAngle",m={};d[f]=n?r.r0:r.startAngle,m[f]=r[f],(s?Si:Ar)(u,{shape:m},a)}return u}};function obe(i,e){var t=i.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function WX(i,e,t,r,n,a,o,s){var l,c;a?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?Si:Ar)(t,{shape:l},e,n,null);var u=e?i.baseAxis.model:null;(o?Si:Ar)(t,{shape:c},u,n)}function jX(i,e){for(var t=0;t<e.length;t++)if(!isFinite(i[e[t]]))return!0;return!1}var sbe=["x","y","width","height"],lbe=["cx","cy","r","startAngle","endAngle"],KX={cartesian2d:function(i){return!jX(i,sbe)},polar:function(i){return!jX(i,lbe)}},Q2={cartesian2d:function(i,e,t){var r=i.getItemLayout(e),n=t?ube(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*n/2,y:r.y+o*n/2,width:r.width-a*n,height:r.height-o*n}},polar:function(i,e,t){var r=i.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function cbe(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function JX(i){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(i)}function XX(i,e,t,r,n,a,o,s){var l=e.getItemVisual(t,"style");if(s){if(!a.get("roundCap")){var u=i.shape,h=Bh(r.getModel("itemStyle"),u,!0);Ce(u,h),i.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;i.setShape("r",c)}i.useStyle(l);var d=r.getShallow("cursor");d&&i.attr("cursor",d);var f=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",m=Kr(r);fn(i,m,{labelFetcher:a,labelDataIndex:t,defaultText:ku(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var y=i.getTextContent();if(s&&y){var g=r.get(["label","position"]);i.textConfig.inside=g==="middle"?!0:null,HX(i,g==="outside"?f:g,JX(o),r.get(["label","rotate"]))}aE(y,m,a.getRawValue(t),function(b){return N2(e,b)});var x=r.getModel(["emphasis"]);pr(i,x.get("focus"),x.get("blurScope"),x.get("disabled")),Dn(i,r),cbe(n)&&(i.style.fill="none",i.style.stroke="none",W(i.states,function(b){b.style&&(b.style.fill=b.style.stroke="none")}))}function ube(i,e){var t=i.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=i.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,n,a)}var hbe=function(){function i(){}return i}(),YX=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new hbe},e.prototype.buildPath=function(t,r){for(var n=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<n.length;u+=3)l[a]=c,l[o]=n[u+2],s[a]=n[u+a],s[o]=n[u+o],t.rect(s[0],s[1],l[0],l[1])},e}(Kt);function qX(i,e,t,r){var n=i.getData(),a=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=i.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var u=new YX({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=a,u.largeDataIndices=o,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),t&&t.push(u)}var h=new YX({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,e.add(h),h.useStyle(n.getVisual("style")),Pt(h).seriesIndex=i.seriesIndex,i.get("silent")||(h.on("mousedown",ZX),h.on("mousemove",ZX)),t&&t.push(h)}var ZX=Gx(function(i){var e=this,t=dbe(e,i.offsetX,i.offsetY);Pt(e).dataIndex=t>=0?t:null},30,!1);function dbe(i,e,t){for(var r=i.baseDimIdx,n=1-r,a=i.shape.points,o=i.largeDataIndices,s=[],l=[],c=i.barWidth,u=0,h=a.length/3;u<h;u++){var d=u*3;if(l[r]=c,l[n]=a[d+2],s[r]=a[d+r],s[n]=a[d+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[u]}return-1}function $X(i,e,t){if(Vc(t,"cartesian2d")){var r=e,n=t.getArea();return{x:i?r.x:n.x,y:i?n.y:r.y,width:i?r.width:n.width,height:i?n.height:r.height}}else{var n=t.getArea(),a=e;return{cx:n.cx,cy:n.cy,r0:i?n.r0:a.r0,r:i?n.r:a.r,startAngle:i?a.startAngle:0,endAngle:i?a.endAngle:Math.PI*2}}}function fbe(i,e,t){var r=i.type==="polar"?Ra:pi;return new r({shape:$X(e,t,i),silent:!0,z2:0})}var eY=abe;function zO(i){i.registerChartView(eY),i.registerSeriesModel(zX),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,Ut(u2,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,h2("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,x_("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var tY=Math.PI*2,G2=Math.PI/180;function iY(i,e){return Fr(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function VO(i,e){var t=iY(i,e),r=i.get("center"),n=i.get("radius");Ee(n)||(n=[0,n]);var a=ot(t.width,e.getWidth()),o=ot(t.height,e.getHeight()),s=Math.min(a,o),l=ot(n[0],s/2),c=ot(n[1],s/2),u,h,d=i.coordinateSystem;if(d){var f=d.dataToPoint(r);u=f[0]||0,h=f[1]||0}else Ee(r)||(r=[r,r]),u=ot(r[0],a)+t.x,h=ot(r[1],o)+t.y;return{cx:u,cy:h,r0:l,r:c}}function HO(i,e,t){e.eachSeriesByType(i,function(r){var n=r.getData(),a=n.mapDimension("value"),o=iY(r,t),s=VO(r,t),l=s.cx,c=s.cy,u=s.r,h=s.r0,d=-r.get("startAngle")*G2,f=r.get("endAngle"),m=r.get("padAngle")*G2;f=f==="auto"?d-tY:-f*G2;var y=r.get("minAngle")*G2,g=y+m,x=0;n.each(a,function(te){!isNaN(te)&&x++});var b=n.getSum(a),S=Math.PI/(b||x)*2,E=r.get("clockwise"),D=r.get("roseType"),B=r.get("stillShowZeroSum"),F=n.getDataExtent(a);F[0]=0;var H=E?1:-1,U=[d,f],k=H*m/2;hx(U,!E),d=U[0],f=U[1];var j=Math.abs(f-d),q=j,X=0,Y=d;if(n.setLayout({viewRect:o,r:u}),n.each(a,function(te,de){var ue;if(isNaN(te)){n.setItemLayout(de,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:E,cx:l,cy:c,r0:h,r:D?NaN:u});return}D!=="area"?ue=b===0&&B?S:te*S:ue=j/x,ue<g?(ue=g,q-=g):X+=te;var ve=Y+H*ue,_e=0,Re=0;m>ue?(_e=Y+H*ue/2,Re=_e):(_e=Y+k,Re=ve-k),n.setItemLayout(de,{angle:ue,startAngle:_e,endAngle:Re,clockwise:E,cx:l,cy:c,r0:h,r:D?yr(te,F,[h,u]):u}),Y=ve}),q<tY&&x)if(q<=.001){var J=j/x;n.each(a,function(te,de){if(!isNaN(te)){var ue=n.getItemLayout(de);ue.angle=J;var ve=0,_e=0;J<m?(ve=d+H*(de+1/2)*J,_e=ve):(ve=d+H*de*J+k,_e=d+H*(de+1)*J-k),ue.startAngle=ve,ue.endAngle=_e}})}else S=q/X,Y=d,n.each(a,function(te,de){if(!isNaN(te)){var ue=n.getItemLayout(de),ve=ue.angle===g?g:te*S,_e=0,Re=0;ve<m?(_e=Y+H*ve/2,Re=_e):(_e=Y+k,Re=Y+H*ve-k),ue.startAngle=_e,ue.endAngle=Re,Y+=H*ve}})})}function Vu(i){return{seriesType:i,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var n=e.getData();n.filterSelf(function(a){for(var o=n.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var pbe=Math.PI/180;function rY(i,e,t,r,n,a,o,s,l,c){if(i.length<2)return;function u(y){for(var g=y.rB,x=g*g,b=0;b<y.list.length;b++){var S=y.list[b],E=Math.abs(S.label.y-t),D=r+S.len,B=D*D,F=Math.sqrt((1-Math.abs(E*E/x))*B),H=e+(F+S.len2)*n,U=H-S.label.x,k=S.targetTextWidth-U*n;nY(S,k,!0),S.label.x=H}}function h(y){for(var g={list:[],maxY:0},x={list:[],maxY:0},b=0;b<y.length;b++)if(y[b].labelAlignTo==="none"){var S=y[b],E=S.label.y>t?x:g,D=Math.abs(S.label.y-t);if(D>=E.maxY){var B=S.label.x-e-S.len2*n,F=r+S.len,H=Math.abs(B)<F?Math.sqrt(D*D/(1-B*B/F/F)):F;E.rB=H,E.maxY=D}E.list.push(S)}u(g),u(x)}for(var d=i.length,f=0;f<d;f++)if(i[f].position==="outer"&&i[f].labelAlignTo==="labelLine"){var m=i[f].label.x-c;i[f].linePoints[1][0]+=m,i[f].label.x=c}C2(i,l,l+o)&&h(i)}function Abe(i,e,t,r,n,a,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<i.length;d++){var f=i[d].label;QO(i[d])||(f.x<e?(u=Math.min(u,f.x),l.push(i[d])):(h=Math.max(h,f.x),c.push(i[d])))}for(var d=0;d<i.length;d++){var m=i[d];if(!QO(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var f=m.label,y=m.linePoints,g=void 0;m.labelAlignTo==="edge"?f.x<e?g=y[2][0]-m.labelDistance-o-m.edgeDistance:g=o+n-m.edgeDistance-y[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?f.x<e?g=u-o-m.bleedMargin:g=o+n-h-m.bleedMargin:f.x<e?g=f.x-o-m.bleedMargin:g=o+n-f.x-m.bleedMargin,m.targetTextWidth=g,nY(m,g)}}rY(c,e,t,r,1,n,a,o,s,h),rY(l,e,t,r,-1,n,a,o,s,u);for(var d=0;d<i.length;d++){var m=i[d];if(!QO(m)&&m.linePoints){var f=m.label,y=m.linePoints,x=m.labelAlignTo==="edge",b=f.style.padding,S=b?b[1]+b[3]:0,E=f.style.backgroundColor?0:S,D=m.rect.width+E,B=y[1][0]-y[2][0];x?f.x<e?y[2][0]=o+m.edgeDistance+D+m.labelDistance:y[2][0]=o+n-m.edgeDistance-D-m.labelDistance:(f.x<e?y[2][0]=f.x+m.labelDistance:y[2][0]=f.x-m.labelDistance,y[1][0]=y[2][0]+B),y[1][1]=y[2][1]=f.y}}}function nY(i,e,t){if(t===void 0&&(t=!1),i.labelStyleWidth==null){var r=i.label,n=r.style,a=i.rect,o=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,c=n.overflow,u=a.width+(o?0:l);if(e<u||t){var h=a.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",o)}else{var f=e-l,m=e<u?f:t?f>i.unconstrainedWidth?null:f:null;r.setStyle("width",m)}var y=r.getBoundingRect();a.width=y.width;var g=(r.style.margin||0)+2.1;a.height=y.height+g,a.y-=(a.height-h)/2}}}function QO(i){return i.position==="center"}function GO(i){var e=i.getData(),t=[],r,n,a=!1,o=(i.get("minShowLabelAngle")||0)*pbe,s=e.getLayout("viewRect"),l=e.getLayout("r"),c=s.width,u=s.x,h=s.y,d=s.height;function f(B){B.ignore=!0}function m(B){if(!B.ignore)return!0;for(var F in B.states)if(B.states[F].ignore===!1)return!0;return!1}e.each(function(B){var F=e.getItemGraphicEl(B),H=F.shape,U=F.getTextContent(),k=F.getTextGuideLine(),j=e.getItemModel(B),q=j.getModel("label"),X=q.get("position")||j.get(["emphasis","label","position"]),Y=q.get("distanceToLabelLine"),J=q.get("alignTo"),te=ot(q.get("edgeDistance"),c),de=q.get("bleedMargin"),ue=j.getModel("labelLine"),ve=ue.get("length");ve=ot(ve,c);var _e=ue.get("length2");if(_e=ot(_e,c),Math.abs(H.endAngle-H.startAngle)<o){W(U.states,f),U.ignore=!0,k&&(W(k.states,f),k.ignore=!0);return}if(m(U)){var Re=(H.startAngle+H.endAngle)/2,Oe=Math.cos(Re),Te=Math.sin(Re),Se,nt,rt,dt;r=H.cx,n=H.cy;var tt=X==="inside"||X==="inner";if(X==="center")Se=H.cx,nt=H.cy,dt="center";else{var ht=(tt?(H.r+H.r0)/2*Oe:H.r*Oe)+r,pt=(tt?(H.r+H.r0)/2*Te:H.r*Te)+n;if(Se=ht+Oe*3,nt=pt+Te*3,!tt){var Je=ht+Oe*(ve+l-H.r),Ie=pt+Te*(ve+l-H.r),Bi=Je+(Oe<0?-1:1)*_e,_t=Ie;J==="edge"?Se=Oe<0?u+te:u+c-te:Se=Bi+(Oe<0?-Y:Y),nt=_t,rt=[[ht,pt],[Je,Ie],[Bi,_t]]}dt=tt?"center":J==="edge"?Oe>0?"right":"left":Oe>0?"left":"right"}var It=Math.PI,Ct=0,Xt=q.get("rotate");if(mi(Xt))Ct=Xt*(It/180);else if(X==="center")Ct=0;else if(Xt==="radial"||Xt===!0){var Oi=Oe<0?-Re+It:-Re;Ct=Oi}else if(Xt==="tangential"&&X!=="outside"&&X!=="outer"){var ae=Math.atan2(Oe,Te);ae<0&&(ae=It*2+ae);var se=Te>0;se&&(ae=It+ae),Ct=ae-It}if(a=!!Ct,U.x=Se,U.y=nt,U.rotation=Ct,U.setStyle({verticalAlign:"middle"}),tt){U.setStyle({align:dt});var gt=U.states.select;gt&&(gt.x+=U.x,gt.y+=U.y)}else{var Ge=U.getBoundingRect().clone();Ge.applyTransform(U.getComputedTransform());var bt=(U.style.margin||0)+2.1;Ge.y-=bt/2,Ge.height+=bt,t.push({label:U,labelLine:k,position:X,len:ve,len2:_e,minTurnAngle:ue.get("minTurnAngle"),maxSurfaceAngle:ue.get("maxSurfaceAngle"),surfaceNormal:new Ii(Oe,Te),linePoints:rt,textAlign:dt,labelDistance:Y,labelAlignTo:J,edgeDistance:te,bleedMargin:de,rect:Ge,unconstrainedWidth:Ge.width,labelStyleWidth:U.style.width})}F.setTextConfig({inside:tt})}}),!a&&i.get("avoidLabelOverlap")&&Abe(t,r,n,l,c,d,u,h);for(var y=0;y<t.length;y++){var g=t[y],x=g.label,b=g.labelLine,S=isNaN(x.x)||isNaN(x.y);if(x){x.setStyle({align:g.textAlign}),S&&(W(x.states,f),x.ignore=!0);var E=x.states.select;E&&(E.x+=x.x,E.y+=x.y)}if(b){var D=g.linePoints;S||!D?(W(b.states,f),b.ignore=!0):(aO(D,g.minTurnAngle),JK(D,g.surfaceNormal,g.maxSurfaceAngle),b.setShape({points:D}),x.__hostTarget.textGuideLineConfig={anchor:new Ii(D[0][0],D[0][1])})}}}var mbe=function(i){le(e,i);function e(t,r,n){var a=i.call(this)||this;a.z2=2;var o=new yi;return a.setTextContent(o),a.updateData(t,r,n,!0),a}return e.prototype.updateData=function(t,r,n,a){var o=this,s=t.hostModel,l=t.getItemModel(r),c=l.getModel("emphasis"),u=t.getItemLayout(r),h=Ce(Bh(l.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){o.setShape(h);return}if(a){o.setShape(h);var d=s.getShallow("animationType");s.ecModel.ssr?(Ar(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):d==="scale"?(o.shape.r=u.r0,Ar(o,{shape:{r:u.r}},s,r)):n!=null?(o.setShape({startAngle:n,endAngle:n}),Ar(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,Si(o,{shape:{endAngle:u.endAngle}},s,r))}else eo(o),Si(o,{shape:h},s,r);o.useStyle(t.getItemVisual(r,"style")),Dn(o,l);var f=(u.startAngle+u.endAngle)/2,m=s.get("selectedOffset"),y=Math.cos(f)*m,g=Math.sin(f)*m,x=l.getShallow("cursor");x&&o.attr("cursor",x),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=Ce({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},Bh(c.getModel("itemStyle"),u)),Ce(o.ensureState("select"),{x:y,y:g,shape:Bh(l.getModel(["select","itemStyle"]),u)}),Ce(o.ensureState("blur"),{shape:Bh(l.getModel(["blur","itemStyle"]),u)});var b=o.getTextGuideLine(),S=o.getTextContent();b&&Ce(b.ensureState("select"),{x:y,y:g}),Ce(S.ensureState("select"),{x:y,y:g}),pr(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,n){var a=this,o=r.getItemModel(n),s=o.getModel("labelLine"),l=r.getItemVisual(n,"style"),c=l&&l.fill,u=l&&l.opacity;fn(a,Kr(o),{labelFetcher:r.hostModel,labelDataIndex:n,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(n,"normal")||r.getName(n)});var h=a.getTextContent();a.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=t.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new Jn,this.setTextGuideLine(f)),X0(this,Y0(o),{stroke:c,opacity:wo(s.get(["lineStyle","opacity"]),u,1)})}},e}(Ra),gbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n,a){var o=t.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<o.count();++h)u=o.getItemLayout(h);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var d=new Ra({shape:VO(t,n)});d.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}o.diff(s).add(function(f){var m=new mbe(o,f,c);o.setItemGraphicEl(f,m),l.add(m)}).update(function(f,m){var y=s.getItemGraphicEl(m);y.updateData(o,f,c),y.off("click"),l.add(y),o.setItemGraphicEl(f,y)}).remove(function(f){var m=s.getItemGraphicEl(f);fd(m,t,f)}).execute(),GO(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var n=r.getData(),a=n.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(qi),aY=gbe;function rc(i,e,t){e=Ee(e)&&{coordDimensions:e}||Ce({encodeDefine:i.getEncode()},e);var r=i.getSource(),n=Ou(r,e).dimensions,a=new sa(n,i);return a.initData(r,t),a}var vbe=function(){function i(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return i.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},i.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},i.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},i.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},i}(),Dh=vbe;var ybe=$t(),xbe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dh(st(this.getData,this),st(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return rc(this,{coordDimensions:["value"],encodeDefaulter:Ut(N0,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),n=ybe(r),a=n.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=n.seats=y7(o,r.hostModel.get("percentPrecision"))}var s=i.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){ql(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(rr),oY=xbe;function WO(i){return{seriesType:i,reset:function(e,t){var r=e.getData();r.filterSelf(function(n){var a=r.mapDimension("value"),o=r.get(a,n);return!(mi(o)&&!isNaN(o)&&o<0)})}}}function jO(i){i.registerChartView(aY),i.registerSeriesModel(oY),WE("pie",i.registerAction),i.registerLayout(Ut(HO,"pie")),i.registerProcessor(Vu("pie")),i.registerProcessor(WO("pie"))}var _be=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return zo(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(rr),sY=_be;var lY=4,wbe=function(){function i(){}return i}(),bbe=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new wbe},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var n=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,c=l&&a[0]<lY,u=this.softClipShape,h;if(c){this._ctx=l;return}for(this._ctx=null,h=this._off;h<n.length;){var d=n[h++],f=n[h++];isNaN(d)||isNaN(f)||u&&!u.contain(d,f)||(s.x=d-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,n=t.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||a.fillRect(l-n[0]/2,c-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var n=this.shape,a=n.points,o=n.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=a.length/2-1;c>=0;c--){var u=c*2,h=a[u]-s/2,d=a[u+1]-l/2;if(t>=h&&r>=d&&t<=h+s&&r<=d+l)return c}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=n[0],r=n[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.points,a=r.size,o=a[0],s=a[1],l=1/0,c=1/0,u=-1/0,h=-1/0,d=0;d<n.length;){var f=n[d++],m=n[d++];l=Math.min(f,l),u=Math.max(f,u),c=Math.min(m,c),h=Math.max(m,h)}t=this._rect=new Ht(l-o/2,c-s/2,u-l+o,h-c+s)}return t},e}(Kt),Sbe=function(){function i(){this.group=new xt}return i.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},i.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,n)}r.setShape("points",t),r.reset()})},i.prototype.incrementalPrepareUpdate=function(e){this._clear()},i.prototype.incrementalUpdate=function(e,t,r){var n=this._newAdded[0],a=t.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),n.endIndex=e.end,n.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:a}),this._setCommon(c,t,r)}},i.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},i.prototype._create=function(){var e=new bbe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},i.prototype._setCommon=function(e,t,r){var n=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Nr(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<lY;e.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var c=Pt(e);c.seriesIndex=n.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(c.dataIndex=h+(e.startIndex||0))})},i.prototype.remove=function(){this._clear()},i.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},i}(),cY=Sbe;var Cbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,n){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=zu("").reset(t,r,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var n=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new cY:new Mh,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(qi),uY=Cbe;var Ebe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(xi),hY=Ebe;var W2=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Jr).models[0]},e.type="cartesian2dAxis",e}(xi);jr(W2,Sh);var dY={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Tbe=ri({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},dY),KO=ri({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},dY),Mbe=ri({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},KO),Ibe=At({logBase:10},KO),j2={category:Tbe,value:KO,time:Mbe,log:Ibe};var fY={value:1,category:1,time:1,log:1};function Hu(i,e,t,r){W(fY,function(n,a){var o=ri(ri({},j2[a],!0),r,!0),s=function(l){le(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+a,u}return c.prototype.mergeDefaultAndTheme=function(u,h){var d=Jf(this),f=d?Oc(u):{},m=h.getTheme();ri(u,m.get(a+"Axis")),ri(u,this.getDefaultOption()),u.type=pY(u),d&&_l(u,f,d)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=o_.createByAxisModel(this))},c.prototype.getCategories=function(u){var h=this.option;if(h.type==="category")return u?h.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+a,c.defaultOption=o,c}(t);i.registerComponentModel(s)}),i.registerSubTypeDefaulter(e+"Axis",pY)}function pY(i){return i.type||(i.data?"category":"value")}var Bbe=function(){function i(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return i.prototype.getAxis=function(e){return this._axes[e]},i.prototype.getAxes=function(){return Me(this._dimList,function(e){return this._axes[e]},this)},i.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Xi(this.getAxes(),function(t){return t.scale.type===e})},i.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},i}(),AY=Bbe;var K2=["x","y"];function mY(i){return i.type==="interval"||i.type==="time"}var Dbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=K2,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!mY(t)||!mY(r))){var n=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([n[0],a[0]]),s=this.dataToPoint([n[1],a[1]]),l=n[1]-n[0],c=a[1]-a[0];if(!(!l||!c)){var u=(s[0]-o[0])/l,h=(s[1]-o[1])/c,d=o[0]-n[0]*u,f=o[1]-a[0]*h,m=this._transform=[u,0,0,h,d,f];this._invTransform=Sc([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var n=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new Ht(n[0],n[1],a[0]-n[0],a[1]-n[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,n){n=n||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Ca(n,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(a,r)),n[1]=l.toGlobalCoord(l.dataToCoord(o,r)),n},e.prototype.clampData=function(t,r){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,o=n.getExtent(),s=a.getExtent(),l=n.parse(t[0]),c=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var n=[];if(this._invTransform)return Ca(n,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(t[0]),r),n[1]=o.coordToData(o.toLocalCoord(t[1]),r),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,o=Math.min(n[0],n[1])-t,s=Math.max(r[0],r[1])-a+t,l=Math.max(n[0],n[1])-o+t;return new Ht(a,o,s,l)},e}(AY),gY=Dbe;var Rbe=function(i){le(e,i);function e(t,r,n,a,o){var s=i.call(this,t,r,n)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Vo),vY=Rbe;function __(i,e,t){t=t||{};var r=i.coordinateSystem,n=e.axis,a={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,c=n.dim,u=r.getRect(),h=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,m=c==="x"?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(o){var y=o.toGlobalCoord(o.dataToCoord(0));m[d.onZero]=Math.max(Math.min(y,m[1]),m[0])}a.position=[c==="y"?m[d[l]]:h[0],c==="x"?m[d[l]]:h[3]],a.rotation=Math.PI/2*(c==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=g[s],a.labelOffset=o?m[d[s]]-m[d.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Mn(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var x=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-x:x,a.z2=1,a}function XO(i){return i.get("coordinateSystem")==="cartesian2d"}function YO(i){var e={xAxisModel:null,yAxisModel:null};return W(e,function(t,r){var n=r.replace(/Model$/,""),a=i.getReferringComponents(n,Jr).models[0];e[r]=a}),e}var qO=Math.log;function X2(i,e,t){var r=El.prototype,n=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=n.length-1,s=r.getInterval.call(t),l=Z3(i,e),c=l.extent,u=l.fixMin,h=l.fixMax;if(i.type==="log"){var d=qO(i.base);c=[qO(c[0])/d,qO(c[1])/d]}i.setExtent(c[0],c[1]),i.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:h});var f=r.getExtent.call(i);u&&(c[0]=f[0]),h&&(c[1]=f[1]);var m=r.getInterval.call(i),y=c[0],g=c[1];if(u&&h)m=(g-y)/o;else if(u)for(g=c[0]+m*o;g<c[1]&&isFinite(g)&&isFinite(c[1]);)m=l2(m),g=c[0]+m*o;else if(h)for(y=c[1]-m*o;y>c[0]&&isFinite(y)&&isFinite(c[0]);)m=l2(m),y=c[1]-m*o;else{var x=i.getTicks().length-1;x>o&&(m=l2(m));var b=m*o;g=Math.ceil(c[1]/m)*m,y=dn(g-b),y<0&&c[0]>=0?(y=0,g=dn(b)):g>0&&c[1]<=0&&(g=0,y=-dn(b))}var S=(n[0].value-a[0].value)/s,E=(n[o].value-a[o].value)/s;if(r.setExtent.call(i,y+m*S,g+m*E),r.setInterval.call(i,m),(S||E)&&r.setNiceExtent.call(i,y+m,g-m),!1)var D}var Pbe=function(){function i(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=K2,this._initCartesian(e,t,r),this.model=e}return i.prototype.getRect=function(){return this._rect},i.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function n(o){var s,l=si(o),c=l.length;if(c){for(var u=[],h=c-1;h>=0;h--){var d=+l[h],f=o[d],m=f.model,y=f.scale;s_(y)&&m.get("alignTicks")&&m.get("interval")==null?u.push(f):(bh(y,m),s_(y)&&(s=f))}u.length&&(s||(s=u.pop(),bh(s.scale,s.model)),W(u,function(g){X2(g.scale,g.model,s.scale)}))}}n(r.x),n(r.y);var a={};W(r.x,function(o){xY(r,"y",o,a)}),W(r.y,function(o){xY(r,"x",o,a)}),this.resize(this.model,t)},i.prototype.resize=function(e,t,r){var n=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=Fr(n,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(W(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=DK(c);if(u){var h=c.isHorizontal()?"height":"width",d=c.model.get(["axisLabel","margin"]);o[h]-=u[h]+d,c.position==="top"?o.y+=u.height+d:c.position==="left"&&(o.x+=u.width+d)}}}),l()),W(this._coordsList,function(c){c.calcAffineTransform()});function l(){W(s,function(c){var u=c.isHorizontal(),h=u?[0,o.width]:[0,o.height],d=c.inverse?1:0;c.setExtent(h[d],h[1-d]),Lbe(c,u?o.x:o.y)})}},i.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},i.prototype.getAxes=function(){return this._axesList.slice()},i.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}yt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,a=this._coordsList;n<a.length;n++)if(a[n].getAxis("x").index===e||a[n].getAxis("y").index===t)return a[n]},i.prototype.getCartesians=function(){return this._coordsList.slice()},i.prototype.convertToPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},i.prototype.convertFromPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},i.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Jr).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",Jr).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,qt(o,s)<0&&(s=null);else if(r&&n)s=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(a){var c=a.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},i.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},i.prototype._initCartesian=function(e,t,r){var n=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,W(s.x,function(u,h){W(s.y,function(d,f){var m="x"+h+"y"+f,y=new gY(m);y.master=n,y.model=e,n._coordsMap[m]=y,n._coordsList.push(y),y.addAxis(u),y.addAxis(d)})});function c(u){return function(h,d){if(ZO(h,e)){var f=h.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var m=new vY(u,cp(h),[0,0],h.get("type"),f),y=m.type==="category";m.onBand=y&&h.get("boundaryGap"),m.inverse=h.get("inverse"),h.axis=m,m.model=h,m.grid=a,m.index=d,a._axesList.push(m),s[u][d]=m,l[u]++}}}},i.prototype._updateScale=function(e,t){W(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var a=n.model.get("categorySortInfo");n.scale.setSortInfo(a)}}),e.eachSeries(function(n){if(XO(n)){var a=YO(n),o=a.xAxisModel,s=a.yAxisModel;if(!ZO(o,t)||!ZO(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=n.getData(),u=l.getAxis("x"),h=l.getAxis("y");r(c,u),r(c,h)}},this);function r(n,a){W(K0(n,a.dim),function(o){a.scale.unionExtentFromData(n,o)})}},i.prototype.getTooltipAxes=function(e){var t=[],r=[];return W(this.getCartesians(),function(n){var a=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),o=n.getOtherAxis(a);qt(t,a)<0&&t.push(a),qt(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},i.create=function(e,t){var r=[];return e.eachComponent("grid",function(n,a){var o=new i(n,e,t);o.name="grid_"+a,o.resize(n,t,!0),n.coordinateSystem=o,r.push(o)}),e.eachSeries(function(n){if(XO(n)){var a=YO(n),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;n.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},i.dimensions=K2,i}();function ZO(i,e){return i.getCoordSysModel()===e}function xY(i,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var n=i[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)_Y(n[l])&&(a=n[l]);else for(var c in n)if(n.hasOwnProperty(c)&&_Y(n[c])&&!r[u(n[c])]){a=n[c];break}a&&(r[u(a)]=!0);function u(h){return h.dim+"_"+h.index}}function _Y(i){return i&&i.type!=="category"&&i.type!=="time"&&BK(i)}function Lbe(i,e){var t=i.getExtent(),r=t[0]+t[1];i.toGlobalCoord=i.dim==="x"?function(n){return n+e}:function(n){return r-n+e},i.toLocalCoord=i.dim==="x"?function(n){return n-e}:function(n){return r-n+e}}var wY=Pbe;var pp=Math.PI,Rm=function(){function i(e,t){this.group=new xt,this.opt=t,this.axisModel=e,At(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new xt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return i.prototype.hasBuilder=function(e){return!!bY[e]},i.prototype.add=function(e){bY[e](this.opt,this.axisModel,this.group,this._transformGroup)},i.prototype.getGroup=function(){return this.group},i.innerTextLayout=function(e,t,r){var n=DP(t-e),a,o;return qA(n)?(o=r>0?"top":"bottom",a="center"):qA(n-pp)?(o=r>0?"bottom":"top",a="center"):(o="middle",n>0&&n<pp?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:n,textAlign:a,textVerticalAlign:o}},i.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},i.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},i}(),bY={axisLine:function(i,e,t,r){var n=e.get(["axisLine","show"]);if(n==="auto"&&i.handleAutoShown&&(n=i.handleAutoShown("axisLine")),!!n){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],c=s[0]>l[0];o&&(Ca(s,s,o),Ca(l,l,o));var u=Ce({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new Xn({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:i.strokeContainThreshold||5,silent:!0,z2:1});pd(h.shape,h.style.lineWidth),h.anid="line",t.add(h);var d=e.get(["axisLine","symbol"]);if(d!=null){var f=e.get(["axisLine","symbolSize"]);Ye(d)&&(d=[d,d]),(Ye(f)||mi(f))&&(f=[f,f]);var m=tc(e.get(["axisLine","symbolOffset"])||0,f),y=f[0],g=f[1];W([{rotate:i.rotation+Math.PI/2,offset:m[0],r:0},{rotate:i.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(x,b){if(d[b]!=="none"&&d[b]!=null){var S=Nr(d[b],-y/2,-g/2,y,g,u.stroke,!0),E=x.r+x.offset,D=c?l:s;S.attr({rotation:x.rotate,x:D[0]+E*Math.cos(i.rotation),y:D[1]-E*Math.sin(i.rotation),silent:!0,z2:11}),t.add(S)}})}}},axisTickLabel:function(i,e,t,r){var n=Nbe(t,r,e,i),a=kbe(t,r,e,i);if(Fbe(e,a,n),Ube(t,r,e,i.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=S2(Me(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));E2(o)}},axisName:function(i,e,t,r){var n=Mn(i.axisName,e.get("name"));if(n){var a=e.get("nameLocation"),o=i.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,h=[a==="start"?c[0]-u*l:a==="end"?c[1]+u*l:(c[0]+c[1])/2,CY(a)?i.labelOffset+o*l:0],d,f=e.get("nameRotate");f!=null&&(f=f*pp/180);var m;CY(a)?d=Rm.innerTextLayout(i.rotation,f??i.rotation,o):(d=Obe(i.rotation,a,f||0,c),m=i.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(d.rotation)),!isFinite(m)&&(m=null)));var y=s.getFont(),g=e.get("nameTruncate",!0)||{},x=g.ellipsis,b=Mn(i.nameTruncateMaxWidth,g.maxWidth,m),S=new yi({x:h[0],y:h[1],rotation:d.rotation,silent:Rm.isLabelSilent(e),style:br(s,{text:n,font:y,overflow:"truncate",width:b,ellipsis:x,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(Tu({el:S,componentModel:e,itemName:n}),S.__fullText=n,S.anid="name",e.get("triggerEvent")){var E=Rm.makeAxisEventDataBase(e);E.targetType="axisName",E.name=n,Pt(S).eventData=E}r.add(S),S.updateTransform(),t.add(S),S.decomposeTransform()}}};function Obe(i,e,t,r){var n=DP(t-i),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return qA(n-pp/2)?(o=l?"bottom":"top",a="center"):qA(n-pp*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",n<pp*1.5&&n>pp/2?a=l?"left":"right":a=l?"right":"left"),{rotation:n,textAlign:a,textVerticalAlign:o}}function Fbe(i,e,t){if(!y2(i.axis)){var r=i.get(["axisLabel","showMinLabel"]),n=i.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],h=t[t.length-1],d=t[t.length-2];r===!1?(Hc(a),Hc(c)):SY(a,o)&&(r?(Hc(o),Hc(u)):(Hc(a),Hc(c))),n===!1?(Hc(s),Hc(h)):SY(l,s)&&(n?(Hc(l),Hc(d)):(Hc(s),Hc(h)))}}function Hc(i){i&&(i.ignore=!0)}function SY(i,e){var t=i&&i.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var n=Lf([]);return dl(n,n,-i.rotation),t.applyTransform(hl([],n,i.getLocalTransform())),r.applyTransform(hl([],n,e.getLocalTransform())),t.intersect(r)}}function CY(i){return i==="middle"||i==="center"}function EY(i,e,t,r,n){for(var a=[],o=[],s=[],l=0;l<i.length;l++){var c=i[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=t,e&&(Ca(o,o,e),Ca(s,s,e));var u=new Xn({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});pd(u.shape,u.style.lineWidth),u.anid=n+"_"+i[l].tickValue,a.push(u)}return a}function Nbe(i,e,t,r){var n=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),c=n.getTicksCoords(),u=EY(c,e.transform,l,At(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)i.add(u[h]);return u}}function Ube(i,e,t,r){var n=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),c=At(s.getLineStyle(),At(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var h=EY(o[u],e.transform,l,c,"minorticks_"+u),d=0;d<h.length;d++)i.add(h[d])}}function kbe(i,e,t,r){var n=t.axis,a=Mn(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||n.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),c=(Mn(r.labelRotate,o.get("rotate"))||0)*pp/180,u=Rm.innerTextLayout(r.rotation,c,r.labelDirection),h=t.getCategories&&t.getCategories(!0),d=[],f=Rm.isLabelSilent(t),m=t.get("triggerEvent");return W(l,function(y,g){var x=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(y.tickValue):y.tickValue,b=y.formattedLabel,S=y.rawLabel,E=o;if(h&&h[x]){var D=h[x];yt(D)&&D.textStyle&&(E=new ir(D.textStyle,o,t.ecModel))}var B=E.getTextColor()||t.get(["axisLine","lineStyle","color"]),F=n.dataToCoord(x),H=E.getShallow("align",!0)||u.textAlign,U=Yt(E.getShallow("alignMinLabel",!0),H),k=Yt(E.getShallow("alignMaxLabel",!0),H),j=E.getShallow("verticalAlign",!0)||E.getShallow("baseline",!0)||u.textVerticalAlign,q=Yt(E.getShallow("verticalAlignMinLabel",!0),j),X=Yt(E.getShallow("verticalAlignMaxLabel",!0),j),Y=new yi({x:F,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(y.level||0),style:br(E,{text:b,align:g===0?U:g===l.length-1?k:H,verticalAlign:g===0?q:g===l.length-1?X:j,fill:ft(B)?B(n.type==="category"?S:n.type==="value"?x+"":x,g):B})});if(Y.anid="label_"+x,m){var J=Rm.makeAxisEventDataBase(t);J.targetType="axisLabel",J.value=S,J.tickIndex=g,n.type==="category"&&(J.dataIndex=x),Pt(Y).eventData=J}e.add(Y),Y.updateTransform(),d.push(Y),i.add(Y),Y.decomposeTransform()}),d}}var as=Rm;function TY(i,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return zbe(t,i,e),t.seriesInvolved&&Hbe(t,i),t}function zbe(i,e,t){var r=e.getComponent("tooltip"),n=e.getComponent("axisPointer"),a=n.get("link",!0)||[],o=[];W(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=$0(s.model),c=i.coordSysAxesInfo[l]={};i.coordSysMap[l]=s;var u=s.model,h=u.getModel("tooltip",r);if(W(s.getAxes(),Ut(y,!1,null)),s.getTooltipAxes&&r&&h.get("show")){var d=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",m=s.getTooltipAxes(h.get(["axisPointer","axis"]));(d||f)&&W(m.baseAxes,Ut(y,f?"cross":!0,d)),f&&W(m.otherAxes,Ut(y,"cross",!1))}function y(g,x,b){var S=b.model.getModel("axisPointer",n),E=S.get("show");if(!(!E||E==="auto"&&!g&&!$O(S))){x==null&&(x=S.get("triggerTooltip")),S=g?Vbe(b,h,n,e,g,x):S;var D=S.get("snap"),B=S.get("triggerEmphasis"),F=$0(b.model),H=x||D||b.type==="category",U=i.axesInfo[F]={key:F,axis:b,coordSys:s,axisPointerModel:S,triggerTooltip:x,triggerEmphasis:B,involveSeries:H,snap:D,useHandle:$O(S),seriesModels:[],linkGroup:null};c[F]=U,i.seriesInvolved=i.seriesInvolved||H;var k=Qbe(a,b);if(k!=null){var j=o[k]||(o[k]={axesInfo:{}});j.axesInfo[F]=U,j.mapper=a[k].mapper,U.linkGroup=j}}}})}function Vbe(i,e,t,r,n,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};W(s,function(d){l[d]=Tt(o.get(d))}),l.snap=i.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),n==="cross"){var u=o.get(["label","show"]);if(c.show=u??!0,!a){var h=l.lineStyle=o.get("crossStyle");h&&At(c,h.textStyle)}}return i.model.getModel("axisPointer",new ir(l,t,r))}function Hbe(i,e){e.eachSeries(function(t){var r=t.coordinateSystem,n=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||n==="none"||n===!1||n==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||W(i.coordSysAxesInfo[$0(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function Qbe(i,e){for(var t=e.model,r=e.dim,n=0;n<i.length;n++){var a=i[n]||{};if(JO(a[r+"AxisId"],t.id)||JO(a[r+"AxisIndex"],t.componentIndex)||JO(a[r+"AxisName"],t.name))return n}}function JO(i,e){return i==="all"||Ee(i)&&qt(i,e)>=0||i===e}function MY(i){var e=Y2(i);if(e){var t=e.axisPointerModel,r=e.axis.scale,n=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=$O(t);a==null&&(n.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=e.axis.scale.isBlank()?"hide":"show")}}function Y2(i){var e=(i.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[$0(i)]}function IY(i){var e=Y2(i);return e&&e.axisPointerModel}function $O(i){return!!i.get(["handle","show"])}function $0(i){return i.type+"||"+i.id}var BY={},Gbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,a){this.axisPointerClass&&MY(t),i.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,n,!0)},e.prototype.updateAxisPointer=function(t,r,n,a){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,r){var n=this._axisPointer;n&&n.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),i.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,n){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=IY(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,n):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){BY[t]=r},e.getAxisPointerClass=function(t){return t&&BY[t]},e.type="axis",e}(hr),Tl=Gbe;var tF=$t();function q2(i,e,t,r){var n=t.axis;if(!n.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=n.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var u=s.length,h=tF(i).splitAreaColors,d=ct(),f=0;if(h)for(var m=0;m<c.length;m++){var y=h.get(c[m].tickValue);if(y!=null){f=(y+(u-1)*m)%u;break}}var g=n.toGlobalCoord(c[0].coord),x=o.getAreaStyle();s=Ee(s)?s:[s];for(var m=1;m<c.length;m++){var b=n.toGlobalCoord(c[m].coord),S=void 0,E=void 0,D=void 0,B=void 0;n.isHorizontal()?(S=g,E=l.y,D=b-S,B=l.height,g=S+D):(S=l.x,E=g,D=l.width,B=b-E,g=E+B);var F=c[m-1].tickValue;F!=null&&d.set(F,f),e.add(new pi({anid:F!=null?"area_"+F:null,shape:{x:S,y:E,width:D,height:B},style:At({fill:s[f]},x),autoBatch:!0,silent:!0})),f=(f+1)%u}tF(i).splitAreaColors=d}}}function Z2(i){tF(i).splitAreaColors=null}var Wbe=["axisLine","axisTickLabel","axisName"],jbe=["splitArea","splitLine","minorSplitLine"],DY=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,n,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new xt,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=__(s,t),c=new as(t,Ce({handleAutoShown:function(h){for(var d=s.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(s_(d[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));W(Wbe,c.add,c),this._axisGroup.add(c.getGroup()),W(jbe,function(h){t.get([h,"show"])&&Kbe[h](this,this._axisGroup,t,s)},this);var u=a&&a.type==="changeAxisOrder"&&a.isInitSort;u||Ad(o,this._axisGroup,t),i.prototype.render.call(this,t,r,n,a)}},e.prototype.remove=function(){Z2(this)},e.type="cartesianAxis",e}(Tl),Kbe={splitLine:function(i,e,t,r){var n=t.axis;if(!n.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Ee(s)?s:[s];for(var l=r.coordinateSystem.getRect(),c=n.isHorizontal(),u=0,h=n.getTicksCoords({tickModel:a}),d=[],f=[],m=o.getLineStyle(),y=0;y<h.length;y++){var g=n.toGlobalCoord(h[y].coord);c?(d[0]=g,d[1]=l.y,f[0]=g,f[1]=l.y+l.height):(d[0]=l.x,d[1]=g,f[0]=l.x+l.width,f[1]=g);var x=u++%s.length,b=h[y].tickValue,S=new Xn({anid:b!=null?"line_"+h[y].tickValue:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:At({stroke:s[x]},m),silent:!0});pd(S.shape,m.lineWidth),e.add(S)}}},minorSplitLine:function(i,e,t,r){var n=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=n.isHorizontal(),c=n.getMinorTicksCoords();if(c.length)for(var u=[],h=[],d=o.getLineStyle(),f=0;f<c.length;f++)for(var m=0;m<c[f].length;m++){var y=n.toGlobalCoord(c[f][m].coord);l?(u[0]=y,u[1]=s.y,h[0]=y,h[1]=s.y+s.height):(u[0]=s.x,u[1]=y,h[0]=s.x+s.width,h[1]=y);var g=new Xn({anid:"minor_line_"+c[f][m].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:d,silent:!0});pd(g.shape,d.lineWidth),e.add(g)}},splitArea:function(i,e,t,r){q2(i,e,t,r)}},iF=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(DY);var RY=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=iF.type,t}return e.type="yAxis",e}(DY);var Xbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new pi({shape:t.coordinateSystem.getRect(),style:At({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(hr),PY={offset:0};function J2(i){i.registerComponentView(Xbe),i.registerComponentModel(hY),i.registerCoordinateSystem("cartesian2d",wY),Hu(i,"x",W2,PY),Hu(i,"y",W2,PY),i.registerComponentView(iF),i.registerComponentView(RY),i.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function rF(i){Ei(J2),i.registerSeriesModel(sY),i.registerChartView(uY),i.registerLayout(zu("scatter"))}function nF(i){i.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],n=e.coordinateSystem;if(n){var a=n.getIndicatorAxes();W(a,function(o,s){t.each(t.mapDimension(a[s].dim),function(l,c){r[c]=r[c]||[];var u=n.dataToPoint(l,s);r[c][s]=LY(u)?u:OY(n)})}),t.each(function(o){var s=nQ(r[o],function(l){return LY(l)})||OY(n);r[o].push(s.slice()),t.setItemLayout(o,r[o])})}})}function LY(i){return!isNaN(i[0])&&!isNaN(i[1])}function OY(i){return[i.cx,i.cy]}function aF(i){var e=i.polar;if(e){Ee(e)||(e=[e]);var t=[];W(e,function(r,n){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),i.radar=i.radar||[],Ee(i.radar)||(i.radar=[i.radar]),i.radar.push(r)):t.push(r)}),i.polar=t}W(i.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Ybe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function c(d,f){var m=d.getItemVisual(f,"symbol")||"circle";if(m!=="none"){var y=Pu(d.getItemVisual(f,"symbolSize")),g=Nr(m,-1,-1,2,2),x=d.getItemVisual(f,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:y[0]/2,scaleY:y[1]/2,rotation:x*Math.PI/180||0}),g}}function u(d,f,m,y,g,x){m.removeAll();for(var b=0;b<f.length-1;b++){var S=c(y,g);S&&(S.__dimIdx=b,d[b]?(S.setPosition(d[b]),gi[x?"initProps":"updateProps"](S,{x:f[b][0],y:f[b][1]},t,g)):S.setPosition(f[b]),m.add(S))}}function h(d){return Me(d,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(d){var f=s.getItemLayout(d);if(f){var m=new oa,y=new Jn,g={shape:{points:f}};m.shape.points=h(f),y.shape.points=h(f),Ar(m,g,t,d),Ar(y,g,t,d);var x=new xt,b=new xt;x.add(y),x.add(m),x.add(b),u(y.shape.points,f,b,s,d,!0),s.setItemGraphicEl(d,x)}}).update(function(d,f){var m=l.getItemGraphicEl(f),y=m.childAt(0),g=m.childAt(1),x=m.childAt(2),b={shape:{points:s.getItemLayout(d)}};b.shape.points&&(u(y.shape.points,b.shape.points,x,s,d,!1),eo(g),eo(y),Si(y,b,t),Si(g,b,t),s.setItemGraphicEl(d,m))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,f){var m=s.getItemModel(f),y=d.childAt(0),g=d.childAt(1),x=d.childAt(2),b=s.getItemVisual(f,"style"),S=b.fill;o.add(d),y.useStyle(At(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),Dn(y,m,"lineStyle"),Dn(g,m,"areaStyle");var E=m.getModel("areaStyle"),D=E.isEmpty()&&E.parentModel.isEmpty();g.ignore=D,W(["emphasis","select","blur"],function(H){var U=m.getModel([H,"areaStyle"]),k=U.isEmpty()&&U.parentModel.isEmpty();g.ensureState(H).ignore=k&&D}),g.useStyle(At(E.getAreaStyle(),{fill:S,opacity:.7,decal:b.decal}));var B=m.getModel("emphasis"),F=B.getModel("itemStyle").getItemStyle();x.eachChild(function(H){if(H instanceof yn){var U=H.style;H.useStyle(Ce({image:U.image,x:U.x,y:U.y,width:U.width,height:U.height},b))}else H.useStyle(b),H.setColor(S),H.style.strokeNoScale=!0;var k=H.ensureState("emphasis");k.style=Tt(F);var j=s.getStore().get(s.getDimensionIndex(H.__dimIdx),f);(j==null||isNaN(j))&&(j=""),fn(H,Kr(m),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:H.__dimIdx,defaultText:j,inheritColor:S,defaultOpacity:b.opacity})}),pr(d,B.get("focus"),B.get("blurScope"),B.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(qi),FY=Ybe;var qbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dh(st(this.getData,this),st(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return rc(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,n){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),c=l===""?this.name:l,u=LE(this,t);return wn("section",{header:c,sortBlocks:!0,blocks:Me(s,function(h){var d=a.get(a.mapDimension(h.dim),t);return wn("nameValue",{markerType:"subItem",markerColor:u,name:h.name,value:d,sortParam:d})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),n=this.coordinateSystem,a=r.getValues(Me(n.dimensions,function(c){return r.mapDimension(c)}),t),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=n.getIndicatorAxes();return n.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(rr),NY=qbe;var w_=j2.value;function $2(i,e){return At({show:e},i)}var Zbe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),n=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),f=Me(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var y=l;m.color!=null&&(y=At({color:m.color},l));var g=ri(Tt(m),{boundaryGap:t,splitNumber:r,scale:n,axisLine:a,axisTick:o,axisLabel:s,name:m.text,showName:c,nameLocation:"end",nameGap:h,nameTextStyle:y,triggerEvent:d},!1);if(Ye(u)){var x=g.name;g.name=u.replace("{value}",x??"")}else ft(u)&&(g.name=u(g.name,g));var b=new ir(g,null,this.ecModel);return jr(b,Sh.prototype),b.mainType="radar",b.componentIndex=this.componentIndex,b},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:ri({lineStyle:{color:"#bbb"}},w_.axisLine),axisLabel:$2(w_.axisLabel,!1),axisTick:$2(w_.axisTick,!1),splitLine:$2(w_.splitLine,!0),splitArea:$2(w_.splitArea,!0),indicator:[]},e}(xi),UY=Zbe;var Jbe=["axisLine","axisTickLabel","axisName"],$be=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=this.group;a.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var r=t.coordinateSystem,n=r.getIndicatorAxes(),a=Me(n,function(o){var s=o.model.get("showName")?o.name:"",l=new as(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});W(a,function(o){W(Jbe,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,n=r.getIndicatorAxes();if(!n.length)return;var a=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),u=o.get("show"),h=s.get("show"),d=l.get("color"),f=c.get("color"),m=Ee(d)?d:[d],y=Ee(f)?f:[f],g=[],x=[];function b(J,te,de){var ue=de%te.length;return J[ue]=J[ue]||[],ue}if(a==="circle")for(var S=n[0].getTicksCoords(),E=r.cx,D=r.cy,B=0;B<S.length;B++){if(u){var F=b(g,m,B);g[F].push(new Vs({shape:{cx:E,cy:D,r:S[B].coord}}))}if(h&&B<S.length-1){var F=b(x,y,B);x[F].push(new cm({shape:{cx:E,cy:D,r0:S[B].coord,r:S[B+1].coord}}))}}else for(var H,U=Me(n,function(J,te){var de=J.getTicksCoords();return H=H==null?de.length-1:Math.min(de.length-1,H),Me(de,function(ue){return r.coordToPoint(ue.coord,te)})}),k=[],B=0;B<=H;B++){for(var j=[],q=0;q<n.length;q++)j.push(U[q][B]);if(j[0]&&j.push(j[0].slice()),u){var F=b(g,m,B);g[F].push(new Jn({shape:{points:j}}))}if(h&&k){var F=b(x,y,B-1);x[F].push(new oa({shape:{points:j.concat(k)}}))}k=j.slice().reverse()}var X=l.getLineStyle(),Y=c.getAreaStyle();W(x,function(J,te){this.group.add(Ss(J,{style:At({stroke:"none",fill:y[te%y.length]},Y),silent:!0}))},this),W(g,function(J,te){this.group.add(Ss(J,{style:At({fill:"none",stroke:m[te%m.length]},X),silent:!0}))},this)},e.type="radar",e}(hr),kY=$be;var eSe=function(i){le(e,i);function e(t,r,n){var a=i.call(this,t,r,n)||this;return a.type="value",a.angle=0,a.name="",a}return e}(Vo),zY=eSe;var tSe=function(){function i(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=Me(e.getIndicatorModels(),function(n,a){var o="indicator_"+a,s=new zY(o,new El);return s.name=n.get("name"),s.model=n,n.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return i.prototype.getIndicatorAxes=function(){return this._indicatorAxes},i.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},i.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],n=r.angle,a=this.cx+e*Math.cos(n),o=this.cy-e*Math.sin(n);return[a,o]},i.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=Math.sqrt(t*t+r*r);t/=n,r/=n;for(var a=Math.atan2(-r,t),o=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],h=Math.abs(a-u.angle);h<o&&(s=u,l=c,o=h)}return[l,+(s&&s.coordToData(n))]},i.prototype.resize=function(e,t){var r=e.get("center"),n=t.getWidth(),a=t.getHeight(),o=Math.min(n,a)/2;this.cx=ot(r[0],n),this.cy=ot(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(Ye(s)||mi(s))&&(s=[0,s]),this.r0=ot(s[0],o),this.r=ot(s[1],o),W(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},i.prototype.update=function(e,t){var r=this._indicatorAxes,n=this._model;W(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==n)){var c=s.getData();W(r,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var a=n.get("splitNumber"),o=new El;o.setExtent(0,a),o.setInterval(1),W(r,function(s,l){X2(s.scale,s.model,o)})},i.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},i.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},i.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},i.create=function(e,t){var r=[];return e.eachComponent("radar",function(n){var a=new i(n,e,t);r.push(a),n.coordinateSystem=a}),e.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=r[n.get("radarIndex")||0])}),r},i.dimensions=[],i}(),VY=tSe;function HY(i){i.registerCoordinateSystem("radar",VY),i.registerComponentModel(UY),i.registerComponentView(kY),i.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function oF(i){Ei(HY),i.registerChartView(FY),i.registerSeriesModel(NY),i.registerLayout(nF),i.registerProcessor(Vu("radar")),i.registerPreprocessor(aF)}var QY="\0_ec_interaction_mutex";function GY(i,e,t){var r=lF(i);r[e]=t}function WY(i,e,t){var r=lF(i),n=r[e];n===t&&(r[e]=null)}function sF(i,e){return!!lF(i)[e]}function lF(i){return i[QY]||(i[QY]={})}Gs({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},hn);var iSe=function(i){le(e,i);function e(t){var r=i.call(this)||this;r._zr=t;var n=st(r._mousedownHandler,r),a=st(r._mousemoveHandler,r),o=st(r._mouseupHandler,r),s=st(r._mousewheelHandler,r),l=st(r._pinchHandler,r);return r.enable=function(c,u){this.disable(),this._opt=At(Tt(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(t.on("mousedown",n),t.on("mousemove",a),t.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},r.disable=function(){t.off("mousedown",n),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!ZR(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,a)&&(this._x=n,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!eT("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||sF(this._zr,"globalPan"))){var r=t.offsetX,n=t.offsetY,a=this._x,o=this._y,s=r-a,l=n-o;this._x=r,this._y=n,this._opt.preventDefaultMouseMove&&ul(t.event),KY(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){ZR(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var r=eT("zoomOnMouseWheel",t,this._opt),n=eT("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),s=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!n)){if(r){var c=o>3?1.4:o>1?1.2:1.1,u=a>0?c:1/c;cF(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(n){var h=Math.abs(a),d=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);cF(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!sF(this._zr,"globalPan")){var r=t.pinchScale>1?1.1:1/1.1;cF(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}($a);function cF(i,e,t,r,n){i.pointerChecker&&i.pointerChecker(r,n.originX,n.originY)&&(ul(r.event),KY(i,e,t,r,n))}function KY(i,e,t,r,n){n.isAvailableBehavior=st(eT,null,t,r),i.trigger(e,n)}function eT(i,e,t){var r=t[i];return!i||r&&(!Ye(r)||e.event[r+"Key"])}var Rh=iSe;function ev(i,e,t){var r=i.target;r.x+=e,r.y+=t,r.dirty()}function tv(i,e,t,r){var n=i.target,a=i.zoomLimit,o=i.zoom=i.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var c=o/i.zoom;i.zoom=o,n.x-=(t-n.x)*(c-1),n.y-=(r-n.y)*(c-1),n.scaleX*=c,n.scaleY*=c,n.dirty()}var rSe={axisPointer:1,tooltip:1,brush:1};function Ap(i,e,t){var r=e.getComponentByElement(i.topTarget),n=r&&r.coordinateSystem;return r&&r!==t&&!rSe.hasOwnProperty(r.mainType)&&n&&n.model!==t}function tT(i){if(Ye(i)){var e=new DOMParser;i=e.parseFromString(i,"text/xml")}var t=i;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var hF,iT={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},XY=si(iT),rT={"alignment-baseline":"textBaseline","stop-color":"stopColor"},YY=si(rT),nSe=function(){function i(){this._defs={},this._root=null}return i.prototype.parse=function(e,t){t=t||{};var r=tT(e);this._defsUsePending=[];var n=new xt;this._root=n;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),nc(r,n,null,!0,!1);for(var c=r.firstChild;c;)this._parseNode(c,n,a,null,!1,!1),c=c.nextSibling;sSe(this._defs,this._defsUsePending),this._defsUsePending=[];var u,h;if(o){var d=nT(o);d.length>=4&&(u={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(u&&s!=null&&l!=null&&(h=fF(u,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var f=n;n=new xt,n.add(f),f.scaleX=f.scaleY=h.scale,f.x=h.x,f.y=h.y}return!t.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new pi({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:u,viewBoxTransform:h,named:a}},i.prototype._parseNode=function(e,t,r,n,a,o){var s=e.nodeName.toLowerCase(),l,c=n;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!a){var u=hF[s];if(u&&Mt(hF,s)){l=u.call(this,e,t);var h=e.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:s,el:l};r.push(d),s==="g"&&(c=d)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});t.add(l)}}var f=qY[s];if(f&&Mt(qY,s)){var m=f.call(this,e),y=e.getAttribute("id");y&&(this._defs[y]=m)}}if(l&&l.isGroup)for(var g=e.firstChild;g;)g.nodeType===1?this._parseNode(g,l,r,c,a,o):g.nodeType===3&&o&&this._parseText(g,l),g=g.nextSibling},i.prototype._parseText=function(e,t){var r=new ld({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),aSe(r,t);var n=r.style,a=n.fontSize;a&&a<9&&(n.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},i.internalField=function(){hF={g:function(e,t){var r=new xt;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new pi;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new Vs;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new Xn;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new yx;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),n;r&&(n=$Y(r));var a=new oa({shape:{points:n||[]},silent:!0});return Qc(t,a),nc(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),n;r&&(n=$Y(r));var a=new Jn({shape:{points:n||[]},silent:!0});return Qc(t,a),nc(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new yn;return Qc(t,r),nc(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(n)+parseFloat(o);var s=new xt;return Qc(t,s),nc(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),n=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new xt;return Qc(t,s),nc(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,t){var r=e.getAttribute("d")||"",n=YC(r);return Qc(t,n),nc(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),i}(),qY={lineargradient:function(i){var e=parseInt(i.getAttribute("x1")||"0",10),t=parseInt(i.getAttribute("y1")||"0",10),r=parseInt(i.getAttribute("x2")||"10",10),n=parseInt(i.getAttribute("y2")||"0",10),a=new xh(e,t,r,n);return ZY(i,a),JY(i,a),a},radialgradient:function(i){var e=parseInt(i.getAttribute("cx")||"0",10),t=parseInt(i.getAttribute("cy")||"0",10),r=parseInt(i.getAttribute("r")||"0",10),n=new $C(e,t,r);return ZY(i,n),JY(i,n),n}};function ZY(i,e){var t=i.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function JY(i,e){for(var t=i.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var a={};iq(t,a,a);var o=a.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:n,color:o})}t=t.nextSibling}}function Qc(i,e){i&&i.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),At(e.__inheritedStyle,i.__inheritedStyle))}function $Y(i){for(var e=nT(i),t=[],r=0;r<e.length;r+=2){var n=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([n,a])}return t}function nc(i,e,t,r,n){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};i.nodeType===1&&(uSe(i,e),iq(i,o,s),r||hSe(i,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=eq(a,"fill",o.fill,t)),o.stroke!=null&&(a.style.stroke=eq(a,"stroke",o.stroke,t)),W(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),W(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),n&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=Me(nT(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function aSe(i,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),i.style.textBaseline=n}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),i.style.textAlign=s)}}var oSe=/^url\(\s*#(.*?)\)/;function eq(i,e,t,r){var n=t&&t.match(oSe);if(n){var a=bo(n[1]);r.push([i,e,a]);return}return t==="none"&&(t=null),t}function sSe(i,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=i[r[2]]}}var lSe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function nT(i){return i.match(lSe)||[]}var cSe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,dF=Math.PI/180;function uSe(i,e){var t=i.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],n=null;t.replace(cSe,function(h,d,f){return r.push(d,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=nT(o);switch(n=n||za(),s){case"translate":Jo(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":o0(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":dl(n,n,-parseFloat(l[0])*dF,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*dF);hl(n,[1,0,c,1,0,0],n);break;case"skewY":var u=Math.tan(parseFloat(l[0])*dF);hl(n,[1,u,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}e.setLocalTransform(n)}}var tq=/([^\s:;]+)\s*:\s*([^:;]+)/g;function iq(i,e,t){var r=i.getAttribute("style");if(r){tq.lastIndex=0;for(var n;(n=tq.exec(r))!=null;){var a=n[1],o=Mt(iT,a)?iT[a]:null;o&&(e[o]=n[2]);var s=Mt(rT,a)?rT[a]:null;s&&(t[s]=n[2])}}}function hSe(i,e,t){for(var r=0;r<XY.length;r++){var n=XY[r],a=i.getAttribute(n);a!=null&&(e[iT[n]]=a)}for(var r=0;r<YY.length;r++){var n=YY[r],a=i.getAttribute(n);a!=null&&(t[rT[n]]=a)}}function fF(i,e){var t=e.width/i.width,r=e.height/i.height,n=Math.min(t,r);return{scale:n,x:-(i.x+i.width/2)*n+(e.x+e.width/2),y:-(i.y+i.height/2)*n+(e.y+e.height/2)}}function rq(i,e){var t=new nSe;return t.parse(i,e)}var dSe=ct(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),nq=function(){function i(e,t){this.type="geoSVG",this._usedGraphicMap=ct(),this._freedGraphics=[],this._mapName=e,this._parsedXML=tT(t)}return i.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=pSe(e.named),r=t.regions,n=t.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},i.prototype._buildGraphic=function(e){var t,r;try{t=e&&rq(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,In(r!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var n=new xt;n.add(r),n.isGeoSVGGraphicRoot=!0;var a=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,h=void 0,d=void 0;if(a!=null?(c=0,h=a):s&&(c=s.x,h=s.width),o!=null?(u=0,d=o):s&&(u=s.y,d=s.height),c==null||u==null){var f=r.getBoundingRect();c==null&&(c=f.x,h=f.width),u==null&&(u=f.y,d=f.height)}l=this._boundingRect=new Ht(c,u,h,d)}if(s){var m=fF(s,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}n.setClipPath(new pi({shape:l.plain()}));var y=[];return W(t.named,function(g){dSe.get(g.svgNodeTagLower)!=null&&(y.push(g),fSe(g.el))}),{root:n,boundingRect:l,named:y}},i.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},i.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},i}();function fSe(i){i.silent=!1,i.isGroup&&i.traverse(function(e){e.silent=!1})}function pSe(i){var e=[],t=ct();return W(i,function(r){if(r.namedFrom==null){var n=new NK(r.name,r.el);e.push(n),t.set(r.name,n)}}),{regions:e,regionsMap:t}}var pF=[126,25],aq="\u5357\u6D77\u8BF8\u5C9B",Lm=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(mp=0;mp<Lm.length;mp++)for(Pm=0;Pm<Lm[mp].length;Pm++)Lm[mp][Pm][0]/=10.5,Lm[mp][Pm][1]/=-10.5/.75,Lm[mp][Pm][0]+=pF[0],Lm[mp][Pm][1]+=pF[1];var Pm,mp;function AF(i,e){if(i==="china"){for(var t=0;t<e.length;t++)if(e[t].name===aq)return;e.push(new _2(aq,Me(Lm,function(r){return{type:"polygon",exterior:r}}),pF))}}var ASe={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function mF(i,e){if(i==="china"){var t=ASe[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var mSe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function gF(i,e){i==="china"&&e.name==="\u53F0\u6E7E"&&e.geometries.push({type:"polygon",exterior:mSe[0]})}var gSe="name",oq=function(){function i(e,t,r){this.type="geoJSON",this._parsedMap=ct(),this._mapName=e,this._specialAreas=r,this._geoJSON=ySe(t)}return i.prototype.load=function(e,t){t=t||gSe;var r=this._parsedMap.get(t);if(!r){var n=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:n,boundingRect:vSe(n)})}var a=ct(),o=[];return W(r.regions,function(s){var l=s.name;e&&Mt(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new Ht(0,0,0,0),regionsMap:a}},i.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,n;try{n=r?iO(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return AF(t,n),W(n,function(a){var o=a.name;mF(t,a),gF(t,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),n},i.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},i}();function vSe(i){for(var e,t=0;t<i.length;t++){var r=i[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function ySe(i){return Ye(i)?typeof JSON<"u"&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}var b_=ct(),Xs={registerMap:function(i,e,t){if(e.svg){var r=new nq(i,e.svg);b_.set(i,r)}else{var n=e.geoJson||e.geoJSON;n&&!e.features?t=e.specialAreas:n=e;var r=new oq(i,n,t);b_.set(i,r)}},getGeoResource:function(i){return b_.get(i)},getMapForUser:function(i){var e=b_.get(i);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(i,e,t){var r=b_.get(i);if(r)return r.load(e,t)}};var vF=["rect","circle","line","ellipse","polygon","polyline","path"],xSe=ct(vF),_Se=ct(vF.concat(["g"])),wSe=ct(vF.concat(["g"])),pq=$t();function aT(i){var e=i.getItemStyle(),t=i.get("areaColor");return t!=null&&(e.fill=t),e}function sq(i){var e=i.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var bSe=function(){function i(e){var t=new xt;this.uid=Lc("ec_map_draw"),this._controller=new Rh(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new xt),t.add(this._svgGroup=new xt)}return i.prototype.draw=function(e,t,r,n,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(x){!s&&x.getHostGeoModel()===e&&(s=x.getData())});var l=e.coordinateSystem,c=this._regionsGroup,u=this.group,h=l.getTransformInfo(),d=h.raw,f=h.roam,m=!c.childAt(0)||a;m?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):Si(u,f,e);var y=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,g={api:r,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:y,isGeo:o,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(g):l.resourceType==="geoSVG"&&this._buildSVG(g),this._updateController(e,t,r),this._updateMapSelectHandler(e,c,r,n)},i.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=ct(),r=ct(),n=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,c=l&&l.stream;function u(f,m){return m&&(f=m(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function h(f){for(var m=[],y=!c&&l&&l.project,g=0;g<f.length;++g){var x=u(f[g],y);x&&m.push(x)}return m}function d(f){return{shape:{points:h(f)}}}n.removeAll(),W(e.geo.regions,function(f){var m=f.name,y=t.get(m),g=r.get(m)||{},x=g.dataIdx,b=g.regionModel;y||(y=t.set(m,new xt),n.add(y),x=s?s.indexOfName(m):null,b=e.isGeo?o.getRegionModel(m):s?s.getItemModel(x):null,r.set(m,{dataIdx:x,regionModel:b}));var S=[],E=[];W(f.geometries,function(F){if(F.type==="polygon"){var H=[F.exterior].concat(F.interiors||[]);c&&(H=fq(H,c)),W(H,function(k){S.push(new oa(d(k)))})}else{var U=F.points;c&&(U=fq(U,c,!0)),W(U,function(k){E.push(new Jn(d(k)))})}});var D=u(f.getCenter(),l&&l.project);function B(F,H){if(F.length){var U=new T0({culling:!0,segmentIgnoreThreshold:1,shape:{paths:F}});y.add(U),lq(e,U,x,b),cq(e,U,m,b,o,x,D),H&&(sq(U),W(U.states,sq))}}B(S),B(E,!0)}),t.each(function(f,m){var y=r.get(m),g=y.dataIdx,x=y.regionModel;uq(e,f,m,x,o,g),hq(e,f,m,x,o),dq(e,f,m,x,o)},this)},i.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var n=this._svgDispatcherMap=ct(),a=!1;W(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,c=e.data,u=o.svgNodeTagLower,h=o.el,d=c?c.indexOfName(s):null,f=l.getRegionModel(s);if(xSe.get(u)!=null&&h instanceof Da&&lq(e,h,d,f),h instanceof Da&&(h.culling=!0),h.z2EmphasisLift=0,!o.namedFrom&&(wSe.get(u)!=null&&cq(e,h,s,f,l,d,null),uq(e,h,s,f,l,d),hq(e,h,s,f,l),_Se.get(u)!=null)){var m=dq(e,h,s,f,l);m==="self"&&(a=!0);var y=n.get(s)||n.set(s,[]);y.push(h)}},this),this._enableBlurEntireSVG(a,e)},i.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){bu(a);var o=a.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),a.ensureState("emphasis")}})}},i.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},i.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var a=n.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},i.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},i.prototype._useSVG=function(e){var t=Xs.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},i.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Xs.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},i.prototype._updateController=function(e,t,r){var n=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=n.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=e.id,c}a.off("pan").on("pan",function(c){this._mouseDownFlag=!1,ev(o,c.dx,c.dy),r.dispatchAction(Ce(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,tv(o,c.scale,c.originX,c.originY),r.dispatchAction(Ce(l(),{zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(c,u,h){return n.containPoint([u,h])&&!Ap(c,r,e)})},i.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=pq(t).ignore)})},i.prototype._updateMapSelectHandler=function(e,t,r,n){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},i}();function lq(i,e,t,r){var n=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=aT(n),c=aT(a),u=aT(s),h=aT(o),d=i.data;if(d){var f=d.getItemVisual(t,"style"),m=d.getItemVisual(t,"decal");i.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),m&&(l.decal=Lu(m,i.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=h,bu(e)}function cq(i,e,t,r,n,a,o){var s=i.data,l=i.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||c||u&&u.showLabel){var h=l?t:a,d=void 0;(!s||a>=0)&&(d=n);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;fn(e,Kr(r),{labelFetcher:d,labelDataIndex:h,defaultText:t},f);var m=e.getTextContent();if(m&&(pq(m).ignore=m.ignore,e.textConfig&&o)){var y=e.getBoundingRect().clone();e.textConfig.layoutRect=y,e.textConfig.position=[(o[0]-y.x)/y.width*100+"%",(o[1]-y.y)/y.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function uq(i,e,t,r,n,a){i.data?i.data.setItemGraphicEl(a,e):Pt(e).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:t,region:r&&r.option||{}}}function hq(i,e,t,r,n){i.data||Tu({el:e,componentModel:n,itemName:t,itemTooltipOption:r.get("tooltip")})}function dq(i,e,t,r,n){e.highDownSilentOnTouch=!!n.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return pr(e,o,a.get("blurScope"),a.get("disabled")),i.isGeo&&kG(e,n,t),o}function fq(i,e,t){var r=[],n;function a(){n=[]}function o(){n.length&&(r.push(n),n=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,c){isFinite(l)&&isFinite(c)&&n.push([l,c])},sphere:function(){}});return!t&&s.polygonStart(),W(i,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!t&&s.polygonEnd(),r}var oT=bSe;var SSe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new oT(n);o.add(s.group),s.draw(t,r,n,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,n){var a=t.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=a.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,h=c.offset,d=new Vs({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+h*9,cy:u[1],r:3},silent:!0,z2:8+(h?0:cd+1)});if(!h){var f=t.mainSeries.getData(),m=a.getName(l),y=f.indexOfName(m),g=a.getItemModel(l),x=g.getModel("label"),b=f.getItemGraphicEl(y);fn(d,Kr(g),{labelFetcher:{getFormattedLabel:function(S,E){return t.getFormattedLabel(y,E)}},defaultText:m}),d.disableLabelAnimation=!0,x.get("position")||d.setTextConfig({position:"bottom"}),b.onHoverStateChange=function(S){sm(d,S)}}o.add(d)}}})},e.type="map",e}(qi),Aq=SSe;var CSe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(n);return o&&a.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=rc(this,{coordDimensions:["value"],encodeDefaulter:Ut(N0,this)}),n=ct(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);n.set(l,!0)}var c=Xs.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return W(c.regions,function(u){var h=u.name;n.get(h)||a.push(h)}),r.appendValues([],a),r},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,n){for(var a=this.getData(),o=this.getRawValue(t),s=a.getName(t),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var h=l[u].originalData.indexOfName(s),d=a.mapDimension("value");isNaN(l[u].originalData.get(d,h))||c.push(l[u].name)}return wn("section",{header:c.join(", "),noHeader:!c.length,blocks:[wn("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",n=Nr(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(rr),mq=CSe;function ESe(i,e){var t={};return W(i,function(r){r.each(r.mapDimension("value"),function(n,a){var o="ec-"+r.getName(a);t[o]=t[o]||[],isNaN(n)||t[o].push(n)})}),i[0].map(i[0].mapDimension("value"),function(r,n){for(var a="ec-"+i[0].getName(n),o=0,s=1/0,l=-1/0,c=t[a].length,u=0;u<c;u++)s=Math.min(s,t[a][u]),l=Math.max(l,t[a][u]),o+=t[a][u];var h;return e==="min"?h=s:e==="max"?h=l:e==="average"?h=o/c:h=o,c===0?NaN:h})}function yF(i){var e={};i.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),n=r?"o"+r.id:"i"+t.getMapType();(e[n]=e[n]||[]).push(t)}),W(e,function(t,r){for(var n=ESe(Me(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(n.cloneShallow()),t[a].mainSeries=t[0]})}function xF(i){var e={};i.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var n={};W(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&i.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var h=l.getName(u),d=s.getRegion(h);if(!(!d||isNaN(c))){var f=n[h]||0,m=s.dataToPoint(d.getCenter());n[h]=f+1,l.setItemLayout(u,{point:m,offset:f})}})});var a=t.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!n[s],a.setItemLayout(o,l)}),e[r]=!0}})}var gq=Ca,TSe=function(i){le(e,i);function e(t){var r=i.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new fl,r._rawTransformable=new fl,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,n,a){return this._rect=new Ht(t,r,n,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,n,a){this._transformTo(t,r,n,a),this._viewRect=new Ht(t,r,n,a)},e.prototype._transformTo=function(t,r,n,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new Ht(t,r,n,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[ot(t[0],r.getWidth()),ot(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,n=t.y+t.height/2;return[r,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,n=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Ca([],a,t),n=Ca([],n,t),r.originX=a[0],r.originY=a[1],r.x=n[0]-a[0],r.y=n[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),Vy(this.transform||(this.transform=[]),r.transform||za()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Sc(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,n=new fl;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,n){var a=r?this._rawTransform:this.transform;return n=n||[],a?gq(n,t,a):So(n,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?gq([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,n){var a=vq(r);return a===this?a.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var a=vq(r);return a===this?a.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(fl);function vq(i){var e=i.seriesModel;return e?e.coordinateSystem:null}var Ed=TSe;var MSe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},_F=["lng","lat"],xq=function(i){le(e,i);function e(t,r,n){var a=i.call(this,t)||this;a.dimensions=_F,a.type="geo",a._nameCoordMap=ct(),a.map=r;var o=n.projection,s=Xs.load(r,n.nameMap,n.nameProperty),l=Xs.getGeoResource(r),c=a.resourceType=l?l.type:null,u=a.regions=s.regions,h=MSe[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var d;if(o)for(var f=0;f<u.length;f++){var m=u[f].getBoundingRect(o);d=d||m.clone(),d.union(m)}else d=s.boundingRect;return a.setBoundingRect(d.x,d.y,d.width,d.height),a.aspectScale=o?1:Yt(n.aspectScale,h.aspectScale),a._invertLongitute=o?!1:h.invertLongitute,a}return e.prototype._transformTo=function(t,r,n,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new Ht(t,r,n,a));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,n=0;n<r.length;n++){var a=r[n];if(a.type==="geoJSON"&&a.contain(t))return r[n]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,n){if(Ye(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,n)}},e.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return i.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,r,n){return i.prototype.dataToPoint.call(this,t,r,n)},e.prototype.convertToPixel=function(t,r,n){var a=yq(r);return a===this?a.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var a=yq(r);return a===this?a.pointToData(n):null},e}(Ed);jr(xq,Ed);function yq(i){var e=i.geoModel,t=i.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Jr).models[0]||{}).coordinateSystem:null}var wF=xq;function _q(i,e){var t=i.get("boundingCoords");if(t!=null){var r=t[0],n=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=n[0],c=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var u=function(B,F,H,U){for(var k=H-B,j=U-F,q=0;q<=100;q++){var X=q/100,Y=a.project([B+k*X,F+j*X]);jl(r,r,Y),Kl(n,n,Y)}};u(o,s,l,s),u(l,s,l,c),u(l,c,o,c),u(o,c,l,s)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var h=this.getBoundingRect(),d=i.get("layoutCenter"),f=i.get("layoutSize"),m=e.getWidth(),y=e.getHeight(),g=h.width/h.height*this.aspectScale,x=!1,b,S;d&&f&&(b=[ot(d[0],m),ot(d[1],y)],S=ot(f,Math.min(m,y)),!isNaN(b[0])&&!isNaN(b[1])&&!isNaN(S)&&(x=!0));var E;if(x)E={},g>1?(E.width=S,E.height=S/g):(E.height=S,E.width=S*g),E.y=b[1]-E.height/2,E.x=b[0]-E.width/2;else{var D=i.getBoxLayoutParams();D.aspect=g,E=Fr(D,{width:m,height:y})}this.setViewRect(E.x,E.y,E.width,E.height),this.setCenter(i.get("center"),e),this.setZoom(i.get("zoom"))}function ISe(i,e){W(e.get("geoCoord"),function(t,r){i.addGeoCoord(r,t)})}var BSe=function(){function i(){this.dimensions=_F}return i.prototype.create=function(e,t){var r=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),c=new wF(l+s,l,Ce({nameMap:o.get("nameMap")},n(o)));c.zoomLimit=o.get("scaleLimit"),r.push(c),o.coordinateSystem=c,c.model=o,c.resize=_q,c.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),W(a,function(o,s){var l=Me(o,function(u){return u.get("nameMap")}),c=new wF(s,s,Ce({nameMap:$g(l)},n(o[0])));c.zoomLimit=Mn.apply(null,Me(o,function(u){return u.get("scaleLimit")})),r.push(c),c.resize=_q,c.resize(o[0],t),W(o,function(u){u.coordinateSystem=c,ISe(c,u)})}),r},i.prototype.getFilledRegions=function(e,t,r,n){for(var a=(e||[]).slice(),o=ct(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=Xs.load(t,r,n);return W(l.regions,function(c){var u=c.name;!o.get(u)&&a.push({name:u})}),a},i}(),DSe=new BSe,sT=DSe;var RSe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){var a=Xs.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,n),ql(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=sT.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=qo(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new ir(o,t,t.ecModel)),o.selected&&(n[s]=!0)),a},ct()),r.selectedMap||(r.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new ir(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var n=this.getRegionModel(t),a=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:t};if(ft(a))return o.status=r,a(o);if(Ye(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(xi),wq=RSe;function bq(i,e){return i.pointToProjected?i.pointToProjected(e):i.pointToData(e)}function iv(i,e,t,r){var n=i.getZoom(),a=i.getCenter(),o=e.zoom,s=i.projectedToPoint?i.projectedToPoint(a):i.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,i.setCenter(bq(i,s),r)),o!=null){if(t){var l=t.min||0,c=t.max||1/0;o=Math.max(Math.min(n*o,c),l)/n}i.scaleX*=o,i.scaleY*=o;var u=(e.originX-i.x)*(o-1),h=(e.originY-i.y)*(o-1);i.x-=u,i.y-=h,i.updateTransform(),i.setCenter(bq(i,s),r),i.setZoom(o*n)}return{center:i.getCenter(),zoom:i.getZoom()}}var PSe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,n,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new oT(n));var o=this._mapDraw;o.draw(t,r,n,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,n)},e.prototype._handleRegionClick=function(t){var r;Ru(t.target,function(n){return(r=Pt(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,n){var a=this;this._mapDraw.group.traverse(function(o){var s=Pt(o).eventData;if(s)return a._model.isSelected(s.name)?n.enterSelect(o):n.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(hr),Sq=PSe;function LSe(i,e,t){Xs.registerMap(i,e,t)}function S_(i){i.registerCoordinateSystem("geo",sT),i.registerComponentModel(wq),i.registerComponentView(Sq),i.registerImpl("registerMap",LSe),i.registerImpl("getMap",function(t){return Xs.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",i.registerAction(r,function(n,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:n},function(l){l[t](n.name);var c=l.coordinateSystem;W(c.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var u=[];W(o,function(h,d){o[d]&&u.push(d)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:o,allSelected:s,name:n.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),i.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,n){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=iv(s,t,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&W(o.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function bF(i){Ei(S_),i.registerChartView(Aq),i.registerSeriesModel(mq),i.registerLayout(xF),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,yF),WE("map",i.registerAction)}function Cq(i){var e=i;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,n;r=t.pop();)if(n=r.children,r.isExpand&&n.length)for(var a=n.length,o=a-1;o>=0;o--){var s=n[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function Eq(i,e){var t=i.isExpand?i.children:[],r=i.parentNode.children,n=i.hierNode.i?r[i.hierNode.i-1]:null;if(t.length){OSe(i);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;n?(i.hierNode.prelim=n.hierNode.prelim+e(i,n),i.hierNode.modifier=i.hierNode.prelim-a):i.hierNode.prelim=a}else n&&(i.hierNode.prelim=n.hierNode.prelim+e(i,n));i.parentNode.hierNode.defaultAncestor=FSe(i,n,i.parentNode.hierNode.defaultAncestor||r[0],e)}function Tq(i){var e=i.hierNode.prelim+i.parentNode.hierNode.modifier;i.setLayout({x:e},!0),i.hierNode.modifier+=i.parentNode.hierNode.modifier}function EF(i){return arguments.length?i:kSe}function Om(i,e){return i-=Math.PI/2,{x:e*Math.cos(i),y:e*Math.sin(i)}}function Mq(i,e){return Fr(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function OSe(i){for(var e=i.children,t=e.length,r=0,n=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,n+=a.hierNode.change,r+=a.hierNode.shift+n}}function FSe(i,e,t,r){if(e){for(var n=i,a=i,o=a.parentNode.children[0],s=e,l=n.hierNode.modifier,c=a.hierNode.modifier,u=o.hierNode.modifier,h=s.hierNode.modifier;s=SF(s),a=CF(a),s&&a;){n=SF(n),o=CF(o),n.hierNode.ancestor=i;var d=s.hierNode.prelim+h-a.hierNode.prelim-c+r(s,a);d>0&&(USe(NSe(s,i,t),i,d),c+=d,l+=d),h+=s.hierNode.modifier,c+=a.hierNode.modifier,l+=n.hierNode.modifier,u+=o.hierNode.modifier}s&&!SF(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=h-l),a&&!CF(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=c-u,t=i)}return t}function SF(i){var e=i.children;return e.length&&i.isExpand?e[e.length-1]:i.hierNode.thread}function CF(i){var e=i.children;return e.length&&i.isExpand?e[0]:i.hierNode.thread}function NSe(i,e,t){return i.hierNode.ancestor.parentNode===e.parentNode?i.hierNode.ancestor:t}function USe(i,e,t){var r=t/(e.hierNode.i-i.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,i.hierNode.change+=r}function kSe(i,e){return i.parentNode===e.parentNode?1:2}var zSe=function(){function i(){this.parentPoint=[],this.childPoints=[]}return i}(),VSe=function(i){le(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zSe},e.prototype.buildPath=function(t,r){var n=r.childPoints,a=n.length,o=r.parentPoint,s=n[0],l=n[a-1];if(a===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var c=r.orient,u=c==="TB"||c==="BT"?0:1,h=1-u,d=ot(r.forkPosition,1),f=[];f[u]=o[u],f[h]=o[h]+(l[h]-o[h])*d,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(s[0],s[1]),f[u]=s[u],t.lineTo(f[0],f[1]),f[u]=l[u],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var m=1;m<a-1;m++){var y=n[m];t.moveTo(y[0],y[1]),f[u]=y[u],t.lineTo(f[0],f[1])}},e}(Kt),HSe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new xt,t}return e.prototype.init=function(t,r){this._controller=new Rh(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,n){var a=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,n),this._updateController(t,r,n);var c=this._data;a.diff(c).add(function(u){Iq(a,u)&&Bq(a,u,null,s,t)}).update(function(u,h){var d=c.getItemGraphicEl(h);if(!Iq(a,u)){d&&Rq(c,h,d,s,t);return}Bq(a,u,d,s,t)}).remove(function(u){var h=c.getItemGraphicEl(u);h&&Rq(c,u,h,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(u,h){u.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var n=t.getData(),a=[];n.each(function(h){var d=n.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var o=[],s=[];em(a,o,s);var l=this._min,c=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=c?c[1]:s[1]+1);var u=t.coordinateSystem=new Ed;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),u.setCenter(t.get("center"),r),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,r,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!Ap(c,n,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ev(s,c.dx,c.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){tv(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(t),n.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),n=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*n+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(qi);function Iq(i,e){var t=i.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function Bq(i,e,t,r,n){var a=!t,o=i.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,c=o.isExpand===!1&&o.children.length!==0?l:"#fff",u=i.tree.root,h=o.parentNode===u?o:o.parentNode||o,d=i.getItemGraphicEl(h.dataIndex),f=h.getLayout(),m=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,y=o.getLayout();a?(t=new Cd(i,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.x=m.x,t.y=m.y):t.updateData(i,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=y.rawX,t.__radialRawY=y.rawY,r.add(t),i.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,Si(t,{x:y.x,y:y.y},n);var g=t.getSymbolPath();if(n.get("layout")==="radial"){var x=u.children[0],b=x.getLayout(),S=x.children.length,E=void 0,D=void 0;if(y.x===b.x&&o.isExpand===!0&&x.children.length){var B={x:(x.children[0].getLayout().x+x.children[S-1].getLayout().x)/2,y:(x.children[0].getLayout().y+x.children[S-1].getLayout().y)/2};E=Math.atan2(B.y-b.y,B.x-b.x),E<0&&(E=Math.PI*2+E),D=B.x<b.x,D&&(E=E-Math.PI)}else E=Math.atan2(y.y-b.y,y.x-b.x),E<0&&(E=Math.PI*2+E),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(D=y.x<b.x,D&&(E=E-Math.PI)):(D=y.x>b.x,D||(E=E-Math.PI));var F=D?"left":"right",H=s.getModel("label"),U=H.get("rotate"),k=U*(Math.PI/180),j=g.getTextContent();j&&(g.setTextConfig({position:H.get("position")||F,rotation:U==null?-E:k,origin:"center"}),j.setStyle("verticalAlign","middle"))}var q=s.get(["emphasis","focus"]),X=q==="relative"?RA(o.getAncestorsIndices(),o.getDescendantIndices()):q==="ancestor"?o.getAncestorsIndices():q==="descendant"?o.getDescendantIndices():null;X&&(Pt(t).focus=X),QSe(n,o,u,t,m,f,y,r),t.__edge&&(t.onHoverStateChange=function(Y){if(Y!=="blur"){var J=o.parentNode&&i.getItemGraphicEl(o.parentNode.dataIndex);J&&J.hoverState===om||sm(t.__edge,Y)}})}function QSe(i,e,t,r,n,a,o,s){var l=e.getModel(),c=i.get("edgeShape"),u=i.get("layout"),h=i.getOrient(),d=i.get(["lineStyle","curveness"]),f=i.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),y=r.__edge;if(c==="curve")e.parentNode&&e.parentNode!==t&&(y||(y=r.__edge=new um({shape:TF(u,h,d,n,n)})),Si(y,{shape:TF(u,h,d,a,o)},i));else if(c==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var g=e.children,x=[],b=0;b<g.length;b++){var S=g[b].getLayout();x.push([S.x,S.y])}y||(y=r.__edge=new VSe({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:f}})),Si(y,{shape:{parentPoint:[o.x,o.y],childPoints:x}},i)}y&&!(c==="polyline"&&!e.isExpand)&&(y.useStyle(At({strokeNoScale:!0,fill:null},m)),Dn(y,l,"lineStyle"),bu(y),s.add(y))}function Dq(i,e,t,r,n){var a=e.tree.root,o=Pq(a,i),s=o.source,l=o.sourceLayout,c=e.getItemGraphicEl(i.dataIndex);if(c){var u=e.getItemGraphicEl(s.dataIndex),h=u.__edge,d=c.__edge||(s.isExpand===!1||s.children.length===1?h:void 0),f=r.get("edgeShape"),m=r.get("layout"),y=r.get("orient"),g=r.get(["lineStyle","curveness"]);d&&(f==="curve"?Pc(d,{shape:TF(m,y,g,l,l),style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:n}):f==="polyline"&&r.get("layout")==="orthogonal"&&Pc(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:n}))}}function Pq(i,e){for(var t=e.parentNode===i?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===i?t:t.parentNode||t;return{source:t,sourceLayout:r}}function Rq(i,e,t,r,n){var a=i.tree.getNodeByDataIndex(e),o=i.tree.root,s=Pq(o,a).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};Pc(t,{x:s.x+1,y:s.y+1},n,{cb:function(){r.remove(t),i.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,i.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(c){Dq(c,i,r,n,l)}),Dq(a,i,r,n,l)}function TF(i,e,t,r,n){var a,o,s,l,c,u,h,d;if(i==="radial"){c=r.rawX,h=r.rawY,u=n.rawX,d=n.rawY;var f=Om(c,h),m=Om(c,h+(d-h)*t),y=Om(u,d+(h-d)*t),g=Om(u,d);return{x1:f.x||0,y1:f.y||0,x2:g.x||0,y2:g.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:y.x||0,cpy2:y.y||0}}else c=r.x,h=r.y,u=n.x,d=n.y,(e==="LR"||e==="RL")&&(a=c+(u-c)*t,o=h,s=u+(c-u)*t,l=d),(e==="TB"||e==="BT")&&(a=c,o=h+(d-h)*t,s=u,l=d+(h-d)*t);return{x1:c,y1:h,x2:u,y2:d,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Lq=HSe;var Gc=$t();function GSe(i){var e=i.mainData,t=i.datas;t||(t={main:e},i.datasAttr={main:"data"}),i.datas=i.mainData=null,Oq(e,t,i),W(t,function(r){W(e.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,Ut(WSe,i))})}),e.wrapMethod("cloneShallow",Ut(KSe,i)),W(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Ut(jSe,i))}),In(t[e.dataType]===e)}function WSe(i,e){if(qSe(this)){var t=Ce({},Gc(this).datas);t[this.dataType]=e,Oq(e,t,i)}else MF(e,this.dataType,Gc(this).mainData,i);return e}function jSe(i,e){return i.struct&&i.struct.update(),e}function KSe(i,e){return W(Gc(e).datas,function(t,r){t!==e&&MF(t.cloneShallow(),r,e,i)}),e}function XSe(i){var e=Gc(this).mainData;return i==null||e==null?e:Gc(e).datas[i]}function YSe(){var i=Gc(this).mainData;return i==null?[{data:i}]:Me(si(Gc(i).datas),function(e){return{type:e,data:Gc(i).datas[e]}})}function qSe(i){return Gc(i).mainData===i}function Oq(i,e,t){Gc(i).datas={},W(e,function(r,n){MF(r,n,i,t)})}function MF(i,e,t,r){Gc(t).datas[e]=i,Gc(i).mainData=t,i.dataType=e,r.struct&&(i[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=i),i.getLinkedData=XSe,i.getLinkedDataAll=YSe}var lT=GSe;var ZSe=function(){function i(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return i.prototype.isRemoved=function(){return this.dataIndex<0},i.prototype.eachNode=function(e,t,r){ft(e)&&(r=t,t=e,e=null),e=e||{},Ye(e)&&(e={order:e});var n=e.order||"preorder",a=this[e.attr||"children"],o;n==="preorder"&&(o=t.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,t,r);n==="postorder"&&t.call(r,this)},i.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},i.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,n=r.length;t<n;t++){var a=r[t].getNodeById(e);if(a)return a}},i.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,n=r.length;t<n;t++){var a=r[t].contains(e);if(a)return a}},i.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},i.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},i.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},i.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},i.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},i.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},i.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},i.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},i.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},i.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},i.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},i.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},i.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},i.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},i.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},i}();var JSe=function(){function i(e){this.type="tree",this._nodes=[],this.hostModel=e}return i.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},i.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},i.prototype.getNodeById=function(e){return this.root.getNodeById(e)},i.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,n=t.length;r<n;r++)t[r].dataIndex=-1;for(var r=0,n=e.count();r<n;r++)t[e.getRawIndex(r)].dataIndex=r},i.prototype.clearLayouts=function(){this.data.clearItemLayouts()},i.createTree=function(e,t,r){var n=new i(t),a=[],o=1;s(e);function s(u,h){var d=u.value;o=Math.max(o,Ee(d)?d.length:1),a.push(u);var f=new ZSe(kn(u.name,""),n);h?$Se(f,h):n.root=f,n._nodes.push(f);var m=u.children;if(m)for(var y=0;y<m.length;y++)s(m[y],f)}n.root.updateDepthAndHeight(0);var l=Ou(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,c=new sa(l,t);return c.initData(a),r&&r(c),lT({mainData:c,struct:n,structAttr:"tree"}),n.update(),n},i}();function $Se(i,e){var t=e.children;i.parentNode!==e&&(t.push(i),i.parentNode=e)}var rv=JSe;function Td(i,e,t){if(i&&qt(e,i.type)>=0){var r=t.getData().tree.root,n=i.targetNode;if(Ye(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var a=i.targetNodeId;if(a!=null&&(n=r.getNodeById(a)))return{node:n}}}function IF(i){for(var e=[];i;)i=i.parentNode,i&&e.push(i);return e.reverse()}function nv(i,e){var t=IF(i);return qt(t,e)>=0}function gp(i,e){for(var t=[];i;){var r=i.dataIndex;t.push({name:i.name,dataIndex:r,value:e.getRawValue(r)}),i=i.parentNode}return t.reverse(),t}var eCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},n=t.leaves||{},a=new ir(n,this,this.ecModel),o=rv.createTree(r,this,s);function s(h){h.wrapMethod("getItemModel",function(d,f){var m=o.getNodeByDataIndex(f);return m&&m.children.length&&m.isExpand||(d.parentModel=a),d})}var l=0;o.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var c=t.expandAndCollapse,u=c&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=u}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,n){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(t),l=s.getValue(),c=s.name;s&&s!==o;)c=s.parentNode.name+"."+c,s=s.parentNode;return wn("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=i.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=gp(n,this),r.collapsed=!n.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(rr),Fq=eCe;function Nq(i,e,t){for(var r=[i],n=[],a;a=r.pop();)if(n.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=n.pop();)e(a,t)}function av(i,e){for(var t=[i],r;r=t.pop();)if(e(r),r.isExpand){var n=r.children;if(n.length)for(var a=n.length-1;a>=0;a--)t.push(n[a])}}function DF(i,e){i.eachSeriesByType("tree",function(t){tCe(t,e)})}function tCe(i,e){var t=Mq(i,e);i.layoutInfo=t;var r=i.get("layout"),n=0,a=0,o=null;r==="radial"?(n=2*Math.PI,a=Math.min(t.height,t.width)/2,o=EF(function(S,E){return(S.parentNode===E.parentNode?1:2)/S.depth})):(n=t.width,a=t.height,o=EF());var s=i.getData().tree.root,l=s.children[0];if(l){Cq(s),Nq(l,Eq,o),s.hierNode.modifier=-l.hierNode.prelim,av(l,Tq);var c=l,u=l,h=l;av(l,function(S){var E=S.getLayout().x;E<c.getLayout().x&&(c=S),E>u.getLayout().x&&(u=S),S.depth>h.depth&&(h=S)});var d=c===u?1:o(c,u)/2,f=d-c.getLayout().x,m=0,y=0,g=0,x=0;if(r==="radial")m=n/(u.getLayout().x+d+f),y=a/(h.depth-1||1),av(l,function(S){g=(S.getLayout().x+f)*m,x=(S.depth-1)*y;var E=Om(g,x);S.setLayout({x:E.x,y:E.y,rawX:g,rawY:x},!0)});else{var b=i.getOrient();b==="RL"||b==="LR"?(y=a/(u.getLayout().x+d+f),m=n/(h.depth-1||1),av(l,function(S){x=(S.getLayout().x+f)*y,g=b==="LR"?(S.depth-1)*m:n-(S.depth-1)*m,S.setLayout({x:g,y:x},!0)})):(b==="TB"||b==="BT")&&(m=n/(u.getLayout().x+d+f),y=a/(h.depth-1||1),av(l,function(S){g=(S.getLayout().x+f)*m,x=b==="TB"?(S.depth-1)*y:a-(S.depth-1)*y,S.setLayout({x:g,y:x},!0)}))}}}function RF(i){i.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(n){var a=n.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(n.dataIndex,"style");Ce(s,o)})})}function Uq(i){i.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var n=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),i.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var a=n.coordinateSystem,o=iv(a,e,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function PF(i){i.registerChartView(Lq),i.registerSeriesModel(Fq),i.registerLayout(DF),i.registerVisual(RF),Uq(i)}var kq=["treemapZoomToNode","treemapRender","treemapMove"];function zq(i){for(var e=0;e<kq.length;e++)i.registerAction({type:kq[e],update:"updateView"},hn);i.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},n);function n(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=Td(t,s,a);if(l){var c=a.getViewRoot();c&&(t.direction=nv(c,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function C_(i){var e=i.getData(),t=e.tree,r={};t.eachNode(function(n){for(var a=n;a&&a.depth>1;)a=a.parentNode;var o=Ox(i.ecModel,a.name||a.dataIndex+"",r);n.setVisual("decal",o)})}var iCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};Vq(n);var a=t.levels||[],o=this.designatedVisualItemStyle={},s=new ir({itemStyle:o},this,r);a=t.levels=rCe(a,r);var l=Me(a||[],function(h){return new ir(h,s,r)},this),c=rv.createTree(n,this,u);function u(h){h.wrapMethod("getItemModel",function(d,f){var m=c.getNodeByDataIndex(f),y=m?l[m.depth]:null;return d.parentModel=y||s,d})}return c.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,n){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return wn("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var r=i.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=gp(n,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Ce(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=ct(),this._idIndexMapCount=0);var n=r.get(t);return n==null&&r.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){C_(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(rr);function Vq(i){var e=0;W(i.children,function(r){Vq(r);var n=r.value;Ee(n)&&(n=n[0]),e+=n});var t=i.value;Ee(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Ee(i.value)?i.value[0]=t:i.value=t}function rCe(i,e){var t=cr(e.get("color")),r=cr(e.get(["aria","decal","decals"]));if(t){i=i||[];var n,a;W(i,function(s){var l=new ir(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(a=!0)});var o=i[0]||(i[0]={});return n||(o.color=t.slice()),!a&&r&&(o.decal=r.slice()),i}}var Hq=iCe;var nCe=8,Qq=8,LF=5,aCe=function(){function i(e){this.group=new xt,e.add(this.group)}return i.prototype.render=function(e,t,r,n){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),h={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,h,c),this._renderContent(e,h,s,l,c,u,n),Zf(o,h.pos,h.box)}},i.prototype._prepare=function(e,t,r){for(var n=e;n;n=n.parentNode){var a=kn(n.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+nCe*2,t.emptyItemWidth);t.totalWidth+=s+Qq,t.renderList.push({node:n,text:a,width:s})}},i.prototype._renderContent=function(e,t,r,n,a,o,s){for(var l=0,c=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),h=Q9(t.pos,t.box),d=t.totalWidth,f=t.renderList,m=n.getModel("itemStyle").getItemStyle(),y=f.length-1;y>=0;y--){var g=f[y],x=g.node,b=g.width,S=g.text;d>h.width&&(d-=b-c,b=c,S=null);var E=new oa({shape:{points:oCe(l,0,b,u,y===f.length-1,y===0)},style:At(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new yi({style:br(a,{text:S})}),textConfig:{position:"inside"},z2:cd*1e4,onclick:Ut(s,x)});E.disableLabelAnimation=!0,E.getTextContent().ensureState("emphasis").style=br(o,{text:S}),E.ensureState("emphasis").style=m,pr(E,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(E),sCe(E,e,x),l+=b+Qq}},i.prototype.remove=function(){this.group.removeAll()},i}();function oCe(i,e,t,r,n,a){var o=[[n?i:i-LF,e],[i+t,e],[i+t,e+r],[n?i:i-LF,e+r]];return!a&&o.splice(2,0,[i+t+LF,e+r/2]),!n&&o.push([i,e+r/2]),o}function sCe(i,e,t){Pt(i).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&gp(t,e)}}var Gq=aCe;var lCe=function(){function i(){this._storage=[],this._elExistsMap={}}return i.prototype.add=function(e,t,r,n,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:n,easing:a}),!0)},i.prototype.finished=function(e){return this._finishedCallback=e,this},i.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},n=0,a=this._storage.length;n<a;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},i}();function Wq(){return new lCe}var OF=xt,jq=pi,Kq=3,Xq="label",Yq="upperLabel",uCe=cd*10,hCe=cd*2,dCe=cd*3,Fm=gl([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),qq=function(i){var e=Fm(i);return e.stroke=e.fill=e.lineWidth=null,e},cT=$t(),fCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=E_(),t}return e.prototype.render=function(t,r,n,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(qt(o,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=Td(a,s,t),c=a&&a.type,u=t.layoutInfo,h=!this._oldTree,d=this._storage,f=c==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,m=this._giveContainerGroup(u),y=t.get("animation"),g=this._doRender(m,t,f);y&&!h&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(m,g,t,f):g.renderFinally(),this._resetController(n),this._renderBreadcrumb(t,n,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new OF,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,n){var a=r.getData().tree,o=this._oldTree,s=E_(),l=E_(),c=this._storage,u=[];function h(g,x,b,S){return pCe(r,l,c,n,s,u,g,x,b,S)}f(a.root?[a.root]:[],o&&o.root?[o.root]:[],t,a===o||!o,0);var d=m(c);return this._oldTree=a,this._storage=l,{lastsForAnimation:s,willDeleteEls:d,renderFinally:y};function f(g,x,b,S,E){S?(x=g,W(g,function(F,H){!F.isRemoved()&&B(H,H)})):new ns(x,g,D,D).add(B).update(B).remove(Ut(B,null)).execute();function D(F){return F.getId()}function B(F,H){var U=F!=null?g[F]:null,k=H!=null?x[H]:null,j=h(U,k,b,E);j&&f(U&&U.viewChildren||[],k&&k.viewChildren||[],j,S,E+1)}}function m(g){var x=E_();return g&&W(g,function(b,S){var E=x[S];W(b,function(D){D&&(E.push(D),cT(D).willDelete=!0)})}),x}function y(){W(d,function(g){W(g,function(x){x.parent&&x.parent.remove(x)})}),W(u,function(g){g.invisible=!0,g.dirty()})}},e.prototype._doAnimation=function(t,r,n,a){var o=n.get("animationDurationUpdate"),s=n.get("animationEasing"),l=(ft(o)?0:o)||0,c=(ft(s)?null:s)||"cubicOut",u=Wq();W(r.willDeleteEls,function(h,d){W(h,function(f,m){if(!f.invisible){var y=f.parent,g,x=cT(y);if(a&&a.direction==="drillDown")g=y===a.rootNodeGroup?{shape:{x:0,y:0,width:x.nodeWidth,height:x.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var b=0,S=0;x.willDelete||(b=x.nodeWidth/2,S=x.nodeHeight/2),g=d==="nodeGroup"?{x:b,y:S,style:{opacity:0}}:{shape:{x:b,y:S,width:0,height:0},style:{opacity:0}}}g&&u.add(f,g,l,0,c)}})}),W(this._storage,function(h,d){W(h,function(f,m){var y=r.lastsForAnimation[d][m],g={};y&&(f instanceof xt?y.oldX!=null&&(g.x=f.x,g.y=f.y,f.x=y.oldX,f.y=y.oldY):(y.oldShape&&(g.shape=Ce({},f.shape),f.setShape(y.oldShape)),y.fadein?(f.setStyle("opacity",0),g.style={opacity:1}):f.style.opacity!==1&&(g.style={opacity:1})),u.add(f,g,l,0,c))})},this),this._state="animating",u.finished(st(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this._controller;r||(r=this._controller=new Rh(t.getZr()),r.enable(this.seriesModel.get("roam")),r.on("pan",st(this._onPan,this)),r.on("zoom",st(this._onZoom,this)));var n=new Ht(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(a,o,s){return n.contain(o,s)})},e.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>Kq||Math.abs(t.dy)>Kq)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var r=t.originX,n=t.originY;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;var s=new Ht(o.x,o.y,o.width,o.height),l=this.seriesModel.layoutInfo;r-=l.x,n-=l.y;var c=za();Jo(c,c,[-r,-n]),o0(c,c,[t.scale,t.scale]),Jo(c,c,[r,n]),s.applyTransform(c),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(n){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(n.offsetX,n.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&vm(c,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,n){var a=this;n||(n=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Gq(this.group))).render(t,r,n.node,function(o){a._state!=="animating"&&(nv(t.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=E_(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var n,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,r),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)n={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},e.type="treemap",e}(qi);function E_(){return{nodeGroup:[],background:[],content:[]}}function pCe(i,e,t,r,n,a,o,s,l,c){if(!o)return;var u=o.getLayout(),h=i.getData(),d=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var f=u.width,m=u.height,y=u.borderWidth,g=u.invisible,x=o.getRawIndex(),b=s&&s.getRawIndex(),S=o.viewChildren,E=u.upperHeight,D=S&&S.length,B=d.getModel("itemStyle"),F=d.getModel(["emphasis","itemStyle"]),H=d.getModel(["blur","itemStyle"]),U=d.getModel(["select","itemStyle"]),k=B.get("borderRadius")||0,j=Se("nodeGroup",OF);if(!j)return;if(l.add(j),j.x=u.x||0,j.y=u.y||0,j.markRedraw(),cT(j).nodeWidth=f,cT(j).nodeHeight=m,u.isAboveViewRoot)return j;var q=Se("background",jq,c,hCe);q&&ve(j,q,D&&u.upperLabelHeight);var X=d.getModel("emphasis"),Y=X.get("focus"),J=X.get("blurScope"),te=X.get("disabled"),de=Y==="ancestor"?o.getAncestorsIndices():Y==="descendant"?o.getDescendantIndices():Y;if(D)qf(j)&&hd(j,!1),q&&(hd(q,!te),h.setItemGraphicEl(o.dataIndex,q),GC(q,de,J));else{var ue=Se("content",jq,c,dCe);ue&&_e(j,ue),q.disableMorphing=!0,q&&qf(q)&&hd(q,!1),hd(j,!te),h.setItemGraphicEl(o.dataIndex,j),GC(j,de,J)}return j;function ve(dt,tt,ht){var pt=Pt(tt);if(pt.dataIndex=o.dataIndex,pt.seriesIndex=i.seriesIndex,tt.setShape({x:0,y:0,width:f,height:m,r:k}),g)Re(tt);else{tt.invisible=!1;var Je=o.getVisual("style"),Ie=Je.stroke,Bi=qq(B);Bi.fill=Ie;var _t=Fm(F);_t.fill=F.get("borderColor");var It=Fm(H);It.fill=H.get("borderColor");var Ct=Fm(U);if(Ct.fill=U.get("borderColor"),ht){var Xt=f-2*y;Oe(tt,Ie,Je.opacity,{x:y,y:0,width:Xt,height:E})}else tt.removeTextContent();tt.setStyle(Bi),tt.ensureState("emphasis").style=_t,tt.ensureState("blur").style=It,tt.ensureState("select").style=Ct,bu(tt)}dt.add(tt)}function _e(dt,tt){var ht=Pt(tt);ht.dataIndex=o.dataIndex,ht.seriesIndex=i.seriesIndex;var pt=Math.max(f-2*y,0),Je=Math.max(m-2*y,0);if(tt.culling=!0,tt.setShape({x:y,y,width:pt,height:Je,r:k}),g)Re(tt);else{tt.invisible=!1;var Ie=o.getVisual("style"),Bi=Ie.fill,_t=qq(B);_t.fill=Bi,_t.decal=Ie.decal;var It=Fm(F),Ct=Fm(H),Xt=Fm(U);Oe(tt,Bi,Ie.opacity,null),tt.setStyle(_t),tt.ensureState("emphasis").style=It,tt.ensureState("blur").style=Ct,tt.ensureState("select").style=Xt,bu(tt)}dt.add(tt)}function Re(dt){!dt.invisible&&a.push(dt)}function Oe(dt,tt,ht,pt){var Je=d.getModel(pt?Yq:Xq),Ie=kn(d.get("name"),null),Bi=Je.getShallow("show");fn(dt,Kr(d,pt?Yq:Xq),{defaultText:Bi?Ie:null,inheritColor:tt,defaultOpacity:ht,labelFetcher:i,labelDataIndex:o.dataIndex});var _t=dt.getTextContent();if(_t){var It=_t.style,Ct=e0(It.padding||0);pt&&(dt.setTextConfig({layoutRect:pt}),_t.disableLabelLayout=!0),_t.beforeUpdate=function(){var Oi=Math.max((pt?pt.width:dt.shape.width)-Ct[1]-Ct[3],0),ae=Math.max((pt?pt.height:dt.shape.height)-Ct[0]-Ct[2],0);(It.width!==Oi||It.height!==ae)&&_t.setStyle({width:Oi,height:ae})},It.truncateMinChar=2,It.lineOverflow="truncate",Te(It,pt,u);var Xt=_t.getState("emphasis");Te(Xt?Xt.style:null,pt,u)}}function Te(dt,tt,ht){var pt=dt?dt.text:null;if(!tt&&ht.isLeafRoot&&pt!=null){var Je=i.get("drillDownIcon",!0);dt.text=Je?Je+" "+pt:pt}}function Se(dt,tt,ht,pt){var Je=b!=null&&t[dt][b],Ie=n[dt];return Je?(t[dt][b]=null,nt(Ie,Je)):g||(Je=new tt,Je instanceof Da&&(Je.z2=ACe(ht,pt)),rt(Ie,Je)),e[dt][x]=Je}function nt(dt,tt){var ht=dt[x]={};tt instanceof OF?(ht.oldX=tt.x,ht.oldY=tt.y):ht.oldShape=Ce({},tt.shape)}function rt(dt,tt){var ht=dt[x]={},pt=o.parentNode,Je=tt instanceof xt;if(pt&&(!r||r.direction==="drillDown")){var Ie=0,Bi=0,_t=n.background[pt.getRawIndex()];!r&&_t&&_t.oldShape&&(Ie=_t.oldShape.width,Bi=_t.oldShape.height),Je?(ht.oldX=0,ht.oldY=Bi):ht.oldShape={x:Ie,y:Bi,width:0,height:0}}ht.fadein=!Je}}function ACe(i,e){return i*uCe+e}var Zq=fCe;var I_=W,mCe=yt,dT=-1,kF=function(){function i(e){var t=e.mappingMethod,r=e.type,n=this.option=Tt(e);this.type=r,this.mappingMethod=t,this._normalizeData=yCe[t];var a=i.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(FF(n),gCe(n)):t==="category"?n.categories?vCe(n):FF(n,!0):(In(t!=="linear"||n.dataExtent),FF(n))}return i.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},i.prototype.getNormalizer=function(){return st(this._normalizeData,this)},i.listVisualTypes=function(){return si(i.visualHandlers)},i.isValidType=function(e){return i.visualHandlers.hasOwnProperty(e)},i.eachVisual=function(e,t,r){yt(e)?W(e,t,r):t.call(r,e)},i.mapVisual=function(e,t,r){var n,a=Ee(e)?[]:yt(e)?{}:(n=!0,null);return i.eachVisual(e,function(o,s){var l=t.call(r,o,s);n?a=l:a[s]=l}),a},i.retrieveVisuals=function(e){var t={},r;return e&&I_(i.visualHandlers,function(n,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},i.prepareVisualTypes=function(e){if(Ee(e))e=e.slice();else if(mCe(e)){var t=[];I_(e,function(r,n){t.push(n)}),e=t}else return[];return e.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},i.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},i.findPieceIndex=function(e,t,r){for(var n,a=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||Ye(l)&&l===e+"")return o;r&&d(l,o)}}for(var o=0,s=t.length;o<s;o++){var c=t[o],u=c.interval,h=c.close;if(u){if(u[0]===-1/0){if(hT(h[1],e,u[1]))return o}else if(u[1]===1/0){if(hT(h[0],u[0],e))return o}else if(hT(h[0],u[0],e)&&hT(h[1],e,u[1]))return o;r&&d(u[0],o),r&&d(u[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:n;function d(f,m){var y=Math.abs(f-e);y<a&&(a=y,n=m)}},i.visualHandlers={color:{applyVisual:T_("color"),getColorMapper:function(){var e=this.option;return st(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),M_.call(this,t)}:function(t,r,n){var a=!!n;return!r&&(t=this._normalizeData(t)),n=lC(t,e.parsedVisual,n),a?n:Mc(n,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Mc(lC(e,this.option.parsedVisual),"rgba")},category:M_,piecewise:function(e,t){var r=UF.call(this,t);return r==null&&(r=Mc(lC(e,this.option.parsedVisual),"rgba")),r},fixed:Nm}},colorHue:uT(function(e,t){return VA(e,t)}),colorSaturation:uT(function(e,t){return VA(e,null,t)}),colorLightness:uT(function(e,t){return VA(e,null,null,t)}),colorAlpha:uT(function(e,t){return HA(e,t)}),decal:{applyVisual:T_("decal"),_normalizedToVisual:{linear:null,category:M_,piecewise:null,fixed:null}},opacity:{applyVisual:T_("opacity"),_normalizedToVisual:NF([0,1])},liftZ:{applyVisual:T_("liftZ"),_normalizedToVisual:{linear:Nm,category:Nm,piecewise:Nm,fixed:Nm}},symbol:{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("symbol",n)},_normalizedToVisual:{linear:Jq,category:M_,piecewise:function(e,t){var r=UF.call(this,t);return r==null&&(r=Jq.call(this,e)),r},fixed:Nm}},symbolSize:{applyVisual:T_("symbolSize"),_normalizedToVisual:NF([0,1])}},i}();function gCe(i){var e=i.pieceList;i.hasSpecialVisual=!1,W(e,function(t,r){t.originIndex=r,t.visual!=null&&(i.hasSpecialVisual=!0)})}function vCe(i){var e=i.categories,t=i.categoryMap={},r=i.visual;if(I_(e,function(o,s){t[o]=s}),!Ee(r)){var n=[];yt(r)?I_(r,function(o,s){var l=t[s];n[l??dT]=o}):n[dT]=r,r=$q(i,n)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function FF(i,e){var t=i.visual,r=[];yt(t)?I_(t,function(a){r.push(a)}):t!=null&&r.push(t);var n={color:1,symbol:1};!e&&r.length===1&&!n.hasOwnProperty(i.type)&&(r[1]=r[0]),$q(i,r)}function uT(i){return{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("color",i(t("color"),n))},_normalizedToVisual:NF([0,1])}}function Jq(i){var e=this.option.visual;return e[Math.round(yr(i,[0,1],[0,e.length-1],!0))]||{}}function T_(i){return function(e,t,r){r(i,this.mapValueToVisual(e))}}function M_(i){var e=this.option.visual;return e[this.option.loop&&i!==dT?i%e.length:i]}function Nm(){return this.option.visual[0]}function NF(i){return{linear:function(e){return yr(e,i,this.option.visual,!0)},category:M_,piecewise:function(e,t){var r=UF.call(this,t);return r==null&&(r=yr(e,i,this.option.visual,!0)),r},fixed:Nm}}function UF(i){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=kF.findPieceIndex(i,t),n=t[r];if(n&&n.visual)return n.visual[this.type]}}function $q(i,e){return i.visual=e,i.type==="color"&&(i.parsedVisual=Me(e,function(t){var r=Uo(t);return r||[0,0,0,1]})),e}var yCe={linear:function(i){return yr(i,this.option.dataExtent,[0,1],!0)},piecewise:function(i){var e=this.option.pieceList,t=kF.findPieceIndex(i,e,!0);if(t!=null)return yr(t,[0,e.length-1],[0,1],!0)},category:function(i){var e=this.option.categories?this.option.categoryMap[i]:i;return e??dT},fixed:hn};function hT(i,e,t){return i?e<=t:e<t}var Ta=kF;var xCe="itemStyle",tZ=$t(),iZ={seriesType:"treemap",reset:function(i){var e=i.getData().tree,t=e.root;t.isRemoved()||rZ(t,{},i.getViewRoot().getAncestors(),i)}};function rZ(i,e,t,r){var n=i.getModel(),a=i.getLayout(),o=i.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=n.getModel(xCe),l=_Ce(s,e,r),c=o.ensureUniqueItemVisual(i.dataIndex,"style"),u=s.get("borderColor"),h=s.get("borderColorSaturation"),d;h!=null&&(d=eZ(l),u=wCe(h,d)),c.stroke=u;var f=i.viewChildren;if(!f||!f.length)d=eZ(l),c.fill=d;else{var m=bCe(i,n,a,s,l,f);W(f,function(y,g){if(y.depth>=t.length||y===t[y.depth]){var x=SCe(n,l,y,g,m,r);rZ(y,x,t,r)}})}}}function _Ce(i,e,t){var r=Ce({},e),n=t.designatedVisualItemStyle;return W(["color","colorAlpha","colorSaturation"],function(a){n[a]=e[a];var o=i.get(a);n[a]=null,o!=null&&(r[a]=o)}),r}function eZ(i){var e=zF(i,"color");if(e){var t=zF(i,"colorAlpha"),r=zF(i,"colorSaturation");return r&&(e=VA(e,null,null,r)),t&&(e=HA(e,t)),e}}function wCe(i,e){return e!=null?VA(e,null,null,i):null}function zF(i,e){var t=i[e];if(t!=null&&t!=="none")return t}function bCe(i,e,t,r,n,a){if(!(!a||!a.length)){var o=VF(e,"color")||n.color!=null&&n.color!=="none"&&(VF(e,"colorAlpha")||VF(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),c=t.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),h={type:o.name,dataExtent:c,visual:o.range};h.type==="color"&&(u==="index"||u==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new Ta(h);return tZ(d).drColorMappingBy=u,d}}}function VF(i,e){var t=i.get(e);return Ee(t)&&t.length?{name:e,range:t}:null}function SCe(i,e,t,r,n,a){var o=Ce({},e);if(n){var s=n.type,l=s==="color"&&tZ(n).drColorMappingBy,c=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(i.get("visualDimension"));o[s]=n.mapValueToVisual(c)}return o}var B_=Math.max,fT=Math.min,nZ=Mn,HF=W,oZ=["itemStyle","borderWidth"],CCe=["itemStyle","gapWidth"],ECe=["upperLabel","show"],TCe=["upperLabel","height"],sZ={seriesType:"treemap",reset:function(i,e,t,r){var n=t.getWidth(),a=t.getHeight(),o=i.option,s=Fr(i.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],c=ot(nZ(s.width,l[0]),n),u=ot(nZ(s.height,l[1]),a),h=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],f=Td(r,d,i),m=h==="treemapRender"||h==="treemapMove"?r.rootRect:null,y=i.getViewRoot(),g=IF(y);if(h!=="treemapMove"){var x=h==="treemapZoomToNode"?PCe(i,f,y,c,u):m?[m.width,m.height]:[c,u],b=o.sort;b&&b!=="asc"&&b!=="desc"&&(b="desc");var S={squareRatio:o.squareRatio,sort:b,leafDepth:o.leafDepth};y.hostTree.clearLayouts();var E={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};y.setLayout(E),lZ(y,S,!1,0),E=y.getLayout(),HF(g,function(B,F){var H=(g[F+1]||y).getValue();B.setLayout(Ce({dataExtent:[H,H],borderWidth:0,upperHeight:0},E))})}var D=i.getData().tree.root;D.setLayout(LCe(s,m,f),!0),i.setLayoutInfo(s),cZ(D,new Ht(-s.x,-s.y,n,a),g,y,0)}};function lZ(i,e,t,r){var n,a;if(!i.isRemoved()){var o=i.getLayout();n=o.width,a=o.height;var s=i.getModel(),l=s.get(oZ),c=s.get(CCe)/2,u=uZ(s),h=Math.max(l,u),d=l-c,f=h-c;i.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:u},!0),n=B_(n-2*d,0),a=B_(a-d-f,0);var m=n*a,y=MCe(i,s,m,e,t,r);if(y.length){var g={x:d,y:f,width:n,height:a},x=fT(n,a),b=1/0,S=[];S.area=0;for(var E=0,D=y.length;E<D;){var B=y[E];S.push(B),S.area+=B.getLayout().area;var F=RCe(S,x,e.squareRatio);F<=b?(E++,b=F):(S.area-=S.pop().getLayout().area,aZ(S,x,g,c,!1),x=fT(g.width,g.height),S.length=S.area=0,b=1/0)}if(S.length&&aZ(S,x,g,c,!0),!t){var H=s.get("childrenVisibleMin");H!=null&&m<H&&(t=!0)}for(var E=0,D=y.length;E<D;E++)lZ(y[E],e,t,r+1)}}}function MCe(i,e,t,r,n,a){var o=i.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(n&&!l)return i.viewChildren=[];o=Xi(o,function(f){return!f.isRemoved()}),BCe(o,s);var c=DCe(e,o,s);if(c.sum===0)return i.viewChildren=[];if(c.sum=ICe(e,t,c.sum,s,o),c.sum===0)return i.viewChildren=[];for(var u=0,h=o.length;u<h;u++){var d=o[u].getValue()/c.sum*t;o[u].setLayout({area:d})}return l&&(o.length&&i.setLayout({isLeafRoot:!0},!0),o.length=0),i.viewChildren=o,i.setLayout({dataExtent:c.dataExtent},!0),o}function ICe(i,e,t,r,n){if(!r)return t;for(var a=i.get("visibleMin"),o=n.length,s=o,l=o-1;l>=0;l--){var c=n[r==="asc"?o-l-1:l].getValue();c/t*e<a&&(s=l,t-=c)}return r==="asc"?n.splice(0,o-s):n.splice(s,o-s),t}function BCe(i,e){return e&&i.sort(function(t,r){var n=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return n===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:n}),i}function DCe(i,e,t){for(var r=0,n=0,a=e.length;n<a;n++)r+=e[n].getValue();var o=i.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],HF(e,function(l){var c=l.getValue(o);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:r,dataExtent:s}}function RCe(i,e,t){for(var r=0,n=1/0,a=0,o=void 0,s=i.length;a<s;a++)o=i[a].getLayout().area,o&&(o<n&&(n=o),o>r&&(r=o));var l=i.area*i.area,c=e*e*t;return l?B_(c*r/l,l/(c*n)):1/0}function aZ(i,e,t,r,n){var a=e===t.width?0:1,o=1-a,s=["x","y"],l=["width","height"],c=t[s[a]],u=e?i.area/e:0;(n||u>t[l[o]])&&(u=t[l[o]]);for(var h=0,d=i.length;h<d;h++){var f=i[h],m={},y=u?f.getLayout().area/u:0,g=m[l[o]]=B_(u-2*r,0),x=t[s[a]]+t[l[a]]-c,b=h===d-1||x<y?x:y,S=m[l[a]]=B_(b-2*r,0);m[s[o]]=t[s[o]]+fT(r,g/2),m[s[a]]=c+fT(r,S/2),c+=b,f.setLayout(m,!0)}t[s[o]]+=u,t[l[o]]-=u}function PCe(i,e,t,r,n){var a=(e||{}).node,o=[r,n];if(!a||a===t)return o;for(var s,l=r*n,c=l*i.option.zoomToNodeRatio;s=a.parentNode;){for(var u=0,h=s.children,d=0,f=h.length;d<f;d++)u+=h[d].getValue();var m=a.getValue();if(m===0)return o;c*=u/m;var y=s.getModel(),g=y.get(oZ),x=Math.max(g,uZ(y));c+=4*g*g+(3*g+x)*Math.pow(c,.5),c>BP&&(c=BP),a=s}c<l&&(c=l);var b=Math.pow(c/l,.5);return[r*b,n*b]}function LCe(i,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var n=t.node,a=n.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=n;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:i.width/2-o[0],y:i.height/2-o[1]}}function cZ(i,e,t,r,n){var a=i.getLayout(),o=t[n],s=o&&o===i;if(!(o&&!s||n===t.length&&i!==r)){i.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new Ht(e.x-a.x,e.y-a.y,e.width,e.height);HF(i.viewChildren||[],function(c){cZ(c,l,t,r,n+1)})}}function uZ(i){return i.get(ECe)?i.get(TCe):0}function QF(i){i.registerSeriesModel(Hq),i.registerChartView(Zq),i.registerVisual(iZ),i.registerLayout(sZ),zq(i)}function GF(i){var e=i.findComponents({mainType:"legend"});!e||!e.length||i.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getGraph(),a=n.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),c=l.getShallow("category");if(c!=null){mi(c)&&(c=o[c]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(c))return!1}return!0})})}function WF(i){var e={};i.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t.getColorFromPalette(s,e)),r.setItemVisual(o,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],h=0;h<u.length;h++){var d=l.getShallow(u[h],!0);d!=null&&r.setItemVisual(o,u[h],d)}}),r.count()&&n.each(function(o){var s=n.getItemModel(o),l=s.getShallow("category");if(l!=null){Ye(l)&&(l=a["ec-"+l]);var c=r.getItemVisual(l,"style"),u=n.ensureUniqueItemVisual(o,"style");Ce(u,c);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)n.setItemVisual(o,h[d],r.getItemVisual(l,h[d]))}})})}function pT(i){return i instanceof Array||(i=[i,i]),i}function jF(i){i.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),n=pT(e.get("edgeSymbol")),a=pT(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=t.getEdgeByIndex(o),c=pT(s.getShallow("symbol",!0)),u=pT(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(o,"style");switch(Ce(d,h),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var KF="-->",AT=function(i){return i.get("autoCurveness")||null},hZ=function(i,e){var t=AT(i),r=20,n=[];if(mi(t))r=t;else if(Ee(t)){i.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;n=[];for(var o=0;o<a;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));i.__curvenessList=n},D_=function(i,e,t){var r=[i.id,i.dataIndex].join("."),n=[e.id,e.dataIndex].join(".");return[t.uid,r,n].join(KF)},dZ=function(i){var e=i.split(KF);return[e[0],e[2],e[1]].join(KF)},OCe=function(i,e){var t=D_(i.node1,i.node2,e);return e.__edgeMap[t]},FCe=function(i,e){var t=XF(D_(i.node1,i.node2,e),e),r=XF(D_(i.node2,i.node1,e),e);return t+r},XF=function(i,e){var t=e.__edgeMap;return t[i]?t[i].length:0};function fZ(i){AT(i)&&(i.__curvenessList=[],i.__edgeMap={},hZ(i))}function pZ(i,e,t,r){if(AT(t)){var n=D_(i,e,t),a=t.__edgeMap,o=a[dZ(n)];a[n]&&!o?a[n].isForward=!0:o&&a[n]&&(o.isForward=!0,a[n].isForward=!1),a[n]=a[n]||[],a[n].push(r)}}function ov(i,e,t,r){var n=AT(e),a=Ee(n);if(!n)return null;var o=OCe(i,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var c=FCe(i,e);hZ(e,c),i.lineStyle=i.lineStyle||{};var u=D_(i.node1,i.node2,e),h=e.__curvenessList,d=a||c%2?0:1;if(o.isForward)return h[d+s];var f=dZ(u),m=XF(f,e),y=h[s+m+d];return r?a?n&&n[0]===0?(m+d)%2?y:-y:((m%2?0:1)+d)%2?y:-y:(m+d)%2?y:-y:h[s+m+d]}function mT(i){var e=i.coordinateSystem;if(!(e&&e.type!=="view")){var t=i.getGraph();t.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),R_(t,i)}}function R_(i,e){i.eachEdge(function(t,r){var n=wo(t.getModel().get(["lineStyle","curveness"]),-ov(t,e,r,!0),0),a=ll(t.node1.getLayout()),o=ll(t.node2.getLayout()),s=[a,o];+n&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*n,(a[1]+o[1])/2-(o[0]-a[0])*n]),t.setLayout(s)})}function YF(i,e){i.eachSeriesByType("graph",function(t){var r=t.get("layout"),n=t.coordinateSystem;if(n&&n.type!=="view"){var a=t.getData(),o=[];W(n.dimensions,function(d){o=o.concat(a.mapDimensionsAll(d))});for(var s=0;s<a.count();s++){for(var l=[],c=!1,u=0;u<o.length;u++){var h=a.get(o[u],s);isNaN(h)||(c=!0),l.push(h)}c?a.setItemLayout(s,n.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}R_(a.graph,t)}else(!r||r==="none")&&mT(t)})}function Um(i){var e=i.coordinateSystem;if(e.type!=="view")return 1;var t=i.option.nodeScaleRatio,r=e.scaleX,n=e.getZoom(),a=(n-1)*t+1;return a/r}function km(i){var e=i.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var AZ=Math.PI,qF=[];function sv(i,e,t,r){var n=i.coordinateSystem;if(!(n&&n.type!=="view")){var a=n.getBoundingRect(),o=i.getData(),s=o.graph,l=a.width/2+a.x,c=a.height/2+a.y,u=Math.min(a.width,a.height)/2,h=o.count();if(o.setLayout({cx:l,cy:c}),!!h){if(t){var d=n.pointToData(r),f=d[0],m=d[1],y=[f-l,m-c];wc(y,y),i0(y,y,u),t.setLayout([l+y[0],c+y[1]],!0);var g=i.get(["circular","rotateLabel"]);ZF(t,g,l,c)}NCe[e](i,s,o,u,l,c,h),s.eachEdge(function(x,b){var S=wo(x.getModel().get(["lineStyle","curveness"]),ov(x,i,b),0),E=ll(x.node1.getLayout()),D=ll(x.node2.getLayout()),B,F=(E[0]+D[0])/2,H=(E[1]+D[1])/2;+S&&(S*=3,B=[l*S+F*(1-S),c*S+H*(1-S)]),x.setLayout([E,D,B])})}}}var NCe={value:function(i,e,t,r,n,a,o){var s=0,l=t.getSum("value"),c=Math.PI*2/(l||o);e.eachNode(function(u){var h=u.getValue("value"),d=c*(l?h:1)/2;s+=d,u.setLayout([r*Math.cos(s)+n,r*Math.sin(s)+a]),s+=d})},symbolSize:function(i,e,t,r,n,a,o){var s=0;qF.length=o;var l=Um(i);e.eachNode(function(h){var d=km(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/r);isNaN(f)&&(f=AZ/2),qF[h.dataIndex]=f,s+=f*2});var c=(2*AZ-s)/o/2,u=0;e.eachNode(function(h){var d=c+qF[h.dataIndex];u+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(u)+n,r*Math.sin(u)+a]),u+=d})}};function ZF(i,e,t,r){var n=i.getGraphicEl();if(n){var a=i.getModel(),o=a.get(["label","rotate"])||0,s=n.getSymbolPath();if(e){var l=i.getLayout(),c=Math.atan2(l[1]-r,l[0]-t);c<0&&(c=Math.PI*2+c);var u=l[0]<t;u&&(c=c-Math.PI);var h=u?"left":"right";s.setTextConfig({rotation:-c,position:h,origin:"center"});var d=s.ensureState("emphasis");Ce(d.textConfig||(d.textConfig={}),{position:h})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function JF(i){i.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&sv(e,"symbolSize")})}var lv=ky;function mZ(i,e,t){for(var r=i,n=e,a=t.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],c=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var h=r[u];h.p||(h.p=ch(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=ll(h.p),h.edges=null}var d=t.friction==null?.6:t.friction,f=d,m,y;return{warmUp:function(){f=d*.8},setFixed:function(g){r[g].fixed=!0},setUnfixed:function(g){r[g].fixed=!1},beforeStep:function(g){m=g},afterStep:function(g){y=g},step:function(g){m&&m(r,n);for(var x=[],b=r.length,S=0;S<n.length;S++){var E=n[S];if(!E.ignoreForceLayout){var D=E.n1,B=E.n2;yu(x,B.p,D.p);var F=GS(x)-E.d,H=B.w/(D.w+B.w);isNaN(H)&&(H=0),wc(x,x),!D.fixed&&lv(D.p,D.p,x,H*F*f),!B.fixed&&lv(B.p,B.p,x,-(1-H)*F*f)}}for(var S=0;S<b;S++){var U=r[S];U.fixed||(yu(x,l,U.p),lv(U.p,U.p,x,c*f))}for(var S=0;S<b;S++)for(var D=r[S],k=S+1;k<b;k++){var B=r[k];yu(x,B.p,D.p);var F=GS(x);F===0&&(cQ(x,Math.random()-.5,Math.random()-.5),F=1);var j=(D.rep+B.rep)/F/F;!D.fixed&&lv(D.pp,D.pp,x,j),!B.fixed&&lv(B.pp,B.pp,x,-j)}for(var q=[],S=0;S<b;S++){var U=r[S];U.fixed||(yu(q,U.p,U.pp),lv(U.p,U.p,q,f),So(U.pp,U.p))}f=f*.992;var X=f<.01;y&&y(r,n,X),g&&g(X)}}}function $F(i){i.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},n=e.getGraph(),a=n.data,o=n.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(S){var E=a.getId(S);a.setItemLayout(S,r[E]||[NaN,NaN])}):!l||l==="none"?mT(e):l==="circular"&&sv(e,"value");var c=a.getDataExtent("value"),u=o.getDataExtent("value"),h=s.get("repulsion"),d=s.get("edgeLength"),f=Ee(h)?h:[h,h],m=Ee(d)?d:[d,d];m=[m[1],m[0]];var y=a.mapArray("value",function(S,E){var D=a.getItemLayout(E),B=yr(S,c,f);return isNaN(B)&&(B=(f[0]+f[1])/2),{w:B,rep:B,fixed:a.getItemModel(E).get("fixed"),p:!D||isNaN(D[0])||isNaN(D[1])?null:D}}),g=o.mapArray("value",function(S,E){var D=n.getEdgeByIndex(E),B=yr(S,u,m);isNaN(B)&&(B=(m[0]+m[1])/2);var F=D.getModel(),H=wo(D.getModel().get(["lineStyle","curveness"]),-ov(D,e,E,!0),0);return{n1:y[D.node1.dataIndex],n2:y[D.node2.dataIndex],d:B,curveness:H,ignoreForceLayout:F.get("ignoreForceLayout")}}),x=t.getBoundingRect(),b=mZ(y,g,{rect:x,gravity:s.get("gravity"),friction:s.get("friction")});b.beforeStep(function(S,E){for(var D=0,B=S.length;D<B;D++)S[D].fixed&&So(S[D].p,n.getNodeByIndex(D).getLayout())}),b.afterStep(function(S,E,D){for(var B=0,F=S.length;B<F;B++)S[B].fixed||n.getNodeByIndex(B).setLayout(S[B].p),r[a.getId(B)]=S[B].p;for(var B=0,F=E.length;B<F;B++){var H=E[B],U=n.getEdgeByIndex(B),k=H.n1.p,j=H.n2.p,q=U.getLayout();q=q?q.slice():[],q[0]=q[0]||[],q[1]=q[1]||[],So(q[0],k),So(q[1],j),+H.curveness&&(q[2]=[(k[0]+j[0])/2-(k[1]-j[1])*H.curveness,(k[1]+j[1])/2-(j[0]-k[0])*H.curveness]),U.setLayout(q)}}),e.forceLayout=b,e.preservedPoints=r,b.step()}else e.forceLayout=null})}function UCe(i,e,t){var r=Ce(i.getBoxLayoutParams(),{aspect:t});return Fr(r,{width:e.getWidth(),height:e.getHeight()})}function eN(i,e){var t=[];return i.eachSeriesByType("graph",function(r){var n=r.get("coordinateSystem");if(!n||n==="view"){var a=r.getData(),o=a.mapArray(function(g){var x=a.getItemModel(g);return[+x.get("x"),+x.get("y")]}),s=[],l=[];em(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=UCe(r,e,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var h=l[0]-s[0],d=l[1]-s[1],f=u.width,m=u.height,y=r.coordinateSystem=new Ed;y.zoomLimit=r.get("scaleLimit"),y.setBoundingRect(s[0],s[1],h,d),y.setViewRect(u.x,u.y,f,m),y.setCenter(r.get("center"),e),y.setZoom(r.get("zoom")),t.push(y)}}),t}var gZ=Xn.prototype,tN=um.prototype,vZ=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return i}(),gct=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(vZ);function iN(i){return isNaN(+i.cpx1)||isNaN(+i.cpy1)}var kCe=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new vZ},e.prototype.buildPath=function(t,r){iN(r)?gZ.buildPath.call(this,t,r):tN.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return iN(this.shape)?gZ.pointAt.call(this,t):tN.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,n=iN(r)?[r.x2-r.x1,r.y2-r.y1]:tN.tangentAt.call(this,t);return wc(n,n)},e}(Kt),yZ=kCe;var rN=["fromSymbol","toSymbol"];function xZ(i){return"_"+i+"Type"}function _Z(i,e,t){var r=e.getItemVisual(t,i);if(!r||r==="none")return r;var n=e.getItemVisual(t,i+"Size"),a=e.getItemVisual(t,i+"Rotate"),o=e.getItemVisual(t,i+"Offset"),s=e.getItemVisual(t,i+"KeepAspect"),l=Pu(n),c=tc(o||0,l);return r+l+c+(a||"")+(s||"")}function wZ(i,e,t){var r=e.getItemVisual(t,i);if(!(!r||r==="none")){var n=e.getItemVisual(t,i+"Size"),a=e.getItemVisual(t,i+"Rotate"),o=e.getItemVisual(t,i+"Offset"),s=e.getItemVisual(t,i+"KeepAspect"),l=Pu(n),c=tc(o||0,l),u=Nr(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,u.name=i,u}}function zCe(i){var e=new yZ({name:"line",subPixelOptimize:!0});return nN(e.shape,i),e}function nN(i,e){i.x1=e[0][0],i.y1=e[0][1],i.x2=e[1][0],i.y2=e[1][1],i.percent=1;var t=e[2];t?(i.cpx1=t[0],i.cpy1=t[1]):(i.cpx1=NaN,i.cpy1=NaN)}var VCe=function(i){le(e,i);function e(t,r,n){var a=i.call(this)||this;return a._createLine(t,r,n),a}return e.prototype._createLine=function(t,r,n){var a=t.hostModel,o=t.getItemLayout(r),s=zCe(o);s.shape.percent=0,Ar(s,{shape:{percent:1}},a,r),this.add(s),W(rN,function(l){var c=wZ(l,t,r);this.add(c),this[xZ(l)]=_Z(l,t,r)},this),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var a=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};nN(l.shape,s),Si(o,l,a,r),W(rN,function(c){var u=_Z(c,t,r),h=xZ(c);if(this[h]!==u){this.remove(this.childOfName(c));var d=wZ(c,t,r);this.add(d)}this[h]=u},this),this._updateCommonStl(t,r,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,n){var a=t.hostModel,o=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,u=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,d=n&&n.focus,f=n&&n.blurScope;if(!n||t.hasItemOption){var m=t.getItemModel(r),y=m.getModel("emphasis");s=y.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),c=m.getModel(["select","lineStyle"]).getLineStyle(),h=y.get("disabled"),d=y.get("focus"),f=y.get("blurScope"),u=Kr(m)}var g=t.getItemVisual(r,"style"),x=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=c,W(rN,function(B){var F=this.childOfName(B);if(F){F.setColor(x),F.style.opacity=g.opacity;for(var H=0;H<uo.length;H++){var U=uo[H],k=o.getState(U);if(k){var j=k.style||{},q=F.ensureState(U),X=q.style||(q.style={});j.stroke!=null&&(X[F.__isEmptyBrush?"stroke":"fill"]=j.stroke),j.opacity!=null&&(X.opacity=j.opacity)}}F.markRedraw()}},this);var b=a.getRawValue(r);fn(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(B,F){return a.getFormattedLabel(B,F,t.dataType)}},inheritColor:x||"#000",defaultOpacity:g.opacity,defaultText:(b==null?t.getName(r):isFinite(b)?dn(b):b)+""});var S=this.getTextContent();if(S){var E=u.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=E.get("position")||"middle";var D=E.get("distance");Ee(D)||(D=[D,D]),S.__labelDistance=D}this.setTextConfig({position:null,local:!0,inside:!1}),pr(this,d,f,h)},e.prototype.highlight=function(){_s(this)},e.prototype.downplay=function(){ws(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");nN(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!n&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),h=l.pointAt(c),d=yu([],h,u);wc(d,d);function f(k,j){var q=k.__specifiedRotation;if(q==null){var X=l.tangentAt(j);k.attr("rotation",(j===1?-1:1)*Math.PI/2-Math.atan2(X[1],X[0]))}else k.attr("rotation",q)}if(r&&(r.setPosition(u),f(r,0),r.scaleX=r.scaleY=o*c,r.markRedraw()),n&&(n.setPosition(h),f(n,1),n.scaleX=n.scaleY=o*c,n.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,y=void 0,g=a.__labelDistance,x=g[0]*o,b=g[1]*o,S=c/2,E=l.tangentAt(S),D=[E[1],-E[0]],B=l.pointAt(S);D[1]>0&&(D[0]=-D[0],D[1]=-D[1]);var F=E[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var H=-Math.atan2(E[1],E[0]);h[0]<u[0]&&(H=Math.PI+H),a.rotation=H}var U=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":U=-b,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":U=b,y="top";break;default:U=0,y="middle"}switch(a.__position){case"end":a.x=d[0]*x+h[0],a.y=d[1]*b+h[1],m=d[0]>.8?"left":d[0]<-.8?"right":"center",y=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*x+u[0],a.y=-d[1]*b+u[1],m=d[0]>.8?"right":d[0]<-.8?"left":"center",y=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=x*F+u[0],a.y=u[1]+U,m=E[0]<0?"right":"left",a.originX=-x*F,a.originY=-U;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=B[0],a.y=B[1]+U,m="center",a.originY=-U;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-x*F+h[0],a.y=h[1]+U,m=E[0]>=0?"right":"left",a.originX=x*F,a.originY=-U;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||y,align:a.__align||m})}},e}(xt),cv=VCe;var HCe=function(){function i(e){this.group=new xt,this._LineCtor=e||cv}return i.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,n=r.group,a=r._lineData;r._lineData=e,a||n.removeAll();var o=bZ(e);e.diff(a).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(a,e,l,s,o)}).remove(function(s){n.remove(a.getItemGraphicEl(s))}).execute()},i.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},i.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=bZ(e),this._lineData=null,this.group.removeAll()},i.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!QCe(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var a=t.getItemLayout(n);if(aN(a)){var o=new this._LineCtor(t,n,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},i.prototype.remove=function(){this.group.removeAll()},i.prototype.eachRendered=function(e){Hs(this._progressiveEls||this.group,e)},i.prototype._doAdd=function(e,t,r){var n=e.getItemLayout(t);if(aN(n)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},i.prototype._doUpdate=function(e,t,r,n,a){var o=e.getItemGraphicEl(r);if(!aN(t.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(t,n,a):o=new this._LineCtor(t,n,a),t.setItemGraphicEl(n,o),this.group.add(o)},i}();function QCe(i){return i.animators&&i.animators.length>0}function bZ(i){var e=i.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:Kr(e)}}function SZ(i){return isNaN(i[0])||isNaN(i[1])}function aN(i){return i&&!SZ(i[0])&&!SZ(i[1])}var uv=HCe;var oN=[],sN=[],lN=[],hv=Ba,cN=nd,CZ=Math.abs;function EZ(i,e,t){for(var r=i[0],n=i[1],a=i[2],o=1/0,s,l=t*t,c=.1,u=.1;u<=.9;u+=.1){oN[0]=hv(r[0],n[0],a[0],u),oN[1]=hv(r[1],n[1],a[1],u);var h=CZ(cN(oN,e)-l);h<o&&(o=h,s=u)}for(var d=0;d<32;d++){var f=s+c;sN[0]=hv(r[0],n[0],a[0],s),sN[1]=hv(r[1],n[1],a[1],s),lN[0]=hv(r[0],n[0],a[0],f),lN[1]=hv(r[1],n[1],a[1],f);var h=cN(sN,e)-l;if(CZ(h)<.01)break;var m=cN(lN,e)-l;c/=2,h<0?m>=0?s=s+c:s=s-c:m>=0?s=s-c:s=s+c}return s}function P_(i,e){var t=[],r=Uf,n=[[],[],[]],a=[[],[]],o=[];e/=2,i.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");c.__original||(c.__original=[ll(c[0]),ll(c[1])],c[2]&&c.__original.push(ll(c[2])));var d=c.__original;if(c[2]!=null){if(So(n[0],d[0]),So(n[1],d[2]),So(n[2],d[1]),u&&u!=="none"){var f=km(s.node1),m=EZ(n,d[0],f*e);r(n[0][0],n[1][0],n[2][0],m,t),n[0][0]=t[3],n[1][0]=t[4],r(n[0][1],n[1][1],n[2][1],m,t),n[0][1]=t[3],n[1][1]=t[4]}if(h&&h!=="none"){var f=km(s.node2),m=EZ(n,d[1],f*e);r(n[0][0],n[1][0],n[2][0],m,t),n[1][0]=t[1],n[2][0]=t[2],r(n[0][1],n[1][1],n[2][1],m,t),n[1][1]=t[1],n[2][1]=t[2]}So(c[0],n[0]),So(c[1],n[2]),So(c[2],n[1])}else{if(So(a[0],d[0]),So(a[1],d[1]),yu(o,a[1],a[0]),wc(o,o),u&&u!=="none"){var f=km(s.node1);ky(a[0],a[0],o,f*e)}if(h&&h!=="none"){var f=km(s.node2);ky(a[1],a[1],o,-f*e)}So(c[0],a[0]),So(c[1],a[1])}})}function TZ(i){return i.type==="view"}var GCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var n=new Mh,a=new uv,o=this.group;this._controller=new Rh(r.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(t,r,n){var a=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(TZ(o)){var u={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?c.attr(u):Si(c,u,t)}P_(t.getGraph(),Um(t));var h=t.getData();s.updateData(h);var d=t.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(t,r,n),clearTimeout(this._layoutTimeout);var f=t.forceLayout,m=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,m);var y=t.get("layout");h.graph.eachNode(function(S){var E=S.dataIndex,D=S.getGraphicEl(),B=S.getModel();if(D){D.off("drag").off("dragend");var F=B.get("draggable");F&&D.on("drag",function(U){switch(y){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,m),f.setFixed(E),h.setItemLayout(E,[D.x,D.y]);break;case"circular":h.setItemLayout(E,[D.x,D.y]),S.setLayout({fixed:!0},!0),sv(t,"symbolSize",S,[U.offsetX,U.offsetY]),a.updateLayout(t);break;case"none":default:h.setItemLayout(E,[D.x,D.y]),R_(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){f&&f.setUnfixed(E)}),D.setDraggable(F,!!B.get("cursor"));var H=B.get(["emphasis","focus"]);H==="adjacency"&&(Pt(D).focus=S.getAdjacentDataIndices())}}),h.graph.eachEdge(function(S){var E=S.getGraphicEl(),D=S.getModel().get(["emphasis","focus"]);E&&D==="adjacency"&&(Pt(E).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var g=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),x=h.getLayout("cx"),b=h.getLayout("cy");h.graph.eachNode(function(S){ZF(S,g,x,b)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var n=this;(function a(){t.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(r?n._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(t,r,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!Ap(c,n,t)}),!TZ(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ev(s,c.dx,c.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){tv(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(),P_(t.getGraph(),Um(t)),a._lineDraw.updateLayout(),n.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),n=Um(t);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(n)})},e.prototype.updateLayout=function(t){P_(t.getGraph(),Um(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(qi),MZ=GCe;function dv(i){return"_EC_"+i}var WCe=function(){function i(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return i.prototype.isDirected=function(){return this._directed},i.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[dv(e)]){var n=new zm(e,t);return n.hostGraph=this,this.nodes.push(n),r[dv(e)]=n,n}},i.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},i.prototype.getNodeById=function(e){return this._nodesMap[dv(e)]},i.prototype.addEdge=function(e,t,r){var n=this._nodesMap,a=this._edgesMap;if(mi(e)&&(e=this.nodes[e]),mi(t)&&(t=this.nodes[t]),e instanceof zm||(e=n[dv(e)]),t instanceof zm||(t=n[dv(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new IZ(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),a[o]=s,s}},i.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},i.prototype.getEdge=function(e,t){e instanceof zm&&(e=e.id),t instanceof zm&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},i.prototype.eachNode=function(e,t){for(var r=this.nodes,n=r.length,a=0;a<n;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},i.prototype.eachEdge=function(e,t){for(var r=this.edges,n=r.length,a=0;a<n;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},i.prototype.breadthFirstTraverse=function(e,t,r,n){if(t instanceof zm||(t=this._nodesMap[dv(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(n,t,null))for(var s=[t];s.length;)for(var l=s.shift(),c=l[a],o=0;o<c.length;o++){var u=c[o],h=u.node1===l?u.node2:u.node1;if(!h.__visited){if(e.call(n,h,l))return;s.push(h),h.__visited=!0}}}},i.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,n=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(s){var l=n[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)n[t.getRawIndex(a)].dataIndex=a},i.prototype.clone=function(){for(var e=new i(this._directed),t=this.nodes,r=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(var n=0;n<r.length;n++){var a=r[n];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},i}(),zm=function(){function i(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return i.prototype.degree=function(){return this.edges.length},i.prototype.inDegree=function(){return this.inEdges.length},i.prototype.outDegree=function(){return this.outEdges.length},i.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},i.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},i.prototype.getTrajectoryDataIndices=function(){for(var e=ct(),t=ct(),r=0;r<this.edges.length;r++){var n=this.edges[r];if(!(n.dataIndex<0)){e.set(n.dataIndex,!0);for(var a=[n.node1],o=[n.node2],s=0;s<a.length;){var l=a[s];s++,t.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),a.push(l.inEdges[c].node1)}for(s=0;s<o.length;){var u=o[s];s++,t.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),o.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},i}(),IZ=function(){function i(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return i.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},i.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},i.prototype.getTrajectoryDataIndices=function(){var e=ct(),t=ct();e.set(this.dataIndex,!0);for(var r=[this.node1],n=[this.node2],a=0;a<r.length;){var o=r[a];a++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<n.length;){var l=n[a];a++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),n.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},i}();function BZ(i,e){return{getValue:function(t){var r=this[i][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[i][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[i][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[i][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[i][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[i][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[i][e].getRawIndex(this.dataIndex)}}}jr(zm,BZ("hostGraph","data"));jr(IZ,BZ("hostGraph","edgeData"));var DZ=WCe;function L_(i,e,t,r,n){for(var a=new DZ(r),o=0;o<i.length;o++)a.addNode(Mn(i[o].id,i[o].name,o),o);for(var s=[],l=[],c=0,o=0;o<e.length;o++){var u=e[o],h=u.source,d=u.target;a.addEdge(h,d,c)&&(l.push(u),s.push(Mn(kn(u.id,null),h+" > "+d)),c++)}var f=t.get("coordinateSystem"),m;if(f==="cartesian2d"||f==="polar")m=zo(i,t);else{var y=xd.get(f),g=y?y.dimensions||[]:[];qt(g,"value")<0&&g.concat(["value"]);var x=Ou(i,{coordDimensions:g,encodeDefine:t.getEncode()}).dimensions;m=new sa(x,t),m.initData(i)}var b=new sa(["value"],t);return b.initData(l,s),n&&n(m,b),lT({mainData:m,struct:a,structAttr:"graph",datas:{node:m,edge:b},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var jCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new Dh(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){i.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){i.prototype.mergeDefaultAndTheme.apply(this,arguments),ql(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],a=t.data||t.nodes||[],o=this;if(a&&n){fZ(this);var s=L_(a,n,this,!0,l);return W(s.edges,function(c){pZ(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(m){var y=o._categoriesModels,g=m.getShallow("category"),x=y[g];return x&&(x.parentModel=m.parentModel,m.parentModel=x),m});var h=ir.prototype.getModel;function d(m,y){var g=h.call(this,m,y);return g.resolveParentPath=f,g}u.wrapMethod("getItemModel",function(m){return m.resolveParentPath=f,m.getModel=d,m});function f(m){if(m&&(m[0]==="label"||m[1]==="label")){var y=m.slice();return m[0]==="label"?y[0]="edgeLabel":m[1]==="label"&&(y[1]="edgeLabel"),y}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,n){if(n==="edge"){var a=this.getData(),o=this.getDataParams(t,n),s=a.graph.getEdgeByIndex(t),l=a.getName(s.node1.dataIndex),c=a.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),wn("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var h=NE({series:this,dataIndex:t,multipleSeries:r});return h},e.prototype._updateCategoriesData=function(){var t=Me(this.option.categories||[],function(n){return n.value!=null?n:Ce({value:0},n)}),r=new sa(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return i.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(rr),RZ=jCe;var KCe={type:"graphRoam",event:"graphRoam",update:"none"};function uN(i){i.registerChartView(MZ),i.registerSeriesModel(RZ),i.registerProcessor(GF),i.registerVisual(WF),i.registerVisual(jF),i.registerLayout(YF),i.registerLayout(i.PRIORITY.VISUAL.POST_CHART_LAYOUT,JF),i.registerLayout($F),i.registerCoordinateSystem("graphView",{dimensions:Ed.dimensions,create:eN}),i.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},hn),i.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},hn),i.registerAction(KCe,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(n){var a=n.coordinateSystem,o=iv(a,e,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var XCe=function(){function i(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return i}(),YCe=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new XCe},e.prototype.buildPath=function(t,r){var n=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-n(l)*s*(s>=o/3?1:2),u=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,t.moveTo(c,u),t.lineTo(r.x+n(l)*s,r.y+a(l)*s),t.lineTo(r.x+n(r.angle)*o,r.y+a(r.angle)*o),t.lineTo(r.x-n(l)*s,r.y-a(l)*s),t.lineTo(c,u)},e}(Kt),PZ=YCe;function qCe(i,e){var t=i.get("center"),r=e.getWidth(),n=e.getHeight(),a=Math.min(r,n),o=ot(t[0],e.getWidth()),s=ot(t[1],e.getHeight()),l=ot(i.get("radius"),a/2);return{cx:o,cy:s,r:l}}function gT(i,e){var t=i==null?"":i+"";return e&&(Ye(e)?t=e.replace("{value}",t):ft(e)&&(t=e(i))),t}var ZCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),o=qCe(t,n);this._renderMain(t,r,n,a,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,n,a,o){var s=this.group,l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),d=h.get("roundCap"),f=d?J0:Ra,m=h.get("show"),y=h.getModel("lineStyle"),g=y.get("width"),x=[c,u];hx(x,!l),c=x[0],u=x[1];for(var b=u-c,S=c,E=[],D=0;m&&D<a.length;D++){var B=Math.min(Math.max(a[D][0],0),1);u=c+b*B;var F=new f({shape:{startAngle:S,endAngle:u,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-g,r:o.r},silent:!0});F.setStyle({fill:a[D][1]}),F.setStyle(y.getLineStyle(["color","width"])),E.push(F),S=u}E.reverse(),W(E,function(U){return s.add(U)});var H=function(U){if(U<=0)return a[0][1];var k;for(k=0;k<a.length;k++)if(a[k][0]>=U&&(k===0?0:a[k-1][0])<U)return a[k][1];return a[k-1][1]};this._renderTicks(t,r,n,H,o,c,u,l,g),this._renderTitleAndDetail(t,r,n,H,o),this._renderAnchor(t,o),this._renderPointer(t,r,n,H,o,c,u,l,g)},e.prototype._renderTicks=function(t,r,n,a,o,s,l,c,u){for(var h=this.group,d=o.cx,f=o.cy,m=o.r,y=+t.get("min"),g=+t.get("max"),x=t.getModel("splitLine"),b=t.getModel("axisTick"),S=t.getModel("axisLabel"),E=t.get("splitNumber"),D=b.get("splitNumber"),B=ot(x.get("length"),m),F=ot(b.get("length"),m),H=s,U=(l-s)/E,k=U/D,j=x.getModel("lineStyle").getLineStyle(),q=b.getModel("lineStyle").getLineStyle(),X=x.get("distance"),Y,J,te=0;te<=E;te++){if(Y=Math.cos(H),J=Math.sin(H),x.get("show")){var de=X?X+u:u,ue=new Xn({shape:{x1:Y*(m-de)+d,y1:J*(m-de)+f,x2:Y*(m-B-de)+d,y2:J*(m-B-de)+f},style:j,silent:!0});j.stroke==="auto"&&ue.setStyle({stroke:a(te/E)}),h.add(ue)}if(S.get("show")){var de=S.get("distance")+X,ve=gT(dn(te/E*(g-y)+y),S.get("formatter")),_e=a(te/E),Re=Y*(m-B-de)+d,Oe=J*(m-B-de)+f,Te=S.get("rotate"),Se=0;Te==="radial"?(Se=-H+2*Math.PI,Se>Math.PI/2&&(Se+=Math.PI)):Te==="tangential"?Se=-H-Math.PI/2:mi(Te)&&(Se=Te*Math.PI/180),Se===0?h.add(new yi({style:br(S,{text:ve,x:Re,y:Oe,verticalAlign:J<-.8?"top":J>.8?"bottom":"middle",align:Y<-.4?"left":Y>.4?"right":"center"},{inheritColor:_e}),silent:!0})):h.add(new yi({style:br(S,{text:ve,x:Re,y:Oe,verticalAlign:"middle",align:"center"},{inheritColor:_e}),silent:!0,originX:Re,originY:Oe,rotation:Se}))}if(b.get("show")&&te!==E){var de=b.get("distance");de=de?de+u:u;for(var nt=0;nt<=D;nt++){Y=Math.cos(H),J=Math.sin(H);var rt=new Xn({shape:{x1:Y*(m-de)+d,y1:J*(m-de)+f,x2:Y*(m-F-de)+d,y2:J*(m-F-de)+f},silent:!0,style:q});q.stroke==="auto"&&rt.setStyle({stroke:a((te+nt/D)/E)}),h.add(rt),H+=k}H-=k}else H+=U}},e.prototype._renderPointer=function(t,r,n,a,o,s,l,c,u){var h=this.group,d=this._data,f=this._progressEls,m=[],y=t.get(["pointer","show"]),g=t.getModel("progress"),x=g.get("show"),b=t.getData(),S=b.mapDimension("value"),E=+t.get("min"),D=+t.get("max"),B=[E,D],F=[s,l];function H(k,j){var q=b.getItemModel(k),X=q.getModel("pointer"),Y=ot(X.get("width"),o.r),J=ot(X.get("length"),o.r),te=t.get(["pointer","icon"]),de=X.get("offsetCenter"),ue=ot(de[0],o.r),ve=ot(de[1],o.r),_e=X.get("keepAspect"),Re;return te?Re=Nr(te,ue-Y/2,ve-J,Y,J,null,_e):Re=new PZ({shape:{angle:-Math.PI/2,width:Y,r:J,x:ue,y:ve}}),Re.rotation=-(j+Math.PI/2),Re.x=o.cx,Re.y=o.cy,Re}function U(k,j){var q=g.get("roundCap"),X=q?J0:Ra,Y=g.get("overlap"),J=Y?g.get("width"):u/b.count(),te=Y?o.r-J:o.r-(k+1)*J,de=Y?o.r:o.r-k*J,ue=new X({shape:{startAngle:s,endAngle:j,cx:o.cx,cy:o.cy,clockwise:c,r0:te,r:de}});return Y&&(ue.z2=D-b.get(S,k)%D),ue}(x||y)&&(b.diff(d).add(function(k){var j=b.get(S,k);if(y){var q=H(k,s);Ar(q,{rotation:-((isNaN(+j)?F[0]:yr(j,B,F,!0))+Math.PI/2)},t),h.add(q),b.setItemGraphicEl(k,q)}if(x){var X=U(k,s),Y=g.get("clip");Ar(X,{shape:{endAngle:yr(j,B,F,Y)}},t),h.add(X),fx(t.seriesIndex,b.dataType,k,X),m[k]=X}}).update(function(k,j){var q=b.get(S,k);if(y){var X=d.getItemGraphicEl(j),Y=X?X.rotation:s,J=H(k,Y);J.rotation=Y,Si(J,{rotation:-((isNaN(+q)?F[0]:yr(q,B,F,!0))+Math.PI/2)},t),h.add(J),b.setItemGraphicEl(k,J)}if(x){var te=f[j],de=te?te.shape.endAngle:s,ue=U(k,de),ve=g.get("clip");Si(ue,{shape:{endAngle:yr(q,B,F,ve)}},t),h.add(ue),fx(t.seriesIndex,b.dataType,k,ue),m[k]=ue}}).execute(),b.each(function(k){var j=b.getItemModel(k),q=j.getModel("emphasis"),X=q.get("focus"),Y=q.get("blurScope"),J=q.get("disabled");if(y){var te=b.getItemGraphicEl(k),de=b.getItemVisual(k,"style"),ue=de.fill;if(te instanceof yn){var ve=te.style;te.useStyle(Ce({image:ve.image,x:ve.x,y:ve.y,width:ve.width,height:ve.height},de))}else te.useStyle(de),te.type!=="pointer"&&te.setColor(ue);te.setStyle(j.getModel(["pointer","itemStyle"]).getItemStyle()),te.style.fill==="auto"&&te.setStyle("fill",a(yr(b.get(S,k),B,[0,1],!0))),te.z2EmphasisLift=0,Dn(te,j),pr(te,X,Y,J)}if(x){var _e=m[k];_e.useStyle(b.getItemVisual(k,"style")),_e.setStyle(j.getModel(["progress","itemStyle"]).getItemStyle()),_e.z2EmphasisLift=0,Dn(_e,j),pr(_e,X,Y,J)}}),this._progressEls=m)},e.prototype._renderAnchor=function(t,r){var n=t.getModel("anchor"),a=n.get("show");if(a){var o=n.get("size"),s=n.get("icon"),l=n.get("offsetCenter"),c=n.get("keepAspect"),u=Nr(s,r.cx-o/2+ot(l[0],r.r),r.cy-o/2+ot(l[1],r.r),o,o,null,c);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,n,a,o){var s=this,l=t.getData(),c=l.mapDimension("value"),u=+t.get("min"),h=+t.get("max"),d=new xt,f=[],m=[],y=t.isAnimationEnabled(),g=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(x){f[x]=new yi({silent:!0}),m[x]=new yi({silent:!0})}).update(function(x,b){f[x]=s._titleEls[b],m[x]=s._detailEls[b]}).execute(),l.each(function(x){var b=l.getItemModel(x),S=l.get(c,x),E=new xt,D=a(yr(S,[u,h],[0,1],!0)),B=b.getModel("title");if(B.get("show")){var F=B.get("offsetCenter"),H=o.cx+ot(F[0],o.r),U=o.cy+ot(F[1],o.r),k=f[x];k.attr({z2:g?0:2,style:br(B,{x:H,y:U,text:l.getName(x),align:"center",verticalAlign:"middle"},{inheritColor:D})}),E.add(k)}var j=b.getModel("detail");if(j.get("show")){var q=j.get("offsetCenter"),X=o.cx+ot(q[0],o.r),Y=o.cy+ot(q[1],o.r),J=ot(j.get("width"),o.r),te=ot(j.get("height"),o.r),de=t.get(["progress","show"])?l.getItemVisual(x,"style").fill:D,k=m[x],ue=j.get("formatter");k.attr({z2:g?0:2,style:br(j,{x:X,y:Y,text:gT(S,ue),width:isNaN(J)?null:J,height:isNaN(te)?null:te,align:"center",verticalAlign:"middle"},{inheritColor:de})}),aE(k,{normal:j},S,function(_e){return gT(_e,ue)}),y&&oE(k,x,l,t,{getFormattedLabel:function(_e,Re,Oe,Te,Se,nt){return gT(nt?nt.interpolatedValue:S,ue)}}),E.add(k)}d.add(E)}),this.group.add(d),this._titleEls=f,this._detailEls=m},e.type="gauge",e}(qi),LZ=ZCe;var JCe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return rc(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(rr),OZ=JCe;function hN(i){i.registerChartView(LZ),i.registerSeriesModel(OZ)}var $Ce=["itemStyle","opacity"],eEe=function(i){le(e,i);function e(t,r){var n=i.call(this)||this,a=n,o=new Jn,s=new yi;return a.setTextContent(s),n.setTextGuideLine(o),n.updateData(t,r,!0),n}return e.prototype.updateData=function(t,r,n){var a=this,o=t.hostModel,s=t.getItemModel(r),l=t.getItemLayout(r),c=s.getModel("emphasis"),u=s.get($Ce);u=u??1,n||eo(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",n?(a.setShape({points:l.points}),a.style.opacity=0,Ar(a,{style:{opacity:u}},o,r)):Si(a,{style:{opacity:u},shape:{points:l.points}},o,r),Dn(a,s),this._updateLabel(t,r),pr(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r){var n=this,a=this.getTextGuideLine(),o=n.getTextContent(),s=t.hostModel,l=t.getItemModel(r),c=t.getItemLayout(r),u=c.label,h=t.getItemVisual(r,"style"),d=h.fill;fn(o,Kr(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),n.setTextConfig({local:!0,inside:!!u.inside,insideStroke:d,outsideFill:d});var f=u.linePoints;a.setShape({points:f}),n.textGuideLineConfig={anchor:f?new Ii(f[0][0],f[0][1]):null},Si(o,{style:{x:u.x,y:u.y}},s,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),X0(n,Y0(l),{stroke:d})},e}(oa),tEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n){var a=t.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var c=new eEe(a,l);a.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=o.getItemGraphicEl(c);u.updateData(a,l),s.add(u),a.setItemGraphicEl(l,u)}).remove(function(l){var c=o.getItemGraphicEl(l);fd(c,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(qi),FZ=tEe;var iEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dh(st(this.getData,this),st(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return rc(this,{coordDimensions:["value"],encodeDefaulter:Ut(N0,this)})},e.prototype._defaultLabelLine=function(t){ql(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),n=i.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),o=r.getSum(a);return n.percent=o?+(r.get(a,t)/o*100).toFixed(2):0,n.$vars.push("percent"),n},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(rr),NZ=iEe;function rEe(i,e){return Fr(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function nEe(i,e){for(var t=i.mapDimension("value"),r=i.mapArray(t,function(l){return l}),n=[],a=e==="ascending",o=0,s=i.count();o<s;o++)n[o]=o;return ft(e)?n.sort(e):e!=="none"&&n.sort(function(l,c){return a?r[l]-r[c]:r[c]-r[l]}),n}function aEe(i){var e=i.hostModel,t=e.get("orient");i.each(function(r){var n=i.getItemModel(r),a=n.getModel("label"),o=a.get("position"),s=n.getModel("labelLine"),l=i.getItemLayout(r),c=l.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,d,f,m;if(u)o==="insideLeft"?(d=(c[0][0]+c[3][0])/2+5,f=(c[0][1]+c[3][1])/2,h="left"):o==="insideRight"?(d=(c[1][0]+c[2][0])/2-5,f=(c[1][1]+c[2][1])/2,h="right"):(d=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,f=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,h="center"),m=[[d,f],[d,f]];else{var y=void 0,g=void 0,x=void 0,b=void 0,S=s.get("length");o==="left"?(y=(c[3][0]+c[0][0])/2,g=(c[3][1]+c[0][1])/2,x=y-S,d=x-5,h="right"):o==="right"?(y=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,x=y+S,d=x+5,h="left"):o==="top"?(y=(c[3][0]+c[0][0])/2,g=(c[3][1]+c[0][1])/2,b=g-S,f=b-5,h="center"):o==="bottom"?(y=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,b=g+S,f=b+5,h="center"):o==="rightTop"?(y=t==="horizontal"?c[3][0]:c[1][0],g=t==="horizontal"?c[3][1]:c[1][1],t==="horizontal"?(b=g-S,f=b-5,h="center"):(x=y+S,d=x+5,h="top")):o==="rightBottom"?(y=c[2][0],g=c[2][1],t==="horizontal"?(b=g+S,f=b+5,h="center"):(x=y+S,d=x+5,h="bottom")):o==="leftTop"?(y=c[0][0],g=t==="horizontal"?c[0][1]:c[1][1],t==="horizontal"?(b=g-S,f=b-5,h="center"):(x=y-S,d=x-5,h="right")):o==="leftBottom"?(y=t==="horizontal"?c[1][0]:c[3][0],g=t==="horizontal"?c[1][1]:c[2][1],t==="horizontal"?(b=g+S,f=b+5,h="center"):(x=y-S,d=x-5,h="right")):(y=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,t==="horizontal"?(b=g+S,f=b+5,h="center"):(x=y+S,d=x+5,h="left")),t==="horizontal"?(x=y,d=x):(b=g,f=b),m=[[y,g],[x,b]]}l.label={linePoints:m,x:d,y:f,verticalAlign:"middle",textAlign:h,inside:u}})}function dN(i,e){i.eachSeriesByType("funnel",function(t){var r=t.getData(),n=r.mapDimension("value"),a=t.get("sort"),o=rEe(t,e),s=t.get("orient"),l=o.width,c=o.height,u=nEe(r,a),h=o.x,d=o.y,f=s==="horizontal"?[ot(t.get("minSize"),c),ot(t.get("maxSize"),c)]:[ot(t.get("minSize"),l),ot(t.get("maxSize"),l)],m=r.getDataExtent(n),y=t.get("min"),g=t.get("max");y==null&&(y=Math.min(m[0],0)),g==null&&(g=m[1]);var x=t.get("funnelAlign"),b=t.get("gap"),S=s==="horizontal"?l:c,E=(S-b*(r.count()-1))/r.count(),D=function(Y,J){if(s==="horizontal"){var te=r.get(n,Y)||0,de=yr(te,[y,g],f,!0),ue=void 0;switch(x){case"top":ue=d;break;case"center":ue=d+(c-de)/2;break;case"bottom":ue=d+(c-de);break}return[[J,ue],[J,ue+de]]}var ve=r.get(n,Y)||0,_e=yr(ve,[y,g],f,!0),Re;switch(x){case"left":Re=h;break;case"center":Re=h+(l-_e)/2;break;case"right":Re=h+l-_e;break}return[[Re,J],[Re+_e,J]]};a==="ascending"&&(E=-E,b=-b,s==="horizontal"?h+=l:d+=c,u=u.reverse());for(var B=0;B<u.length;B++){var F=u[B],H=u[B+1],U=r.getItemModel(F);if(s==="horizontal"){var k=U.get(["itemStyle","width"]);k==null?k=E:(k=ot(k,l),a==="ascending"&&(k=-k));var j=D(F,h),q=D(H,h+k);h+=k+b,r.setItemLayout(F,{points:j.concat(q.slice().reverse())})}else{var X=U.get(["itemStyle","height"]);X==null?X=E:(X=ot(X,c),a==="ascending"&&(X=-X));var j=D(F,d),q=D(H,d+X);d+=X+b,r.setItemLayout(F,{points:j.concat(q.slice().reverse())})}}aEe(r)})}function fN(i){i.registerChartView(FZ),i.registerSeriesModel(NZ),i.registerLayout(dN),i.registerProcessor(Vu("funnel"))}var oEe=.3,sEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new xt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,n,a){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.dimensions,h=kZ(t);s.diff(l).add(d).update(f).remove(m).execute();function d(g){var x=UZ(s,o,g,u,c);pN(x,s,g,h)}function f(g,x){var b=l.getItemGraphicEl(x),S=zZ(s,g,u,c);s.setItemGraphicEl(g,b),Si(b,{shape:{points:S}},t,g),eo(b),pN(b,s,g,h)}function m(g){var x=l.getItemGraphicEl(g);o.remove(x)}if(!this._initialized){this._initialized=!0;var y=lEe(c,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(y)}this._data=s},e.prototype.incrementalPrepareRender=function(t,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,n){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=kZ(r),c=this._progressiveEls=[],u=t.start;u<t.end;u++){var h=UZ(a,this._dataGroup,u,s,o);h.incremental=!0,pN(h,a,u,l),c.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(qi);function lEe(i,e,t){var r=i.model,n=i.getRect(),a=new pi({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Ar(a,{shape:{width:n.width,height:n.height}},e,t),a}function zZ(i,e,t,r){for(var n=[],a=0;a<t.length;a++){var o=t[a],s=i.get(i.mapDimension(o),e);cEe(s,r.getAxis(o).type)||n.push(r.dataToPoint(s,o))}return n}function UZ(i,e,t,r,n){var a=zZ(i,t,r,n),o=new Jn({shape:{points:a},z2:10});return e.add(o),i.setItemGraphicEl(t,o),o}function kZ(i){var e=i.get("smooth",!0);return e===!0&&(e=oEe),e=Ic(e),Rf(e)&&(e=0),{smooth:e}}function pN(i,e,t,r){i.useStyle(e.getItemVisual(t,"style")),i.style.fill=null,i.setShape("smooth",r.smooth);var n=e.getItemModel(t),a=n.getModel("emphasis");Dn(i,n,"lineStyle"),pr(i,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function cEe(i,e){return e==="category"?i==null:i==null||isNaN(i)}var VZ=sEe;var uEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return zo(null,this,{useEncodeDefaulter:st(hEe,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,n=this.getData(),a=[];return r.eachActiveState(n,function(o,s){t===o&&a.push(n.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(rr);function hEe(i){var e=i.ecModel.getComponent("parallel",i.get("parallelIndex"));if(e){var t={};return W(e.dimensions,function(r){var n=dEe(r);t[r]=n}),t}}function dEe(i){return+i.replace("dim","")}var HZ=uEe;var fEe=["lineStyle","opacity"],pEe={seriesType:"parallel",reset:function(i,e){var t=i.coordinateSystem,r={normal:i.get(["lineStyle","opacity"]),active:i.get("activeOpacity"),inactive:i.get("inactiveOpacity")};return{progress:function(n,a){t.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var c=a.getItemModel(s).get(fEe,!0);c!=null&&(l=c)}var u=a.ensureUniqueItemVisual(s,"style");u.opacity=l},n.start,n.end)}}}},QZ=pEe;function AN(i){AEe(i),mEe(i)}function AEe(i){if(!i.parallel){var e=!1;W(i.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(i.parallel=[{}])}}function mEe(i){var e=cr(i.parallelAxis);W(e,function(t){if(yt(t)){var r=t.parallelIndex||0,n=cr(i.parallel)[r];n&&n.parallelAxisDefault&&ri(t,n.parallelAxisDefault,!1)}})}var gEe=5,vEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this._model=t,this._api=n,this._handlers||(this._handlers={},W(yEe,function(a,o){n.getZr().on(o,this._handlers[o]=st(a,this))},this)),Uc(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){bd(this,"_throttledDispatchExpand"),W(this._handlers,function(n,a){r.getZr().off(a,n)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Ce({type:"parallelAxisExpand"},t))},e.type="parallel",e}(hr),yEe={mousedown:function(i){mN(this,"click")&&(this._mouseDownPoint=[i.offsetX,i.offsetY])},mouseup:function(i){var e=this._mouseDownPoint;if(mN(this,"click")&&e){var t=[i.offsetX,i.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>gEe)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([i.offsetX,i.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(i){if(!(this._mouseDownPoint||!mN(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([i.offsetX,i.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function mN(i,e){var t=i._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var GZ=vEe;var xEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){i.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&ri(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var n=t.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){W(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],n=Xi(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);W(n,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(xi),WZ=xEe;var _Ee=function(i){le(e,i);function e(t,r,n,a,o){var s=i.call(this,t,r,n)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(Vo),jZ=_Ee;function Ml(i,e,t,r,n,a){i=i||0;var o=t[1]-t[0];if(n!=null&&(n=fv(n,[0,o])),a!=null&&(a=Math.max(a,n??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=fv(s,[0,o]),n=a=fv(s,[n,a]),r=0}e[0]=fv(e[0],t),e[1]=fv(e[1],t);var l=gN(e,r);e[r]+=i;var c=n||0,u=t.slice();l.sign<0?u[0]+=c:u[1]-=c,e[r]=fv(e[r],u);var h;return h=gN(e,r),n!=null&&(h.sign!==l.sign||h.span<n)&&(e[1-r]=e[r]+l.sign*n),h=gN(e,r),a!=null&&h.span>a&&(e[1-r]=e[r]+h.sign*a),e}function gN(i,e){var t=i[e]-i[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function fv(i,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,i))}var vN=W,YZ=Math.min,qZ=Math.max,KZ=Math.floor,wEe=Math.ceil,XZ=dn,bEe=Math.PI,SEe=function(){function i(e,t,r){this.type="parallel",this._axesMap=ct(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return i.prototype._init=function(e,t,r){var n=e.dimensions,a=e.parallelAxisIndex;vN(n,function(o,s){var l=a[s],c=t.getComponent("parallelAxis",l),u=this._axesMap.set(o,new jZ(o,cp(c),[0,0],c.get("type"),l)),h=u.type==="category";u.onBand=h&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},i.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},i.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,n=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+t.axisLength&&s>=n&&s<=n+t.layoutLength},i.prototype.getModel=function(){return this._model},i.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var n=r.getData();vN(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(n,n.mapDimension(a)),bh(o.scale,o.model)},this)}},this)},i.prototype.resize=function(e,t){this._rect=Fr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},i.prototype.getRect=function(){return this._rect},i.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],n=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=t[n[o]],l=[0,s],c=this.dimensions.length,u=vT(e.get("axisExpandWidth"),l),h=vT(e.get("axisExpandCount")||0,[0,c]),d=e.get("axisExpandable")&&c>3&&c>h&&h>1&&u>0&&s>0,f=e.get("axisExpandWindow"),m;if(f)m=vT(f[1]-f[0],l),f[1]=f[0]+m;else{m=vT(u*(h-1),l);var y=e.get("axisExpandCenter")||KZ(c/2);f=[u*y-m/2],f[1]=f[0]+m}var g=(s-m)/(c-h);g<3&&(g=0);var x=[KZ(XZ(f[0]/u,1))+1,wEe(XZ(f[1]/u,1))-1],b=g/u*f[0];return{layout:a,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:s,axisBase:t[r[1-o]],axisLength:t[n[1-o]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:g,axisExpandWindow:f,axisCount:c,winInnerIndices:x,axisExpandWindow0Pos:b}},i.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),a=n.layout;t.each(function(o){var s=[0,n.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),vN(r,function(o,s){var l=(n.axisExpandable?EEe:CEe)(s,n),c={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},u={horizontal:bEe/2,vertical:0},h=[c[a].x+e.x,c[a].y+e.y],d=u[a],f=za();dl(f,f,d),Jo(f,f,h),this._axesLayout[o]={position:h,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},i.prototype.getAxis=function(e){return this._axesMap.get(e)},i.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},i.prototype.eachActiveState=function(e,t,r,n){r==null&&(r=0),n==null&&(n=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];W(o,function(g){s.push(e.mapDimension(g)),l.push(a.get(g).model)});for(var c=this.hasAxisBrushed(),u=r;u<n;u++){var h=void 0;if(!c)h="normal";else{h="active";for(var d=e.getValues(s,u),f=0,m=o.length;f<m;f++){var y=l[f].getActiveState(d[f]);if(y==="inactive"){h="inactive";break}}}t(h,u)}},i.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,n=0,a=e.length;n<a;n++)t.get(e[n]).model.getActiveState()!=="normal"&&(r=!0);return r},i.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return ts([e,0],r.transform)},i.prototype.getAxisLayout=function(e){return Tt(this._axesLayout[e])},i.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,n=t.axisExpandWindow.slice(),a=n[1]-n[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:n};var s=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,c="slide",u=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(u)d&&u&&s<a*h[0]?(c="jump",l=s-a*h[2]):d&&u&&s>a*(1-h[0])?(c="jump",l=s-a*(1-h[2])):(l=s-a*h[1])>=0&&(l=s-a*(1-h[1]))<=0&&(l=0),l*=t.axisExpandWidth/u,l?Ml(l,n,o,"all"):c="none";else{var f=n[1]-n[0],m=o[1]*s/f;n=[qZ(0,m-f/2)],n[1]=YZ(o[1],n[0]+f),n[0]=n[1]-f}return{axisExpandWindow:n,behavior:c}},i}();function vT(i,e){return YZ(qZ(i,e[0]),e[1])}function CEe(i,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*i,axisNameAvailableWidth:t,axisLabelShow:!0}}function EEe(i,e){var t=e.layoutLength,r=e.axisExpandWidth,n=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,c=!1,u;return i<o[0]?(s=i*a,u=a):i<=o[1]?(s=e.axisExpandWindow0Pos+i*r-e.axisExpandWindow[0],l=r,c=!0):(s=t-(n-1-i)*a,u=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}var ZZ=SEe;function TEe(i,e){var t=[];return i.eachComponent("parallel",function(r,n){var a=new ZZ(r,i,e);a.name="parallel_"+n,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),i.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",Jr).models[0];r.coordinateSystem=n.coordinateSystem}}),t}var MEe={create:TEe},JZ=MEe;var $Z=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return gl([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Tt(t);if(r)for(var n=r.length-1;n>=0;n--)co(r[n])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e}(xi);jr($Z,Sh);var yN=$Z;var Vm=!0,O_=Math.min,pv=Math.max,IEe=Math.pow,BEe=1e4,DEe=6,REe=6,eJ="globalPan",PEe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},LEe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},tJ={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},OEe=0,FEe=function(i){le(e,i);function e(t){var r=i.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new xt,r._uid="brushController_"+OEe++,W(QEe,function(n,a){this._handlers[a]=st(n,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||GY(r,eJ,this._uid),W(this._handlers,function(n,a){r.on(a,n)}),this._brushType=t.brushType,this._brushOption=ri(Tt(tJ),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;WY(t,eJ,this._uid),W(this._handlers,function(r,n){t.off(n,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};W(t,function(n){r[n.panelId]=Tt(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Me(t,function(d){return ri(Tt(tJ),d,!0)});var r="\0-brush-index-",n=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new ns(n,t,c,l).add(u).update(u).remove(h).execute(),this;function l(d,f){return(d.id!=null?d.id:r+f)+"-"+d.brushType}function c(d,f){return l(d.__brushOption,f)}function u(d,f){var m=t[d];if(f!=null&&n[f]===s)a[d]=n[f];else{var y=a[d]=f!=null?(n[f].__brushOption=m,n[f]):sJ(o,oJ(o,m));CN(o,y)}}function h(d){n[d]!==s&&o.group.remove(n[d])}},e.prototype.unmount=function(){return this.enableBrush(!1),xN(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}($a);function oJ(i,e){var t=yT[e.brushType].createCover(i,e);return t.__brushOption=e,cJ(t,e),i.group.add(t),t}function sJ(i,e){var t=EN(e);return t.endCreating&&(t.endCreating(i,e),cJ(e,e.__brushOption)),e}function lJ(i,e){var t=e.__brushOption;EN(e).updateCoverShape(i,e,t.range,t)}function cJ(i,e){var t=e.z;t==null&&(t=BEe),i.traverse(function(r){r.z=t,r.z2=t})}function CN(i,e){EN(e).updateCommon(i,e),lJ(i,e)}function EN(i){return yT[i.__brushOption.brushType]}function TN(i,e,t){var r=i._panels;if(!r)return Vm;var n,a=i._transform;return W(r,function(o){o.isTargetByCursor(e,t,a)&&(n=o)}),n}function uJ(i,e){var t=i._panels;if(!t)return Vm;var r=e.__brushOption.panelId;return r!=null?t[r]:Vm}function xN(i){var e=i._covers,t=e.length;return W(e,function(r){i.group.remove(r)},i),e.length=0,!!t}function Hm(i,e){var t=Me(i._covers,function(r){var n=r.__brushOption,a=Tt(n.range);return{brushType:n.brushType,panelId:n.panelId,range:a}});i.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function NEe(i){var e=i._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],n=t[0]-r[0],a=t[1]-r[1],o=IEe(n*n+a*a,.5);return o>DEe}function hJ(i){var e=i.length-1;return e<0&&(e=0),[i[0],i[e]]}function dJ(i,e,t,r){var n=new xt;return n.add(new pi({name:"main",style:MN(t),silent:!0,draggable:!0,cursor:"move",drift:Ut(iJ,i,e,n,["n","s","w","e"]),ondragend:Ut(Hm,e,{isEnd:!0})})),W(r,function(a){n.add(new pi({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Ut(iJ,i,e,n,a),ondragend:Ut(Hm,e,{isEnd:!0})}))}),n}function fJ(i,e,t,r){var n=r.brushStyle.lineWidth||0,a=pv(n,REe),o=t[0][0],s=t[1][0],l=o-n/2,c=s-n/2,u=t[0][1],h=t[1][1],d=u-a+n/2,f=h-a+n/2,m=u-o,y=h-s,g=m+n,x=y+n;Md(i,e,"main",o,s,m,y),r.transformable&&(Md(i,e,"w",l,c,a,x),Md(i,e,"e",d,c,a,x),Md(i,e,"n",l,c,g,a),Md(i,e,"s",l,f,g,a),Md(i,e,"nw",l,c,a,a),Md(i,e,"ne",d,c,a,a),Md(i,e,"sw",l,f,a,a),Md(i,e,"se",d,f,a,a))}function _N(i,e){var t=e.__brushOption,r=t.transformable,n=e.childAt(0);n.useStyle(MN(t)),n.attr({silent:!r,cursor:r?"move":"default"}),W([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?wN(i,a[0]):kEe(i,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?LEe[s]+"-resize":null})})}function Md(i,e,t,r,n,a,o){var s=e.childOfName(t);s&&s.setShape(VEe(IN(i,e,[[r,n],[r+a,n+o]])))}function MN(i){return At({strokeNoScale:!0},i.brushStyle)}function pJ(i,e,t,r){var n=[O_(i,t),O_(e,r)],a=[pv(i,t),pv(e,r)];return[[n[0],a[0]],[n[1],a[1]]]}function UEe(i){return Eu(i.group)}function wN(i,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=fm(t[e],UEe(i));return r[n]}function kEe(i,e){var t=[wN(i,e[0]),wN(i,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function iJ(i,e,t,r,n,a){var o=t.__brushOption,s=i.toRectRange(o.range),l=AJ(e,n,a);W(r,function(c){var u=PEe[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=i.fromRectRange(pJ(s[0][0],s[1][0],s[0][1],s[1][1])),CN(e,t),Hm(e,{isEnd:!1})}function zEe(i,e,t,r){var n=e.__brushOption.range,a=AJ(i,t,r);W(n,function(o){o[0]+=a[0],o[1]+=a[1]}),CN(i,e),Hm(i,{isEnd:!1})}function AJ(i,e,t){var r=i.group,n=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[n[0]-a[0],n[1]-a[1]]}function IN(i,e,t){var r=uJ(i,e);return r&&r!==Vm?r.clipPath(t,i._transform):Tt(t)}function VEe(i){var e=O_(i[0][0],i[1][0]),t=O_(i[0][1],i[1][1]),r=pv(i[0][0],i[1][0]),n=pv(i[0][1],i[1][1]);return{x:e,y:t,width:r-e,height:n-t}}function HEe(i,e,t){if(!(!i._brushType||GEe(i,e.offsetX,e.offsetY))){var r=i._zr,n=i._covers,a=TN(i,e,t);if(!i._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(a&&(a===Vm||s.panelId===a.panelId)&&yT[s.brushType].contain(n[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function bN(i){var e=i.event;e.preventDefault&&e.preventDefault()}function SN(i,e,t){return i.childOfName("main").contain(e,t)}function mJ(i,e,t,r){var n=i._creatingCover,a=i._creatingPanel,o=i._brushOption,s;if(i._track.push(t.slice()),NEe(i)||n){if(a&&!n){o.brushMode==="single"&&xN(i);var l=Tt(o);l.brushType=rJ(l.brushType,a),l.panelId=a===Vm?null:a.panelId,n=i._creatingCover=oJ(i,l),i._covers.push(n)}if(n){var c=yT[rJ(i._brushType,a)],u=n.__brushOption;u.range=c.getCreatingRange(IN(i,n,i._track)),r&&(sJ(i,n),c.updateCommon(i,n)),lJ(i,n),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&TN(i,e,t)&&xN(i)&&(s={isEnd:r,removeOnClick:!0});return s}function rJ(i,e){return i==="auto"?e.defaultBrushType:i}var QEe={mousedown:function(i){if(this._dragging)nJ(this,i);else if(!i.target||!i.target.draggable){bN(i);var e=this.group.transformCoordToLocal(i.offsetX,i.offsetY);this._creatingCover=null;var t=this._creatingPanel=TN(this,i,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(i){var e=i.offsetX,t=i.offsetY,r=this.group.transformCoordToLocal(e,t);if(HEe(this,i,r),this._dragging){bN(i);var n=mJ(this,i,r,!1);n&&Hm(this,n)}},mouseup:function(i){nJ(this,i)}};function nJ(i,e){if(i._dragging){bN(e);var t=e.offsetX,r=e.offsetY,n=i.group.transformCoordToLocal(t,r),a=mJ(i,e,n,!0);i._dragging=!1,i._track=[],i._creatingCover=null,a&&Hm(i,a)}}function GEe(i,e,t){var r=i._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var yT={lineX:aJ(0),lineY:aJ(1),rect:{createCover:function(i,e){function t(r){return r}return dJ({toRectRange:t,fromRectRange:t},i,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(i){var e=hJ(i);return pJ(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(i,e,t,r){fJ(i,e,t,r)},updateCommon:_N,contain:SN},polygon:{createCover:function(i,e){var t=new xt;return t.add(new Jn({name:"main",style:MN(e),silent:!0})),t},getCreatingRange:function(i){return i},endCreating:function(i,e){e.remove(e.childAt(0)),e.add(new oa({name:"main",draggable:!0,drift:Ut(zEe,i,e),ondragend:Ut(Hm,i,{isEnd:!0})}))},updateCoverShape:function(i,e,t,r){e.childAt(0).setShape({points:IN(i,e,t)})},updateCommon:_N,contain:SN}};function aJ(i){return{createCover:function(e,t){return dJ({toRectRange:function(r){var n=[r,[0,100]];return i&&n.reverse(),n},fromRectRange:function(r){return r[i]}},e,t,[[["w"],["e"]],[["n"],["s"]]][i])},getCreatingRange:function(e){var t=hJ(e),r=O_(t[0][i],t[1][i]),n=pv(t[0][i],t[1][i]);return[r,n]},updateCoverShape:function(e,t,r,n){var a,o=uJ(e,t);if(o!==Vm&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(i);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-i]]}var l=[r,a];i&&l.reverse(),fJ(e,t,l,n)},updateCommon:_N,contain:SN}}var Av=FEe;function xT(i){return i=BN(i),function(e){return yL(e,i)}}function _T(i,e){return i=BN(i),function(t){var r=e??t,n=r?i.width:i.height,a=r?i.x:i.y;return[a,a+(n||0)]}}function wT(i,e,t){var r=BN(i);return function(n,a){return r.contain(a[0],a[1])&&!Ap(n,e,t)}}function BN(i){return Ht.create(i)}var WEe=["axisLine","axisTickLabel","axisName"],jEe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){i.prototype.init.apply(this,arguments),(this._brushController=new Av(r.getZr())).on("brush",st(this._onBrush,this))},e.prototype.render=function(t,r,n,a){if(!KEe(t,r,a)){this.axisModel=t,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new xt,this.group.add(this._axisGroup),!!t.get("show")){var s=YEe(t,r),l=s.coordinateSystem,c=t.getAreaSelectStyle(),u=c.width,h=t.axis.dim,d=l.getAxisLayout(h),f=Ce({strokeContainThreshold:u},d),m=new as(t,f);W(WEe,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(f,c,t,s,u,n),Ad(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,n,a,o,s){var l=n.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),h=Ht.create({x:l[0],y:-o/2,width:c,height:o});h.x-=u,h.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:xT(h),isTargetByCursor:wT(h,s,a),getLinearBrushOtherExtent:_T(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(XEe(n))},e.prototype._onBrush=function(t){var r=t.areas,n=this.axisModel,a=n.axis,o=Me(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(hr);function KEe(i,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===i}function XEe(i){var e=i.axis;return Me(i.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function YEe(i,e){return e.getComponent("parallel",i.get("parallelIndex"))}var vJ=jEe;var qEe={type:"axisAreaSelect",event:"axisAreaSelected"};function yJ(i){i.registerAction(qEe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),i.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var ZEe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function F_(i){i.registerComponentView(GZ),i.registerComponentModel(WZ),i.registerCoordinateSystem("parallel",JZ),i.registerPreprocessor(AN),i.registerComponentModel(yN),i.registerComponentView(vJ),Hu(i,"parallel",yN,ZEe),yJ(i)}function DN(i){Ei(F_),i.registerChartView(VZ),i.registerSeriesModel(HZ),i.registerVisual(i.PRIORITY.VISUAL.BRUSH,QZ)}var JEe=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return i}(),$Ee=function(i){le(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new JEe},e.prototype.buildPath=function(t,r){var n=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+n,r.y2),t.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(t.lineTo(r.x2,r.y2+n),t.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),t.closePath()},e.prototype.highlight=function(){_s(this)},e.prototype.downplay=function(){ws(this)},e}(Kt),e2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,r,n){var a=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,c=l.width,u=l.height,h=t.getData(),d=t.getData("edge"),f=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(m){var y=new $Ee,g=Pt(y);g.dataIndex=m.dataIndex,g.seriesIndex=t.seriesIndex,g.dataType="edge";var x=m.getModel(),b=x.getModel("lineStyle"),S=b.get("curveness"),E=m.node1.getLayout(),D=m.node1.getModel(),B=D.get("localX"),F=D.get("localY"),H=m.node2.getLayout(),U=m.node2.getModel(),k=U.get("localX"),j=U.get("localY"),q=m.getLayout(),X,Y,J,te,de,ue,ve,_e;y.shape.extent=Math.max(1,q.dy),y.shape.orient=f,f==="vertical"?(X=(B!=null?B*c:E.x)+q.sy,Y=(F!=null?F*u:E.y)+E.dy,J=(k!=null?k*c:H.x)+q.ty,te=j!=null?j*u:H.y,de=X,ue=Y*(1-S)+te*S,ve=J,_e=Y*S+te*(1-S)):(X=(B!=null?B*c:E.x)+E.dx,Y=(F!=null?F*u:E.y)+q.sy,J=k!=null?k*c:H.x,te=(j!=null?j*u:H.y)+q.ty,de=X*(1-S)+J*S,ue=Y,ve=X*S+J*(1-S),_e=te),y.setShape({x1:X,y1:Y,x2:J,y2:te,cpx1:de,cpy1:ue,cpx2:ve,cpy2:_e}),y.useStyle(b.getItemStyle()),xJ(y.style,f,m);var Re=""+x.get("value"),Oe=Kr(x,"edgeLabel");fn(y,Oe,{labelFetcher:{getFormattedLabel:function(nt,rt,dt,tt,ht,pt){return t.getFormattedLabel(nt,rt,"edge",tt,wo(ht,Oe.normal&&Oe.normal.get("formatter"),Re),pt)}},labelDataIndex:m.dataIndex,defaultText:Re}),y.setTextConfig({position:"inside"});var Te=x.getModel("emphasis");Dn(y,x,"lineStyle",function(nt){var rt=nt.getItemStyle();return xJ(rt,f,m),rt}),s.add(y),d.setItemGraphicEl(m.dataIndex,y);var Se=Te.get("focus");pr(y,Se==="adjacency"?m.getAdjacentDataIndices():Se==="trajectory"?m.getTrajectoryDataIndices():Se,Te.get("blurScope"),Te.get("disabled"))}),o.eachNode(function(m){var y=m.getLayout(),g=m.getModel(),x=g.get("localX"),b=g.get("localY"),S=g.getModel("emphasis"),E=new pi({shape:{x:x!=null?x*c:y.x,y:b!=null?b*u:y.y,width:y.dx,height:y.dy},style:g.getModel("itemStyle").getItemStyle(),z2:10});fn(E,Kr(g),{labelFetcher:{getFormattedLabel:function(B,F){return t.getFormattedLabel(B,F,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),E.disableLabelAnimation=!0,E.setStyle("fill",m.getVisual("color")),E.setStyle("decal",m.getVisual("style").decal),Dn(E,g),s.add(E),h.setItemGraphicEl(m.dataIndex,E),Pt(E).dataType="node";var D=S.get("focus");pr(E,D==="adjacency"?m.getAdjacentDataIndices():D==="trajectory"?m.getTrajectoryDataIndices():D,S.get("blurScope"),S.get("disabled"))}),h.eachItemGraphicEl(function(m,y){var g=h.getItemModel(y);g.get("draggable")&&(m.drift=function(x,b){a._focusAdjacencyDisabled=!0,this.shape.x+=x,this.shape.y+=b,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(y),localX:this.shape.x/c,localY:this.shape.y/u})},m.ondragend=function(){a._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(t2e(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(qi);function xJ(i,e,t){switch(i.fill){case"source":i.fill=t.node1.getVisual("color"),i.decal=t.node1.getVisual("style").decal;break;case"target":i.fill=t.node2.getVisual("color"),i.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),n=t.node2.getVisual("color");Ye(r)&&Ye(n)&&(i.fill=new xh(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function t2e(i,e,t){var r=new pi({shape:{x:i.x-10,y:i.y-10,width:0,height:i.height+20}});return Ar(r,{shape:{width:i.width+20}},e,t),r}var _J=e2e;var i2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var n=t.edges||t.links,a=t.data||t.nodes,o=t.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new ir(o[l],this,r));if(a&&n){var c=L_(a,n,this,!0,u);return c.data}function u(h,d){h.wrapMethod("getItemModel",function(f,m){var y=f.parentModel,g=y.getData().getItemLayout(m);if(g){var x=g.depth,b=y.levelModels[x];b&&(f.parentModel=b)}return f}),d.wrapMethod("getItemModel",function(f,m){var y=f.parentModel,g=y.getGraph().getEdgeByIndex(m),x=g.node1.getLayout();if(x){var b=x.depth,S=y.levelModels[b];S&&(f.parentModel=S)}return f})}},e.prototype.setNodePosition=function(t,r){var n=this.option.data||this.option.nodes,a=n[t];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,n){function a(f){return isNaN(f)||f==null}if(n==="edge"){var o=this.getDataParams(t,n),s=o.data,l=o.value,c=s.source+" -- "+s.target;return wn("nameValue",{name:c,value:l,noValue:a(l)})}else{var u=this.getGraph().getNodeByIndex(t),h=u.getLayout().value,d=this.getDataParams(t,n).data.name;return wn("nameValue",{name:d!=null?d+"":null,value:h,noValue:a(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var n=i.prototype.getDataParams.call(this,t,r);if(n.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),o=a.getLayout().value;n.value=o}return n},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(rr),wJ=i2e;function PN(i,e){i.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),n=t.get("nodeGap"),a=r2e(t,e);t.layoutInfo=a;var o=a.width,s=a.height,l=t.getGraph(),c=l.nodes,u=l.edges;a2e(c);var h=Xi(c,function(y){return y.getLayout().value===0}),d=h.length!==0?0:t.get("layoutIterations"),f=t.get("orient"),m=t.get("nodeAlign");n2e(c,u,r,n,o,s,d,f,m)})}function r2e(i,e){return Fr(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function n2e(i,e,t,r,n,a,o,s,l){o2e(i,e,t,n,a,s,l),u2e(i,e,a,n,r,o,s),y2e(i,s)}function a2e(i){W(i,function(e){var t=vp(e.outEdges,bT),r=vp(e.inEdges,bT),n=e.getValue()||0,a=Math.max(t,r,n);e.setLayout({value:a},!0)})}function o2e(i,e,t,r,n,a,o){for(var s=[],l=[],c=[],u=[],h=0,d=0;d<e.length;d++)s[d]=1;for(var d=0;d<i.length;d++)l[d]=i[d].inEdges.length,l[d]===0&&c.push(i[d]);for(var f=-1;c.length;){for(var m=0;m<c.length;m++){var y=c[m],g=y.hostGraph.data.getRawDataItem(y.dataIndex),x=g.depth!=null&&g.depth>=0;x&&g.depth>f&&(f=g.depth),y.setLayout({depth:x?g.depth:h},!0),a==="vertical"?y.setLayout({dy:t},!0):y.setLayout({dx:t},!0);for(var b=0;b<y.outEdges.length;b++){var S=y.outEdges[b],E=e.indexOf(S);s[E]=0;var D=S.node2,B=i.indexOf(D);--l[B]===0&&u.indexOf(D)<0&&u.push(D)}}++h,c=u,u=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var F=f>h-1?f:h-1;o&&o!=="left"&&s2e(i,o,a,F);var H=a==="vertical"?(n-t)/F:(r-t)/F;c2e(i,H,a)}function bJ(i){var e=i.hostGraph.data.getRawDataItem(i.dataIndex);return e.depth!=null&&e.depth>=0}function s2e(i,e,t,r){if(e==="right"){for(var n=[],a=i,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];n.indexOf(u.node1)<0&&n.push(u.node1)}}a=n,n=[],++o}W(i,function(h){bJ(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&l2e(i,r)}function l2e(i,e){W(i,function(t){!bJ(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function c2e(i,e,t){W(i,function(r){var n=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function u2e(i,e,t,r,n,a,o){var s=h2e(i,o);d2e(s,e,t,r,n,o),RN(s,n,t,r,o);for(var l=1;a>0;a--)l*=.99,f2e(s,l,o),RN(s,n,t,r,o),v2e(s,l,o),RN(s,n,t,r,o)}function h2e(i,e){var t=[],r=e==="vertical"?"y":"x",n=lx(i,function(a){return a.getLayout()[r]});return n.keys.sort(function(a,o){return a-o}),W(n.keys,function(a){t.push(n.buckets.get(a))}),t}function d2e(i,e,t,r,n,a){var o=1/0;W(i,function(s){var l=s.length,c=0;W(s,function(h){c+=h.getLayout().value});var u=a==="vertical"?(r-(l-1)*n)/c:(t-(l-1)*n)/c;u<o&&(o=u)}),W(i,function(s){W(s,function(l,c){var u=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),W(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function RN(i,e,t,r,n){var a=n==="vertical"?"x":"y";W(i,function(o){o.sort(function(y,g){return y.getLayout()[a]-g.getLayout()[a]});for(var s,l,c,u=0,h=o.length,d=n==="vertical"?"dx":"dy",f=0;f<h;f++)l=o[f],c=u-l.getLayout()[a],c>0&&(s=l.getLayout()[a]+c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]+l.getLayout()[d]+e;var m=n==="vertical"?r:t;if(c=u-e-m,c>0){s=l.getLayout()[a]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=h-2;f>=0;--f)l=o[f],c=l.getLayout()[a]+l.getLayout()[d]+e-u,c>0&&(s=l.getLayout()[a]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]}})}function f2e(i,e,t){W(i.slice().reverse(),function(r){W(r,function(n){if(n.outEdges.length){var a=vp(n.outEdges,p2e,t)/vp(n.outEdges,bT);if(isNaN(a)){var o=n.outEdges.length;a=o?vp(n.outEdges,A2e,t)/o:0}if(t==="vertical"){var s=n.getLayout().x+(a-yp(n,t))*e;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-yp(n,t))*e;n.setLayout({y:l},!0)}}})})}function p2e(i,e){return yp(i.node2,e)*i.getValue()}function A2e(i,e){return yp(i.node2,e)}function m2e(i,e){return yp(i.node1,e)*i.getValue()}function g2e(i,e){return yp(i.node1,e)}function yp(i,e){return e==="vertical"?i.getLayout().x+i.getLayout().dx/2:i.getLayout().y+i.getLayout().dy/2}function bT(i){return i.getValue()}function vp(i,e,t){for(var r=0,n=i.length,a=-1;++a<n;){var o=+e(i[a],t);isNaN(o)||(r+=o)}return r}function v2e(i,e,t){W(i,function(r){W(r,function(n){if(n.inEdges.length){var a=vp(n.inEdges,m2e,t)/vp(n.inEdges,bT);if(isNaN(a)){var o=n.inEdges.length;a=o?vp(n.inEdges,g2e,t)/o:0}if(t==="vertical"){var s=n.getLayout().x+(a-yp(n,t))*e;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-yp(n,t))*e;n.setLayout({y:l},!0)}}})})}function y2e(i,e){var t=e==="vertical"?"x":"y";W(i,function(r){r.outEdges.sort(function(n,a){return n.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(n,a){return n.node1.getLayout()[t]-a.node1.getLayout()[t]})}),W(i,function(r){var n=0,a=0;W(r.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),W(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function LN(i){i.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,n=t.edges;if(r.length){var a=1/0,o=-1/0;W(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),W(r,function(s){var l=new Ta({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}n.length&&W(n,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function ON(i){i.registerChartView(_J),i.registerSeriesModel(wJ),i.registerLayout(PN),i.registerVisual(LN),i.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var ST=function(){function i(){}return i.prototype.getInitialData=function(e,t){var r,n=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=n.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,h=this._baseAxisDim=c[u],d=c[1-u],f=[n,a],m=f[u].get("type"),y=f[1-u].get("type"),g=e.data;if(g&&l){var x=[];W(g,function(E,D){var B;Ee(E)?(B=E.slice(),E.unshift(D)):Ee(E.value)?(B=Ce({},E),B.value=B.value.slice(),E.value.unshift(D)):B=E,x.push(B)}),e.data=x}var b=this.defaultValueDimensions,S=[{name:h,type:Cm(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:Cm(y),dimsDef:b.slice()}];return rc(this,{coordDimensions:S,dimensionsCount:b.length+1,encodeDefaulter:Ut(yE,S,this)})},i.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},i}();var SJ=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(rr);jr(SJ,ST,!0);var CJ=SJ;var x2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(s).add(function(c){if(a.hasValue(c)){var u=a.getItemLayout(c),h=EJ(u,a,c,l,!0);a.setItemGraphicEl(c,h),o.add(h)}}).update(function(c,u){var h=s.getItemGraphicEl(u);if(!a.hasValue(c)){o.remove(h);return}var d=a.getItemLayout(c);h?(eo(h),TJ(d,h,a,c)):h=EJ(d,a,c,l),o.add(h),a.setItemGraphicEl(c,h)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&o.remove(u)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(qi),_2e=function(){function i(){}return i}(),w2e=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new _2e},e.prototype.buildPath=function(t,r){var n=r.points,a=0;for(t.moveTo(n[a][0],n[a][1]),a++;a<4;a++)t.lineTo(n[a][0],n[a][1]);for(t.closePath();a<n.length;a++)t.moveTo(n[a][0],n[a][1]),a++,t.lineTo(n[a][0],n[a][1])},e}(Kt);function EJ(i,e,t,r,n){var a=i.ends,o=new w2e({shape:{points:n?b2e(a,r,i):a}});return TJ(i,o,e,t,n),o}function TJ(i,e,t,r,n){var a=t.hostModel,o=gi[n?"initProps":"updateProps"];o(e,{shape:{points:i.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(r),l=s.getModel("emphasis");Dn(e,s),pr(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function b2e(i,e,t){return Me(i,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var MJ=x2e;var N_=W;function FN(i){var e=S2e(i);N_(e,function(t){var r=t.seriesModels;r.length&&(C2e(t),N_(r,function(n,a){E2e(n,t.boxOffsetList[a],t.boxWidthList[a])}))})}function S2e(i){var e=[],t=[];return i.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),a=qt(t,n);a<0&&(a=t.length,t[a]=n,e[a]={axis:n,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function C2e(i){var e=i.axis,t=i.seriesModels,r=t.length,n=i.boxWidthList=[],a=i.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;N_(t,function(m){l=Math.max(l,m.getData().count())});var c=e.getExtent();s=Math.abs(c[1]-c[0])/l}N_(t,function(m){var y=m.get("boxWidth");Ee(y)||(y=[y,y]),o.push([ot(y[0],s)||0,ot(y[1],s)||0])});var u=s*.8-2,h=u/r*.3,d=(u-h*(r-1))/r,f=d/2-u/2;N_(t,function(m,y){a.push(f),f+=h+d,n.push(Math.min(Math.max(d,o[y][0]),o[y][1]))})}function E2e(i,e,t){var r=i.coordinateSystem,n=i.getData(),a=t/2,o=i.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],c=n.mapDimension(l[o]),u=n.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var h=0;h<n.count();h++){var d=n.get(c,h),f=S(d,u[2],h),m=S(d,u[0],h),y=S(d,u[1],h),g=S(d,u[3],h),x=S(d,u[4],h),b=[];E(b,y,!1),E(b,g,!0),b.push(m,y,x,g),D(b,m),D(b,x),D(b,f),n.setItemLayout(h,{initBaseline:f[s],ends:b})}function S(B,F,H){var U=n.get(F,H),k=[];k[o]=B,k[s]=U;var j;return isNaN(B)||isNaN(U)?j=[NaN,NaN]:(j=r.dataToPoint(k),j[o]+=e),j}function E(B,F,H){var U=F.slice(),k=F.slice();U[o]+=a,k[o]-=a,H?B.push(U,k):B.push(k,U)}function D(B,F){var H=F.slice(),U=F.slice();H[o]-=a,U[o]+=a,B.push(H,U)}}function NN(i,e){e=e||{};for(var t=[],r=[],n=e.boundIQR,a=n==="none"||n===0,o=0;o<i.length;o++){var s=co(i[o].slice()),l=IC(s,.25),c=IC(s,.5),u=IC(s,.75),h=s[0],d=s[s.length-1],f=(n??1.5)*(u-l),m=a?h:Math.max(h,l-f),y=a?d:Math.min(d,u+f),g=e.itemNameFormatter,x=ft(g)?g({value:o}):Ye(g)?g.replace("{value}",o+""):o+"";t.push([x,m,l,c,u,y]);for(var b=0;b<s.length;b++){var S=s[b];if(S<m||S>y){var E=[x,S];r.push(E)}}}return{boxData:t,outliers:r}}var IJ={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Va){var r="";xr(r)}var n=NN(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function UN(i){i.registerSeriesModel(CJ),i.registerChartView(MJ),i.registerLayout(FN),i.registerTransform(IJ)}var T2e=["color","borderColor"],M2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,n,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Hs(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),n=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,c=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var h=r.getItemLayout(u);if(s&&BJ(c,h))return;var d=kN(h,u,!0);Ar(d,{shape:{points:h.ends}},t,u),zN(d,r,u,o),a.add(d),r.setItemGraphicEl(u,d)}}).update(function(u,h){var d=n.getItemGraphicEl(h);if(!r.hasValue(u)){a.remove(d);return}var f=r.getItemLayout(u);if(s&&BJ(c,f)){a.remove(d);return}d?(Si(d,{shape:{points:f.ends}},t,u),eo(d)):d=kN(f,u),zN(d,r,u,o),a.add(d),r.setItemGraphicEl(u,d)}).remove(function(u){var h=n.getItemGraphicEl(u);h&&a.remove(h)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),DJ(t,this.group);var r=t.get("clip",!0)?Ih(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var n=r.getData(),a=n.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=n.getItemLayout(o),l=kN(s,o);zN(l,n,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){DJ(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(qi),I2e=function(){function i(){}return i}(),B2e=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new I2e},e.prototype.buildPath=function(t,r){var n=r.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(Kt);function kN(i,e,t){var r=i.ends;return new B2e({shape:{points:t?D2e(r,i):r},z2:100})}function BJ(i,e){for(var t=!0,r=0;r<e.ends.length;r++)if(i.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function zN(i,e,t,r){var n=e.getItemModel(t);i.useStyle(e.getItemVisual(t,"style")),i.style.strokeNoScale=!0,i.__simpleBox=r,Dn(i,n)}function D2e(i,e){return Me(i,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var R2e=function(){function i(){}return i}(),VN=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new R2e},e.prototype.buildPath=function(t,r){for(var n=r.points,a=0;a<n.length;)if(this.__sign===n[a++]){var o=n[a++];t.moveTo(o,n[a++]),t.lineTo(o,n[a++])}else a+=3},e}(Kt);function DJ(i,e,t,r){var n=i.getData(),a=n.getLayout("largePoints"),o=new VN({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new VN({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new VN({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),HN(1,o,i,n),HN(-1,s,i,n),HN(0,l,i,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function HN(i,e,t,r){var n=t.get(["itemStyle",i>0?"borderColor":"borderColor0"])||t.get(["itemStyle",i>0?"color":"color0"]);i===0&&(n=t.get(["itemStyle","borderColorDoji"]));var a=t.getModel("itemStyle").getItemStyle(T2e);e.useStyle(a),e.style.fill=null,e.style.stroke=n}var RJ=M2e;var PJ=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,n){var a=r.getItemLayout(t);return a&&n.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(rr);jr(PJ,ST,!0);var LJ=PJ;function QN(i){!i||!Ee(i.series)||W(i.series,function(e){yt(e)&&e.type==="k"&&(e.type="candlestick")})}var P2e=["itemStyle","borderColor"],L2e=["itemStyle","borderColor0"],O2e=["itemStyle","borderColorDoji"],F2e=["itemStyle","color"],N2e=["itemStyle","color0"],U2e={seriesType:"candlestick",plan:ec(),performRawSeries:!0,reset:function(i,e){function t(a,o){return o.get(a>0?F2e:N2e)}function r(a,o){return o.get(a===0?O2e:a>0?P2e:L2e)}if(!e.isSeriesFiltered(i)){var n=i.pipelineContext.large;return!n&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),c=o.getItemLayout(s).sign,u=l.getItemStyle();u.fill=t(c,l),u.stroke=r(c,l)||u.fill;var h=o.ensureUniqueItemVisual(s,"style");Ce(h,u)}}}}}},OJ=U2e;var k2e={seriesType:"candlestick",plan:ec(),reset:function(i){var e=i.coordinateSystem,t=i.getData(),r=z2e(i,t),n=0,a=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[n])),l=Me(t.mapDimensionsAll(o[a]),t.getDimensionIndex,t),c=l[0],u=l[1],h=l[2],d=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:i.pipelineContext.large?m:f};function f(y,g){for(var x,b=g.getStore();(x=y.next())!=null;){var S=b.get(s,x),E=b.get(c,x),D=b.get(u,x),B=b.get(h,x),F=b.get(d,x),H=Math.min(E,D),U=Math.max(E,D),k=de(H,S),j=de(U,S),q=de(B,S),X=de(F,S),Y=[];ue(Y,j,0),ue(Y,k,1),Y.push(_e(X),_e(j),_e(q),_e(k));var J=g.getItemModel(x),te=!!J.get(["itemStyle","borderColorDoji"]);g.setItemLayout(x,{sign:FJ(b,x,E,D,u,te),initBaseline:E>D?j[a]:k[a],ends:Y,brushRect:ve(B,F,S)})}function de(Re,Oe){var Te=[];return Te[n]=Oe,Te[a]=Re,isNaN(Oe)||isNaN(Re)?[NaN,NaN]:e.dataToPoint(Te)}function ue(Re,Oe,Te){var Se=Oe.slice(),nt=Oe.slice();Se[n]=Cx(Se[n]+r/2,1,!1),nt[n]=Cx(nt[n]-r/2,1,!0),Te?Re.push(Se,nt):Re.push(nt,Se)}function ve(Re,Oe,Te){var Se=de(Re,Te),nt=de(Oe,Te);return Se[n]-=r/2,nt[n]-=r/2,{x:Se[0],y:Se[1],width:a?r:nt[0]-Se[0],height:a?nt[1]-Se[1]:r}}function _e(Re){return Re[n]=Cx(Re[n],1),Re}}function m(y,g){for(var x=Ws(y.count*4),b=0,S,E=[],D=[],B,F=g.getStore(),H=!!i.get(["itemStyle","borderColorDoji"]);(B=y.next())!=null;){var U=F.get(s,B),k=F.get(c,B),j=F.get(u,B),q=F.get(h,B),X=F.get(d,B);if(isNaN(U)||isNaN(q)||isNaN(X)){x[b++]=NaN,b+=3;continue}x[b++]=FJ(F,B,k,j,u,H),E[n]=U,E[a]=q,S=e.dataToPoint(E,null,D),x[b++]=S?S[0]:NaN,x[b++]=S?S[1]:NaN,E[a]=X,S=e.dataToPoint(E,null,D),x[b++]=S?S[1]:NaN}g.setLayout("largePoints",x)}}};function FJ(i,e,t,r,n,a){var o;return t>r?o=-1:t<r?o=1:o=a?0:e>0?i.get(n,e-1)<=r?1:-1:1,o}function z2e(i,e){var t=i.getBaseAxis(),r,n=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=ot(Yt(i.get("barMaxWidth"),n),n),o=ot(Yt(i.get("barMinWidth"),1),n),s=i.get("barWidth");return s!=null?ot(s,n):Math.max(Math.min(n/2,a),o)}var NJ=k2e;function GN(i){i.registerChartView(RJ),i.registerSeriesModel(LJ),i.registerPreprocessor(QN),i.registerVisual(OJ),i.registerLayout(NJ)}function UJ(i,e){var t=e.rippleEffectColor||e.color;i.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var V2e=function(i){le(e,i);function e(t,r){var n=i.call(this)||this,a=new Cd(t,r),o=new xt;return n.add(a),n.add(o),n.updateData(t,r),n}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,n=t.color,a=t.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Nr(r,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(c).start(),o.add(l)}UJ(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}UJ(n,t)},e.prototype.highlight=function(){_s(this)},e.prototype.downplay=function(){ws(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var n=this,a=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),s=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),c=Pu(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),h=u&&u.fill,d=s.getModel("emphasis");o.setScale(c),o.traverse(function(g){g.setStyle("fill",h)});var f=tc(t.getItemVisual(r,"symbolOffset"),c);f&&(o.x=f[0],o.y=f[1]);var m=t.getItemVisual(r,"symbolRotate");o.rotation=(m||0)*Math.PI/180||0;var y={};y.showEffectOn=a.get("showEffectOn"),y.rippleScale=s.get(["rippleEffect","scale"]),y.brushType=s.get(["rippleEffect","brushType"]),y.period=s.get(["rippleEffect","period"])*1e3,y.effectOffset=r/t.count(),y.z=a.getShallow("z")||0,y.zlevel=a.getShallow("zlevel")||0,y.symbolType=l,y.color=h,y.rippleEffectColor=s.get(["rippleEffect","color"]),y.rippleNumber=s.get(["rippleEffect","number"]),y.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(y):this.startEffectAnimation(y),this._effectCfg=y):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?y.showEffectOn!=="render"&&n.startEffectAnimation(y):g==="normal"&&y.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=y,pr(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(xt),kJ=V2e;var H2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Mh(kJ)},e.prototype.render=function(t,r,n){var a=t.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,n=r&&r.getArea&&r.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,r,n){var a=t.getData();this.group.dirty();var o=zu("").reset(t,r,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=gQ(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(qi),zJ=H2e;var Q2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return zo(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(rr),VJ=Q2e;function WN(i){i.registerChartView(zJ),i.registerSeriesModel(VJ),i.registerLayout(zu("effectScatter"))}var G2e=function(i){le(e,i);function e(t,r,n){var a=i.call(this)||this;return a.add(a.createLine(t,r,n)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,n){return new cv(t,r,n)},e.prototype._updateEffectSymbol=function(t,r){var n=t.getItemModel(r),a=n.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");Ee(o)||(o=[o,o]);var l=t.getItemVisual(r,"style"),c=a.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=Nr(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(a.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(c),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,n){var a=this.childAt(1);if(a){var o=t.getItemLayout(n),s=r.get("period")*1e3,l=r.get("loop"),c=r.get("roundTrip"),u=r.get("constantSpeed"),h=Mn(r.get("delay"),function(f){return f/t.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),u>0&&(s=this._getLineLength(a)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){a.stopAnimation();var d=void 0;ft(h)?d=h(n):d=h,a.__t>0&&(d=-s*a.__t),this._animateSymbol(a,s,d,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},e.prototype._animateSymbol=function(t,r,n,a,o){if(r>0){t.__t=0;var s=this,l=t.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(n).during(function(){s._updateSymbolPosition(t)});a||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return bc(t.__p1,t.__cp1)+bc(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,n){this.childAt(0).updateData(t,r,n),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,n=t.__p2,a=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),c=Ba,u=Ky;s[0]=c(r[0],a[0],n[0],o),s[1]=c(r[1],a[1],n[1],o);var h=t.__t<1?u(r[0],a[0],n[0],o):u(n[0],a[0],r[0],1-o),d=t.__t<1?u(r[1],a[1],n[1],o):u(n[1],a[1],r[1],1-o);t.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=bc(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*bc(r,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var n=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,n,r)},e}(xt),CT=G2e;var W2e=function(i){le(e,i);function e(t,r,n){var a=i.call(this)||this;return a._createPolyline(t,r,n),a}return e.prototype._createPolyline=function(t,r,n){var a=t.getItemLayout(r),o=new Jn({shape:{points:a}});this.add(o),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var a=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(r)}};Si(o,s,a,r),this._updateCommonStl(t,r,n)},e.prototype._updateCommonStl=function(t,r,n){var a=this.childAt(0),o=t.getItemModel(r),s=n&&n.emphasisLineStyle,l=n&&n.focus,c=n&&n.blurScope,u=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var h=o.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),u=h.get("disabled"),l=h.get("focus"),c=h.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var d=a.ensureState("emphasis");d.style=s,pr(this,l,c,u)},e.prototype.updateLayout=function(t,r){var n=this.childAt(0);n.setShape("points",t.getItemLayout(r))},e}(xt),ET=W2e;var j2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,n){return new ET(t,r,n)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var n=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=bc(s,l),n.push(a)}if(a===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=a;this._offsets=n,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,n=this._points,a=this._offsets,o=n.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var c=Math.min(s+1,o-1);for(l=c;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var u=(r-a[l])/(a[l+1]-a[l]),h=n[l],d=n[l+1];t.x=h[0]*(1-u)+u*d[0],t.y=h[1]*(1-u)+u*d[1];var f=t.__t<1?d[0]-h[0]:h[0]-d[0],m=t.__t<1?d[1]-h[1]:h[1]-d[1];t.rotation=-Math.atan2(m,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e}(CT),HJ=j2e;var K2e=function(){function i(){this.polyline=!1,this.curveness=0,this.segs=[]}return i}(),X2e=function(i){le(e,i);function e(t){var r=i.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new K2e},e.prototype.buildPath=function(t,r){var n=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<n.length;){var s=n[o++];if(s>0){t.moveTo(n[o++],n[o++]);for(var l=1;l<s;l++)t.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var c=n[o++],u=n[o++],h=n[o++],d=n[o++];if(t.moveTo(c,u),a>0){var f=(c+h)/2-(u-d)*a,m=(u+d)/2-(h-c)*a;t.quadraticCurveTo(f,m,h,d)}else t.lineTo(h,d)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var n=this.shape,a=n.segs,o=n.curveness,s=this.style.lineWidth;if(n.polyline)for(var l=0,c=0;c<a.length;){var u=a[c++];if(u>0)for(var h=a[c++],d=a[c++],f=1;f<u;f++){var m=a[c++],y=a[c++];if(gh(h,d,m,y,s,t,r))return l}l++}else for(var l=0,c=0;c<a.length;){var h=a[c++],d=a[c++],m=a[c++],y=a[c++];if(o>0){var g=(h+m)/2-(d-y)*o,x=(d+y)/2-(m-h)*o;if(NC(h,d,g,x,m,y,s,t,r))return l}else if(gh(h,d,m,y,s,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=n[0],r=n[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<n.length;){var u=n[c++],h=n[c++];a=Math.min(u,a),s=Math.max(u,s),o=Math.min(h,o),l=Math.max(h,l)}t=this._rect=new Ht(a,o,s,l)}return t},e}(Kt),Y2e=function(){function i(){this.group=new xt}return i.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},i.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},i.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],n=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+n.length);s.set(a),s.set(n,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,t),l.__startIndex=e.start}},i.prototype.remove=function(){this._clear()},i.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},i.prototype._create=function(){var e=new X2e({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},i.prototype._setCommon=function(e,t,r){var n=t.hostModel;e.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),e.useStyle(n.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=Pt(e);o.seriesIndex=n.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},i.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},i}(),QJ=Y2e;var q2e={seriesType:"lines",plan:ec(),reset:function(i){var e=i.coordinateSystem;if(e){var t=i.get("polyline"),r=i.pipelineContext.large;return{progress:function(n,a){var o=[];if(r){var s=void 0,l=n.end-n.start;if(t){for(var c=0,u=n.start;u<n.end;u++)c+=i.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var h=0,d=[],u=n.start;u<n.end;u++){var f=i.getLineCoords(u,o);t&&(s[h++]=f);for(var m=0;m<f;m++)d=e.dataToPoint(o[m],!1,d),s[h++]=d[0],s[h++]=d[1]}a.setLayout("linesPoints",s)}else for(var u=n.start;u<n.end;u++){var y=a.getItemModel(u),f=i.getLineCoords(u,o),g=[];if(t)for(var x=0;x<f;x++)g.push(e.dataToPoint(o[x]));else{g[0]=e.dataToPoint(o[0]),g[1]=e.dataToPoint(o[1]);var b=y.get(["lineStyle","curveness"]);+b&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*b,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*b])}a.setItemLayout(u,g)}}}}}},TT=q2e;var Z2e=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=t.getData(),o=this._updateLineDraw(a,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),c=n.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var h=t.get("clip",!0)&&Ih(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var a=t.getData(),o=this._updateLineDraw(a,t);o.incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,n){var a=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=TT.reset(t,r,n);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,r){var n=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!n||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new QJ:new uv(o?a?HJ:ET:a?CT:cv),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),n=r.painter.getType()==="svg";!n&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e}(qi),GJ=Z2e;var J2e=typeof Uint32Array>"u"?Array:Uint32Array,$2e=typeof Float64Array>"u"?Array:Float64Array;function WJ(i){var e=i.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(i.data=Me(e,function(t){var r=[t[0].coord,t[1].coord],n={coords:r};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),$g([n,t[0],t[1]])}))}var eTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],WJ(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),i.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(WJ(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}i.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=RA(this._flatCoords,r.flatCoords),this._flatCoordsOffset=RA(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),n=r.option instanceof Array?r.option:r.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[n+o*2],r[o][1]=this._flatCoords[n+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),mi(t[0])){for(var n=t.length,a=new J2e(n),o=new $2e(n),s=0,l=0,c=0,u=0;u<n;){c++;var h=t[u++];a[l++]=s+r,a[l++]=h;for(var d=0;d<h;d++){var f=t[u++],m=t[u++];o[s++]=f,o[s++]=m,u>n}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){if(!1)var n;var a=new sa(["value"],this);return a.hasItemOption=!1,a.initData(t.data,[],function(o,s,l,c){if(o instanceof Array)return NaN;a.hasItemOption=!0;var u=o.value;if(u!=null)return u instanceof Array?u[c]:u}),a},e.prototype.formatTooltip=function(t,r,n){var a=this.getData(),o=a.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),c=o.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),wn("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(rr),jJ=eTe;function MT(i){return i instanceof Array||(i=[i,i]),i}var tTe={seriesType:"lines",reset:function(i){var e=MT(i.get("symbol")),t=MT(i.get("symbolSize")),r=i.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function n(a,o){var s=a.getItemModel(o),l=MT(s.getShallow("symbol",!0)),c=MT(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),c[0]&&a.setItemVisual(o,"fromSymbolSize",c[0]),c[1]&&a.setItemVisual(o,"toSymbolSize",c[1])}return{dataEach:r.hasItemOption?n:null}}},KJ=tTe;function jN(i){i.registerChartView(GJ),i.registerSeriesModel(jJ),i.registerLayout(TT),i.registerVisual(KJ)}var iTe=256,rTe=function(){function i(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=xs.createCanvas();this.canvas=e}return i.prototype.update=function(e,t,r,n,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),f=e.length;h.width=t,h.height=r;for(var m=0;m<f;++m){var y=e[m],g=y[0],x=y[1],b=y[2],S=n(b);d.globalAlpha=S,d.drawImage(s,g-u,x-u)}if(!h.width||!h.height)return h;for(var E=d.getImageData(0,0,h.width,h.height),D=E.data,B=0,F=D.length,H=this.minOpacity,U=this.maxOpacity,k=U-H;B<F;){var S=D[B+3]/256,j=Math.floor(S*(iTe-1))*4;if(S>0){var q=o(S)?l:c;S>0&&(S=S*k+H),D[B++]=q[j],D[B++]=q[j+1],D[B++]=q[j+2],D[B++]=q[j+3]*S*256}else B+=4}return d.putImageData(E,0,0),h},i.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=xs.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var n=e.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-t,t,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),e},i.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,n=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,a),n[o++]=a[0],n[o++]=a[1],n[o++]=a[2],n[o++]=a[3];return n},i}(),XJ=rTe;function nTe(i,e,t){var r=i[1]-i[0];e=Me(e,function(o){return{interval:[(o.interval[0]-i[0])/r,(o.interval[1]-i[0])/r]}});var n=e.length,a=0;return function(o){var s;for(s=a;s<n;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===n)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<n&&t[s]}}function aTe(i,e){var t=i[1]-i[0];return e=[(e[0]-i[0])/t,(e[1]-i[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function YJ(i){var e=i.dimensions;return e[0]==="lng"&&e[1]==="lat"}var oTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):YJ(o)&&this._renderOnGeo(o,t,a,n)},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,n,a){var o=r.coordinateSystem;o&&(YJ(o)?this.render(r,n,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Hs(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,n,a,o){var s=t.coordinateSystem,l=Vc(s,"cartesian2d"),c,u,h,d;if(l){var f=s.getAxis("x"),m=s.getAxis("y");c=f.getBandWidth()+.5,u=m.getBandWidth()+.5,h=f.scale.getExtent(),d=m.scale.getExtent()}for(var y=this.group,g=t.getData(),x=t.getModel(["emphasis","itemStyle"]).getItemStyle(),b=t.getModel(["blur","itemStyle"]).getItemStyle(),S=t.getModel(["select","itemStyle"]).getItemStyle(),E=t.get(["itemStyle","borderRadius"]),D=Kr(t),B=t.getModel("emphasis"),F=B.get("focus"),H=B.get("blurScope"),U=B.get("disabled"),k=l?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],j=n;j<a;j++){var q=void 0,X=g.getItemVisual(j,"style");if(l){var Y=g.get(k[0],j),J=g.get(k[1],j);if(isNaN(g.get(k[2],j))||isNaN(Y)||isNaN(J)||Y<h[0]||Y>h[1]||J<d[0]||J>d[1])continue;var te=s.dataToPoint([Y,J]);q=new pi({shape:{x:te[0]-c/2,y:te[1]-u/2,width:c,height:u},style:X})}else{if(isNaN(g.get(k[1],j)))continue;q=new pi({z2:1,shape:s.dataToRect([g.get(k[0],j)]).contentShape,style:X})}if(g.hasItemOption){var de=g.getItemModel(j),ue=de.getModel("emphasis");x=ue.getModel("itemStyle").getItemStyle(),b=de.getModel(["blur","itemStyle"]).getItemStyle(),S=de.getModel(["select","itemStyle"]).getItemStyle(),E=de.get(["itemStyle","borderRadius"]),F=ue.get("focus"),H=ue.get("blurScope"),U=ue.get("disabled"),D=Kr(de)}q.shape.r=E;var ve=t.getRawValue(j),_e="-";ve&&ve[2]!=null&&(_e=ve[2]+""),fn(q,D,{labelFetcher:t,labelDataIndex:j,defaultOpacity:X.opacity,defaultText:_e}),q.ensureState("emphasis").style=x,q.ensureState("blur").style=b,q.ensureState("select").style=S,pr(q,F,H,U),q.incremental=o,o&&(q.states.emphasis.hoverLayer=!0),y.add(q),g.setItemGraphicEl(j,q),this._progressiveEls&&this._progressiveEls.push(q)}},e.prototype._renderOnGeo=function(t,r,n,a){var o=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new XJ;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),h=t.getRoamTransform();u.applyTransform(h);var d=Math.max(u.x,0),f=Math.max(u.y,0),m=Math.min(u.width+u.x,a.getWidth()),y=Math.min(u.height+u.y,a.getHeight()),g=m-d,x=y-f,b=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(b,function(F,H,U){var k=t.dataToPoint([F,H]);return k[0]-=d,k[1]-=f,k.push(U),k}),E=n.getExtent(),D=n.type==="visualMap.continuous"?aTe(E,n.option.range):nTe(E,n.getPieceList(),n.option.selected);c.update(S,g,x,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},D);var B=new yn({style:{width:g,height:x,x:d,y:f,image:c.canvas},silent:!0});this.group.add(B)},e.type="heatmap",e}(qi),qJ=oTe;var sTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return zo(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=xd.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(rr),ZJ=sTe;function KN(i){i.registerChartView(qJ),i.registerSeriesModel(ZJ)}var lTe=["itemStyle","borderWidth"],JJ=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],XN=new Vs,cTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:u,valueDim:JJ[+u],categoryDim:JJ[1-+u]};o.diff(s).add(function(m){if(o.hasValue(m)){var y=e$(o,m),g=$J(o,m,y,d),x=t$(o,d,g);o.setItemGraphicEl(m,x),a.add(x),r$(x,d,g)}}).update(function(m,y){var g=s.getItemGraphicEl(y);if(!o.hasValue(m)){a.remove(g);return}var x=e$(o,m),b=$J(o,m,x,d),S=u$(o,b);g&&S!==g.__pictorialShapeStr&&(a.remove(g),o.setItemGraphicEl(m,null),g=null),g?mTe(g,d,b):g=t$(o,d,b,!0),o.setItemGraphicEl(m,g),g.__pictorialSymbolMeta=b,a.add(g),r$(g,d,b)}).remove(function(m){var y=s.getItemGraphicEl(m);y&&i$(s,m,y.__pictorialSymbolMeta.animationModel,y)}).execute();var f=t.get("clip",!0)?Ih(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var n=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(o){i$(a,Pt(o).dataIndex,t,o)}):n.removeAll()},e.type="pictorialBar",e}(qi);function $J(i,e,t,r){var n=i.getItemLayout(e),a=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),d={dataIndex:e,layout:n,itemModel:t,symbolType:i.getItemVisual(e,"symbol")||"circle",style:i.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};uTe(t,a,n,r,d),hTe(i,e,n,a,o,d.boundingLength,d.pxSign,u,r,d),dTe(t,d.symbolScale,c,r,d);var f=d.symbolSize,m=tc(t.get("symbolOffset"),f);return fTe(t,f,n,a,o,m,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function uTe(i,e,t,r,n){var a=r.valueDim,o=i.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(t[a.wh]<=0),u;if(Ee(o)){var h=[YN(s,o[0])-l,YN(s,o[1])-l];h[1]<h[0]&&h.reverse(),u=h[c]}else o!=null?u=YN(s,o)-l:e?u=r.coordSysExtent[a.index][c]-l:u=t[a.wh];n.boundingLength=u,e&&(n.repeatCutLength=t[a.wh]),n.pxSign=u>0?1:-1}function YN(i,e){return i.toGlobalCoord(i.dataToCoord(i.scale.parse(e)))}function hTe(i,e,t,r,n,a,o,s,l,c){var u=l.valueDim,h=l.categoryDim,d=Math.abs(t[h.wh]),f=i.getItemVisual(e,"symbolSize"),m;Ee(f)?m=f.slice():f==null?m=["100%","100%"]:m=[f,f],m[h.index]=ot(m[h.index],d),m[u.index]=ot(m[u.index],r?d:Math.abs(a)),c.symbolSize=m;var y=c.symbolScale=[m[0]/s,m[1]/s];y[u.index]*=(l.isHorizontal?-1:1)*o}function dTe(i,e,t,r,n){var a=i.get(lTe)||0;a&&(XN.attr({scaleX:e[0],scaleY:e[1],rotation:t}),XN.updateTransform(),a/=XN.getLineScale(),a*=e[r.valueDim.index]),n.valueLineWidth=a||0}function fTe(i,e,t,r,n,a,o,s,l,c,u,h){var d=u.categoryDim,f=u.valueDim,m=h.pxSign,y=Math.max(e[f.index]+s,0),g=y;if(r){var x=Math.abs(l),b=Mn(i.get("symbolMargin"),"15%")+"",S=!1;b.lastIndexOf("!")===b.length-1&&(S=!0,b=b.slice(0,b.length-1));var E=ot(b,e[f.index]),D=Math.max(y+E*2,0),B=S?0:E*2,F=ax(r),H=F?r:n$((x+B)/D),U=x-H*y;E=U/2/(S?H:Math.max(H-1,1)),D=y+E*2,B=S?0:E*2,!F&&r!=="fixed"&&(H=c?n$((Math.abs(c)+B)/D):0),g=H*D-B,h.repeatTimes=H,h.symbolMargin=E}var k=m*(g/2),j=h.pathPosition=[];j[d.index]=t[d.wh]/2,j[f.index]=o==="start"?k:o==="end"?l-k:l/2,a&&(j[0]+=a[0],j[1]+=a[1]);var q=h.bundlePosition=[];q[d.index]=t[d.xy],q[f.index]=t[f.xy];var X=h.barRectShape=Ce({},t);X[f.wh]=m*Math.max(Math.abs(t[f.wh]),Math.abs(j[f.index]+k)),X[d.wh]=t[d.wh];var Y=h.clipShape={};Y[d.xy]=-t[d.xy],Y[d.wh]=u.ecSize[d.wh],Y[f.xy]=0,Y[f.wh]=t[f.wh]}function a$(i){var e=i.symbolPatternSize,t=Nr(i.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function o$(i,e,t,r){var n=i.__pictorialBundle,a=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,c=t.repeatTimes||0,u=0,h=a[e.valueDim.index]+o+t.symbolMargin*2;for(qN(i,function(y){y.__pictorialAnimationIndex=u,y.__pictorialRepeatTimes=c,u<c?mv(y,null,m(u),t,r):mv(y,null,{scaleX:0,scaleY:0},t,r,function(){n.remove(y)}),u++});u<c;u++){var d=a$(t);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=c,n.add(d);var f=m(u);mv(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function m(y){var g=s.slice(),x=t.pxSign,b=y;return(t.symbolRepeatDirection==="start"?x>0:x<0)&&(b=c-1-y),g[l.index]=h*(b-c/2+.5)+s[l.index],{x:g[0],y:g[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function s$(i,e,t,r){var n=i.__pictorialBundle,a=i.__pictorialMainPath;a?mv(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=i.__pictorialMainPath=a$(t),n.add(a),mv(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function l$(i,e,t){var r=Ce({},e.barRectShape),n=i.__pictorialBarRect;n?mv(n,null,{shape:r},e,t):(n=i.__pictorialBarRect=new pi({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,i.add(n))}function c$(i,e,t,r){if(t.symbolClip){var n=i.__pictorialClipPath,a=Ce({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(n)Si(n,{shape:a},s,l);else{a[o.wh]=0,n=new pi({shape:a}),i.__pictorialBundle.setClipPath(n),i.__pictorialClipPath=n;var c={};c[o.wh]=t.clipShape[o.wh],gi[r?"updateProps":"initProps"](n,{shape:c},s,l)}}}function e$(i,e){var t=i.getItemModel(e);return t.getAnimationDelayParams=pTe,t.isAnimationEnabled=ATe,t}function pTe(i){return{index:i.__pictorialAnimationIndex,count:i.__pictorialRepeatTimes}}function ATe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function t$(i,e,t,r){var n=new xt,a=new xt;return n.add(a),n.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?o$(n,e,t):s$(n,e,t),l$(n,t,r),c$(n,e,t,r),n.__pictorialShapeStr=u$(i,t),n.__pictorialSymbolMeta=t,n}function mTe(i,e,t){var r=t.animationModel,n=t.dataIndex,a=i.__pictorialBundle;Si(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,n),t.symbolRepeat?o$(i,e,t,!0):s$(i,e,t,!0),l$(i,t,!0),c$(i,e,t,!0)}function i$(i,e,t,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var a=[];qN(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),W(a,function(o){Pc(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),i.setItemGraphicEl(e,null)}function u$(i,e){return[i.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function qN(i,e,t){W(i.__pictorialBundle.children(),function(r){r!==i.__pictorialBarRect&&e.call(t,r)})}function mv(i,e,t,r,n,a){e&&i.attr(e),r.symbolClip&&!n?t&&i.attr(t):t&&gi[n?"updateProps":"initProps"](i,t,r.animationModel,r.dataIndex,a)}function r$(i,e,t){var r=t.dataIndex,n=t.itemModel,a=n.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),c=n.getShallow("cursor"),u=a.get("focus"),h=a.get("blurScope"),d=a.get("scale");qN(i,function(y){if(y instanceof yn){var g=y.style;y.useStyle(Ce({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},t.style))}else y.useStyle(t.style);var x=y.ensureState("emphasis");x.style=o,d&&(x.scaleX=y.scaleX*1.1,x.scaleY=y.scaleY*1.1),y.ensureState("blur").style=s,y.ensureState("select").style=l,c&&(y.cursor=c),y.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],m=i.__pictorialBarRect;m.ignoreClip=!0,fn(m,Kr(n),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:ku(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),pr(i,u,h,a.get("disabled"))}function n$(i){var e=Math.round(i);return Math.abs(i-e)<1e-4?e:Math.ceil(i)}var h$=cTe;var gTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,i.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Cs(Z0.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(Z0),d$=gTe;function ZN(i){i.registerChartView(h$),i.registerSeriesModel(d$),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,Ut(u2,"pictorialBar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,h2("pictorialBar"))}var vTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,n){var a=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),c=a.getLayout("layoutInfo"),u=c.rect,h=c.boundaryGap;s.x=0,s.y=u.y+h[0];function d(g){return g.name}var f=new ns(this._layersSeries||[],l,d,d),m=[];f.add(st(y,this,"add")).update(st(y,this,"update")).remove(st(y,this,"remove")).execute();function y(g,x,b){var S=o._layers;if(g==="remove"){s.remove(S[x]);return}for(var E=[],D=[],B,F=l[x].indices,H=0;H<F.length;H++){var U=a.getItemLayout(F[H]),k=U.x,j=U.y0,q=U.y;E.push(k,j),D.push(k,j+q),B=a.getItemVisual(F[H],"style")}var X,Y=a.getItemLayout(F[0]),J=t.getModel("label"),te=J.get("margin"),de=t.getModel("emphasis");if(g==="add"){var ue=m[x]=new xt;X=new z2({shape:{points:E,stackedOnPoints:D,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),ue.add(X),s.add(ue),t.isAnimationEnabled()&&X.setClipPath(yTe(X.getBoundingRect(),t,function(){X.removeClipPath()}))}else{var ue=S[b];X=ue.childAt(0),s.add(ue),m[x]=ue,Si(X,{shape:{points:E,stackedOnPoints:D}},t),eo(X)}fn(X,Kr(t),{labelDataIndex:F[H-1],defaultText:a.getName(F[H-1]),inheritColor:B.fill},{normal:{verticalAlign:"middle"}}),X.setTextConfig({position:null,local:!0});var ve=X.getTextContent();ve&&(ve.x=Y.x-te,ve.y=Y.y0+Y.y/2),X.useStyle(B),a.setItemGraphicEl(x,X),Dn(X,t),pr(X,de.get("focus"),de.get("blurScope"),de.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(qi);function yTe(i,e,t){var r=new pi({shape:{x:i.x-10,y:i.y-10,width:0,height:i.height+20}});return Ar(r,{shape:{x:i.x-50,width:i.width+100,height:i.height+20}},e,t),r}var f$=vTe;var JN=2,xTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dh(st(this.getData,this),st(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,n={},a=lx(t,function(d){return n.hasOwnProperty(d[0]+"")||(n[d[0]+""]=-1),d[2]}),o=[];a.buckets.each(function(d,f){o.push({name:f,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var c=o[l].name,u=0;u<o[l].dataList.length;++u){var h=o[l].dataList[u][0]+"";n[h]=l}for(var h in n)n.hasOwnProperty(h)&&n[h]!==l&&(n[h]=l,t[r]=[h,0,c],r++)}return t},e.prototype.getInitialData=function(t,r){for(var n=this.getReferringComponents("singleAxis",Jr).models[0],a=n.get("type"),o=Xi(t.data,function(m){return m[2]!==void 0}),s=this.fixData(o||[]),l=[],c=this.nameMap=ct(),u=0,h=0;h<s.length;++h)l.push(s[h][JN]),c.get(s[h][JN])||(c.set(s[h][JN],u),u++);var d=Ou(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Cm(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new sa(d,this);return f.initData(s),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),n=[],a=0;a<r;++a)n[a]=a;var o=t.mapDimension("single"),s=lx(n,function(c){return t.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(h,d){return t.get(o,h)-t.get(o,d)}),l.push({name:u,indices:c})}),l},e.prototype.getAxisTooltipData=function(t,r,n){Ee(t)||(t=t?[t]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,c,u=0;u<l;++u){for(var h=Number.MAX_VALUE,d=-1,f=o[u].indices.length,m=0;m<f;++m){var y=a.get(t[0],o[u].indices[m]),g=Math.abs(y-r);g<=h&&(c=y,h=g,d=o[u].indices[m])}s.push(d)}return{dataIndices:s,nestestValue:c}},e.prototype.formatTooltip=function(t,r,n){var a=this.getData(),o=a.getName(t),s=a.get(a.mapDimension("value"),t);return wn("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(rr),p$=xTe;function $N(i,e){i.eachSeriesByType("themeRiver",function(t){var r=t.getData(),n=t.coordinateSystem,a={},o=n.getRect();a.rect=o;var s=t.get("boundaryGap"),l=n.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=ot(s[0],o.height),s[1]=ot(s[1],o.height);var c=o.height-s[0]-s[1];A$(r,t,c)}else{s[0]=ot(s[0],o.width),s[1]=ot(s[1],o.width);var u=o.width-s[0]-s[1];A$(r,t,u)}r.setLayout("layoutInfo",a)})}function A$(i,e,t){if(i.count())for(var r=e.coordinateSystem,n=e.getLayerSeries(),a=i.mapDimension("single"),o=i.mapDimension("value"),s=Me(n,function(g){return Me(g.indices,function(x){var b=r.dataToPoint(i.get(a,x));return b[1]=i.get(o,x),b})}),l=_Te(s),c=l.y0,u=t/l.max,h=n.length,d=n[0].indices.length,f,m=0;m<d;++m){f=c[m]*u,i.setItemLayout(n[0].indices[m],{layerIndex:0,x:s[0][m][0],y0:f,y:s[0][m][1]*u});for(var y=1;y<h;++y)f+=s[y-1][m][1]*u,i.setItemLayout(n[y].indices[m],{layerIndex:y,x:s[y][m][0],y0:f,y:s[y][m][1]*u})}}function _Te(i){for(var e=i.length,t=i[0].length,r=[],n=[],a=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=i[l][o][1];s>a&&(a=s),r.push(s)}for(var c=0;c<t;++c)n[c]=(a-r[c])/2;a=0;for(var u=0;u<t;++u){var h=r[u]+n[u];h>a&&(a=h)}return{y0:n,max:a}}function eU(i){i.registerChartView(f$),i.registerSeriesModel(p$),i.registerLayout($N),i.registerProcessor(Vu("themeRiver"))}var wTe=2,bTe=4,STe=function(i){le(e,i);function e(t,r,n,a){var o=i.call(this)||this;o.z2=wTe,o.textConfig={inside:!0},Pt(o).seriesIndex=r.seriesIndex;var s=new yi({z2:bTe,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,r,n,a),o}return e.prototype.updateData=function(t,r,n,a,o){this.node=r,r.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var s=this;Pt(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),h=Ce({},u);h.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var f=r.getVisual("decal");f&&(d.decal=Lu(f,o));var m=Bh(l.getModel("itemStyle"),h,!0);Ce(h,m),W(uo,function(b){var S=s.ensureState(b),E=l.getModel([b,"itemStyle"]);S.style=E.getItemStyle();var D=Bh(E,h);D&&(S.shape=D)}),t?(s.setShape(h),s.shape.r=u.r0,Ar(s,{shape:{r:u.r}},n,r.dataIndex)):(Si(s,{shape:h},n),eo(s)),s.useStyle(d),this._updateLabel(n);var y=l.getShallow("cursor");y&&s.attr("cursor",y),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var g=c.get("focus"),x=g==="ancestor"?r.getAncestorsIndices():g==="descendant"?r.getDescendantIndices():g;pr(this,x,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,n=this.node.getModel(),a=n.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),u=Math.sin(l),h=this,d=h.getTextContent(),f=this.node.dataIndex,m=a.get("minAngle")/180*Math.PI,y=a.get("show")&&!(m!=null&&Math.abs(s)<m);d.ignore=!y,W(Xf,function(x){var b=x==="normal"?n.getModel("label"):n.getModel([x,"label"]),S=x==="normal",E=S?d:d.ensureState(x),D=t.getFormattedLabel(f,x);S&&(D=D||r.node.name),E.style=br(b,{},null,x!=="normal",!0),D&&(E.style.text=D);var B=b.get("show");B!=null&&!S&&(E.ignore=!B);var F=g(b,"position"),H=S?h:h.states[x],U=H.style.fill;H.textConfig={outsideFill:b.get("color")==="inherit"?U:null,inside:F!=="outside"};var k,j=g(b,"distance")||0,q=g(b,"align"),X=g(b,"rotate"),Y=Math.PI*.5,J=Math.PI*1.5,te=es(X==="tangential"?Math.PI/2-l:l),de=te>Y&&!qA(te-Y)&&te<J;F==="outside"?(k=o.r+j,q=de?"right":"left"):!q||q==="center"?(s===2*Math.PI&&o.r0===0?k=0:k=(o.r+o.r0)/2,q="center"):q==="left"?(k=o.r0+j,q=de?"right":"left"):q==="right"&&(k=o.r-j,q=de?"left":"right"),E.style.align=q,E.style.verticalAlign=g(b,"verticalAlign")||"middle",E.x=k*c+o.cx,E.y=k*u+o.cy;var ue=0;X==="radial"?ue=es(-l)+(de?Math.PI:0):X==="tangential"?ue=es(Math.PI/2-l)+(de?Math.PI:0):mi(X)&&(ue=X*Math.PI/180),E.rotation=es(ue)});function g(x,b){var S=x.get(b);return S??a.get(b)}d.dirtyStyle()},e}(Ra),tU=STe;var IT="sunburstRootToNode",m$="sunburstHighlight",CTe="sunburstUnhighlight";function g$(i){i.registerAction({type:IT,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(n,a){var o=Td(e,[IT],n);if(o){var s=n.getViewRoot();s&&(e.direction=nv(s,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),i.registerAction({type:m$,update:"none"},function(e,t,r){e=Ce({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(a){var o=Td(e,[m$],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(Ce(e,{type:"highlight"}))}),i.registerAction({type:CTe,update:"updateView"},function(e,t,r){e=Ce({},e),r.dispatchAction(Ce(e,{type:"downplay"}))})}var ETe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,a){var o=this;this.seriesModel=t,this.api=n,this.ecModel=r;var s=t.getData(),l=s.tree.root,c=t.getViewRoot(),u=this.group,h=t.get("renderLabelForZeroData"),d=[];c.eachNode(function(b){d.push(b)});var f=this._oldChildren||[];m(d,f),x(l,c),this._initEvents(),this._oldChildren=d;function m(b,S){if(b.length===0&&S.length===0)return;new ns(S,b,E,E).add(D).update(D).remove(Ut(D,null)).execute();function E(B){return B.getId()}function D(B,F){var H=B==null?null:b[B],U=F==null?null:S[F];y(H,U)}}function y(b,S){if(!h&&b&&!b.getValue()&&(b=null),b!==l&&S!==l){if(S&&S.piece)b?(S.piece.updateData(!1,b,t,r,n),s.setItemGraphicEl(b.dataIndex,S.piece)):g(S);else if(b){var E=new tU(b,t,r,n);u.add(E),s.setItemGraphicEl(b.dataIndex,E)}}}function g(b){b&&b.piece&&(u.remove(b.piece),b.piece=null)}function x(b,S){S.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,b,t,r,n):(o.virtualPiece=new tU(b,t,r,n),u.add(o.virtualPiece)),S.piece.off("click"),o.virtualPiece.on("click",function(E){o._rootToNode(S.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(o){if(!n&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";vm(c,u)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:IT,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var n=r.getData(),a=n.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(qi),v$=ETe;var TTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};y$(n);var a=this._levelModels=Me(t.levels||[],function(l){return new ir(l,this,r)},this),o=rv.createTree(n,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var h=o.getNodeByDataIndex(u),d=a[h.depth];return d&&(c.parentModel=d),c})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=i.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=gp(n,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){C_(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(rr);function y$(i){var e=0;W(i.children,function(r){y$(r);var n=r.value;Ee(n)&&(n=n[0]),e+=n});var t=i.value;Ee(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Ee(i.value)?i.value[0]=t:i.value=t}var x$=TTe;var _$=Math.PI/180;function iU(i,e,t){e.eachSeriesByType(i,function(r){var n=r.get("center"),a=r.get("radius");Ee(a)||(a=[0,a]),Ee(n)||(n=[n,n]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),c=ot(n[0],o),u=ot(n[1],s),h=ot(a[0],l/2),d=ot(a[1],l/2),f=-r.get("startAngle")*_$,m=r.get("minAngle")*_$,y=r.getData().tree.root,g=r.getViewRoot(),x=g.depth,b=r.get("sort");b!=null&&w$(g,b);var S=0;W(g.children,function(te){!isNaN(te.getValue())&&S++});var E=g.getValue(),D=Math.PI/(E||S)*2,B=g.depth>0,F=g.height-(B?-1:1),H=(d-h)/(F||1),U=r.get("clockwise"),k=r.get("stillShowZeroSum"),j=U?1:-1,q=function(te,de){if(te){var ue=de;if(te!==y){var ve=te.getValue(),_e=E===0&&k?D:ve*D;_e<m&&(_e=m),ue=de+j*_e;var Re=te.depth-x-(B?-1:1),Oe=h+H*Re,Te=h+H*(Re+1),Se=r.getLevelModel(te);if(Se){var nt=Se.get("r0",!0),rt=Se.get("r",!0),dt=Se.get("radius",!0);dt!=null&&(nt=dt[0],rt=dt[1]),nt!=null&&(Oe=ot(nt,l/2)),rt!=null&&(Te=ot(rt,l/2))}te.setLayout({angle:_e,startAngle:de,endAngle:ue,clockwise:U,cx:c,cy:u,r0:Oe,r:Te})}if(te.children&&te.children.length){var tt=0;W(te.children,function(ht){tt+=q(ht,de+tt)})}return ue-de}};if(B){var X=h,Y=h+H,J=Math.PI*2;y.setLayout({angle:J,startAngle:f,endAngle:f+J,clockwise:U,cx:c,cy:u,r0:X,r:Y})}q(g,f)})}function w$(i,e){var t=i.children||[];i.children=MTe(t,e),t.length&&W(i.children,function(r){w$(r,e)})}function MTe(i,e){if(ft(e)){var t=Me(i,function(n,a){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:a}});return t.sort(function(n,a){return e(n.params,a.params)}),Me(t,function(n){return i[n.index]})}else{var r=e==="asc";return i.sort(function(n,a){var o=(n.getValue()-a.getValue())*(r?1:-1);return o===0?(n.dataIndex-a.dataIndex)*(r?-1:1):o})}}function rU(i){var e={};function t(r,n,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=n.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&Ye(s)&&(s=sC(s,(r.depth-1)/(a-1)*.5)),s}i.eachSeriesByType("sunburst",function(r){var n=r.getData(),a=n.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,r,a.root.height));var c=n.ensureUniqueItemVisual(o.dataIndex,"style");Ce(c,l)})})}function nU(i){i.registerChartView(v$),i.registerSeriesModel(x$),i.registerLayout(Ut(iU,"sunburst")),i.registerProcessor(Ut(Vu,"sunburst")),i.registerVisual(rU),g$(i)}var aU={color:"fill",borderColor:"stroke"},b$={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ph=$t(),ITe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return zo(null,this)},e.prototype.getDataParams=function(t,r,n){var a=i.prototype.getDataParams.call(this,t,r);return n&&(a.info=Ph(n).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(rr),S$=ITe;function BTe(i,e){return e=e||[0,0],Me(["x","y"],function(t,r){var n=this.getAxis(t),a=e[r],o=i[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-o)-n.dataToCoord(a+o))},this)}function oU(i){var e=i.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return i.dataToPoint(t)},size:st(BTe,i)}}}function DTe(i,e){return e=e||[0,0],Me([0,1],function(t){var r=e[t],n=i[t]/2,a=[],o=[];return a[t]=r-n,o[t]=r+n,a[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(o)[t])},this)}function sU(i){var e=i.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:i.getZoom()},api:{coord:function(t){return i.dataToPoint(t)},size:st(DTe,i)}}}function RTe(i,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,n=(i instanceof Array?i[0]:i)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-n)-t.dataToCoord(r+n))}function lU(i){var e=i.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return i.dataToPoint(t)},size:st(RTe,i)}}}function PTe(i,e){return e=e||[0,0],Me(["Radius","Angle"],function(t,r){var n="get"+t+"Axis",a=this[n](),o=e[r],s=i[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function cU(i){var e=i.getRadiusAxis(),t=i.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:i.cx,cy:i.cy,r:r[1],r0:r[0]},api:{coord:function(n){var a=e.dataToRadius(n[0]),o=t.dataToAngle(n[1]),s=i.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:st(PTe,i)}}}function uU(i){var e=i.getRect(),t=i.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:i.getCellWidth(),cellHeight:i.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,n){return i.dataToPoint(r,n)}}}}function BT(i,e,t,r){return i&&(i.legacy||i.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||Mt(i,"text")))}function DT(i,e,t){var r=i,n,a,o;if(e==="text")o=r;else{o={},Mt(r,"text")&&(o.text=r.text),Mt(r,"rich")&&(o.rich=r.rich),Mt(r,"textFill")&&(o.fill=r.textFill),Mt(r,"textStroke")&&(o.stroke=r.textStroke),Mt(r,"fontFamily")&&(o.fontFamily=r.fontFamily),Mt(r,"fontSize")&&(o.fontSize=r.fontSize),Mt(r,"fontStyle")&&(o.fontStyle=r.fontStyle),Mt(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},n={};var s=Mt(r,"textPosition");t?n.position=s?r.textPosition:"inside":s&&(n.position=r.textPosition),Mt(r,"textPosition")&&(n.position=r.textPosition),Mt(r,"textOffset")&&(n.offset=r.textOffset),Mt(r,"textRotation")&&(n.rotation=r.textRotation),Mt(r,"textDistance")&&(n.distance=r.textDistance)}return C$(o,i),W(o.rich,function(l){C$(l,l)}),{textConfig:n,textContent:a}}function C$(i,e){e&&(e.font=e.textFont||e.font,Mt(e,"textStrokeWidth")&&(i.lineWidth=e.textStrokeWidth),Mt(e,"textAlign")&&(i.align=e.textAlign),Mt(e,"textVerticalAlign")&&(i.verticalAlign=e.textVerticalAlign),Mt(e,"textLineHeight")&&(i.lineHeight=e.textLineHeight),Mt(e,"textWidth")&&(i.width=e.textWidth),Mt(e,"textHeight")&&(i.height=e.textHeight),Mt(e,"textBackgroundColor")&&(i.backgroundColor=e.textBackgroundColor),Mt(e,"textPadding")&&(i.padding=e.textPadding),Mt(e,"textBorderColor")&&(i.borderColor=e.textBorderColor),Mt(e,"textBorderWidth")&&(i.borderWidth=e.textBorderWidth),Mt(e,"textBorderRadius")&&(i.borderRadius=e.textBorderRadius),Mt(e,"textBoxShadowColor")&&(i.shadowColor=e.textBoxShadowColor),Mt(e,"textBoxShadowBlur")&&(i.shadowBlur=e.textBoxShadowBlur),Mt(e,"textBoxShadowOffsetX")&&(i.shadowOffsetX=e.textBoxShadowOffsetX),Mt(e,"textBoxShadowOffsetY")&&(i.shadowOffsetY=e.textBoxShadowOffsetY))}function hU(i,e,t){var r=i;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var n=r.textPosition.indexOf("inside")>=0,a=i.fill||"#000";E$(r,e);var o=r.textFill==null;return n?o&&(r.textFill=t.insideFill||"#fff",!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=i.fill||t.outsideFill||"#000"),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,W(e.rich,function(s){E$(s,s)}),r}function E$(i,e){e&&(Mt(e,"fill")&&(i.textFill=e.fill),Mt(e,"stroke")&&(i.textStroke=e.fill),Mt(e,"lineWidth")&&(i.textStrokeWidth=e.lineWidth),Mt(e,"font")&&(i.font=e.font),Mt(e,"fontStyle")&&(i.fontStyle=e.fontStyle),Mt(e,"fontWeight")&&(i.fontWeight=e.fontWeight),Mt(e,"fontSize")&&(i.fontSize=e.fontSize),Mt(e,"fontFamily")&&(i.fontFamily=e.fontFamily),Mt(e,"align")&&(i.textAlign=e.align),Mt(e,"verticalAlign")&&(i.textVerticalAlign=e.verticalAlign),Mt(e,"lineHeight")&&(i.textLineHeight=e.lineHeight),Mt(e,"width")&&(i.textWidth=e.width),Mt(e,"height")&&(i.textHeight=e.height),Mt(e,"backgroundColor")&&(i.textBackgroundColor=e.backgroundColor),Mt(e,"padding")&&(i.textPadding=e.padding),Mt(e,"borderColor")&&(i.textBorderColor=e.borderColor),Mt(e,"borderWidth")&&(i.textBorderWidth=e.borderWidth),Mt(e,"borderRadius")&&(i.textBorderRadius=e.borderRadius),Mt(e,"shadowColor")&&(i.textBoxShadowColor=e.shadowColor),Mt(e,"shadowBlur")&&(i.textBoxShadowBlur=e.shadowBlur),Mt(e,"shadowOffsetX")&&(i.textBoxShadowOffsetX=e.shadowOffsetX),Mt(e,"shadowOffsetY")&&(i.textBoxShadowOffsetY=e.shadowOffsetY),Mt(e,"textShadowColor")&&(i.textShadowColor=e.textShadowColor),Mt(e,"textShadowBlur")&&(i.textShadowBlur=e.textShadowBlur),Mt(e,"textShadowOffsetX")&&(i.textShadowOffsetX=e.textShadowOffsetX),Mt(e,"textShadowOffsetY")&&(i.textShadowOffsetY=e.textShadowOffsetY))}var B$={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},T$=si(B$),ggt=qo(Yl,function(i,e){return i[e]=1,i},{}),vgt=Yl.join(", "),U_=["","style","shape","extra"],gv=$t();function dU(i,e,t,r,n){var a=i+"Animation",o=_h(i,r,n)||{},s=gv(e).userDuring;return o.duration>0&&(o.during=s?st(UTe,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=i),Ce(o,t[a]),o}function vv(i,e,t,r){r=r||{};var n=r.dataIndex,a=r.isInit,o=r.clearStyle,s=t.isAnimationEnabled(),l=gv(i),c=e.style;l.userDuring=e.during;var u={},h={};if(zTe(i,e,h),I$("shape",e,h),I$("extra",e,h),!a&&s&&(kTe(i,e,u),M$("shape",i,e,u),M$("extra",i,e,u),VTe(i,e,c,u)),h.style=c,LTe(i,h,o),FTe(i,e),s)if(a){var d={};W(U_,function(m){var y=m?e[m]:e;y&&y.enterFrom&&(m&&(d[m]=d[m]||{}),Ce(m?d[m]:d,y.enterFrom))});var f=dU("enter",i,e,t,n);f.duration>0&&i.animateFrom(d,f)}else OTe(i,e,n||0,t,u);fU(i,e),c?i.dirty():i.markRedraw()}function fU(i,e){for(var t=gv(i).leaveToProps,r=0;r<U_.length;r++){var n=U_[r],a=n?e[n]:e;a&&a.leaveTo&&(t||(t=gv(i).leaveToProps={}),n&&(t[n]=t[n]||{}),Ce(n?t[n]:t,a.leaveTo))}}function yv(i,e,t,r){if(i){var n=i.parent,a=gv(i).leaveToProps;if(a){var o=dU("update",i,e,t,0);o.done=function(){n.remove(i),r&&r()},i.animateTo(a,o)}else n.remove(i),r&&r()}}function xp(i){return i==="all"}function LTe(i,e,t){var r=e.style;if(!i.isGroup&&r){if(t){i.useStyle({});for(var n=i.animators,a=0;a<n.length;a++){var o=n[a];o.targetName==="style"&&o.changeTarget(i.style)}}i.setStyle(r)}e&&(e.style=null,e&&i.attr(e),e.style=r)}function OTe(i,e,t,r,n){if(n){var a=dU("update",i,e,r,t);a.duration>0&&i.animateFrom(n,a)}}function FTe(i,e){Mt(e,"silent")&&(i.silent=e.silent),Mt(e,"ignore")&&(i.ignore=e.ignore),i instanceof Da&&Mt(e,"invisible")&&(i.invisible=e.invisible),i instanceof Kt&&Mt(e,"autoBatch")&&(i.autoBatch=e.autoBatch)}var Lh={},NTe={setTransform:function(i,e){return Lh.el[i]=e,this},getTransform:function(i){return Lh.el[i]},setShape:function(i,e){var t=Lh.el,r=t.shape||(t.shape={});return r[i]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(i){var e=Lh.el.shape;if(e)return e[i]},setStyle:function(i,e){var t=Lh.el,r=t.style;return r&&(r[i]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(i){var e=Lh.el.style;if(e)return e[i]},setExtra:function(i,e){var t=Lh.el.extra||(Lh.el.extra={});return t[i]=e,this},getExtra:function(i){var e=Lh.el.extra;if(e)return e[i]}};function UTe(){var i=this,e=i.el;if(e){var t=gv(e).userDuring,r=i.userDuring;if(t!==r){i.el=i.userDuring=null;return}Lh.el=e,r(NTe)}}function M$(i,e,t,r){var n=t[i];if(n){var a=e[i],o;if(a){var s=t.transition,l=n.transition;if(l)if(!o&&(o=r[i]={}),xp(l))Ce(o,a);else for(var c=cr(l),u=0;u<c.length;u++){var h=c[u],d=a[h];o[h]=d}else if(xp(s)||qt(s,i)>=0){!o&&(o=r[i]={});for(var f=si(a),u=0;u<f.length;u++){var h=f[u],d=a[h];HTe(n[h],d)&&(o[h]=d)}}}}}function I$(i,e,t){var r=e[i];if(r)for(var n=t[i]={},a=si(r),o=0;o<a.length;o++){var s=a[o];n[s]=QA(r[s])}}function kTe(i,e,t){for(var r=e.transition,n=xp(r)?Yl:cr(r||[]),a=0;a<n.length;a++){var o=n[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=i[o];t[o]=s}}}function zTe(i,e,t){for(var r=0;r<T$.length;r++){var n=T$[r],a=B$[n],o=e[n];o&&(t[a[0]]=o[0],t[a[1]]=o[1])}for(var r=0;r<Yl.length;r++){var s=Yl[r];e[s]!=null&&(t[s]=e[s])}}function VTe(i,e,t,r){if(t){var n=i.style,a;if(n){var o=t.transition,s=e.transition;if(o&&!xp(o)){var l=cr(o);!a&&(a=r.style={});for(var c=0;c<l.length;c++){var u=l[c],h=n[u];a[u]=h}}else if(i.getAnimationStyleProps&&(xp(s)||xp(o)||qt(s,"style")>=0)){var d=i.getAnimationStyleProps(),f=d?d.style:null;if(f){!a&&(a=r.style={});for(var m=si(t),c=0;c<m.length;c++){var u=m[c];if(f[u]){var h=n[u];a[u]=h}}}}}}}function HTe(i,e){return Sa(i)?i!==e:i!=null&&isFinite(i)}var D$=$t(),QTe=["percent","easing","shape","style","extra"];function RT(i){i.stopAnimation("keyframe"),i.attr(D$(i))}function xv(i,e,t){if(!(!t.isAnimationEnabled()||!e)){if(Ee(e)){W(e,function(s){xv(i,s,t)});return}var r=e.keyframes,n=e.duration;if(t&&n==null){var a=_h("enter",t,0);n=a&&a.duration}if(!(!r||!n)){var o=D$(i);W(U_,function(s){if(!(s&&!i[s])){var l,c=!1;r.sort(function(u,h){return u.percent-h.percent}),W(r,function(u){var h=i.animators,d=s?u[s]:u;if(d){var f=si(d);if(s||(f=Xi(f,function(g){return qt(QTe,g)<0})),!!f.length){l||(l=i.animate(s,e.loop,!0),l.scope="keyframe");for(var m=0;m<h.length;m++)h[m]!==l&&h[m].targetName===l.targetName&&h[m].stopTracks(f);s&&(o[s]=o[s]||{});var y=s?o[s]:o;W(f,function(g){y[g]=((s?i[s]:i)||{})[g]}),l.whenWithKeys(n*u.percent,d,f,u.easing)}}}),l&&l.delay(e.delay||0).duration(n).start(e.easing)}})}}}var Id="emphasis",_p="normal",yU="blur",xU="select",wp=[_p,Id,yU,xU],pU={normal:["itemStyle"],emphasis:[Id,"itemStyle"],blur:[yU,"itemStyle"],select:[xU,"itemStyle"]},AU={normal:["label"],emphasis:[Id,"label"],blur:[yU,"label"],select:[xU,"label"]},GTe=["x","y"],WTe="e\0\0",Wc={normal:{},emphasis:{},blur:{},select:{}},jTe={cartesian2d:oU,geo:sU,single:lU,polar:cU,calendar:uU};function gU(i){return i instanceof Kt}function vU(i){return i instanceof Da}function KTe(i,e){e.copyTransform(i),vU(e)&&vU(i)&&(e.setStyle(i.style),e.z=i.z,e.z2=i.z2,e.zlevel=i.zlevel,e.invisible=i.invisible,e.ignore=i.ignore,gU(e)&&gU(i)&&e.setShape(i.shape))}var XTe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,a){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,c=R$(t,s,r,n);o||l.removeAll(),s.diff(o).add(function(h){mU(n,null,h,c(h,a),t,l,s)}).remove(function(h){var d=o.getItemGraphicEl(h);d&&yv(d,Ph(d).option,t)}).update(function(h,d){var f=o.getItemGraphicEl(d);mU(n,f,h,c(h,a),t,l,s)}).execute();var u=t.get("clip",!0)?Ih(t.coordinateSystem,!1,t):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,n,a,o){var s=r.getData(),l=R$(r,s,n,a),c=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var d=mU(null,null,h,l(h,o),r,this.group,s);d&&(d.traverse(u),c.push(d))}},e.prototype.eachRendered=function(t){Hs(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,n,a){var o=r.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},e.type="custom",e}(qi),F$=XTe;function _U(i){var e=i.type,t;if(e==="path"){var r=i.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=k$(r);t=I0(a,null,n,r.layout||"center"),Ph(t).customPathData=a}else if(e==="image")t=new yn({}),Ph(t).customImagePath=i.style.image;else if(e==="text")t=new yi({});else if(e==="group")t=new xt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=Sx(e);if(!o){var s="";xr(s)}t=new o}return Ph(t).customGraphicType=e,t.name=i.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function wU(i,e,t,r,n,a,o){RT(e);var s=n&&n.normal.cfg;s&&e.setTextConfig(s),r&&r.transition==null&&(r.transition=GTe);var l=r&&r.style;if(l){if(e.type==="text"){var c=l;Mt(c,"textFill")&&(c.fill=c.textFill),Mt(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,h=gU(e)?l.decal:null;i&&h&&(h.dirty=!0,u=Lu(h,i)),l.__decalPattern=u}if(vU(e)&&l){var u=l.__decalPattern;u&&(l.decal=u)}vv(e,r,a,{dataIndex:t,isInit:o,clearStyle:!0}),xv(e,r.keyframeAnimation,a)}function N$(i,e,t,r,n){var a=e.isGroup?null:e,o=n&&n[i].cfg;if(a){var s=a.ensureState(i);if(r===!1){var l=a.getState(i);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),bu(a)}}function YTe(i,e,t){if(!i.isGroup){var r=i,n=t.currentZ,a=t.currentZLevel;r.z=n,r.zlevel=a;var o=e.z2;o!=null&&(r.z2=o||0);for(var s=0;s<wp.length;s++)qTe(r,e,wp[s])}}function qTe(i,e,t){var r=t===_p,n=r?e:PT(e,t),a=n?n.z2:null,o;a!=null&&(o=r?i:i.ensureState(t),o.z2=a||0)}function R$(i,e,t,r){var n=i.get("renderItem"),a=i.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):jTe[a.type](a));for(var s=At({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:E,style:B,ordinalRawValue:D,styleEmphasis:F,visual:k,barLayout:j,currentSeriesIndices:q,font:X},o.api||{}),l={context:{},seriesId:i.id,seriesName:i.name,seriesIndex:i.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:ZTe(i.getData())},c,u,h={},d={},f={},m={},y=0;y<wp.length;y++){var g=wp[y];f[g]=i.getModel(pU[g]),m[g]=i.getModel(AU[g])}function x(Y){return Y===c?u||(u=e.getItemModel(Y)):e.getItemModel(Y)}function b(Y,J){return e.hasItemOption?Y===c?h[J]||(h[J]=x(Y).getModel(pU[J])):x(Y).getModel(pU[J]):f[J]}function S(Y,J){return e.hasItemOption?Y===c?d[J]||(d[J]=x(Y).getModel(AU[J])):x(Y).getModel(AU[J]):m[J]}return function(Y,J){return c=Y,u=null,h={},d={},n&&n(At({dataIndexInside:Y,dataIndex:e.getRawIndex(Y),actionType:J?J.type:null},l),s)};function E(Y,J){return J==null&&(J=c),e.getStore().get(e.getDimensionIndex(Y||0),J)}function D(Y,J){J==null&&(J=c),Y=Y||0;var te=e.getDimensionInfo(Y);if(!te){var de=e.getDimensionIndex(Y);return de>=0?e.getStore().get(de,J):void 0}var ue=e.get(te.name,J),ve=te&&te.ordinalMeta;return ve?ve.categories[ue]:ue}function B(Y,J){J==null&&(J=c);var te=e.getItemVisual(J,"style"),de=te&&te.fill,ue=te&&te.opacity,ve=b(J,_p).getItemStyle();de!=null&&(ve.fill=de),ue!=null&&(ve.opacity=ue);var _e={inheritColor:Ye(de)?de:"#000"},Re=S(J,_p),Oe=br(Re,null,_e,!1,!0);Oe.text=Re.getShallow("show")?Yt(i.getFormattedLabel(J,_p),ku(e,J)):null;var Te=Ex(Re,_e,!1);return U(Y,ve),ve=hU(ve,Oe,Te),Y&&H(ve,Y),ve.legacy=!0,ve}function F(Y,J){J==null&&(J=c);var te=b(J,Id).getItemStyle(),de=S(J,Id),ue=br(de,null,null,!0,!0);ue.text=de.getShallow("show")?wo(i.getFormattedLabel(J,Id),i.getFormattedLabel(J,_p),ku(e,J)):null;var ve=Ex(de,null,!0);return U(Y,te),te=hU(te,ue,ve),Y&&H(te,Y),te.legacy=!0,te}function H(Y,J){for(var te in J)Mt(J,te)&&(Y[te]=J[te])}function U(Y,J){Y&&(Y.textFill&&(J.textFill=Y.textFill),Y.textPosition&&(J.textPosition=Y.textPosition))}function k(Y,J){if(J==null&&(J=c),Mt(aU,Y)){var te=e.getItemVisual(J,"style");return te?te[aU[Y]]:null}if(Mt(b$,Y))return e.getItemVisual(J,Y)}function j(Y){if(a.type==="cartesian2d"){var J=a.getBaseAxis();return xK(At({axis:J},Y))}}function q(){return t.getCurrentSeriesIndices()}function X(Y){return D0(Y,t)}}function ZTe(i){var e={};return W(i.dimensions,function(t){var r=i.getDimensionInfo(t);if(!r.isExtraCoord){var n=r.coordDim,a=e[n]=e[n]||[];a[r.coordDimIndex]=i.getDimensionIndex(t)}}),e}function mU(i,e,t,r,n,a,o){if(!r){a.remove(e);return}var s=bU(i,e,t,r,n,a);return s&&o.setItemGraphicEl(t,s),s&&pr(s,r.focus,r.blurScope,r.emphasisDisabled),s}function bU(i,e,t,r,n,a){var o=-1,s=e;e&&U$(e,r,n)&&(o=qt(a.childrenRef(),e),e=null);var l=!e,c=e;c?c.clearStates():(c=_U(r),s&&KTe(s,c)),r.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Wc.normal.cfg=Wc.normal.conOpt=Wc.emphasis.cfg=Wc.emphasis.conOpt=Wc.blur.cfg=Wc.blur.conOpt=Wc.select.cfg=Wc.select.conOpt=null,Wc.isLegacy=!1,$Te(c,t,r,n,l,Wc),JTe(c,t,r,n,l),wU(i,c,t,r,Wc,n,l),Mt(r,"info")&&(Ph(c).info=r.info);for(var u=0;u<wp.length;u++){var h=wp[u];if(h!==_p){var d=PT(r,h),f=SU(r,d,h);N$(h,c,d,f,Wc)}}return YTe(c,r,n),r.type==="group"&&eMe(i,c,t,r,n),o>=0?a.replaceAt(c,o):a.add(c),c}function U$(i,e,t){var r=Ph(i),n=e.type,a=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&nMe(a)&&k$(a)!==r.customPathData||n==="image"&&Mt(o,"image")&&o.image!==r.customImagePath}function JTe(i,e,t,r,n){var a=t.clipPath;if(a===!1)i&&i.getClipPath()&&i.removeClipPath();else if(a){var o=i.getClipPath();o&&U$(o,a,r)&&(o=null),o||(o=_U(a),i.setClipPath(o)),wU(null,o,e,a,null,r,n)}}function $Te(i,e,t,r,n,a){if(!i.isGroup){P$(t,null,a),P$(t,Id,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,c=a.select.conOpt;if(o!=null||s!=null||c!=null||l!=null){var u=i.getTextContent();if(o===!1)u&&i.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=_U(o),i.setTextContent(u)),wU(null,u,e,o,null,r,n);for(var h=o&&o.style,d=0;d<wp.length;d++){var f=wp[d];if(f!==_p){var m=a[f].conOpt;N$(f,u,m,SU(o,m,f),null)}}h?u.dirty():u.markRedraw()}}}}function P$(i,e,t){var r=e?PT(i,e):i,n=e?SU(i,r,Id):i.style,a=i.type,o=r?r.textConfig:null,s=i.textContent,l=s?e?PT(s,e):s:null;if(n&&(t.isLegacy||BT(n,a,!!o,!!l))){t.isLegacy=!0;var c=DT(n,a,!e);!o&&c.textConfig&&(o=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var h=e?t[e]:t.normal;h.cfg=o,h.conOpt=l}function PT(i,e){return e?i?i[e]:null:i}function SU(i,e,t){var r=e&&e.style;return r==null&&t===Id&&i&&(r=i.styleEmphasis),r}function eMe(i,e,t,r,n){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,c=s===!1;if(!(!o&&!l&&!c)){if(l){iMe({api:i,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:n,group:e});return}c&&e.removeAll();for(var u=0;u<o;u++){var h=a[u],d=e.childAt(u);h?(h.ignore==null&&(h.ignore=!1),bU(i,d,t,h,n,e)):d.ignore=!0}for(var f=e.childCount()-1;f>=u;f--){var m=e.childAt(f);tMe(e,m,n)}}}function tMe(i,e,t){e&&yv(e,Ph(i).option,t)}function iMe(i){new ns(i.oldChildren,i.newChildren,L$,L$,i).add(O$).update(O$).remove(rMe).execute()}function L$(i,e){var t=i&&i.name;return t??WTe+e}function O$(i,e){var t=this.context,r=i!=null?t.newChildren[i]:null,n=e!=null?t.oldChildren[e]:null;bU(t.api,n,t.dataIndex,r,t.seriesModel,t.group)}function rMe(i){var e=this.context,t=e.oldChildren[i];t&&yv(t,Ph(t).option,e.seriesModel)}function k$(i){return i&&(i.pathData||i.d)}function nMe(i){return i&&(Mt(i,"pathData")||Mt(i,"d"))}function CU(i){i.registerChartView(F$),i.registerSeriesModel(S$)}var Qm=$t(),z$=Tt,EU=st,aMe=function(){function i(){this._dragging=!1,this.animationThreshold=15}return i.prototype.render=function(e,t,r,n){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!n&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,a,e,t,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new xt,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),r.getZr().add(s);else{var d=Ut(V$,t,h);this.updatePointerEl(s,c,d),this.updateLabelEl(s,c,d,t)}Q$(s,t,!0),this._renderHandle(a)}},i.prototype.remove=function(e){this.clear(e)},i.prototype.dispose=function(e){this.clear(e)},i.prototype.determineAnimation=function(e,t){var r=t.get("animation"),n=e.axis,a=n.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&n.getBandWidth()>s)return!0;if(o){var l=Y2(e).seriesDataCount,c=n.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},i.prototype.makeElOption=function(e,t,r,n,a){},i.prototype.createPointerEl=function(e,t,r,n){var a=t.pointer;if(a){var o=Qm(e).pointerEl=new gi[a.type](z$(t.pointer));e.add(o)}},i.prototype.createLabelEl=function(e,t,r,n){if(t.label){var a=Qm(e).labelEl=new yi(z$(t.label));e.add(a),H$(a,n)}},i.prototype.updatePointerEl=function(e,t,r){var n=Qm(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),r(n,{shape:t.pointer.shape}))},i.prototype.updateLabelEl=function(e,t,r,n){var a=Qm(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),H$(a,n))},i.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),n=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){n&&r.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=md(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){ul(c.event)},onmousedown:EU(this._onHandleDragMove,this,0,0),drift:EU(this._onHandleDragMove,this),ondragend:EU(this._onHandleDragEnd,this)}),r.add(n)),Q$(n,t,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Ee(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,Uc(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},i.prototype._moveHandleToValue=function(e,t){V$(this._axisPointerModel,!t&&this._moveAnimation,this._handle,TU(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},i.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(TU(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(TU(n)),Qm(r).lastProp=null,this._doDispatchAxisPointer()}},i.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},i.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},i.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,n=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),bd(this,"_doDispatchAxisPointer")},i.prototype.doClear=function(){},i.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},i}();function V$(i,e,t,r){G$(Qm(t).lastProp,r)||(Qm(t).lastProp=r,e?Si(t,r,i):(t.stopAnimation(),t.attr(r)))}function G$(i,e){if(yt(i)&&yt(e)){var t=!0;return W(e,function(r,n){t=t&&G$(i[n],r)}),!!t}else return i===e}function H$(i,e){i[e.get(["label","show"])?"show":"hide"]()}function TU(i){return{x:i.x||0,y:i.y||0,rotation:i.rotation||0}}function Q$(i,e,t){var r=e.get("z"),n=e.get("zlevel");i&&i.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),n!=null&&(a.zlevel=n),a.silent=t)})}var _v=aMe;function wv(i){var e=i.get("type"),t=i.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function MU(i,e,t,r,n){var a=t.get("value"),o=IU(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=Mu(s.get("padding")||0),c=s.getFont(),u=dh(o,c),h=n.position,d=u.width+l[1]+l[3],f=u.height+l[0]+l[2],m=n.align;m==="right"&&(h[0]-=d),m==="center"&&(h[0]-=d/2);var y=n.verticalAlign;y==="bottom"&&(h[1]-=f),y==="middle"&&(h[1]-=f/2),oMe(h,d,f,r);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),i.label={x:h[0],y:h[1],style:br(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function oMe(i,e,t,r){var n=r.getWidth(),a=r.getHeight();i[0]=Math.min(i[0]+e,n)-e,i[1]=Math.min(i[1]+t,a)-t,i[0]=Math.max(i[0],0),i[1]=Math.max(i[1],0)}function IU(i,e,t,r,n){i=e.scale.parse(i);var a=e.scale.getLabel({value:i},{precision:n.precision}),o=n.formatter;if(o){var s={value:u_(e,{value:i}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};W(r,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,h=c&&c.getDataParams(u);h&&s.seriesData.push(h)}),Ye(o)?a=o.replace("{value}",a):ft(o)&&(a=o(s))}return a}function k_(i,e,t){var r=za();return dl(r,r,t.rotation),Jo(r,r,t.position),ts([i.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function LT(i,e,t,r,n,a){var o=as.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=n.get(["label","margin"]),MU(e,r,n,a,{position:k_(r.axis,i,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function bv(i,e,t){return t=t||0,{x1:i[t],y1:i[1-t],x2:e[t],y2:e[1-t]}}function OT(i,e,t){return t=t||0,{x:i[t],y:i[1-t],width:e[t],height:e[1-t]}}function BU(i,e,t,r,n,a){return{cx:i,cy:e,r0:t,r,startAngle:n,endAngle:a,clockwise:!0}}var sMe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,a,o){var s=n.axis,l=s.grid,c=a.get("type"),u=W$(l,s).getOtherAxis(s).getGlobalExtent(),h=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var d=wv(a),f=lMe[c](s,h,u);f.style=d,t.graphicKey=f.type,t.pointer=f}var m=__(l.model,n);LT(r,t,m,n,a,o)},e.prototype.getHandleTransform=function(t,r,n){var a=__(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=k_(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,a){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),c=W$(s,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,h=[t.x,t.y];h[u]+=r[u],h[u]=Math.min(l[1],h[u]),h[u]=Math.max(l[0],h[u]);var d=(c[1]+c[0])/2,f=[d,d];f[u]=h[u];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:f,tooltipOption:m[u]}},e}(_v);function W$(i,e){var t={};return t[e.dim+"AxisIndex"]=e.index,i.getCartesian(t)}var lMe={line:function(i,e,t){var r=bv([e,t[0]],[e,t[1]],j$(i));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(i,e,t){var r=Math.max(1,i.getBandWidth()),n=t[1]-t[0];return{type:"Rect",shape:OT([e-r/2,t[0]],[r,n],j$(i))}}};function j$(i){return i.dim==="x"?0:1}var K$=sMe;var cMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(xi),X$=cMe;var Bd=$t(),uMe=W;function NT(i,e,t){if(!ki.node){var r=e.getZr();Bd(r).records||(Bd(r).records={}),hMe(r,e);var n=Bd(r).records[i]||(Bd(r).records[i]={});n.handler=t}}function hMe(i,e){if(Bd(i).initialized)return;Bd(i).initialized=!0,t("click",Ut(Y$,"click")),t("mousemove",Ut(Y$,"mousemove")),t("globalout",fMe);function t(r,n){i.on(r,function(a){var o=pMe(e);uMe(Bd(i).records,function(s){s&&n(s,a,o.dispatchAction)}),dMe(o.pendings,e)})}}function dMe(i,e){var t=i.showTip.length,r=i.hideTip.length,n;t?n=i.showTip[t-1]:r&&(n=i.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function fMe(i,e,t){i.handler("leave",null,t)}function Y$(i,e,t,r){e.handler(i,t,r)}function pMe(i){var e={showTip:[],hideTip:[]},t=function(r){var n=e[r.type];n?n.push(r):(r.dispatchAction=t,i.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function z_(i,e){if(!ki.node){var t=e.getZr(),r=(Bd(t).records||{})[i];r&&(Bd(t).records[i]=null)}}var AMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";NT("axisPointer",n,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){z_("axisPointer",r)},e.prototype.dispose=function(t,r){z_("axisPointer",r)},e.type="axisPointer",e}(hr),Z$=AMe;function V_(i,e){var t=[],r=i.seriesIndex,n;if(r==null||!(n=e.getSeriesByIndex(r)))return{point:[]};var a=n.getData(),o=Bc(a,i);if(o==null||o<0||Ee(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)t=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(i.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),h=u.dim,d=c.dim,f=h==="x"||h==="radius"?1:0,m=a.mapDimension(d),y=[];y[f]=a.get(m,o),y[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(y)||[]}else t=l.dataToPoint(a.getValues(Me(l.dimensions,function(x){return a.mapDimension(x)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:s}}var J$=$t();function DU(i,e,t){var r=i.currTrigger,n=[i.x,i.y],a=i,o=i.dispatchAction||st(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){UT(n)&&(n=V_({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=UT(n),c=a.axesInfo,u=s.axesInfo,h=r==="leave"||UT(n),d={},f={},m={list:[],map:{}},y={showPointer:Ut(gMe,f),showTooltip:Ut(vMe,m)};W(s.coordSysMap,function(x,b){var S=l||x.containPoint(n);W(s.coordSysAxesInfo[b],function(E,D){var B=E.axis,F=wMe(c,E);if(!h&&S&&(!c||F)){var H=F&&F.value;H==null&&!l&&(H=B.pointToData(n)),H!=null&&$$(E,H,y,!1,d)}})});var g={};return W(u,function(x,b){var S=x.linkGroup;S&&!f[b]&&W(S.axesInfo,function(E,D){var B=f[D];if(E!==x&&B){var F=B.value;S.mapper&&(F=x.axis.scale.parse(S.mapper(F,eee(E),eee(x)))),g[x.key]=F}})}),W(g,function(x,b){$$(u[b],x,y,!0,d)}),yMe(f,u,d),xMe(m,n,i,o),_Me(u,o,t),d}}function $$(i,e,t,r,n){var a=i.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!i.involveSeries){t.showPointer(i,e);return}var o=mMe(e,i),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&Ce(n,s[0]),!r&&i.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(i,e,s),t.showTooltip(i,o,l)}}function mMe(i,e){var t=e.axis,r=t.dim,n=i,a=[],o=Number.MAX_VALUE,s=-1;return W(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),h,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,i,t);d=f.dataIndices,h=f.nestestValue}else{if(d=l.getData().indicesOfNearest(u[0],i,t.type==="category"?.5:null),!d.length)return;h=l.getData().get(u[0],d[0])}if(!(h==null||!isFinite(h))){var m=i-h,y=Math.abs(m);y<=o&&((y<o||m>=0&&s<0)&&(o=y,s=m,n=h,a.length=0),W(d,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:n}}function gMe(i,e,t,r){i[e.key]={value:t,payloadBatch:r}}function vMe(i,e,t,r){var n=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!n.length)){var l=e.coordSys.model,c=$0(l),u=i.map[c];u||(u=i.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},i.list.push(u)),u.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function yMe(i,e,t){var r=t.axesInfo=[];W(e,function(n,a){var o=n.axisPointerModel.option,s=i[a];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function xMe(i,e,t,r){if(UT(e)||!i.list.length){r({type:"hideTip"});return}var n=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:i.list})}function _Me(i,e,t){var r=t.getZr(),n="axisPointerLastHighlights",a=J$(r)[n]||{},o=J$(r)[n]={};W(i,function(c,u){var h=c.axisPointerModel.option;h.status==="show"&&c.triggerEmphasis&&W(h.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;o[f]=d})});var s=[],l=[];W(a,function(c,u){!o[u]&&l.push(c)}),W(o,function(c,u){!a[u]&&s.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function wMe(i,e){for(var t=0;t<(i||[]).length;t++){var r=i[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function eee(i){var e=i.axis.model,t={},r=t.axisDim=i.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function UT(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}function Qu(i){Tl.registerAxisPointerClass("CartesianAxisPointer",K$),i.registerComponentModel(X$),i.registerComponentView(Z$),i.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Ee(t)&&(e.axisPointer.link=[t])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=TY(e,t)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},DU)}function RU(i){Ei(J2),Ei(Qu)}var bMe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,a,o){var s=n.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),h=s.dataToCoord(r),d=a.get("type");if(d&&d!=="none"){var f=wv(a),m=CMe[d](s,l,h,u);m.style=f,t.graphicKey=m.type,t.pointer=m}var y=a.get(["label","margin"]),g=SMe(r,n,a,l,y);MU(t,n,a,o,g)},e}(_v);function SMe(i,e,t,r,n){var a=e.axis,o=a.dataToCoord(i),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),c,u,h;if(a.dim==="radius"){var d=za();dl(d,d,s),Jo(d,d,[r.cx,r.cy]),c=ts([o,-n],d);var f=e.getModel("axisLabel").get("rotate")||0,m=as.innerTextLayout(s,f*Math.PI/180,-1);u=m.textAlign,h=m.textVerticalAlign}else{var y=l[1];c=r.coordToPoint([y+n,o]);var g=r.cx,x=r.cy;u=Math.abs(c[0]-g)/y<.3?"center":c[0]>g?"left":"right",h=Math.abs(c[1]-x)/y<.3?"middle":c[1]>x?"top":"bottom"}return{position:c,align:u,verticalAlign:h}}var CMe={line:function(i,e,t,r){return i.dim==="angle"?{type:"Line",shape:bv(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(i,e,t,r){var n=Math.max(1,i.getBandWidth()),a=Math.PI/180;return i.dim==="angle"?{type:"Sector",shape:BU(e.cx,e.cy,r[0],r[1],(-t-n/2)*a,(-t+n/2)*a)}:{type:"Sector",shape:BU(e.cx,e.cy,t-n/2,t+n/2,0,Math.PI*2)}}},tee=bMe;var EMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,n=this.ecModel;return n.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(xi),iee=EMe;var PU=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Jr).models[0]},e.type="polarAxis",e}(xi);jr(PU,Sh);var ree=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(PU);var nee=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(PU);var LU=function(i){le(e,i);function e(t,r){return i.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(Vo);LU.prototype.dataToRadius=Vo.prototype.dataToCoord;LU.prototype.radiusToData=Vo.prototype.coordToData;var aee=LU;var TMe=$t(),OU=function(i){le(e,i);function e(t,r){return i.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),n=t.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),c=Math.abs(l),u=dh(s==null?"":s+"",r.getFont(),"center","top"),h=Math.max(u.height,7),d=h/c;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),m=TMe(t.model),y=m.lastAutoInterval,g=m.lastTickCount;return y!=null&&g!=null&&Math.abs(y-f)<=1&&Math.abs(g-o)<=1&&y>f?f=y:(m.lastTickCount=o,m.lastAutoInterval=f),f},e}(Vo);OU.prototype.dataToAngle=Vo.prototype.dataToCoord;OU.prototype.angleToData=Vo.prototype.coordToData;var oee=OU;var FU=["radius","angle"],MMe=function(){function i(e){this.dimensions=FU,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new aee,this._angleAxis=new oee,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return i.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},i.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},i.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},i.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},i.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,n=this._radiusAxis;return r.scale.type===e&&t.push(r),n.scale.type===e&&t.push(n),t},i.prototype.getAngleAxis=function(){return this._angleAxis},i.prototype.getRadiusAxis=function(){return this._radiusAxis},i.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},i.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},i.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},i.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},i.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},i.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=this.getAngleAxis(),a=n.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);n.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var c=Math.atan2(-r,t)/Math.PI*180,u=c<o?1:-1;c<o||c>s;)c+=u*360;return[l,c]},i.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,n=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[n,a]},i.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var n=e.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-n[0]*a,endAngle:-n[1]*a,clockwise:e.inverse,contain:function(o,s){var l=o-this.cx,c=s-this.cy,u=l*l+c*c-1e-4,h=this.r,d=this.r0;return u<=h*h&&u>=d*d}}},i.prototype.convertToPixel=function(e,t,r){var n=see(t);return n===this?this.dataToPoint(r):null},i.prototype.convertFromPixel=function(e,t,r){var n=see(t);return n===this?this.pointToData(r):null},i}();function see(i){var e=i.seriesModel,t=i.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}var lee=MMe;function IMe(i,e,t){var r=e.get("center"),n=t.getWidth(),a=t.getHeight();i.cx=ot(r[0],n),i.cy=ot(r[1],a);var o=i.getRadiusAxis(),s=Math.min(n,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:Ee(l)||(l=[0,l]);var c=[ot(l[0],s),ot(l[1],s)];o.inverse?o.setExtent(c[1],c[0]):o.setExtent(c[0],c[1])}function BMe(i,e){var t=this,r=t.getAngleAxis(),n=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),i.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();W(K0(l,"radius"),function(c){n.scale.unionExtentFromData(l,c)}),W(K0(l,"angle"),function(c){r.scale.unionExtentFromData(l,c)})}}),bh(r.scale,r.model),bh(n.scale,n.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function DMe(i){return i.mainType==="angleAxis"}function cee(i,e){var t;if(i.type=e.get("type"),i.scale=cp(e),i.onBand=e.get("boundaryGap")&&i.type==="category",i.inverse=e.get("inverse"),DMe(e)){i.inverse=i.inverse!==e.get("clockwise");var r=e.get("startAngle"),n=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(i.inverse?-360:360);i.setExtent(r,n)}e.axis=i,i.model=e}var RMe={dimensions:FU,create:function(i,e){var t=[];return i.eachComponent("polar",function(r,n){var a=new lee(n+"");a.update=BMe;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");cee(o,l),cee(s,c),IMe(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),i.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var n=r.getReferringComponents("polar",Jr).models[0];r.coordinateSystem=n.coordinateSystem}}),t}},uee=RMe;var PMe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function kT(i,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=i.coordToPoint([e[0],t]),n=i.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:n[0],y2:n[1]}}function zT(i){var e=i.getRadiusAxis();return e.inverse?0:1}function hee(i){var e=i[0],t=i[i.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&i.pop()}var LMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var n=t.axis,a=n.polar,o=a.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),c=Me(n.getViewLabels(),function(u){u=Tt(u);var h=n.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=n.dataToCoord(d),u});hee(c),hee(s),W(PMe,function(u){t.get([u,"show"])&&(!n.scale.isBlank()||u==="axisLine")&&OMe[u](this.group,t,a,s,l,o,c)},this)}},e.type="angleAxis",e}(Tl),OMe={axisLine:function(i,e,t,r,n,a){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=zT(t),h=u?0:1,d,f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";a[h]===0?d=new gi[f]({shape:{cx:t.cx,cy:t.cy,r:a[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):d=new cm({shape:{cx:t.cx,cy:t.cy,r:a[u],r0:a[h]},style:o.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,i.add(d)},axisTick:function(i,e,t,r,n,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[zT(t)],c=Me(r,function(u){return new Xn({shape:kT(t,[l,l+s],u.coord)})});i.add(Ss(c,{style:At(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(i,e,t,r,n,a){if(n.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),c=a[zT(t)],u=[],h=0;h<n.length;h++)for(var d=0;d<n[h].length;d++)u.push(new Xn({shape:kT(t,[c,c+l],n[h][d].coord)}));i.add(Ss(u,{style:At(s.getModel("lineStyle").getLineStyle(),At(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(i,e,t,r,n,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");W(o,function(h,d){var f=l,m=h.tickValue,y=a[zT(t)],g=t.coordToPoint([y+c,h.coord]),x=t.cx,b=t.cy,S=Math.abs(g[0]-x)/y<.3?"center":g[0]>x?"left":"right",E=Math.abs(g[1]-b)/y<.3?"middle":g[1]>b?"top":"bottom";if(s&&s[m]){var D=s[m];yt(D)&&D.textStyle&&(f=new ir(D.textStyle,l,l.ecModel))}var B=new yi({silent:as.isLabelSilent(e),style:br(f,{x:g[0],y:g[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:S,verticalAlign:E})});if(i.add(B),u){var F=as.makeAxisEventDataBase(e);F.targetType="axisLabel",F.value=h.rawLabel,Pt(B).eventData=F}},this)},splitLine:function(i,e,t,r,n,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=0;h<r.length;h++){var d=c++%l.length;u[d]=u[d]||[],u[d].push(new Xn({shape:kT(t,a,r[h].coord)}))}for(var h=0;h<u.length;h++)i.add(Ss(u[h],{style:At({stroke:l[h%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(i,e,t,r,n,a){if(n.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],c=0;c<n.length;c++)for(var u=0;u<n[c].length;u++)l.push(new Xn({shape:kT(t,a,n[c][u].coord)}));i.add(Ss(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(i,e,t,r,n,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=Math.PI/180,d=-r[0].coord*h,f=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),y=e.get("clockwise"),g=1,x=r.length;g<=x;g++){var b=g===x?r[0].coord:r[g].coord,S=c++%l.length;u[S]=u[S]||[],u[S].push(new Ra({shape:{cx:t.cx,cy:t.cy,r0:f,r:m,startAngle:d,endAngle:-b*h,clockwise:y},silent:!0})),d=-b*h}for(var g=0;g<u.length;g++)i.add(Ss(u[g],{style:At({fill:l[g%l.length]},s.getAreaStyle()),silent:!0}))}}},dee=LMe;var FMe=["axisLine","axisTickLabel","axisName"],NMe=["splitLine","splitArea","minorSplitLine"],UMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var n=this._axisGroup,a=this._axisGroup=new xt;this.group.add(a);var o=t.axis,s=o.polar,l=s.getAngleAxis(),c=o.getTicksCoords(),u=o.getMinorTicksCoords(),h=l.getExtent()[0],d=o.getExtent(),f=zMe(s,t,h),m=new as(t,f);W(FMe,m.add,m),a.add(m.getGroup()),Ad(n,a,t),W(NMe,function(y){t.get([y,"show"])&&!o.scale.isBlank()&&kMe[y](this.group,t,s,h,d,c,u)},this)}},e.type="radiusAxis",e}(Tl),kMe={splitLine:function(i,e,t,r,n,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0,u=t.getAngleAxis(),h=Math.PI/180,d=u.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],y=0;y<a.length;y++){var g=c++%l.length;m[g]=m[g]||[],m[g].push(new gi[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[y].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:u.inverse}}))}for(var y=0;y<m.length;y++)i.add(Ss(m[y],{style:At({stroke:l[y%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(i,e,t,r,n,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<o.length;u++)for(var h=0;h<o[u].length;h++)c.push(new Vs({shape:{cx:t.cx,cy:t.cy,r:o[u][h].coord}}));i.add(Ss(c,{style:At({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(i,e,t,r,n,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=a[0].coord,d=1;d<a.length;d++){var f=c++%l.length;u[f]=u[f]||[],u[f].push(new Ra({shape:{cx:t.cx,cy:t.cy,r0:h,r:a[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=a[d].coord}for(var d=0;d<u.length;d++)i.add(Ss(u[d],{style:At({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function zMe(i,e,t){return{position:[i.cx,i.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var fee=UMe;function pee(i){return i.get("stack")||"__ec_stack_"+i.seriesIndex}function Aee(i,e){return e.dim+i.model.componentIndex}function VMe(i,e,t){var r={},n=HMe(Xi(e.getSeriesByType(i),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(i,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),c=Aee(s,l),u=pee(a),h=n[c][u],d=h.offset,f=h.width,m=s.getOtherAxis(l),y=a.coordinateSystem.cx,g=a.coordinateSystem.cy,x=a.get("barMinHeight")||0,b=a.get("barMinAngle")||0;r[u]=r[u]||[];for(var S=o.mapDimension(m.dim),E=o.mapDimension(l.dim),D=ic(o,S),B=l.dim!=="radius"||!a.get("roundCap",!0),F=m.dataToCoord(0),H=0,U=o.count();H<U;H++){var k=o.get(S,H),j=o.get(E,H),q=k>=0?"p":"n",X=F;D&&(r[u][j]||(r[u][j]={p:F,n:F}),X=r[u][j][q]);var Y=void 0,J=void 0,te=void 0,de=void 0;if(m.dim==="radius"){var ue=m.dataToCoord(k)-F,ve=l.dataToCoord(j);Math.abs(ue)<x&&(ue=(ue<0?-1:1)*x),Y=X,J=X+ue,te=ve-d,de=te-f,D&&(r[u][j][q]=J)}else{var _e=m.dataToCoord(k,B)-F,Re=l.dataToCoord(j);Math.abs(_e)<b&&(_e=(_e<0?-1:1)*b),Y=Re+d,J=Y+f,te=X,de=X+_e,D&&(r[u][j][q]=de)}o.setItemLayout(H,{cx:y,cy:g,r0:Y,r:J,startAngle:-te*Math.PI/180,endAngle:-de*Math.PI/180,clockwise:te>=de})}}})}function HMe(i){var e={};W(i,function(r,n){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=Aee(o,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/a.count(),h=e[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;e[l]=h;var f=pee(r);d[f]||h.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var m=ot(r.get("barWidth"),u),y=ot(r.get("barMaxWidth"),u),g=r.get("barGap"),x=r.get("barCategoryGap");m&&!d[f].width&&(m=Math.min(h.remainedWidth,m),d[f].width=m,h.remainedWidth-=m),y&&(d[f].maxWidth=y),g!=null&&(h.gap=g),x!=null&&(h.categoryGap=x)});var t={};return W(e,function(r,n){t[n]={};var a=r.stacks,o=r.bandWidth,s=ot(r.categoryGap,o),l=ot(r.gap,1),c=r.remainedWidth,u=r.autoWidthCount,h=(c-s)/(u+(u-1)*l);h=Math.max(h,0),W(a,function(y,g){var x=y.maxWidth;x&&x<h&&(x=Math.min(x,c),y.width&&(x=Math.min(x,y.width)),c-=x,y.width=x,u--)}),h=(c-s)/(u+(u-1)*l),h=Math.max(h,0);var d=0,f;W(a,function(y,g){y.width||(y.width=h),f=y,d+=y.width*(1+l)}),f&&(d-=f.width*l);var m=-d/2;W(a,function(y,g){t[n][g]=t[n][g]||{offset:m,width:y.width},m+=y.width*(1+l)})}),t}var mee=VMe;var QMe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},GMe={splitNumber:5},WMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(hr);function NU(i){Ei(Qu),Tl.registerAxisPointerClass("PolarAxisPointer",tee),i.registerCoordinateSystem("polar",uee),i.registerComponentModel(iee),i.registerComponentView(WMe),Hu(i,"angle",ree,QMe),Hu(i,"radius",nee,GMe),i.registerComponentView(dee),i.registerComponentView(fee),i.registerLayout(Ut(mee,"bar"))}function H_(i,e){e=e||{};var t=i.coordinateSystem,r=i.axis,n={},a=r.position,o=r.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[o==="vertical"?c.vertical[a]:l[0],o==="horizontal"?c.horizontal[a]:l[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[o];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[a],i.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Mn(e.labelInside,i.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=e.rotate;return d==null&&(d=i.get(["axisLabel","rotate"])),n.labelRotation=a==="top"?-d:d,n.z2=1,n}var jMe=["axisLine","axisTickLabel","axisName"],KMe=["splitArea","splitLine"],XMe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,n,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new xt;var l=H_(t),c=new as(t,l);W(jMe,c.add,c),o.add(this._axisGroup),o.add(c.getGroup()),W(KMe,function(u){t.get([u,"show"])&&YMe[u](this,this.group,this._axisGroup,t)},this),Ad(s,this._axisGroup,t),i.prototype.render.call(this,t,r,n,a)},e.prototype.remove=function(){Z2(this)},e.type="singleAxis",e}(Tl),YMe={splitLine:function(i,e,t,r){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),c=r.coordinateSystem.getRect(),u=n.isHorizontal(),h=[],d=0,f=n.getTicksCoords({tickModel:a}),m=[],y=[],g=0;g<f.length;++g){var x=n.toGlobalCoord(f[g].coord);u?(m[0]=x,m[1]=c.y,y[0]=x,y[1]=c.y+c.height):(m[0]=c.x,m[1]=x,y[0]=c.x+c.width,y[1]=x);var b=new Xn({shape:{x1:m[0],y1:m[1],x2:y[0],y2:y[1]},silent:!0});pd(b.shape,l);var S=d++%s.length;h[S]=h[S]||[],h[S].push(b)}for(var E=o.getLineStyle(["color"]),g=0;g<h.length;++g)e.add(Ss(h[g],{style:At({stroke:s[g%s.length]},E),silent:!0}))}},splitArea:function(i,e,t,r){q2(i,t,r,r)}},vee=XMe;var yee=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(xi);jr(yee,Sh.prototype);var VT=yee;var qMe=function(i){le(e,i);function e(t,r,n,a,o){var s=i.call(this,t,r,n)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e}(Vo),xee=qMe;var UU=["single"],ZMe=function(){function i(e,t,r){this.type="single",this.dimension="single",this.dimensions=UU,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return i.prototype._init=function(e,t,r){var n=this.dimension,a=new xee(n,cp(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},i.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();W(n.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(n,a)},this),bh(this._axis.scale,this._axis.model)}},this)},i.prototype.resize=function(e,t){this._rect=Fr({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},i.prototype.getRect=function(){return this._rect},i.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),n=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(n[a],n[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},i.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),n=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return n-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return n-o+t}},i.prototype.getAxis=function(){return this._axis},i.prototype.getBaseAxis=function(){return this._axis},i.prototype.getAxes=function(){return[this._axis]},i.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},i.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},i.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},i.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),n=[],a=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),n[a]=t.toGlobalCoord(t.dataToCoord(+e)),n[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,n},i.prototype.convertToPixel=function(e,t,r){var n=_ee(t);return n===this?this.dataToPoint(r):null},i.prototype.convertFromPixel=function(e,t,r){var n=_ee(t);return n===this?this.pointToData(r):null},i}();function _ee(i){var e=i.seriesModel,t=i.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}var wee=ZMe;function JMe(i,e){var t=[];return i.eachComponent("singleAxis",function(r,n){var a=new wee(r,i,e);a.name="single_"+n,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),i.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",Jr).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),t}var $Me={create:JMe,dimensions:UU},bee=$Me;var See=["x","y"],eIe=["width","height"],tIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,a,o){var s=n.axis,l=s.coordinateSystem,c=kU(l,1-HT(s)),u=l.dataToPoint(r)[0],h=a.get("type");if(h&&h!=="none"){var d=wv(a),f=iIe[h](s,u,c);f.style=d,t.graphicKey=f.type,t.pointer=f}var m=H_(n);LT(r,t,m,n,a,o)},e.prototype.getHandleTransform=function(t,r,n){var a=H_(r,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=k_(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,a){var o=n.axis,s=o.coordinateSystem,l=HT(o),c=kU(s,l),u=[t.x,t.y];u[l]+=r[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var h=kU(s,1-l),d=(h[1]+h[0])/2,f=[d,d];return f[l]=u[l],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(_v),iIe={line:function(i,e,t){var r=bv([e,t[0]],[e,t[1]],HT(i));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(i,e,t){var r=i.getBandWidth(),n=t[1]-t[0];return{type:"Rect",shape:OT([e-r/2,t[0]],[r,n],HT(i))}}};function HT(i){return i.isHorizontal()?0:1}function kU(i,e){var t=i.getRect();return[t[See[e]],t[See[e]]+t[eIe[e]]]}var Cee=tIe;var rIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(hr);function zU(i){Ei(Qu),Tl.registerAxisPointerClass("SingleAxisPointer",Cee),i.registerComponentView(rIe),i.registerComponentView(vee),i.registerComponentModel(VT),Hu(i,"single",VT,VT.defaultOption),i.registerCoordinateSystem("single",bee)}var nIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){var a=Oc(t);i.prototype.init.apply(this,arguments),Eee(t,a)},e.prototype.mergeOption=function(t){i.prototype.mergeOption.apply(this,arguments),Eee(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(xi);function Eee(i,e){var t=i.cellSize,r;Ee(t)?r=t:r=i.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var n=Me([0,1],function(a){return G9(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});_l(i,e,{type:"box",ignoreSize:n})}var Tee=nIe;var aIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var a=this.group;a.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,c,l,a),this._renderWeekText(t,c,s,l,a)},e.prototype._renderDayRect=function(t,r,n){for(var a=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=r.start.time;c<=r.end.time;c=a.getNextNDay(c,1).time){var u=a.dataToRect([c],!1).tl,h=new pi({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:o});n.add(h)}},e.prototype._renderLines=function(t,r,n,a){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,d=0;h.time<=r.end.time;d++){m(h.formatedDate),d===0&&(h=s.getDateInfo(r.start.y+"-"+r.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=s.getDateInfo(f)}m(s.getNextNDay(r.end.time,1).formatedDate);function m(y){o._firstDayOfMonth.push(s.getDateInfo(y)),o._firstDayPoints.push(s.dataToRect([y],!1).tl);var g=o._getLinePointsOfOneWeek(t,y,n);o._tlpoints.push(g[0]),o._blpoints.push(g[g.length-1]),c&&o._drawSplitline(g,l,a)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,n),l,a),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,n),l,a)},e.prototype._getEdgesPoints=function(t,r,n){var a=[t[0].slice(),t[t.length-1].slice()],o=n==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},e.prototype._drawSplitline=function(t,r,n){var a=new Jn({z2:20,shape:{points:t},style:r});n.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,n){for(var a=t.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var c=a.getNextNDay(o.time,l),u=a.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[n==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,r){return Ye(t)&&t?V9(t,r):ft(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,n,a,o){var s=r[0],l=r[1],c=["center","bottom"];a==="bottom"?(l+=o,c=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,c=["center","top"]):l-=o;var u=0;return(a==="left"||a==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,r,n,a){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=n!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,h=(c[0][1]+c[1][1])/2,d=n==="horizontal"?0:1,f={top:[u,c[d][1]],bottom:[u,c[1-d][1]],left:[c[1-d][0],h],right:[c[d][0],h]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var y=o.get("formatter"),g={start:r.start.y,end:r.end.y,nameMap:m},x=this._formatterLabel(y,g),b=new yi({z2:30,style:br(o,{text:x})});b.attr(this._yearTextPositionControl(b,f[l],n,l,s)),a.add(b)}},e.prototype._monthTextPositionControl=function(t,r,n,a,o){var s="left",l="top",c=t[0],u=t[1];return n==="horizontal"?(u=u+o,r&&(s="center"),a==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),a==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,n,a){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),u=o.get("align"),h=[this._tlpoints,this._blpoints];(!s||Ye(s))&&(s&&(r=Tx(s)||r),s=r.get(["time","monthAbbr"])||[]);var d=c==="start"?0:1,f=n==="horizontal"?0:1;l=c==="start"?-l:l;for(var m=u==="center",y=0;y<h[d].length-1;y++){var g=h[d][y].slice(),x=this._firstDayOfMonth[y];if(m){var b=this._firstDayPoints[y];g[f]=(b[f]+h[0][y+1][f])/2}var S=o.get("formatter"),E=s[+x.m-1],D={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:E},B=this._formatterLabel(S,D),F=new yi({z2:30,style:Ce(br(o,{text:B}),this._monthTextPositionControl(g,m,n,c,l))});a.add(F)}}},e.prototype._weekTextPositionControl=function(t,r,n,a,o){var s="center",l="middle",c=t[0],u=t[1],h=n==="start";return r==="horizontal"?(c=c+a+(h?1:-1)*o[0]/2,s=h?"right":"left"):(u=u+a+(h?1:-1)*o[1]/2,l=h?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,n,a,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),h=s.get("margin"),d=l.getFirstDayOfWeek();if(!u||Ye(u)){u&&(r=Tx(u)||r);var f=r.get(["time","dayOfWeekShort"]);u=f||Me(r.get(["time","dayOfWeekAbbr"]),function(D){return D[0]})}var m=l.getNextNDay(n.end.time,7-n.lweek).time,y=[l.getCellWidth(),l.getCellHeight()];h=ot(h,Math.min(y[1],y[0])),c==="start"&&(m=l.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var g=0;g<7;g++){var x=l.getNextNDay(m,g),b=l.dataToRect([x.time],!1).center,S=g;S=Math.abs((g+d)%7);var E=new yi({z2:30,style:Ce(br(s,{text:u[S]}),this._weekTextPositionControl(b,a,c,h,y))});o.add(E)}}},e.type="calendar",e}(hr),Mee=aIe;var VU=864e5,oIe=function(){function i(e,t,r){this.type="calendar",this.dimensions=i.dimensions,this.getDimensionsInfo=i.getDimensionsInfo,this._model=e}return i.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},i.prototype.getRangeInfo=function(){return this._rangeInfo},i.prototype.getModel=function(){return this._model},i.prototype.getRect=function(){return this._rect},i.prototype.getCellWidth=function(){return this._sw},i.prototype.getCellHeight=function(){return this._sh},i.prototype.getOrient=function(){return this._orient},i.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},i.prototype.getDateInfo=function(e){e=ks(e);var t=e.getFullYear(),r=e.getMonth()+1,n=r<10?"0"+r:""+r,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:n,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+n+"-"+o,date:e}},i.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},i.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];W([0,1],function(h){u(a,h)&&(o[n[h]]=a[h]*s[h])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=Fr(o,l);W([0,1],function(h){u(a,h)||(a[h]=c[n[h]]/s[h])});function u(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=a[0],this._sh=a[1]},i.prototype.dataToPoint=function(e,t){Ee(e)&&(e=e[0]),t==null&&(t=!0);var r=this.getDateInfo(e),n=this._rangeInfo,a=r.formatedDate;if(t&&!(r.time>=n.start.time&&r.time<n.end.time+VU))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([n.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},i.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},i.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},i.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,n):this._getDateByWeeksAndDay(t,r-1,n)},i.prototype.convertToPixel=function(e,t,r){var n=Iee(t);return n===this?n.dataToPoint(r):null},i.prototype.convertFromPixel=function(e,t,r){var n=Iee(t);return n===this?n.pointToData(r):null},i.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},i.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(Ee(e)&&e.length===1&&(e=e[0]),Ee(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),a=n.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);t=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},i.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var n=Math.floor(t[1].time/VU)-Math.floor(t[0].time/VU)+1,a=new Date(t[0].time),o=a.getDate(),s=t[1].date.getDate();a.setDate(o+n-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*c>0;)n-=c,a.setDate(l-c);var u=Math.floor((n+t[0].day+6)/7),h=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:u,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},i.prototype._getDateByWeeksAndDay=function(e,t,r){var n=this._getRangeInfo(r);if(e>n.weeks||e===0&&t<n.fweek||e===n.weeks&&t>n.lweek)return null;var a=(e-1)*7-n.fweek+t,o=new Date(n.start.time);return o.setDate(+n.start.d+a),this.getDateInfo(o)},i.create=function(e,t){var r=[];return e.eachComponent("calendar",function(n){var a=new i(n,e,t);r.push(a),n.coordinateSystem=a}),e.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=r[n.get("calendarIndex")||0])}),r},i.dimensions=["time","value"],i}();function Iee(i){var e=i.calendarModel,t=i.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}var Bee=oIe;function HU(i){i.registerComponentModel(Tee),i.registerComponentView(Mee),i.registerCoordinateSystem("calendar",Bee)}function sIe(i,e){var t=i.existing;if(e.id=i.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function Dee(i,e){var t;return W(e,function(r){i[r]!=null&&i[r]!=="auto"&&(t=!0)}),t}function lIe(i,e,t){var r=Ce({},t),n=i[e],a=t.$action||"merge";if(a==="merge")if(n){if(!1)var o;ri(n,r,!0),_l(n,r,{ignoreSize:!0}),QL(t,n),QT(t,n),QT(t,n,"shape"),QT(t,n,"style"),QT(t,n,"extra"),t.clipPath=n.clipPath}else i[e]=r;else a==="replace"?i[e]=r:a==="remove"&&n&&(i[e]=null)}var Ree=["transition","enterFrom","leaveTo"],cIe=Ree.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function QT(i,e,t){if(t&&(!i[t]&&e[t]&&(i[t]={}),i=i[t],e=e[t]),!(!i||!e))for(var r=t?Ree:cIe,n=0;n<r.length;n++){var a=r[n];i[a]==null&&e[a]!=null&&(i[a]=e[a])}}function uIe(i,e){if(i&&(i.hv=e.hv=[Dee(e,["left","right"]),Dee(e,["top","bottom"])],i.type==="group")){var t=i,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var Pee=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var n=this.option.elements;this.option.elements=null,i.prototype.mergeOption.call(this,t,r),this.option.elements=n},e.prototype.optionUpdated=function(t,r){var n=this.option,a=(r?n:t).elements,o=n.elements=r?[]:n.elements,s=[];this._flatten(a,s,null);var l=DC(o,s,"normalMerge"),c=this._elOptionsToUpdate=[];W(l,function(u,h){var d=u.newOption;d&&(c.push(d),sIe(u,d),lIe(o,h,d),uIe(o[h],d))},this),n.elements=Xi(o,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,n){W(t,function(a){if(a){n&&(a.parentOption=n),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(xi);var Lee={path:null,compoundPath:null,group:xt,image:yn,text:yi},jc=$t(),Nee=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=ct()},e.prototype.render=function(t,r,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var n=this._elMap,a=this.group,o=t.get("z"),s=t.get("zlevel");W(r,function(l){var c=kn(l.id,null),u=c!=null?n.get(c):null,h=kn(l.parentId,null),d=h!=null?n.get(h):a,f=l.type,m=l.style;f==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var y=l.textContent,g=l.textConfig;if(m&&BT(m,f,!!g,!!y)){var x=DT(m,f,!0);!g&&x.textConfig&&(g=l.textConfig=x.textConfig),!y&&x.textContent&&(y=x.textContent)}var b=hIe(l),S=l.$action||"merge",E=S==="merge",D=S==="replace";if(E){var B=!u,F=u;B?F=Oee(c,d,l.type,n):(F&&(jc(F).isNew=!1),RT(F)),F&&(vv(F,b,t,{isInit:B}),Fee(F,l,o,s))}else if(D){GT(u,l,n,t);var H=Oee(c,d,l.type,n);H&&(vv(H,b,t,{isInit:!0}),Fee(H,l,o,s))}else S==="remove"&&(fU(u,l),GT(u,l,n,t));var U=n.get(c);if(U&&y)if(E){var k=U.getTextContent();k?k.attr(y):U.setTextContent(new yi(y))}else D&&U.setTextContent(new yi(y));if(U){var j=l.clipPath;if(j){var q=j.type,X=void 0,B=!1;if(E){var Y=U.getClipPath();B=!Y||jc(Y).type!==q,X=B?QU(q):Y}else D&&(B=!0,X=QU(q));U.setClipPath(X),vv(X,j,t,{isInit:B}),xv(X,j.keyframeAnimation,t)}var J=jc(U);U.setTextConfig(g),J.option=l,dIe(U,t,l),Tu({el:U,componentModel:t,itemName:U.name,itemTooltipOption:l.tooltip}),xv(U,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var n=t.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),c=["x","y"],u=0;u<n.length;u++){var h=n[u],d=kn(h.id,null),f=d!=null?o.get(d):null;if(!(!f||!f.isGroup)){var m=f.parent,y=m===a,g=jc(f),x=jc(m);g.width=ot(g.option.width,y?s:x.width)||0,g.height=ot(g.option.height,y?l:x.height)||0}}for(var u=n.length-1;u>=0;u--){var h=n[u],d=kn(h.id,null),f=d!=null?o.get(d):null;if(f){var m=f.parent,x=jc(m),b=m===a?{width:s,height:l}:{width:x.width,height:x.height},S={},E=Zf(f,h,b,null,{hv:h.hv,boundingMode:h.bounding},S);if(!jc(f).isNew&&E){for(var D=h.transition,B={},F=0;F<c.length;F++){var H=c[F],U=S[H];D&&(xp(D)||qt(D,H)>=0)?B[H]=U:f[H]=U}Si(f,B,t,0)}else f.attr(S)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(n){GT(n,jc(n).option,r,t._lastGraphicModel)}),this._elMap=ct()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(hr);function QU(i){var e=Mt(Lee,i)?Lee[i]:Sx(i),t=new e({});return jc(t).type=i,t}function Oee(i,e,t,r){var n=QU(t);return e.add(n),r.set(i,n),jc(n).id=i,jc(n).isNew=!0,n}function GT(i,e,t,r){var n=i&&i.parent;n&&(i.type==="group"&&i.traverse(function(a){GT(a,e,t,r)}),yv(i,e,r),t.removeKey(jc(i).id))}function Fee(i,e,t,r){i.isGroup||W([["cursor",Da.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(n){var a=n[0];Mt(e,a)?i[a]=Yt(e[a],n[1]):i[a]==null&&(i[a]=n[1])}),W(si(e),function(n){if(n.indexOf("on")===0){var a=e[n];i[n]=ft(a)?a:null}}),Mt(e,"draggable")&&(i.draggable=e.draggable),e.name!=null&&(i.name=e.name),e.id!=null&&(i.id=e.id)}function hIe(i){return i=Ce({},i),W(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(VL),function(e){delete i[e]}),i}function dIe(i,e,t){var r=Pt(i).eventData;!i.silent&&!i.ignore&&!r&&(r=Pt(i).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:i.name}),r&&(r.info=t.info)}function GU(i){i.registerComponentModel(Pee),i.registerComponentView(Nee),i.registerPreprocessor(function(e){var t=e.graphic;Ee(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var WU=["x","y","radius","angle","single"],fIe=["cartesian2d","polar","singleAxis"];function Uee(i){var e=i.get("coordinateSystem");return qt(fIe,e)>=0}function Kc(i){return i+"Axis"}function kee(i,e){var t=ct(),r=[],n=ct();i.eachComponent({mainType:"dataZoom",query:e},function(u){n.get(u.uid)||s(u)});var a;do a=!1,i.eachComponent("dataZoom",o);while(a);function o(u){!n.get(u.uid)&&l(u)&&(s(u),a=!0)}function s(u){n.set(u.uid,!0),r.push(u),c(u)}function l(u){var h=!1;return u.eachTargetAxis(function(d,f){var m=t.get(d);m&&m[f]&&(h=!0)}),h}function c(u){u.eachTargetAxis(function(h,d){(t.get(h)||t.set(h,[]))[d]=!0})}return r}function WT(i){var e=i.ecModel,t={infoList:[],infoMap:ct()};return i.eachTargetAxis(function(r,n){var a=e.getComponent(Kc(r),n);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var jU=function(){function i(){this.indexList=[],this.indexMap=[]}return i.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},i}(),pIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,n){var a=zee(t);this.settledOption=a,this.mergeDefaultAndTheme(t,n),this._doInit(a)},e.prototype.mergeOption=function(t){var r=zee(t);ri(this.option,t,!0),ri(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=n[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=ct(),n=this._fillSpecifiedTargetAxis(r);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return W(WU,function(n){var a=this.getReferringComponents(Kc(n),P7);if(a.specified){r=!0;var o=new jU;W(a.models,function(s){o.add(s.componentIndex)}),t.set(n,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var n=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=n.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var h=c[0];if(h){var d=new jU;if(d.add(h.componentIndex),t.set(u,d),a=!1,u==="x"||u==="y"){var f=h.getReferringComponents("grid",Jr).models[0];f&&W(c,function(m){h.componentIndex!==m.componentIndex&&f===m.getReferringComponents("grid",Jr).models[0]&&d.add(m.componentIndex)})}}}a&&W(WU,function(c){if(a){var u=n.findComponents({mainType:Kc(c),filter:function(d){return d.get("type",!0)==="category"}});if(u[0]){var h=new jU;h.add(u[0].componentIndex),t.set(c,h),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,n=this.get("rangeMode");W([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":n?r[o]=n[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,n){t==null&&(t=this.ecModel.getComponent(Kc(r),n))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(n,a){W(n.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var n=this.getAxisModel(t,r);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[r])return this.ecModel.getComponent(Kc(t),r)},e.prototype.setRawRange=function(t){var r=this.option,n=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=n[a[0]]=t[a[0]],r[a[1]]=n[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;W(["start","startValue","end","endValue"],function(n){r[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,n=this._targetAxisInfoMap.keys(),a=0;a<n.length;a++)for(var o=n[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(xi);function zee(i){var e={};return W(["start","end","startValue","endValue","throttle"],function(t){i.hasOwnProperty(t)&&(e[t]=i[t])}),e}var bp=pIe;var AIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(bp),Vee=AIe;var mIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,a){this.dataZoomModel=t,this.ecModel=r,this.api=n},e.type="dataZoom",e}(hr),Sv=mIe;var gIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Sv),Hee=gIe;var Cv=W,Qee=co,vIe=function(){function i(e,t,r,n){this._dimName=e,this._axisIndex=t,this.ecModel=n,this._dataZoomModel=r}return i.prototype.hostedBy=function(e){return this._dataZoomModel===e},i.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},i.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},i.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(Uee(t)){var r=Kc(this._dimName),n=t.getReferringComponents(r,Jr).models[0];n&&this._axisIndex===n.componentIndex&&e.push(t)}},this),e},i.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},i.prototype.getMinMaxSpan=function(){return Tt(this._minMaxSpan)},i.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),n=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;Cv(["start","end"],function(d,f){var m=e[d],y=e[d+"Value"];a[f]==="percent"?(m==null&&(m=o[f]),y=n.parse(yr(m,o,t))):(c=!0,y=y==null?t[f]:n.parse(y),m=yr(y,t,o)),l[f]=y==null||isNaN(y)?t[f]:y,s[f]=m==null||isNaN(m)?o[f]:m}),Qee(l),Qee(s);var u=this._minMaxSpan;c?h(l,s,t,o,!1):h(s,l,o,t,!0);function h(d,f,m,y,g){var x=g?"Span":"ValueSpan";Ml(0,d,m,"all",u["min"+x],u["max"+x]);for(var b=0;b<2;b++)f[b]=yr(d[b],m,y,!0),g&&(f[b]=n.parse(f[b]))}return{valueWindow:l,percentWindow:s}},i.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=yIe(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},i.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,n=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Cv(n,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(a==="weakFilter"){var h=c.getStore(),d=Me(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var m,y,g,x=0;x<u.length;x++){var b=h.get(d[x],f),S=!isNaN(b),E=b<o[0],D=b>o[1];if(S&&!E&&!D)return!0;S&&(g=!0),E&&(m=!0),D&&(y=!0)}return g&&m&&y})}else Cv(u,function(f){if(a==="empty")l.setData(c=c.map(f,function(y){return s(y)?y:NaN}));else{var m={};m[f]=o,c.selectRange(m)}});Cv(u,function(f){c.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},i.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;Cv(["min","max"],function(n){var a=t.get(n+"Span"),o=t.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=yr(r[0]+o,r,[0,100],!0):a!=null&&(o=yr(a,[0,100],r,!0)-r[0]),e[n+"Span"]=a,e[n+"ValueSpan"]=o},this)},i.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var n=EC(r,[0,500]);n=Math.min(n,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(n)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(n)),a.freeze()}},i}();function yIe(i,e,t){var r=[1/0,-1/0];Cv(t,function(o){RK(r,o.getData(),e)});var n=i.getAxisModel(),a=g2(n.axis.scale,n,r).calculate();return[a.min,a.max]}var Gee=vIe;var xIe={getTargetSeries:function(i){function e(n){i.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=i.getComponent(Kc(o),s);n(o,s,l,a)})})}e(function(n,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(n,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Gee(n,a,s,i),t.push(o.__dzAxisProxy))});var r=ct();return W(t,function(n){W(n.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(i,e){i.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).reset(t)}),t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).filterData(t,e)})}),i.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var n=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:a[0],endValue:a[1]})}})}},Wee=xIe;function KU(i){i.registerAction("dataZoom",function(e,t){var r=kee(t,e);W(r,function(n){n.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var jee=!1;function Gm(i){jee||(jee=!0,i.registerProcessor(i.PRIORITY.PROCESSOR.FILTER,Wee),KU(i),i.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Kee(i){i.registerComponentModel(Vee),i.registerComponentView(Hee),Gm(i)}var Io=function(){function i(){}return i}();var Xee={};function Sp(i,e){Xee[i]=e}function jT(i){return Xee[i]}var wIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){i.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;W(this.option.feature,function(r,n){var a=jT(n);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),ri(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(xi),Yee=wIe;function qee(i,e,t){var r=e.getBoxLayoutParams(),n=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=Fr(r,a,n);Bu(e.get("orient"),i,e.get("itemGap"),o.width,o.height),Zf(i,r,a,n)}function KT(i,e){var t=Mu(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),i=new pi({shape:{x:i.x-t[3],y:i.y-t[0],width:i.width+t[1]+t[3],height:i.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),i}var SIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",c=t.get("feature")||{},u=this._features||(this._features={}),h=[];W(c,function(m,y){h.push(y)}),new ns(this._featureNames||[],h).add(d).update(d).remove(Ut(d,null)).execute(),this._featureNames=h;function d(m,y){var g=h[m],x=h[y],b=c[g],S=new ir(b,t,t.ecModel),E;if(a&&a.newTitle!=null&&a.featureName===g&&(b.title=a.newTitle),g&&!x){if(CIe(g))E={onclick:S.option.onclick,featureName:g};else{var D=jT(g);if(!D)return;E=new D}u[g]=E}else if(E=u[x],!E)return;E.uid=Lc("toolbox-feature"),E.model=S,E.ecModel=r,E.api=n;var B=E instanceof Io;if(!g&&x){B&&E.dispose&&E.dispose(r,n);return}if(!S.get("show")||B&&E.unusable){B&&E.remove&&E.remove(r,n);return}f(S,E,g),S.setIconStatus=function(F,H){var U=this.option,k=this.iconPaths;U.iconStatus=U.iconStatus||{},U.iconStatus[F]=H,k[F]&&(H==="emphasis"?_s:ws)(k[F])},E instanceof Io&&E.render&&E.render(S,r,n,a)}function f(m,y,g){var x=m.getModel("iconStyle"),b=m.getModel(["emphasis","iconStyle"]),S=y instanceof Io&&y.getIcons?y.getIcons():m.get("icon"),E=m.get("title")||{},D,B;Ye(S)?(D={},D[g]=S):D=S,Ye(E)?(B={},B[g]=E):B=E;var F=m.iconPaths={};W(D,function(H,U){var k=md(H,{},{x:-s/2,y:-s/2,width:s,height:s});k.setStyle(x.getItemStyle());var j=k.ensureState("emphasis");j.style=b.getItemStyle();var q=new yi({style:{text:B[U],align:b.get("textAlign"),borderRadius:b.get("textBorderRadius"),padding:b.get("textPadding"),fill:null,font:D0({fontStyle:b.get("textFontStyle"),fontFamily:b.get("textFontFamily"),fontSize:b.get("textFontSize"),fontWeight:b.get("textFontWeight")},r)},ignore:!0});k.setTextContent(q),Tu({el:k,componentModel:t,itemName:U,formatterParamsExtra:{title:B[U]}}),k.__title=B[U],k.on("mouseover",function(){var X=b.getItemStyle(),Y=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";q.setStyle({fill:b.get("textFill")||X.fill||X.stroke||"#000",backgroundColor:b.get("textBackgroundColor")}),k.setTextConfig({position:b.get("textPosition")||Y}),q.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",U])!=="emphasis"&&n.leaveEmphasis(this),q.hide()}),(m.get(["iconStatus",U])==="emphasis"?_s:ws)(k),o.add(k),k.on("click",st(y.onclick,y,r,n,U)),F[U]=k})}qee(o,t,n),o.add(KT(o.getBoundingRect(),t)),l||o.eachChild(function(m){var y=m.__title,g=m.ensureState("emphasis"),x=g.textConfig||(g.textConfig={}),b=m.getTextContent(),S=b&&b.ensureState("emphasis");if(S&&!ft(S)&&y){var E=S.style||(S.style={}),D=dh(y,yi.makeFont(E)),B=m.x+o.x,F=m.y+o.y+s,H=!1;F+D.height>n.getHeight()&&(x.position="top",H=!0);var U=H?-5-D.height:s+10;B+D.width/2>n.getWidth()?(x.position=["100%",U],E.align="right"):B-D.width/2<0&&(x.position=[0,U],E.align="left")}})},e.prototype.updateView=function(t,r,n,a){W(this._features,function(o){o instanceof Io&&o.updateView&&o.updateView(o.model,r,n,a)})},e.prototype.remove=function(t,r){W(this._features,function(n){n instanceof Io&&n.remove&&n.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){W(this._features,function(n){n instanceof Io&&n.dispose&&n.dispose(t,r)})},e.type="toolbox",e}(hr);function CIe(i){return i.indexOf("my")===0}var Zee=SIe;var EIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var n=this.model,a=n.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),c=ki.browser;if(ft(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=a+"."+s,u.target="_blank",u.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),f=d[0].indexOf("base64")>-1,m=o?decodeURIComponent(d[1]):d[1];f&&(m=window.atob(m));var y=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=m.length,x=new Uint8Array(g);g--;)x[g]=m.charCodeAt(g);var b=new Blob([x]);window.navigator.msSaveOrOpenBlob(b,y)}else{var S=document.createElement("iframe");document.body.appendChild(S);var E=S.contentWindow,D=E.document;D.open("image/svg+xml","replace"),D.write(m),D.close(),E.focus(),D.execCommand("SaveAs",!0,y),document.body.removeChild(S)}}else{var B=n.get("lang"),F='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(B&&B[0]||"")+'" /></body>',H=window.open();H.document.write(F),H.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Io),Jee=EIe;var $ee="__ec_magicType_stack__";var TIe=[["line","bar"],["stack"]],MIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),n={};return W(t.get("type"),function(a){r[a]&&(n[a]=r[a])}),n},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,n){var a=this.model,o=a.get(["seriesIndex",n]);if(ete[n]){var s={series:[]},l=function(h){var d=h.subType,f=h.id,m=ete[n](d,f,h,a);m&&(At(m,h.option),s.series.push(m));var y=h.coordinateSystem;if(y&&y.type==="cartesian2d"&&(n==="line"||n==="bar")){var g=y.getAxesByScale("ordinal")[0];if(g){var x=g.dim,b=x+"Axis",S=h.getReferringComponents(b,Jr).models[0],E=S.componentIndex;s[b]=s[b]||[];for(var D=0;D<=E;D++)s[b][E]=s[b][E]||{};s[b][E].boundaryGap=n==="bar"}}};W(TIe,function(h){qt(h,n)>=0&&W(h,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=n;n==="stack"&&(c=ri({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},e}(Io),ete={line:function(i,e,t,r){if(i==="bar")return ri({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(i,e,t,r){if(i==="line")return ri({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(i,e,t,r){var n=t.get("stack")===$ee;if(i==="line"||i==="bar")return r.setIconStatus("stack",n?"normal":"emphasis"),ri({id:e,stack:n?"":$ee},r.get(["option","stack"])||{},!0)}};Gs({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(i,e){e.mergeOption(i.newOption)});var tte=MIe;var YT=new Array(60).join("-"),Ev="	";function IIe(i){var e={},t=[],r=[];return i.eachRawSeries(function(n){var a=n.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function BIe(i){var e=[];return W(i,function(t,r){var n=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(Me(t.series,function(f){return f.name})),l=[n.model.getCategories()];W(t.series,function(f){var m=f.getRawData();l.push(f.getRawData().mapArray(m.mapDimension(o),function(y){return y}))});for(var c=[s.join(Ev)],u=0;u<l[0].length;u++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][u]);c.push(h.join(Ev))}e.push(c.join(`
`))}),e.join(`

`+YT+`

`)}function DIe(i){return Me(i,function(e){var t=e.getRawData(),r=[e.name],n=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)n[l]=arguments[l];r.push((s?s+Ev:"")+n.join(Ev))}),r.join(`
`)}).join(`

`+YT+`

`)}function RIe(i){var e=IIe(i);return{value:Xi([BIe(e.seriesGroupByCategoryAxis),DIe(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+YT+`

`),meta:e.meta}}function XT(i){return i.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function PIe(i){var e=i.slice(0,i.indexOf(`
`));if(e.indexOf(Ev)>=0)return!0}var XU=new RegExp("["+Ev+"]+","g");function LIe(i){for(var e=i.split(/\n+/g),t=XT(e.shift()).split(XU),r=[],n=Me(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=XT(e[a]).split(XU);r.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[a]=o[s])}return{series:n,categories:r}}function OIe(i){for(var e=i.split(/\n+/g),t=XT(e.shift()),r=[],n=0;n<e.length;n++){var a=XT(e[n]);if(a){var o=a.split(XU),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[n]={name:s,value:[]},l=r[n].value):l=r[n]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[n].value=l[0]:r[n]=l[0])}}return{name:t,data:r}}function FIe(i,e){var t=i.split(new RegExp(`
*`+YT+`
*`,"g")),r={series:[]};return W(t,function(n,a){if(PIe(n)){var o=LIe(n),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=OIe(n);r.series.push(o)}}),r}var NIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var n=r.getDom(),a=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var h=a.get("optionToContent"),d=a.get("contentToOption"),f=RIe(t);if(ft(h)){var m=h(r.getOption());Ye(m)?c.innerHTML=m:Bf(m)&&c.appendChild(m)}else{u.readOnly=a.get("readOnly");var y=u.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=a.get("textColor"),y.borderColor=a.get("textareaBorderColor"),y.backgroundColor=a.get("textareaColor"),u.value=f.value,c.appendChild(u)}var g=f.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),E=document.createElement("div");b+=";background-color:"+a.get("buttonColor"),b+=";color:"+a.get("buttonTextColor");var D=this;function B(){n.removeChild(o),D._dom=null}zy(S,"click",B),zy(E,"click",function(){if(d==null&&h!=null||d!=null&&h==null){B();return}var F;try{ft(d)?F=d(c,r.getOption()):F=FIe(u.value,g)}catch(H){throw B(),new Error("Data view format error "+H)}F&&r.dispatchAction({type:"changeDataView",newOption:F}),B()}),S.innerHTML=l[1],E.innerHTML=l[2],E.style.cssText=S.style.cssText=b,!a.get("readOnly")&&x.appendChild(E),x.appendChild(S),o.appendChild(s),o.appendChild(c),o.appendChild(x),c.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Io);function UIe(i,e){return Me(i,function(t,r){var n=e&&e[r];if(yt(n)&&!Ee(n)){var a=yt(t)&&!Ee(t);a||(t={value:t});var o=n.name!=null&&t.name==null;return t=At(t,n),o&&delete t.name,t}else return t})}Gs({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(i,e){var t=[];W(i.newOption.series,function(r){var n=e.getSeriesByName(r.name)[0];if(!n)t.push(Ce({type:"scatter"},r));else{var a=n.get("data");t.push({name:r.name,data:UIe(r.data,a)})}}),e.mergeOption(At({series:t},i.newOption))});var ite=NIe;var rte=W,nte=$t();function ate(i,e){var t=YU(i);rte(e,function(r,n){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[n])break}if(a<0){var s=i.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();t[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),t.push(e)}function ote(i){var e=YU(i),t=e[e.length-1];e.length>1&&e.pop();var r={};return rte(t,function(n,a){for(var o=e.length-1;o>=0;o--)if(n=e[o][a],n){r[a]=n;break}}),r}function ste(i){nte(i).snapshots=null}function lte(i){return YU(i).length}function YU(i){var e=nte(i);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var kIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){ste(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Io);Gs({type:"restore",event:"restore",update:"prepareAndUpdate"},function(i,e){e.resetOption("recreate")});var ute=kIe;var zIe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],VIe=function(){function i(e,t,r){var n=this;this._targetInfoList=[];var a=hte(t,e);W(HIe,function(o,s){(!r||!r.include||qt(r.include,s)>=0)&&o(a,n._targetInfoList)})}return i.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,n,a){if((r.coordRanges||(r.coordRanges=[])).push(n),!r.coordRange){r.coordRange=n;var o=qU[r.brushType](0,a,n);r.__rangeOffset={offset:Ate[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},i.prototype.matchOutputRanges=function(e,t,r){W(e,function(n){var a=this.findTargetInfo(n,t);a&&a!==!0&&W(a.coordSyses,function(o){var s=qU[n.brushType](1,o,n.range,!0);r(n,s.values,o,t)})},this)},i.prototype.setInputRanges=function(e,t){W(e,function(r){var n=this.findTargetInfo(r,t);if(r.range=r.range||[],n&&n!==!0){r.panelId=n.panelId;var a=qU[r.brushType](0,n.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Ate[r.brushType](a.values,o.offset,QIe(a.xyMinMax,o.xyMinMax)):a.values}},this)},i.prototype.makePanelOpts=function(e,t){return Me(this._targetInfoList,function(r){var n=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:xT(n),isTargetByCursor:wT(n,e,r.coordSysModel),getLinearBrushOtherExtent:_T(n)}})},i.prototype.controlSeries=function(e,t,r){var n=this.findTargetInfo(e,r);return n===!0||n&&qt(n.coordSyses,t.coordinateSystem)>=0},i.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,n=hte(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<dte.length;l++)if(dte[l](n,o))return o}return!0},i}();function ZU(i){return i[0]>i[1]&&i.reverse(),i}function hte(i,e){return Vf(i,e,{includeMainTypes:zIe})}var HIe={grid:function(i,e){var t=i.xAxisModels,r=i.yAxisModels,n=i.gridModels,a=ct(),o={},s={};!t&&!r&&!n||(W(t,function(l){var c=l.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),W(r,function(l){var c=l.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),W(n,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var c=l.coordinateSystem,u=[];W(c.getCartesians(),function(h,d){(qt(t,h.getAxis("x").model)>=0||qt(r,h.getAxis("y").model)>=0)&&u.push(h)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:fte.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(i,e){W(i.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:fte.geo})})}},dte=[function(i,e){var t=i.xAxisModel,r=i.yAxisModel,n=i.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&r&&(n=r.axis.grid.model),n&&n===e.gridModel},function(i,e){var t=i.geoModel;return t&&t===e.geoModel}],fte={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var i=this.coordSys,e=i.getBoundingRect().clone();return e.applyTransform(Eu(i)),e}},qU={lineX:Ut(pte,0),lineY:Ut(pte,1),rect:function(i,e,t,r){var n=i?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=i?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[ZU([n[0],a[0]]),ZU([n[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(i,e,t,r){var n=[[1/0,-1/0],[1/0,-1/0]],a=Me(t,function(o){var s=i?e.pointToData(o,r):e.dataToPoint(o,r);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:a,xyMinMax:n}}};function pte(i,e,t,r){var n=t.getAxis(["x","y"][i]),a=ZU(Me([0,1],function(s){return e?n.coordToData(n.toLocalCoord(r[s]),!0):n.toGlobalCoord(n.dataToCoord(r[s]))})),o=[];return o[i]=a,o[1-i]=[NaN,NaN],{values:a,xyMinMax:o}}var Ate={lineX:Ut(mte,0),lineY:Ut(mte,1),rect:function(i,e,t){return[[i[0][0]-t[0]*e[0][0],i[0][1]-t[0]*e[0][1]],[i[1][0]-t[1]*e[1][0],i[1][1]-t[1]*e[1][1]]]},polygon:function(i,e,t){return Me(i,function(r,n){return[r[0]-t[0]*e[n][0],r[1]-t[1]*e[n][1]]})}};function mte(i,e,t,r){return[e[0]-r[i]*t[0],e[1]-r[i]*t[1]]}function QIe(i,e){var t=gte(i),r=gte(e),n=[t[0]/r[0],t[1]/r[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function gte(i){return i?[i[0][1]-i[0][0],i[1][1]-i[1][0]]:[NaN,NaN]}var Q_=VIe;var JU=W,GIe=B7("toolbox-dataZoom_");var WIe=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,a){this._brushController||(this._brushController=new Av(n.getZr()),this._brushController.on("brush",st(this._onBrush,this)).mount()),XIe(t,r,this,a,n),KIe(t,r)},e.prototype.onclick=function(t,r,n){jIe[n].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var n={},a=this.ecModel;this._brushController.updateCovers([]);var o=new Q_($U(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,u,h){if(h.type==="cartesian2d"){var d=c.brushType;d==="rect"?(s("x",h,u[0]),s("y",h,u[1])):s({lineX:"x",lineY:"y"}[d],h,u)}}),ate(a,n),this._dispatchZoomAction(n);function s(c,u,h){var d=u.getAxis(c),f=d.model,m=l(c,f,a),y=m.findRepresentativeAxisProxy(f).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(h=Ml(0,h.slice(),d.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),m&&(n[m.id]={dataZoomId:m.id,startValue:h[0],endValue:h[1]})}function l(c,u,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var m=f.getAxisModel(c,u.componentIndex);m&&(d=f)}),d}},e.prototype._dispatchZoomAction=function(t){var r=[];JU(t,function(n,a){r.push(Tt(n))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Io),jIe={zoom:function(){var i=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:i})},back:function(){this._dispatchZoomAction(ote(this.ecModel))}};function $U(i){var e={xAxisIndex:i.get("xAxisIndex",!0),yAxisIndex:i.get("yAxisIndex",!0),xAxisId:i.get("xAxisId",!0),yAxisId:i.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function KIe(i,e){i.setIconStatus("back",lte(e)>1?"emphasis":"normal")}function XIe(i,e,t,r,n){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,i.setIconStatus("zoom",a?"emphasis":"normal");var o=new Q_($U(i),e,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:i.getModel("brushStyle").getItemStyle()}:!1)}Z9("dataZoom",function(i){var e=i.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),n=[],a=$U(r),o=Vf(i,a);JU(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),JU(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:GIe+c+h};d[u]=h,n.push(d)}return n});var vte=WIe;function e4(i){i.registerComponentModel(Yee),i.registerComponentView(Zee),Sp("saveAsImage",Jee),Sp("magicType",tte),Sp("dataView",ite),Sp("dataZoom",vte),Sp("restore",ute),Ei(Kee)}var YIe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(xi),yte=YIe;function qT(i){var e=i.get("confine");return e!=null?!!e:i.get("renderMode")==="richText"}function xte(i){if(ki.domSupported){for(var e=document.documentElement.style,t=0,r=i.length;t<r;t++)if(i[t]in e)return i[t]}}var t4=xte(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_te=xte(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function i4(i,e){if(!i)return e;e=pE(e,!0);var t=i.indexOf(e);return i=t===-1?e:"-"+i.slice(0,t)+"-"+e,i.toLowerCase()}function wte(i,e){var t=i.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i);return t?e?t[e]:t:null}var qIe=i4(_te,"transition"),r4=i4(t4,"transform"),ZIe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ki.transform3dSupported?"will-change:transform;":"");function JIe(i){return i=i==="left"?"right":i==="right"?"left":i==="top"?"bottom":"top",i}function $Ie(i,e,t){if(!Ye(t)||t==="inside")return"";var r=i.get("backgroundColor"),n=i.get("borderWidth");e=Iu(e);var a=JIe(t),o=Math.max(Math.round(n)*1.5,6),s="",l=r4+":",c;qt(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=a==="top"?225:45)+"deg)");var u=c*Math.PI/180,h=o+n,d=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),f=Math.round(((d-Math.SQRT2*n)/2+Math.SQRT2*n-(d-h)/2)*100)/100;s+=";"+a+":-"+f+"px";var m=e+" solid "+n+"px;",y=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+y.join("")+'"></div>'}function eBe(i,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+i/2+"s "+t,n="opacity"+r+",visibility"+r;return e||(r=" "+i+"s "+t,n+=ki.transformSupported?","+r4+r:",left"+r+",top"+r),qIe+":"+n}function bte(i,e,t){var r=i.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!ki.transformSupported)return t?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var a=ki.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+n+(a?",0":"")+")";return t?"top:0;left:0;"+r4+":"+o+";":[["top",0],["left",0],[t4,o]]}function tBe(i){var e=[],t=i.get("fontSize"),r=i.getTextColor();r&&e.push("color:"+r),e.push("font:"+i.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var n=i.get("textShadowColor"),a=i.get("textShadowBlur")||0,o=i.get("textShadowOffsetX")||0,s=i.get("textShadowOffsetY")||0;return n&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+n),W(["decoration","align"],function(l){var c=i.get(l);c&&e.push("text-"+l+":"+c)}),e.join(";")}function iBe(i,e,t){var r=[],n=i.get("transitionDuration"),a=i.get("backgroundColor"),o=i.get("shadowBlur"),s=i.get("shadowColor"),l=i.get("shadowOffsetX"),c=i.get("shadowOffsetY"),u=i.getModel("textStyle"),h=OE(i,"html"),d=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+d),e&&n&&r.push(eBe(n,t)),a&&r.push("background-color:"+a),W(["width","color","radius"],function(f){var m="border-"+f,y=pE(m),g=i.get(y);g!=null&&r.push(m+":"+g+(f==="color"?"":"px"))}),r.push(tBe(u)),h!=null&&r.push("padding:"+Mu(h).join("px ")+"px"),r.join(";")+";"}function Ste(i,e,t,r,n){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&dQ(i,o,t,r,n)}else{i[0]=r,i[1]=n;var s=a&&a.getViewportRootOffset();s&&(i[0]+=s.offsetLeft,i[1]+=s.offsetTop)}i[2]=i[0]/e.getWidth(),i[3]=i[1]/e.getHeight()}var rBe=function(){function i(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,ki.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var n=this._zr=e.getZr(),a=t.appendTo,o=a&&(Ye(a)?document.querySelector(a):Bf(a)?a:ft(a)&&a(e.getDom()));Ste(this._styleCoord,n,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=n.handler,u=n.painter.getViewportRoot();cl(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return i.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=wte(t,"position"),n=t.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},i.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,a=this._styleCoord;r.innerHTML?n.cssText=ZIe+iBe(e,!this._firstShow,this._longHide)+bte(a[0],a[1],!0)+("border-color:"+Iu(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},i.prototype.setContent=function(e,t,r,n,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(Ye(a)&&r.get("trigger")==="item"&&!qT(r)&&(s=$Ie(r,n,a)),Ye(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Ee(e)||(e=[e]);for(var l=0;l<e.length;l++)Bf(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},i.prototype.setEnterable=function(e){this._enterable=e},i.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},i.prototype.moveTo=function(e,t){var r=this._styleCoord;if(Ste(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var n=this.el.style,a=bte(r[0],r[1]);W(a,function(o){n[o[0]]=o[1]})}},i.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},i.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",ki.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},i.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(st(this.hide,this),e)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},i}(),Cte=rBe;var nBe=function(){function i(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Tte(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return i.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},i.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},i.prototype.setContent=function(e,t,r,n,a){var o=this;yt(e)&&xr(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new yi({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:OE(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),W(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),W(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},i.prototype.setEnterable=function(e){this._enterable=e},i.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Ete(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},i.prototype.moveTo=function(e,t){var r=this.el;if(r){var n=this._styleCoord;Tte(n,this._zr,e,t),e=n[0],t=n[1];var a=r.style,o=Cp(a.borderWidth||0),s=Ete(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},i.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},i.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},i.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(st(this.hide,this),e)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this._zr.remove(this.el)},i}();function Cp(i){return Math.max(0,i)}function Ete(i){var e=Cp(i.shadowBlur||0),t=Cp(i.shadowOffsetX||0),r=Cp(i.shadowOffsetY||0);return{left:Cp(e-t),right:Cp(e+t),top:Cp(e-r),bottom:Cp(e+r)}}function Tte(i,e,t,r){i[0]=t,i[1]=r,i[2]=i[0]/e.getWidth(),i[3]=i[1]/e.getHeight()}var Mte=nBe;var aBe=new pi({shape:{x:-1,y:-1,width:2,height:2}}),oBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(ki.node||!r.getDom())){var n=t.getComponent("tooltip"),a=this._renderMode=O7(n.get("renderMode"));this._tooltipContent=a==="richText"?new Mte(r):new Cte(r,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,r,n){if(!(ki.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=n;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Uc(this,"_updatePosition",50,"fixRate"):bd(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");NT("itemTooltip",this._api,st(function(n,a,o){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(a,o):n==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,n=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(t,r,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,n,a){if(!(a.from===this.uid||ki.node||!n.getDom())){var o=Ite(a,n);this._ticket="";var s=a.dataByCoordSys,l=uBe(a,r,n);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var u=aBe;u.x=a.x,u.y=a.y,u.update(),Pt(u).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:u},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,n,a))return;var h=V_(a,r),d=h.point[0],f=h.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:h.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,n,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(Ite(a,n))},e.prototype._manuallyAxisShowTip=function(t,r,n,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),h=G_([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var n=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var s=Pt(n);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;Ru(n,function(u){if(Pt(u).dataIndex!=null)return l=u,!0;if(Pt(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,r):c?this._showComponentItemTooltip(t,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var n=t.get("showDelay");r=st(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},e.prototype._showAxisTooltip=function(t,r){var n=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=G_([r.tooltipOption],a),l=this._renderMode,c=[],u=wn("section",{blocks:[],noHeader:!0}),h=[],d=new FE;W(t,function(b){W(b.dataByAxis,function(S){var E=n.getComponent(S.axisDim+"Axis",S.axisIndex),D=S.value;if(!(!E||D==null)){var B=IU(D,E.axis,n,S.seriesDataIndices,S.valueLabelOpt),F=wn("section",{header:B,noHeader:!bo(B),sortBlocks:!0,blocks:[]});u.blocks.push(F),W(S.seriesDataIndices,function(H){var U=n.getSeriesByIndex(H.seriesIndex),k=H.dataIndexInside,j=U.getDataParams(k);if(!(j.dataIndex<0)){j.axisDim=S.axisDim,j.axisIndex=S.axisIndex,j.axisType=S.axisType,j.axisId=S.axisId,j.axisValue=u_(E.axis,{value:D}),j.axisValueLabel=B,j.marker=d.makeTooltipMarker("item",Iu(j.color),l);var q=r3(U.formatTooltip(k,!0,null)),X=q.frag;if(X){var Y=G_([U],a).get("valueFormatter");F.blocks.push(Y?Ce({valueFormatter:Y},X):X)}q.text&&h.push(q.text),c.push(j)}})}})}),u.blocks.reverse(),h.reverse();var f=r.position,m=s.get("order"),y=u3(u,d,l,m,n.get("useUTC"),s.get("textStyle"));y&&h.unshift(y);var g=l==="richText"?`

`:"<br/>",x=h.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,x,c,Math.random()+"",o[0],o[1],f,null,d)})},e.prototype._showSeriesItemTooltip=function(t,r,n){var a=this._ecModel,o=Pt(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,h=o.dataType,d=c.getData(h),f=this._renderMode,m=t.positionDefault,y=G_([d.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),g=y.get("trigger");if(!(g!=null&&g!=="item")){var x=c.getDataParams(u,h),b=new FE;x.marker=b.makeTooltipMarker("item",Iu(x.color),f);var S=r3(c.formatTooltip(u,!1,h)),E=y.get("order"),D=y.get("valueFormatter"),B=S.frag,F=B?u3(D?Ce({valueFormatter:D},B):B,b,f,E,a.get("useUTC"),y.get("textStyle")):S.text,H="item_"+c.name+"_"+u;this._showOrMove(y,function(){this._showTooltipContent(y,F,x,H,t.offsetX,t.offsetY,t.position,t.target,b)}),n({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,n){var a=Pt(r),o=a.tooltipConfig,s=o.option||{};if(Ye(s)){var l=s;s={content:l,formatter:l}}var c=[s],u=this._ecModel.getComponent(a.componentMainType,a.componentIndex);u&&c.push(u),c.push({formatter:s.content});var h=t.positionDefault,d=G_(c,this._tooltipModel,h?{position:h}:null),f=d.get("content"),m=Math.random()+"",y=new FE;this._showOrMove(d,function(){var g=Tt(d.get("formatterParams")||{});this._showTooltipContent(d,f,g,m,t.offsetX,t.offsetY,t.position,r,y)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,n,a,o,s,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var d=t.get("formatter");l=l||t.get("position");var f=r,m=this._getNearestPoint([o,s],n,t.get("trigger"),t.get("borderColor")),y=m.color;if(d)if(Ye(d)){var g=t.ecModel.get("useUTC"),x=Ee(n)?n[0]:n,b=x&&x.axisType&&x.axisType.indexOf("time")>=0;f=d,b&&(f=gm(x.axisValue,f,g)),f=mE(f,n,!0)}else if(ft(d)){var S=st(function(E,D){E===this._ticket&&(h.setContent(D,u,t,y,l),this._updatePosition(t,l,o,s,h,n,c))},this);this._ticket=a,f=d(n,a,S)}else f=d;h.setContent(f,u,t,y,l),h.show(t,y),this._updatePosition(t,l,o,s,h,n,c)}},e.prototype._getNearestPoint=function(t,r,n,a){if(n==="axis"||Ee(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Ee(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,n,a,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var h=o.getSize(),d=t.get("align"),f=t.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),ft(r)&&(r=r([n,a],s,o.el,m,{viewSize:[c,u],contentSize:h.slice()})),Ee(r))n=ot(r[0],c),a=ot(r[1],u);else if(yt(r)){var y=r;y.width=h[0],y.height=h[1];var g=Fr(y,{width:c,height:u});n=g.x,a=g.y,d=null,f=null}else if(Ye(r)&&l){var x=cBe(r,m,h,t.get("borderWidth"));n=x[0],a=x[1]}else{var x=sBe(n,a,o,c,u,d?null:20,f?null:20);n=x[0],a=x[1]}if(d&&(n-=Bte(d)?h[0]/2:d==="right"?h[0]:0),f&&(a-=Bte(f)?h[1]/2:f==="bottom"?h[1]:0),qT(t)){var x=lBe(n,a,o,c,u);n=x[0],a=x[1]}o.moveTo(n,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var n=this._lastDataByCoordSys,a=this._cbParamsList,o=!!n&&n.length===t.length;return o&&W(n,function(s,l){var c=s.dataByAxis||[],u=t[l]||{},h=u.dataByAxis||[];o=o&&c.length===h.length,o&&W(c,function(d,f){var m=h[f]||{},y=d.seriesDataIndices||[],g=m.seriesDataIndices||[];o=o&&d.value===m.value&&d.axisType===m.axisType&&d.axisId===m.axisId&&y.length===g.length,o&&W(y,function(x,b){var S=g[b];o=o&&x.seriesIndex===S.seriesIndex&&x.dataIndex===S.dataIndex}),a&&W(d.seriesDataIndices,function(x){var b=x.seriesIndex,S=r[b],E=a[b];S&&E&&E.data!==S.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){ki.node||!r.getDom()||(bd(this,"_updatePosition"),this._tooltipContent.dispose(),z_("itemTooltip",r))},e.type="tooltip",e}(hr);function G_(i,e,t){var r=e.ecModel,n;t?(n=new ir(t,r,r),n=new ir(e.option,n,r)):n=e;for(var a=i.length-1;a>=0;a--){var o=i[a];o&&(o instanceof ir&&(o=o.get("tooltip",!0)),Ye(o)&&(o={formatter:o}),o&&(n=new ir(o,n,r)))}return n}function Ite(i,e){return i.dispatchAction||st(e.dispatchAction,e)}function sBe(i,e,t,r,n,a,o){var s=t.getSize(),l=s[0],c=s[1];return a!=null&&(i+l+a+2>r?i-=l+a:i+=a),o!=null&&(e+c+o>n?e-=c+o:e+=o),[i,e]}function lBe(i,e,t,r,n){var a=t.getSize(),o=a[0],s=a[1];return i=Math.min(i+o,r)-o,e=Math.min(e+s,n)-s,i=Math.max(i,0),e=Math.max(e,0),[i,e]}function cBe(i,e,t,r){var n=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=e.width,u=e.height;switch(i){case"inside":s=e.x+c/2-n/2,l=e.y+u/2-a/2;break;case"top":s=e.x+c/2-n/2,l=e.y-a-o;break;case"bottom":s=e.x+c/2-n/2,l=e.y+u+o;break;case"left":s=e.x-n-o,l=e.y+u/2-a/2;break;case"right":s=e.x+c+o,l=e.y+u/2-a/2}return[s,l]}function Bte(i){return i==="center"||i==="middle"}function uBe(i,e,t){var r=sx(i).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var a=Hf(e,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=Pt(c).tooltipConfig;if(u&&u.name===i.name)return l=c,!0}),l)return{componentMainType:n,componentIndex:o.componentIndex,el:l}}}}var Dte=oBe;function n4(i){Ei(Qu),i.registerComponentModel(yte),i.registerComponentView(Dte),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},hn),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},hn)}var hBe=["rect","polygon","keep","clear"];function a4(i,e){var t=cr(i?i.brush:[]);if(t.length){var r=[];W(t,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(r=r.concat(c))});var n=i&&i.toolbox;Ee(n)&&(n=n[0]),n||(n={feature:{}},i.toolbox=[n]);var a=n.feature||(n.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),dBe(s),e&&!s.length&&s.push.apply(s,hBe)}}function dBe(i){var e={};W(i,function(t){e[t]=1}),i.length=0,W(e,function(t,r){i.push(r)})}var Rte=W;function Pte(i){if(i){for(var e in i)if(i.hasOwnProperty(e))return!0}}function W_(i,e,t){var r={};return Rte(e,function(a){var o=r[a]=n();Rte(i[a],function(s,l){if(Ta.isValidType(l)){var c={type:l,visual:s};t&&t(c,a),o[l]=new Ta(c),l==="opacity"&&(c=Tt(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ta(c))}})}),r;function n(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function ZT(i,e,t){var r;W(t,function(n){e.hasOwnProperty(n)&&Pte(e[n])&&(r=!0)}),r&&W(t,function(n){e.hasOwnProperty(n)&&Pte(e[n])?i[n]=Tt(e[n]):delete i[n]})}function Lte(i,e,t,r,n,a){var o={};W(i,function(h){var d=Ta.prepareVisualTypes(e[h]);o[h]=d});var s;function l(h){return Kx(t,s,h)}function c(h,d){g3(t,s,h,d)}a==null?t.each(u):t.each([a],u);function u(h,d){s=a==null?h:d;var f=t.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var m=r.call(n,h),y=e[m],g=o[m],x=0,b=g.length;x<b;x++){var S=g[x];y[S]&&y[S].applyVisual(h,l,c)}}}function Ote(i,e,t,r){var n={};return W(i,function(a){var o=Ta.prepareVisualTypes(e[a]);n[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(D){return Kx(s,h,D)}function u(D,B){g3(s,h,D,B)}for(var h,d=s.getStore();(h=o.next())!=null;){var f=s.getRawDataItem(h);if(!(f&&f.visualMap===!1))for(var m=r!=null?d.get(l,h):h,y=t(m),g=e[y],x=n[y],b=0,S=x.length;b<S;b++){var E=x[b];g[E]&&g[E].applyVisual(m,c,u)}}}}}function Ute(i){var e=i.brushType,t={point:function(r){return Fte[e].point(r,t,i)},rect:function(r){return Fte[e].rect(r,t,i)}};return t}var Fte={lineX:Nte(0),lineY:Nte(1),rect:{point:function(i,e,t){return i&&t.boundingRect.contain(i[0],i[1])},rect:function(i,e,t){return i&&t.boundingRect.intersect(i)}},polygon:{point:function(i,e,t){return i&&t.boundingRect.contain(i[0],i[1])&&Sd(t.range,i[0],i[1])},rect:function(i,e,t){var r=t.range;if(!i||r.length<=1)return!1;var n=i.x,a=i.y,o=i.width,s=i.height,l=r[0];if(Sd(r,n,a)||Sd(r,n+o,a)||Sd(r,n,a+s)||Sd(r,n+o,a+s)||Ht.create(i).contain(l[0],l[1])||B0(n,a,n+o,a,r)||B0(n,a,n,a+s,r)||B0(n+o,a,n+o,a+s,r)||B0(n,a+s,n+o,a+s,r))return!0}}};function Nte(i){var e=["x","y"],t=["width","height"];return{point:function(r,n,a){if(r){var o=a.range,s=r[i];return j_(s,o)}},rect:function(r,n,a){if(r){var o=a.range,s=[r[e[i]],r[e[i]]+r[t[i]]];return s[1]<s[0]&&s.reverse(),j_(s[0],o)||j_(s[1],o)||j_(o[0],s)||j_(o[1],s)}}}}function j_(i,e){return e[0]<=i&&i<=e[1]}var kte=["inBrush","outOfBrush"],o4="__ecBrushSelect",s4="__ecInBrushSelectEvent";function l4(i){i.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new Q_(e.option,i);t.setInputRanges(e.areas,i)})}function c4(i,e,t){var r=[],n,a;i.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),l4(i),i.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Tt(o.areas),selected:[]};r.push(l);var c=o.option,u=c.brushLink,h=[],d=[],f=[],m=!1;s||(n=c.throttleType,a=c.throttleDelay);var y=Me(o.areas,function(D){var B=mBe[D.brushType],F=At({boundingRect:B?B(D):void 0},D);return F.selectors=Ute(F),F}),g=W_(o.option,kte,function(D){D.mappingMethod="fixed"});Ee(u)&&W(u,function(D){h[D]=1});function x(D){return u==="all"||!!h[D]}function b(D){return!!D.length}i.eachSeries(function(D,B){var F=f[B]=[];D.subType==="parallel"?S(D,B):E(D,B,F)});function S(D,B){var F=D.coordinateSystem;m=m||F.hasAxisBrushed(),x(B)&&F.eachActiveState(D.getData(),function(H,U){H==="active"&&(d[U]=1)})}function E(D,B,F){if(!(!D.brushSelector||ABe(o,B))&&(W(y,function(U){o.brushTargetManager.controlSeries(U,D,i)&&F.push(U),m=m||b(F)}),x(B)&&b(F))){var H=D.getData();H.each(function(U){zte(D,F,H,U)&&(d[U]=1)})}}i.eachSeries(function(D,B){var F={seriesId:D.id,seriesIndex:B,seriesName:D.name,dataIndex:[]};l.selected.push(F);var H=f[B],U=D.getData(),k=x(B)?function(j){return d[j]?(F.dataIndex.push(U.getRawIndex(j)),"inBrush"):"outOfBrush"}:function(j){return zte(D,H,U,j)?(F.dataIndex.push(U.getRawIndex(j)),"inBrush"):"outOfBrush"};(x(B)?m:b(H))&&Lte(kte,g,U,k)})}),fBe(e,n,a,r,t)}function fBe(i,e,t,r,n){if(n){var a=i.getZr();if(!a[s4]){a[o4]||(a[o4]=pBe);var o=Uc(a,o4,t,e);o(i,r)}}}function pBe(i,e){if(!i.isDisposed()){var t=i.getZr();t[s4]=!0,i.dispatchAction({type:"brushSelect",batch:e}),t[s4]=!1}}function zte(i,e,t,r){for(var n=0,a=e.length;n<a;n++){var o=e[n];if(i.brushSelector(r,t,o.selectors,o))return!0}}function ABe(i,e){var t=i.option.seriesIndex;return t!=null&&t!=="all"&&(Ee(t)?qt(t,e)<0:e!==t)}var mBe={rect:function(i){return Vte(i.range)},polygon:function(i){for(var e,t=i.range,r=0,n=t.length;r<n;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&Vte(e)}};function Vte(i){return new Ht(i[0][0],i[1][0],i[0][1]-i[0][0],i[1][1]-i[1][0])}var gBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new Av(r.getZr())).on("brush",st(this._onBrush,this)).mount()},e.prototype.render=function(t,r,n,a){this.model=t,this._updateController(t,r,n,a)},e.prototype.updateTransform=function(t,r,n,a){l4(r),this._updateController(t,r,n,a)},e.prototype.updateVisual=function(t,r,n,a){this.updateTransform(t,r,n,a)},e.prototype.updateView=function(t,r,n,a){this._updateController(t,r,n,a)},e.prototype._updateController=function(t,r,n,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Tt(n),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Tt(n),$from:r})},e.type="brush",e}(hr),Hte=gBe;var vBe="#ddd",yBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&ZT(n,t,["inBrush","outOfBrush"]);var a=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:vBe},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=Me(t,function(r){return Qte(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=Qte(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(xi);function Qte(i,e){return ri({brushType:i.brushType,brushMode:i.brushMode,transformable:i.transformable,brushStyle:new ir(i.brushStyle).getItemStyle(),removeOnClick:i.removeOnClick,z:i.z},e,!0)}var Gte=yBe;var xBe=["rect","polygon","lineX","lineY","keep","clear"],_Be=function(i){le(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.render=function(t,r,n){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,W(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,n){this.render(t,r,n)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),n={};return W(t.get("type",!0),function(a){r[a]&&(n[a]=r[a])}),n},e.prototype.onclick=function(t,r,n){var a=this._brushType,o=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?a:a===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:xBe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Io),Wte=_Be;function u4(i){i.registerComponentView(Hte),i.registerComponentModel(Gte),i.registerPreprocessor(a4),i.registerVisual(i.PRIORITY.VISUAL.BRUSH,c4),i.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),i.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},hn),i.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},hn),Sp("brush",Wte)}var wBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(xi),bBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),c=Yt(t.get("textBaseline"),t.get("textVerticalAlign")),u=new yi({style:br(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),d=t.get("subtext"),f=new yi({style:br(s,{text:d,fill:s.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),y=t.get("sublink"),g=t.get("triggerEvent",!0);u.silent=!m&&!g,f.silent=!y&&!g,m&&u.on("click",function(){vm(m,"_"+t.get("target"))}),y&&f.on("click",function(){vm(y,"_"+t.get("subtarget"))}),Pt(u).eventData=Pt(f).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(u),d&&a.add(f);var x=a.getBoundingRect(),b=t.getBoxLayoutParams();b.width=x.width,b.height=x.height;var S=Fr(b,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?S.x+=S.width:l==="center"&&(S.x+=S.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?S.y+=S.height:c==="middle"&&(S.y+=S.height/2),c=c||"top"),a.x=S.x,a.y=S.y,a.markRedraw();var E={align:l,verticalAlign:c};u.setStyle(E),f.setStyle(E),x=a.getBoundingRect();var D=S.margin,B=t.getItemStyle(["color","opacity"]);B.fill=t.get("backgroundColor");var F=new pi({shape:{x:x.x-D[3],y:x.y-D[0],width:x.width+D[1]+D[3],height:x.height+D[0]+D[2],r:t.get("borderRadius")},style:B,subPixelOptimize:!0,silent:!0});a.add(F)}},e.type="title",e}(hr);function h4(i){i.registerComponentModel(wBe),i.registerComponentView(bBe)}var SBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(t){i.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],n=t.axisType,a=this._names=[],o;n==="category"?(o=[],W(r,function(c,u){var h=kn(wu(c),""),d;yt(c)?(d=Tt(c),d.value=u):d=u,o.push(d),a.push(h)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new sa([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(xi),d4=SBe;var jte=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Cs(d4.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(d4);jr(jte,z0.prototype);var Kte=jte;var CBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(hr),Xte=CBe;var EBe=function(i){le(e,i);function e(t,r,n,a){var o=i.call(this,t,r,n)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Vo),Yte=EBe;var f4=Math.PI,qte=$t(),TBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,n){if(this.model=t,this.api=n,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,n),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return wn("nameValue",{noName:!0,value:u})},W(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](a,o,l,t)},this),this._renderAxisLabel(a,s,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var n=t.get(["label","position"]),a=t.get("orient"),o=IBe(t,r),s;n==null||n==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":Ye(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:f4/2},h=a==="vertical"?o.height:o.width,d=t.getModel("controlStyle"),f=d.get("show",!0),m=f?d.get("itemSize"):0,y=f?d.get("itemGap"):0,g=m+y,x=t.get(["label","rotate"])||0;x=x*f4/180;var b,S,E,D=d.get("position",!0),B=f&&d.get("showPlayBtn",!0),F=f&&d.get("showPrevBtn",!0),H=f&&d.get("showNextBtn",!0),U=0,k=h;D==="left"||D==="bottom"?(B&&(b=[0,0],U+=g),F&&(S=[U,0],U+=g),H&&(E=[k-m,0],k-=g)):(B&&(b=[k-m,0],k-=g),F&&(S=[0,0],U+=g),H&&(E=[k-m,0],k-=g));var j=[U,k];return t.get("inverse")&&j.reverse(),{viewRect:o,mainLength:h,orient:a,rotation:u[a],labelRotation:x,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[a],playPosition:b,prevBtnPosition:S,nextBtnPosition:E,axisExtent:j,controlSize:m,controlGap:y}},e.prototype._position=function(t,r){var n=this._mainGroup,a=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=za(),l=o.x,c=o.y+o.height;Jo(s,s,[-l,-c]),dl(s,s,-f4/2),Jo(s,s,[l,c]),o=o.clone(),o.applyTransform(s)}var u=b(o),h=b(n.getBoundingRect()),d=b(a.getBoundingRect()),f=[n.x,n.y],m=[a.x,a.y];m[0]=f[0]=u[0][0];var y=t.labelPosOpt;if(y==null||Ye(y)){var g=y==="+"?0:1;S(f,h,u,1,g),S(m,d,u,1,1-g)}else{var g=y>=0?0:1;S(f,h,u,1,g),m[1]=f[1]+y}n.setPosition(f),a.setPosition(m),n.rotation=a.rotation=t.rotation,x(n),x(a);function x(E){E.originX=u[0][0]-E.x,E.originY=u[1][0]-E.y}function b(E){return[[E.x,E.x+E.width],[E.y,E.y+E.height]]}function S(E,D,B,F,H){E[F]+=B[F][H]-D[F][H]}},e.prototype._createAxis=function(t,r){var n=r.getData(),a=r.get("axisType"),o=MBe(r,a);o.getTicks=function(){return n.mapArray(["value"],function(c){return{value:c}})};var s=n.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new Yte("value",o,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new xt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,n,a){var o=n.getExtent();if(a.get(["lineStyle","show"])){var s=new Xn({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Ce({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new Xn({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:At({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,n,a){var o=this,s=a.getData(),l=n.scale.getTicks();this._tickSymbols=[],W(l,function(c){var u=n.dataToCoord(c.value),h=s.getItemModel(c.value),d=h.getModel("itemStyle"),f=h.getModel(["emphasis","itemStyle"]),m=h.getModel(["progress","itemStyle"]),y={x:u,y:0,onclick:st(o._changeTimeline,o,c.value)},g=Zte(h,d,r,y);g.ensureState("emphasis").style=f.getItemStyle(),g.ensureState("progress").style=m.getItemStyle(),vh(g);var x=Pt(g);h.get("tooltip")?(x.dataIndex=c.value,x.dataModel=a):x.dataIndex=x.dataModel=null,o._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(t,r,n,a){var o=this,s=n.getLabelModel();if(s.get("show")){var l=a.getData(),c=n.getViewLabels();this._tickLabels=[],W(c,function(u){var h=u.tickValue,d=l.getItemModel(h),f=d.getModel("label"),m=d.getModel(["emphasis","label"]),y=d.getModel(["progress","label"]),g=n.dataToCoord(u.tickValue),x=new yi({x:g,y:0,rotation:t.labelRotation-t.rotation,onclick:st(o._changeTimeline,o,h),silent:!1,style:br(f,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});x.ensureState("emphasis").style=br(m),x.ensureState("progress").style=br(y),r.add(x),vh(x),qte(x).dataIndex=h,o._tickLabels.push(x)})}},e.prototype._renderControl=function(t,r,n,a){var o=t.controlSize,s=t.rotation,l=a.getModel("controlStyle").getItemStyle(),c=a.getModel(["emphasis","controlStyle"]).getItemStyle(),u=a.getPlayState(),h=a.get("inverse",!0);d(t.nextBtnPosition,"next",st(this._changeTimeline,this,h?"-":"+")),d(t.prevBtnPosition,"prev",st(this._changeTimeline,this,h?"+":"-")),d(t.playPosition,u?"stop":"play",st(this._handlePlayClick,this,!u),!0);function d(f,m,y,g){if(f){var x=$o(Yt(a.get(["controlStyle",m+"BtnSize"]),o),o),b=[0,-x/2,x,x],S=BBe(a,m+"Icon",b,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:y});S.ensureState("emphasis").style=c,r.add(S),vh(S)}}},e.prototype._renderCurrentPointer=function(t,r,n,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(h){h.draggable=!0,h.drift=st(c._handlePointerDrag,c),h.ondragend=st(c._handlePointerDragend,c),Jte(h,c._progressLine,s,n,a,!0)},onUpdate:function(h){Jte(h,c._progressLine,s,n,a)}};this._currentPointer=Zte(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var n=this._toAxisCoord(t)[0],a=this._axis,o=co(a.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return ts(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),n=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var c=o.dataToCoord(s),u=Math.abs(c-t);u<n&&(n=u,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",qte(n[a]).dataIndex<=t)},e.type="timeline.slider",e}(Xte);function MBe(i,e){if(e=e||i.get("type"),e)switch(e){case"category":return new l_({ordinalMeta:i.getCategories(),extent:[1/0,-1/0]});case"time":return new f2({locale:i.ecModel.getLocaleModel(),useUTC:i.ecModel.get("useUTC")});default:return new El}}function IBe(i,e){return Fr(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},i.get("padding"))}function BBe(i,e,t,r){var n=r.style,a=md(i.get(["controlStyle",e]),r||{},new Ht(t[0],t[1],t[2],t[3]));return n&&a.setStyle(n),a}function Zte(i,e,t,r,n,a){var o=e.get("color");if(n)n.setColor(o),t.add(n),a&&a.onUpdate(n);else{var s=i.get("symbol");n=Nr(s,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),t.add(n),a&&a.onCreate(n)}var l=e.getItemStyle(["color"]);n.setStyle(l),r=ri({rectHover:!0,z2:100},r,!0);var c=Pu(i.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var u=tc(i.get("symbolOffset"),c);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var h=i.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function Jte(i,e,t,r,n,a){if(!i.dragging){var o=n.getModel("checkpointStyle"),s=r.dataToCoord(n.getData().get("value",t));if(a||!o.get("animation",!0))i.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};i.stopAnimation(null,!0),i.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}var $te=TBe;function eie(i){i.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),At({currentIndex:n.option.currentIndex},e)}),i.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function p4(i){var e=i&&i.timeline;Ee(e)||(e=e?[e]:[]),W(e,function(t){t&&DBe(t)})}function DBe(i){var e=i.type,t={number:"value",time:"time"};if(t[e]&&(i.axisType=t[e],delete i.type),tie(i),Wm(i,"controlPosition")){var r=i.controlStyle||(i.controlStyle={});Wm(r,"position")||(r.position=i.controlPosition),r.position==="none"&&!Wm(r,"show")&&(r.show=!1,delete r.position),delete i.controlPosition}W(i.data||[],function(n){yt(n)&&!Ee(n)&&(!Wm(n,"value")&&Wm(n,"name")&&(n.value=n.name),tie(n))})}function tie(i){var e=i.itemStyle||(i.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=i.label||i.label||{},n=r.normal||(r.normal={}),a={normal:1,emphasis:1};W(r,function(o,s){!a[s]&&!Wm(n,s)&&(n[s]=o)}),t.label&&!Wm(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Wm(i,e){return i.hasOwnProperty(e)}function A4(i){i.registerComponentModel(Kte),i.registerComponentView($te),i.registerSubTypeDefaulter("timeline",function(){return"slider"}),eie(i),i.registerPreprocessor(p4)}function jm(i,e){if(!i)return!1;for(var t=Ee(i)?i:[i],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function $T(i){ql(i,"label",["show"])}var eM=$t(),iie=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(ki.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,n,a){var o=this.mainType;n||r.eachSeries(function(s){var l=s.get(this.mainType,!0),c=eM(s)[o];if(!l||!l.data){eM(s)[o]=null;return}c?c._mergeOption(l,r,!0):(a&&$T(l),W(l.data,function(u){u instanceof Array?($T(u[0]),$T(u[1])):$T(u)}),c=this.createMarkerModelFromSeries(l,this,r),Ce(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),eM(s)[o]=c},this)},e.prototype.formatTooltip=function(t,r,n){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return wn("section",{header:this.name,blocks:[wn("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,r){return eM(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(xi);jr(iie,z0.prototype);var Ys=iie;var RBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Ys),rie=RBe;function g4(i){return!(isNaN(parseFloat(i.x))&&isNaN(parseFloat(i.y)))}function PBe(i){return!isNaN(parseFloat(i.x))&&!isNaN(parseFloat(i.y))}function tM(i,e,t,r,n,a){var o=[],s=ic(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,c=rM(e,l,i),u=e.indicesOfNearest(l,c)[0];o[n]=e.get(t,u),o[a]=e.get(l,u);var h=e.get(r,u),d=Us(e.get(r,u));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,h]}var m4={min:Ut(tM,"min"),max:Ut(tM,"max"),average:Ut(tM,"average"),median:Ut(tM,"median")};function Ep(i,e){if(e){var t=i.getData(),r=i.coordinateSystem,n=r&&r.dimensions;if(!PBe(e)&&!Ee(e.coord)&&Ee(n)){var a=v4(e,t,r,i);if(e=Tt(e),e.type&&m4[e.type]&&a.baseAxis&&a.valueAxis){var o=qt(n,a.baseAxis.dim),s=qt(n,a.valueAxis.dim),l=m4[e.type](t,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Ee(n))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)m4[c[u]]&&(c[u]=rM(t,t.mapDimension(n[u]),c[u]));return e}}function v4(i,e,t,r){var n={};return i.valueIndex!=null||i.valueDim!=null?(n.valueDataDim=i.valueIndex!=null?e.getDimension(i.valueIndex):i.valueDim,n.valueAxis=t.getAxis(LBe(r,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function LBe(i,e){var t=i.getData().getDimensionInfo(e);return t&&t.coordDim}function Tp(i,e){return i&&i.containData&&e.coord&&!g4(e)?i.containData(e.coord):!0}function nie(i,e,t){return i&&i.containZone&&e.coord&&t.coord&&!g4(e)&&!g4(t)?i.containZone(e.coord,t.coord):!0}function iM(i,e){return i?function(t,r,n,a){var o=a<2?t.coord&&t.coord[a]:t.value;return Nc(o,e[a])}:function(t,r,n,a){return Nc(t.value,e[a])}}function rM(i,e,t){if(t==="average"){var r=0,n=0;return i.each(e,function(a,o){isNaN(a)||(r+=a,n++)}),r/n}else return t==="median"?i.getMedian(e):i.getDataExtent(e)[t==="max"?1:0]}var x4=$t(),OBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=ct()},e.prototype.render=function(t,r,n){var a=this,o=this.markerGroupMap;o.each(function(s){x4(s).keep=!1}),r.eachSeries(function(s){var l=Ys.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,n)}),o.each(function(s){!x4(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(t){x4(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var n=this;W(t,function(a){var o=Ys.getMarkerModelFromSeries(a,n.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?HC(l):gx(l))})}})},e.type="marker",e}(hr),Tv=OBe;function aie(i,e,t){var r=e.coordinateSystem;i.each(function(n){var a=i.getItemModel(n),o,s=ot(a.get("x"),t.getWidth()),l=ot(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(i.getValues(i.dimensions,n));else if(r){var c=i.get(r.dimensions[0],n),u=i.get(r.dimensions[1],n);o=r.dataToPoint([c,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),i.setItemLayout(n,o)})}var FBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(a){var o=Ys.getMarkerModelFromSeries(a,"markPoint");o&&(aie(o.getData(),a,n),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,n,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new Mh),h=NBe(o,t,r);r.setData(h),aie(r.getData(),t,a),h.each(function(d){var f=h.getItemModel(d),m=f.getShallow("symbol"),y=f.getShallow("symbolSize"),g=f.getShallow("symbolRotate"),x=f.getShallow("symbolOffset"),b=f.getShallow("symbolKeepAspect");if(ft(m)||ft(y)||ft(g)||ft(x)){var S=r.getRawValue(d),E=r.getDataParams(d);ft(m)&&(m=m(S,E)),ft(y)&&(y=y(S,E)),ft(g)&&(g=g(S,E)),ft(x)&&(x=x(S,E))}var D=f.getModel("itemStyle").getItemStyle(),B=wh(l,"color");D.fill||(D.fill=B),h.setItemVisual(d,{symbol:m,symbolSize:y,symbolRotate:g,symbolOffset:x,symbolKeepAspect:b,style:D})}),u.updateData(h),this.group.add(u.group),h.eachItemGraphicEl(function(d){d.traverse(function(f){Pt(f).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e}(Tv);function NBe(i,e,t){var r;i?r=Me(i&&i.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return Ce(Ce({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new sa(r,t),a=Me(t.get("data"),Ut(Ep,e));i&&(a=Xi(a,Ut(Tp,i)));var o=iM(!!i,r);return n.initData(a,null,o),n}var oie=FBe;function _4(i){i.registerComponentModel(rie),i.registerComponentView(oie),i.registerPreprocessor(function(e){jm(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var UBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Ys),sie=UBe;var nM=$t(),kBe=function(i,e,t,r){var n=i.getData(),a;if(Ee(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Mn(r.yAxis,r.xAxis);else{var c=v4(r,n,e,i);s=c.valueAxis;var u=s2(n,c.valueDataDim);l=rM(n,u,o)}var h=s.dim==="x"?0:1,d=1-h,f=Tt(r),m={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,m.coord[d]=1/0;var y=t.get("precision");y>=0&&mi(l)&&(l=+l.toFixed(Math.min(y,20))),f.coord[h]=m.coord[h]=l,a=[f,m,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var g=[Ep(i,a[0]),Ep(i,a[1]),Ce({},a[2])];return g[2].type=g[2].type||null,ri(g[2],g[0]),ri(g[2],g[1]),g};function aM(i){return!isNaN(i)&&!isFinite(i)}function lie(i,e,t,r){var n=1-i,a=r.dimensions[i];return aM(e[n])&&aM(t[n])&&e[i]===t[i]&&r.getAxis(a).containData(e[i])}function zBe(i,e){if(i.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(lie(1,t,r,i)||lie(0,t,r,i)))return!0}return Tp(i,e[0])&&Tp(i,e[1])}function w4(i,e,t,r,n){var a=r.coordinateSystem,o=i.getItemModel(e),s,l=ot(o.get("x"),n.getWidth()),c=ot(o.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition)s=r.getMarkerPosition(i.getValues(i.dimensions,e));else{var u=a.dimensions,h=i.get(u[0],e),d=i.get(u[1],e);s=a.dataToPoint([h,d])}if(Vc(a,"cartesian2d")){var f=a.getAxis("x"),m=a.getAxis("y"),u=a.dimensions;aM(i.get(u[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):aM(i.get(u[1],e))&&(s[1]=m.toGlobalCoord(m.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}i.setItemLayout(e,s)}var VBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(a){var o=Ys.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=nM(o).from,c=nM(o).to;l.each(function(u){w4(l,u,!0,a,n),w4(c,u,!1,a,n)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,n,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new uv);this.group.add(u.group);var h=HBe(o,t,r),d=h.from,f=h.to,m=h.line;nM(r).from=d,nM(r).to=f,r.setData(m);var y=r.get("symbol"),g=r.get("symbolSize"),x=r.get("symbolRotate"),b=r.get("symbolOffset");Ee(y)||(y=[y,y]),Ee(g)||(g=[g,g]),Ee(x)||(x=[x,x]),Ee(b)||(b=[b,b]),h.from.each(function(E){S(d,E,!0),S(f,E,!1)}),m.each(function(E){var D=m.getItemModel(E).getModel("lineStyle").getLineStyle();m.setItemLayout(E,[d.getItemLayout(E),f.getItemLayout(E)]),D.stroke==null&&(D.stroke=d.getItemVisual(E,"style").fill),m.setItemVisual(E,{fromSymbolKeepAspect:d.getItemVisual(E,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(E,"symbolOffset"),fromSymbolRotate:d.getItemVisual(E,"symbolRotate"),fromSymbolSize:d.getItemVisual(E,"symbolSize"),fromSymbol:d.getItemVisual(E,"symbol"),toSymbolKeepAspect:f.getItemVisual(E,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(E,"symbolOffset"),toSymbolRotate:f.getItemVisual(E,"symbolRotate"),toSymbolSize:f.getItemVisual(E,"symbolSize"),toSymbol:f.getItemVisual(E,"symbol"),style:D})}),u.updateData(m),h.line.eachItemGraphicEl(function(E){Pt(E).dataModel=r,E.traverse(function(D){Pt(D).dataModel=r})});function S(E,D,B){var F=E.getItemModel(D);w4(E,D,B,t,a);var H=F.getModel("itemStyle").getItemStyle();H.fill==null&&(H.fill=wh(l,"color")),E.setItemVisual(D,{symbolKeepAspect:F.get("symbolKeepAspect"),symbolOffset:Yt(F.get("symbolOffset",!0),b[B?0:1]),symbolRotate:Yt(F.get("symbolRotate",!0),x[B?0:1]),symbolSize:Yt(F.get("symbolSize"),g[B?0:1]),symbol:Yt(F.get("symbol",!0),y[B?0:1]),style:H})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(Tv);function HBe(i,e,t){var r;i?r=Me(i&&i.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return Ce(Ce({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new sa(r,t),a=new sa(r,t),o=new sa([],t),s=Me(t.get("data"),Ut(kBe,e,i,t));i&&(s=Xi(s,Ut(zBe,i)));var l=iM(!!i,r);return n.initData(Me(s,function(c){return c[0]}),null,l),a.initData(Me(s,function(c){return c[1]}),null,l),o.initData(Me(s,function(c){return c[2]})),o.hasItemOption=!0,{from:n,to:a,line:o}}var cie=VBe;function b4(i){i.registerComponentModel(sie),i.registerComponentView(cie),i.registerPreprocessor(function(e){jm(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var QBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Ys),uie=QBe;var oM=$t(),GBe=function(i,e,t,r){var n=r[0],a=r[1];if(!(!n||!a)){var o=Ep(i,n),s=Ep(i,a),l=o.coord,c=s.coord;l[0]=Mn(l[0],-1/0),l[1]=Mn(l[1],-1/0),c[0]=Mn(c[0],1/0),c[1]=Mn(c[1],1/0);var u=$g([{},o,s]);return u.coord=[o.coord,s.coord],u.x0=o.x,u.y0=o.y,u.x1=s.x,u.y1=s.y,u}};function sM(i){return!isNaN(i)&&!isFinite(i)}function hie(i,e,t,r){var n=1-i;return sM(e[n])&&sM(t[n])}function WBe(i,e){var t=e.coord[0],r=e.coord[1],n={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return Vc(i,"cartesian2d")?t&&r&&(hie(1,t,r,i)||hie(0,t,r,i))?!0:nie(i,n,a):Tp(i,n)||Tp(i,a)}function die(i,e,t,r,n){var a=r.coordinateSystem,o=i.getItemModel(e),s,l=ot(o.get(t[0]),n.getWidth()),c=ot(o.get(t[1]),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition){var u=i.getValues(["x0","y0"],e),h=i.getValues(["x1","y1"],e),d=a.clampData(u),f=a.clampData(h),m=[];t[0]==="x0"?m[0]=d[0]>f[0]?h[0]:u[0]:m[0]=d[0]>f[0]?u[0]:h[0],t[1]==="y0"?m[1]=d[1]>f[1]?h[1]:u[1]:m[1]=d[1]>f[1]?u[1]:h[1],s=r.getMarkerPosition(m,t,!0)}else{var y=i.get(t[0],e),g=i.get(t[1],e),x=[y,g];a.clampData&&a.clampData(x,x),s=a.dataToPoint(x,!0)}if(Vc(a,"cartesian2d")){var b=a.getAxis("x"),S=a.getAxis("y"),y=i.get(t[0],e),g=i.get(t[1],e);sM(y)?s[0]=b.toGlobalCoord(b.getExtent()[t[0]==="x0"?0:1]):sM(g)&&(s[1]=S.toGlobalCoord(S.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var fie=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],jBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(a){var o=Ys.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var c=Me(fie,function(h){return die(s,l,h,a,n)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},e.prototype.renderSeries=function(t,r,n,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new xt});this.group.add(u.group),this.markKeep(u);var h=KBe(o,t,r);r.setData(h),h.each(function(d){var f=Me(fie,function(H){return die(h,d,H,t,a)}),m=o.getAxis("x").scale,y=o.getAxis("y").scale,g=m.getExtent(),x=y.getExtent(),b=[m.parse(h.get("x0",d)),m.parse(h.get("x1",d))],S=[y.parse(h.get("y0",d)),y.parse(h.get("y1",d))];co(b),co(S);var E=!(g[0]>b[1]||g[1]<b[0]||x[0]>S[1]||x[1]<S[0]),D=!E;h.setItemLayout(d,{points:f,allClipped:D});var B=h.getItemModel(d).getModel("itemStyle").getItemStyle(),F=wh(l,"color");B.fill||(B.fill=F,Ye(B.fill)&&(B.fill=HA(B.fill,.4))),B.stroke||(B.stroke=F),h.setItemVisual(d,"style",B)}),h.diff(oM(u).data).add(function(d){var f=h.getItemLayout(d);if(!f.allClipped){var m=new oa({shape:{points:f.points}});h.setItemGraphicEl(d,m),u.group.add(m)}}).update(function(d,f){var m=oM(u).data.getItemGraphicEl(f),y=h.getItemLayout(d);y.allClipped?m&&u.group.remove(m):(m?Si(m,{shape:{points:y.points}},r,d):m=new oa({shape:{points:y.points}}),h.setItemGraphicEl(d,m),u.group.add(m))}).remove(function(d){var f=oM(u).data.getItemGraphicEl(d);u.group.remove(f)}).execute(),h.eachItemGraphicEl(function(d,f){var m=h.getItemModel(f),y=h.getItemVisual(f,"style");d.useStyle(h.getItemVisual(f,"style")),fn(d,Kr(m),{labelFetcher:r,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:Ye(y.fill)?HA(y.fill,1):"#000"}),Dn(d,m),pr(d,null,null,m.get(["emphasis","disabled"])),Pt(d).dataModel=r}),oM(u).data=h,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e}(Tv);function KBe(i,e,t){var r,n,a=["x0","y0","x1","y1"];if(i){var o=Me(i&&i.dimensions,function(c){var u=e.getData(),h=u.getDimensionInfo(u.mapDimension(c))||{};return Ce(Ce({},h),{name:c,ordinalMeta:null})});n=Me(a,function(c,u){return{name:c,type:o[u%2].type}}),r=new sa(n,t)}else n=[{name:"value",type:"float"}],r=new sa(n,t);var s=Me(t.get("data"),Ut(GBe,e,i,t));i&&(s=Xi(s,Ut(WBe,i)));var l=i?function(c,u,h,d){var f=c.coord[Math.floor(d/2)][d%2];return Nc(f,n[d])}:function(c,u,h,d){return Nc(c.value,n[d])};return r.initData(s,null,l),r.hasItemOption=!0,r}var pie=jBe;function S4(i){i.registerComponentModel(uie),i.registerComponentView(pie),i.registerPreprocessor(function(e){jm(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var XBe=function(i,e){if(e==="all")return{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}},YBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){i.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,n=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Ee(r)&&W(r,function(a,o){Ye(a)&&(a={type:a}),r[o]=ri(a,XBe(n,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<t.length;n++){var a=t[n].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],n=[];t.eachRawSeries(function(l){var c=l.name;n.push(c);var u;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();t.isSeriesFiltered(l)||(n=n.concat(d)),d.length?r=r.concat(d):u=!0}else u=!0;u&&m0(l)&&r.push(l.name)}),this._availableNames=n;var a=this.get("data")||r,o=ct(),s=Me(a,function(l){return(Ye(l)||mi(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new ir(l,this,this.ecModel))},this);this._data=Xi(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var a=this._data;W(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;W(t,function(n){r[n.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;W(t,function(n){var a=n.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&qt(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(xi),K_=YBe;var Mv=Ut,C4=W,lM=xt,qBe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new lM),this.group.add(this._selectorGroup=new lM),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,n,l,s,c);var u=t.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},d=t.get("padding"),f=Fr(u,h,d),m=this.layoutInner(t,o,f,a,l,c),y=Fr(At({width:m.width,height:m.height},u),h,d);this.group.x=y.x-m.x,this.group.y=y.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=KT(m,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,n,a,o,s,l){var c=this.getContentGroup(),u=ct(),h=r.get("selectedMode"),d=[];n.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),C4(r.getData(),function(f,m){var y=f.get("name");if(!this.newlineDisabled&&(y===""||y===`
`)){var g=new lM;g.newline=!0,c.add(g);return}var x=n.getSeriesByName(y)[0];if(!u.get(y))if(x){var b=x.getData(),S=b.getVisual("legendLineStyle")||{},E=b.getVisual("legendIcon"),D=b.getVisual("style"),B=this._createItem(x,y,m,f,r,t,S,D,E,h,a);B.on("click",Mv(Aie,y,null,a,d)).on("mouseover",Mv(E4,x.name,null,a,d)).on("mouseout",Mv(T4,x.name,null,a,d)),n.ssr&&B.eachChild(function(F){var H=Pt(F);H.seriesIndex=x.seriesIndex,H.dataIndex=m,H.ssrType="legend"}),u.set(y,!0)}else n.eachRawSeries(function(F){if(!u.get(y)&&F.legendVisualProvider){var H=F.legendVisualProvider;if(!H.containName(y))return;var U=H.indexOfName(y),k=H.getItemVisual(U,"style"),j=H.getItemVisual(U,"legendIcon"),q=Uo(k.fill);q&&q[3]===0&&(q[3]=.2,k=Ce(Ce({},k),{fill:Mc(q,"rgba")}));var X=this._createItem(F,y,m,f,r,t,{},k,j,h,a);X.on("click",Mv(Aie,null,y,a,d)).on("mouseover",Mv(E4,null,y,a,d)).on("mouseout",Mv(T4,null,y,a,d)),n.ssr&&X.eachChild(function(Y){var J=Pt(Y);J.seriesIndex=F.seriesIndex,J.dataIndex=m,J.ssrType="legend"}),u.set(y,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(t,r,n,a,o){var s=this.getSelectorGroup();C4(t,function(c){var u=c.type,h=new yi({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(h);var d=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);fn(h,{normal:d,emphasis:f},{defaultText:c.title}),vh(h)})},e.prototype._createItem=function(t,r,n,a,o,s,l,c,u,h,d){var f=t.visualDrawType,m=o.get("itemWidth"),y=o.get("itemHeight"),g=o.isSelected(r),x=a.get("symbolRotate"),b=a.get("symbolKeepAspect"),S=a.get("icon");u=S||u||"roundRect";var E=ZBe(u,a,l,c,f,g,d),D=new lM,B=a.getModel("textStyle");if(ft(t.getLegendIcon)&&(!S||S==="inherit"))D.add(t.getLegendIcon({itemWidth:m,itemHeight:y,icon:u,iconRotate:x,itemStyle:E.itemStyle,lineStyle:E.lineStyle,symbolKeepAspect:b}));else{var F=S==="inherit"&&t.getData().getVisual("symbol")?x==="inherit"?t.getData().getVisual("symbolRotate"):x:0;D.add(JBe({itemWidth:m,itemHeight:y,icon:u,iconRotate:F,itemStyle:E.itemStyle,lineStyle:E.lineStyle,symbolKeepAspect:b}))}var H=s==="left"?m+5:-5,U=s,k=o.get("formatter"),j=r;Ye(k)&&k?j=k.replace("{name}",r??""):ft(k)&&(j=k(r));var q=g?B.getTextColor():a.get("inactiveColor");D.add(new yi({style:br(B,{text:j,x:H,y:y/2,fill:q,align:U,verticalAlign:"middle"},{inheritColor:q})}));var X=new pi({shape:D.getBoundingRect(),style:{fill:"transparent"}}),Y=a.getModel("tooltip");return Y.get("show")&&Tu({el:X,componentModel:o,itemName:r,itemTooltipOption:Y.option}),D.add(X),D.eachChild(function(J){J.silent=!0}),X.silent=!h,this.getContentGroup().add(D),vh(D),D.__legendDataIndex=n,D},e.prototype.layoutInner=function(t,r,n,a,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();Bu(t.get("orient"),l,t.get("itemGap"),n.width,n.height);var u=l.getBoundingRect(),h=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){Bu("horizontal",c,t.get("selectorItemGap",!0));var d=c.getBoundingRect(),f=[-d.x,-d.y],m=t.get("selectorButtonGap",!0),y=t.getOrient().index,g=y===0?"width":"height",x=y===0?"height":"width",b=y===0?"y":"x";s==="end"?f[y]+=u[g]+m:h[y]+=d[g]+m,f[1-y]+=u[x]/2-d[x]/2,c.x=f[0],c.y=f[1],l.x=h[0],l.y=h[1];var S={x:0,y:0};return S[g]=u[g]+m+d[g],S[x]=Math.max(u[x],d[x]),S[b]=Math.min(0,d[b]+f[1-y]),S}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(hr);function ZBe(i,e,t,r,n,a,o){function s(g,x){g.lineWidth==="auto"&&(g.lineWidth=x.lineWidth>0?2:0),C4(g,function(b,S){g[S]==="inherit"&&(g[S]=x[S])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=i.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");c.decal=!h||h==="inherit"?r.decal:Lu(h,o),c.fill==="inherit"&&(c.fill=r[n]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(n==="fill"?r:t).opacity),s(c,r);var d=e.getModel("lineStyle"),f=d.getLineStyle();if(s(f,t),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),y=c[u];c.lineWidth=m==="auto"?r.lineWidth>0&&y?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function JBe(i){var e=i.icon||"roundRect",t=Nr(e,0,0,i.itemWidth,i.itemHeight,i.itemStyle.fill,i.symbolKeepAspect);return t.setStyle(i.itemStyle),t.rotation=(i.iconRotate||0)*Math.PI/180,t.setOrigin([i.itemWidth/2,i.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function Aie(i,e,t,r){T4(i,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:i??e}),E4(i,e,t,r)}function mie(i){for(var e=i.getZr().storage.getDisplayList(),t,r=0,n=e.length;r<n&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function E4(i,e,t,r){mie(t)||t.dispatchAction({type:"highlight",seriesName:i,name:e,excludeSeriesId:r})}function T4(i,e,t,r){mie(t)||t.dispatchAction({type:"downplay",seriesName:i,name:e,excludeSeriesId:r})}var cM=qBe;function M4(i){var e=i.findComponents({mainType:"legend"});e&&e.length&&i.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function X_(i,e,t){var r={},n=i==="toggleSelected",a;return t.eachComponent("legend",function(o){n&&a!=null?o[a?"select":"unSelect"](e.name):i==="allSelect"||i==="inverseSelect"?o[i]():(o[i](e.name),a=o.isSelected(e.name));var s=o.getData();W(s,function(l){var c=l.get("name");if(!(c===`
`||c==="")){var u=o.isSelected(c);r.hasOwnProperty(c)?r[c]=r[c]&&u:r[c]=u}})}),i==="allSelect"||i==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function gie(i){i.registerAction("legendToggleSelect","legendselectchanged",Ut(X_,"toggleSelected")),i.registerAction("legendAllSelect","legendselectall",Ut(X_,"allSelect")),i.registerAction("legendInverseSelect","legendinverseselect",Ut(X_,"inverseSelect")),i.registerAction("legendSelect","legendselected",Ut(X_,"select")),i.registerAction("legendUnSelect","legendunselected",Ut(X_,"unSelect"))}function uM(i){i.registerComponentModel(K_),i.registerComponentView(cM),i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,M4),i.registerSubTypeDefaulter("legend",function(){return"plain"}),gie(i)}var $Be=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,n){var a=Oc(t);i.prototype.init.call(this,t,r,n),vie(this,t,a)},e.prototype.mergeOption=function(t,r){i.prototype.mergeOption.call(this,t,r),vie(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Cs(K_.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(K_);function vie(i,e,t){var r=i.getOrient(),n=[1,1];n[r.index]=0,_l(e,t,{type:"box",ignoreSize:!!n})}var yie=$Be;var xie=xt,I4=["width","height"],B4=["x","y"],eDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){i.prototype.init.call(this),this.group.add(this._containerGroup=new xie),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new xie)},e.prototype.resetInner=function(){i.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,n,a,o,s,l){var c=this;i.prototype.renderInner.call(this,t,r,n,a,o,s,l);var u=this._controllerGroup,h=r.get("pageIconSize",!0),d=Ee(h)?h:[h,h];m("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new yi({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(y,g){var x=y+"DataIndex",b=md(r.get("pageIcons",!0)[r.getOrient().name][g],{onclick:st(c._pageGo,c,x,r,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});b.name=y,u.add(b)}},e.prototype.layoutInner=function(t,r,n,a,o,s){var l=this.getSelectorGroup(),c=t.getOrient().index,u=I4[c],h=B4[c],d=I4[1-c],f=B4[1-c];o&&Bu("horizontal",l,t.get("selectorItemGap",!0));var m=t.get("selectorButtonGap",!0),y=l.getBoundingRect(),g=[-y.x,-y.y],x=Tt(n);o&&(x[u]=n[u]-y[u]-m);var b=this._layoutContentAndController(t,a,x,c,u,d,f,h);if(o){if(s==="end")g[c]+=b[u]+m;else{var S=y[u]+m;g[c]-=S,b[h]-=S}b[u]+=y[u]+m,g[1-c]+=b[f]+b[d]/2-y[d]/2,b[d]=Math.max(b[d],y[d]),b[f]=Math.min(b[f],y[f]+g[1-c]),l.x=g[0],l.y=g[1],l.markRedraw()}return b},e.prototype._layoutContentAndController=function(t,r,n,a,o,s,l,c){var u=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;Bu(t.get("orient"),u,t.get("itemGap"),a?n.width:null,a?null:n.height),Bu("horizontal",d,t.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),m=d.getBoundingRect(),y=this._showController=f[o]>n[o],g=[-f.x,-f.y];r||(g[a]=u[c]);var x=[0,0],b=[-m.x,-m.y],S=Yt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(y){var E=t.get("pageButtonPosition",!0);E==="end"?b[a]+=n[o]-m[o]:x[a]+=m[o]+S}b[1-a]+=f[s]/2-m[s]/2,u.setPosition(g),h.setPosition(x),d.setPosition(b);var D={x:0,y:0};if(D[o]=y?n[o]:f[o],D[s]=Math.max(f[s],m[s]),D[l]=Math.min(0,m[l]+b[1-a]),h.__rectSize=n[o],y){var B={x:0,y:0};B[o]=Math.max(n[o]-m[o]-S,0),B[s]=D[s],h.setClipPath(new pi({shape:B})),h.__rectSize=B[o]}else d.eachChild(function(H){H.attr({invisible:!0,silent:!0})});var F=this._getPageInfo(t);return F.pageIndex!=null&&Si(u,{x:F.contentPosition[0],y:F.contentPosition[1]},y?t:null),this._updatePageInfoView(t,F),D},e.prototype._pageGo=function(t,r,n){var a=this._getPageInfo(r)[t];a!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var n=this._controllerGroup;W(["pagePrev","pageNext"],function(u){var h=u+"DataIndex",d=r[h]!=null,f=n.childOfName(u);f&&(f.setStyle("fill",d?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var a=n.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;a&&o&&a.setStyle("text",Ye(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=I4[o],l=B4[o],c=this._findTargetItemIndex(r),u=n.children(),h=u[c],d=u.length,f=d?1:0,m={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return m;var y=E(h);m.contentPosition[o]=-y.s;for(var g=c+1,x=y,b=y,S=null;g<=d;++g)S=E(u[g]),(!S&&b.e>x.s+a||S&&!D(S,x.s))&&(b.i>x.i?x=b:x=S,x&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=x.i),++m.pageCount)),b=S;for(var g=c-1,x=y,b=y,S=null;g>=-1;--g)S=E(u[g]),(!S||!D(b,S.s))&&x.i<b.i&&(b=x,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=x.i),++m.pageCount,++m.pageIndex),x=S;return m;function E(B){if(B){var F=B.getBoundingRect(),H=F[l]+B[l];return{s:H,e:H+F[s],i:B.__legendDataIndex}}}function D(B,F){return B.e>=F&&B.s<=F+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,n=this.getContentGroup(),a;return n.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(r=s)}),r??a},e.type="legend.scroll",e}(cM),_ie=eDe;function D4(i){i.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(n){n.setScrollDataIndex(r)})})}function wie(i){Ei(uM),i.registerComponentModel(yie),i.registerComponentView(_ie),D4(i)}function R4(i){Ei(uM),Ei(wie)}var tDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Cs(bp.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(bp),bie=tDe;var P4=$t();function Sie(i,e,t){P4(i).coordSysRecordMap.each(function(r){var n=r.dataZoomInfoMap.get(e.uid);n&&(n.getRange=t)})}function Cie(i,e){for(var t=P4(i).coordSysRecordMap,r=t.keys(),n=0;n<r.length;n++){var a=r[n],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||Eie(t,o))}}}function Eie(i,e){if(e){i.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function iDe(i,e){var t={model:e,containsPoint:Ut(nDe,e),dispatchAction:Ut(rDe,i),dataZoomInfoMap:null,controller:null},r=t.controller=new Rh(i.getZr());return W(["pan","zoom","scrollMove"],function(n){r.on(n,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],c=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&t.dispatchAction(o)})}),t}function rDe(i,e){i.isDisposed()||i.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function nDe(i,e,t,r){return i.coordinateSystem.containPoint([t,r])}function aDe(i){var e,t="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return i.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[t+s]>r[t+e]&&(e=s),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function Tie(i){i.registerProcessor(i.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=P4(t),n=r.coordSysRecordMap||(r.coordSysRecordMap=ct());n.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=WT(a);W(o.infoList,function(s){var l=s.model.uid,c=n.get(l)||n.set(l,iDe(t,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=ct());u.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),n.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){Eie(n,a);return}var u=aDe(l);o.enable(u.controlType,u.opt),o.setPointerChecker(a.containsPoint),Uc(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var sDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,n){if(i.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),Sie(n,t,{pan:st(L4.pan,this),zoom:st(L4.zoom,this),scrollMove:st(L4.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),i.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Cie(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(Sv),L4={zoom:function(i,e,t,r){var n=this.range,a=n.slice(),o=i.axisModels[0];if(o){var s=O4[e](null,[r.originX,r.originY],o,t,i),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/r.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Ml(0,a,[0,100],0,u.minSpan,u.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1])return a}},pan:Mie(function(i,e,t,r,n,a){var o=O4[r]([a.oldX,a.oldY],[a.newX,a.newY],e,n,t);return o.signal*(i[1]-i[0])*o.pixel/o.pixelLength}),scrollMove:Mie(function(i,e,t,r,n,a){var o=O4[r]([0,0],[a.scrollDelta,a.scrollDelta],e,n,t);return o.signal*(i[1]-i[0])*a.scrollDelta})};function Mie(i){return function(e,t,r,n){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=i(o,s,e,t,r,n);if(Ml(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var O4={grid:function(i,e,t,r,n){var a=t.axis,o={},s=n.model.coordinateSystem.getRect();return i=i||[0,0],a.dim==="x"?(o.pixel=e[0]-i[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-i[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(i,e,t,r,n){var a=t.axis,o={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return i=i?s.pointToCoord(i):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-i[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-i[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(i,e,t,r,n){var a=t.axis,o=n.model.coordinateSystem.getRect(),s={};return i=i||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-i[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-i[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}},Iie=sDe;function Y_(i){Gm(i),i.registerComponentModel(bie),i.registerComponentView(Iie),Tie(i)}var lDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Cs(bp.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(bp),Bie=lDe;var q_=pi,Die=7,cDe=1,F4=30,uDe=7,Z_="horizontal",Rie="vertical",hDe=5,dDe=["line","bar","candlestick","scatter"],fDe={easing:"cubicOut",duration:100,delay:0},pDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=st(this._onBrush,this),this._onBrushEnd=st(this._onBrushEnd,this)},e.prototype.render=function(t,r,n,a){if(i.prototype.render.apply(this,arguments),Uc(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),i.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){bd(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new xt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,n=t.get("brushSelect"),a=n?uDe:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===Z_?{right:s.width-o.x-o.width,top:s.height-F4-Die-a,width:o.width,height:F4}:{right:Die,top:o.y,width:F4,height:o.height},c=Oc(t.option);W(["right","top","width","height"],function(h){c[h]==="ph"&&(c[h]=l[h])});var u=Fr(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===Rie&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,n=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===Z_&&!o?{scaleY:l?1:-1,scaleX:1}:n===Z_&&o?{scaleY:l?1:-1,scaleX:-1}:n===Rie&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=t.getBoundingRect([s]);t.x=r.x-c.x,t.y=r.y-c.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,n=this._displayables.sliderGroup,a=t.get("brushSelect");n.add(new q_({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new q_({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:st(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,n=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==n[0]||r[1]!==n[1]){var h=o.getDataExtent(l),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var f=[0,r[1]],m=[0,r[0]],y=[[r[0],0],[0,0]],g=[],x=m[1]/(o.count()-1),b=0,S=Math.round(o.count()/r[0]),E;o.each([l],function(U,k){if(S>0&&k%S){b+=x;return}var j=U==null||isNaN(U)||U==="",q=j?0:yr(U,h,f,!0);j&&!E&&k?(y.push([y[y.length-1][0],0]),g.push([g[g.length-1][0],0])):!j&&E&&(y.push([b,0]),g.push([b,0])),y.push([b,q]),g.push([b,q]),b+=x,E=j}),c=this._shadowPolygonPts=y,u=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var D=this.dataZoomModel;function B(U){var k=D.getModel(U?"selectedDataBackground":"dataBackground"),j=new xt,q=new oa({shape:{points:c},segmentIgnoreThreshold:1,style:k.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),X=new Jn({shape:{points:u},segmentIgnoreThreshold:1,style:k.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return j.add(q),j.add(X),j}for(var F=0;F<3;F++){var H=B(F===1);this._displayables.sliderGroup.add(H),this._displayables.dataShadowSegs.push(H)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var n,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();W(l,function(c){if(!n&&!(r!==!0&&qt(dDe,c.get("type"))<0)){var u=a.getComponent(Kc(o),s).axis,h=ADe(o),d,f=c.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(u).inverse),h=c.getData().mapDimension(h),n={thisAxis:u,series:c,thisDim:o,otherDim:h,otherAxisInverse:d}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,n=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,h=l.get("brushSelect"),d=r.filler=new q_({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new q_({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:cDe,fill:"rgba(0,0,0,0)"}})),W([0,1],function(S){var E=l.get("handleIcon");!Xx[E]&&E.indexOf("path://")<0&&E.indexOf("image://")<0&&(E="path://"+E);var D=Nr(E,-1,0,2,2,null,!0);D.attr({cursor:Pie(this._orient),draggable:!0,drift:st(this._onDragMove,this,S),ondragend:st(this._onDragEnd,this),onmouseover:st(this._showDataInfo,this,!0),onmouseout:st(this._showDataInfo,this,!1),z2:5});var B=D.getBoundingRect(),F=l.get("handleSize");this._handleHeight=ot(F,this._size[1]),this._handleWidth=B.width/B.height*this._handleHeight,D.setStyle(l.getModel("handleStyle").getItemStyle()),D.style.strokeNoScale=!0,D.rectHover=!0,D.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),vh(D);var H=l.get("handleColor");H!=null&&(D.style.fill=H),o.add(n[S]=D);var U=l.getModel("textStyle");t.add(a[S]=new yi({silent:!0,invisible:!0,style:br(U,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:U.getTextColor(),font:U.getFont()}),z2:10}))},this);var f=d;if(h){var m=ot(l.get("moveHandleSize"),s[1]),y=r.moveHandle=new pi({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:m}}),g=m*.8,x=r.moveHandleIcon=Nr(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);x.silent=!0,x.y=s[1]+m/2-.5,y.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var b=Math.min(s[1]/2,Math.max(m,10));f=r.moveZone=new pi({invisible:!0,shape:{y:s[1]-b,height:m+b}}),f.on("mouseover",function(){c.enterEmphasis(y)}).on("mouseout",function(){c.leaveEmphasis(y)}),o.add(y),o.add(x),o.add(f)}f.attr({draggable:!0,cursor:Pie(this._orient),drift:st(this._onDragMove,this,"all"),ondragstart:st(this._showDataInfo,this,!0),ondragend:st(this._onDragEnd,this),onmouseover:st(this._showDataInfo,this,!0),onmouseout:st(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[yr(t[0],[0,100],r,!0),yr(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var n=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Ml(r,a,o,n.get("zoomLock")?"all":t,s.minSpan!=null?yr(s.minSpan,l,o,!0):null,s.maxSpan!=null?yr(s.maxSpan,l,o,!0):null);var c=this._range,u=this._range=co([yr(a[0],o,l,!0),yr(a[1],o,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,n=this._handleEnds,a=co(n.slice()),o=this._size;W([0,1],function(f){var m=r.handles[f],y=this._handleHeight;m.attr({scaleX:y/2,scaleY:y/2,x:n[f]+(f?-1:1),y:o[1]/2-y/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,a[0],a[1],o[0]],u=0;u<l.length;u++){var h=l[u],d=h.getClipPath();d||(d=new pi,h.setClipPath(d)),d.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,n=this._displayables,a=n.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,h=t?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],c),this._formatLabel(h[1],c)]}}var d=co(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(m){var y=Eu(n.handles[m].parent,this.group),g=fm(m===0?"right":"left",y),x=this._handleWidth/2+hDe,b=ts([d[m]+(m===0?-x:x),this._size[1]/2],y);a[m].setStyle({x:b[0],y:b[1],verticalAlign:o===Z_?"middle":g,align:o===Z_?g:"center",text:s[m]})}},e.prototype._formatLabel=function(t,r){var n=this.dataZoomModel,a=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return ft(a)?a(t,s):Ye(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(t){t=this._dragging||t;var r=this._displayables,n=r.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),r.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},e.prototype._onDragMove=function(t,r,n,a){this._dragging=!0,ul(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=ts([r,n],o,!0),l=this._updateInterval(t,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>r[0]||n[1]<0||n[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",n[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,n=t.offsetY;this._brushStart=new Ii(r,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var n=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=co([yr(n.x,o,s,!0),yr(n.x+n.width,o,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(ul(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var n=this._displayables,a=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new q_({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(t,r),u=l.transformCoordToLocal(s.x,s.y),h=this._size;c[0]=Math.max(Math.min(h[0],c[0]),0),o.setShape({x:u[0],y:0,width:c[0]-u[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?fDe:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=WT(this.dataZoomModel).infoList;if(!t&&r.length){var n=r[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(Sv);function ADe(i){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[i]}function Pie(i){return i==="vertical"?"ns-resize":"ew-resize"}var Lie=pDe;function J_(i){i.registerComponentModel(Bie),i.registerComponentView(Lie),Gm(i)}function N4(i){Ei(Y_),Ei(J_)}var mDe={get:function(i,e,t){var r=Tt((gDe[i]||{})[e]);return t&&Ee(r)?r[r.length-1]:r}},gDe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},hM=mDe;var Oie=Ta.mapVisual,vDe=Ta.eachVisual,yDe=Ee,Fie=W,xDe=co,_De=yr,wDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&ZT(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=st(t,this),this.controllerVisuals=W_(this.option.controller,r,t),this.targetVisuals=W_(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return t==null||t==="all"?this.ecModel.eachSeries(function(n,a){r.push(a)}):r=cr(t),r},e.prototype.eachTargetSeries=function(t,r){W(this.getTargetSeriesIndices(),function(n){var a=this.ecModel.getSeriesByIndex(n);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(n){n===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,n){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,c;n=n||["<",">"],Ee(t)&&(t=t.slice(),c=!0);var u=r?t:c?[h(t[0]),h(t[1])]:h(t);if(Ye(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(ft(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?n[0]+" "+u[1]:t[1]===s[1]?n[1]+" "+u[0]:u[0]+" - "+u[1];return u;function h(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=xDe([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var n=t.dimensions,a=n.length-1;a>=0;a--){var o=n[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});ri(a,n),ri(o,n);var s=this.isCategory();l.call(this,a),l.call(this,o),c.call(this,a,"inRange","outOfRange"),u.call(this,o);function l(h){yDe(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function c(h,d,f){var m=h[d],y=h[f];m&&!y&&(y=h[f]={},Fie(m,function(g,x){if(Ta.isValidType(x)){var b=hM.get(x,"inactive",s);b!=null&&(y[x]=b,x==="color"&&!y.hasOwnProperty("opacity")&&!y.hasOwnProperty("colorAlpha")&&(y.opacity=[0,0]))}}))}function u(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,f=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),y=this.getItemSymbol(),g=y||"roundRect";Fie(this.stateList,function(x){var b=this.itemSize,S=h[x];S||(S=h[x]={color:s?m:[m]}),S.symbol==null&&(S.symbol=d&&Tt(d)||(s?g:[g])),S.symbolSize==null&&(S.symbolSize=f&&Tt(f)||(s?b[0]:[b[0],b[0]])),S.symbol=Oie(S.symbol,function(B){return B==="none"?g:B});var E=S.symbolSize;if(E!=null){var D=-1/0;vDe(E,function(B){B>D&&(D=B)}),S.symbolSize=Oie(E,function(B){return _De(B,[0,D],[0,b[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(xi),Iv=wDe;var Nie=[20,140],bDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){i.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){i.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Nie[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Nie[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):Ee(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){i.prototype.completeVisualOption.apply(this,arguments),W(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=co((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,n=this.getExtent();return(r[0]<=n[0]||r[0]<=t)&&(r[1]>=n[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(n){var a=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),r.push({seriesId:n.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=Uie(this,"outOfRange",this.getExtent()),n=Uie(this,"inRange",this.option.range.slice()),a=[];function o(f,m){a.push({value:f,color:t(f,m)})}for(var s=0,l=0,c=n.length,u=r.length;l<u&&(!n.length||r[l]<=n[0]);l++)r[l]<n[s]&&o(r[l],"outOfRange");for(var h=1;s<c;s++,h=0)h&&a.length&&o(n[s],"outOfRange"),o(n[s],"inRange");for(var h=1;l<u;l++)(!n.length||n[n.length-1]<r[l])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(r[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Cs(Iv.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(Iv);function Uie(i,e,t){if(t[0]===t[1])return t.slice();for(var r=200,n=(t[1]-t[0])/r,a=t[0],o=[],s=0;s<=r&&a<t[1];s++)o.push(a),a+=n;return o.push(t[1]),o}var kie=bDe;var SDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,n,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,n,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,n=Mu(r.get("padding")||0),a=t.getBoundingRect();t.add(new pi({z2:-1,silent:!0,shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[3]+n[1],height:a.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,n){n=n||{};var a=n.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(f){return s[f]}function u(f,m){s[f]=m}var h=o.controllerVisuals[a||o.getValueState(t)],d=Ta.prepareVisualTypes(h);return W(d,function(f){var m=h[f];n.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",m=h.__alphaForOpacity),Ta.dependsOn(f,r)&&m&&m.applyVisual(t,c,u)}),s[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,n=this.api;Zf(t,r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,r,n,a){},e.type="visualMap",e}(hr),dM=SDe;var zie=[["left","right","width"],["top","bottom","height"]];function fM(i,e,t){var r=i.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=zie[o],l=[0,null,10],c={},u=0;u<3;u++)c[zie[1-o][u]]=l[u],c[s[u]]=u===2?t[0]:r[s[u]];var h=[["x","width",3],["y","height",0]][o],d=Fr(c,a,r.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<a[h[1]]*.5?0:1]}function Bv(i,e){return W(i||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),i}var Oh=yr,CDe=W,Hie=Math.min,U4=Math.max,EDe=12,TDe=6,MDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){i.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=st(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=st(this._hideIndicator,this)},e.prototype.doRender=function(t,r,n,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var n=t.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,n){if(r){var a=r[1-n];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,n===0?-s:l[1]+s],c),h=this._applyTransform(n===0?"bottom":"top",c),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new yi({style:br(f,{x:u[0],y:u[1],verticalAlign:d==="horizontal"?"middle":h,align:d==="horizontal"?h:"center",text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,n=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=fM(r,this.api,a),c=n.mainGroup=this._createBarGroup(l),u=new xt;c.add(u),u.add(n.outOfRange=Qie()),u.add(n.inRange=Qie(null,s?Wie(this._orient):null,st(this._dragHandle,this,"all",!1),st(this._dragHandle,this,"all",!0))),u.setClipPath(new pi({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=r.textStyleModel.getTextRect("\u56FD"),d=U4(h.width,h.height);s&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,c,0,a,d,o),this._createHandle(r,c,1,a,d,o)),this._createIndicator(r,c,a,d,o),t.add(c)},e.prototype._createHandle=function(t,r,n,a,o,s){var l=st(this._dragHandle,this,n,!1),c=st(this._dragHandle,this,n,!0),u=$o(t.get("handleSize"),a[0]),h=Nr(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),d=Wie(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:c,onmousemove:function(x){ul(x.event)}}),h.x=a[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),hd(h,!0),r.add(h);var f=this.visualMapModel.textStyleModel,m=new yi({cursor:d,draggable:!0,drift:l,onmousemove:function(x){ul(x.event)},ondragend:c,style:br(f,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var y=[u,0],g=this._shapes;g.handleThumbs[n]=h,g.handleLabelPoints[n]=y,g.handleLabels[n]=m},e.prototype._createIndicator=function(t,r,n,a,o){var s=$o(t.get("indicatorSize"),n[0]),l=Nr(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof yn){var u=l.style;l.useStyle(Ce({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);r.add(l);var h=this.visualMapModel.textStyleModel,d=new yi({silent:!0,invisible:!0,style:br(h,{x:0,y:0,text:""})});this.group.add(d);var f=[(o==="horizontal"?a/2:TDe)+n[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=d,m.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,n,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([n,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():Gie(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),n=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[Oh(r[0],n,a,!0),Oh(r[1],n,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var n=this.visualMapModel,a=this._handleEnds,o=[0,n.itemSize[1]];Ml(r,a,o,t,0);var s=n.getExtent();this._dataInterval=[Oh(a[0],o,s,!0),Oh(a[1],o,s,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,n=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,s,"inRange"),c=this._createBarVisual(n,n,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,r,n,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(n,l);return{barColor:new xh(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var n=100,a=[],o=(t[1]-t[0])/n;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var s=1;s<n;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/n})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,n=this.visualMapModel.get("inverse");return new xt(r==="horizontal"&&!n?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var n=this._shapes,a=this.visualMapModel,o=n.handleThumbs,s=n.handleLabels,l=a.itemSize,c=a.getExtent();CDe([0,1],function(u){var h=o[u];h.setStyle("fill",r.handlesColor[u]),h.y=t[u];var d=Oh(t[u],[0,l[1]],c,!0),f=this.getControllerVisual(d,"symbolSize");h.scaleX=h.scaleY=f/l[0],h.x=l[0]-f/2;var m=ts(n.handleLabelPoints[u],Eu(h,this.group));s[u].setStyle({x:m[0],y:m[1],text:a.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,n,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],u=this._shapes,h=u.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",d),m=this.getControllerVisual(t,"symbolSize"),y=Oh(t,s,c,!0),g=l[0]-m/2,x={x:h.x,y:h.y};h.y=y,h.x=g;var b=ts(u.indicatorLabelPoint,Eu(h,this.group)),S=u.indicatorLabel;S.attr("invisible",!1);var E=this._applyTransform("left",u.mainGroup),D=this._orient,B=D==="horizontal";S.setStyle({text:(n||"")+o.formatValueText(r),verticalAlign:B?E:"middle",align:B?"center":E});var F={x:g,y,style:{fill:f}},H={style:{x:b[0],y:b[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var U={duration:100,easing:"cubicInOut",additive:!0};h.x=x.x,h.y=x.y,h.animateTo(F,U),S.animateTo(H,U)}else h.attr(F),S.attr(H);this._firstShowIndicator=!1;var k=this._shapes.handleLabels;if(k)for(var j=0;j<k.length;j++)this.api.enterBlur(k[j])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Hie(U4(0,a[1]),n[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var n=this.visualMapModel,a=n.itemSize;if(n.option.hoverLink){var o=[0,a[1]],s=n.getExtent();t=Hie(U4(o[0],t),o[1]);var l=IDe(n,s,o),c=[t-l,t+l],u=Oh(t,o,s,!0),h=[Oh(c[0],o,s,!0),Oh(c[1],o,s,!0)];c[0]<o[0]&&(h[0]=-1/0),c[1]>o[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(u,h[1],"< ",l):h[1]===1/0?this._showIndicator(u,h[0],"> ",l):this._showIndicator(u,u,"\u2248 ",l));var d=this._hoverLinkDataIndices,f=[];(r||Gie(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var m=R7(d,f);this._dispatchHighDown("downplay",Bv(m[0],n)),this._dispatchHighDown("highlight",Bv(m[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(Ru(t.target,function(l){var c=Pt(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(n)){var o=n.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Bv(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,n,a){var o=Eu(r,a?null:this.group);return Ee(t)?ts(t,o,n):fm(t,o,n)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(dM);function Qie(i,e,t,r){return new oa({shape:{points:i},draggable:!!t,cursor:e,drift:t,onmousemove:function(n){ul(n.event)},ondragend:r})}function IDe(i,e,t){var r=EDe/2,n=i.get("hoverLinkDataSize");return n&&(r=Oh(n,e,t,!0)/2),r}function Gie(i){var e=i.get("hoverLinkOnHandle");return!!(e??i.get("realtime"))}function Wie(i){return i==="vertical"?"ns-resize":"ew-resize"}var jie=MDe;var Kie={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Xie=function(i,e){e.eachComponent({mainType:"visualMap",query:i},function(t){t.setSelected(i.selected)})};var Yie=[{createOnAllSeries:!0,reset:function(i,e){var t=[];return e.eachComponent("visualMap",function(r){var n=i.pipelineContext;!r.isTargetSeries(i)||n&&n.large||t.push(Ote(r.stateList,r.targetVisuals,st(r.getValueState,r),r.getDataDimensionIndex(i.getData())))}),t}},{createOnAllSeries:!0,reset:function(i,e){var t=i.getData(),r=[];e.eachComponent("visualMap",function(n){if(n.isTargetSeries(i)){var a=n.getVisualMeta(st(BDe,null,i,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(t);o>=0&&(a.dimension=o,r.push(a))}}),i.getData().setVisual("visualMeta",r)}}];function BDe(i,e,t,r){for(var n=e.targetVisuals[r],a=Ta.prepareVisualTypes(n),o={color:wh(i.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],u=n[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(t,h,d)}return o.color;function h(f){return o[f]}function d(f,m){o[f]=m}}var qie=W;function k4(i){var e=i&&i.visualMap;Ee(e)||(e=e?[e]:[]),qie(e,function(t){if(t){Dv(t,"splitList")&&!Dv(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&Ee(r)&&qie(r,function(n){yt(n)&&(Dv(n,"start")&&!Dv(n,"min")&&(n.min=n.start),Dv(n,"end")&&!Dv(n,"max")&&(n.max=n.end))})}})}function Dv(i,e){return i&&i.hasOwnProperty&&i.hasOwnProperty(e)}var Zie=!1;function $_(i){Zie||(Zie=!0,i.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),i.registerAction(Kie,Xie),W(Yie,function(e){i.registerVisual(i.PRIORITY.VISUAL.COMPONENT,e)}),i.registerPreprocessor(k4))}function ew(i){i.registerComponentModel(kie),i.registerComponentView(jie),$_(i)}var DDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){i.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],RDe[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(o,s){n==="categories"?(o.mappingMethod="category",o.categories=Tt(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Me(this._pieceList,function(l){return l=Tt(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},n=Ta.listVisualTypes(),a=this.isCategory();W(t.pieces,function(s){W(n,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),W(r,function(s,l){var c=!1;W(this.stateList,function(u){c=c||o(t,u,l)||o(t.target,u,l)},this),!c&&W(this.stateList,function(u){(t[u]||(t[u]={}))[l]=hM.get(l,u==="inRange"?"active":"inactive",a)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}i.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var n=this.option,a=this._pieceList,o=(r?n:t).selected||{};if(n.selected=o,W(a,function(l,c){var u=this.getSelectedMapKey(l);o.hasOwnProperty(u)||(o[u]=!0)},this),n.selectedMode==="single"){var s=!1;W(a,function(l,c){var u=this.getSelectedMapKey(l);o[u]&&(s?o[u]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Tt(t)},e.prototype.getValueState=function(t){var r=Ta.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],n=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=Ta.findPieceIndex(l,n);u===t&&o.push(c)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var n=t.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],n=["",""],a=this;function o(u,h){var d=a.getRepresentValue({interval:u});h||(h=a.getValueState(d));var f=t(d,h);u[0]===-1/0?n[0]=f:u[1]===1/0?n[1]=f:r.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return W(s,function(u){var h=u.interval;h&&(h[0]>c&&o([c,h[0]],"outOfRange"),o(h.slice()),c=h[1])},this),{stops:r,outerColors:n}},e.type="visualMap.piecewise",e.defaultOption=Cs(Iv.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(Iv),RDe={splitNumber:function(i){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),n=e.splitNumber;n=Math.max(parseInt(n,10),1),e.splitNumber=n;for(var a=(r[1]-r[0])/n;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&i.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<n;s+=a,o++){var l=o===n-1?r[1]:s+a;i.push({interval:[s,l],close:[1,1]})}e.maxOpen&&i.push({interval:[r[1],1/0],close:[0,0]}),RP(i),W(i,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(i){var e=this.option;W(e.categories,function(t){i.push({text:this.formatValueText(t,!0),value:t})},this),Jie(e,i)},pieces:function(i){var e=this.option;W(e.pieces,function(t,r){yt(t)||(t={value:t});var n={text:"",index:r};if(t.label!=null&&(n.text=t.label),t.hasOwnProperty("value")){var a=n.value=t.value;n.interval=[a,a],n.close=[1,1]}else{for(var o=n.interval=[],s=n.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],f=0;f<3&&o[h]==null;f++)o[h]=t[d[f]],s[h]=l[f],u[h]=f===2;o[h]==null&&(o[h]=c[h])}u[0]&&o[1]===1/0&&(s[0]=0),u[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(n.value=o[0])}n.visual=Ta.retrieveVisuals(t),i.push(n)},this),Jie(e,i),RP(i),W(i,function(t){var r=t.close,n=[["<","\u2264"][r[1]],[">","\u2265"][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,n)},this)}};function Jie(i,e){var t=i.inverse;(i.orient==="vertical"?!t:t)&&e.reverse()}var $ie=DDe;var PDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,n=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),h=u.endsText,d=Mn(r.get("showLabel",!0),!h);h&&this._renderEndsText(t,h[0],c,d,l),W(u.viewPieceList,function(f){var m=f.piece,y=new xt;y.onclick=st(this._onItemClick,this,m),this._enableHoverLink(y,f.indexInModelPieceList);var g=r.getRepresentValue(m);if(this._createItemSymbol(y,g,[0,0,c[0],c[1]]),d){var x=this.visualMapModel.getValueState(g);y.add(new yi({style:{x:l==="right"?-n:c[0]+n,y:c[1]/2,text:m.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:x==="outOfRange"?.5:1}}))}t.add(y)},this),h&&this._renderEndsText(t,h[1],c,d,l),Bu(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var n=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=n.visualMapModel;s.option.hoverLink&&n.api.dispatchAction({type:o,batch:Bv(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return fM(t,this.api,t.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},e.prototype._renderEndsText=function(t,r,n,a,o){if(r){var s=new xt,l=this.visualMapModel.textStyleModel;s.add(new yi({style:br(l,{x:a?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=Me(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),n=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},e.prototype._createItemSymbol=function(t,r,n){t.add(Nr(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color")))},e.prototype._onItemClick=function(t){var r=this.visualMapModel,n=r.option,a=n.selectedMode;if(a){var o=Tt(n.selected),s=r.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,W(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(dM),ere=PDe;function tw(i){i.registerComponentModel($ie),i.registerComponentView(ere),$_(i)}function z4(i){Ei(ew),Ei(tw)}var LDe={label:{enabled:!0},decal:{show:!1}},tre=$t(),ODe={};function V4(i,e){var t=i.getModel("aria");if(!t.get("enabled"))return;var r=Tt(LDe);ri(r.label,i.getLocaleModel().get("aria"),!1),ri(t.option,r,!1),n(),a();function n(){var c=t.getModel("decal"),u=c.get("show");if(u){var h=ct();i.eachSeries(function(d){if(!d.isColorBySeries()){var f=h.get(d.type);f||(f={},h.set(d.type,f)),tre(d).scope=f}}),i.eachRawSeries(function(d){if(i.isSeriesFiltered(d))return;if(ft(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var b=Ox(d.ecModel,d.name,ODe,i.getSeriesCount()),S=f.getVisual("decal");f.setVisual("decal",E(S,b))}else{var m=d.getRawData(),y={},g=tre(d).scope;f.each(function(D){var B=f.getRawIndex(D);y[B]=D});var x=m.count();m.each(function(D){var B=y[D],F=m.getName(D)||D+"",H=Ox(d.ecModel,F,g,x),U=f.getItemVisual(B,"decal");f.setItemVisual(B,"decal",E(U,H))})}function E(D,B){var F=D?Ce(Ce({},B),D):B;return F.dirty=!0,F}})}}function a(){var c=i.getLocaleModel().get("aria"),u=t.getModel("label");if(u.option=At(u.option,c),!!u.get("enabled")){var h=e.getZr().dom;if(u.get("description")){h.setAttribute("aria-label",u.get("description"));return}var d=i.getSeriesCount(),f=u.get(["data","maxCount"])||10,m=u.get(["series","maxCount"])||10,y=Math.min(d,m),g;if(!(d<1)){var x=s();if(x){var b=u.get(["general","withTitle"]);g=o(b,{title:x})}else g=u.get(["general","withoutTitle"]);var S=[],E=d>1?u.get(["series","multiple","prefix"]):u.get(["series","single","prefix"]);g+=o(E,{seriesCount:d}),i.eachSeries(function(H,U){if(U<y){var k=void 0,j=H.get("name"),q=j?"withName":"withoutName";k=d>1?u.get(["series","multiple",q]):u.get(["series","single",q]),k=o(k,{seriesId:H.seriesIndex,seriesName:H.get("name"),seriesType:l(H.subType)});var X=H.getData();if(X.count()>f){var Y=u.get(["data","partialData"]);k+=o(Y,{displayCnt:f})}else k+=u.get(["data","allData"]);for(var J=u.get(["data","separator","middle"]),te=u.get(["data","separator","end"]),de=[],ue=0;ue<X.count();ue++)if(ue<f){var ve=X.getName(ue),_e=X.getValues(ue),Re=u.get(["data",ve?"withName":"withoutName"]);de.push(o(Re,{name:ve,value:_e.join(J)}))}k+=de.join(J)+te,S.push(k)}});var D=u.getModel(["series","multiple","separator"]),B=D.get("middle"),F=D.get("end");g+=S.join(B)+F,h.setAttribute("aria-label",g)}}}function o(c,u){if(!Ye(c))return c;var h=c;return W(u,function(d,f){h=h.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),h}function s(){var c=i.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=i.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function H4(i){if(!(!i||!i.aria)){var e=i.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},W(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function Q4(i){i.registerPreprocessor(H4),i.registerVisual(i.PRIORITY.VISUAL.ARIA,V4)}var ire={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},FDe=function(){function i(e){var t=this._condVal=Ye(e)?new RegExp(e):oQ(e)?e:null;if(t==null){var r="";xr(r)}}return i.prototype.evaluate=function(e){var t=typeof e;return Ye(t)?this._condVal.test(e):mi(t)?this._condVal.test(e+""):!1},i}(),NDe=function(){function i(){}return i.prototype.evaluate=function(){return this.value},i}(),UDe=function(){function i(){}return i.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},i}(),kDe=function(){function i(){}return i.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},i}(),zDe=function(){function i(){}return i.prototype.evaluate=function(){return!this.child.evaluate()},i}(),VDe=function(){function i(){}return i.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),n=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?n:r))return!1;return!0},i}();function G4(i,e){if(i===!0||i===!1){var t=new NDe;return t.value=i,t}var r="";return nre(i)||xr(r),i.and?rre("and",i,e):i.or?rre("or",i,e):i.not?HDe(i,e):QDe(i,e)}function rre(i,e,t){var r=e[i],n="";Ee(r)||xr(n),r.length||xr(n);var a=i==="and"?new UDe:new kDe;return a.children=Me(r,function(o){return G4(o,t)}),a.children.length||xr(n),a}function HDe(i,e){var t=i.not,r="";nre(t)||xr(r);var n=new zDe;return n.child=G4(t,e),n.child||xr(r),n}function QDe(i,e){for(var t="",r=e.prepareGetValue(i),n=[],a=si(i),o=i.parser,s=o?IE(o):null,l=0;l<a.length;l++){var c=a[l];if(!(c==="parser"||e.valueGetterAttrMap.get(c))){var u=Mt(ire,c)?ire[c]:c,h=i[c],d=s?s(h):h,f=bW(u,d)||u==="reg"&&new FDe(d);f||xr(t),n.push(f)}}n.length||xr(t);var m=new VDe;return m.valueGetterParam=r,m.valueParser=s,m.getValue=e.getValue,m.subCondList=n,m}function nre(i){return yt(i)&&!Sa(i)}var GDe=function(){function i(e,t){this._cond=G4(e,t)}return i.prototype.evaluate=function(){return this._cond.evaluate()},i}();function are(i,e){return new GDe(i,e)}var ore={type:"echarts:filter",transform:function(i){for(var e=i.upstream,t,r=are(i.config,{valueGetterAttrMap:ct({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;Mt(s,"dimension")||xr(l);var u=e.getDimensionInfo(c);return u||xr(l),{dimIdx:u.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),n=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&n.push(t);return{data:n}}};var sre={type:"echarts:sort",transform:function(i){var e=i.upstream,t=i.config,r="",n=cr(t);n.length||xr(r);var a=[];W(n,function(u){var h=u.dimension,d=u.order,f=u.parser,m=u.incomparable;if(h==null&&xr(r),d!=="asc"&&d!=="desc"&&xr(r),m&&m!=="min"&&m!=="max"){var y="";xr(y)}if(d!=="asc"&&d!=="desc"){var g="";xr(g)}var x=e.getDimensionInfo(h);x||xr(r);var b=f?IE(f):null;f&&!b&&xr(r),a.push({dimIdx:x.index,parser:b,comparator:new BE(d,m)})});var o=e.sourceFormat;o!==Va&&o!==rs&&xr(r);for(var s=[],l=0,c=e.count();l<c;l++)s.push(e.getRawDataItem(l));return s.sort(function(u,h){for(var d=0;d<a.length;d++){var f=a[d],m=e.retrieveValueFromItem(u,f.dimIdx),y=e.retrieveValueFromItem(h,f.dimIdx);f.parser&&(m=f.parser(m),y=f.parser(y));var g=f.comparator.evaluate(m,y);if(g!==0)return g}return 0}),{data:s}}};function W4(i){i.registerTransform(ore),i.registerTransform(sre)}var WDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,n){i.prototype.init.call(this,t,r,n),this._sourceManager=new PE(this),s3(this)},e.prototype.mergeOption=function(t,r){i.prototype.mergeOption.call(this,t,r),s3(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:wl},e}(xi);var jDe=function(i){le(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(hr);function j4(i){i.registerComponentModel(WDe),i.registerComponentView(jDe)}var Fh=To.CMD;function Rv(i,e){return Math.abs(i-e)<1e-5}function pM(i){var e=i.data,t=i.len(),r=[],n,a=0,o=0,s=0,l=0;function c(X,Y){n&&n.length>2&&r.push(n),n=[X,Y]}function u(X,Y,J,te){Rv(X,J)&&Rv(Y,te)||n.push(X,Y,J,te,J,te)}function h(X,Y,J,te,de,ue){var ve=Math.abs(Y-X),_e=Math.tan(ve/4)*4/3,Re=Y<X?-1:1,Oe=Math.cos(X),Te=Math.sin(X),Se=Math.cos(Y),nt=Math.sin(Y),rt=Oe*de+J,dt=Te*ue+te,tt=Se*de+J,ht=nt*ue+te,pt=de*_e*Re,Je=ue*_e*Re;n.push(rt-pt*Te,dt+Je*Oe,tt+pt*nt,ht-Je*Se,tt,ht)}for(var d,f,m,y,g=0;g<t;){var x=e[g++],b=g===1;switch(b&&(a=e[g],o=e[g+1],s=a,l=o,(x===Fh.L||x===Fh.C||x===Fh.Q)&&(n=[s,l])),x){case Fh.M:a=s=e[g++],o=l=e[g++],c(s,l);break;case Fh.L:d=e[g++],f=e[g++],u(a,o,d,f),a=d,o=f;break;case Fh.C:n.push(e[g++],e[g++],e[g++],e[g++],a=e[g++],o=e[g++]);break;case Fh.Q:d=e[g++],f=e[g++],m=e[g++],y=e[g++],n.push(a+2/3*(d-a),o+2/3*(f-o),m+2/3*(d-m),y+2/3*(f-y),m,y),a=m,o=y;break;case Fh.A:var S=e[g++],E=e[g++],D=e[g++],B=e[g++],F=e[g++],H=e[g++]+F;g+=1;var U=!e[g++];d=Math.cos(F)*D+S,f=Math.sin(F)*B+E,b?(s=d,l=f,c(s,l)):u(a,o,d,f),a=Math.cos(H)*D+S,o=Math.sin(H)*B+E;for(var k=(U?-1:1)*Math.PI/2,j=F;U?j>H:j<H;j+=k){var q=U?Math.max(j+k,H):Math.min(j+k,H);h(j,q,S,E,D,B)}break;case Fh.R:s=a=e[g++],l=o=e[g++],d=s+e[g++],f=l+e[g++],c(d,l),u(d,l,d,f),u(d,f,s,f),u(s,f,s,l),u(s,l,d,l);break;case Fh.Z:n&&u(a,o,s,l),a=s,o=l;break}}return n&&n.length>2&&r.push(n),r}function K4(i,e,t,r,n,a,o,s,l,c){if(Rv(i,t)&&Rv(e,r)&&Rv(n,o)&&Rv(a,s)){l.push(o,s);return}var u=2/c,h=u*u,d=o-i,f=s-e,m=Math.sqrt(d*d+f*f);d/=m,f/=m;var y=t-i,g=r-e,x=n-o,b=a-s,S=y*y+g*g,E=x*x+b*b;if(S<h&&E<h){l.push(o,s);return}var D=d*y+f*g,B=-d*x-f*b,F=S-D*D,H=E-B*B;if(F<h&&D>=0&&H<h&&B>=0){l.push(o,s);return}var U=[],k=[];Ec(i,t,n,o,.5,U),Ec(e,r,a,s,.5,k),K4(U[0],k[0],U[1],k[1],U[2],k[2],U[3],k[3],l,c),K4(U[4],k[4],U[5],k[5],U[6],k[6],U[7],k[7],l,c)}function lre(i,e){var t=pM(i),r=[];e=e||1;for(var n=0;n<t.length;n++){var a=t[n],o=[],s=a[0],l=a[1];o.push(s,l);for(var c=2;c<a.length;){var u=a[c++],h=a[c++],d=a[c++],f=a[c++],m=a[c++],y=a[c++];K4(s,l,u,h,d,f,m,y,o,e),s=m,l=y}r.push(o)}return r}function dre(i,e,t){var r=i[e],n=i[1-e],a=Math.abs(r/n),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],c=0;c<o;c++)l.push(s);var u=o*s,h=t-u;if(h>0)for(var c=0;c<h;c++)l[c%o]+=1;return l}function cre(i,e,t){for(var r=i.r0,n=i.r,a=i.startAngle,o=i.endAngle,s=Math.abs(o-a),l=s*n,c=n-r,u=l>Math.abs(c),h=dre([l,c],u?0:1,e),d=(u?s:c)/h.length,f=0;f<h.length;f++)for(var m=(u?c:s)/h[f],y=0;y<h[f];y++){var g={};u?(g.startAngle=a+d*f,g.endAngle=a+d*(f+1),g.r0=r+m*y,g.r=r+m*(y+1)):(g.startAngle=a+m*y,g.endAngle=a+m*(y+1),g.r0=r+d*f,g.r=r+d*(f+1)),g.clockwise=i.clockwise,g.cx=i.cx,g.cy=i.cy,t.push(g)}}function KDe(i,e,t){for(var r=i.width,n=i.height,a=r>n,o=dre([r,n],a?0:1,e),s=a?"width":"height",l=a?"height":"width",c=a?"x":"y",u=a?"y":"x",h=i[s]/o.length,d=0;d<o.length;d++)for(var f=i[l]/o[d],m=0;m<o[d];m++){var y={};y[c]=d*h,y[u]=m*f,y[s]=h,y[l]=f,y.x+=i.x,y.y+=i.y,t.push(y)}}function ure(i,e,t,r){return i*r-t*e}function XDe(i,e,t,r,n,a,o,s){var l=t-i,c=r-e,u=o-n,h=s-a,d=ure(u,h,l,c);if(Math.abs(d)<1e-6)return null;var f=i-n,m=e-a,y=ure(f,m,u,h)/d;return y<0||y>1?null:new Ii(y*l+i,y*c+e)}function YDe(i,e,t){var r=new Ii;Ii.sub(r,t,e),r.normalize();var n=new Ii;Ii.sub(n,i,e);var a=n.dot(r);return a}function Pv(i,e){var t=i[i.length-1];t&&t[0]===e[0]&&t[1]===e[1]||i.push(e)}function qDe(i,e,t){for(var r=i.length,n=[],a=0;a<r;a++){var o=i[a],s=i[(a+1)%r],l=XDe(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&n.push({projPt:YDe(l,e,t),pt:l,idx:a})}if(n.length<2)return[{points:i},{points:i}];n.sort(function(g,x){return g.projPt-x.projPt});var c=n[0],u=n[n.length-1];if(u.idx<c.idx){var h=c;c=u,u=h}for(var d=[c.pt.x,c.pt.y],f=[u.pt.x,u.pt.y],m=[d],y=[f],a=c.idx+1;a<=u.idx;a++)Pv(m,i[a].slice());Pv(m,f),Pv(m,d);for(var a=u.idx+1;a<=c.idx+r;a++)Pv(y,i[a%r].slice());return Pv(y,d),Pv(y,f),[{points:m},{points:y}]}function hre(i){var e=i.points,t=[],r=[];em(e,t,r);var n=new Ht(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=n.width,o=n.height,s=n.x,l=n.y,c=new Ii,u=new Ii;return a>o?(c.x=u.x=s+a/2,c.y=l,u.y=l+o):(c.y=u.y=l+o/2,c.x=s,u.x=s+a),qDe(e,c,u)}function AM(i,e,t,r){if(t===1)r.push(e);else{var n=Math.floor(t/2),a=i(e);AM(i,a[0],n,r),AM(i,a[1],t-n,r)}return r}function ZDe(i,e){for(var t=[],r=0;r<e;r++)t.push(C0(i));return t}function JDe(i,e){e.setStyle(i.style),e.z=i.z,e.z2=i.z2,e.zlevel=i.zlevel}function $De(i){for(var e=[],t=0;t<i.length;)e.push([i[t++],i[t++]]);return e}function fre(i,e){var t=[],r=i.shape,n;switch(i.type){case"rect":KDe(r,e,t),n=pi;break;case"sector":cre(r,e,t),n=Ra;break;case"circle":cre({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),n=Ra;break;default:var a=i.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=Me(lre(i.getUpdatedPathProxy(),o),function(x){return $De(x)}),l=s.length;if(l===0)AM(hre,{points:s[0]},e,t);else if(l===e)for(var c=0;c<l;c++)t.push({points:s[c]});else{var u=0,h=Me(s,function(x){var b=[],S=[];em(x,b,S);var E=(S[1]-b[1])*(S[0]-b[0]);return u+=E,{poly:x,area:E}});h.sort(function(x,b){return b.area-x.area});for(var d=e,c=0;c<l;c++){var f=h[c];if(d<=0)break;var m=c===l-1?d:Math.ceil(f.area/u*e);m<0||(AM(hre,{points:f.poly},m,t),d-=m)}}n=oa;break}if(!n)return ZDe(i,e);for(var y=[],c=0;c<t.length;c++){var g=new n;g.setShape(t[c]),JDe(i,g),y.push(g)}return y}function eRe(i,e){var t=i.length,r=e.length;if(t===r)return[i,e];for(var n=[],a=[],o=t<r?i:e,s=Math.min(t,r),l=Math.abs(r-t)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,h=[o[0],o[1]],d=l,f=2;f<s;){var m=o[f-2],y=o[f-1],g=o[f++],x=o[f++],b=o[f++],S=o[f++],E=o[f++],D=o[f++];if(d<=0){h.push(g,x,b,S,E,D);continue}for(var B=Math.min(d,u-1)+1,F=1;F<=B;F++){var H=F/B;Ec(m,g,b,E,H,n),Ec(y,x,S,D,H,a),m=n[3],y=a[3],h.push(n[1],a[1],n[2],a[2],m,y),g=n[5],x=a[5],b=n[6],S=a[6]}d-=B-1}return o===i?[h,e]:[i,h]}function pre(i,e){for(var t=i.length,r=i[t-2],n=i[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=n;return a}function tRe(i,e){for(var t,r,n,a=[],o=[],s=0;s<Math.max(i.length,e.length);s++){var l=i[s],c=e[s],u=void 0,h=void 0;l?c?(t=eRe(l,c),u=t[0],h=t[1],r=u,n=h):(h=pre(n||l,l),u=l):(u=pre(r||c,c),h=c),a.push(u),o.push(h)}return[a,o]}function Are(i){for(var e=0,t=0,r=0,n=i.length,a=0,o=n-2;a<n;o=a,a+=2){var s=i[o],l=i[o+1],c=i[a],u=i[a+1],h=s*u-c*l;e+=h,t+=(s+c)*h,r+=(l+u)*h}return e===0?[i[0]||0,i[1]||0]:[t/e/3,r/e/3,e]}function iRe(i,e,t,r){for(var n=(i.length-2)/6,a=1/0,o=0,s=i.length,l=s-2,c=0;c<n;c++){for(var u=c*6,h=0,d=0;d<s;d+=2){var f=d===0?u:(u+d-2)%l+2,m=i[f]-t[0],y=i[f+1]-t[1],g=e[d]-r[0],x=e[d+1]-r[1],b=g-m,S=x-y;h+=b*b+S*S}h<a&&(a=h,o=c)}return o}function rRe(i){for(var e=[],t=i.length,r=0;r<t;r+=2)e[r]=i[t-r-2],e[r+1]=i[t-r-1];return e}function nRe(i,e,t,r){for(var n=[],a,o=0;o<i.length;o++){var s=i[o],l=e[o],c=Are(s),u=Are(l);a==null&&(a=c[2]<0!=u[2]<0);var h=[],d=[],f=0,m=1/0,y=[],g=s.length;a&&(s=rRe(s));for(var x=iRe(s,l,c,u)*6,b=g-2,S=0;S<b;S+=2){var E=(x+S)%b+2;h[S+2]=s[E]-c[0],h[S+3]=s[E+1]-c[1]}if(h[0]=s[x]-c[0],h[1]=s[x+1]-c[1],t>0)for(var D=r/t,B=-r/2;B<=r/2;B+=D){for(var F=Math.sin(B),H=Math.cos(B),U=0,S=0;S<s.length;S+=2){var k=h[S],j=h[S+1],q=l[S]-u[0],X=l[S+1]-u[1],Y=q*H-X*F,J=q*F+X*H;y[S]=Y,y[S+1]=J;var te=Y-k,de=J-j;U+=te*te+de*de}if(U<m){m=U,f=B;for(var ue=0;ue<y.length;ue++)d[ue]=y[ue]}}else for(var ve=0;ve<g;ve+=2)d[ve]=l[ve]-u[0],d[ve+1]=l[ve+1]-u[1];n.push({from:h,to:d,fromCp:c,toCp:u,rotation:-f})}return n}function rw(i){return i.__isCombineMorphing}var gre="__mOriginal_";function mM(i,e,t){var r=gre+e,n=i[r]||i[e];i[r]||(i[r]=i[e]);var a=t.replace,o=t.after,s=t.before;i[e]=function(){var l=arguments,c;return s&&s.apply(this,l),a?c=a.apply(this,l):c=n.apply(this,l),o&&o.apply(this,l),c}}function iw(i,e){var t=gre+e;i[t]&&(i[e]=i[t],i[t]=null)}function mre(i,e){for(var t=0;t<i.length;t++)for(var r=i[t],n=0;n<r.length;){var a=r[n],o=r[n+1];r[n++]=e[0]*a+e[2]*o+e[4],r[n++]=e[1]*a+e[3]*o+e[5]}}function vre(i,e){var t=i.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),n=tRe(pM(t),pM(r)),a=n[0],o=n[1],s=i.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}s&&mre(a,s),l&&mre(o,l),mM(e,"updateTransform",{replace:c}),e.transform=null;var u=nRe(a,o,10,Math.PI),h=[];mM(e,"buildPath",{replace:function(d){for(var f=e.__morphT,m=1-f,y=[],g=0;g<u.length;g++){var x=u[g],b=x.from,S=x.to,E=x.rotation*f,D=x.fromCp,B=x.toCp,F=Math.sin(E),H=Math.cos(E);r0(y,D,B,f);for(var U=0;U<b.length;U+=2){var k=b[U],j=b[U+1],q=S[U],X=S[U+1],Y=k*m+q*f,J=j*m+X*f;h[U]=Y*H-J*F+y[0],h[U+1]=Y*F+J*H+y[1]}var te=h[0],de=h[1];d.moveTo(te,de);for(var U=2;U<b.length;){var q=h[U++],X=h[U++],ue=h[U++],ve=h[U++],_e=h[U++],Re=h[U++];te===q&&de===X&&ue===_e&&ve===Re?d.lineTo(_e,Re):d.bezierCurveTo(q,X,ue,ve,_e,Re),te=_e,de=Re}}}})}function vM(i,e,t){if(!i||!e)return e;var r=t.done,n=t.during;vre(i,e),e.__morphT=0;function a(){iw(e,"buildPath"),iw(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},At({during:function(o){e.dirtyShape(),n&&n(o)},done:function(){a(),r&&r()}},t)),e}function aRe(i,e,t,r,n,a){var o=16;i=n===t?0:Math.round(32767*(i-t)/(n-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,c=(1<<o)/2;c>0;c/=2){var u=0,h=0;(i&c)>0&&(u=1),(e&c)>0&&(h=1),s+=c*c*(3*u^h),h===0&&(u===1&&(i=c-1-i,e=c-1-e),l=i,i=e,e=l)}return s}function gM(i){var e=1/0,t=1/0,r=-1/0,n=-1/0,a=Me(i,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),h=l.y+l.height/2+(c?c[5]:0);return e=Math.min(u,e),t=Math.min(h,t),r=Math.max(u,r),n=Math.max(h,n),[u,h]}),o=Me(a,function(s,l){return{cp:s,z:aRe(s[0],s[1],e,t,r,n),path:i[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function yre(i){return fre(i.path,i.count)}function X4(){return{fromIndividuals:[],toIndividuals:[],count:0}}function xre(i,e,t){var r=[];function n(D){for(var B=0;B<D.length;B++){var F=D[B];rw(F)?n(F.childrenRef()):F instanceof Kt&&r.push(F)}}n(i);var a=r.length;if(!a)return X4();var o=t.dividePath||yre,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),X4();r=gM(r),s=gM(s);for(var l=t.done,c=t.during,u=t.individualDelay,h=new fl,d=0;d<a;d++){var f=r[d],m=s[d];m.parent=e,m.copyTransform(h),u||vre(f,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function y(D){for(var B=0;B<s.length;B++)s[B].addSelfToZr(D)}mM(e,"addSelfToZr",{after:function(D){y(D)}}),mM(e,"removeSelfFromZr",{after:function(D){for(var B=0;B<s.length;B++)s[B].removeSelfFromZr(D)}});function g(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,iw(e,"addSelfToZr"),iw(e,"removeSelfFromZr")}var x=s.length;if(u)for(var b=x,S=function(){b--,b===0&&(g(),l&&l())},d=0;d<x;d++){var E=u?At({delay:(t.delay||0)+u(d,x,r[d],s[d]),done:S},t):t;vM(r[d],s[d],E)}else e.__morphT=0,e.animateTo({__morphT:1},At({during:function(D){for(var B=0;B<x;B++){var F=s[B];F.__morphT=e.__morphT,F.dirtyShape()}c&&c(D)},done:function(){g();for(var D=0;D<i.length;D++)iw(i[D],"updateTransform");l&&l()}},t));return e.__zr&&y(e.__zr),{fromIndividuals:r,toIndividuals:s,count:x}}function _re(i,e,t){var r=e.length,n=[],a=t.dividePath||yre;function o(f){for(var m=0;m<f.length;m++){var y=f[m];rw(y)?o(y.childrenRef()):y instanceof Kt&&n.push(y)}}if(rw(i)){o(i.childrenRef());var s=n.length;if(s<r)for(var l=0,c=s;c<r;c++)n.push(C0(n[l++%s]));n.length=r}else{n=a({path:i,count:r});for(var u=i.getComputedTransform(),c=0;c<n.length;c++)n[c].setLocalTransform(u);if(n.length!==r)return console.error("Invalid morphing: unmatched splitted path"),X4()}n=gM(n),e=gM(e);for(var h=t.individualDelay,c=0;c<r;c++){var d=h?At({delay:(t.delay||0)+h(c,r,n[c],e[c])},t):t;vM(n[c],e[c],d)}return{fromIndividuals:n,toIndividuals:e,count:e.length}}function wre(i){return Ee(i[0])}function bre(i,e){for(var t=[],r=i.length,n=0;n<r;n++)t.push({one:i[n],many:[]});for(var n=0;n<e.length;n++){var a=e[n].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[n][o])}for(var s=0,n=r-1;n>=0;n--)if(!t[n].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var a=l.length,c=Math.ceil(a/2);t[n].many=l.slice(c,a),t[s].many=l.slice(0,c),s++}return t}var oRe={clone:function(i){for(var e=[],t=1-Math.pow(1-i.path.style.opacity,1/i.count),r=0;r<i.count;r++){var n=C0(i.path);n.setStyle("opacity",t),e.push(n)}return e},split:null};function yM(i,e,t,r,n,a){if(!i.length||!e.length)return;var o=_h("update",r,n);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),c,u;wre(i)&&(c=i,u=e),wre(e)&&(c=e,u=i);function h(x,b,S,E,D){var B=x.many,F=x.one;if(B.length===1&&!D){var H=b?B[0]:F,U=b?F:B[0];if(rw(H))h({many:[H],one:U},!0,S,E,!0);else{var k=s?At({delay:s(S,E)},l):l;vM(H,U,k),a(H,U,H,U,k)}}else for(var j=At({dividePath:oRe[t],individualDelay:s&&function(de,ue,ve,_e){return s(de+S,E)}},l),q=b?xre(B,F,j):_re(F,B,j),X=q.fromIndividuals,Y=q.toIndividuals,J=X.length,te=0;te<J;te++){var k=s?At({delay:s(te,J)},l):l;a(X[te],Y[te],b?B[te]:x.one,b?x.one:B[te],k)}}for(var d=c?c===i:i.length>e.length,f=c?bre(u,c):bre(d?e:i,[d?i:e]),m=0,y=0;y<f.length;y++)m+=f[y].many.length;for(var g=0,y=0;y<f.length;y++)h(f[y],d,g,m),g+=f[y].many.length}function Mp(i){if(!i)return[];if(Ee(i)){for(var e=[],t=0;t<i.length;t++)e.push(Mp(i[t]));return e}var r=[];return i.traverse(function(n){n instanceof Kt&&!n.disableMorphing&&!n.invisible&&!n.ignore&&r.push(n)}),r}var Dre=1e4,sRe=0,Sre=1,Cre=2,lRe=$t();function cRe(i,e){for(var t=i.dimensions,r=0;r<t.length;r++){var n=i.getDimensionInfo(t[r]);if(n&&n.otherDims[e]===0)return t[r]}}function uRe(i,e,t){var r=i.getDimensionInfo(t),n=r&&r.ordinalMeta;if(r){var a=i.get(r.name,e);return n&&n.categories[a]||a+""}}function Ere(i,e,t,r){var n=r?"itemChildGroupId":"itemGroupId",a=cRe(i,n);if(a){var o=uRe(i,e,a);return o}var s=i.getRawDataItem(e),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return t||i.getId(e)}function Tre(i){var e=[];return W(i,function(t){var r=t.data,n=t.dataGroupId;if(!(r.count()>Dre))for(var a=r.getIndices(),o=0;o<a.length;o++)e.push({data:r,groupId:Ere(r,o,n,!1),childGroupId:Ere(r,o,n,!0),divide:t.divide,dataIndex:o})}),e}function Y4(i,e,t){i.traverse(function(r){r instanceof Kt&&Ar(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function q4(i){if(i.parent){var e=i.getComputedTransform();i.setLocalTransform(e),i.parent.remove(i)}}function Lv(i){i.stopAnimation(),i.isGroup&&i.traverse(function(e){e.stopAnimation()})}function hRe(i,e,t){var r=_h("update",t,e);r&&i.traverse(function(n){if(n instanceof Da){var a=p9(n);a&&n.animateFrom({style:a},r)}})}function dRe(i,e){var t=i.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var n=i[r],a=e[r];if(n.data.getId(n.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Rre(i,e,t){var r=Tre(i),n=Tre(e);function a(S,E,D,B,F){(D||S)&&E.animateFrom({style:D&&D!==S?Ce(Ce({},D.style),S.style):S.style},F)}var o=!1,s=sRe,l=ct(),c=ct();r.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&c.set(S.childGroupId,!0)});for(var u=0;u<n.length;u++){var h=n[u].groupId;if(c.get(h)){s=Sre;break}var d=n[u].childGroupId;if(d&&l.get(d)){s=Cre;break}}function f(S,E){return function(D){var B=D.data,F=D.dataIndex;return E?B.getId(F):S?s===Sre?D.childGroupId:D.groupId:s===Cre?D.childGroupId:D.groupId}}var m=dRe(r,n),y={};if(!m)for(var u=0;u<n.length;u++){var g=n[u],x=g.data.getItemGraphicEl(g.dataIndex);x&&(y[x.id]=!0)}function b(S,E){var D=r[E],B=n[S],F=B.data.hostModel,H=D.data.getItemGraphicEl(D.dataIndex),U=B.data.getItemGraphicEl(B.dataIndex);if(H===U){U&&hRe(U,B.dataIndex,F);return}H&&y[H.id]||U&&(Lv(U),H?(Lv(H),q4(H),o=!0,yM(Mp(H),Mp(U),B.divide,F,S,a)):Y4(U,F,S))}new ns(r,n,f(!0,m),f(!1,m),null,"multiple").update(b).updateManyToOne(function(S,E){var D=n[S],B=D.data,F=B.hostModel,H=B.getItemGraphicEl(D.dataIndex),U=Xi(Me(E,function(k){return r[k].data.getItemGraphicEl(r[k].dataIndex)}),function(k){return k&&k!==H&&!y[k.id]});H&&(Lv(H),U.length?(W(U,function(k){Lv(k),q4(k)}),o=!0,yM(Mp(U),Mp(H),D.divide,F,S,a)):Y4(H,F,D.dataIndex))}).updateOneToMany(function(S,E){var D=r[E],B=D.data.getItemGraphicEl(D.dataIndex);if(!(B&&y[B.id])){var F=Xi(Me(S,function(U){return n[U].data.getItemGraphicEl(n[U].dataIndex)}),function(U){return U&&U!==B}),H=n[S[0]].data.hostModel;F.length&&(W(F,function(U){return Lv(U)}),B?(Lv(B),q4(B),o=!0,yM(Mp(B),Mp(F),D.divide,H,S[0],a)):W(F,function(U){return Y4(U,H,S[0])}))}}).updateManyToMany(function(S,E){new ns(E,S,function(D){return r[D].data.getId(r[D].dataIndex)},function(D){return n[D].data.getId(n[D].dataIndex)}).update(function(D,B){b(S[D],E[B])}).execute()}).execute(),o&&W(e,function(S){var E=S.data,D=E.hostModel,B=D&&t.getViewOfSeriesModel(D),F=_h("update",D,0);B&&D.isAnimationEnabled()&&F&&F.duration>0&&B.group.traverse(function(H){H instanceof Kt&&!H.animators.length&&H.animateFrom({style:{opacity:0}},F)})})}function Mre(i){var e=i.getModel("universalTransition").get("seriesKey");return e||i.id}function Ire(i){return Ee(i)?i.sort().join(","):i}function Ip(i){if(i.hostModel)return i.hostModel.getModel("universalTransition").get("divideShape")}function fRe(i,e){var t=ct(),r=ct(),n=ct();W(i.oldSeries,function(o,s){var l=i.oldDataGroupIds[s],c=i.oldData[s],u=Mre(o),h=Ire(u);r.set(h,{dataGroupId:l,data:c}),Ee(u)&&W(u,function(d){n.set(d,{key:h,dataGroupId:l,data:c})})});function a(o){t.get(o)&&S7("Duplicated seriesKey in universalTransition "+o)}return W(e.updatedSeries,function(o){if(o.isUniversalTransitionEnabled()&&o.isAnimationEnabled()){var s=o.get("dataGroupId"),l=o.getData(),c=Mre(o),u=Ire(c),h=r.get(u);if(h)t.set(u,{oldSeries:[{dataGroupId:h.dataGroupId,divide:Ip(h.data),data:h.data}],newSeries:[{dataGroupId:s,divide:Ip(l),data:l}]});else if(Ee(c)){var d=[];W(c,function(y){var g=r.get(y);g.data&&d.push({dataGroupId:g.dataGroupId,divide:Ip(g.data),data:g.data})}),d.length&&t.set(u,{oldSeries:d,newSeries:[{dataGroupId:s,data:l,divide:Ip(l)}]})}else{var f=n.get(c);if(f){var m=t.get(f.key);m||(m={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:Ip(f.data)}],newSeries:[]},t.set(f.key,m)),m.newSeries.push({dataGroupId:s,data:l,divide:Ip(l)})}}}}),t}function Bre(i,e){for(var t=0;t<i.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===i[t].seriesIndex||e.seriesId!=null&&e.seriesId===i[t].id;if(r)return t}}function pRe(i,e,t,r){var n=[],a=[];W(cr(i.from),function(o){var s=Bre(e.oldSeries,o);s>=0&&n.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Ip(e.oldData[s]),groupIdDim:o.dimension})}),W(cr(i.to),function(o){var s=Bre(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Ip(l),groupIdDim:o.dimension})}}),n.length>0&&a.length>0&&Rre(n,a,r)}function Z4(i){i.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){W(cr(r.seriesTransition),function(n){W(cr(n.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][Qx]=!0)})})}),i.registerUpdateLifecycle("series:transition",function(e,t,r){var n=lRe(t);if(n.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)W(cr(a),function(f){pRe(f,n,r,t)});else{var o=fRe(n,r);W(o.keys(),function(f){var m=o.get(f);Rre(m.oldSeries,m.newSeries,t)})}W(r.updatedSeries,function(f){f[Qx]&&(f[Qx]=!1)})}for(var s=e.getSeries(),l=n.oldSeries=[],c=n.oldDataGroupIds=[],u=n.oldData=[],h=0;h<s.length;h++){var d=s[h].getData();d.count()<Dre&&(l.push(s[h]),c.push(s[h].get("dataGroupId")),u.push(d))}})}Ei([BO]);Ei([IO]);Ei([NO,zO,jO,rF,oF,bF,PF,QF,uN,hN,fN,DN,ON,UN,GN,WN,jN,KN,ZN,eU,nU,CU]);Ei(RU);Ei(NU);Ei(S_);Ei(zU);Ei(F_);Ei(HU);Ei(GU);Ei(e4);Ei(n4);Ei(Qu);Ei(u4);Ei(h4);Ei(A4);Ei(_4);Ei(b4);Ei(S4);Ei(R4);Ei(N4);Ei(Y_);Ei(J_);Ei(z4);Ei(ew);Ei(tw);Ei(Q4);Ei(W4);Ei(j4);Ei(Z4);Ei(lO);var Ov=(()=>{let e=class e{constructor(){this.pieChartDataValues=[],this.pieChartDataNames=[]}ngOnInit(){this.generarPieChart()}ngOnChanges(r){(r.pieChartDataValues&&r.pieChartDataValues.currentValue||r.pieChartDataNames&&r.pieChartDataNames.currentValue)&&this.generarPieChart()}generarPieChart(){if(!(!this.pieChartDataValues||!this.pieChartDataNames||this.pieChartDataValues.length===0||this.pieChartDataNames.length===0)){var r=document.getElementById("pie-chart-container"),n=Sm(r,null,{renderer:"canvas",useDirtyRect:!1}),a,o=["#9C6644","#DDB892","#BE8A66","#e9d2c0"];a={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{name:"Total",type:"pie",radius:"80%",label:{show:!1,formatter:"{d}%",position:"outside",fontSize:14},data:this.pieChartDataValues.map((s,l)=>({value:s,name:this.pieChartDataNames[l],itemStyle:{color:o[l%o.length],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:4}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},a&&typeof a=="object"&&n.setOption(a)}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-pie-chart"]],inputs:{pieChartDataValues:"pieChartDataValues",pieChartDataNames:"pieChartDataNames"},features:[No],decls:1,vars:0,consts:[["id","pie-chart-container",2,"margin-top","15px"]],template:function(n,a){n&1&&ce(0,"div",0)},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}#pie-chart-container[_ngcontent-%COMP%]{height:25vh;overflow:hidden}"]});let i=e;return i})();var Fv=(()=>{let e=class e{constructor(){this.barChartDataValues=[],this.barChartDataNames=[],this.barChartTitle="",this.mayorValor=0,this.total=0,this.labelMayorValor="",this.media=0}ngOnInit(){this.generarBarChart()}ngOnChanges(r){(r.barChartDataValues&&r.barChartDataValues.currentValue||r.barChartDataNames&&r.barChartDataNames.currentValue)&&this.generarBarChart()}generarBarChart(){var r=document.getElementById("bar-chart-container"),n=Sm(r,null,{renderer:"canvas",useDirtyRect:!1});this.mayorValor=Math.max(...this.barChartDataValues);let a=this.barChartDataValues.indexOf(this.mayorValor);this.labelMayorValor=this.barChartDataNames[a],this.total=this.barChartDataValues.reduce((s,l)=>s+l,0),this.media=this.total/this.barChartDataValues.length;var o={title:{text:this.barChartTitle,textStyle:{fontSize:13},left:"center",top:"15px"},grid:{left:"2%",right:"2%",bottom:"20%",top:50,containLabel:!0},xAxis:{type:"category",data:this.barChartDataNames},yAxis:{type:"value"},series:[{data:this.barChartDataValues,type:"bar",itemStyle:{color:"#9C6644",shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:4},emphasis:{itemStyle:{color:"#E45E2D"}}}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},graphic:[{type:"text",left:"20%",top:"92%",style:{text:"Total",fontSize:12,fill:"#A1AAB2"}},{type:"text",left:"20%",top:"85%",style:{text:`${this.total}`,fontSize:16,fill:"#000000"}},{type:"text",left:"center",top:"92%",style:{text:"Mayor valor",fontSize:12,fill:"#A1AAB2"}},{type:"text",left:"center",top:"85%",style:{text:`${this.mayorValor} (${this.labelMayorValor})`,fontSize:16,fill:"#000000"}},{type:"text",right:"15%",top:"92%",style:{text:"Media",fontSize:12,fill:"#A1AAB2"}},{type:"text",right:"15%",top:"85%",style:{text:`${this.media.toFixed(2)}`,fontSize:16,fill:"#000000"}}]};o&&typeof o=="object"&&n.setOption(o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-bar-chart"]],inputs:{barChartDataValues:"barChartDataValues",barChartDataNames:"barChartDataNames",barChartTitle:"barChartTitle"},features:[No],decls:1,vars:0,consts:[["id","bar-chart-container"]],template:function(n,a){n&1&&ce(0,"div",0)},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}#bar-chart-container[_ngcontent-%COMP%]{height:42vh;overflow:hidden}"]});let i=e;return i})();var ARe=i=>({"primera-fila":i});function mRe(i,e){if(i&1&&(Ls(0),L(1,"tr",68)(2,"td",69),Q(3),O(),L(4,"td"),Q(5),O()(),Os()),i&2){let t=e.$implicit,r=e.index,n=it();ie(1),Le("ngClass",yo(3,ARe,n.isFirstElement(r))),ie(2),We(t.nombre),ie(2),We(t.totalEscaneos)}}var Ore=function(i){return i.Dia="D",i.Semana="S",i.Mes="M",i.A\u00F1o="A",i}(Ore||{}),Fre=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.pieceService=r,this.salaService=n,this.exposicionService=a,this.escaneoService=o,this.juegoService=s,this.breadcrumbService=l,this.cookies=c,this.http=u,this.filtros={nombre:new wt(""),exposicion:new wt("0"),numero:new wt(10),pagina:1},this.pieChartDataValues=[],this.pieChartDataNames=[],this.pieChartDataValues2=[],this.pieChartDataNames2=[],this.barChartDataValues=[],this.barChartDataNames=[],this.barChartTitle="",this.dataEscaneoPieza=[],this.fechaActual=new Date,this.fechaFiltro=new Date(this.fechaActual),this.opcionFiltro=Ore.Mes,this.diaFiltro=0,this.semanaFiltro=0,this.a\u00F1oFiltro=0,this.mesFiltro=0,this.totalUsuarios=0,this.totalPiezas=0,this.totalEscaneos=0,this.totalPartidasAlcudio=0,this.usoMotorGrafico="",this.usoAudio="",this.tiempoSesion="",this.tiempoJuego="",this.diferenciaEscaneos=0,this.contadorAdultos=0,this.juegos_finalizados="",this.totalEscaneosJuego=0,this.opcionSeleccionada="Uso motor gr\xE1fico",this.valorOpcionSeleccionada="",this.listaSeleccionada="Piezas m\xE1s escaneadas",this.valorlistaSeleccionada=[],this.editor=null,this.ultima_sesion="",this.pieces=[],this.sortedPieces=[],this.totalTabla1=[],this.salas=[],this.sortedSalas=[],this.exposiciones=[],this.sortedExposiciones=[],this.escaneos=[],this.escaneos_juego=[],this.juegos=[],this.sortedJuegos=[]}ngOnInit(){this.getEditor();let r=sessionStorage.getItem("desplegableOption");r?(this.opcionSeleccionada=r,this.updateDesplegable(r)):sessionStorage.setItem("desplegableOption",this.opcionSeleccionada);let n=sessionStorage.getItem("listaOption");n?(this.listaSeleccionada=n,this.updateLista(n)):sessionStorage.setItem("listaOption",this.listaSeleccionada),this.fechaActual=new Date,this.fechaFiltro=this.fechaActual,this.a\u00F1oFiltro=this.fechaActual.getFullYear(),this.mesFiltro=this.fechaActual.getMonth()+1,this.semanaFiltro=this.fechaActual.getDate(),this.diaFiltro=this.fechaActual.getDate();let a=this.mesFiltro.toString().padStart(2,"0");var o=document.querySelector('input[type="radio"][name="toggle"][value="'+this.opcionFiltro+'"]');o&&o instanceof HTMLInputElement&&(o.checked=!0),this.onToggleChange({target:{value:this.opcionFiltro}}),this.escaneoService.getIndicadorUsuarios().subscribe(s=>{this.pieChartDataValues=s.values,this.pieChartDataNames=s.names,this.totalUsuarios=s.values[0]+s.values[1],this.opcionSeleccionada==="Usuarios totales"&&(this.valorOpcionSeleccionada=this.totalUsuarios.toString())}),this.escaneoService.getAllEscaneosPiezas().subscribe(s=>{this.escaneos=s,this.totalEscaneos=s.length}),this.pieceService.getLista("es").subscribe(s=>{this.pieces=s.piezas,this.sortedPieces=[...this.pieces]}),this.salaService.getAll().subscribe(s=>{this.salas=s}),this.exposicionService.getAll().subscribe(s=>{this.exposiciones=s}),this.getMasEscaneos(),this.getJuegosMasEscaneados(),this.getEstadisticasJuegos(),this.inicializarGr\u00E1ficos(),this.breadcrumbService.updateBreadcrumb("",[""])}inicializarGr\u00E1ficos(){this.pieceService.getLista("es").subscribe(o=>{this.totalPiezas=o.piezas.length});let r,n=(this.fechaActual.getMonth()+1).toString().padStart(2,"0"),a=this.fechaActual.getMonth().toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.fechaActual.getFullYear().toString(),n).subscribe(o=>{this.escaneoService.getFiltroEscaneosPieza(this.fechaActual.getFullYear().toString(),a).subscribe(s=>{r=s.values.reduce((l,c)=>l+c,0),this.diferenciaEscaneos=(this.totalEscaneos-r)/r*100,this.diferenciaEscaneos=parseFloat(this.diferenciaEscaneos.toFixed(0))})})}onToggleChange(r){r.target.value?this.opcionFiltro=r.target.value:this.opcionFiltro=r,sessionStorage.setItem("filtroOption",this.opcionFiltro);let n=this.mesFiltro.toString().padStart(2,"0"),a="";this.fechaActual.getDay()==0?a="7":a=(this.semanaFiltro-(this.fechaActual.getDay()-1)).toString(),console.log(a),r.target.value==="D"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,"",this.diaFiltro.toString()).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title,console.log(o.title)}):r.target.value==="S"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,a).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title}):r.target.value==="M"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title}):r.target.value==="A"&&this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString()).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title})}updateDesplegable(r){this.opcionSeleccionada=r,sessionStorage.setItem("desplegableOption",this.opcionSeleccionada),this.opcionSeleccionada=="Uso motor gr\xE1fico"?(this.getUsoMotorGr\u00E1fico(),this.valorOpcionSeleccionada=this.usoMotorGrafico):this.opcionSeleccionada=="Uso reproductor de audio"?(this.getUsoAudio(),this.valorOpcionSeleccionada=this.usoAudio):this.opcionSeleccionada=="Tiempo medio por sesi\xF3n"?(this.getTiempoMedioPorSesion(),this.valorOpcionSeleccionada=this.tiempoSesion):this.opcionSeleccionada=="Juegos finalizados"?(this.getEstadisticasJuegos(),this.valorOpcionSeleccionada=this.juegos_finalizados):this.opcionSeleccionada=="Usuarios totales"?this.valorOpcionSeleccionada=this.totalUsuarios.toString():this.opcionSeleccionada=="Tiempo medio jugando"&&(this.getTiempoMedioPorJuego(),this.valorOpcionSeleccionada=this.tiempoJuego)}updateLista(r){this.listaSeleccionada=r,sessionStorage.setItem("listaOption",this.listaSeleccionada),r==="Piezas m\xE1s escaneadas"?this.valorlistaSeleccionada=this.sortedPieces:r==="Exposiciones con m\xE1s escaneos"?this.valorlistaSeleccionada=this.sortedExposiciones:r==="Salas con m\xE1s escaneos"?this.valorlistaSeleccionada=this.sortedSalas:r==="Juegos m\xE1s jugados"&&(this.valorlistaSeleccionada=this.sortedJuegos)}getMasEscaneos(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r,this.sortedExposiciones=[...this.exposiciones],this.salaService.getAll().subscribe(n=>{this.salas=n,this.sortedSalas=[...this.salas],this.pieceService.getLista("es").subscribe(a=>{this.pieces=a.piezas,this.sortedPieces=[...this.pieces],this.pieces.forEach((o,s)=>{this.escaneoService.getAllEscaneosPieza(o.id).subscribe(l=>{let c=l.length;o.totalEscaneos=c;let u=this.salas.find(d=>d.id===o.sala_id);u&&(u.totalEscaneos=(u.totalEscaneos||0)+c);let h=this.exposiciones.find(d=>d.id===u?.exposicion_id);h&&(h.totalEscaneos=(h.totalEscaneos||0)+c),s===this.pieces.length-1&&(this.sortedSalas.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),this.sortedExposiciones.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),this.sortedPieces.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),this.listaSeleccionada==="Piezas m\xE1s escaneadas"&&this.updateLista("Piezas m\xE1s escaneadas"),this.listaSeleccionada==="Exposiciones con m\xE1s escaneos"&&this.updateLista("Exposiciones con m\xE1s escaneos"),this.listaSeleccionada==="Salas con m\xE1s escaneos"&&this.updateLista("Salas con m\xE1s escaneos"),this.listaSeleccionada==="Juegos m\xE1s jugados"&&this.updateLista("Juegos m\xE1s jugados"))})})})})})}getJuegosMasEscaneados(){this.juegoService.getAll(this.filtros).subscribe(r=>{this.juegos=r.juegos,this.sortedJuegos=[...this.juegos],this.juegos.forEach((n,a)=>{this.escaneoService.getAllEscaneosJuego(n.id).subscribe(o=>{let s=o.length;n.totalEscaneos=s,a===this.juegos.length-1&&this.sortedJuegos.sort((l,c)=>(c.totalEscaneos||0)-(l.totalEscaneos||0))})})})}getEditor(){let r=this.cookies.get("withuUserToken");this.http.get(Fi.apiURL+"/auth/editor",{headers:{Authorization:"Bearer "+r}}).subscribe(n=>{this.editor=n;let a=new Date(n.ultima_sesion),o=a.getFullYear(),s=(a.getMonth()+1).toString().padStart(2,"0"),l=a.getDate().toString().padStart(2,"0"),c=a.getHours().toString().padStart(2,"0"),u=a.getMinutes().toString().padStart(2,"0"),h=a.getSeconds().toString().padStart(2,"0");this.ultima_sesion=`${l}/${s}/${o} ${c}:${u}:${h}`,console.log(this.ultima_sesion)},n=>{console.error(n.error.error),location.href="/login"})}getEstadisticasJuegos(){let r=0;this.escaneoService.getAllEscaneosJuegos().subscribe(n=>{this.escaneos_juego=n,this.totalEscaneosJuego=n.length;for(let a=0;a<this.escaneos_juego.length;a++)this.totalPartidasAlcudio++,this.escaneos_juego[a].finalizado==1&&r++;this.juegos_finalizados=parseFloat((r/this.totalEscaneosJuego*100).toFixed(2)).toString()+"%",this.opcionSeleccionada==="Juegos finalizados"&&(this.valorOpcionSeleccionada=this.juegos_finalizados)})}getUsuarios(){this.escaneoService.getIndicadorUsuarios().subscribe(r=>{this.pieChartDataValues=r.values,this.pieChartDataNames=r.names})}getUsoIdiomas(){this.escaneoService.getUsoIdiomas().subscribe(r=>{this.pieChartDataValues2=r.values,this.pieChartDataNames2=r.names})}getUsoMotorGr\u00E1fico(){let r=0;this.escaneoService.getAllEscaneosPiezas().subscribe(n=>{this.escaneos=n,this.totalEscaneos=n.length;for(let a=0;a<this.escaneos.length;a++)this.escaneos[a].motor_grafico==1&&r++;this.usoMotorGrafico=parseFloat((r/this.totalEscaneos*100).toFixed(2)).toString()+"%",this.opcionSeleccionada==="Uso motor gr\xE1fico"&&(this.valorOpcionSeleccionada=this.usoMotorGrafico),console.log(this.listaSeleccionada)})}getUsoAudio(){this.escaneoService.getAllEscaneosPiezas().subscribe(r=>{this.escaneos=r,this.totalEscaneos=r.length;let n=0;for(let a=0;a<this.escaneos.length;a++)this.escaneos[a].audio==1&&n++;this.usoAudio=parseFloat((n/this.totalEscaneos*100).toFixed(2)).toString()+"%",this.opcionSeleccionada==="Uso reproductor de audio"&&(this.valorOpcionSeleccionada=this.usoAudio)})}getTiempoMedioPorSesion(){this.escaneoService.getAllEscaneosPiezas().subscribe(r=>{this.escaneos=r,this.totalEscaneos=r.length;let n=0;for(let o=0;o<this.escaneos.length;o++){let s=this.escaneos[o].tiempo;s!==void 0&&typeof s=="number"&&(n+=s)}let a=parseFloat((n/this.totalEscaneos).toFixed(2));this.tiempoSesion=this.segundosAFormatoTiempo(a),this.opcionSeleccionada==="Tiempo medio por sesi\xF3n"&&(this.valorOpcionSeleccionada=this.tiempoSesion)})}getTiempoMedioPorJuego(){this.escaneoService.getAllEscaneosJuegos().subscribe(r=>{this.escaneos=r,this.totalEscaneos=r.length;let n=0;for(let o=0;o<this.escaneos.length;o++){let s=this.escaneos[o].tiempo;s!==void 0&&typeof s=="number"&&(n+=s)}let a=parseFloat((n/this.totalEscaneos).toFixed(2));this.tiempoJuego=this.segundosAFormatoTiempo(a),this.opcionSeleccionada==="Tiempo medio jugando"&&(this.valorOpcionSeleccionada=this.tiempoJuego)})}paginacion(r){if(this.opcionFiltro=="A")r==0?this.a\u00F1oFiltro--:this.a\u00F1oFiltro!=this.fechaActual.getFullYear()&&this.a\u00F1oFiltro++,this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString()).subscribe(n=>{this.barChartDataValues=n.values,this.barChartDataNames=n.names,this.barChartTitle=n.title});else if(this.opcionFiltro=="M"){r==0?this.mesFiltro==1?(this.mesFiltro=12,this.a\u00F1oFiltro--):this.mesFiltro--:(this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear())&&(this.mesFiltro==12?(this.mesFiltro=1,this.a\u00F1oFiltro++):this.mesFiltro++);let n=this.mesFiltro.toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n).subscribe(a=>{this.barChartDataValues=a.values,this.barChartDataNames=a.names,this.barChartTitle=a.title})}else if(this.opcionFiltro=="S"){if(console.log(this.fechaFiltro),console.log(this.fechaActual),r==0){let a=new Date(this.fechaFiltro);a.setDate(a.getDate()-7),this.fechaFiltro=a}else if(this.fechaFiltro.getDate()!=this.fechaActual.getDate()||this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear()){let a=new Date(this.fechaFiltro);a.setDate(a.getDate()+7),this.fechaFiltro=a}this.semanaFiltro=this.fechaFiltro.getDate(),this.a\u00F1oFiltro=this.fechaFiltro.getFullYear();let n=(this.fechaFiltro.getMonth()+1).toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,this.semanaFiltro.toString()).subscribe(a=>{this.barChartDataValues=a.values,this.barChartDataNames=a.names,this.barChartTitle=a.title})}else if(this.opcionFiltro=="D"){if(r==0){let o=new Date(this.fechaFiltro);o.setDate(o.getDate()-1),this.fechaFiltro=o}else if(this.fechaFiltro.getDate()!=this.fechaActual.getDate()||this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear()){let o=new Date(this.fechaFiltro);o.setDate(o.getDate()+1),this.fechaFiltro=o}let n=this.fechaFiltro.getDate().toString().padStart(2,"0");this.a\u00F1oFiltro=this.fechaFiltro.getFullYear();let a=(this.fechaFiltro.getMonth()+1).toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),a,"",n).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title})}}segundosAFormatoTiempo(r){let n=Math.floor(r/3600),a=Math.floor(r%3600/60),o=Math.floor(r%60);if(n===0){let s=a<10?`0${a}`:`${a}`,l=o<10?`0${o}`:`${o}`;return`${s}min ${l}s`}else{let s=n<10?`0${n}`:`${n}`,l=a<10?`0${a}`:`${a}`,c=o<10?`0${o}`:`${o}`;return`${s}:${l}:${c}`}}isFirstElement(r){return r===0}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Tn),xe(sn),xe(Mf),xe(ys),xe(vr),xe(Kn),xe(Un))},e.\u0275cmp=St({type:e,selectors:[["app-dashboard"]],decls:163,vars:15,consts:[[2,"display","flex","align-items","center","padding-top","20px"],[2,"margin-right","20px"],[2,"color","#905235"],[1,"text-muted",2,"margin-right","20px","padding-bottom","2px"],[1,"card","vision-general"],[1,"row","estadisticas"],[1,"col-md-2",2,"padding-left","50px"],[1,"card-title","mb-0"],[1,"col-md-10"],[1,"col-md-3"],[1,"row","info-general"],[1,"col-md-4","p-0"],[1,"card","p-3",2,"background-color","#D08968"],[1,"m-t-0","text-center"],[1,"mdi","mdi-image-multiple"],[1,"col-md-8","pr-0","pl-4"],[2,"font-size","12px","color","#28B779"],[1,"text-muted",2,"font-size","15px"],[1,"card","p-3",2,"background-color","#7F5539"],[1,"mdi","mdi-qrcode"],[1,"card","p-3",2,"background-color","#9C6644"],[1,"mdi","mdi-puzzle"],[1,"card","p-3",2,"background-color","#DDB892"],[1,"mdi","mdi-account-multiple"],[1,"row","align-items-stretch"],[1,"col-md-6"],[1,"card","p-3","altura-minima"],[1,"pl-2","pt-1","align-items-center"],[1,"row"],[1,"col-md-7"],[1,"d-flex","align-items-center"],[1,"card-title","m-b-0","mr-2"],[1,"col-md-5","d-flex","justify-content-end","pr-4"],["id","opciones_accesibilidad",1,"d-flex","align-items-center",2,"font-size","12px","color","#454545"],[1,"toggle-container"],["type","radio","id","option1","name","toggle","value","D",1,"toggle-input",3,"change"],["for","option1",1,"toggle-label"],["type","radio","id","option2","name","toggle","value","S",1,"toggle-input",3,"change"],["for","option2",1,"toggle-label"],["type","radio","id","option3","name","toggle","value","M","checked","",1,"toggle-input",3,"change"],["for","option3",1,"toggle-label"],["type","radio","id","option4","name","toggle","value","A",1,"toggle-input",3,"change"],["for","option4",1,"toggle-label"],[1,"col-md-1","d-flex","align-items-center","justify-content-center","pl-4"],[1,"btn","btn-link",3,"click"],[1,"mdi","mdi-chevron-left"],[3,"barChartDataValues","barChartDataNames","barChartTitle"],[1,"col-md-1","d-flex","align-items-center","justify-content-center","pr-4"],[1,"btn","btn-link","btn-bg-danger",3,"click"],[1,"mdi","mdi-chevron-right"],[1,"col-md-12"],[1,"card","altura-minima2","p-3","mb-3"],[1,"card-title","m-b-1","mr-2"],[3,"pieChartDataValues","pieChartDataNames"],[1,"card","altura-minima3","p-3"],[1,"pl-2","align-items-center"],[1,"dropdown","dropup"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","bg-white"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[2,"font-size","32px","padding-left","10px"],[1,"pl-2","d-flex","align-items-center",2,"padding-bottom","10px"],[1,"card-title","m-b-1"],[1,"dropdown"],[1,"table-responsive"],[1,"table","p-2"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngClass"],[2,"max-width","20ch","text-overflow","ellipsis","white-space","nowrap","overflow","hidden"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"h3",1),Q(2,"Bienvenido de nuevo, "),L(3,"span",2),Q(4),O()(),L(5,"span",3),Q(6),O()(),ce(7,"br"),L(8,"div",4)(9,"div",5)(10,"div",6)(11,"h4",7),Q(12,"Visi\xF3n general"),O()(),L(13,"div",8)(14,"div",5)(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13),ce(20,"i",14),O()()(),L(21,"div",15)(22,"h4"),Q(23),ce(24,"span",16),O(),L(25,"span",17),Q(26,"Piezas"),O()()()(),L(27,"div",9)(28,"div",10)(29,"div",11)(30,"div",18)(31,"div",13),ce(32,"i",19),O()()(),L(33,"div",15)(34,"h4"),Q(35),ce(36,"span",16),O(),L(37,"span",17),Q(38,"Escaneos"),O()()()(),L(39,"div",9)(40,"div",10)(41,"div",11)(42,"div",20)(43,"div",13),ce(44,"i",21),O()()(),L(45,"div",15)(46,"h4"),Q(47),ce(48,"span",16),O(),L(49,"span",17),Q(50,"Partidas Alcudio"),O()()()(),L(51,"div",9)(52,"div",10)(53,"div",11)(54,"div",22)(55,"div",13),ce(56,"i",23),O()()(),L(57,"div",15)(58,"h4"),Q(59),O(),L(60,"span",17),Q(61,"Usuarios totales"),O()()()()()()()(),ce(62,"br"),L(63,"div",24)(64,"div",25)(65,"div",26)(66,"div",27)(67,"div",28)(68,"div",29)(69,"div",30)(70,"h4",31),Q(71,"Escaneos"),O()()(),L(72,"div",32)(73,"div",33)(74,"div",34)(75,"input",35),ye("change",function(s){return a.onToggleChange(s)}),O(),L(76,"label",36)(77,"span"),Q(78,"D"),O()()(),L(79,"div",34)(80,"input",37),ye("change",function(s){return a.onToggleChange(s)}),O(),L(81,"label",38)(82,"span"),Q(83,"S"),O()()(),L(84,"div",34)(85,"input",39),ye("change",function(s){return a.onToggleChange(s)}),O(),L(86,"label",40)(87,"span"),Q(88,"M"),O()()(),L(89,"div",34)(90,"input",41),ye("change",function(s){return a.onToggleChange(s)}),O(),L(91,"label",42)(92,"span"),Q(93,"A"),O()()()()()()(),L(94,"div",28)(95,"div",43)(96,"button",44),ye("click",function(){return a.paginacion(0)}),ce(97,"i",45),O()(),L(98,"div",8),ce(99,"app-bar-chart",46),O(),L(100,"div",47)(101,"button",48),ye("click",function(){return a.paginacion(1)}),ce(102,"i",49),O()()()()(),L(103,"div",9)(104,"div",28)(105,"div",50)(106,"div",51)(107,"div",27)(108,"div",28)(109,"div",50)(110,"div",30)(111,"h4",52),Q(112,"Proporci\xF3n Adultos/Ni\xF1os"),O()()()()(),ce(113,"app-pie-chart",53),O(),L(114,"div",54)(115,"div",55)(116,"div",30)(117,"h4",52),Q(118),O(),L(119,"div",56),ce(120,"button",57),L(121,"div",58)(122,"a",59),ye("click",function(){return a.updateDesplegable("Uso motor gr\xE1fico")}),Q(123,"Uso motor gr\xE1fico"),O(),L(124,"a",59),ye("click",function(){return a.updateDesplegable("Uso reproductor de audio")}),Q(125,"Uso reproductor de audio"),O(),L(126,"a",59),ye("click",function(){return a.updateDesplegable("Tiempo medio por sesi\xF3n")}),Q(127,"Tiempo medio por sesi\xF3n"),O(),L(128,"a",59),ye("click",function(){return a.updateDesplegable("Juegos finalizados")}),Q(129,"Juegos finalizados"),O(),L(130,"a",59),ye("click",function(){return a.updateDesplegable("Usuarios totales")}),Q(131,"Usuarios totales"),O(),L(132,"a",59),ye("click",function(){return a.updateDesplegable("Tiempo medio jugando")}),Q(133,"Tiempo medio jugando"),O()()()()(),L(134,"div",60),Q(135),O()()()()(),L(136,"div",9)(137,"div",26)(138,"div",61)(139,"h4",62),Q(140),O(),L(141,"div",63),ce(142,"button",57),L(143,"div",58)(144,"a",59),ye("click",function(){return a.updateLista("Piezas m\xE1s escaneadas")}),Q(145,"Piezas m\xE1s escaneadas"),O(),L(146,"a",59),ye("click",function(){return a.updateLista("Exposiciones con m\xE1s escaneos")}),Q(147,"Exposiciones con m\xE1s escaneos"),O(),L(148,"a",59),ye("click",function(){return a.updateLista("Salas con m\xE1s escaneos")}),Q(149,"Salas con m\xE1s escaneos"),O(),L(150,"a",59),ye("click",function(){return a.updateLista("Juegos m\xE1s jugados")}),Q(151,"Juegos m\xE1s jugados"),O()()()(),L(152,"div",64)(153,"table",65)(154,"thead")(155,"tr")(156,"th",66),Q(157,"Nombre"),O(),L(158,"th",66),Q(159,"N\xBA Total"),O()()(),L(160,"tbody"),Dt(161,mRe,6,5,"ng-container",67),O()()()()()(),ce(162,"br")),n&2&&(ie(4),We(a.editor==null?null:a.editor.nombre),ie(2),_n("\xDAltimo acceso: ",a.ultima_sesion,""),ie(17),_n("",a.totalPiezas," "),ie(12),_n("",a.totalEscaneos," "),ie(12),_n("",a.totalPartidasAlcudio," "),ie(12),_n("",a.totalUsuarios," "),ie(40),Le("barChartDataValues",a.barChartDataValues)("barChartDataNames",a.barChartDataNames)("barChartTitle",a.barChartTitle),ie(14),Le("pieChartDataValues",a.pieChartDataValues)("pieChartDataNames",a.pieChartDataNames),ie(5),We(a.opcionSeleccionada),ie(17),_n(" ",a.valorOpcionSeleccionada," "),ie(5),We(a.listaSeleccionada),ie(21),Le("ngForOf",a.valorlistaSeleccionada))},dependencies:[gs,ia,Ov,Fv],styles:[".card[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.expo-img[_ngcontent-%COMP%]{max-width:9vh;max-height:9vh}.info-general[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-left:10px}.info-general[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.estadisticas[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:left;padding:10px}.estadisticas[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(span, h3)[_ngcontent-%COMP%]{color:#fff}.estadisticas[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0}.estadisticas[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:20px}.estadisticas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;padding-right:10px;width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.imagen-qr[_ngcontent-%COMP%]{aspect-ratio:1}.altura-minima[_ngcontent-%COMP%]{height:52vh}.altura-minima2[_ngcontent-%COMP%]{height:calc((52vh / 1.5) - 5.5px)}.altura-minima3[_ngcontent-%COMP%]{height:calc((52vh / 3) - 10.66px)}.page-breadcrumb[_ngcontent-%COMP%]{display:none}.mdi[_ngcontent-%COMP%]{text-shadow:1px 1px 2px rgba(0,0,0,.5)}.icono-grande[_ngcontent-%COMP%]{font-size:24px}.btn-link[_ngcontent-%COMP%]{font-size:25px;text-shadow:none}.toggle-container[_ngcontent-%COMP%]{display:flex}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer;padding:5px 10px;border:1px solid #ccc}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:#454545;color:#fff;padding-left:15px;padding-right:15px}.primera-fila[_ngcontent-%COMP%]{font-weight:700}"]});let i=e;return i})();var Nre=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-usuarios"]],decls:2,vars:0,template:function(n,a){n&1&&(L(0,"p"),Q(1,"usuarios works!"),O())}});let i=e;return i})();var Il=(()=>{let e=class e{constructor(){this.visibleSala=!1,this.visibleExposicion=!1,this.visiblePieza=!1}showAlertSalas(r){this.visibleSala=r}getAlertSalas(){return this.visibleSala}showAlertExposiciones(r){this.visibleExposicion=r}getAlertExposiciones(){return this.visibleExposicion}showAlertPiezas(r){this.visiblePieza=r}getAlertPiezas(){return this.visiblePieza}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function gRe(i,e){if(i&1){let t=Li();L(0,"div",54)(1,"span"),Q(2,"La sala ha sido registrada con \xE9xito."),O(),L(3,"button",55),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",11),Q(5,"\xD7"),O()()()}}function vRe(i,e){if(i&1){let t=Li();L(0,"div",56)(1,"span"),Q(2,"La sala ha sido borrada con \xE9xito."),O(),L(3,"button",55),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",11),Q(5,"\xD7"),O()()()}}function yRe(i,e){if(i&1&&(L(0,"option",57),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function xRe(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td",58),Q(2),O(),L(3,"td",58),Q(4),O(),L(5,"td",58),Q(6),O(),L(7,"td",59)(8,"span",60),Q(9),gf(10,"uppercase"),O()(),L(11,"td",59)(12,"div",61)(13,"button",62),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.navigateToEditSala(a.id))}),ce(14,"span",63),O(),L(15,"button",64),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(16,"span",65),O()()()()}if(i&2){let t=e.$implicit;ie(2),We(t.nombre),ie(2),We(t.descripcion||"Sin descripci\xF3n"),ie(2),We(t.exposicion_nombre),ie(3),We(vf(10,4,t.estado_id))}}function _Re(i,e){if(i&1){let t=Li();Ls(0),L(1,"li",66)(2,"a",52),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.guardarPagina(a))}),Q(3),O()(),Os()}if(i&2){let t=e.$implicit,r=it();ie(1),so("active",r.numPagina===t),ie(2),We(t)}}var Ure=(()=>{let e=class e{constructor(r,n,a,o,s){this.salaService=r,this.router=n,this.breadcrumbService=a,this.alertService=o,this.exposicionService=s,this.salas=[],this.exposiciones=[],this.idToDelete="",this.showAlert=!1,this.showAlert2=!1,this.exposicionSeleccionada="",this.exposicion=null,this.totalSalas=0,this.maxSalas=0,this.numPagina=1,this.cantidadPorPagina=5,this.nombreFiltro=""}ngOnInit(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r,this.totalSalas=this.exposiciones.length}),this.salaService.getAll().subscribe(r=>{this.totalSalas=r.length,this.maxSalas=r.length}),this.breadcrumbService.updateBreadcrumb("Listado salas",["Inicio","Salas"]),this.showAlert=this.alertService.getAlertSalas(),setTimeout(()=>{this.alertService.showAlertSalas(!1),this.showAlert=this.alertService.getAlertSalas()},3e3),this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}navigateToSala(r){this.router.navigate(["administrador/salas/ver/",r])}navigateToEditSala(r){this.router.navigate(["administrador/salas/editar/",r])}navigateToCreateSala(){this.router.navigate(["administrador/salas/crear"])}borrarSala(){this.salaService.deleteOne(this.idToDelete).subscribe(r=>{console.log(r);let n=this.salas.findIndex(a=>a.id===this.idToDelete);this.salas.splice(n,1),this.alertService.showAlertSalas(!0),this.showAlert2=this.alertService.getAlertSalas(),setTimeout(()=>{this.alertService.showAlertSalas(!1),this.showAlert2=this.alertService.getAlertSalas()},3e3),(this.totalSalas-1)%this.cantidadPorPagina==0?this.guardarPagina(this.numPagina-1):this.guardarPagina(this.numPagina)})}closeAlert(){this.showAlert=!1}seleccionarExposicion(r){if(this.exposicionSeleccionada=r.target.value,this.exposicionSeleccionada===""){this.numPagina=1,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina);for(let n=0;n<this.salas.length;n++)this.salaService.getExposicionSala(this.salas[n].id).subscribe(a=>{this.salas[n].exposicion_nombre=a.nombre},a=>{console.error("Error al obtener la exposici\xF3n:",a)})}else this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina);console.log(this.exposicionSeleccionada)}obtenerSalas(r,n){this.salaService.getNumSalas(1,1e3,this.nombreFiltro,this.exposicionSeleccionada).subscribe(a=>{this.totalSalas=a.length,console.log(a.length)}),this.salaService.getNumSalas(r,n,this.nombreFiltro,this.exposicionSeleccionada).subscribe(a=>{console.log(a),this.salas=a;for(let o=0;o<this.salas.length;o++)this.salaService.getExposicionSala(this.salas[o].id).subscribe(s=>{this.salas[o].exposicion_nombre=s.nombre},s=>{console.error("Error al obtener la exposici\xF3n:",s)})})}filtroEntradas(r){this.cantidadPorPagina=r.target.value,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}calcularRango(){let r=Math.min(this.totalSalas,(this.numPagina-1)*this.cantidadPorPagina+1),n=Math.min(this.numPagina*this.cantidadPorPagina,this.totalSalas);return{primerResultado:r,ultimoResultado:n}}guardarPagina(r){this.numPagina=r,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina),console.log("N\xFAmero de p\xE1gina actual: "+this.numPagina)}calcularPaginas(){let r=Math.ceil(this.totalSalas/this.cantidadPorPagina);return Array.from({length:r},(n,a)=>a+1)}buscarSala(r){this.nombreFiltro=r,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}};e.\u0275fac=function(n){return new(n||e)(xe(Tn),xe(bi),xe(vr),xe(Il),xe(sn))},e.\u0275cmp=St({type:e,selectors:[["app-salas"]],standalone:!0,features:[gr],decls:93,vars:14,consts:[[1,"boton-arriba"],["type","button",1,"btn","btn-dark","btn-md",2,"border-radius","1.5rem",3,"click"],[1,"mdi","mdi-plus"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-success","role","alert",4,"ngIf"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-danger","role","alert",4,"ngIf"],["id","modalBorrarSala","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"card"],[1,"card-body"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"row",2,"padding-bottom","20px","padding-top","10px","padding-left","20px"],[1,"pl-2","pr-2"],["name","zero_config_length","aria-controls","zero_config",1,"form-control","form-control-sm",3,"value","change"],["value","5"],["value","10"],["value","25"],["value","50"],[1,"ml-auto"],[1,"col-md-9"],[1,"select2","form-control","custom-select",2,"width","200px",3,"value","change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["id","zero_config_filter",1,"dataTables_filter",2,"margin-right","10px",3,"submit"],[1,"input-group"],["type","text","placeholder","Buscar","aria-label","buscar","aria-describedby","basic-addon2",1,"form-control",3,"keydown.enter"],["busqueda",""],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"row"],[1,"col-12"],["id","zero_config",1,"table","w-100"],[1,"thead-light"],[1,"last-column"],[4,"ngFor","ngForOf"],[1,"row",2,"padding-top","10px"],[2,"padding-left","20px"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info"],[1,"ml-auto",2,"margin-right","12px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous"],["aria-controls","zero_config",1,"page-link",3,"click"],["id","zero_config_next",1,"paginate_button","page-item","next"],["role","alert",1,"alert","alert-success",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],["type","button","aria-label","Close",1,"close",3,"click"],["role","alert",1,"alert","alert-danger",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],[3,"value"],[1,"info","align-middle"],[1,"align-middle"],[1,"badge","badge-pill","badge-Light"],[1,"d-inline-flex","justify-content-between"],["type","button",1,"btn","btn-outline-warning","btn-md",3,"click"],[1,"mdi","mdi-pencil"],["type","button","data-toggle","modal","data-target","#modalBorrarSala",1,"btn","btn-outline-danger","btn-md",3,"click"],[1,"mdi","mdi-delete"],[1,"paginate_button","page-item"]],template:function(n,a){if(n&1){let o=Li();L(0,"div",0)(1,"button",1),ye("click",function(){return a.navigateToCreateSala()}),L(2,"span",2),Q(3," CREAR NUEVA"),O()()(),Dt(4,gRe,6,0,"div",3)(5,vRe,6,0,"div",4),L(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9),Q(11,"Borrar sala"),O(),L(12,"button",10)(13,"span",11),Q(14,"\xD7"),O()()(),L(15,"div",12)(16,"p"),Q(17," \xBFSeguro de que quiere eliminar esta sala? "),O()(),L(18,"div",13)(19,"button",14),Q(20,"Cancelar"),O(),L(21,"button",15),ye("click",function(){return a.borrarSala()}),Q(22,"Borrar exposici\xF3n"),O()()()()(),L(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"div",20)(28,"div")(29,"label"),Q(30,"Mostrar"),O()(),L(31,"div",21)(32,"select",22),ye("change",function(l){return a.filtroEntradas(l)}),L(33,"option",23),Q(34,"5"),O(),L(35,"option",24),Q(36,"10"),O(),L(37,"option",25),Q(38,"25"),O(),L(39,"option",26),Q(40,"50"),O()()(),L(41,"label"),Q(42,"entradas"),O(),L(43,"div",27)(44,"div",28)(45,"select",29),ye("change",function(l){return a.seleccionarExposicion(l)}),L(46,"option",30),Q(47,"Todas las exposiciones"),O(),Dt(48,yRe,2,2,"option",31),O()()(),L(49,"form",32),ye("submit",function(){return!1}),L(50,"div",33)(51,"input",34,35),ye("keydown.enter",function(){zt(o);let l=gc(52);return a.buscarSala(l.value),Vt(!1)}),O(),L(53,"div",36)(54,"span",37),ye("click",function(){zt(o);let l=gc(52);return Vt(a.buscarSala(l.value))}),ce(55,"span",38),O()()()()(),L(56,"div",39)(57,"div",40)(58,"table",41)(59,"thead",42)(60,"tr")(61,"th"),Q(62,"T\xEDtulo"),O(),L(63,"th"),Q(64,"Descripci\xF3n"),O(),L(65,"th"),Q(66,"Exposici\xF3n"),O(),L(67,"th"),Q(68,"Estado"),O(),ce(69,"th",43),O()(),L(70,"tbody"),Dt(71,xRe,17,6,"tr",44),O()()()(),L(72,"div",45)(73,"div",46)(74,"div",47),Q(75," Mostrando "),L(76,"b"),Q(77),O(),Q(78," de "),L(79,"b"),Q(80),O(),Q(81," resultados "),O()(),L(82,"div",48)(83,"div",48)(84,"div",49)(85,"ul",50)(86,"li",51)(87,"a",52),ye("click",function(){return a.numPagina>1&&a.guardarPagina(a.numPagina-1)}),Q(88,"Anterior"),O()(),Dt(89,_Re,4,3,"ng-container",44),L(90,"li",53)(91,"a",52),ye("click",function(){return a.numPagina<a.calcularPaginas().length&&a.guardarPagina(a.numPagina+1)}),Q(92,"Siguiente"),O()()()()()()()()()()()}n&2&&(ie(4),Le("ngIf",a.showAlert),ie(1),Le("ngIf",a.showAlert2),ie(27),Le("value",a.cantidadPorPagina),ie(13),Le("value",a.exposicionSeleccionada),ie(3),Le("ngForOf",a.exposiciones),ie(23),Le("ngForOf",a.salas),ie(6),Ug("",a.calcularRango().primerResultado," - ",a.calcularRango().ultimoResultado,""),ie(3),We(a.totalSalas),ie(6),so("disabled",a.numPagina===1),ie(3),Le("ngForOf",a.calcularPaginas()),ie(1),so("disabled",a.numPagina===a.calcularPaginas().length))},dependencies:[lr,ia,vn,xf],styles:[".input-group-text[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();var Hv=Bg(zne(),1);var mPe=["qrcElement"],RM=(()=>{let e=class e{constructor(r,n){this.renderer=r,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Za,this.context=null}ngOnChanges(){return al(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(r){return this.allowEmptyString===!1?!(typeof r>"u"||r===""||r==="null"||r===null):!(typeof r>"u")}toDataURL(r){return new Promise((n,a)=>{(0,Hv.toDataURL)(this.qrdata,r,(o,s)=>{o?a(o):n(s)})})}toCanvas(r,n){return new Promise((a,o)=>{(0,Hv.toCanvas)(r,this.qrdata,n,s=>{s?o(s):a("success")})})}toSVG(r){return new Promise((n,a)=>{(0,Hv.toString)(this.qrdata,r,(o,s)=>{o?a(o):n(s)})})}renderElement(r){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,r)}createQRCode(){return al(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let r={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,a=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let s=this.renderer.createElement("canvas");this.context=s.getContext("2d"),this.toCanvas(s,r).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(s,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(s,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(o,a),n!==this.centerImage.src&&(this.centerImage.src=n),a!==this.centerImage.height&&(this.centerImage.height=a),o!==this.centerImage.width&&(this.centerImage.width=o);let l=this.centerImage;l&&(l.onload=()=>{this.context?.drawImage(l,s.width/2-o/2,s.height/2-a/2,o,a)})}this.renderElement(s),this.emitQRCodeURL(s)}).catch(l=>{console.error("[angularx-qrcode] canvas error:",l)});break}case"svg":{let s=this.renderer.createElement("div");this.toSVG(r).then(l=>{this.renderer.setProperty(s,"innerHTML",l);let c=s.firstChild;this.renderer.setAttribute(c,"height",`${this.width}`),this.renderer.setAttribute(c,"width",`${this.width}`),this.renderElement(c),this.emitQRCodeURL(c)}).catch(l=>{console.error("[angularx-qrcode] svg error:",l)});break}case"url":case"img":default:{let s=this.renderer.createElement("img");this.toDataURL(r).then(l=>{this.alt&&s.setAttribute("alt",this.alt),this.ariaLabel&&s.setAttribute("aria-label",this.ariaLabel),s.setAttribute("src",l),this.title&&s.setAttribute("title",this.title),this.renderElement(s),this.emitQRCodeURL(s)}).catch(l=>{console.error("[angularx-qrcode] img/url error:",l)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})}emitQRCodeURL(r){let n=r.constructor.name;if(n===SVGSVGElement.name){let o=r.outerHTML,s=new Blob([o],{type:"image/svg+xml"}),l=URL.createObjectURL(s),c=this.sanitizer.bypassSecurityTrustUrl(l);this.qrCodeURL.emit(c);return}let a="";n===HTMLCanvasElement.name&&(a=r.toDataURL("image/png")),n===HTMLImageElement.name&&(a=r.src),fetch(a).then(o=>o.blob()).then(o=>URL.createObjectURL(o)).then(o=>this.sanitizer.bypassSecurityTrustUrl(o)).then(o=>{this.qrCodeURL.emit(o)}).catch(o=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+o)})}};e.\u0275fac=function(n){return new(n||e)(xe(ah),xe(kD))},e.\u0275cmp=St({type:e,selectors:[["qrcode"]],viewQuery:function(n,a){if(n&1&&gu(mPe,7),n&2){let o;vc(o=yc())&&(a.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[No],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,a){n&1&&ce(0,"div",null,0),n&2&&pa(a.cssClass)},encapsulation:2,changeDetection:0});let i=e;return i})(),Lp=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({});let i=e;return i})();var Bl=(()=>{let e=class e{constructor(){}transformarFecha(r,n){let a=r.getDate(),o=r.getMonth()+1,s=r.getFullYear(),l=a<10?"0"+a:a,c=o<10?"0"+o:o;switch(n){case"es":case"va":return`${l}-${c}-${s}`;case"en":return`${c}-${l}-${s}`;case"html":return`${s}-${c}-${l}`;default:return`${l}-${c}-${s}`}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ms=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/idioma",this.headers=new Ja({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.options={headers:this.headers}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getAll(){return this.http.get(this.apiUrl,this.options)}createNew(r){return this.http.post(this.apiUrl,r,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Hne=(i,e)=>e.id;function gPe(i,e){if(i&1){let t=Li();L(0,"div",63)(1,"span"),Q(2,"La exposici\xF3n ha sido registrada con \xE9xito."),O(),L(3,"button",64),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",11),Q(5,"\xD7"),O()()()}}function vPe(i,e){if(i&1){let t=Li();L(0,"div",65)(1,"span"),Q(2,"La exposici\xF3n ha sido borrada con \xE9xito."),O(),L(3,"button",64),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",11),Q(5,"\xD7"),O()()()}}function yPe(i,e){if(i&1&&(L(0,"option",66),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.idioma)}}function xPe(i,e){if(i&1&&(L(0,"option",66),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function _Pe(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td",67),ce(2,"img",68),O(),L(3,"td",69),Q(4),O(),L(5,"td",70),Q(6),O(),L(7,"td",70),Q(8),O(),L(9,"td",71)(10,"span"),Q(11),gf(12,"uppercase"),O()(),L(13,"td",72)(14,"div",73)(15,"button",74),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(16,"span",75),O(),L(17,"button",76),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToViewPie(a.id))}),ce(18,"span",77),O(),L(19,"button",78),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToEditPie(a.id))}),ce(20,"span",79),O(),L(21,"button",80),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(22,"span",81),O()()()()}if(i&2){let t=e.$implicit,r=it();ie(2),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/piezas/defualt_image.png",wr),ie(2),We(t.nombre),ie(2),We(t.sala_nombre),ie(2),We(t.exposicion_nombre),ie(2),Ub("badge badge-pill ",t.estado_id=="Publico"?"badge-Light":"badge-warning",""),ie(1),_n(" ",vf(12,8,t.estado_id)," ")}}function wPe(i,e){if(i&1){let t=Li();L(0,"li",82),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina-2))}),L(1,"a",59),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina-2)}}function bPe(i,e){if(i&1){let t=Li();L(0,"li",82),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina-1))}),L(1,"a",59),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina-1)}}function SPe(i,e){if(i&1){let t=Li();L(0,"li",82),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina+1))}),L(1,"a",59),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina+1)}}function CPe(i,e){if(i&1){let t=Li();L(0,"li",82),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina+2))}),L(1,"a",59),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina+2)}}var Qne=(()=>{let e=class e{constructor(r,n,a,o,s,l,c){this.pieceService=r,this.salaService=n,this.dateService=a,this.breadcrumbService=o,this.router=s,this.idiomaService=l,this.alertService=c,this.pieces=[],this.piecesAPI=[],this.salas=[],this.idiomas=[],this.paginacion={pagina:1,desde:1,hasta:10,total:0,totalPag:1},this.filtros={nombre:new wt(""),sala:new wt("0"),numero:new wt(10),pagina:1,idioma:new wt("")},this.idToDelete="",this.baseAPI=Fi.apiURL,this.showAlert=!1,this.showAlert2=!1}ngOnInit(){this.idiomaService.getAll().subscribe(r=>{this.idiomas=r,this.filtros.idioma.setValue(r[1].id),this.pieceService.getLista(this.filtros.idioma.value||"es",this.filtros).subscribe(n=>{this.pieces=n.piezas,this.piecesAPI=n.piezas,this.paginacion=n.pagination,console.log(n)})}),this.salaService.getAll().subscribe(r=>{this.salas=r}),this.showAlert=this.alertService.getAlertPiezas(),setTimeout(()=>{this.alertService.showAlertPiezas(!1),this.showAlert=this.alertService.getAlertPiezas()},3e3),this.breadcrumbService.updateBreadcrumb("Piezas",["Inicio","Piezas"])}goToViewPie(r){let n=this.router.createUrlTree(["../pieza",r,this.filtros.idioma.value]).toString();window.open(n,"_blank")}goToEditPie(r){this.router.navigate(["/administrador/piezas/editar",r])}goToCreatePie(){this.router.navigate(["/administrador/piezas/crear"])}deletePie(){this.pieceService.deleteOne(this.idToDelete).subscribe(r=>{console.log(r);let n=this.pieces.findIndex(a=>a.id===this.idToDelete);this.pieces.splice(n,1),this.alertService.showAlertPiezas(!0),this.showAlert2=this.alertService.getAlertPiezas(),setTimeout(()=>{console.log("Borrado"),this.alertService.showAlertPiezas(!1),this.showAlert2=this.alertService.getAlertPiezas()},3e3)})}formatearFecha(r){let n=new Date(r);return this.dateService.transformarFecha(n,"es")}filtrarPiezas(){this.pieceService.getLista(this.filtros.idioma.value||"es",this.filtros).subscribe(r=>{this.pieces=r.piezas,this.piecesAPI=r.piezas,this.paginacion=r.pagination})}goToPag(r){r>this.paginacion.totalPag||(this.filtros.pagina=r,this.filtrarPiezas())}irAlEnlace(){let r=this.router.createUrlTree(["../pieza",this.idToDelete,this.filtros.idioma.value]).toString();window.open(r,"_blank")}generarCodigoQR(r){}convertBase64ToBlob(r){let n=r.split(";base64,"),a=n[0].split(":")[1],o=window.atob(n[1]),s=new Uint8Array(o.length);for(let l=0;l<o.length;++l)s[l]=o.charCodeAt(l);return new Blob([s],{type:a})}descargarQr(){let r=null;if(r=document.querySelector("canvas")?.toDataURL("image/png"),r){let n=this.convertBase64ToBlob(r),a=new Blob([n],{type:"image/png"}),o=window.URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download="qr-pieza-"+this.idToDelete,s.click()}}closeAlert(){this.showAlert=!1}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Tn),xe(Bl),xe(vr),xe(bi),xe(Ms),xe(Il))},e.\u0275cmp=St({type:e,selectors:[["app-piezas"]],standalone:!0,features:[gr],decls:123,vars:25,consts:[[1,"boton-arriba"],["type","button",1,"btn","btn-dark","btn-md",2,"border-radius","1.5rem",3,"click"],[1,"mdi","mdi-plus"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-success","role","alert",4,"ngIf"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-danger","role","alert",4,"ngIf"],["id","modalVerQR","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","text-center"],[1,"qrcodeImage"],[3,"qrdata","elementType","errorCorrectionLevel","margin","scale","width"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-Light",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-Light",2,"margin-left","10px",3,"click"],["id","modalBorrarPieza","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"row"],[1,"pl-2","pr-2"],["name","zero_config_length","aria-controls","zero_config",1,"form-control","form-control-sm",3,"formControl","change"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"ml-auto"],[1,"col-md-9"],[1,"select2","form-control","custom-select",2,"width","160%",3,"formControl","change"],[1,"select2","form-control","custom-select",2,"width","180px",3,"formControl","change"],["value","0"],[2,"margin-right","10px"],["id","zero_config_filter",1,"dataTables_filter","input-group"],["type","search","placeholder","Buscar","aria-controls","zero_config",1,"form-control","form-control-sm",2,"font-size","14px",3,"formControl","change"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"col-12"],["id","zero_config",1,"table","w-100"],[1,"thead-light"],[1,"last-column"],[4,"ngFor","ngForOf"],[1,"row",2,"padding-top","10px"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info"],[1,"ml-auto",2,"margin-right","11px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous",3,"click"],[1,"page-link"],["class","paginate_button page-item",3,"click",4,"ngIf"],[1,"paginate_button","page-item","active"],["id","zero_config_next",1,"paginate_button","page-item","next",3,"click"],["role","alert",1,"alert","alert-success",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],["type","button","aria-label","Close",1,"close",3,"click"],["role","alert",1,"alert","alert-danger",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],[3,"value"],[1,"info","align-middle",2,"width","90px"],["alt"," Image",1,"imagen-pieza","img-fluid",3,"src"],[1,"info","align-middle",2,"max-width","150px"],[1,"info","align-middle",2,"max-width","140px"],[1,"info","align-middle",2,"max-width","100px"],[1,"align-middle"],[1,"d-inline-flex","justify-content-between"],["type","button","data-toggle","modal","data-target","#modalVerQR",1,"btn","btn-outline-info","btn-md",3,"click"],[1,"mdi","mdi-qrcode-scan"],["type","button",1,"btn","btn-outline-secondary","btn-md",3,"click"],[1,"mdi","mdi-eye"],["type","button",1,"btn","btn-outline-warning","btn-md",3,"click"],[1,"mdi","mdi-pencil"],["type","button","data-toggle","modal","data-target","#modalBorrarPieza",1,"btn","btn-outline-danger","btn-md",3,"click"],[1,"mdi","mdi-delete"],[1,"paginate_button","page-item",3,"click"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"button",1),ye("click",function(){return a.goToCreatePie()}),L(2,"span",2),Q(3," CREAR NUEVA"),O()()(),Dt(4,gPe,6,0,"div",3)(5,vPe,6,0,"div",4),L(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9),Q(11,"Informaci\xF3n QR"),O(),L(12,"button",10)(13,"span",11),Q(14,"\xD7"),O()()(),L(15,"div",12)(16,"div",13),ce(17,"qrcode",14),O()(),L(18,"div",15)(19,"button",16),ye("click",function(){return a.irAlEnlace()}),Q(20,"Ir al enlace"),O(),L(21,"button",17),ye("click",function(){return a.descargarQr()}),Q(22,"Descargar QR"),O()()()()(),L(23,"div",18)(24,"div",6)(25,"div",7)(26,"div",8)(27,"h5",19),Q(28,"Borrar pieza"),O(),L(29,"button",10)(30,"span",11),Q(31,"\xD7"),O()()(),L(32,"div",20)(33,"p"),Q(34," \xBFSeguro de que quiere eliminar esta pieza? "),O()(),L(35,"div",21)(36,"button",22),Q(37,"Cancelar"),O(),L(38,"button",23),ye("click",function(){return a.deletePie()}),Q(39,"Borrar pieza"),O()()()()(),L(40,"div",24)(41,"div",25)(42,"h5",26),Q(43,"Listado"),O(),ce(44,"br"),L(45,"div",27)(46,"div",28)(47,"div",29)(48,"div")(49,"label"),Q(50,"Mostrar"),O()(),L(51,"div",30)(52,"select",31),ye("change",function(){return a.filtrarPiezas()}),L(53,"option",32),Q(54,"5"),O(),L(55,"option",33),Q(56,"10"),O(),L(57,"option",34),Q(58,"25"),O(),L(59,"option",35),Q(60,"50"),O(),L(61,"option",36),Q(62,"100"),O()()(),L(63,"div")(64,"label"),Q(65,"entradas"),O()(),L(66,"div",37)(67,"div",38)(68,"select",39),ye("change",function(){return a.filtrarPiezas()}),Lr(69,yPe,2,2,"option",66,Hne),O()()(),L(71,"div")(72,"div",38)(73,"select",40),ye("change",function(){return a.filtrarPiezas()}),L(74,"option",41),Q(75,"Todas las salas"),O(),Lr(76,xPe,2,2,"option",66,Hne),O()()(),L(78,"div",42)(79,"div",43)(80,"input",44),ye("change",function(){return a.filtrarPiezas()}),O(),L(81,"div",45)(82,"span",46),ye("click",function(){return a.filtrarPiezas()}),ce(83,"span",47),O()()()()(),ce(84,"br"),L(85,"div",29)(86,"div",48)(87,"table",49)(88,"thead",50)(89,"tr")(90,"th"),Q(91,"Foto"),O(),L(92,"th"),Q(93,"Nombre"),O(),L(94,"th"),Q(95,"Sala"),O(),L(96,"th"),Q(97,"Exposici\xF3n"),O(),L(98,"th"),Q(99,"Estado"),O(),ce(100,"th",51),O()(),L(101,"tbody"),Dt(102,_Pe,23,10,"tr",52),O()()()(),L(103,"div",53)(104,"div")(105,"div",54),Q(106),O()(),L(107,"div",55)(108,"div",56)(109,"ul",57)(110,"li",58),ye("click",function(){return a.goToPag(a.paginacion.pagina-1)}),L(111,"a",59),Q(112,"Anterior"),O()(),Dt(113,wPe,3,1,"li",60)(114,bPe,3,1,"li",60),L(115,"li",61)(116,"a",59),Q(117),O()(),Dt(118,SPe,3,1,"li",60)(119,CPe,3,1,"li",60),L(120,"li",62),ye("click",function(){return a.goToPag(a.paginacion.pagina+1)}),L(121,"a",59),Q(122,"Siguiente"),O()()()()()()()()()()),n&2&&(ie(4),Le("ngIf",a.showAlert),ie(1),Le("ngIf",a.showAlert2),ie(12),Le("qrdata",a.baseAPI.substr(0,a.baseAPI.length-4)+"/pieza/"+a.idToDelete+"/es")("elementType","canvas")("errorCorrectionLevel","M")("margin",1)("scale",1)("width",300),ie(35),Le("formControl",a.filtros.numero),ie(16),Le("formControl",a.filtros.idioma),ie(1),Or(a.idiomas),ie(4),Le("formControl",a.filtros.sala),ie(3),Or(a.salas),ie(4),Le("formControl",a.filtros.nombre),ie(22),Le("ngForOf",a.pieces),ie(4),Hb(" Mostrando ",a.paginacion.desde,"-",a.paginacion.hasta," de ",a.paginacion.total," entradas "),ie(4),pa(a.paginacion.pagina-1>0?"":"disabled"),ie(3),Le("ngIf",a.paginacion.pagina-2>0),ie(1),Le("ngIf",a.paginacion.pagina-1>0),ie(3),We(a.paginacion.pagina),ie(1),Le("ngIf",a.paginacion.pagina+1<=a.paginacion.totalPag),ie(1),Le("ngIf",a.paginacion.pagina+2<=a.paginacion.totalPag),ie(1),pa(a.paginacion.pagina+1<=a.paginacion.totalPag?"":"disabled"))},dependencies:[lr,ia,vn,xf,Wr,na,aa,En,wa,Gn,vu,sl,Lp,RM],styles:[".btn[_ngcontent-%COMP%]{margin:1px}"]});let i=e;return i})();var os=(()=>{let e=class e{constructor(r){this.http=r}getAllEstados(){return this.http.get(Fi.apiURL+"/estados")}};e.\u0275fac=function(n){return new(n||e)(Nt(Un))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function EPe(i,e){i&1&&(L(0,"div",27),Q(1,"El nombre no puede estar vac\xEDo"),O())}function TPe(i,e){if(i&1&&(L(0,"option",28),Q(1),O()),i&2){let t=e.$implicit;Le("ngValue",t.id),ie(1),We(t.nombre)}}function MPe(i,e){i&1&&(L(0,"div",27),Q(1,"Se debe seleccionar una exposici\xF3n"),O())}function IPe(i,e){if(i&1&&(L(0,"option",28),Q(1),O()),i&2){let t=e.$implicit;Le("ngValue",t.nombre),ie(1),We(t.nombre)}}function BPe(i,e){i&1&&(L(0,"div",27),Q(1,"Se debe seleccionar un estado"),O())}function DPe(i,e){if(i&1){let t=Li();L(0,"div",1)(1,"form",2),ye("submit",function(n){zt(t);let a=it();return Vt(a.editarSala(n))}),L(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h3",8),Q(8,"Datos"),O(),ce(9,"br")(10,"br"),L(11,"div",9)(12,"label",10),Q(13,"Nombre: "),O(),L(14,"div",11),ce(15,"input",12),Dt(16,EPe,2,0,"div",13),O()(),L(17,"div",14)(18,"label",15),Q(19,"Descripci\xF3n: "),O(),L(20,"div",11),ce(21,"textarea",16),O()(),L(22,"div",9)(23,"label",10),Q(24,"Exposici\xF3n: "),O(),L(25,"div",11)(26,"select",17)(27,"option",18),Q(28,"Seleccionar una exposici\xF3n"),O(),Dt(29,TPe,2,2,"option",19),O(),Dt(30,MPe,2,0,"div",13),O()(),L(31,"div",9)(32,"label",10),Q(33,"Estado: "),O(),L(34,"div",20)(35,"select",21)(36,"option",18),Q(37,"Seleccionar un estado"),O(),Dt(38,IPe,2,2,"option",19),O(),Dt(39,BPe,2,0,"div",13),O()()()()()()(),L(40,"div",22)(41,"button",23)(42,"span"),Q(43,"GUARDAR CAMBIOS"),O()()(),L(44,"div",24)(45,"div",25)(46,"button",26),ye("click",function(){zt(t);let n=it();return Vt(n.volver())}),Q(47,"Volver"),O()()()()()}if(i&2){let t=it();ie(1),Le("formGroup",t.nuevaSala),ie(15),Le("ngIf",t.formularioEnviado&&t.nombre_control.invalid),ie(13),Le("ngForOf",t.exposiciones),ie(1),Le("ngIf",t.formularioEnviado&&t.exposicion_control.invalid),ie(8),Le("ngForOf",t.estadosPosibles),ie(1),Le("ngIf",t.formularioEnviado&&t.estado_control.invalid)}}var Gne=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u,h){this.route=r,this.salaService=n,this.pieceService=a,this.exposicionService=o,this.estadosService=s,this.router=l,this.breadcrumbService=c,this.location=u,this.formBuilder=h,this.exposiciones=[],this.formularioEnviado=!1,this.estadosPosibles=[],this.pieces=[],this.idToEdit=null,this.sala=null,this.exposicion=null,this.exposicionNombre=null}ngOnInit(){this.route.paramMap.subscribe(r=>{let n=this.route.snapshot.paramMap.get("id");n!==null&&(this.idToEdit=n,this.salaService.getOne(this.idToEdit).subscribe(a=>{this.sala=a,this.sala.estado_id=a.estado_id,this.breadcrumbService.updateBreadcrumb("Editar salas",["Inicio","Salas",this.sala.nombre,"Editar"]),this.initForm()}))}),this.pieceService.getAll().subscribe(r=>{this.pieces=r}),this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r}),this.estadosService.getAllEstados().subscribe(r=>{this.estadosPosibles=r}),this.sala&&this.sala.exposicion_id&&this.exposicionService.getOne(this.sala.exposicion_id).subscribe(r=>{this.exposicion=r,this.exposicionNombre=r.nombre},r=>{console.error("Error al obtener la exposici\xF3n:",r)})}get nombre_control(){return this.nuevaSala.controls.nombre}get estado_control(){return this.nuevaSala.controls.estado_id}get exposicion_control(){return this.nuevaSala.controls.exposicion}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}initForm(){this.nuevaSala=new ra({nombre:new wt(this.sala?.nombre??"",[vs.required]),descripcion:new wt(this.sala?.descripcion??""),exposicion:new wt(this.sala?.exposicion_id??"",this.noZeroValidator()),estado_id:new wt(this.sala?.estado_id??"",this.noZeroValidator())})}navigateToPiece(r){this.router.navigate(["/sala",r])}editarSala(r){if(r.preventDefault(),this.formularioEnviado=!0,!!this.nuevaSala.valid)if(this.idToEdit!==void 0&&this.idToEdit!==null){let n=this.nuevaSala.value.exposicion??1;console.log(n),this.salaService.editOne(this.idToEdit,{nombre:this.nuevaSala.value.nombre||"",descripcion:this.nuevaSala.value.descripcion||"",exposicion_id:n||"",estado_id:this.nuevaSala.value.estado_id||""}).subscribe(a=>{console.log(a),this.router.navigate(["/administrador/salas"])})}else console.error("Error: idToEdit no est\xE1 definido o es nulo.")}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(Tn),xe(ba),xe(sn),xe(os),xe(bi),xe(vr),xe(Zn),xe(VH))},e.\u0275cmp=St({type:e,selectors:[["app-editar-salas"]],standalone:!0,features:[gr],decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"tab-content","tabcontent-border",2,"min-height","300px"],[1,"p-40"],[1,"card-title"],[1,"form-group","row"],[1,"col-md-2",2,"font-size","15px"],[1,"col-md-8"],["type","text","formControlName","nombre","placeholder","Nombre de la sala",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-2"],["type","text","formControlName","descripcion","placeholder","Descripci\xF3n de la sala",1,"form-control",2,"height","80px"],["formControlName","exposicion",1,"select2","form-control","custom-select",2,"width","40%"],["value","0","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-9"],["formControlName","estado_id",1,"form-select","form-control",2,"width","250px"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"text-danger"],[3,"ngValue"]],template:function(n,a){n&1&&Dt(0,DPe,48,6,"div",0),n&2&&Le("ngIf",a.sala)},dependencies:[lr,ia,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o]});let i=e;return i})();var RPe=(i,e)=>e.nombre;function PPe(i,e){i&1&&(L(0,"div",26),Q(1,"El nombre no puede estar vac\xEDo"),O())}function LPe(i,e){if(i&1&&(L(0,"option",27),Q(1),O()),i&2){let t=e.$implicit;Le("ngValue",t.id),ie(1),We(t.nombre)}}function OPe(i,e){i&1&&(L(0,"div",26),Q(1,"Se debe seleccionar una exposici\xF3n"),O())}function FPe(i,e){if(i&1&&(L(0,"option",28),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function NPe(i,e){i&1&&(L(0,"div",26),Q(1,"Se debe seleccionar un estado"),O())}var Wne=(()=>{let e=class e{constructor(r,n,a,o,s,l,c){this.salaService=r,this.estadoService=n,this.router=a,this.breadcrumbService=o,this.location=s,this.alertService=l,this.exposicionService=c,this.exposiciones=[],this.estadosPosibles=[],this.formularioEnviado=!1,this.nuevaSala=new ra({nombre:new wt("",[vs.required]),descripcion:new wt(""),exposicion:new wt("0",this.noZeroValidator()),estado:new wt("0",this.noZeroValidator())})}ngOnInit(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r}),this.estadoService.getAllEstados().subscribe(r=>{this.estadosPosibles=r}),this.breadcrumbService.updateBreadcrumb("Crear sala",["Inicio","Salas","Crear"])}get nombre(){return this.nuevaSala.controls.nombre}get estado(){return this.nuevaSala.controls.estado}get exposicion(){return this.nuevaSala.controls.exposicion}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}crearSala(r){r.preventDefault(),this.formularioEnviado=!0,this.nuevaSala.valid&&this.salaService.createNew({nombre:this.nuevaSala.value.nombre||"",descripcion:this.nuevaSala.value.descripcion||"",exposicion_id:this.nuevaSala.value.exposicion||"",estado_id:this.nuevaSala.value.estado||""}).subscribe(n=>{console.log(n),this.router.navigate(["/administrador/salas"]),this.alertService.showAlertSalas(!0)})}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(Tn),xe(os),xe(bi),xe(vr),xe(Zn),xe(Il),xe(sn))},e.\u0275cmp=St({type:e,selectors:[["app-crear-sala"]],standalone:!0,features:[gr],decls:49,vars:5,consts:[[1,"container-fluid"],[3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"tab-content","tabcontent-border",2,"min-height","350px"],[1,"p-40"],[1,"card-title"],[1,"form-group","row"],[1,"col-md-2",2,"font-size","15px"],[1,"col-md-8"],["type","text","formControlName","nombre","placeholder","Nombre de la sala",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-2"],["type","text","formControlName","descripcion","placeholder","Descripci\xF3n de la sala",1,"form-control",2,"height","80px"],["formControlName","exposicion",1,"form-select","form-control",2,"width","auto"],["value","0","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-9"],["formControlName","estado",1,"form-select","form-control",2,"width","auto"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"text-danger"],[3,"ngValue"],[3,"value"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.crearSala(s)}),L(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),Q(8,"Datos"),O(),ce(9,"br")(10,"br"),L(11,"div",8)(12,"label",9),Q(13,"Nombre: "),O(),L(14,"div",10),ce(15,"input",11),Dt(16,PPe,2,0,"div",12),O()(),L(17,"div",13)(18,"label",14),Q(19,"Descripci\xF3n: "),O(),L(20,"div",10),ce(21,"textarea",15),O()(),L(22,"div",8)(23,"label",9),Q(24,"Exposici\xF3n: "),O(),L(25,"div",10)(26,"select",16)(27,"option",17),Q(28,"Seleccionar una exposici\xF3n"),O(),Dt(29,LPe,2,2,"option",18),O(),Dt(30,OPe,2,0,"div",12),O()(),L(31,"div",8)(32,"label",9),Q(33,"Estado: "),O(),L(34,"div",19)(35,"select",20)(36,"option",17),Q(37,"Seleccionar un estado"),O(),Lr(38,FPe,2,2,"option",28,RPe),O(),Dt(40,NPe,2,0,"div",12),O()()()()()()(),L(41,"div",21)(42,"button",22)(43,"span"),Q(44,"CREAR"),O()()(),L(45,"div",23)(46,"div",24)(47,"button",25),ye("click",function(){return a.volver()}),Q(48,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.nuevaSala),ie(15),Le("ngIf",a.formularioEnviado&&a.nombre.invalid),ie(13),Le("ngForOf",a.exposiciones),ie(1),Le("ngIf",a.formularioEnviado&&a.exposicion.invalid),ie(8),Or(a.estadosPosibles),ie(2),Le("ngIf",a.formularioEnviado&&a.estado.invalid))},dependencies:[lr,ia,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o]});let i=e;return i})();var L5="160";var UPe=0,jne=1,kPe=2;var Poe=1,O5=2,Ud=3,kh=0,Dl=1,Ku=2;var Gp=0,c1=1,Kne=2,Xne=3,Yne=4,zPe=5,ng=100,VPe=101,HPe=102,qne=103,Zne=104,QPe=200,GPe=201,WPe=202,jPe=203,e5=204,t5=205,KPe=206,XPe=207,YPe=208,qPe=209,ZPe=210,JPe=211,$Pe=212,eLe=213,tLe=214,iLe=0,rLe=1,nLe=2,sI=3,aLe=4,oLe=5,sLe=6,lLe=7,F5=0,cLe=1,uLe=2,Wp=0,hLe=1,dLe=2,fLe=3,pLe=4,ALe=5,mLe=6,Jne="attached",gLe="detached",$ne=300,d1=301,f1=302,Sw=303,i5=304,OI=306,lg=1e3,Js=1001,Cw=1002,Bo=1003,lI=1004;var yw=1005;var io=1006,N5=1007;var Qd=1008;var jp=1009,vLe=1010,yLe=1011,U5=1012,Loe=1013,Hp=1014,sc=1015,zh=1016,Ooe=1017,Foe=1018,og=1020,xLe=1021,qc=1023,_Le=1024,wLe=1025,sg=1026,p1=1027,bLe=1028,Noe=1029,SLe=1030,Uoe=1031,koe=1033,_k=33776,wk=33777,bk=33778,Sk=33779,eae=35840,tae=35841,iae=35842,rae=35843,zoe=36196,nae=37492,aae=37496,oae=37808,sae=37809,lae=37810,cae=37811,uae=37812,hae=37813,dae=37814,fae=37815,pae=37816,Aae=37817,mae=37818,gae=37819,vae=37820,yae=37821,Ck=36492,xae=36494,_ae=36495,CLe=36283,wae=36284,bae=36285,Sae=36286;var A1=2300,cg=2301,Ek=2302,Cae=2400,Eae=2401,Tae=2402,ELe=2500;var Voe=0,FI=1,Rw=2,Hoe=3e3,Hd=3001,TLe=3200,MLe=3201,k5=0,ILe=1,Zc="",La="srgb",ro="srgb-linear",z5="display-p3",NI="display-p3-linear",cI="linear",ma="srgb",uI="rec709",hI="p3";var Qv=7680;var Mae=519,BLe=512,DLe=513,RLe=514,Qoe=515,PLe=516,LLe=517,OLe=518,FLe=519,r5=35044;var Iae="300 es",n5=1035,Vd=2e3,dI=2001,Kp=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let n=this._listeners[e];if(n!==void 0){let a=n.indexOf(t);a!==-1&&n.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let r=this._listeners[e.type];if(r!==void 0){e.target=this;let n=r.slice(0);for(let a=0,o=n.length;a<o;a++)n[a].call(this,e);e.target=null}}},Is=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Bae=1234567,xw=Math.PI/180,m1=180/Math.PI;function Xu(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Is[i&255]+Is[i>>8&255]+Is[i>>16&255]+Is[i>>24&255]+"-"+Is[e&255]+Is[e>>8&255]+"-"+Is[e>>16&15|64]+Is[e>>24&255]+"-"+Is[t&63|128]+Is[t>>8&255]+"-"+Is[t>>16&255]+Is[t>>24&255]+Is[r&255]+Is[r>>8&255]+Is[r>>16&255]+Is[r>>24&255]).toLowerCase()}function ss(i,e,t){return Math.max(e,Math.min(t,i))}function V5(i,e){return(i%e+e)%e}function NLe(i,e,t,r,n){return r+(i-e)*(n-r)/(t-e)}function ULe(i,e,t){return i!==e?(t-i)/(e-i):0}function _w(i,e,t){return(1-t)*i+t*e}function kLe(i,e,t,r){return _w(i,e,1-Math.exp(-t*r))}function zLe(i,e=1){return e-Math.abs(V5(i,e*2)-e)}function VLe(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function HLe(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function QLe(i,e){return i+Math.floor(Math.random()*(e-i+1))}function GLe(i,e){return i+Math.random()*(e-i)}function WLe(i){return i*(.5-Math.random())}function jLe(i){i!==void 0&&(Bae=i);let e=Bae+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function KLe(i){return i*xw}function XLe(i){return i*m1}function a5(i){return(i&i-1)===0&&i!==0}function YLe(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function fI(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function qLe(i,e,t,r,n){let a=Math.cos,o=Math.sin,s=a(t/2),l=o(t/2),c=a((e+r)/2),u=o((e+r)/2),h=a((e-r)/2),d=o((e-r)/2),f=a((r-e)/2),m=o((r-e)/2);switch(n){case"XYX":i.set(s*u,l*h,l*d,s*c);break;case"YZY":i.set(l*d,s*u,l*h,s*c);break;case"ZXZ":i.set(l*h,l*d,s*u,s*c);break;case"XZX":i.set(s*u,l*m,l*f,s*c);break;case"YXY":i.set(l*f,s*u,l*m,s*c);break;case"ZYZ":i.set(l*m,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Uh(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Yn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var Goe={DEG2RAD:xw,RAD2DEG:m1,generateUUID:Xu,clamp:ss,euclideanModulo:V5,mapLinear:NLe,inverseLerp:ULe,lerp:_w,damp:kLe,pingpong:zLe,smoothstep:VLe,smootherstep:HLe,randInt:QLe,randFloat:GLe,randFloatSpread:WLe,seededRandom:jLe,degToRad:KLe,radToDeg:XLe,isPowerOfTwo:a5,ceilPowerOfTwo:YLe,floorPowerOfTwo:fI,setQuaternionFromProperEuler:qLe,normalize:Yn,denormalize:Uh},Hr=class i{constructor(e=0,t=0){i.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(ss(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),n=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*n+e.x,this.y=a*n+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ur=class i{constructor(e,t,r,n,a,o,s,l,c){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,n,a,o,s,l,c)}set(e,t,r,n,a,o,s,l,c){let u=this.elements;return u[0]=e,u[1]=n,u[2]=s,u[3]=t,u[4]=a,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,a=this.elements,o=r[0],s=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],m=r[8],y=n[0],g=n[3],x=n[6],b=n[1],S=n[4],E=n[7],D=n[2],B=n[5],F=n[8];return a[0]=o*y+s*b+l*D,a[3]=o*g+s*S+l*B,a[6]=o*x+s*E+l*F,a[1]=c*y+u*b+h*D,a[4]=c*g+u*S+h*B,a[7]=c*x+u*E+h*F,a[2]=d*y+f*b+m*D,a[5]=d*g+f*S+m*B,a[8]=d*x+f*E+m*F,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*s*c-r*a*u+r*s*l+n*a*c-n*o*l}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,d=s*l-u*a,f=c*a-o*l,m=t*h+r*d+n*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/m;return e[0]=h*y,e[1]=(n*c-u*r)*y,e[2]=(s*r-n*o)*y,e[3]=d*y,e[4]=(u*t-n*l)*y,e[5]=(n*a-s*t)*y,e[6]=f*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*a)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,a,o,s){let l=Math.cos(a),c=Math.sin(a);return this.set(r*l,r*c,-r*(l*o+c*s)+o+e,-n*c,n*l,-n*(-c*o+l*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Tk.makeScale(e,t)),this}rotate(e){return this.premultiply(Tk.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Tk=new Ur;function Woe(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Ew(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function ZLe(){let i=Ew("canvas");return i.style.display="block",i}var Dae={};function ww(i){i in Dae||(Dae[i]=!0,console.warn(i))}var Rae=new Ur().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Pae=new Ur().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),PM={[ro]:{transfer:cI,primaries:uI,toReference:i=>i,fromReference:i=>i},[La]:{transfer:ma,primaries:uI,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[NI]:{transfer:cI,primaries:hI,toReference:i=>i.applyMatrix3(Pae),fromReference:i=>i.applyMatrix3(Rae)},[z5]:{transfer:ma,primaries:hI,toReference:i=>i.convertSRGBToLinear().applyMatrix3(Pae),fromReference:i=>i.applyMatrix3(Rae).convertLinearToSRGB()}},JLe=new Set([ro,NI]),bn={enabled:!0,_workingColorSpace:ro,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!JLe.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;let r=PM[e].toReference,n=PM[t].fromReference;return n(r(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return PM[i].primaries},getTransfer:function(i){return i===Zc?cI:PM[i].transfer}};function u1(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Mk(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var Gv,pI=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Gv===void 0&&(Gv=Ew("canvas")),Gv.width=e.width,Gv.height=e.height;let r=Gv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Gv}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Ew("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let n=r.getImageData(0,0,e.width,e.height),a=n.data;for(let o=0;o<a.length;o++)a[o]=u1(a[o]/255)*255;return r.putImageData(n,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(u1(t[r]/255)*255):t[r]=u1(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},$Le=0,AI=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:$Le++}),this.uuid=Xu(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},n=this.data;if(n!==null){let a;if(Array.isArray(n)){a=[];for(let o=0,s=n.length;o<s;o++)n[o].isDataTexture?a.push(Ik(n[o].image)):a.push(Ik(n[o]))}else a=Ik(n);r.url=a}return t||(e.images[this.uuid]=r),r}};function Ik(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?pI.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var e3e=0,qu=(()=>{class i extends Kp{constructor(t=i.DEFAULT_IMAGE,r=i.DEFAULT_MAPPING,n=Js,a=Js,o=io,s=Qd,l=qc,c=jp,u=i.DEFAULT_ANISOTROPY,h=Zc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:e3e++}),this.uuid=Xu(),this.name="",this.source=new AI(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Hr(0,0),this.repeat=new Hr(1,1),this.center=new Hr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ur,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(ww("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Hd?La:Zc),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==$ne)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case lg:t.x=t.x-Math.floor(t.x);break;case Js:t.x=t.x<0?0:1;break;case Cw:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case lg:t.y=t.y-Math.floor(t.y);break;case Js:t.y=t.y<0?0:1;break;case Cw:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ww("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===La?Hd:Hoe}set encoding(t){ww("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Hd?La:Zc}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=$ne,i.DEFAULT_ANISOTROPY=1,i})(),$n=class i{constructor(e=0,t=0,r=0,n=1){i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*a,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*a,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*a,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,a,l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],m=l[9],y=l[2],g=l[6],x=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-y)<.01&&Math.abs(m-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+y)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let S=(c+1)/2,E=(f+1)/2,D=(x+1)/2,B=(u+d)/4,F=(h+y)/4,H=(m+g)/4;return S>E&&S>D?S<.01?(r=0,n=.707106781,a=.707106781):(r=Math.sqrt(S),n=B/r,a=F/r):E>D?E<.01?(r=.707106781,n=0,a=.707106781):(n=Math.sqrt(E),r=B/n,a=H/n):D<.01?(r=.707106781,n=.707106781,a=0):(a=Math.sqrt(D),r=F/a,n=H/a),this.set(r,n,a,t),this}let b=Math.sqrt((g-m)*(g-m)+(h-y)*(h-y)+(d-u)*(d-u));return Math.abs(b)<.001&&(b=1),this.x=(g-m)/b,this.y=(h-y)/b,this.z=(d-u)/b,this.w=Math.acos((c+f+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},o5=class extends Kp{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new $n(0,0,e,t),this.scissorTest=!1,this.viewport=new $n(0,0,e,t);let n={width:e,height:t,depth:1};r.encoding!==void 0&&(ww("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Hd?La:Zc),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:io,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new qu(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new AI(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Gd=class extends o5{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}},mI=class extends qu{constructor(e=null,t=1,r=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Bo,this.minFilter=Bo,this.wrapR=Js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var s5=class extends qu{constructor(e=null,t=1,r=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Bo,this.minFilter=Bo,this.wrapR=Js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Yu=class{constructor(e=0,t=0,r=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=n}static slerpFlat(e,t,r,n,a,o,s){let l=r[n+0],c=r[n+1],u=r[n+2],h=r[n+3],d=a[o+0],f=a[o+1],m=a[o+2],y=a[o+3];if(s===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(s===1){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=y;return}if(h!==y||l!==d||c!==f||u!==m){let g=1-s,x=l*d+c*f+u*m+h*y,b=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){let D=Math.sqrt(S),B=Math.atan2(D,x*b);g=Math.sin(g*B)/D,s=Math.sin(s*B)/D}let E=s*b;if(l=l*g+d*E,c=c*g+f*E,u=u*g+m*E,h=h*g+y*E,g===1-s){let D=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=D,c*=D,u*=D,h*=D}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,n,a,o){let s=r[n],l=r[n+1],c=r[n+2],u=r[n+3],h=a[o],d=a[o+1],f=a[o+2],m=a[o+3];return e[t]=s*m+u*h+l*f-c*d,e[t+1]=l*m+u*d+c*h-s*f,e[t+2]=c*m+u*f+s*d-l*h,e[t+3]=u*m-s*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let r=e._x,n=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,c=s(r/2),u=s(n/2),h=s(a/2),d=l(r/2),f=l(n/2),m=l(a/2);switch(o){case"XYZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"YXZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"ZXY":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"ZYX":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"YZX":this._x=d*u*h+c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h-d*f*m;break;case"XZY":this._x=d*u*h-c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],n=t[4],a=t[8],o=t[1],s=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+s+h;if(d>0){let f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(a-c)*f,this._z=(o-n)*f}else if(r>s&&r>h){let f=2*Math.sqrt(1+r-s-h);this._w=(u-l)/f,this._x=.25*f,this._y=(n+o)/f,this._z=(a+c)/f}else if(s>h){let f=2*Math.sqrt(1+s-r-h);this._w=(a-c)/f,this._x=(n+o)/f,this._y=.25*f,this._z=(l+u)/f}else{let f=2*Math.sqrt(1+h-r-s);this._w=(o-n)/f,this._x=(a+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ss(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,n=e._y,a=e._z,o=e._w,s=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*s+n*c-a*l,this._y=n*u+o*l+a*s-r*c,this._z=a*u+o*c+r*l-n*s,this._w=o*u-r*s-n*l-a*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,n=this._y,a=this._z,o=this._w,s=o*e._w+r*e._x+n*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=n,this._z=a,this;let l=1-s*s;if(l<=Number.EPSILON){let f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*n+t*this._y,this._z=f*a+t*this._z,this.normalize(),this}let c=Math.sqrt(l),u=Math.atan2(c,s),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=n*h+this._y*d,this._z=a*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(a),r*Math.cos(a),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Ne=class i{constructor(e=0,t=0,r=0){i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Lae.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Lae.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,n=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*n,this.y=a[1]*t+a[4]*r+a[7]*n,this.z=a[2]*t+a[5]*r+a[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,a=e.elements,o=1/(a[3]*t+a[7]*r+a[11]*n+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*n+a[12])*o,this.y=(a[1]*t+a[5]*r+a[9]*n+a[13])*o,this.z=(a[2]*t+a[6]*r+a[10]*n+a[14])*o,this}applyQuaternion(e){let t=this.x,r=this.y,n=this.z,a=e.x,o=e.y,s=e.z,l=e.w,c=2*(o*n-s*r),u=2*(s*t-a*n),h=2*(a*r-o*t);return this.x=t+l*c+o*h-s*u,this.y=r+l*u+s*c-a*h,this.z=n+l*h+a*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,n=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n,this.y=a[1]*t+a[5]*r+a[9]*n,this.z=a[2]*t+a[6]*r+a[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,n=e.y,a=e.z,o=t.x,s=t.y,l=t.z;return this.x=n*l-a*s,this.y=a*o-r*l,this.z=r*s-n*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Bk.copy(this).projectOnVector(e),this.sub(Bk)}reflect(e){return this.sub(Bk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(ss(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Bk=new Ne,Lae=new Yu,$c=class{constructor(e=new Ne(1/0,1/0,1/0),t=new Ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Gu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Gu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Gu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0){let a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)e.isMesh===!0?e.getVertexPosition(o,Gu):Gu.fromBufferAttribute(a,o),Gu.applyMatrix4(e.matrixWorld),this.expandByPoint(Gu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),LM.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),LM.copy(r.boundingBox)),LM.applyMatrix4(e.matrixWorld),this.union(LM)}let n=e.children;for(let a=0,o=n.length;a<o;a++)this.expandByObject(n[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Gu),Gu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dw),OM.subVectors(this.max,dw),Wv.subVectors(e.a,dw),jv.subVectors(e.b,dw),Kv.subVectors(e.c,dw),Np.subVectors(jv,Wv),Up.subVectors(Kv,jv),$m.subVectors(Wv,Kv);let t=[0,-Np.z,Np.y,0,-Up.z,Up.y,0,-$m.z,$m.y,Np.z,0,-Np.x,Up.z,0,-Up.x,$m.z,0,-$m.x,-Np.y,Np.x,0,-Up.y,Up.x,0,-$m.y,$m.x,0];return!Dk(t,Wv,jv,Kv,OM)||(t=[1,0,0,0,1,0,0,0,1],!Dk(t,Wv,jv,Kv,OM))?!1:(FM.crossVectors(Np,Up),t=[FM.x,FM.y,FM.z],Dk(t,Wv,jv,Kv,OM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Rd=[new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne],Gu=new Ne,LM=new $c,Wv=new Ne,jv=new Ne,Kv=new Ne,Np=new Ne,Up=new Ne,$m=new Ne,dw=new Ne,OM=new Ne,FM=new Ne,eg=new Ne;function Dk(i,e,t,r,n){for(let a=0,o=i.length-3;a<=o;a+=3){eg.fromArray(i,a);let s=n.x*Math.abs(eg.x)+n.y*Math.abs(eg.y)+n.z*Math.abs(eg.z),l=e.dot(eg),c=t.dot(eg),u=r.dot(eg);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}var t3e=new $c,fw=new Ne,Rk=new Ne,lc=class{constructor(e=new Ne,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):t3e.setFromPoints(e).getCenter(r);let n=0;for(let a=0,o=e.length;a<o;a++)n=Math.max(n,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fw.subVectors(e,this.center);let t=fw.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),n=(r-this.radius)*.5;this.center.addScaledVector(fw,n/r),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Rk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fw.copy(e.center).add(Rk)),this.expandByPoint(fw.copy(e.center).sub(Rk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Pd=new Ne,Pk=new Ne,NM=new Ne,kp=new Ne,Lk=new Ne,UM=new Ne,Ok=new Ne,g1=class{constructor(e=new Ne,t=new Ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Pd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pd.copy(this.origin).addScaledVector(this.direction,t),Pd.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){Pk.copy(e).add(t).multiplyScalar(.5),NM.copy(t).sub(e).normalize(),kp.copy(this.origin).sub(Pk);let a=e.distanceTo(t)*.5,o=-this.direction.dot(NM),s=kp.dot(this.direction),l=-kp.dot(NM),c=kp.lengthSq(),u=Math.abs(1-o*o),h,d,f,m;if(u>0)if(h=o*l-s,d=o*s-l,m=a*u,h>=0)if(d>=-m)if(d<=m){let y=1/u;h*=y,d*=y,f=h*(h+o*d+2*s)+d*(o*h+d+2*l)+c}else d=a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+c;else d=-a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+c;else d<=-m?(h=Math.max(0,-(-o*a+s)),d=h>0?-a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+c):d<=m?(h=0,d=Math.min(Math.max(-a,-l),a),f=d*(d+2*l)+c):(h=Math.max(0,-(o*a+s)),d=h>0?a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+c);else d=o>0?-a:a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),n&&n.copy(Pk).addScaledVector(NM,d),f}intersectSphere(e,t){Pd.subVectors(e.center,this.origin);let r=Pd.dot(this.direction),n=Pd.dot(Pd)-r*r,a=e.radius*e.radius;if(n>a)return null;let o=Math.sqrt(a-n),s=r-o,l=r+o;return l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,a,o,s,l,c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,n=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,n=(e.min.x-d.x)*c),u>=0?(a=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(a=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||a>n||((a>r||isNaN(r))&&(r=a),(o<n||isNaN(n))&&(n=o),h>=0?(s=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(s=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||s>n)||((s>r||r!==r)&&(r=s),(l<n||n!==n)&&(n=l),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return this.intersectBox(e,Pd)!==null}intersectTriangle(e,t,r,n,a){Lk.subVectors(t,e),UM.subVectors(r,e),Ok.crossVectors(Lk,UM);let o=this.direction.dot(Ok),s;if(o>0){if(n)return null;s=1}else if(o<0)s=-1,o=-o;else return null;kp.subVectors(this.origin,e);let l=s*this.direction.dot(UM.crossVectors(kp,UM));if(l<0)return null;let c=s*this.direction.dot(Lk.cross(kp));if(c<0||l+c>o)return null;let u=-s*kp.dot(Ok);return u<0?null:this.at(u/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},kr=class i{constructor(e,t,r,n,a,o,s,l,c,u,h,d,f,m,y,g){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,n,a,o,s,l,c,u,h,d,f,m,y,g)}set(e,t,r,n,a,o,s,l,c,u,h,d,f,m,y,g){let x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=n,x[1]=a,x[5]=o,x[9]=s,x[13]=l,x[2]=c,x[6]=u,x[10]=h,x[14]=d,x[3]=f,x[7]=m,x[11]=y,x[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,n=1/Xv.setFromMatrixColumn(e,0).length(),a=1/Xv.setFromMatrixColumn(e,1).length(),o=1/Xv.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,n=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(n),c=Math.sin(n),u=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){let d=o*u,f=o*h,m=s*u,y=s*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+m*c,t[5]=d-y*c,t[9]=-s*l,t[2]=y-d*c,t[6]=m+f*c,t[10]=o*l}else if(e.order==="YXZ"){let d=l*u,f=l*h,m=c*u,y=c*h;t[0]=d+y*s,t[4]=m*s-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-s,t[2]=f*s-m,t[6]=y+d*s,t[10]=o*l}else if(e.order==="ZXY"){let d=l*u,f=l*h,m=c*u,y=c*h;t[0]=d-y*s,t[4]=-o*h,t[8]=m+f*s,t[1]=f+m*s,t[5]=o*u,t[9]=y-d*s,t[2]=-o*c,t[6]=s,t[10]=o*l}else if(e.order==="ZYX"){let d=o*u,f=o*h,m=s*u,y=s*h;t[0]=l*u,t[4]=m*c-f,t[8]=d*c+y,t[1]=l*h,t[5]=y*c+d,t[9]=f*c-m,t[2]=-c,t[6]=s*l,t[10]=o*l}else if(e.order==="YZX"){let d=o*l,f=o*c,m=s*l,y=s*c;t[0]=l*u,t[4]=y-d*h,t[8]=m*h+f,t[1]=h,t[5]=o*u,t[9]=-s*u,t[2]=-c*u,t[6]=f*h+m,t[10]=d-y*h}else if(e.order==="XZY"){let d=o*l,f=o*c,m=s*l,y=s*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+y,t[5]=o*u,t[9]=f*h-m,t[2]=m*h-f,t[6]=s*u,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(i3e,e,r3e)}lookAt(e,t,r){let n=this.elements;return ac.subVectors(e,t),ac.lengthSq()===0&&(ac.z=1),ac.normalize(),zp.crossVectors(r,ac),zp.lengthSq()===0&&(Math.abs(r.z)===1?ac.x+=1e-4:ac.z+=1e-4,ac.normalize(),zp.crossVectors(r,ac)),zp.normalize(),kM.crossVectors(ac,zp),n[0]=zp.x,n[4]=kM.x,n[8]=ac.x,n[1]=zp.y,n[5]=kM.y,n[9]=ac.y,n[2]=zp.z,n[6]=kM.z,n[10]=ac.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,a=this.elements,o=r[0],s=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],m=r[2],y=r[6],g=r[10],x=r[14],b=r[3],S=r[7],E=r[11],D=r[15],B=n[0],F=n[4],H=n[8],U=n[12],k=n[1],j=n[5],q=n[9],X=n[13],Y=n[2],J=n[6],te=n[10],de=n[14],ue=n[3],ve=n[7],_e=n[11],Re=n[15];return a[0]=o*B+s*k+l*Y+c*ue,a[4]=o*F+s*j+l*J+c*ve,a[8]=o*H+s*q+l*te+c*_e,a[12]=o*U+s*X+l*de+c*Re,a[1]=u*B+h*k+d*Y+f*ue,a[5]=u*F+h*j+d*J+f*ve,a[9]=u*H+h*q+d*te+f*_e,a[13]=u*U+h*X+d*de+f*Re,a[2]=m*B+y*k+g*Y+x*ue,a[6]=m*F+y*j+g*J+x*ve,a[10]=m*H+y*q+g*te+x*_e,a[14]=m*U+y*X+g*de+x*Re,a[3]=b*B+S*k+E*Y+D*ue,a[7]=b*F+S*j+E*J+D*ve,a[11]=b*H+S*q+E*te+D*_e,a[15]=b*U+S*X+E*de+D*Re,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],n=e[8],a=e[12],o=e[1],s=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],m=e[3],y=e[7],g=e[11],x=e[15];return m*(+a*l*h-n*c*h-a*s*d+r*c*d+n*s*f-r*l*f)+y*(+t*l*f-t*c*d+a*o*d-n*o*f+n*c*u-a*l*u)+g*(+t*c*h-t*s*f-a*o*h+r*o*f+a*s*u-r*c*u)+x*(-n*s*u-t*l*h+t*s*d+n*o*h-r*o*d+r*l*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],y=e[13],g=e[14],x=e[15],b=h*g*c-y*d*c+y*l*f-s*g*f-h*l*x+s*d*x,S=m*d*c-u*g*c-m*l*f+o*g*f+u*l*x-o*d*x,E=u*y*c-m*h*c+m*s*f-o*y*f-u*s*x+o*h*x,D=m*h*l-u*y*l-m*s*d+o*y*d+u*s*g-o*h*g,B=t*b+r*S+n*E+a*D;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let F=1/B;return e[0]=b*F,e[1]=(y*d*a-h*g*a-y*n*f+r*g*f+h*n*x-r*d*x)*F,e[2]=(s*g*a-y*l*a+y*n*c-r*g*c-s*n*x+r*l*x)*F,e[3]=(h*l*a-s*d*a-h*n*c+r*d*c+s*n*f-r*l*f)*F,e[4]=S*F,e[5]=(u*g*a-m*d*a+m*n*f-t*g*f-u*n*x+t*d*x)*F,e[6]=(m*l*a-o*g*a-m*n*c+t*g*c+o*n*x-t*l*x)*F,e[7]=(o*d*a-u*l*a+u*n*c-t*d*c-o*n*f+t*l*f)*F,e[8]=E*F,e[9]=(m*h*a-u*y*a-m*r*f+t*y*f+u*r*x-t*h*x)*F,e[10]=(o*y*a-m*s*a+m*r*c-t*y*c-o*r*x+t*s*x)*F,e[11]=(u*s*a-o*h*a-u*r*c+t*h*c+o*r*f-t*s*f)*F,e[12]=D*F,e[13]=(u*y*n-m*h*n+m*r*d-t*y*d-u*r*g+t*h*g)*F,e[14]=(m*s*n-o*y*n-m*r*l+t*y*l+o*r*g-t*s*g)*F,e[15]=(o*h*n-u*s*n+u*r*l-t*h*l-o*r*d+t*s*d)*F,this}scale(e){let t=this.elements,r=e.x,n=e.y,a=e.z;return t[0]*=r,t[4]*=n,t[8]*=a,t[1]*=r,t[5]*=n,t[9]*=a,t[2]*=r,t[6]*=n,t[10]*=a,t[3]*=r,t[7]*=n,t[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),n=Math.sin(t),a=1-r,o=e.x,s=e.y,l=e.z,c=a*o,u=a*s;return this.set(c*o+r,c*s-n*l,c*l+n*s,0,c*s+n*l,u*s+r,u*l-n*o,0,c*l-n*s,u*l+n*o,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,a,o){return this.set(1,r,a,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){let n=this.elements,a=t._x,o=t._y,s=t._z,l=t._w,c=a+a,u=o+o,h=s+s,d=a*c,f=a*u,m=a*h,y=o*u,g=o*h,x=s*h,b=l*c,S=l*u,E=l*h,D=r.x,B=r.y,F=r.z;return n[0]=(1-(y+x))*D,n[1]=(f+E)*D,n[2]=(m-S)*D,n[3]=0,n[4]=(f-E)*B,n[5]=(1-(d+x))*B,n[6]=(g+b)*B,n[7]=0,n[8]=(m+S)*F,n[9]=(g-b)*F,n[10]=(1-(d+y))*F,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){let n=this.elements,a=Xv.set(n[0],n[1],n[2]).length(),o=Xv.set(n[4],n[5],n[6]).length(),s=Xv.set(n[8],n[9],n[10]).length();this.determinant()<0&&(a=-a),e.x=n[12],e.y=n[13],e.z=n[14],Wu.copy(this);let c=1/a,u=1/o,h=1/s;return Wu.elements[0]*=c,Wu.elements[1]*=c,Wu.elements[2]*=c,Wu.elements[4]*=u,Wu.elements[5]*=u,Wu.elements[6]*=u,Wu.elements[8]*=h,Wu.elements[9]*=h,Wu.elements[10]*=h,t.setFromRotationMatrix(Wu),r.x=a,r.y=o,r.z=s,this}makePerspective(e,t,r,n,a,o,s=Vd){let l=this.elements,c=2*a/(t-e),u=2*a/(r-n),h=(t+e)/(t-e),d=(r+n)/(r-n),f,m;if(s===Vd)f=-(o+a)/(o-a),m=-2*o*a/(o-a);else if(s===dI)f=-o/(o-a),m=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,n,a,o,s=Vd){let l=this.elements,c=1/(t-e),u=1/(r-n),h=1/(o-a),d=(t+e)*c,f=(r+n)*u,m,y;if(s===Vd)m=(o+a)*h,y=-2*h;else if(s===dI)m=a*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},Xv=new Ne,Wu=new kr,i3e=new Ne(0,0,0),r3e=new Ne(1,1,1),zp=new Ne,kM=new Ne,ac=new Ne,Oae=new kr,Fae=new Yu,n3e=(()=>{class i{constructor(t=0,r=0,n=0,a=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=n,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,n,a=this._order){return this._x=t,this._y=r,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,n=!0){let a=t.elements,o=a[0],s=a[4],l=a[8],c=a[1],u=a[5],h=a[9],d=a[2],f=a[6],m=a[10];switch(r){case"XYZ":this._y=Math.asin(ss(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ss(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(ss(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-ss(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(ss(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-ss(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,n){return Oae.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Oae,r,n)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return Fae.setFromEuler(this),this.setFromQuaternion(Fae,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})(),gI=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},a3e=0,Nae=new Ne,Yv=new Yu,Ld=new kr,zM=new Ne,pw=new Ne,o3e=new Ne,s3e=new Yu,Uae=new Ne(1,0,0),kae=new Ne(0,1,0),zae=new Ne(0,0,1),l3e={type:"added"},c3e={type:"removed"},ls=(()=>{class i extends Kp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:a3e++}),this.uuid=Xu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let t=new Ne,r=new n3e,n=new Yu,a=new Ne(1,1,1);function o(){n.setFromEuler(r,!1)}function s(){r.setFromQuaternion(n,void 0,!1)}r._onChange(o),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new kr},normalMatrix:{value:new Ur}}),this.matrix=new kr,this.matrixWorld=new kr,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Yv.setFromAxisAngle(t,r),this.quaternion.multiply(Yv),this}rotateOnWorldAxis(t,r){return Yv.setFromAxisAngle(t,r),this.quaternion.premultiply(Yv),this}rotateX(t){return this.rotateOnAxis(Uae,t)}rotateY(t){return this.rotateOnAxis(kae,t)}rotateZ(t){return this.rotateOnAxis(zae,t)}translateOnAxis(t,r){return Nae.copy(t).applyQuaternion(this.quaternion),this.position.add(Nae.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(Uae,t)}translateY(t){return this.translateOnAxis(kae,t)}translateZ(t){return this.translateOnAxis(zae,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ld.copy(this.matrixWorld).invert())}lookAt(t,r,n){t.isVector3?zM.copy(t):zM.set(t,r,n);let a=this.parent;this.updateWorldMatrix(!0,!1),pw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ld.lookAt(pw,zM,this.up):Ld.lookAt(zM,pw,this.up),this.quaternion.setFromRotationMatrix(Ld),a&&(Ld.extractRotation(a.matrixWorld),Yv.setFromRotationMatrix(Ld),this.quaternion.premultiply(Yv.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(l3e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(c3e)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ld.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ld.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ld),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let n=0,a=this.children.length;n<a;n++){let s=this.children[n].getObjectByProperty(t,r);if(s!==void 0)return s}}getObjectsByProperty(t,r,n=[]){this[t]===r&&n.push(this);let a=this.children;for(let o=0,s=a.length;o<s;o++)a[o].getObjectsByProperty(t,r,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pw,t,o3e),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pw,s3e,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);let r=this.children;for(let n=0,a=r.length;n<a;n++)r[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let r=this.children;for(let n=0,a=r.length;n<a;n++)r[n].traverseVisible(t)}traverseAncestors(t){let r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let r=this.children;for(let n=0,a=r.length;n<a;n++){let o=r[n];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,r){let n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){let a=this.children;for(let o=0,s=a.length;o<s;o++){let l=a[o];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){let r=t===void 0||typeof t=="string",n={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),a.maxGeometryCount=this._maxGeometryCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function o(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){let d=c[u];o(t.shapes,d)}else o(t.shapes,c)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));a.material=l}else a.material=o(t.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];a.animations.push(o(t.animations,c))}}if(r){let l=s(t.geometries),c=s(t.materials),u=s(t.textures),h=s(t.images),d=s(t.shapes),f=s(t.skeletons),m=s(t.animations),y=s(t.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),d.length>0&&(n.shapes=d),f.length>0&&(n.skeletons=f),m.length>0&&(n.animations=m),y.length>0&&(n.nodes=y)}return n.object=a,n;function s(l){let c=[];for(let u in l){let h=l[u];delete h.metadata,c.push(h)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let n=0;n<t.children.length;n++){let a=t.children[n];this.add(a.clone())}return this}}return i.DEFAULT_UP=new Ne(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})(),ju=new Ne,Od=new Ne,Fk=new Ne,Fd=new Ne,qv=new Ne,Zv=new Ne,Vae=new Ne,Nk=new Ne,Uk=new Ne,kk=new Ne,VM=!1,o1=class i{constructor(e=new Ne,t=new Ne,r=new Ne){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),ju.subVectors(e,t),n.cross(ju);let a=n.lengthSq();return a>0?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}static getBarycoord(e,t,r,n,a){ju.subVectors(n,t),Od.subVectors(r,t),Fk.subVectors(e,t);let o=ju.dot(ju),s=ju.dot(Od),l=ju.dot(Fk),c=Od.dot(Od),u=Od.dot(Fk),h=o*c-s*s;if(h===0)return a.set(0,0,0),null;let d=1/h,f=(c*l-s*u)*d,m=(o*u-s*l)*d;return a.set(1-f-m,m,f)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,Fd)===null?!1:Fd.x>=0&&Fd.y>=0&&Fd.x+Fd.y<=1}static getUV(e,t,r,n,a,o,s,l){return VM===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),VM=!0),this.getInterpolation(e,t,r,n,a,o,s,l)}static getInterpolation(e,t,r,n,a,o,s,l){return this.getBarycoord(e,t,r,n,Fd)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Fd.x),l.addScaledVector(o,Fd.y),l.addScaledVector(s,Fd.z),l)}static isFrontFacing(e,t,r,n){return ju.subVectors(r,t),Od.subVectors(e,t),ju.cross(Od).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ju.subVectors(this.c,this.b),Od.subVectors(this.a,this.b),ju.cross(Od).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return i.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,a){return VM===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),VM=!0),i.getInterpolation(e,this.a,this.b,this.c,t,r,n,a)}getInterpolation(e,t,r,n,a){return i.getInterpolation(e,this.a,this.b,this.c,t,r,n,a)}containsPoint(e){return i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,n=this.b,a=this.c,o,s;qv.subVectors(n,r),Zv.subVectors(a,r),Nk.subVectors(e,r);let l=qv.dot(Nk),c=Zv.dot(Nk);if(l<=0&&c<=0)return t.copy(r);Uk.subVectors(e,n);let u=qv.dot(Uk),h=Zv.dot(Uk);if(u>=0&&h<=u)return t.copy(n);let d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(qv,o);kk.subVectors(e,a);let f=qv.dot(kk),m=Zv.dot(kk);if(m>=0&&f<=m)return t.copy(a);let y=f*c-l*m;if(y<=0&&c>=0&&m<=0)return s=c/(c-m),t.copy(r).addScaledVector(Zv,s);let g=u*m-f*h;if(g<=0&&h-u>=0&&f-m>=0)return Vae.subVectors(a,n),s=(h-u)/(h-u+(f-m)),t.copy(n).addScaledVector(Vae,s);let x=1/(g+y+d);return o=y*x,s=d*x,t.copy(r).addScaledVector(qv,o).addScaledVector(Zv,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},joe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vp={h:0,s:0,l:0},HM={h:0,s:0,l:0};function zk(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}var ji=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){let n=e;n&&n.isColor?this.copy(n):typeof n=="number"?this.setHex(n):typeof n=="string"&&this.setStyle(n)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=La){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=bn.workingColorSpace){return this.r=e,this.g=t,this.b=r,bn.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=bn.workingColorSpace){if(e=V5(e,1),t=ss(t,0,1),r=ss(r,0,1),t===0)this.r=this.g=this.b=r;else{let a=r<=.5?r*(1+t):r+t-r*t,o=2*r-a;this.r=zk(o,a,e+1/3),this.g=zk(o,a,e),this.b=zk(o,a,e-1/3)}return bn.toWorkingColorSpace(this,n),this}setStyle(e,t=La){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let a,o=n[1],s=n[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let a=n[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=La){let r=joe[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=u1(e.r),this.g=u1(e.g),this.b=u1(e.b),this}copyLinearToSRGB(e){return this.r=Mk(e.r),this.g=Mk(e.g),this.b=Mk(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=La){return bn.fromWorkingColorSpace(Bs.copy(this),e),Math.round(ss(Bs.r*255,0,255))*65536+Math.round(ss(Bs.g*255,0,255))*256+Math.round(ss(Bs.b*255,0,255))}getHexString(e=La){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bn.workingColorSpace){bn.fromWorkingColorSpace(Bs.copy(this),t);let r=Bs.r,n=Bs.g,a=Bs.b,o=Math.max(r,n,a),s=Math.min(r,n,a),l,c,u=(s+o)/2;if(s===o)l=0,c=0;else{let h=o-s;switch(c=u<=.5?h/(o+s):h/(2-o-s),o){case r:l=(n-a)/h+(n<a?6:0);break;case n:l=(a-r)/h+2;break;case a:l=(r-n)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=bn.workingColorSpace){return bn.fromWorkingColorSpace(Bs.copy(this),t),e.r=Bs.r,e.g=Bs.g,e.b=Bs.b,e}getStyle(e=La){bn.fromWorkingColorSpace(Bs.copy(this),e);let t=Bs.r,r=Bs.g,n=Bs.b;return e!==La?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(n*255)})`}offsetHSL(e,t,r){return this.getHSL(Vp),this.setHSL(Vp.h+e,Vp.s+t,Vp.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Vp),e.getHSL(HM);let r=_w(Vp.h,HM.h,t),n=_w(Vp.s,HM.s,t),a=_w(Vp.l,HM.l,t);return this.setHSL(r,n,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,r=this.g,n=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*n,this.g=a[1]*t+a[4]*r+a[7]*n,this.b=a[2]*t+a[5]*r+a[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Bs=new ji;ji.NAMES=joe;var u3e=0,cs=class extends Kp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:u3e++}),this.uuid=Xu(),this.name="",this.type="Material",this.blending=c1,this.side=kh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=e5,this.blendDst=t5,this.blendEquation=ng,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ji(0,0,0),this.blendAlpha=0,this.depthFunc=sI,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mae,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qv,this.stencilZFail=Qv,this.stencilZPass=Qv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let n=this[t];if(n===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==c1&&(r.blending=this.blending),this.side!==kh&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==e5&&(r.blendSrc=this.blendSrc),this.blendDst!==t5&&(r.blendDst=this.blendDst),this.blendEquation!==ng&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sI&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Mae&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Qv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Qv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(a){let o=[];for(let s in a){let l=a[s];delete l.metadata,o.push(l)}return o}if(t){let a=n(e.textures),o=n(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let n=t.length;r=new Array(n);for(let a=0;a!==n;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Vh=class extends cs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},zd=h3e();function h3e(){let i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),r=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(r[l]=0,r[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,n[l]=24,n[l|256]=24):(r[l]=31744,r[l|256]=64512,n[l]=13,n[l|256]=13)}let a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,a[l]=c|u}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:n,mantissaTable:a,exponentTable:o,offsetTable:s}}function d3e(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=ss(i,-65504,65504),zd.floatView[0]=i;let e=zd.uint32View[0],t=e>>23&511;return zd.baseTable[t]+((e&8388607)>>zd.shiftTable[t])}function f3e(i){let e=i>>10;return zd.uint32View[0]=zd.mantissaTable[zd.offsetTable[e]+(i&1023)]+zd.exponentTable[e],zd.floatView[0]}var Pw={toHalfFloat:d3e,fromHalfFloat:f3e},fo=new Ne,QM=new Hr,Do=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=r5,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=sc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,a=this.itemSize;n<a;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)QM.fromBufferAttribute(this,t),QM.applyMatrix3(e),this.setXY(t,QM.x,QM.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.applyMatrix3(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.applyMatrix4(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.applyNormalMatrix(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.transformDirection(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Uh(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Yn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Uh(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Uh(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Uh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Uh(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array),n=Yn(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,a){return e*=this.itemSize,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array),n=Yn(n,this.array),a=Yn(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==r5&&(e.usage=this.usage),e}};var vI=class extends Do{constructor(e,t,r){super(new Uint16Array(e),t,r)}};var yI=class extends Do{constructor(e,t,r){super(new Uint32Array(e),t,r)}};var Ro=class extends Do{constructor(e,t,r){super(new Float32Array(e),t,r)}};var p3e=0,Yc=new kr,Vk=new ls,Jv=new Ne,oc=new $c,Aw=new $c,Ho=new Ne,$s=class i extends Kp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:p3e++}),this.uuid=Xu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Woe(e)?yI:vI)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let a=new Ur().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}let n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yc.makeRotationFromQuaternion(e),this.applyMatrix4(Yc),this}rotateX(e){return Yc.makeRotationX(e),this.applyMatrix4(Yc),this}rotateY(e){return Yc.makeRotationY(e),this.applyMatrix4(Yc),this}rotateZ(e){return Yc.makeRotationZ(e),this.applyMatrix4(Yc),this}translate(e,t,r){return Yc.makeTranslation(e,t,r),this.applyMatrix4(Yc),this}scale(e,t,r){return Yc.makeScale(e,t,r),this.applyMatrix4(Yc),this}lookAt(e){return Vk.lookAt(e),Vk.updateMatrix(),this.applyMatrix4(Vk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jv).negate(),this.translate(Jv.x,Jv.y,Jv.z),this}setFromPoints(e){let t=[];for(let r=0,n=e.length;r<n;r++){let a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Ro(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $c);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ne(-1/0,-1/0,-1/0),new Ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){let a=t[r];oc.setFromBufferAttribute(a),this.morphTargetsRelative?(Ho.addVectors(this.boundingBox.min,oc.min),this.boundingBox.expandByPoint(Ho),Ho.addVectors(this.boundingBox.max,oc.max),this.boundingBox.expandByPoint(Ho)):(this.boundingBox.expandByPoint(oc.min),this.boundingBox.expandByPoint(oc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lc);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ne,1/0);return}if(e){let r=this.boundingSphere.center;if(oc.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){let s=t[a];Aw.setFromBufferAttribute(s),this.morphTargetsRelative?(Ho.addVectors(oc.min,Aw.min),oc.expandByPoint(Ho),Ho.addVectors(oc.max,Aw.max),oc.expandByPoint(Ho)):(oc.expandByPoint(Aw.min),oc.expandByPoint(Aw.max))}oc.getCenter(r);let n=0;for(let a=0,o=e.count;a<o;a++)Ho.fromBufferAttribute(e,a),n=Math.max(n,r.distanceToSquared(Ho));if(t)for(let a=0,o=t.length;a<o;a++){let s=t[a],l=this.morphTargetsRelative;for(let c=0,u=s.count;c<u;c++)Ho.fromBufferAttribute(s,c),l&&(Jv.fromBufferAttribute(e,c),Ho.add(Jv)),n=Math.max(n,r.distanceToSquared(Ho))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,n=t.position.array,a=t.normal.array,o=t.uv.array,s=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Do(new Float32Array(4*s),4));let l=this.getAttribute("tangent").array,c=[],u=[];for(let k=0;k<s;k++)c[k]=new Ne,u[k]=new Ne;let h=new Ne,d=new Ne,f=new Ne,m=new Hr,y=new Hr,g=new Hr,x=new Ne,b=new Ne;function S(k,j,q){h.fromArray(n,k*3),d.fromArray(n,j*3),f.fromArray(n,q*3),m.fromArray(o,k*2),y.fromArray(o,j*2),g.fromArray(o,q*2),d.sub(h),f.sub(h),y.sub(m),g.sub(m);let X=1/(y.x*g.y-g.x*y.y);isFinite(X)&&(x.copy(d).multiplyScalar(g.y).addScaledVector(f,-y.y).multiplyScalar(X),b.copy(f).multiplyScalar(y.x).addScaledVector(d,-g.x).multiplyScalar(X),c[k].add(x),c[j].add(x),c[q].add(x),u[k].add(b),u[j].add(b),u[q].add(b))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let k=0,j=E.length;k<j;++k){let q=E[k],X=q.start,Y=q.count;for(let J=X,te=X+Y;J<te;J+=3)S(r[J+0],r[J+1],r[J+2])}let D=new Ne,B=new Ne,F=new Ne,H=new Ne;function U(k){F.fromArray(a,k*3),H.copy(F);let j=c[k];D.copy(j),D.sub(F.multiplyScalar(F.dot(j))).normalize(),B.crossVectors(H,j);let X=B.dot(u[k])<0?-1:1;l[k*4]=D.x,l[k*4+1]=D.y,l[k*4+2]=D.z,l[k*4+3]=X}for(let k=0,j=E.length;k<j;++k){let q=E[k],X=q.start,Y=q.count;for(let J=X,te=X+Y;J<te;J+=3)U(r[J+0]),U(r[J+1]),U(r[J+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Do(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);let n=new Ne,a=new Ne,o=new Ne,s=new Ne,l=new Ne,c=new Ne,u=new Ne,h=new Ne;if(e)for(let d=0,f=e.count;d<f;d+=3){let m=e.getX(d+0),y=e.getX(d+1),g=e.getX(d+2);n.fromBufferAttribute(t,m),a.fromBufferAttribute(t,y),o.fromBufferAttribute(t,g),u.subVectors(o,a),h.subVectors(n,a),u.cross(h),s.fromBufferAttribute(r,m),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,g),s.add(u),l.add(u),c.add(u),r.setXYZ(m,s.x,s.y,s.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)n.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,a),h.subVectors(n,a),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ho.fromBufferAttribute(e,t),Ho.normalize(),e.setXYZ(t,Ho.x,Ho.y,Ho.z)}toNonIndexed(){function e(s,l){let c=s.array,u=s.itemSize,h=s.normalized,d=new c.constructor(l.length*u),f=0,m=0;for(let y=0,g=l.length;y<g;y++){s.isInterleavedBufferAttribute?f=l[y]*s.data.stride+s.offset:f=l[y]*u;for(let x=0;x<u;x++)d[m++]=c[f++]}return new Do(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new i,r=this.index.array,n=this.attributes;for(let s in n){let l=n[s],c=e(l,r);t.setAttribute(s,c)}let a=this.morphAttributes;for(let s in a){let l=[],c=a[s];for(let u=0,h=c.length;u<h;u++){let d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let s=0,l=o.length;s<l;s++){let c=o[s];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let l in r){let c=r[l];e.data.attributes[l]=c.toJSON(e.data)}let n={},a=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){let f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(n[l]=u,a=!0)}a&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let n=e.attributes;for(let c in n){let u=n[c];this.setAttribute(c,u.clone(t))}let a=e.morphAttributes;for(let c in a){let u=[],h=a[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let c=0,u=o.length;c<u;c++){let h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}let s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Hae=new kr,tg=new g1,GM=new lc,Qae=new Ne,$v=new Ne,e1=new Ne,t1=new Ne,Hk=new Ne,WM=new Ne,jM=new Hr,KM=new Hr,XM=new Hr,Gae=new Ne,Wae=new Ne,jae=new Ne,YM=new Ne,qM=new Ne,Ma=class extends ls{constructor(e=new $s,t=new Vh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let n=t[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){let s=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}getVertexPosition(e,t){let r=this.geometry,n=r.attributes.position,a=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(n,e);let s=this.morphTargetInfluences;if(a&&s){WM.set(0,0,0);for(let l=0,c=a.length;l<c;l++){let u=s[l],h=a[l];u!==0&&(Hk.fromBufferAttribute(h,e),o?WM.addScaledVector(Hk,u):WM.addScaledVector(Hk.sub(t),u))}t.add(WM)}return t}raycast(e,t){let r=this.geometry,n=this.material,a=this.matrixWorld;n!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),GM.copy(r.boundingSphere),GM.applyMatrix4(a),tg.copy(e.ray).recast(e.near),!(GM.containsPoint(tg.origin)===!1&&(tg.intersectSphere(GM,Qae)===null||tg.origin.distanceToSquared(Qae)>(e.far-e.near)**2))&&(Hae.copy(a).invert(),tg.copy(e.ray).applyMatrix4(Hae),!(r.boundingBox!==null&&tg.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,tg)))}_computeIntersections(e,t,r){let n,a=this.geometry,o=this.material,s=a.index,l=a.attributes.position,c=a.attributes.uv,u=a.attributes.uv1,h=a.attributes.normal,d=a.groups,f=a.drawRange;if(s!==null)if(Array.isArray(o))for(let m=0,y=d.length;m<y;m++){let g=d[m],x=o[g.materialIndex],b=Math.max(g.start,f.start),S=Math.min(s.count,Math.min(g.start+g.count,f.start+f.count));for(let E=b,D=S;E<D;E+=3){let B=s.getX(E),F=s.getX(E+1),H=s.getX(E+2);n=ZM(this,x,e,r,c,u,h,B,F,H),n&&(n.faceIndex=Math.floor(E/3),n.face.materialIndex=g.materialIndex,t.push(n))}}else{let m=Math.max(0,f.start),y=Math.min(s.count,f.start+f.count);for(let g=m,x=y;g<x;g+=3){let b=s.getX(g),S=s.getX(g+1),E=s.getX(g+2);n=ZM(this,o,e,r,c,u,h,b,S,E),n&&(n.faceIndex=Math.floor(g/3),t.push(n))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,y=d.length;m<y;m++){let g=d[m],x=o[g.materialIndex],b=Math.max(g.start,f.start),S=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let E=b,D=S;E<D;E+=3){let B=E,F=E+1,H=E+2;n=ZM(this,x,e,r,c,u,h,B,F,H),n&&(n.faceIndex=Math.floor(E/3),n.face.materialIndex=g.materialIndex,t.push(n))}}else{let m=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let g=m,x=y;g<x;g+=3){let b=g,S=g+1,E=g+2;n=ZM(this,o,e,r,c,u,h,b,S,E),n&&(n.faceIndex=Math.floor(g/3),t.push(n))}}}};function A3e(i,e,t,r,n,a,o,s){let l;if(e.side===Dl?l=r.intersectTriangle(o,a,n,!0,s):l=r.intersectTriangle(n,a,o,e.side===kh,s),l===null)return null;qM.copy(s),qM.applyMatrix4(i.matrixWorld);let c=t.ray.origin.distanceTo(qM);return c<t.near||c>t.far?null:{distance:c,point:qM.clone(),object:i}}function ZM(i,e,t,r,n,a,o,s,l,c){i.getVertexPosition(s,$v),i.getVertexPosition(l,e1),i.getVertexPosition(c,t1);let u=A3e(i,e,t,r,$v,e1,t1,YM);if(u){n&&(jM.fromBufferAttribute(n,s),KM.fromBufferAttribute(n,l),XM.fromBufferAttribute(n,c),u.uv=o1.getInterpolation(YM,$v,e1,t1,jM,KM,XM,new Hr)),a&&(jM.fromBufferAttribute(a,s),KM.fromBufferAttribute(a,l),XM.fromBufferAttribute(a,c),u.uv1=o1.getInterpolation(YM,$v,e1,t1,jM,KM,XM,new Hr),u.uv2=u.uv1),o&&(Gae.fromBufferAttribute(o,s),Wae.fromBufferAttribute(o,l),jae.fromBufferAttribute(o,c),u.normal=o1.getInterpolation(YM,$v,e1,t1,Gae,Wae,jae,new Ne),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));let h={a:s,b:l,c,normal:new Ne,materialIndex:0};o1.getNormal($v,e1,t1,h.normal),u.face=h}return u}var ug=class i extends $s{constructor(e=1,t=1,r=1,n=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:a,depthSegments:o};let s=this;n=Math.floor(n),a=Math.floor(a),o=Math.floor(o);let l=[],c=[],u=[],h=[],d=0,f=0;m("z","y","x",-1,-1,r,t,e,o,a,0),m("z","y","x",1,-1,r,t,-e,o,a,1),m("x","z","y",1,1,e,r,t,n,o,2),m("x","z","y",1,-1,e,r,-t,n,o,3),m("x","y","z",1,-1,e,t,r,n,a,4),m("x","y","z",-1,-1,e,t,-r,n,a,5),this.setIndex(l),this.setAttribute("position",new Ro(c,3)),this.setAttribute("normal",new Ro(u,3)),this.setAttribute("uv",new Ro(h,2));function m(y,g,x,b,S,E,D,B,F,H,U){let k=E/F,j=D/H,q=E/2,X=D/2,Y=B/2,J=F+1,te=H+1,de=0,ue=0,ve=new Ne;for(let _e=0;_e<te;_e++){let Re=_e*j-X;for(let Oe=0;Oe<J;Oe++){let Te=Oe*k-q;ve[y]=Te*b,ve[g]=Re*S,ve[x]=Y,c.push(ve.x,ve.y,ve.z),ve[y]=0,ve[g]=0,ve[x]=B>0?1:-1,u.push(ve.x,ve.y,ve.z),h.push(Oe/F),h.push(1-_e/H),de+=1}}for(let _e=0;_e<H;_e++)for(let Re=0;Re<F;Re++){let Oe=d+Re+J*_e,Te=d+Re+J*(_e+1),Se=d+(Re+1)+J*(_e+1),nt=d+(Re+1)+J*_e;l.push(Oe,Te,nt),l.push(Te,Se,nt),ue+=6}s.addGroup(f,ue,U),f+=ue,d+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function v1(i){let e={};for(let t in i){e[t]={};for(let r in i[t]){let n=i[t][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=n.clone():Array.isArray(n)?e[t][r]=n.slice():e[t][r]=n}}return e}function Zs(i){let e={};for(let t=0;t<i.length;t++){let r=v1(i[t]);for(let n in r)e[n]=r[n]}return e}function m3e(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function Koe(i){return i.getRenderTarget()===null?i.outputColorSpace:bn.workingColorSpace}var g3e={clone:v1,merge:Zs},v3e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,y3e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Wd=class extends cs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=v3e,this.fragmentShader=y3e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=v1(e.uniforms),this.uniformsGroups=m3e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let n in this.uniforms){let o=this.uniforms[n].value;o&&o.isTexture?t.uniforms[n]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[n]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[n]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[n]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[n]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[n]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[n]={type:"m4",value:o.toArray()}:t.uniforms[n]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let r={};for(let n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},xI=class extends ls{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kr,this.projectionMatrix=new kr,this.projectionMatrixInverse=new kr,this.coordinateSystem=Vd}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ea=class extends xI{constructor(e=50,t=1,r=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=m1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(xw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return m1*2*Math.atan(Math.tan(xw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,n,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(xw*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,a=-.5*n,o=this.view;if(this.view!==null&&this.view.enabled){let l=o.fullWidth,c=o.fullHeight;a+=o.offsetX*n/l,t-=o.offsetY*r/c,n*=o.width/l,r*=o.height/c}let s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+n,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},i1=-90,r1=1,l5=class extends ls{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;let n=new ea(i1,r1,e,t);n.layers=this.layers,this.add(n);let a=new ea(i1,r1,e,t);a.layers=this.layers,this.add(a);let o=new ea(i1,r1,e,t);o.layers=this.layers,this.add(o);let s=new ea(i1,r1,e,t);s.layers=this.layers,this.add(s);let l=new ea(i1,r1,e,t);l.layers=this.layers,this.add(l);let c=new ea(i1,r1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[r,n,a,o,s,l]=t;for(let c of t)this.remove(c);if(e===Vd)r.up.set(0,1,0),r.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===dI)r.up.set(0,-1,0),r.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:r,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[a,o,s,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;let y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,n),e.render(t,a),e.setRenderTarget(r,1,n),e.render(t,o),e.setRenderTarget(r,2,n),e.render(t,s),e.setRenderTarget(r,3,n),e.render(t,l),e.setRenderTarget(r,4,n),e.render(t,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,n),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}},_I=class extends qu{constructor(e,t,r,n,a,o,s,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:d1,super(e,t,r,n,a,o,s,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},c5=class extends Gd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];t.encoding!==void 0&&(ww("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Hd?La:Zc),this.texture=new _I(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:io}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new ug(5,5,5),a=new Wd({name:"CubemapFromEquirect",uniforms:v1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Dl,blending:Gp});a.uniforms.tEquirect.value=t;let o=new Ma(n,a),s=t.minFilter;return t.minFilter===Qd&&(t.minFilter=io),new l5(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,n){let a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,n);e.setRenderTarget(a)}},Qk=new Ne,x3e=new Ne,_3e=new Ur,kd=class{constructor(e=new Ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let n=Qk.subVectors(r,t).cross(x3e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let r=e.delta(Qk),n=this.normal.dot(r);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/n;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||_3e.getNormalMatrix(e),n=this.coplanarPoint(Qk).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ig=new lc,JM=new Ne,Tw=class{constructor(e=new kd,t=new kd,r=new kd,n=new kd,a=new kd,o=new kd){this.planes=[e,t,r,n,a,o]}set(e,t,r,n,a,o){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(n),s[4].copy(a),s[5].copy(o),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Vd){let r=this.planes,n=e.elements,a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=n[7],f=n[8],m=n[9],y=n[10],g=n[11],x=n[12],b=n[13],S=n[14],E=n[15];if(r[0].setComponents(l-a,d-c,g-f,E-x).normalize(),r[1].setComponents(l+a,d+c,g+f,E+x).normalize(),r[2].setComponents(l+o,d+u,g+m,E+b).normalize(),r[3].setComponents(l-o,d-u,g-m,E-b).normalize(),r[4].setComponents(l-s,d-h,g-y,E-S).normalize(),t===Vd)r[5].setComponents(l+s,d+h,g+y,E+S).normalize();else if(t===dI)r[5].setComponents(s,h,y,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ig.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ig.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ig)}intersectsSprite(e){return ig.center.set(0,0,0),ig.radius=.7071067811865476,ig.applyMatrix4(e.matrixWorld),this.intersectsSphere(ig)}intersectsSphere(e){let t=this.planes,r=e.center,n=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let n=t[r];if(JM.x=n.normal.x>0?e.max.x:e.min.x,JM.y=n.normal.y>0?e.max.y:e.min.y,JM.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(JM)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Xoe(){let i=null,e=!1,t=null,r=null;function n(a,o){t(a,o),r=i.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(r=i.requestAnimationFrame(n),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function w3e(i,e){let t=e.isWebGL2,r=new WeakMap;function n(c,u){let h=c.array,d=c.usage,f=h.byteLength,m=i.createBuffer();i.bindBuffer(u,m),i.bufferData(u,h,d),c.onUploadCallback();let y;if(h instanceof Float32Array)y=i.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)y=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=i.SHORT;else if(h instanceof Uint32Array)y=i.UNSIGNED_INT;else if(h instanceof Int32Array)y=i.INT;else if(h instanceof Int8Array)y=i.BYTE;else if(h instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version,size:f}}function a(c,u,h){let d=u.array,f=u._updateRange,m=u.updateRanges;if(i.bindBuffer(h,c),f.count===-1&&m.length===0&&i.bufferSubData(h,0,d),m.length!==0){for(let y=0,g=m.length;y<g;y++){let x=m[y];t?i.bufferSubData(h,x.start*d.BYTES_PER_ELEMENT,d,x.start,x.count):i.bufferSubData(h,x.start*d.BYTES_PER_ELEMENT,d.subarray(x.start,x.start+x.count))}u.clearUpdateRanges()}f.count!==-1&&(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);let u=r.get(c);u&&(i.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){let d=r.get(c);(!d||d.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let h=r.get(c);if(h===void 0)r.set(c,n(c,u));else if(h.version<c.version){if(h.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(h.buffer,c,u),h.version=c.version}}return{get:o,remove:s,update:l}}var u5=class i extends $s{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};let a=e/2,o=t/2,s=Math.floor(r),l=Math.floor(n),c=s+1,u=l+1,h=e/s,d=t/l,f=[],m=[],y=[],g=[];for(let x=0;x<u;x++){let b=x*d-o;for(let S=0;S<c;S++){let E=S*h-a;m.push(E,-b,0),y.push(0,0,1),g.push(S/s),g.push(1-x/l)}}for(let x=0;x<l;x++)for(let b=0;b<s;b++){let S=b+c*x,E=b+c*(x+1),D=b+1+c*(x+1),B=b+1+c*x;f.push(S,E,B),f.push(E,D,B)}this.setIndex(f),this.setAttribute("position",new Ro(m,3)),this.setAttribute("normal",new Ro(y,3)),this.setAttribute("uv",new Ro(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.widthSegments,e.heightSegments)}},b3e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,S3e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,C3e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,E3e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T3e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,M3e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,I3e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,B3e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,D3e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,R3e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,P3e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,L3e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,O3e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,F3e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,N3e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,U3e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,k3e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,z3e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,V3e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,H3e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Q3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,G3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,W3e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,j3e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,K3e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,X3e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Y3e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,q3e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Z3e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,J3e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$3e="gl_FragColor = linearToOutputTexel( gl_FragColor );",eOe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tOe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iOe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rOe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nOe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aOe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,oOe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,sOe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lOe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cOe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uOe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hOe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,dOe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fOe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pOe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,AOe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mOe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gOe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vOe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yOe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,xOe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_Oe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,wOe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bOe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SOe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,COe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,EOe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TOe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,IOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,BOe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DOe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ROe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,POe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LOe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,OOe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FOe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NOe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,UOe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kOe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zOe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VOe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HOe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QOe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GOe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WOe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jOe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,KOe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,XOe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,YOe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qOe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ZOe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,JOe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$Oe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,nFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,aFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,sFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uFe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,AFe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gFe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_Fe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,wFe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,bFe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CFe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TFe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MFe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,IFe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,BFe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,DFe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PFe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LFe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OFe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FFe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NFe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UFe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kFe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zFe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VFe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HFe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,QFe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GFe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WFe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jFe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KFe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XFe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YFe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qFe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZFe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JFe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Fe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eNe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tNe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rr={alphahash_fragment:b3e,alphahash_pars_fragment:S3e,alphamap_fragment:C3e,alphamap_pars_fragment:E3e,alphatest_fragment:T3e,alphatest_pars_fragment:M3e,aomap_fragment:I3e,aomap_pars_fragment:B3e,batching_pars_vertex:D3e,batching_vertex:R3e,begin_vertex:P3e,beginnormal_vertex:L3e,bsdfs:O3e,iridescence_fragment:F3e,bumpmap_pars_fragment:N3e,clipping_planes_fragment:U3e,clipping_planes_pars_fragment:k3e,clipping_planes_pars_vertex:z3e,clipping_planes_vertex:V3e,color_fragment:H3e,color_pars_fragment:Q3e,color_pars_vertex:G3e,color_vertex:W3e,common:j3e,cube_uv_reflection_fragment:K3e,defaultnormal_vertex:X3e,displacementmap_pars_vertex:Y3e,displacementmap_vertex:q3e,emissivemap_fragment:Z3e,emissivemap_pars_fragment:J3e,colorspace_fragment:$3e,colorspace_pars_fragment:eOe,envmap_fragment:tOe,envmap_common_pars_fragment:iOe,envmap_pars_fragment:rOe,envmap_pars_vertex:nOe,envmap_physical_pars_fragment:mOe,envmap_vertex:aOe,fog_vertex:oOe,fog_pars_vertex:sOe,fog_fragment:lOe,fog_pars_fragment:cOe,gradientmap_pars_fragment:uOe,lightmap_fragment:hOe,lightmap_pars_fragment:dOe,lights_lambert_fragment:fOe,lights_lambert_pars_fragment:pOe,lights_pars_begin:AOe,lights_toon_fragment:gOe,lights_toon_pars_fragment:vOe,lights_phong_fragment:yOe,lights_phong_pars_fragment:xOe,lights_physical_fragment:_Oe,lights_physical_pars_fragment:wOe,lights_fragment_begin:bOe,lights_fragment_maps:SOe,lights_fragment_end:COe,logdepthbuf_fragment:EOe,logdepthbuf_pars_fragment:TOe,logdepthbuf_pars_vertex:MOe,logdepthbuf_vertex:IOe,map_fragment:BOe,map_pars_fragment:DOe,map_particle_fragment:ROe,map_particle_pars_fragment:POe,metalnessmap_fragment:LOe,metalnessmap_pars_fragment:OOe,morphcolor_vertex:FOe,morphnormal_vertex:NOe,morphtarget_pars_vertex:UOe,morphtarget_vertex:kOe,normal_fragment_begin:zOe,normal_fragment_maps:VOe,normal_pars_fragment:HOe,normal_pars_vertex:QOe,normal_vertex:GOe,normalmap_pars_fragment:WOe,clearcoat_normal_fragment_begin:jOe,clearcoat_normal_fragment_maps:KOe,clearcoat_pars_fragment:XOe,iridescence_pars_fragment:YOe,opaque_fragment:qOe,packing:ZOe,premultiplied_alpha_fragment:JOe,project_vertex:$Oe,dithering_fragment:eFe,dithering_pars_fragment:tFe,roughnessmap_fragment:iFe,roughnessmap_pars_fragment:rFe,shadowmap_pars_fragment:nFe,shadowmap_pars_vertex:aFe,shadowmap_vertex:oFe,shadowmask_pars_fragment:sFe,skinbase_vertex:lFe,skinning_pars_vertex:cFe,skinning_vertex:uFe,skinnormal_vertex:hFe,specularmap_fragment:dFe,specularmap_pars_fragment:fFe,tonemapping_fragment:pFe,tonemapping_pars_fragment:AFe,transmission_fragment:mFe,transmission_pars_fragment:gFe,uv_pars_fragment:vFe,uv_pars_vertex:yFe,uv_vertex:xFe,worldpos_vertex:_Fe,background_vert:wFe,background_frag:bFe,backgroundCube_vert:SFe,backgroundCube_frag:CFe,cube_vert:EFe,cube_frag:TFe,depth_vert:MFe,depth_frag:IFe,distanceRGBA_vert:BFe,distanceRGBA_frag:DFe,equirect_vert:RFe,equirect_frag:PFe,linedashed_vert:LFe,linedashed_frag:OFe,meshbasic_vert:FFe,meshbasic_frag:NFe,meshlambert_vert:UFe,meshlambert_frag:kFe,meshmatcap_vert:zFe,meshmatcap_frag:VFe,meshnormal_vert:HFe,meshnormal_frag:QFe,meshphong_vert:GFe,meshphong_frag:WFe,meshphysical_vert:jFe,meshphysical_frag:KFe,meshtoon_vert:XFe,meshtoon_frag:YFe,points_vert:qFe,points_frag:ZFe,shadow_vert:JFe,shadow_frag:$Fe,sprite_vert:eNe,sprite_frag:tNe},ei={common:{diffuse:{value:new ji(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ur},alphaMap:{value:null},alphaMapTransform:{value:new Ur},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ur}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ur}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ur}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ur},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ur},normalScale:{value:new Hr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ur},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ur}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ur}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ur}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ji(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ji(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ur},alphaTest:{value:0},uvTransform:{value:new Ur}},sprite:{diffuse:{value:new ji(16777215)},opacity:{value:1},center:{value:new Hr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ur},alphaMap:{value:null},alphaMapTransform:{value:new Ur},alphaTest:{value:0}}},Nh={basic:{uniforms:Zs([ei.common,ei.specularmap,ei.envmap,ei.aomap,ei.lightmap,ei.fog]),vertexShader:Rr.meshbasic_vert,fragmentShader:Rr.meshbasic_frag},lambert:{uniforms:Zs([ei.common,ei.specularmap,ei.envmap,ei.aomap,ei.lightmap,ei.emissivemap,ei.bumpmap,ei.normalmap,ei.displacementmap,ei.fog,ei.lights,{emissive:{value:new ji(0)}}]),vertexShader:Rr.meshlambert_vert,fragmentShader:Rr.meshlambert_frag},phong:{uniforms:Zs([ei.common,ei.specularmap,ei.envmap,ei.aomap,ei.lightmap,ei.emissivemap,ei.bumpmap,ei.normalmap,ei.displacementmap,ei.fog,ei.lights,{emissive:{value:new ji(0)},specular:{value:new ji(1118481)},shininess:{value:30}}]),vertexShader:Rr.meshphong_vert,fragmentShader:Rr.meshphong_frag},standard:{uniforms:Zs([ei.common,ei.envmap,ei.aomap,ei.lightmap,ei.emissivemap,ei.bumpmap,ei.normalmap,ei.displacementmap,ei.roughnessmap,ei.metalnessmap,ei.fog,ei.lights,{emissive:{value:new ji(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},toon:{uniforms:Zs([ei.common,ei.aomap,ei.lightmap,ei.emissivemap,ei.bumpmap,ei.normalmap,ei.displacementmap,ei.gradientmap,ei.fog,ei.lights,{emissive:{value:new ji(0)}}]),vertexShader:Rr.meshtoon_vert,fragmentShader:Rr.meshtoon_frag},matcap:{uniforms:Zs([ei.common,ei.bumpmap,ei.normalmap,ei.displacementmap,ei.fog,{matcap:{value:null}}]),vertexShader:Rr.meshmatcap_vert,fragmentShader:Rr.meshmatcap_frag},points:{uniforms:Zs([ei.points,ei.fog]),vertexShader:Rr.points_vert,fragmentShader:Rr.points_frag},dashed:{uniforms:Zs([ei.common,ei.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rr.linedashed_vert,fragmentShader:Rr.linedashed_frag},depth:{uniforms:Zs([ei.common,ei.displacementmap]),vertexShader:Rr.depth_vert,fragmentShader:Rr.depth_frag},normal:{uniforms:Zs([ei.common,ei.bumpmap,ei.normalmap,ei.displacementmap,{opacity:{value:1}}]),vertexShader:Rr.meshnormal_vert,fragmentShader:Rr.meshnormal_frag},sprite:{uniforms:Zs([ei.sprite,ei.fog]),vertexShader:Rr.sprite_vert,fragmentShader:Rr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ur},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rr.background_vert,fragmentShader:Rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rr.backgroundCube_vert,fragmentShader:Rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rr.cube_vert,fragmentShader:Rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rr.equirect_vert,fragmentShader:Rr.equirect_frag},distanceRGBA:{uniforms:Zs([ei.common,ei.displacementmap,{referencePosition:{value:new Ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rr.distanceRGBA_vert,fragmentShader:Rr.distanceRGBA_frag},shadow:{uniforms:Zs([ei.lights,ei.fog,{color:{value:new ji(0)},opacity:{value:1}}]),vertexShader:Rr.shadow_vert,fragmentShader:Rr.shadow_frag}};Nh.physical={uniforms:Zs([Nh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ur},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ur},clearcoatNormalScale:{value:new Hr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ur},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ur},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ur},sheen:{value:0},sheenColor:{value:new ji(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ur},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ur},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ur},transmissionSamplerSize:{value:new Hr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ur},attenuationDistance:{value:0},attenuationColor:{value:new ji(0)},specularColor:{value:new ji(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ur},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ur},anisotropyVector:{value:new Hr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ur}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag};var $M={r:0,b:0,g:0};function iNe(i,e,t,r,n,a,o){let s=new ji(0),l=a===!0?0:1,c,u,h=null,d=0,f=null;function m(g,x){let b=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?t:e).get(S)),S===null?y(s,l):S&&S.isColor&&(y(S,1),b=!0);let E=i.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(i.autoClear||b)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),S&&(S.isCubeTexture||S.mapping===OI)?(u===void 0&&(u=new Ma(new ug(1,1,1),new Wd({name:"BackgroundCubeMaterial",uniforms:v1(Nh.backgroundCube.uniforms),vertexShader:Nh.backgroundCube.vertexShader,fragmentShader:Nh.backgroundCube.fragmentShader,side:Dl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(D,B,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=bn.getTransfer(S.colorSpace)!==ma,(h!==S||d!==S.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=S,d=S.version,f=i.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Ma(new u5(2,2),new Wd({name:"BackgroundMaterial",uniforms:v1(Nh.background.uniforms),vertexShader:Nh.background.vertexShader,fragmentShader:Nh.background.fragmentShader,side:kh,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=bn.getTransfer(S.colorSpace)!==ma,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||d!==S.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=S,d=S.version,f=i.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function y(g,x){g.getRGB($M,Koe(i)),r.buffers.color.setClear($M.r,$M.g,$M.b,x,o)}return{getClearColor:function(){return s},setClearColor:function(g,x=1){s.set(g),l=x,y(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,y(s,l)},render:m}}function rNe(i,e,t,r){let n=i.getParameter(i.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||a!==null,s={},l=g(null),c=l,u=!1;function h(Y,J,te,de,ue){let ve=!1;if(o){let _e=y(de,te,J);c!==_e&&(c=_e,f(c.object)),ve=x(Y,de,te,ue),ve&&b(Y,de,te,ue)}else{let _e=J.wireframe===!0;(c.geometry!==de.id||c.program!==te.id||c.wireframe!==_e)&&(c.geometry=de.id,c.program=te.id,c.wireframe=_e,ve=!0)}ue!==null&&t.update(ue,i.ELEMENT_ARRAY_BUFFER),(ve||u)&&(u=!1,H(Y,J,te,de),ue!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ue).buffer))}function d(){return r.isWebGL2?i.createVertexArray():a.createVertexArrayOES()}function f(Y){return r.isWebGL2?i.bindVertexArray(Y):a.bindVertexArrayOES(Y)}function m(Y){return r.isWebGL2?i.deleteVertexArray(Y):a.deleteVertexArrayOES(Y)}function y(Y,J,te){let de=te.wireframe===!0,ue=s[Y.id];ue===void 0&&(ue={},s[Y.id]=ue);let ve=ue[J.id];ve===void 0&&(ve={},ue[J.id]=ve);let _e=ve[de];return _e===void 0&&(_e=g(d()),ve[de]=_e),_e}function g(Y){let J=[],te=[],de=[];for(let ue=0;ue<n;ue++)J[ue]=0,te[ue]=0,de[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:te,attributeDivisors:de,object:Y,attributes:{},index:null}}function x(Y,J,te,de){let ue=c.attributes,ve=J.attributes,_e=0,Re=te.getAttributes();for(let Oe in Re)if(Re[Oe].location>=0){let Se=ue[Oe],nt=ve[Oe];if(nt===void 0&&(Oe==="instanceMatrix"&&Y.instanceMatrix&&(nt=Y.instanceMatrix),Oe==="instanceColor"&&Y.instanceColor&&(nt=Y.instanceColor)),Se===void 0||Se.attribute!==nt||nt&&Se.data!==nt.data)return!0;_e++}return c.attributesNum!==_e||c.index!==de}function b(Y,J,te,de){let ue={},ve=J.attributes,_e=0,Re=te.getAttributes();for(let Oe in Re)if(Re[Oe].location>=0){let Se=ve[Oe];Se===void 0&&(Oe==="instanceMatrix"&&Y.instanceMatrix&&(Se=Y.instanceMatrix),Oe==="instanceColor"&&Y.instanceColor&&(Se=Y.instanceColor));let nt={};nt.attribute=Se,Se&&Se.data&&(nt.data=Se.data),ue[Oe]=nt,_e++}c.attributes=ue,c.attributesNum=_e,c.index=de}function S(){let Y=c.newAttributes;for(let J=0,te=Y.length;J<te;J++)Y[J]=0}function E(Y){D(Y,0)}function D(Y,J){let te=c.newAttributes,de=c.enabledAttributes,ue=c.attributeDivisors;te[Y]=1,de[Y]===0&&(i.enableVertexAttribArray(Y),de[Y]=1),ue[Y]!==J&&((r.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,J),ue[Y]=J)}function B(){let Y=c.newAttributes,J=c.enabledAttributes;for(let te=0,de=J.length;te<de;te++)J[te]!==Y[te]&&(i.disableVertexAttribArray(te),J[te]=0)}function F(Y,J,te,de,ue,ve,_e){_e===!0?i.vertexAttribIPointer(Y,J,te,ue,ve):i.vertexAttribPointer(Y,J,te,de,ue,ve)}function H(Y,J,te,de){if(r.isWebGL2===!1&&(Y.isInstancedMesh||de.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();let ue=de.attributes,ve=te.getAttributes(),_e=J.defaultAttributeValues;for(let Re in ve){let Oe=ve[Re];if(Oe.location>=0){let Te=ue[Re];if(Te===void 0&&(Re==="instanceMatrix"&&Y.instanceMatrix&&(Te=Y.instanceMatrix),Re==="instanceColor"&&Y.instanceColor&&(Te=Y.instanceColor)),Te!==void 0){let Se=Te.normalized,nt=Te.itemSize,rt=t.get(Te);if(rt===void 0)continue;let dt=rt.buffer,tt=rt.type,ht=rt.bytesPerElement,pt=r.isWebGL2===!0&&(tt===i.INT||tt===i.UNSIGNED_INT||Te.gpuType===Loe);if(Te.isInterleavedBufferAttribute){let Je=Te.data,Ie=Je.stride,Bi=Te.offset;if(Je.isInstancedInterleavedBuffer){for(let _t=0;_t<Oe.locationSize;_t++)D(Oe.location+_t,Je.meshPerAttribute);Y.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=Je.meshPerAttribute*Je.count)}else for(let _t=0;_t<Oe.locationSize;_t++)E(Oe.location+_t);i.bindBuffer(i.ARRAY_BUFFER,dt);for(let _t=0;_t<Oe.locationSize;_t++)F(Oe.location+_t,nt/Oe.locationSize,tt,Se,Ie*ht,(Bi+nt/Oe.locationSize*_t)*ht,pt)}else{if(Te.isInstancedBufferAttribute){for(let Je=0;Je<Oe.locationSize;Je++)D(Oe.location+Je,Te.meshPerAttribute);Y.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Je=0;Je<Oe.locationSize;Je++)E(Oe.location+Je);i.bindBuffer(i.ARRAY_BUFFER,dt);for(let Je=0;Je<Oe.locationSize;Je++)F(Oe.location+Je,nt/Oe.locationSize,tt,Se,nt*ht,nt/Oe.locationSize*Je*ht,pt)}}else if(_e!==void 0){let Se=_e[Re];if(Se!==void 0)switch(Se.length){case 2:i.vertexAttrib2fv(Oe.location,Se);break;case 3:i.vertexAttrib3fv(Oe.location,Se);break;case 4:i.vertexAttrib4fv(Oe.location,Se);break;default:i.vertexAttrib1fv(Oe.location,Se)}}}}B()}function U(){q();for(let Y in s){let J=s[Y];for(let te in J){let de=J[te];for(let ue in de)m(de[ue].object),delete de[ue];delete J[te]}delete s[Y]}}function k(Y){if(s[Y.id]===void 0)return;let J=s[Y.id];for(let te in J){let de=J[te];for(let ue in de)m(de[ue].object),delete de[ue];delete J[te]}delete s[Y.id]}function j(Y){for(let J in s){let te=s[J];if(te[Y.id]===void 0)continue;let de=te[Y.id];for(let ue in de)m(de[ue].object),delete de[ue];delete te[Y.id]}}function q(){X(),u=!0,c!==l&&(c=l,f(c.object))}function X(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:q,resetDefaultState:X,dispose:U,releaseStatesOfGeometry:k,releaseStatesOfProgram:j,initAttributes:S,enableAttribute:E,disableUnusedAttributes:B}}function nNe(i,e,t,r){let n=r.isWebGL2,a;function o(u){a=u}function s(u,h){i.drawArrays(a,u,h),t.update(h,a,1)}function l(u,h,d){if(d===0)return;let f,m;if(n)f=i,m="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](a,u,h,d),t.update(h,a,d)}function c(u,h,d){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<d;m++)this.render(u[m],h[m]);else{f.multiDrawArraysWEBGL(a,u,0,h,0,d);let m=0;for(let y=0;y<d;y++)m+=h[y];t.update(m,a,1)}}this.setMode=o,this.render=s,this.renderInstances=l,this.renderMultiDraw=c}function aNe(i,e,t){let r;function n(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let F=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext",s=t.precision!==void 0?t.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_TEXTURE_SIZE),m=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),y=i.getParameter(i.MAX_VERTEX_ATTRIBS),g=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),x=i.getParameter(i.MAX_VARYING_VECTORS),b=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),S=d>0,E=o||e.has("OES_texture_float"),D=S&&E,B=o?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:m,maxAttributes:y,maxVertexUniforms:g,maxVaryings:x,maxFragmentUniforms:b,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:D,maxSamples:B}}function oNe(i){let e=this,t=null,r=0,n=!1,a=!1,o=new kd,s=new Ur,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){let f=h.length!==0||d||r!==0||n;return n=d,r=h.length,f},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){let m=h.clippingPlanes,y=h.clipIntersection,g=h.clipShadows,x=i.get(h);if(!n||m===null||m.length===0||a&&!g)a?u(null):c();else{let b=a?0:r,S=b*4,E=x.clippingState||null;l.value=E,E=u(m,d,S,f);for(let D=0;D!==S;++D)E[D]=t[D];x.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,m){let y=h!==null?h.length:0,g=null;if(y!==0){if(g=l.value,m!==!0||g===null){let x=f+y*4,b=d.matrixWorldInverse;s.getNormalMatrix(b),(g===null||g.length<x)&&(g=new Float32Array(x));for(let S=0,E=f;S!==y;++S,E+=4)o.copy(h[S]).applyMatrix4(b,s),o.normal.toArray(g,E),g[E+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function sNe(i){let e=new WeakMap;function t(o,s){return s===Sw?o.mapping=d1:s===i5&&(o.mapping=f1),o}function r(o){if(o&&o.isTexture){let s=o.mapping;if(s===Sw||s===i5)if(e.has(o)){let l=e.get(o).texture;return t(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new c5(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",n),t(c.texture,o.mapping)}else return null}}return o}function n(o){let s=o.target;s.removeEventListener("dispose",n);let l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}var y1=class extends xI{constructor(e=-1,t=1,r=1,n=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,a=r-e,o=r+e,s=n+t,l=n-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,o=a+c*this.view.width,s-=u*this.view.offsetY,l=s-u*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},s1=4,Kae=[.125,.215,.35,.446,.526,.582],ag=20,Gk=new y1,Xae=new ji,Wk=null,jk=0,Kk=0,rg=(1+Math.sqrt(5))/2,n1=1/rg,Yae=[new Ne(1,1,1),new Ne(-1,1,1),new Ne(1,1,-1),new Ne(-1,1,-1),new Ne(0,rg,n1),new Ne(0,rg,-n1),new Ne(n1,0,rg),new Ne(-n1,0,rg),new Ne(rg,n1,0),new Ne(-rg,n1,0)],wI=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){Wk=this._renderer.getRenderTarget(),jk=this._renderer.getActiveCubeFace(),Kk=this._renderer.getActiveMipmapLevel(),this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,n,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Jae(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Zae(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Wk,jk,Kk),e.scissorTest=!1,eI(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===d1||e.mapping===f1?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Wk=this._renderer.getRenderTarget(),jk=this._renderer.getActiveCubeFace(),Kk=this._renderer.getActiveMipmapLevel();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:io,minFilter:io,generateMipmaps:!1,type:zh,format:qc,colorSpace:ro,depthBuffer:!1},n=qae(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qae(e,t,r);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lNe(a)),this._blurMaterial=cNe(a,e,t)}return n}_compileMaterial(e){let t=new Ma(this._lodPlanes[0],e);this._renderer.compile(t,Gk)}_sceneToCubeUV(e,t,r,n){let s=new ea(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(Xae),u.toneMapping=Wp,u.autoClear=!1;let f=new Vh({name:"PMREM.Background",side:Dl,depthWrite:!1,depthTest:!1}),m=new Ma(new ug,f),y=!1,g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,y=!0):(f.color.copy(Xae),y=!0);for(let x=0;x<6;x++){let b=x%3;b===0?(s.up.set(0,l[x],0),s.lookAt(c[x],0,0)):b===1?(s.up.set(0,0,l[x]),s.lookAt(0,c[x],0)):(s.up.set(0,l[x],0),s.lookAt(0,0,c[x]));let S=this._cubeSize;eI(n,b*S,x>2?S:0,S,S),u.setRenderTarget(n),y&&u.render(m,s),u.render(e,s)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=g}_textureToCubeUV(e,t){let r=this._renderer,n=e.mapping===d1||e.mapping===f1;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=Jae()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Zae());let a=n?this._cubemapMaterial:this._equirectMaterial,o=new Ma(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;let l=this._cubeSize;eI(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Gk)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let a=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=Yae[(n-1)%Yae.length];this._blur(e,n-1,n,a,o)}t.autoClear=r}_blur(e,t,r,n,a){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",a),this._halfBlur(o,e,r,r,n,"longitudinal",a)}_halfBlur(e,t,r,n,a,o,s){let l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,h=new Ma(this._lodPlanes[n],c),d=c.uniforms,f=this._sizeLods[r]-1,m=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*ag-1),y=a/m,g=isFinite(a)?1+Math.floor(u*y):ag;g>ag&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${ag}`);let x=[],b=0;for(let F=0;F<ag;++F){let H=F/y,U=Math.exp(-H*H/2);x.push(U),F===0?b+=U:F<g&&(b+=2*U)}for(let F=0;F<x.length;F++)x[F]=x[F]/b;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=x,d.latitudinal.value=o==="latitudinal",s&&(d.poleAxis.value=s);let{_lodMax:S}=this;d.dTheta.value=m,d.mipInt.value=S-r;let E=this._sizeLods[n],D=3*E*(n>S-s1?n-S+s1:0),B=4*(this._cubeSize-E);eI(t,D,B,3*E,2*E),l.setRenderTarget(t),l.render(h,Gk)}};function lNe(i){let e=[],t=[],r=[],n=i,a=i-s1+1+Kae.length;for(let o=0;o<a;o++){let s=Math.pow(2,n);t.push(s);let l=1/s;o>i-s1?l=Kae[o-i+s1-1]:o===0&&(l=0),r.push(l);let c=1/(s-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,m=6,y=3,g=2,x=1,b=new Float32Array(y*m*f),S=new Float32Array(g*m*f),E=new Float32Array(x*m*f);for(let B=0;B<f;B++){let F=B%3*2/3-1,H=B>2?0:-1,U=[F,H,0,F+2/3,H,0,F+2/3,H+1,0,F,H,0,F+2/3,H+1,0,F,H+1,0];b.set(U,y*m*B),S.set(d,g*m*B);let k=[B,B,B,B,B,B];E.set(k,x*m*B)}let D=new $s;D.setAttribute("position",new Do(b,y)),D.setAttribute("uv",new Do(S,g)),D.setAttribute("faceIndex",new Do(E,x)),e.push(D),n>s1&&n--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function qae(i,e,t){let r=new Gd(i,e,t);return r.texture.mapping=OI,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function eI(i,e,t,r,n){i.viewport.set(e,t,r,n),i.scissor.set(e,t,r,n)}function cNe(i,e,t){let r=new Float32Array(ag),n=new Ne(0,1,0);return new Wd({name:"SphericalGaussianBlur",defines:{n:ag,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:H5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gp,depthTest:!1,depthWrite:!1})}function Zae(){return new Wd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:H5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gp,depthTest:!1,depthWrite:!1})}function Jae(){return new Wd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:H5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gp,depthTest:!1,depthWrite:!1})}function H5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uNe(i){let e=new WeakMap,t=null;function r(s){if(s&&s.isTexture){let l=s.mapping,c=l===Sw||l===i5,u=l===d1||l===f1;if(c||u)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=e.get(s);return t===null&&(t=new wI(i)),h=c?t.fromEquirectangular(s,h):t.fromCubemap(s,h),e.set(s,h),h.texture}else{if(e.has(s))return e.get(s).texture;{let h=s.image;if(c&&h&&h.height>0||u&&h&&n(h)){t===null&&(t=new wI(i));let d=c?t.fromEquirectangular(s):t.fromCubemap(s);return e.set(s,d),s.addEventListener("dispose",a),d.texture}else return null}}}return s}function n(s){let l=0,c=6;for(let u=0;u<c;u++)s[u]!==void 0&&l++;return l===c}function a(s){let l=s.target;l.removeEventListener("dispose",a);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function hNe(i){let e={};function t(r){if(e[r]!==void 0)return e[r];let n;switch(r){case"WEBGL_depth_texture":n=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=i.getExtension(r)}return e[r]=n,n}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){let n=t(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function dNe(i,e,t,r){let n={},a=new WeakMap;function o(h){let d=h.target;d.index!==null&&e.remove(d.index);for(let m in d.attributes)e.remove(d.attributes[m]);for(let m in d.morphAttributes){let y=d.morphAttributes[m];for(let g=0,x=y.length;g<x;g++)e.remove(y[g])}d.removeEventListener("dispose",o),delete n[d.id];let f=a.get(d);f&&(e.remove(f),a.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function s(h,d){return n[d.id]===!0||(d.addEventListener("dispose",o),n[d.id]=!0,t.memory.geometries++),d}function l(h){let d=h.attributes;for(let m in d)e.update(d[m],i.ARRAY_BUFFER);let f=h.morphAttributes;for(let m in f){let y=f[m];for(let g=0,x=y.length;g<x;g++)e.update(y[g],i.ARRAY_BUFFER)}}function c(h){let d=[],f=h.index,m=h.attributes.position,y=0;if(f!==null){let b=f.array;y=f.version;for(let S=0,E=b.length;S<E;S+=3){let D=b[S+0],B=b[S+1],F=b[S+2];d.push(D,B,B,F,F,D)}}else if(m!==void 0){let b=m.array;y=m.version;for(let S=0,E=b.length/3-1;S<E;S+=3){let D=S+0,B=S+1,F=S+2;d.push(D,B,B,F,F,D)}}else return;let g=new(Woe(d)?yI:vI)(d,1);g.version=y;let x=a.get(h);x&&e.remove(x),a.set(h,g)}function u(h){let d=a.get(h);if(d){let f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:u}}function fNe(i,e,t,r){let n=r.isWebGL2,a;function o(f){a=f}let s,l;function c(f){s=f.type,l=f.bytesPerElement}function u(f,m){i.drawElements(a,m,s,f*l),t.update(m,a,1)}function h(f,m,y){if(y===0)return;let g,x;if(n)g=i,x="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[x](a,m,s,f*l,y),t.update(m,a,y)}function d(f,m,y){if(y===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let x=0;x<y;x++)this.render(f[x]/l,m[x]);else{g.multiDrawElementsWEBGL(a,m,0,s,f,0,y);let x=0;for(let b=0;b<y;b++)x+=m[b];t.update(x,a,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h,this.renderMultiDraw=d}function pNe(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=s*(a/3);break;case i.LINES:t.lines+=s*(a/2);break;case i.LINE_STRIP:t.lines+=s*(a-1);break;case i.LINE_LOOP:t.lines+=s*a;break;case i.POINTS:t.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:n,update:r}}function ANe(i,e){return i[0]-e[0]}function mNe(i,e){return Math.abs(e[1])-Math.abs(i[1])}function gNe(i,e,t){let r={},n=new Float32Array(8),a=new WeakMap,o=new $n,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,u,h){let d=c.morphTargetInfluences;if(e.isWebGL2===!0){let m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=m!==void 0?m.length:0,g=a.get(u);if(g===void 0||g.count!==y){let J=function(){X.dispose(),a.delete(u),u.removeEventListener("dispose",J)};var f=J;g!==void 0&&g.texture.dispose();let S=u.morphAttributes.position!==void 0,E=u.morphAttributes.normal!==void 0,D=u.morphAttributes.color!==void 0,B=u.morphAttributes.position||[],F=u.morphAttributes.normal||[],H=u.morphAttributes.color||[],U=0;S===!0&&(U=1),E===!0&&(U=2),D===!0&&(U=3);let k=u.attributes.position.count*U,j=1;k>e.maxTextureSize&&(j=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);let q=new Float32Array(k*j*4*y),X=new mI(q,k,j,y);X.type=sc,X.needsUpdate=!0;let Y=U*4;for(let te=0;te<y;te++){let de=B[te],ue=F[te],ve=H[te],_e=k*j*4*te;for(let Re=0;Re<de.count;Re++){let Oe=Re*Y;S===!0&&(o.fromBufferAttribute(de,Re),q[_e+Oe+0]=o.x,q[_e+Oe+1]=o.y,q[_e+Oe+2]=o.z,q[_e+Oe+3]=0),E===!0&&(o.fromBufferAttribute(ue,Re),q[_e+Oe+4]=o.x,q[_e+Oe+5]=o.y,q[_e+Oe+6]=o.z,q[_e+Oe+7]=0),D===!0&&(o.fromBufferAttribute(ve,Re),q[_e+Oe+8]=o.x,q[_e+Oe+9]=o.y,q[_e+Oe+10]=o.z,q[_e+Oe+11]=ve.itemSize===4?o.w:1)}}g={count:y,texture:X,size:new Hr(k,j)},a.set(u,g),u.addEventListener("dispose",J)}let x=0;for(let S=0;S<d.length;S++)x+=d[S];let b=u.morphTargetsRelative?1:1-x;h.getUniforms().setValue(i,"morphTargetBaseInfluence",b),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}else{let m=d===void 0?0:d.length,y=r[u.id];if(y===void 0||y.length!==m){y=[];for(let E=0;E<m;E++)y[E]=[E,0];r[u.id]=y}for(let E=0;E<m;E++){let D=y[E];D[0]=E,D[1]=d[E]}y.sort(mNe);for(let E=0;E<8;E++)E<m&&y[E][1]?(s[E][0]=y[E][0],s[E][1]=y[E][1]):(s[E][0]=Number.MAX_SAFE_INTEGER,s[E][1]=0);s.sort(ANe);let g=u.morphAttributes.position,x=u.morphAttributes.normal,b=0;for(let E=0;E<8;E++){let D=s[E],B=D[0],F=D[1];B!==Number.MAX_SAFE_INTEGER&&F?(g&&u.getAttribute("morphTarget"+E)!==g[B]&&u.setAttribute("morphTarget"+E,g[B]),x&&u.getAttribute("morphNormal"+E)!==x[B]&&u.setAttribute("morphNormal"+E,x[B]),n[E]=F,b+=F):(g&&u.hasAttribute("morphTarget"+E)===!0&&u.deleteAttribute("morphTarget"+E),x&&u.hasAttribute("morphNormal"+E)===!0&&u.deleteAttribute("morphNormal"+E),n[E]=0)}let S=u.morphTargetsRelative?1:1-b;h.getUniforms().setValue(i,"morphTargetBaseInfluence",S),h.getUniforms().setValue(i,"morphTargetInfluences",n)}}return{update:l}}function vNe(i,e,t,r){let n=new WeakMap;function a(l){let c=r.render.frame,u=l.geometry,h=e.get(l,u);if(n.get(h)!==c&&(e.update(h),n.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),n.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),n.set(l,c))),l.isSkinnedMesh){let d=l.skeleton;n.get(d)!==c&&(d.update(),n.set(d,c))}return h}function o(){n=new WeakMap}function s(l){let c=l.target;c.removeEventListener("dispose",s),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:a,dispose:o}}var bI=class extends qu{constructor(e,t,r,n,a,o,s,l,c,u){if(u=u!==void 0?u:sg,u!==sg&&u!==p1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===sg&&(r=Hp),r===void 0&&u===p1&&(r=og),super(null,n,a,o,s,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:Bo,this.minFilter=l!==void 0?l:Bo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},Yoe=new qu,qoe=new bI(1,1);qoe.compareFunction=Qoe;var Zoe=new mI,Joe=new s5,$oe=new _I,$ae=[],eoe=[],toe=new Float32Array(16),ioe=new Float32Array(9),roe=new Float32Array(4);function S1(i,e,t){let r=i[0];if(r<=0||r>0)return i;let n=e*t,a=$ae[n];if(a===void 0&&(a=new Float32Array(n),$ae[n]=a),e!==0){r.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=t,i[o].toArray(a,s)}return a}function Po(i,e){if(i.length!==e.length)return!1;for(let t=0,r=i.length;t<r;t++)if(i[t]!==e[t])return!1;return!0}function Lo(i,e){for(let t=0,r=e.length;t<r;t++)i[t]=e[t]}function UI(i,e){let t=eoe[e];t===void 0&&(t=new Int32Array(e),eoe[e]=t);for(let r=0;r!==e;++r)t[r]=i.allocateTextureUnit();return t}function yNe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function xNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Po(t,e))return;i.uniform2fv(this.addr,e),Lo(t,e)}}function _Ne(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Po(t,e))return;i.uniform3fv(this.addr,e),Lo(t,e)}}function wNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Po(t,e))return;i.uniform4fv(this.addr,e),Lo(t,e)}}function bNe(i,e){let t=this.cache,r=e.elements;if(r===void 0){if(Po(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Lo(t,e)}else{if(Po(t,r))return;roe.set(r),i.uniformMatrix2fv(this.addr,!1,roe),Lo(t,r)}}function SNe(i,e){let t=this.cache,r=e.elements;if(r===void 0){if(Po(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Lo(t,e)}else{if(Po(t,r))return;ioe.set(r),i.uniformMatrix3fv(this.addr,!1,ioe),Lo(t,r)}}function CNe(i,e){let t=this.cache,r=e.elements;if(r===void 0){if(Po(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Lo(t,e)}else{if(Po(t,r))return;toe.set(r),i.uniformMatrix4fv(this.addr,!1,toe),Lo(t,r)}}function ENe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function TNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Po(t,e))return;i.uniform2iv(this.addr,e),Lo(t,e)}}function MNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Po(t,e))return;i.uniform3iv(this.addr,e),Lo(t,e)}}function INe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Po(t,e))return;i.uniform4iv(this.addr,e),Lo(t,e)}}function BNe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function DNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Po(t,e))return;i.uniform2uiv(this.addr,e),Lo(t,e)}}function RNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Po(t,e))return;i.uniform3uiv(this.addr,e),Lo(t,e)}}function PNe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Po(t,e))return;i.uniform4uiv(this.addr,e),Lo(t,e)}}function LNe(i,e,t){let r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n);let a=this.type===i.SAMPLER_2D_SHADOW?qoe:Yoe;t.setTexture2D(e||a,n)}function ONe(i,e,t){let r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture3D(e||Joe,n)}function FNe(i,e,t){let r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTextureCube(e||$oe,n)}function NNe(i,e,t){let r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture2DArray(e||Zoe,n)}function UNe(i){switch(i){case 5126:return yNe;case 35664:return xNe;case 35665:return _Ne;case 35666:return wNe;case 35674:return bNe;case 35675:return SNe;case 35676:return CNe;case 5124:case 35670:return ENe;case 35667:case 35671:return TNe;case 35668:case 35672:return MNe;case 35669:case 35673:return INe;case 5125:return BNe;case 36294:return DNe;case 36295:return RNe;case 36296:return PNe;case 35678:case 36198:case 36298:case 36306:case 35682:return LNe;case 35679:case 36299:case 36307:return ONe;case 35680:case 36300:case 36308:case 36293:return FNe;case 36289:case 36303:case 36311:case 36292:return NNe}}function kNe(i,e){i.uniform1fv(this.addr,e)}function zNe(i,e){let t=S1(e,this.size,2);i.uniform2fv(this.addr,t)}function VNe(i,e){let t=S1(e,this.size,3);i.uniform3fv(this.addr,t)}function HNe(i,e){let t=S1(e,this.size,4);i.uniform4fv(this.addr,t)}function QNe(i,e){let t=S1(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function GNe(i,e){let t=S1(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function WNe(i,e){let t=S1(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function jNe(i,e){i.uniform1iv(this.addr,e)}function KNe(i,e){i.uniform2iv(this.addr,e)}function XNe(i,e){i.uniform3iv(this.addr,e)}function YNe(i,e){i.uniform4iv(this.addr,e)}function qNe(i,e){i.uniform1uiv(this.addr,e)}function ZNe(i,e){i.uniform2uiv(this.addr,e)}function JNe(i,e){i.uniform3uiv(this.addr,e)}function $Ne(i,e){i.uniform4uiv(this.addr,e)}function eUe(i,e,t){let r=this.cache,n=e.length,a=UI(t,n);Po(r,a)||(i.uniform1iv(this.addr,a),Lo(r,a));for(let o=0;o!==n;++o)t.setTexture2D(e[o]||Yoe,a[o])}function tUe(i,e,t){let r=this.cache,n=e.length,a=UI(t,n);Po(r,a)||(i.uniform1iv(this.addr,a),Lo(r,a));for(let o=0;o!==n;++o)t.setTexture3D(e[o]||Joe,a[o])}function iUe(i,e,t){let r=this.cache,n=e.length,a=UI(t,n);Po(r,a)||(i.uniform1iv(this.addr,a),Lo(r,a));for(let o=0;o!==n;++o)t.setTextureCube(e[o]||$oe,a[o])}function rUe(i,e,t){let r=this.cache,n=e.length,a=UI(t,n);Po(r,a)||(i.uniform1iv(this.addr,a),Lo(r,a));for(let o=0;o!==n;++o)t.setTexture2DArray(e[o]||Zoe,a[o])}function nUe(i){switch(i){case 5126:return kNe;case 35664:return zNe;case 35665:return VNe;case 35666:return HNe;case 35674:return QNe;case 35675:return GNe;case 35676:return WNe;case 5124:case 35670:return jNe;case 35667:case 35671:return KNe;case 35668:case 35672:return XNe;case 35669:case 35673:return YNe;case 5125:return qNe;case 36294:return ZNe;case 36295:return JNe;case 36296:return $Ne;case 35678:case 36198:case 36298:case 36306:case 35682:return eUe;case 35679:case 36299:case 36307:return tUe;case 35680:case 36300:case 36308:case 36293:return iUe;case 36289:case 36303:case 36311:case 36292:return rUe}}var h5=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=UNe(t.type)}},d5=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=nUe(t.type)}},f5=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let n=this.seq;for(let a=0,o=n.length;a!==o;++a){let s=n[a];s.setValue(e,t[s.id],r)}}},Xk=/(\w+)(\])?(\[|\.)?/g;function noe(i,e){i.seq.push(e),i.map[e.id]=e}function aUe(i,e,t){let r=i.name,n=r.length;for(Xk.lastIndex=0;;){let a=Xk.exec(r),o=Xk.lastIndex,s=a[1],l=a[2]==="]",c=a[3];if(l&&(s=s|0),c===void 0||c==="["&&o+2===n){noe(t,c===void 0?new h5(s,i,e):new d5(s,i,e));break}else{let h=t.map[s];h===void 0&&(h=new f5(s),noe(t,h)),t=h}}}var h1=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<r;++n){let a=e.getActiveUniform(t,n),o=e.getUniformLocation(t,a.name);aUe(a,o,this)}}setValue(e,t,r,n){let a=this.map[t];a!==void 0&&a.setValue(e,r,n)}setOptional(e,t,r){let n=t[r];n!==void 0&&this.setValue(e,r,n)}static upload(e,t,r,n){for(let a=0,o=t.length;a!==o;++a){let s=t[a],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,n)}}static seqWithValue(e,t){let r=[];for(let n=0,a=e.length;n!==a;++n){let o=e[n];o.id in t&&r.push(o)}return r}};function aoe(i,e,t){let r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}var oUe=37297,sUe=0;function lUe(i,e){let t=i.split(`
`),r=[],n=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let o=n;o<a;o++){let s=o+1;r.push(`${s===e?">":" "} ${s}: ${t[o]}`)}return r.join(`
`)}function cUe(i){let e=bn.getPrimaries(bn.workingColorSpace),t=bn.getPrimaries(i),r;switch(e===t?r="":e===hI&&t===uI?r="LinearDisplayP3ToLinearSRGB":e===uI&&t===hI&&(r="LinearSRGBToLinearDisplayP3"),i){case ro:case NI:return[r,"LinearTransferOETF"];case La:case z5:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[r,"LinearTransferOETF"]}}function ooe(i,e,t){let r=i.getShaderParameter(e,i.COMPILE_STATUS),n=i.getShaderInfoLog(e).trim();if(r&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let o=parseInt(a[1]);return t.toUpperCase()+`

`+n+`

`+lUe(i.getShaderSource(e),o)}else return n}function uUe(i,e){let t=cUe(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function hUe(i,e){let t;switch(e){case hLe:t="Linear";break;case dLe:t="Reinhard";break;case fLe:t="OptimizedCineon";break;case pLe:t="ACESFilmic";break;case mLe:t="AgX";break;case ALe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function dUe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(l1).join(`
`)}function fUe(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(l1).join(`
`)}function pUe(i){let e=[];for(let t in i){let r=i[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function AUe(i,e){let t={},r=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){let a=i.getActiveAttrib(e,n),o=a.name,s=1;a.type===i.FLOAT_MAT2&&(s=2),a.type===i.FLOAT_MAT3&&(s=3),a.type===i.FLOAT_MAT4&&(s=4),t[o]={type:a.type,location:i.getAttribLocation(e,o),locationSize:s}}return t}function l1(i){return i!==""}function soe(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function loe(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var mUe=/^[ \t]*#include +<([\w\d./]+)>/gm;function p5(i){return i.replace(mUe,vUe)}var gUe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function vUe(i,e){let t=Rr[e];if(t===void 0){let r=gUe.get(e);if(r!==void 0)t=Rr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return p5(t)}var yUe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function coe(i){return i.replace(yUe,xUe)}function xUe(i,e,t,r){let n="";for(let a=parseInt(e);a<parseInt(t);a++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function uoe(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function _Ue(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Poe?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===O5?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ud&&(e="SHADOWMAP_TYPE_VSM"),e}function wUe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case d1:case f1:e="ENVMAP_TYPE_CUBE";break;case OI:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bUe(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case f1:e="ENVMAP_MODE_REFRACTION";break}return e}function SUe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case F5:e="ENVMAP_BLENDING_MULTIPLY";break;case cLe:e="ENVMAP_BLENDING_MIX";break;case uLe:e="ENVMAP_BLENDING_ADD";break}return e}function CUe(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function EUe(i,e,t,r){let n=i.getContext(),a=t.defines,o=t.vertexShader,s=t.fragmentShader,l=_Ue(t),c=wUe(t),u=bUe(t),h=SUe(t),d=CUe(t),f=t.isWebGL2?"":dUe(t),m=fUe(t),y=pUe(a),g=n.createProgram(),x,b,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(l1).join(`
`),x.length>0&&(x+=`
`),b=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(l1).join(`
`),b.length>0&&(b+=`
`)):(x=[uoe(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(l1).join(`
`),b=[f,uoe(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wp?"#define TONE_MAPPING":"",t.toneMapping!==Wp?Rr.tonemapping_pars_fragment:"",t.toneMapping!==Wp?hUe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Rr.colorspace_pars_fragment,uUe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(l1).join(`
`)),o=p5(o),o=soe(o,t),o=loe(o,t),s=p5(s),s=soe(s,t),s=loe(s,t),o=coe(o),s=coe(s),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,b=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Iae?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Iae?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let E=S+x+o,D=S+b+s,B=aoe(n,n.VERTEX_SHADER,E),F=aoe(n,n.FRAGMENT_SHADER,D);n.attachShader(g,B),n.attachShader(g,F),t.index0AttributeName!==void 0?n.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(g,0,"position"),n.linkProgram(g);function H(q){if(i.debug.checkShaderErrors){let X=n.getProgramInfoLog(g).trim(),Y=n.getShaderInfoLog(B).trim(),J=n.getShaderInfoLog(F).trim(),te=!0,de=!0;if(n.getProgramParameter(g,n.LINK_STATUS)===!1)if(te=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(n,g,B,F);else{let ue=ooe(n,B,"vertex"),ve=ooe(n,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(g,n.VALIDATE_STATUS)+`

Program Info Log: `+X+`
`+ue+`
`+ve)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(Y===""||J==="")&&(de=!1);de&&(q.diagnostics={runnable:te,programLog:X,vertexShader:{log:Y,prefix:x},fragmentShader:{log:J,prefix:b}})}n.deleteShader(B),n.deleteShader(F),U=new h1(n,g),k=AUe(n,g)}let U;this.getUniforms=function(){return U===void 0&&H(this),U};let k;this.getAttributes=function(){return k===void 0&&H(this),k};let j=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return j===!1&&(j=n.getProgramParameter(g,oUe)),j},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=sUe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=B,this.fragmentShader=F,this}var TUe=0,A5=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new m5(e),t.set(e,r)),r}},m5=class{constructor(e){this.id=TUe++,this.code=e,this.usedTimes=0}};function MUe(i,e,t,r,n,a,o){let s=new gI,l=new A5,c=[],u=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.vertexTextures,f=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(U){return U===0?"uv":`uv${U}`}function g(U,k,j,q,X){let Y=q.fog,J=X.geometry,te=U.isMeshStandardMaterial?q.environment:null,de=(U.isMeshStandardMaterial?t:e).get(U.envMap||te),ue=de&&de.mapping===OI?de.image.height:null,ve=m[U.type];U.precision!==null&&(f=n.getMaxPrecision(U.precision),f!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",f,"instead."));let _e=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Re=_e!==void 0?_e.length:0,Oe=0;J.morphAttributes.position!==void 0&&(Oe=1),J.morphAttributes.normal!==void 0&&(Oe=2),J.morphAttributes.color!==void 0&&(Oe=3);let Te,Se,nt,rt;if(ve){let Ga=Nh[ve];Te=Ga.vertexShader,Se=Ga.fragmentShader}else Te=U.vertexShader,Se=U.fragmentShader,l.update(U),nt=l.getVertexShaderID(U),rt=l.getFragmentShaderID(U);let dt=i.getRenderTarget(),tt=X.isInstancedMesh===!0,ht=X.isBatchedMesh===!0,pt=!!U.map,Je=!!U.matcap,Ie=!!de,Bi=!!U.aoMap,_t=!!U.lightMap,It=!!U.bumpMap,Ct=!!U.normalMap,Xt=!!U.displacementMap,Oi=!!U.emissiveMap,ae=!!U.metalnessMap,se=!!U.roughnessMap,Ge=U.anisotropy>0,bt=U.clearcoat>0,gt=U.iridescence>0,mt=U.sheen>0,Ti=U.transmission>0,kt=Ge&&!!U.anisotropyMap,Qt=bt&&!!U.clearcoatMap,Ni=bt&&!!U.clearcoatNormalMap,Zi=bt&&!!U.clearcoatRoughnessMap,vt=gt&&!!U.iridescenceMap,vi=gt&&!!U.iridescenceThicknessMap,lt=mt&&!!U.sheenColorMap,Wi=mt&&!!U.sheenRoughnessMap,Lt=!!U.specularMap,Ot=!!U.specularColorMap,Hi=!!U.specularIntensityMap,Br=Ti&&!!U.transmissionMap,An=Ti&&!!U.thicknessMap,ti=!!U.gradientMap,Rt=!!U.alphaMap,Be=U.alphaTest>0,Gt=!!U.alphaHash,Bt=!!U.extensions,Qi=!!J.attributes.uv1,_i=!!J.attributes.uv2,Cr=!!J.attributes.uv3,zr=Wp;return U.toneMapped&&(dt===null||dt.isXRRenderTarget===!0)&&(zr=i.toneMapping),{isWebGL2:u,shaderID:ve,shaderType:U.type,shaderName:U.name,vertexShader:Te,fragmentShader:Se,defines:U.defines,customVertexShaderID:nt,customFragmentShaderID:rt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:f,batching:ht,instancing:tt,instancingColor:tt&&X.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:dt===null?i.outputColorSpace:dt.isXRRenderTarget===!0?dt.texture.colorSpace:ro,map:pt,matcap:Je,envMap:Ie,envMapMode:Ie&&de.mapping,envMapCubeUVHeight:ue,aoMap:Bi,lightMap:_t,bumpMap:It,normalMap:Ct,displacementMap:d&&Xt,emissiveMap:Oi,normalMapObjectSpace:Ct&&U.normalMapType===ILe,normalMapTangentSpace:Ct&&U.normalMapType===k5,metalnessMap:ae,roughnessMap:se,anisotropy:Ge,anisotropyMap:kt,clearcoat:bt,clearcoatMap:Qt,clearcoatNormalMap:Ni,clearcoatRoughnessMap:Zi,iridescence:gt,iridescenceMap:vt,iridescenceThicknessMap:vi,sheen:mt,sheenColorMap:lt,sheenRoughnessMap:Wi,specularMap:Lt,specularColorMap:Ot,specularIntensityMap:Hi,transmission:Ti,transmissionMap:Br,thicknessMap:An,gradientMap:ti,opaque:U.transparent===!1&&U.blending===c1,alphaMap:Rt,alphaTest:Be,alphaHash:Gt,combine:U.combine,mapUv:pt&&y(U.map.channel),aoMapUv:Bi&&y(U.aoMap.channel),lightMapUv:_t&&y(U.lightMap.channel),bumpMapUv:It&&y(U.bumpMap.channel),normalMapUv:Ct&&y(U.normalMap.channel),displacementMapUv:Xt&&y(U.displacementMap.channel),emissiveMapUv:Oi&&y(U.emissiveMap.channel),metalnessMapUv:ae&&y(U.metalnessMap.channel),roughnessMapUv:se&&y(U.roughnessMap.channel),anisotropyMapUv:kt&&y(U.anisotropyMap.channel),clearcoatMapUv:Qt&&y(U.clearcoatMap.channel),clearcoatNormalMapUv:Ni&&y(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Zi&&y(U.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&y(U.iridescenceMap.channel),iridescenceThicknessMapUv:vi&&y(U.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&y(U.sheenColorMap.channel),sheenRoughnessMapUv:Wi&&y(U.sheenRoughnessMap.channel),specularMapUv:Lt&&y(U.specularMap.channel),specularColorMapUv:Ot&&y(U.specularColorMap.channel),specularIntensityMapUv:Hi&&y(U.specularIntensityMap.channel),transmissionMapUv:Br&&y(U.transmissionMap.channel),thicknessMapUv:An&&y(U.thicknessMap.channel),alphaMapUv:Rt&&y(U.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ct||Ge),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:Qi,vertexUv2s:_i,vertexUv3s:Cr,pointsUvs:X.isPoints===!0&&!!J.attributes.uv&&(pt||Rt),fog:!!Y,useFog:U.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:X.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:Re,morphTextureStride:Oe,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:zr,useLegacyLights:i._useLegacyLights,decodeVideoTexture:pt&&U.map.isVideoTexture===!0&&bn.getTransfer(U.map.colorSpace)===ma,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Ku,flipSided:U.side===Dl,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:Bt&&U.extensions.derivatives===!0,extensionFragDepth:Bt&&U.extensions.fragDepth===!0,extensionDrawBuffers:Bt&&U.extensions.drawBuffers===!0,extensionShaderTextureLOD:Bt&&U.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Bt&&U.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()}}function x(U){let k=[];if(U.shaderID?k.push(U.shaderID):(k.push(U.customVertexShaderID),k.push(U.customFragmentShaderID)),U.defines!==void 0)for(let j in U.defines)k.push(j),k.push(U.defines[j]);return U.isRawShaderMaterial===!1&&(b(k,U),S(k,U),k.push(i.outputColorSpace)),k.push(U.customProgramCacheKey),k.join()}function b(U,k){U.push(k.precision),U.push(k.outputColorSpace),U.push(k.envMapMode),U.push(k.envMapCubeUVHeight),U.push(k.mapUv),U.push(k.alphaMapUv),U.push(k.lightMapUv),U.push(k.aoMapUv),U.push(k.bumpMapUv),U.push(k.normalMapUv),U.push(k.displacementMapUv),U.push(k.emissiveMapUv),U.push(k.metalnessMapUv),U.push(k.roughnessMapUv),U.push(k.anisotropyMapUv),U.push(k.clearcoatMapUv),U.push(k.clearcoatNormalMapUv),U.push(k.clearcoatRoughnessMapUv),U.push(k.iridescenceMapUv),U.push(k.iridescenceThicknessMapUv),U.push(k.sheenColorMapUv),U.push(k.sheenRoughnessMapUv),U.push(k.specularMapUv),U.push(k.specularColorMapUv),U.push(k.specularIntensityMapUv),U.push(k.transmissionMapUv),U.push(k.thicknessMapUv),U.push(k.combine),U.push(k.fogExp2),U.push(k.sizeAttenuation),U.push(k.morphTargetsCount),U.push(k.morphAttributeCount),U.push(k.numDirLights),U.push(k.numPointLights),U.push(k.numSpotLights),U.push(k.numSpotLightMaps),U.push(k.numHemiLights),U.push(k.numRectAreaLights),U.push(k.numDirLightShadows),U.push(k.numPointLightShadows),U.push(k.numSpotLightShadows),U.push(k.numSpotLightShadowsWithMaps),U.push(k.numLightProbes),U.push(k.shadowMapType),U.push(k.toneMapping),U.push(k.numClippingPlanes),U.push(k.numClipIntersection),U.push(k.depthPacking)}function S(U,k){s.disableAll(),k.isWebGL2&&s.enable(0),k.supportsVertexTextures&&s.enable(1),k.instancing&&s.enable(2),k.instancingColor&&s.enable(3),k.matcap&&s.enable(4),k.envMap&&s.enable(5),k.normalMapObjectSpace&&s.enable(6),k.normalMapTangentSpace&&s.enable(7),k.clearcoat&&s.enable(8),k.iridescence&&s.enable(9),k.alphaTest&&s.enable(10),k.vertexColors&&s.enable(11),k.vertexAlphas&&s.enable(12),k.vertexUv1s&&s.enable(13),k.vertexUv2s&&s.enable(14),k.vertexUv3s&&s.enable(15),k.vertexTangents&&s.enable(16),k.anisotropy&&s.enable(17),k.alphaHash&&s.enable(18),k.batching&&s.enable(19),U.push(s.mask),s.disableAll(),k.fog&&s.enable(0),k.useFog&&s.enable(1),k.flatShading&&s.enable(2),k.logarithmicDepthBuffer&&s.enable(3),k.skinning&&s.enable(4),k.morphTargets&&s.enable(5),k.morphNormals&&s.enable(6),k.morphColors&&s.enable(7),k.premultipliedAlpha&&s.enable(8),k.shadowMapEnabled&&s.enable(9),k.useLegacyLights&&s.enable(10),k.doubleSided&&s.enable(11),k.flipSided&&s.enable(12),k.useDepthPacking&&s.enable(13),k.dithering&&s.enable(14),k.transmission&&s.enable(15),k.sheen&&s.enable(16),k.opaque&&s.enable(17),k.pointsUvs&&s.enable(18),k.decodeVideoTexture&&s.enable(19),U.push(s.mask)}function E(U){let k=m[U.type],j;if(k){let q=Nh[k];j=g3e.clone(q.uniforms)}else j=U.uniforms;return j}function D(U,k){let j;for(let q=0,X=c.length;q<X;q++){let Y=c[q];if(Y.cacheKey===k){j=Y,++j.usedTimes;break}}return j===void 0&&(j=new EUe(i,k,U,a),c.push(j)),j}function B(U){if(--U.usedTimes===0){let k=c.indexOf(U);c[k]=c[c.length-1],c.pop(),U.destroy()}}function F(U){l.remove(U)}function H(){l.dispose()}return{getParameters:g,getProgramCacheKey:x,getUniforms:E,acquireProgram:D,releaseProgram:B,releaseShaderCache:F,programs:c,dispose:H}}function IUe(){let i=new WeakMap;function e(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function t(a){i.delete(a)}function r(a,o,s){i.get(a)[o]=s}function n(){i=new WeakMap}return{get:e,remove:t,update:r,dispose:n}}function BUe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function hoe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function doe(){let i=[],e=0,t=[],r=[],n=[];function a(){e=0,t.length=0,r.length=0,n.length=0}function o(h,d,f,m,y,g){let x=i[e];return x===void 0?(x={id:h.id,object:h,geometry:d,material:f,groupOrder:m,renderOrder:h.renderOrder,z:y,group:g},i[e]=x):(x.id=h.id,x.object=h,x.geometry=d,x.material=f,x.groupOrder=m,x.renderOrder=h.renderOrder,x.z=y,x.group=g),e++,x}function s(h,d,f,m,y,g){let x=o(h,d,f,m,y,g);f.transmission>0?r.push(x):f.transparent===!0?n.push(x):t.push(x)}function l(h,d,f,m,y,g){let x=o(h,d,f,m,y,g);f.transmission>0?r.unshift(x):f.transparent===!0?n.unshift(x):t.unshift(x)}function c(h,d){t.length>1&&t.sort(h||BUe),r.length>1&&r.sort(d||hoe),n.length>1&&n.sort(d||hoe)}function u(){for(let h=e,d=i.length;h<d;h++){let f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:n,init:a,push:s,unshift:l,finish:u,sort:c}}function DUe(){let i=new WeakMap;function e(r,n){let a=i.get(r),o;return a===void 0?(o=new doe,i.set(r,[o])):n>=a.length?(o=new doe,a.push(o)):o=a[n],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function RUe(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ne,color:new ji};break;case"SpotLight":t={position:new Ne,direction:new Ne,color:new ji,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ne,color:new ji,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ne,skyColor:new ji,groundColor:new ji};break;case"RectAreaLight":t={color:new ji,position:new Ne,halfWidth:new Ne,halfHeight:new Ne};break}return i[e.id]=t,t}}}function PUe(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Hr};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Hr};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Hr,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}var LUe=0;function OUe(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function FUe(i,e){let t=new RUe,r=PUe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new Ne);let a=new Ne,o=new kr,s=new kr;function l(u,h){let d=0,f=0,m=0;for(let q=0;q<9;q++)n.probe[q].set(0,0,0);let y=0,g=0,x=0,b=0,S=0,E=0,D=0,B=0,F=0,H=0,U=0;u.sort(OUe);let k=h===!0?Math.PI:1;for(let q=0,X=u.length;q<X;q++){let Y=u[q],J=Y.color,te=Y.intensity,de=Y.distance,ue=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)d+=J.r*te*k,f+=J.g*te*k,m+=J.b*te*k;else if(Y.isLightProbe){for(let ve=0;ve<9;ve++)n.probe[ve].addScaledVector(Y.sh.coefficients[ve],te);U++}else if(Y.isDirectionalLight){let ve=t.get(Y);if(ve.color.copy(Y.color).multiplyScalar(Y.intensity*k),Y.castShadow){let _e=Y.shadow,Re=r.get(Y);Re.shadowBias=_e.bias,Re.shadowNormalBias=_e.normalBias,Re.shadowRadius=_e.radius,Re.shadowMapSize=_e.mapSize,n.directionalShadow[y]=Re,n.directionalShadowMap[y]=ue,n.directionalShadowMatrix[y]=Y.shadow.matrix,E++}n.directional[y]=ve,y++}else if(Y.isSpotLight){let ve=t.get(Y);ve.position.setFromMatrixPosition(Y.matrixWorld),ve.color.copy(J).multiplyScalar(te*k),ve.distance=de,ve.coneCos=Math.cos(Y.angle),ve.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),ve.decay=Y.decay,n.spot[x]=ve;let _e=Y.shadow;if(Y.map&&(n.spotLightMap[F]=Y.map,F++,_e.updateMatrices(Y),Y.castShadow&&H++),n.spotLightMatrix[x]=_e.matrix,Y.castShadow){let Re=r.get(Y);Re.shadowBias=_e.bias,Re.shadowNormalBias=_e.normalBias,Re.shadowRadius=_e.radius,Re.shadowMapSize=_e.mapSize,n.spotShadow[x]=Re,n.spotShadowMap[x]=ue,B++}x++}else if(Y.isRectAreaLight){let ve=t.get(Y);ve.color.copy(J).multiplyScalar(te),ve.halfWidth.set(Y.width*.5,0,0),ve.halfHeight.set(0,Y.height*.5,0),n.rectArea[b]=ve,b++}else if(Y.isPointLight){let ve=t.get(Y);if(ve.color.copy(Y.color).multiplyScalar(Y.intensity*k),ve.distance=Y.distance,ve.decay=Y.decay,Y.castShadow){let _e=Y.shadow,Re=r.get(Y);Re.shadowBias=_e.bias,Re.shadowNormalBias=_e.normalBias,Re.shadowRadius=_e.radius,Re.shadowMapSize=_e.mapSize,Re.shadowCameraNear=_e.camera.near,Re.shadowCameraFar=_e.camera.far,n.pointShadow[g]=Re,n.pointShadowMap[g]=ue,n.pointShadowMatrix[g]=Y.shadow.matrix,D++}n.point[g]=ve,g++}else if(Y.isHemisphereLight){let ve=t.get(Y);ve.skyColor.copy(Y.color).multiplyScalar(te*k),ve.groundColor.copy(Y.groundColor).multiplyScalar(te*k),n.hemi[S]=ve,S++}}b>0&&(e.isWebGL2?i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ei.LTC_FLOAT_1,n.rectAreaLTC2=ei.LTC_FLOAT_2):(n.rectAreaLTC1=ei.LTC_HALF_1,n.rectAreaLTC2=ei.LTC_HALF_2):i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ei.LTC_FLOAT_1,n.rectAreaLTC2=ei.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=ei.LTC_HALF_1,n.rectAreaLTC2=ei.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=m;let j=n.hash;(j.directionalLength!==y||j.pointLength!==g||j.spotLength!==x||j.rectAreaLength!==b||j.hemiLength!==S||j.numDirectionalShadows!==E||j.numPointShadows!==D||j.numSpotShadows!==B||j.numSpotMaps!==F||j.numLightProbes!==U)&&(n.directional.length=y,n.spot.length=x,n.rectArea.length=b,n.point.length=g,n.hemi.length=S,n.directionalShadow.length=E,n.directionalShadowMap.length=E,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=E,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+F-H,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=H,n.numLightProbes=U,j.directionalLength=y,j.pointLength=g,j.spotLength=x,j.rectAreaLength=b,j.hemiLength=S,j.numDirectionalShadows=E,j.numPointShadows=D,j.numSpotShadows=B,j.numSpotMaps=F,j.numLightProbes=U,n.version=LUe++)}function c(u,h){let d=0,f=0,m=0,y=0,g=0,x=h.matrixWorldInverse;for(let b=0,S=u.length;b<S;b++){let E=u[b];if(E.isDirectionalLight){let D=n.directional[d];D.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(x),d++}else if(E.isSpotLight){let D=n.spot[m];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),D.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(x),m++}else if(E.isRectAreaLight){let D=n.rectArea[y];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),s.identity(),o.copy(E.matrixWorld),o.premultiply(x),s.extractRotation(o),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),y++}else if(E.isPointLight){let D=n.point[f];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),f++}else if(E.isHemisphereLight){let D=n.hemi[g];D.direction.setFromMatrixPosition(E.matrixWorld),D.direction.transformDirection(x),g++}}}return{setup:l,setupView:c,state:n}}function foe(i,e){let t=new FUe(i,e),r=[],n=[];function a(){r.length=0,n.length=0}function o(h){r.push(h)}function s(h){n.push(h)}function l(h){t.setup(r,h)}function c(h){t.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:n,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:s}}function NUe(i,e){let t=new WeakMap;function r(a,o=0){let s=t.get(a),l;return s===void 0?(l=new foe(i,e),t.set(a,[l])):o>=s.length?(l=new foe(i,e),s.push(l)):l=s[o],l}function n(){t=new WeakMap}return{get:r,dispose:n}}var g5=class extends cs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=TLe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},v5=class extends cs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},UUe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kUe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zUe(i,e,t){let r=new Tw,n=new Hr,a=new Hr,o=new $n,s=new g5({depthPacking:MLe}),l=new v5,c={},u=t.maxTextureSize,h={[kh]:Dl,[Dl]:kh,[Ku]:Ku},d=new Wd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Hr},radius:{value:4}},vertexShader:UUe,fragmentShader:kUe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let m=new $s;m.setAttribute("position",new Do(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new Ma(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Poe;let x=this.type;this.render=function(B,F,H){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||B.length===0)return;let U=i.getRenderTarget(),k=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),q=i.state;q.setBlending(Gp),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);let X=x!==Ud&&this.type===Ud,Y=x===Ud&&this.type!==Ud;for(let J=0,te=B.length;J<te;J++){let de=B[J],ue=de.shadow;if(ue===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(ue.autoUpdate===!1&&ue.needsUpdate===!1)continue;n.copy(ue.mapSize);let ve=ue.getFrameExtents();if(n.multiply(ve),a.copy(ue.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(a.x=Math.floor(u/ve.x),n.x=a.x*ve.x,ue.mapSize.x=a.x),n.y>u&&(a.y=Math.floor(u/ve.y),n.y=a.y*ve.y,ue.mapSize.y=a.y)),ue.map===null||X===!0||Y===!0){let Re=this.type!==Ud?{minFilter:Bo,magFilter:Bo}:{};ue.map!==null&&ue.map.dispose(),ue.map=new Gd(n.x,n.y,Re),ue.map.texture.name=de.name+".shadowMap",ue.camera.updateProjectionMatrix()}i.setRenderTarget(ue.map),i.clear();let _e=ue.getViewportCount();for(let Re=0;Re<_e;Re++){let Oe=ue.getViewport(Re);o.set(a.x*Oe.x,a.y*Oe.y,a.x*Oe.z,a.y*Oe.w),q.viewport(o),ue.updateMatrices(de,Re),r=ue.getFrustum(),E(F,H,ue.camera,de,this.type)}ue.isPointLightShadow!==!0&&this.type===Ud&&b(ue,H),ue.needsUpdate=!1}x=this.type,g.needsUpdate=!1,i.setRenderTarget(U,k,j)};function b(B,F){let H=e.update(y);d.defines.VSM_SAMPLES!==B.blurSamples&&(d.defines.VSM_SAMPLES=B.blurSamples,f.defines.VSM_SAMPLES=B.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Gd(n.x,n.y)),d.uniforms.shadow_pass.value=B.map.texture,d.uniforms.resolution.value=B.mapSize,d.uniforms.radius.value=B.radius,i.setRenderTarget(B.mapPass),i.clear(),i.renderBufferDirect(F,null,H,d,y,null),f.uniforms.shadow_pass.value=B.mapPass.texture,f.uniforms.resolution.value=B.mapSize,f.uniforms.radius.value=B.radius,i.setRenderTarget(B.map),i.clear(),i.renderBufferDirect(F,null,H,f,y,null)}function S(B,F,H,U){let k=null,j=H.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(j!==void 0)k=j;else if(k=H.isPointLight===!0?l:s,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){let q=k.uuid,X=F.uuid,Y=c[q];Y===void 0&&(Y={},c[q]=Y);let J=Y[X];J===void 0&&(J=k.clone(),Y[X]=J,F.addEventListener("dispose",D)),k=J}if(k.visible=F.visible,k.wireframe=F.wireframe,U===Ud?k.side=F.shadowSide!==null?F.shadowSide:F.side:k.side=F.shadowSide!==null?F.shadowSide:h[F.side],k.alphaMap=F.alphaMap,k.alphaTest=F.alphaTest,k.map=F.map,k.clipShadows=F.clipShadows,k.clippingPlanes=F.clippingPlanes,k.clipIntersection=F.clipIntersection,k.displacementMap=F.displacementMap,k.displacementScale=F.displacementScale,k.displacementBias=F.displacementBias,k.wireframeLinewidth=F.wireframeLinewidth,k.linewidth=F.linewidth,H.isPointLight===!0&&k.isMeshDistanceMaterial===!0){let q=i.properties.get(k);q.light=H}return k}function E(B,F,H,U,k){if(B.visible===!1)return;if(B.layers.test(F.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&k===Ud)&&(!B.frustumCulled||r.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,B.matrixWorld);let X=e.update(B),Y=B.material;if(Array.isArray(Y)){let J=X.groups;for(let te=0,de=J.length;te<de;te++){let ue=J[te],ve=Y[ue.materialIndex];if(ve&&ve.visible){let _e=S(B,ve,U,k);B.onBeforeShadow(i,B,F,H,X,_e,ue),i.renderBufferDirect(H,null,X,_e,B,ue),B.onAfterShadow(i,B,F,H,X,_e,ue)}}}else if(Y.visible){let J=S(B,Y,U,k);B.onBeforeShadow(i,B,F,H,X,J,null),i.renderBufferDirect(H,null,X,J,B,null),B.onAfterShadow(i,B,F,H,X,J,null)}}let q=B.children;for(let X=0,Y=q.length;X<Y;X++)E(q[X],F,H,U,k)}function D(B){B.target.removeEventListener("dispose",D);for(let H in c){let U=c[H],k=B.target.uuid;k in U&&(U[k].dispose(),delete U[k])}}}function VUe(i,e,t){let r=t.isWebGL2;function n(){let Be=!1,Gt=new $n,Bt=null,Qi=new $n(0,0,0,0);return{setMask:function(_i){Bt!==_i&&!Be&&(i.colorMask(_i,_i,_i,_i),Bt=_i)},setLocked:function(_i){Be=_i},setClear:function(_i,Cr,zr,en,Ga){Ga===!0&&(_i*=en,Cr*=en,zr*=en),Gt.set(_i,Cr,zr,en),Qi.equals(Gt)===!1&&(i.clearColor(_i,Cr,zr,en),Qi.copy(Gt))},reset:function(){Be=!1,Bt=null,Qi.set(-1,0,0,0)}}}function a(){let Be=!1,Gt=null,Bt=null,Qi=null;return{setTest:function(_i){_i?ht(i.DEPTH_TEST):pt(i.DEPTH_TEST)},setMask:function(_i){Gt!==_i&&!Be&&(i.depthMask(_i),Gt=_i)},setFunc:function(_i){if(Bt!==_i){switch(_i){case iLe:i.depthFunc(i.NEVER);break;case rLe:i.depthFunc(i.ALWAYS);break;case nLe:i.depthFunc(i.LESS);break;case sI:i.depthFunc(i.LEQUAL);break;case aLe:i.depthFunc(i.EQUAL);break;case oLe:i.depthFunc(i.GEQUAL);break;case sLe:i.depthFunc(i.GREATER);break;case lLe:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Bt=_i}},setLocked:function(_i){Be=_i},setClear:function(_i){Qi!==_i&&(i.clearDepth(_i),Qi=_i)},reset:function(){Be=!1,Gt=null,Bt=null,Qi=null}}}function o(){let Be=!1,Gt=null,Bt=null,Qi=null,_i=null,Cr=null,zr=null,en=null,Ga=null;return{setTest:function(Er){Be||(Er?ht(i.STENCIL_TEST):pt(i.STENCIL_TEST))},setMask:function(Er){Gt!==Er&&!Be&&(i.stencilMask(Er),Gt=Er)},setFunc:function(Er,ga,Di){(Bt!==Er||Qi!==ga||_i!==Di)&&(i.stencilFunc(Er,ga,Di),Bt=Er,Qi=ga,_i=Di)},setOp:function(Er,ga,Di){(Cr!==Er||zr!==ga||en!==Di)&&(i.stencilOp(Er,ga,Di),Cr=Er,zr=ga,en=Di)},setLocked:function(Er){Be=Er},setClear:function(Er){Ga!==Er&&(i.clearStencil(Er),Ga=Er)},reset:function(){Be=!1,Gt=null,Bt=null,Qi=null,_i=null,Cr=null,zr=null,en=null,Ga=null}}}let s=new n,l=new a,c=new o,u=new WeakMap,h=new WeakMap,d={},f={},m=new WeakMap,y=[],g=null,x=!1,b=null,S=null,E=null,D=null,B=null,F=null,H=null,U=new ji(0,0,0),k=0,j=!1,q=null,X=null,Y=null,J=null,te=null,de=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ue=!1,ve=0,_e=i.getParameter(i.VERSION);_e.indexOf("WebGL")!==-1?(ve=parseFloat(/^WebGL (\d)/.exec(_e)[1]),ue=ve>=1):_e.indexOf("OpenGL ES")!==-1&&(ve=parseFloat(/^OpenGL ES (\d)/.exec(_e)[1]),ue=ve>=2);let Re=null,Oe={},Te=i.getParameter(i.SCISSOR_BOX),Se=i.getParameter(i.VIEWPORT),nt=new $n().fromArray(Te),rt=new $n().fromArray(Se);function dt(Be,Gt,Bt,Qi){let _i=new Uint8Array(4),Cr=i.createTexture();i.bindTexture(Be,Cr),i.texParameteri(Be,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Be,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let zr=0;zr<Bt;zr++)r&&(Be===i.TEXTURE_3D||Be===i.TEXTURE_2D_ARRAY)?i.texImage3D(Gt,0,i.RGBA,1,1,Qi,0,i.RGBA,i.UNSIGNED_BYTE,_i):i.texImage2D(Gt+zr,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,_i);return Cr}let tt={};tt[i.TEXTURE_2D]=dt(i.TEXTURE_2D,i.TEXTURE_2D,1),tt[i.TEXTURE_CUBE_MAP]=dt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(tt[i.TEXTURE_2D_ARRAY]=dt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),tt[i.TEXTURE_3D]=dt(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ht(i.DEPTH_TEST),l.setFunc(sI),Oi(!1),ae(jne),ht(i.CULL_FACE),Ct(Gp);function ht(Be){d[Be]!==!0&&(i.enable(Be),d[Be]=!0)}function pt(Be){d[Be]!==!1&&(i.disable(Be),d[Be]=!1)}function Je(Be,Gt){return f[Be]!==Gt?(i.bindFramebuffer(Be,Gt),f[Be]=Gt,r&&(Be===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=Gt),Be===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=Gt)),!0):!1}function Ie(Be,Gt){let Bt=y,Qi=!1;if(Be)if(Bt=m.get(Gt),Bt===void 0&&(Bt=[],m.set(Gt,Bt)),Be.isWebGLMultipleRenderTargets){let _i=Be.texture;if(Bt.length!==_i.length||Bt[0]!==i.COLOR_ATTACHMENT0){for(let Cr=0,zr=_i.length;Cr<zr;Cr++)Bt[Cr]=i.COLOR_ATTACHMENT0+Cr;Bt.length=_i.length,Qi=!0}}else Bt[0]!==i.COLOR_ATTACHMENT0&&(Bt[0]=i.COLOR_ATTACHMENT0,Qi=!0);else Bt[0]!==i.BACK&&(Bt[0]=i.BACK,Qi=!0);Qi&&(t.isWebGL2?i.drawBuffers(Bt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Bt))}function Bi(Be){return g!==Be?(i.useProgram(Be),g=Be,!0):!1}let _t={[ng]:i.FUNC_ADD,[VPe]:i.FUNC_SUBTRACT,[HPe]:i.FUNC_REVERSE_SUBTRACT};if(r)_t[qne]=i.MIN,_t[Zne]=i.MAX;else{let Be=e.get("EXT_blend_minmax");Be!==null&&(_t[qne]=Be.MIN_EXT,_t[Zne]=Be.MAX_EXT)}let It={[QPe]:i.ZERO,[GPe]:i.ONE,[WPe]:i.SRC_COLOR,[e5]:i.SRC_ALPHA,[ZPe]:i.SRC_ALPHA_SATURATE,[YPe]:i.DST_COLOR,[KPe]:i.DST_ALPHA,[jPe]:i.ONE_MINUS_SRC_COLOR,[t5]:i.ONE_MINUS_SRC_ALPHA,[qPe]:i.ONE_MINUS_DST_COLOR,[XPe]:i.ONE_MINUS_DST_ALPHA,[JPe]:i.CONSTANT_COLOR,[$Pe]:i.ONE_MINUS_CONSTANT_COLOR,[eLe]:i.CONSTANT_ALPHA,[tLe]:i.ONE_MINUS_CONSTANT_ALPHA};function Ct(Be,Gt,Bt,Qi,_i,Cr,zr,en,Ga,Er){if(Be===Gp){x===!0&&(pt(i.BLEND),x=!1);return}if(x===!1&&(ht(i.BLEND),x=!0),Be!==zPe){if(Be!==b||Er!==j){if((S!==ng||B!==ng)&&(i.blendEquation(i.FUNC_ADD),S=ng,B=ng),Er)switch(Be){case c1:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Kne:i.blendFunc(i.ONE,i.ONE);break;case Xne:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Yne:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}else switch(Be){case c1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Kne:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Xne:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Yne:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}E=null,D=null,F=null,H=null,U.set(0,0,0),k=0,b=Be,j=Er}return}_i=_i||Gt,Cr=Cr||Bt,zr=zr||Qi,(Gt!==S||_i!==B)&&(i.blendEquationSeparate(_t[Gt],_t[_i]),S=Gt,B=_i),(Bt!==E||Qi!==D||Cr!==F||zr!==H)&&(i.blendFuncSeparate(It[Bt],It[Qi],It[Cr],It[zr]),E=Bt,D=Qi,F=Cr,H=zr),(en.equals(U)===!1||Ga!==k)&&(i.blendColor(en.r,en.g,en.b,Ga),U.copy(en),k=Ga),b=Be,j=!1}function Xt(Be,Gt){Be.side===Ku?pt(i.CULL_FACE):ht(i.CULL_FACE);let Bt=Be.side===Dl;Gt&&(Bt=!Bt),Oi(Bt),Be.blending===c1&&Be.transparent===!1?Ct(Gp):Ct(Be.blending,Be.blendEquation,Be.blendSrc,Be.blendDst,Be.blendEquationAlpha,Be.blendSrcAlpha,Be.blendDstAlpha,Be.blendColor,Be.blendAlpha,Be.premultipliedAlpha),l.setFunc(Be.depthFunc),l.setTest(Be.depthTest),l.setMask(Be.depthWrite),s.setMask(Be.colorWrite);let Qi=Be.stencilWrite;c.setTest(Qi),Qi&&(c.setMask(Be.stencilWriteMask),c.setFunc(Be.stencilFunc,Be.stencilRef,Be.stencilFuncMask),c.setOp(Be.stencilFail,Be.stencilZFail,Be.stencilZPass)),Ge(Be.polygonOffset,Be.polygonOffsetFactor,Be.polygonOffsetUnits),Be.alphaToCoverage===!0?ht(i.SAMPLE_ALPHA_TO_COVERAGE):pt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Oi(Be){q!==Be&&(Be?i.frontFace(i.CW):i.frontFace(i.CCW),q=Be)}function ae(Be){Be!==UPe?(ht(i.CULL_FACE),Be!==X&&(Be===jne?i.cullFace(i.BACK):Be===kPe?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):pt(i.CULL_FACE),X=Be}function se(Be){Be!==Y&&(ue&&i.lineWidth(Be),Y=Be)}function Ge(Be,Gt,Bt){Be?(ht(i.POLYGON_OFFSET_FILL),(J!==Gt||te!==Bt)&&(i.polygonOffset(Gt,Bt),J=Gt,te=Bt)):pt(i.POLYGON_OFFSET_FILL)}function bt(Be){Be?ht(i.SCISSOR_TEST):pt(i.SCISSOR_TEST)}function gt(Be){Be===void 0&&(Be=i.TEXTURE0+de-1),Re!==Be&&(i.activeTexture(Be),Re=Be)}function mt(Be,Gt,Bt){Bt===void 0&&(Re===null?Bt=i.TEXTURE0+de-1:Bt=Re);let Qi=Oe[Bt];Qi===void 0&&(Qi={type:void 0,texture:void 0},Oe[Bt]=Qi),(Qi.type!==Be||Qi.texture!==Gt)&&(Re!==Bt&&(i.activeTexture(Bt),Re=Bt),i.bindTexture(Be,Gt||tt[Be]),Qi.type=Be,Qi.texture=Gt)}function Ti(){let Be=Oe[Re];Be!==void 0&&Be.type!==void 0&&(i.bindTexture(Be.type,null),Be.type=void 0,Be.texture=void 0)}function kt(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Qt(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ni(){try{i.texSubImage2D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Zi(){try{i.texSubImage3D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function vt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function vi(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function lt(){try{i.texStorage2D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Wi(){try{i.texStorage3D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Lt(){try{i.texImage2D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ot(){try{i.texImage3D.apply(i,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Hi(Be){nt.equals(Be)===!1&&(i.scissor(Be.x,Be.y,Be.z,Be.w),nt.copy(Be))}function Br(Be){rt.equals(Be)===!1&&(i.viewport(Be.x,Be.y,Be.z,Be.w),rt.copy(Be))}function An(Be,Gt){let Bt=h.get(Gt);Bt===void 0&&(Bt=new WeakMap,h.set(Gt,Bt));let Qi=Bt.get(Be);Qi===void 0&&(Qi=i.getUniformBlockIndex(Gt,Be.name),Bt.set(Be,Qi))}function ti(Be,Gt){let Qi=h.get(Gt).get(Be);u.get(Gt)!==Qi&&(i.uniformBlockBinding(Gt,Qi,Be.__bindingPointIndex),u.set(Gt,Qi))}function Rt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),r===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Re=null,Oe={},f={},m=new WeakMap,y=[],g=null,x=!1,b=null,S=null,E=null,D=null,B=null,F=null,H=null,U=new ji(0,0,0),k=0,j=!1,q=null,X=null,Y=null,J=null,te=null,nt.set(0,0,i.canvas.width,i.canvas.height),rt.set(0,0,i.canvas.width,i.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:ht,disable:pt,bindFramebuffer:Je,drawBuffers:Ie,useProgram:Bi,setBlending:Ct,setMaterial:Xt,setFlipSided:Oi,setCullFace:ae,setLineWidth:se,setPolygonOffset:Ge,setScissorTest:bt,activeTexture:gt,bindTexture:mt,unbindTexture:Ti,compressedTexImage2D:kt,compressedTexImage3D:Qt,texImage2D:Lt,texImage3D:Ot,updateUBOMapping:An,uniformBlockBinding:ti,texStorage2D:lt,texStorage3D:Wi,texSubImage2D:Ni,texSubImage3D:Zi,compressedTexSubImage2D:vt,compressedTexSubImage3D:vi,scissor:Hi,viewport:Br,reset:Rt}}function HUe(i,e,t,r,n,a,o){let s=n.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap,h,d=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(ae,se){return f?new OffscreenCanvas(ae,se):Ew("canvas")}function y(ae,se,Ge,bt){let gt=1;if((ae.width>bt||ae.height>bt)&&(gt=bt/Math.max(ae.width,ae.height)),gt<1||se===!0)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap){let mt=se?fI:Math.floor,Ti=mt(gt*ae.width),kt=mt(gt*ae.height);h===void 0&&(h=m(Ti,kt));let Qt=Ge?m(Ti,kt):h;return Qt.width=Ti,Qt.height=kt,Qt.getContext("2d").drawImage(ae,0,0,Ti,kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+Ti+"x"+kt+")."),Qt}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ae;return ae}function g(ae){return a5(ae.width)&&a5(ae.height)}function x(ae){return s?!1:ae.wrapS!==Js||ae.wrapT!==Js||ae.minFilter!==Bo&&ae.minFilter!==io}function b(ae,se){return ae.generateMipmaps&&se&&ae.minFilter!==Bo&&ae.minFilter!==io}function S(ae){i.generateMipmap(ae)}function E(ae,se,Ge,bt,gt=!1){if(s===!1)return se;if(ae!==null){if(i[ae]!==void 0)return i[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let mt=se;if(se===i.RED&&(Ge===i.FLOAT&&(mt=i.R32F),Ge===i.HALF_FLOAT&&(mt=i.R16F),Ge===i.UNSIGNED_BYTE&&(mt=i.R8)),se===i.RED_INTEGER&&(Ge===i.UNSIGNED_BYTE&&(mt=i.R8UI),Ge===i.UNSIGNED_SHORT&&(mt=i.R16UI),Ge===i.UNSIGNED_INT&&(mt=i.R32UI),Ge===i.BYTE&&(mt=i.R8I),Ge===i.SHORT&&(mt=i.R16I),Ge===i.INT&&(mt=i.R32I)),se===i.RG&&(Ge===i.FLOAT&&(mt=i.RG32F),Ge===i.HALF_FLOAT&&(mt=i.RG16F),Ge===i.UNSIGNED_BYTE&&(mt=i.RG8)),se===i.RGBA){let Ti=gt?cI:bn.getTransfer(bt);Ge===i.FLOAT&&(mt=i.RGBA32F),Ge===i.HALF_FLOAT&&(mt=i.RGBA16F),Ge===i.UNSIGNED_BYTE&&(mt=Ti===ma?i.SRGB8_ALPHA8:i.RGBA8),Ge===i.UNSIGNED_SHORT_4_4_4_4&&(mt=i.RGBA4),Ge===i.UNSIGNED_SHORT_5_5_5_1&&(mt=i.RGB5_A1)}return(mt===i.R16F||mt===i.R32F||mt===i.RG16F||mt===i.RG32F||mt===i.RGBA16F||mt===i.RGBA32F)&&e.get("EXT_color_buffer_float"),mt}function D(ae,se,Ge){return b(ae,Ge)===!0||ae.isFramebufferTexture&&ae.minFilter!==Bo&&ae.minFilter!==io?Math.log2(Math.max(se.width,se.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?se.mipmaps.length:1}function B(ae){return ae===Bo||ae===lI||ae===yw?i.NEAREST:i.LINEAR}function F(ae){let se=ae.target;se.removeEventListener("dispose",F),U(se),se.isVideoTexture&&u.delete(se)}function H(ae){let se=ae.target;se.removeEventListener("dispose",H),j(se)}function U(ae){let se=r.get(ae);if(se.__webglInit===void 0)return;let Ge=ae.source,bt=d.get(Ge);if(bt){let gt=bt[se.__cacheKey];gt.usedTimes--,gt.usedTimes===0&&k(ae),Object.keys(bt).length===0&&d.delete(Ge)}r.remove(ae)}function k(ae){let se=r.get(ae);i.deleteTexture(se.__webglTexture);let Ge=ae.source,bt=d.get(Ge);delete bt[se.__cacheKey],o.memory.textures--}function j(ae){let se=ae.texture,Ge=r.get(ae),bt=r.get(se);if(bt.__webglTexture!==void 0&&(i.deleteTexture(bt.__webglTexture),o.memory.textures--),ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let gt=0;gt<6;gt++){if(Array.isArray(Ge.__webglFramebuffer[gt]))for(let mt=0;mt<Ge.__webglFramebuffer[gt].length;mt++)i.deleteFramebuffer(Ge.__webglFramebuffer[gt][mt]);else i.deleteFramebuffer(Ge.__webglFramebuffer[gt]);Ge.__webglDepthbuffer&&i.deleteRenderbuffer(Ge.__webglDepthbuffer[gt])}else{if(Array.isArray(Ge.__webglFramebuffer))for(let gt=0;gt<Ge.__webglFramebuffer.length;gt++)i.deleteFramebuffer(Ge.__webglFramebuffer[gt]);else i.deleteFramebuffer(Ge.__webglFramebuffer);if(Ge.__webglDepthbuffer&&i.deleteRenderbuffer(Ge.__webglDepthbuffer),Ge.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ge.__webglMultisampledFramebuffer),Ge.__webglColorRenderbuffer)for(let gt=0;gt<Ge.__webglColorRenderbuffer.length;gt++)Ge.__webglColorRenderbuffer[gt]&&i.deleteRenderbuffer(Ge.__webglColorRenderbuffer[gt]);Ge.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ge.__webglDepthRenderbuffer)}if(ae.isWebGLMultipleRenderTargets)for(let gt=0,mt=se.length;gt<mt;gt++){let Ti=r.get(se[gt]);Ti.__webglTexture&&(i.deleteTexture(Ti.__webglTexture),o.memory.textures--),r.remove(se[gt])}r.remove(se),r.remove(ae)}let q=0;function X(){q=0}function Y(){let ae=q;return ae>=n.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+n.maxTextures),q+=1,ae}function J(ae){let se=[];return se.push(ae.wrapS),se.push(ae.wrapT),se.push(ae.wrapR||0),se.push(ae.magFilter),se.push(ae.minFilter),se.push(ae.anisotropy),se.push(ae.internalFormat),se.push(ae.format),se.push(ae.type),se.push(ae.generateMipmaps),se.push(ae.premultiplyAlpha),se.push(ae.flipY),se.push(ae.unpackAlignment),se.push(ae.colorSpace),se.join()}function te(ae,se){let Ge=r.get(ae);if(ae.isVideoTexture&&Xt(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&Ge.__version!==ae.version){let bt=ae.image;if(bt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(bt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(Ge,ae,se);return}}t.bindTexture(i.TEXTURE_2D,Ge.__webglTexture,i.TEXTURE0+se)}function de(ae,se){let Ge=r.get(ae);if(ae.version>0&&Ge.__version!==ae.version){nt(Ge,ae,se);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Ge.__webglTexture,i.TEXTURE0+se)}function ue(ae,se){let Ge=r.get(ae);if(ae.version>0&&Ge.__version!==ae.version){nt(Ge,ae,se);return}t.bindTexture(i.TEXTURE_3D,Ge.__webglTexture,i.TEXTURE0+se)}function ve(ae,se){let Ge=r.get(ae);if(ae.version>0&&Ge.__version!==ae.version){rt(Ge,ae,se);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Ge.__webglTexture,i.TEXTURE0+se)}let _e={[lg]:i.REPEAT,[Js]:i.CLAMP_TO_EDGE,[Cw]:i.MIRRORED_REPEAT},Re={[Bo]:i.NEAREST,[lI]:i.NEAREST_MIPMAP_NEAREST,[yw]:i.NEAREST_MIPMAP_LINEAR,[io]:i.LINEAR,[N5]:i.LINEAR_MIPMAP_NEAREST,[Qd]:i.LINEAR_MIPMAP_LINEAR},Oe={[BLe]:i.NEVER,[FLe]:i.ALWAYS,[DLe]:i.LESS,[Qoe]:i.LEQUAL,[RLe]:i.EQUAL,[OLe]:i.GEQUAL,[PLe]:i.GREATER,[LLe]:i.NOTEQUAL};function Te(ae,se,Ge){if(Ge?(i.texParameteri(ae,i.TEXTURE_WRAP_S,_e[se.wrapS]),i.texParameteri(ae,i.TEXTURE_WRAP_T,_e[se.wrapT]),(ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ae,i.TEXTURE_WRAP_R,_e[se.wrapR]),i.texParameteri(ae,i.TEXTURE_MAG_FILTER,Re[se.magFilter]),i.texParameteri(ae,i.TEXTURE_MIN_FILTER,Re[se.minFilter])):(i.texParameteri(ae,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(ae,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ae,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(se.wrapS!==Js||se.wrapT!==Js)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(ae,i.TEXTURE_MAG_FILTER,B(se.magFilter)),i.texParameteri(ae,i.TEXTURE_MIN_FILTER,B(se.minFilter)),se.minFilter!==Bo&&se.minFilter!==io&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),se.compareFunction&&(i.texParameteri(ae,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ae,i.TEXTURE_COMPARE_FUNC,Oe[se.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){let bt=e.get("EXT_texture_filter_anisotropic");if(se.magFilter===Bo||se.minFilter!==yw&&se.minFilter!==Qd||se.type===sc&&e.has("OES_texture_float_linear")===!1||s===!1&&se.type===zh&&e.has("OES_texture_half_float_linear")===!1)return;(se.anisotropy>1||r.get(se).__currentAnisotropy)&&(i.texParameterf(ae,bt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,n.getMaxAnisotropy())),r.get(se).__currentAnisotropy=se.anisotropy)}}function Se(ae,se){let Ge=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,se.addEventListener("dispose",F));let bt=se.source,gt=d.get(bt);gt===void 0&&(gt={},d.set(bt,gt));let mt=J(se);if(mt!==ae.__cacheKey){gt[mt]===void 0&&(gt[mt]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Ge=!0),gt[mt].usedTimes++;let Ti=gt[ae.__cacheKey];Ti!==void 0&&(gt[ae.__cacheKey].usedTimes--,Ti.usedTimes===0&&k(se)),ae.__cacheKey=mt,ae.__webglTexture=gt[mt].texture}return Ge}function nt(ae,se,Ge){let bt=i.TEXTURE_2D;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(bt=i.TEXTURE_2D_ARRAY),se.isData3DTexture&&(bt=i.TEXTURE_3D);let gt=Se(ae,se),mt=se.source;t.bindTexture(bt,ae.__webglTexture,i.TEXTURE0+Ge);let Ti=r.get(mt);if(mt.version!==Ti.__version||gt===!0){t.activeTexture(i.TEXTURE0+Ge);let kt=bn.getPrimaries(bn.workingColorSpace),Qt=se.colorSpace===Zc?null:bn.getPrimaries(se.colorSpace),Ni=se.colorSpace===Zc||kt===Qt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,se.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,se.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ni);let Zi=x(se)&&g(se.image)===!1,vt=y(se.image,Zi,!1,n.maxTextureSize);vt=Oi(se,vt);let vi=g(vt)||s,lt=a.convert(se.format,se.colorSpace),Wi=a.convert(se.type),Lt=E(se.internalFormat,lt,Wi,se.colorSpace,se.isVideoTexture);Te(bt,se,vi);let Ot,Hi=se.mipmaps,Br=s&&se.isVideoTexture!==!0&&Lt!==zoe,An=Ti.__version===void 0||gt===!0,ti=D(se,vt,vi);if(se.isDepthTexture)Lt=i.DEPTH_COMPONENT,s?se.type===sc?Lt=i.DEPTH_COMPONENT32F:se.type===Hp?Lt=i.DEPTH_COMPONENT24:se.type===og?Lt=i.DEPTH24_STENCIL8:Lt=i.DEPTH_COMPONENT16:se.type===sc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===sg&&Lt===i.DEPTH_COMPONENT&&se.type!==U5&&se.type!==Hp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=Hp,Wi=a.convert(se.type)),se.format===p1&&Lt===i.DEPTH_COMPONENT&&(Lt=i.DEPTH_STENCIL,se.type!==og&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=og,Wi=a.convert(se.type))),An&&(Br?t.texStorage2D(i.TEXTURE_2D,1,Lt,vt.width,vt.height):t.texImage2D(i.TEXTURE_2D,0,Lt,vt.width,vt.height,0,lt,Wi,null));else if(se.isDataTexture)if(Hi.length>0&&vi){Br&&An&&t.texStorage2D(i.TEXTURE_2D,ti,Lt,Hi[0].width,Hi[0].height);for(let Rt=0,Be=Hi.length;Rt<Be;Rt++)Ot=Hi[Rt],Br?t.texSubImage2D(i.TEXTURE_2D,Rt,0,0,Ot.width,Ot.height,lt,Wi,Ot.data):t.texImage2D(i.TEXTURE_2D,Rt,Lt,Ot.width,Ot.height,0,lt,Wi,Ot.data);se.generateMipmaps=!1}else Br?(An&&t.texStorage2D(i.TEXTURE_2D,ti,Lt,vt.width,vt.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,vt.width,vt.height,lt,Wi,vt.data)):t.texImage2D(i.TEXTURE_2D,0,Lt,vt.width,vt.height,0,lt,Wi,vt.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Br&&An&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ti,Lt,Hi[0].width,Hi[0].height,vt.depth);for(let Rt=0,Be=Hi.length;Rt<Be;Rt++)Ot=Hi[Rt],se.format!==qc?lt!==null?Br?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Rt,0,0,0,Ot.width,Ot.height,vt.depth,lt,Ot.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Rt,Lt,Ot.width,Ot.height,vt.depth,0,Ot.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Br?t.texSubImage3D(i.TEXTURE_2D_ARRAY,Rt,0,0,0,Ot.width,Ot.height,vt.depth,lt,Wi,Ot.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Rt,Lt,Ot.width,Ot.height,vt.depth,0,lt,Wi,Ot.data)}else{Br&&An&&t.texStorage2D(i.TEXTURE_2D,ti,Lt,Hi[0].width,Hi[0].height);for(let Rt=0,Be=Hi.length;Rt<Be;Rt++)Ot=Hi[Rt],se.format!==qc?lt!==null?Br?t.compressedTexSubImage2D(i.TEXTURE_2D,Rt,0,0,Ot.width,Ot.height,lt,Ot.data):t.compressedTexImage2D(i.TEXTURE_2D,Rt,Lt,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Br?t.texSubImage2D(i.TEXTURE_2D,Rt,0,0,Ot.width,Ot.height,lt,Wi,Ot.data):t.texImage2D(i.TEXTURE_2D,Rt,Lt,Ot.width,Ot.height,0,lt,Wi,Ot.data)}else if(se.isDataArrayTexture)Br?(An&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ti,Lt,vt.width,vt.height,vt.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,vt.width,vt.height,vt.depth,lt,Wi,vt.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Lt,vt.width,vt.height,vt.depth,0,lt,Wi,vt.data);else if(se.isData3DTexture)Br?(An&&t.texStorage3D(i.TEXTURE_3D,ti,Lt,vt.width,vt.height,vt.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,vt.width,vt.height,vt.depth,lt,Wi,vt.data)):t.texImage3D(i.TEXTURE_3D,0,Lt,vt.width,vt.height,vt.depth,0,lt,Wi,vt.data);else if(se.isFramebufferTexture){if(An)if(Br)t.texStorage2D(i.TEXTURE_2D,ti,Lt,vt.width,vt.height);else{let Rt=vt.width,Be=vt.height;for(let Gt=0;Gt<ti;Gt++)t.texImage2D(i.TEXTURE_2D,Gt,Lt,Rt,Be,0,lt,Wi,null),Rt>>=1,Be>>=1}}else if(Hi.length>0&&vi){Br&&An&&t.texStorage2D(i.TEXTURE_2D,ti,Lt,Hi[0].width,Hi[0].height);for(let Rt=0,Be=Hi.length;Rt<Be;Rt++)Ot=Hi[Rt],Br?t.texSubImage2D(i.TEXTURE_2D,Rt,0,0,lt,Wi,Ot):t.texImage2D(i.TEXTURE_2D,Rt,Lt,lt,Wi,Ot);se.generateMipmaps=!1}else Br?(An&&t.texStorage2D(i.TEXTURE_2D,ti,Lt,vt.width,vt.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,lt,Wi,vt)):t.texImage2D(i.TEXTURE_2D,0,Lt,lt,Wi,vt);b(se,vi)&&S(bt),Ti.__version=mt.version,se.onUpdate&&se.onUpdate(se)}ae.__version=se.version}function rt(ae,se,Ge){if(se.image.length!==6)return;let bt=Se(ae,se),gt=se.source;t.bindTexture(i.TEXTURE_CUBE_MAP,ae.__webglTexture,i.TEXTURE0+Ge);let mt=r.get(gt);if(gt.version!==mt.__version||bt===!0){t.activeTexture(i.TEXTURE0+Ge);let Ti=bn.getPrimaries(bn.workingColorSpace),kt=se.colorSpace===Zc?null:bn.getPrimaries(se.colorSpace),Qt=se.colorSpace===Zc||Ti===kt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,se.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,se.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);let Ni=se.isCompressedTexture||se.image[0].isCompressedTexture,Zi=se.image[0]&&se.image[0].isDataTexture,vt=[];for(let Rt=0;Rt<6;Rt++)!Ni&&!Zi?vt[Rt]=y(se.image[Rt],!1,!0,n.maxCubemapSize):vt[Rt]=Zi?se.image[Rt].image:se.image[Rt],vt[Rt]=Oi(se,vt[Rt]);let vi=vt[0],lt=g(vi)||s,Wi=a.convert(se.format,se.colorSpace),Lt=a.convert(se.type),Ot=E(se.internalFormat,Wi,Lt,se.colorSpace),Hi=s&&se.isVideoTexture!==!0,Br=mt.__version===void 0||bt===!0,An=D(se,vi,lt);Te(i.TEXTURE_CUBE_MAP,se,lt);let ti;if(Ni){Hi&&Br&&t.texStorage2D(i.TEXTURE_CUBE_MAP,An,Ot,vi.width,vi.height);for(let Rt=0;Rt<6;Rt++){ti=vt[Rt].mipmaps;for(let Be=0;Be<ti.length;Be++){let Gt=ti[Be];se.format!==qc?Wi!==null?Hi?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be,0,0,Gt.width,Gt.height,Wi,Gt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be,Ot,Gt.width,Gt.height,0,Gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Hi?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be,0,0,Gt.width,Gt.height,Wi,Lt,Gt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be,Ot,Gt.width,Gt.height,0,Wi,Lt,Gt.data)}}}else{ti=se.mipmaps,Hi&&Br&&(ti.length>0&&An++,t.texStorage2D(i.TEXTURE_CUBE_MAP,An,Ot,vt[0].width,vt[0].height));for(let Rt=0;Rt<6;Rt++)if(Zi){Hi?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0,0,0,vt[Rt].width,vt[Rt].height,Wi,Lt,vt[Rt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0,Ot,vt[Rt].width,vt[Rt].height,0,Wi,Lt,vt[Rt].data);for(let Be=0;Be<ti.length;Be++){let Bt=ti[Be].image[Rt].image;Hi?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be+1,0,0,Bt.width,Bt.height,Wi,Lt,Bt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be+1,Ot,Bt.width,Bt.height,0,Wi,Lt,Bt.data)}}else{Hi?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0,0,0,Wi,Lt,vt[Rt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0,Ot,Wi,Lt,vt[Rt]);for(let Be=0;Be<ti.length;Be++){let Gt=ti[Be];Hi?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be+1,0,0,Wi,Lt,Gt.image[Rt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Be+1,Ot,Wi,Lt,Gt.image[Rt])}}}b(se,lt)&&S(i.TEXTURE_CUBE_MAP),mt.__version=gt.version,se.onUpdate&&se.onUpdate(se)}ae.__version=se.version}function dt(ae,se,Ge,bt,gt,mt){let Ti=a.convert(Ge.format,Ge.colorSpace),kt=a.convert(Ge.type),Qt=E(Ge.internalFormat,Ti,kt,Ge.colorSpace);if(!r.get(se).__hasExternalTextures){let Zi=Math.max(1,se.width>>mt),vt=Math.max(1,se.height>>mt);gt===i.TEXTURE_3D||gt===i.TEXTURE_2D_ARRAY?t.texImage3D(gt,mt,Qt,Zi,vt,se.depth,0,Ti,kt,null):t.texImage2D(gt,mt,Qt,Zi,vt,0,Ti,kt,null)}t.bindFramebuffer(i.FRAMEBUFFER,ae),Ct(se)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,bt,gt,r.get(Ge).__webglTexture,0,It(se)):(gt===i.TEXTURE_2D||gt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&gt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,bt,gt,r.get(Ge).__webglTexture,mt),t.bindFramebuffer(i.FRAMEBUFFER,null)}function tt(ae,se,Ge){if(i.bindRenderbuffer(i.RENDERBUFFER,ae),se.depthBuffer&&!se.stencilBuffer){let bt=s===!0?i.DEPTH_COMPONENT24:i.DEPTH_COMPONENT16;if(Ge||Ct(se)){let gt=se.depthTexture;gt&&gt.isDepthTexture&&(gt.type===sc?bt=i.DEPTH_COMPONENT32F:gt.type===Hp&&(bt=i.DEPTH_COMPONENT24));let mt=It(se);Ct(se)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,mt,bt,se.width,se.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,mt,bt,se.width,se.height)}else i.renderbufferStorage(i.RENDERBUFFER,bt,se.width,se.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,ae)}else if(se.depthBuffer&&se.stencilBuffer){let bt=It(se);Ge&&Ct(se)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,bt,i.DEPTH24_STENCIL8,se.width,se.height):Ct(se)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,bt,i.DEPTH24_STENCIL8,se.width,se.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,se.width,se.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,ae)}else{let bt=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let gt=0;gt<bt.length;gt++){let mt=bt[gt],Ti=a.convert(mt.format,mt.colorSpace),kt=a.convert(mt.type),Qt=E(mt.internalFormat,Ti,kt,mt.colorSpace),Ni=It(se);Ge&&Ct(se)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ni,Qt,se.width,se.height):Ct(se)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ni,Qt,se.width,se.height):i.renderbufferStorage(i.RENDERBUFFER,Qt,se.width,se.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ht(ae,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,ae),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),te(se.depthTexture,0);let bt=r.get(se.depthTexture).__webglTexture,gt=It(se);if(se.depthTexture.format===sg)Ct(se)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,bt,0,gt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,bt,0);else if(se.depthTexture.format===p1)Ct(se)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,bt,0,gt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,bt,0);else throw new Error("Unknown depthTexture format")}function pt(ae){let se=r.get(ae),Ge=ae.isWebGLCubeRenderTarget===!0;if(ae.depthTexture&&!se.__autoAllocateDepthBuffer){if(Ge)throw new Error("target.depthTexture not supported in Cube render targets");ht(se.__webglFramebuffer,ae)}else if(Ge){se.__webglDepthbuffer=[];for(let bt=0;bt<6;bt++)t.bindFramebuffer(i.FRAMEBUFFER,se.__webglFramebuffer[bt]),se.__webglDepthbuffer[bt]=i.createRenderbuffer(),tt(se.__webglDepthbuffer[bt],ae,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,se.__webglFramebuffer),se.__webglDepthbuffer=i.createRenderbuffer(),tt(se.__webglDepthbuffer,ae,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function Je(ae,se,Ge){let bt=r.get(ae);se!==void 0&&dt(bt.__webglFramebuffer,ae,ae.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Ge!==void 0&&pt(ae)}function Ie(ae){let se=ae.texture,Ge=r.get(ae),bt=r.get(se);ae.addEventListener("dispose",H),ae.isWebGLMultipleRenderTargets!==!0&&(bt.__webglTexture===void 0&&(bt.__webglTexture=i.createTexture()),bt.__version=se.version,o.memory.textures++);let gt=ae.isWebGLCubeRenderTarget===!0,mt=ae.isWebGLMultipleRenderTargets===!0,Ti=g(ae)||s;if(gt){Ge.__webglFramebuffer=[];for(let kt=0;kt<6;kt++)if(s&&se.mipmaps&&se.mipmaps.length>0){Ge.__webglFramebuffer[kt]=[];for(let Qt=0;Qt<se.mipmaps.length;Qt++)Ge.__webglFramebuffer[kt][Qt]=i.createFramebuffer()}else Ge.__webglFramebuffer[kt]=i.createFramebuffer()}else{if(s&&se.mipmaps&&se.mipmaps.length>0){Ge.__webglFramebuffer=[];for(let kt=0;kt<se.mipmaps.length;kt++)Ge.__webglFramebuffer[kt]=i.createFramebuffer()}else Ge.__webglFramebuffer=i.createFramebuffer();if(mt)if(n.drawBuffers){let kt=ae.texture;for(let Qt=0,Ni=kt.length;Qt<Ni;Qt++){let Zi=r.get(kt[Qt]);Zi.__webglTexture===void 0&&(Zi.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&ae.samples>0&&Ct(ae)===!1){let kt=mt?se:[se];Ge.__webglMultisampledFramebuffer=i.createFramebuffer(),Ge.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer);for(let Qt=0;Qt<kt.length;Qt++){let Ni=kt[Qt];Ge.__webglColorRenderbuffer[Qt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ge.__webglColorRenderbuffer[Qt]);let Zi=a.convert(Ni.format,Ni.colorSpace),vt=a.convert(Ni.type),vi=E(Ni.internalFormat,Zi,vt,Ni.colorSpace,ae.isXRRenderTarget===!0),lt=It(ae);i.renderbufferStorageMultisample(i.RENDERBUFFER,lt,vi,ae.width,ae.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Qt,i.RENDERBUFFER,Ge.__webglColorRenderbuffer[Qt])}i.bindRenderbuffer(i.RENDERBUFFER,null),ae.depthBuffer&&(Ge.__webglDepthRenderbuffer=i.createRenderbuffer(),tt(Ge.__webglDepthRenderbuffer,ae,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(gt){t.bindTexture(i.TEXTURE_CUBE_MAP,bt.__webglTexture),Te(i.TEXTURE_CUBE_MAP,se,Ti);for(let kt=0;kt<6;kt++)if(s&&se.mipmaps&&se.mipmaps.length>0)for(let Qt=0;Qt<se.mipmaps.length;Qt++)dt(Ge.__webglFramebuffer[kt][Qt],ae,se,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,Qt);else dt(Ge.__webglFramebuffer[kt],ae,se,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0);b(se,Ti)&&S(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(mt){let kt=ae.texture;for(let Qt=0,Ni=kt.length;Qt<Ni;Qt++){let Zi=kt[Qt],vt=r.get(Zi);t.bindTexture(i.TEXTURE_2D,vt.__webglTexture),Te(i.TEXTURE_2D,Zi,Ti),dt(Ge.__webglFramebuffer,ae,Zi,i.COLOR_ATTACHMENT0+Qt,i.TEXTURE_2D,0),b(Zi,Ti)&&S(i.TEXTURE_2D)}t.unbindTexture()}else{let kt=i.TEXTURE_2D;if((ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(s?kt=ae.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(kt,bt.__webglTexture),Te(kt,se,Ti),s&&se.mipmaps&&se.mipmaps.length>0)for(let Qt=0;Qt<se.mipmaps.length;Qt++)dt(Ge.__webglFramebuffer[Qt],ae,se,i.COLOR_ATTACHMENT0,kt,Qt);else dt(Ge.__webglFramebuffer,ae,se,i.COLOR_ATTACHMENT0,kt,0);b(se,Ti)&&S(kt),t.unbindTexture()}ae.depthBuffer&&pt(ae)}function Bi(ae){let se=g(ae)||s,Ge=ae.isWebGLMultipleRenderTargets===!0?ae.texture:[ae.texture];for(let bt=0,gt=Ge.length;bt<gt;bt++){let mt=Ge[bt];if(b(mt,se)){let Ti=ae.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,kt=r.get(mt).__webglTexture;t.bindTexture(Ti,kt),S(Ti),t.unbindTexture()}}}function _t(ae){if(s&&ae.samples>0&&Ct(ae)===!1){let se=ae.isWebGLMultipleRenderTargets?ae.texture:[ae.texture],Ge=ae.width,bt=ae.height,gt=i.COLOR_BUFFER_BIT,mt=[],Ti=ae.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,kt=r.get(ae),Qt=ae.isWebGLMultipleRenderTargets===!0;if(Qt)for(let Ni=0;Ni<se.length;Ni++)t.bindFramebuffer(i.FRAMEBUFFER,kt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ni,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,kt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ni,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,kt.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,kt.__webglFramebuffer);for(let Ni=0;Ni<se.length;Ni++){mt.push(i.COLOR_ATTACHMENT0+Ni),ae.depthBuffer&&mt.push(Ti);let Zi=kt.__ignoreDepthValues!==void 0?kt.__ignoreDepthValues:!1;if(Zi===!1&&(ae.depthBuffer&&(gt|=i.DEPTH_BUFFER_BIT),ae.stencilBuffer&&(gt|=i.STENCIL_BUFFER_BIT)),Qt&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,kt.__webglColorRenderbuffer[Ni]),Zi===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Ti]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Ti])),Qt){let vt=r.get(se[Ni]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,vt,0)}i.blitFramebuffer(0,0,Ge,bt,0,0,Ge,bt,gt,i.NEAREST),c&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,mt)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Qt)for(let Ni=0;Ni<se.length;Ni++){t.bindFramebuffer(i.FRAMEBUFFER,kt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ni,i.RENDERBUFFER,kt.__webglColorRenderbuffer[Ni]);let Zi=r.get(se[Ni]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,kt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ni,i.TEXTURE_2D,Zi,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,kt.__webglMultisampledFramebuffer)}}function It(ae){return Math.min(n.maxSamples,ae.samples)}function Ct(ae){let se=r.get(ae);return s&&ae.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function Xt(ae){let se=o.render.frame;u.get(ae)!==se&&(u.set(ae,se),ae.update())}function Oi(ae,se){let Ge=ae.colorSpace,bt=ae.format,gt=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||ae.format===n5||Ge!==ro&&Ge!==Zc&&(bn.getTransfer(Ge)===ma?s===!1?e.has("EXT_sRGB")===!0&&bt===qc?(ae.format=n5,ae.minFilter=io,ae.generateMipmaps=!1):se=pI.sRGBToLinear(se):(bt!==qc||gt!==jp)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ge)),se}this.allocateTextureUnit=Y,this.resetTextureUnits=X,this.setTexture2D=te,this.setTexture2DArray=de,this.setTexture3D=ue,this.setTextureCube=ve,this.rebindTextures=Je,this.setupRenderTarget=Ie,this.updateRenderTargetMipmap=Bi,this.updateMultisampleRenderTarget=_t,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=dt,this.useMultisampledRTT=Ct}function QUe(i,e,t){let r=t.isWebGL2;function n(a,o=Zc){let s,l=bn.getTransfer(o);if(a===jp)return i.UNSIGNED_BYTE;if(a===Ooe)return i.UNSIGNED_SHORT_4_4_4_4;if(a===Foe)return i.UNSIGNED_SHORT_5_5_5_1;if(a===vLe)return i.BYTE;if(a===yLe)return i.SHORT;if(a===U5)return i.UNSIGNED_SHORT;if(a===Loe)return i.INT;if(a===Hp)return i.UNSIGNED_INT;if(a===sc)return i.FLOAT;if(a===zh)return r?i.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===xLe)return i.ALPHA;if(a===qc)return i.RGBA;if(a===_Le)return i.LUMINANCE;if(a===wLe)return i.LUMINANCE_ALPHA;if(a===sg)return i.DEPTH_COMPONENT;if(a===p1)return i.DEPTH_STENCIL;if(a===n5)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===bLe)return i.RED;if(a===Noe)return i.RED_INTEGER;if(a===SLe)return i.RG;if(a===Uoe)return i.RG_INTEGER;if(a===koe)return i.RGBA_INTEGER;if(a===_k||a===wk||a===bk||a===Sk)if(l===ma)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===_k)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===wk)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===bk)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===Sk)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===_k)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===wk)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===bk)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Sk)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===eae||a===tae||a===iae||a===rae)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===eae)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===tae)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===iae)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===rae)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===zoe)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===nae||a===aae)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===nae)return l===ma?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===aae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===oae||a===sae||a===lae||a===cae||a===uae||a===hae||a===dae||a===fae||a===pae||a===Aae||a===mae||a===gae||a===vae||a===yae)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===oae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===sae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===lae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===cae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===uae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===hae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===dae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===fae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===pae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===Aae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===mae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===gae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===vae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===yae)return l===ma?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===Ck||a===xae||a===_ae)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===Ck)return l===ma?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===xae)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===_ae)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===CLe||a===wae||a===bae||a===Sae)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(a===Ck)return s.COMPRESSED_RED_RGTC1_EXT;if(a===wae)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===bae)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===Sae)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===og?r?i.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):i[a]!==void 0?i[a]:null}return{convert:n}}var y5=class extends ea{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Jc=class extends ls{constructor(){super(),this.isGroup=!0,this.type="Group"}},GUe={type:"move"},bw=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let n=null,a=null,o=null,s=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(let y of e.hand.values()){let g=t.getJointPose(y,r),x=this._getHandJoint(c,y);g!==null&&(x.matrix.fromArray(g.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=g.radius),x.visible=g!==null}let u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,m=.005;c.inputState.pinching&&d>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(n=t.getPose(e.targetRaySpace,r),n===null&&a!==null&&(n=a),n!==null&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(GUe)))}return s!==null&&(s.visible=n!==null),l!==null&&(l.visible=a!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Jc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},x5=class extends Kp{constructor(e,t){super();let r=this,n=null,a=1,o=null,s="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,m=null,y=t.getContextAttributes(),g=null,x=null,b=[],S=[],E=new Hr,D=null,B=new ea;B.layers.enable(1),B.viewport=new $n;let F=new ea;F.layers.enable(2),F.viewport=new $n;let H=[B,F],U=new y5;U.layers.enable(1),U.layers.enable(2);let k=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Te){let Se=b[Te];return Se===void 0&&(Se=new bw,b[Te]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(Te){let Se=b[Te];return Se===void 0&&(Se=new bw,b[Te]=Se),Se.getGripSpace()},this.getHand=function(Te){let Se=b[Te];return Se===void 0&&(Se=new bw,b[Te]=Se),Se.getHandSpace()};function q(Te){let Se=S.indexOf(Te.inputSource);if(Se===-1)return;let nt=b[Se];nt!==void 0&&(nt.update(Te.inputSource,Te.frame,c||o),nt.dispatchEvent({type:Te.type,data:Te.inputSource}))}function X(){n.removeEventListener("select",q),n.removeEventListener("selectstart",q),n.removeEventListener("selectend",q),n.removeEventListener("squeeze",q),n.removeEventListener("squeezestart",q),n.removeEventListener("squeezeend",q),n.removeEventListener("end",X),n.removeEventListener("inputsourceschange",Y);for(let Te=0;Te<b.length;Te++){let Se=S[Te];Se!==null&&(S[Te]=null,b[Te].disconnect(Se))}k=null,j=null,e.setRenderTarget(g),f=null,d=null,h=null,n=null,x=null,Oe.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Te){a=Te,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Te){s=Te,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Te){c=Te},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return n},this.setSession=function(Te){return al(this,null,function*(){if(n=Te,n!==null){if(g=e.getRenderTarget(),n.addEventListener("select",q),n.addEventListener("selectstart",q),n.addEventListener("selectend",q),n.addEventListener("squeeze",q),n.addEventListener("squeezestart",q),n.addEventListener("squeezeend",q),n.addEventListener("end",X),n.addEventListener("inputsourceschange",Y),y.xrCompatible!==!0&&(yield t.makeXRCompatible()),D=e.getPixelRatio(),e.getSize(E),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Se={antialias:n.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(n,t,Se),n.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),x=new Gd(f.framebufferWidth,f.framebufferHeight,{format:qc,type:jp,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let Se=null,nt=null,rt=null;y.depth&&(rt=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=y.stencil?p1:sg,nt=y.stencil?og:Hp);let dt={colorFormat:t.RGBA8,depthFormat:rt,scaleFactor:a};h=new XRWebGLBinding(n,t),d=h.createProjectionLayer(dt),n.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),x=new Gd(d.textureWidth,d.textureHeight,{format:qc,type:jp,depthTexture:new bI(d.textureWidth,d.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});let tt=e.properties.get(x);tt.__ignoreDepthValues=d.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield n.requestReferenceSpace(s),Oe.setContext(n),Oe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(n!==null)return n.environmentBlendMode};function Y(Te){for(let Se=0;Se<Te.removed.length;Se++){let nt=Te.removed[Se],rt=S.indexOf(nt);rt>=0&&(S[rt]=null,b[rt].disconnect(nt))}for(let Se=0;Se<Te.added.length;Se++){let nt=Te.added[Se],rt=S.indexOf(nt);if(rt===-1){for(let tt=0;tt<b.length;tt++)if(tt>=S.length){S.push(nt),rt=tt;break}else if(S[tt]===null){S[tt]=nt,rt=tt;break}if(rt===-1)break}let dt=b[rt];dt&&dt.connect(nt)}}let J=new Ne,te=new Ne;function de(Te,Se,nt){J.setFromMatrixPosition(Se.matrixWorld),te.setFromMatrixPosition(nt.matrixWorld);let rt=J.distanceTo(te),dt=Se.projectionMatrix.elements,tt=nt.projectionMatrix.elements,ht=dt[14]/(dt[10]-1),pt=dt[14]/(dt[10]+1),Je=(dt[9]+1)/dt[5],Ie=(dt[9]-1)/dt[5],Bi=(dt[8]-1)/dt[0],_t=(tt[8]+1)/tt[0],It=ht*Bi,Ct=ht*_t,Xt=rt/(-Bi+_t),Oi=Xt*-Bi;Se.matrixWorld.decompose(Te.position,Te.quaternion,Te.scale),Te.translateX(Oi),Te.translateZ(Xt),Te.matrixWorld.compose(Te.position,Te.quaternion,Te.scale),Te.matrixWorldInverse.copy(Te.matrixWorld).invert();let ae=ht+Xt,se=pt+Xt,Ge=It-Oi,bt=Ct+(rt-Oi),gt=Je*pt/se*ae,mt=Ie*pt/se*ae;Te.projectionMatrix.makePerspective(Ge,bt,gt,mt,ae,se),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert()}function ue(Te,Se){Se===null?Te.matrixWorld.copy(Te.matrix):Te.matrixWorld.multiplyMatrices(Se.matrixWorld,Te.matrix),Te.matrixWorldInverse.copy(Te.matrixWorld).invert()}this.updateCamera=function(Te){if(n===null)return;U.near=F.near=B.near=Te.near,U.far=F.far=B.far=Te.far,(k!==U.near||j!==U.far)&&(n.updateRenderState({depthNear:U.near,depthFar:U.far}),k=U.near,j=U.far);let Se=Te.parent,nt=U.cameras;ue(U,Se);for(let rt=0;rt<nt.length;rt++)ue(nt[rt],Se);nt.length===2?de(U,B,F):U.projectionMatrix.copy(B.projectionMatrix),ve(Te,U,Se)};function ve(Te,Se,nt){nt===null?Te.matrix.copy(Se.matrixWorld):(Te.matrix.copy(nt.matrixWorld),Te.matrix.invert(),Te.matrix.multiply(Se.matrixWorld)),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.updateMatrixWorld(!0),Te.projectionMatrix.copy(Se.projectionMatrix),Te.projectionMatrixInverse.copy(Se.projectionMatrixInverse),Te.isPerspectiveCamera&&(Te.fov=m1*2*Math.atan(1/Te.projectionMatrix.elements[5]),Te.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(Te){l=Te,d!==null&&(d.fixedFoveation=Te),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Te)};let _e=null;function Re(Te,Se){if(u=Se.getViewerPose(c||o),m=Se,u!==null){let nt=u.views;f!==null&&(e.setRenderTargetFramebuffer(x,f.framebuffer),e.setRenderTarget(x));let rt=!1;nt.length!==U.cameras.length&&(U.cameras.length=0,rt=!0);for(let dt=0;dt<nt.length;dt++){let tt=nt[dt],ht=null;if(f!==null)ht=f.getViewport(tt);else{let Je=h.getViewSubImage(d,tt);ht=Je.viewport,dt===0&&(e.setRenderTargetTextures(x,Je.colorTexture,d.ignoreDepthValues?void 0:Je.depthStencilTexture),e.setRenderTarget(x))}let pt=H[dt];pt===void 0&&(pt=new ea,pt.layers.enable(dt),pt.viewport=new $n,H[dt]=pt),pt.matrix.fromArray(tt.transform.matrix),pt.matrix.decompose(pt.position,pt.quaternion,pt.scale),pt.projectionMatrix.fromArray(tt.projectionMatrix),pt.projectionMatrixInverse.copy(pt.projectionMatrix).invert(),pt.viewport.set(ht.x,ht.y,ht.width,ht.height),dt===0&&(U.matrix.copy(pt.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),rt===!0&&U.cameras.push(pt)}}for(let nt=0;nt<b.length;nt++){let rt=S[nt],dt=b[nt];rt!==null&&dt!==void 0&&dt.update(rt,Se,c||o)}_e&&_e(Te,Se),Se.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Se}),m=null}let Oe=new Xoe;Oe.setAnimationLoop(Re),this.setAnimationLoop=function(Te){_e=Te},this.dispose=function(){}}};function WUe(i,e){function t(g,x){g.matrixAutoUpdate===!0&&g.updateMatrix(),x.value.copy(g.matrix)}function r(g,x){x.color.getRGB(g.fogColor.value,Koe(i)),x.isFog?(g.fogNear.value=x.near,g.fogFar.value=x.far):x.isFogExp2&&(g.fogDensity.value=x.density)}function n(g,x,b,S,E){x.isMeshBasicMaterial||x.isMeshLambertMaterial?a(g,x):x.isMeshToonMaterial?(a(g,x),h(g,x)):x.isMeshPhongMaterial?(a(g,x),u(g,x)):x.isMeshStandardMaterial?(a(g,x),d(g,x),x.isMeshPhysicalMaterial&&f(g,x,E)):x.isMeshMatcapMaterial?(a(g,x),m(g,x)):x.isMeshDepthMaterial?a(g,x):x.isMeshDistanceMaterial?(a(g,x),y(g,x)):x.isMeshNormalMaterial?a(g,x):x.isLineBasicMaterial?(o(g,x),x.isLineDashedMaterial&&s(g,x)):x.isPointsMaterial?l(g,x,b,S):x.isSpriteMaterial?c(g,x):x.isShadowMaterial?(g.color.value.copy(x.color),g.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function a(g,x){g.opacity.value=x.opacity,x.color&&g.diffuse.value.copy(x.color),x.emissive&&g.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(g.map.value=x.map,t(x.map,g.mapTransform)),x.alphaMap&&(g.alphaMap.value=x.alphaMap,t(x.alphaMap,g.alphaMapTransform)),x.bumpMap&&(g.bumpMap.value=x.bumpMap,t(x.bumpMap,g.bumpMapTransform),g.bumpScale.value=x.bumpScale,x.side===Dl&&(g.bumpScale.value*=-1)),x.normalMap&&(g.normalMap.value=x.normalMap,t(x.normalMap,g.normalMapTransform),g.normalScale.value.copy(x.normalScale),x.side===Dl&&g.normalScale.value.negate()),x.displacementMap&&(g.displacementMap.value=x.displacementMap,t(x.displacementMap,g.displacementMapTransform),g.displacementScale.value=x.displacementScale,g.displacementBias.value=x.displacementBias),x.emissiveMap&&(g.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,g.emissiveMapTransform)),x.specularMap&&(g.specularMap.value=x.specularMap,t(x.specularMap,g.specularMapTransform)),x.alphaTest>0&&(g.alphaTest.value=x.alphaTest);let b=e.get(x).envMap;if(b&&(g.envMap.value=b,g.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=x.reflectivity,g.ior.value=x.ior,g.refractionRatio.value=x.refractionRatio),x.lightMap){g.lightMap.value=x.lightMap;let S=i._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=x.lightMapIntensity*S,t(x.lightMap,g.lightMapTransform)}x.aoMap&&(g.aoMap.value=x.aoMap,g.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,g.aoMapTransform))}function o(g,x){g.diffuse.value.copy(x.color),g.opacity.value=x.opacity,x.map&&(g.map.value=x.map,t(x.map,g.mapTransform))}function s(g,x){g.dashSize.value=x.dashSize,g.totalSize.value=x.dashSize+x.gapSize,g.scale.value=x.scale}function l(g,x,b,S){g.diffuse.value.copy(x.color),g.opacity.value=x.opacity,g.size.value=x.size*b,g.scale.value=S*.5,x.map&&(g.map.value=x.map,t(x.map,g.uvTransform)),x.alphaMap&&(g.alphaMap.value=x.alphaMap,t(x.alphaMap,g.alphaMapTransform)),x.alphaTest>0&&(g.alphaTest.value=x.alphaTest)}function c(g,x){g.diffuse.value.copy(x.color),g.opacity.value=x.opacity,g.rotation.value=x.rotation,x.map&&(g.map.value=x.map,t(x.map,g.mapTransform)),x.alphaMap&&(g.alphaMap.value=x.alphaMap,t(x.alphaMap,g.alphaMapTransform)),x.alphaTest>0&&(g.alphaTest.value=x.alphaTest)}function u(g,x){g.specular.value.copy(x.specular),g.shininess.value=Math.max(x.shininess,1e-4)}function h(g,x){x.gradientMap&&(g.gradientMap.value=x.gradientMap)}function d(g,x){g.metalness.value=x.metalness,x.metalnessMap&&(g.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,g.metalnessMapTransform)),g.roughness.value=x.roughness,x.roughnessMap&&(g.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,g.roughnessMapTransform)),e.get(x).envMap&&(g.envMapIntensity.value=x.envMapIntensity)}function f(g,x,b){g.ior.value=x.ior,x.sheen>0&&(g.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),g.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(g.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,g.sheenColorMapTransform)),x.sheenRoughnessMap&&(g.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,g.sheenRoughnessMapTransform))),x.clearcoat>0&&(g.clearcoat.value=x.clearcoat,g.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(g.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,g.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(g.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Dl&&g.clearcoatNormalScale.value.negate())),x.iridescence>0&&(g.iridescence.value=x.iridescence,g.iridescenceIOR.value=x.iridescenceIOR,g.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(g.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,g.iridescenceMapTransform)),x.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),x.transmission>0&&(g.transmission.value=x.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),x.transmissionMap&&(g.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,g.transmissionMapTransform)),g.thickness.value=x.thickness,x.thicknessMap&&(g.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=x.attenuationDistance,g.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(g.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(g.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=x.specularIntensity,g.specularColor.value.copy(x.specularColor),x.specularColorMap&&(g.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,g.specularColorMapTransform)),x.specularIntensityMap&&(g.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,x){x.matcap&&(g.matcap.value=x.matcap)}function y(g,x){let b=e.get(x).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:n}}function jUe(i,e,t,r){let n={},a={},o=[],s=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,S){let E=S.program;r.uniformBlockBinding(b,E)}function c(b,S){let E=n[b.id];E===void 0&&(m(b),E=u(b),n[b.id]=E,b.addEventListener("dispose",g));let D=S.program;r.updateUBOMapping(b,D);let B=e.render.frame;a[b.id]!==B&&(d(b),a[b.id]=B)}function u(b){let S=h();b.__bindingPointIndex=S;let E=i.createBuffer(),D=b.__size,B=b.usage;return i.bindBuffer(i.UNIFORM_BUFFER,E),i.bufferData(i.UNIFORM_BUFFER,D,B),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,S,E),E}function h(){for(let b=0;b<s;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(b){let S=n[b.id],E=b.uniforms,D=b.__cache;i.bindBuffer(i.UNIFORM_BUFFER,S);for(let B=0,F=E.length;B<F;B++){let H=Array.isArray(E[B])?E[B]:[E[B]];for(let U=0,k=H.length;U<k;U++){let j=H[U];if(f(j,B,U,D)===!0){let q=j.__offset,X=Array.isArray(j.value)?j.value:[j.value],Y=0;for(let J=0;J<X.length;J++){let te=X[J],de=y(te);typeof te=="number"||typeof te=="boolean"?(j.__data[0]=te,i.bufferSubData(i.UNIFORM_BUFFER,q+Y,j.__data)):te.isMatrix3?(j.__data[0]=te.elements[0],j.__data[1]=te.elements[1],j.__data[2]=te.elements[2],j.__data[3]=0,j.__data[4]=te.elements[3],j.__data[5]=te.elements[4],j.__data[6]=te.elements[5],j.__data[7]=0,j.__data[8]=te.elements[6],j.__data[9]=te.elements[7],j.__data[10]=te.elements[8],j.__data[11]=0):(te.toArray(j.__data,Y),Y+=de.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,q,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(b,S,E,D){let B=b.value,F=S+"_"+E;if(D[F]===void 0)return typeof B=="number"||typeof B=="boolean"?D[F]=B:D[F]=B.clone(),!0;{let H=D[F];if(typeof B=="number"||typeof B=="boolean"){if(H!==B)return D[F]=B,!0}else if(H.equals(B)===!1)return H.copy(B),!0}return!1}function m(b){let S=b.uniforms,E=0,D=16;for(let F=0,H=S.length;F<H;F++){let U=Array.isArray(S[F])?S[F]:[S[F]];for(let k=0,j=U.length;k<j;k++){let q=U[k],X=Array.isArray(q.value)?q.value:[q.value];for(let Y=0,J=X.length;Y<J;Y++){let te=X[Y],de=y(te),ue=E%D;ue!==0&&D-ue<de.boundary&&(E+=D-ue),q.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=E,E+=de.storage}}}let B=E%D;return B>0&&(E+=D-B),b.__size=E,b.__cache={},this}function y(b){let S={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(S.boundary=4,S.storage=4):b.isVector2?(S.boundary=8,S.storage=8):b.isVector3||b.isColor?(S.boundary=16,S.storage=12):b.isVector4?(S.boundary=16,S.storage=16):b.isMatrix3?(S.boundary=48,S.storage=48):b.isMatrix4?(S.boundary=64,S.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),S}function g(b){let S=b.target;S.removeEventListener("dispose",g);let E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),i.deleteBuffer(n[S.id]),delete n[S.id],delete a[S.id]}function x(){for(let b in n)i.deleteBuffer(n[b]);o=[],n={},a={}}return{bind:l,update:c,dispose:x}}var cc=class{constructor(e={}){let{canvas:t=ZLe(),context:r=null,depth:n=!0,stencil:a=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;let f=new Uint32Array(4),m=new Int32Array(4),y=null,g=null,x=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=La,this._useLegacyLights=!1,this.toneMapping=Wp,this.toneMappingExposure=1;let S=this,E=!1,D=0,B=0,F=null,H=-1,U=null,k=new $n,j=new $n,q=null,X=new ji(0),Y=0,J=t.width,te=t.height,de=1,ue=null,ve=null,_e=new $n(0,0,J,te),Re=new $n(0,0,J,te),Oe=!1,Te=new Tw,Se=!1,nt=!1,rt=null,dt=new kr,tt=new Hr,ht=new Ne,pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Je(){return F===null?de:1}let Ie=r;function Bi(fe,ke){for(let Ze=0;Ze<fe.length;Ze++){let $e=fe[Ze],je=t.getContext($e,ke);if(je!==null)return je}return null}try{let fe={alpha:!0,depth:n,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${L5}`),t.addEventListener("webglcontextlost",Rt,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",Gt,!1),Ie===null){let ke=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ke.shift(),Ie=Bi(ke,fe),Ie===null)throw Bi(ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Ie.getShaderPrecisionFormat===void 0&&(Ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}let _t,It,Ct,Xt,Oi,ae,se,Ge,bt,gt,mt,Ti,kt,Qt,Ni,Zi,vt,vi,lt,Wi,Lt,Ot,Hi,Br;function An(){_t=new hNe(Ie),It=new aNe(Ie,_t,e),_t.init(It),Ot=new QUe(Ie,_t,It),Ct=new VUe(Ie,_t,It),Xt=new pNe(Ie),Oi=new IUe,ae=new HUe(Ie,_t,Ct,Oi,It,Ot,Xt),se=new sNe(S),Ge=new uNe(S),bt=new w3e(Ie,It),Hi=new rNe(Ie,_t,bt,It),gt=new dNe(Ie,bt,Xt,Hi),mt=new vNe(Ie,gt,bt,Xt),lt=new gNe(Ie,It,ae),Zi=new oNe(Oi),Ti=new MUe(S,se,Ge,_t,It,Hi,Zi),kt=new WUe(S,Oi),Qt=new DUe,Ni=new NUe(_t,It),vi=new iNe(S,se,Ge,Ct,mt,d,l),vt=new zUe(S,mt,It),Br=new jUe(Ie,Xt,It,Ct),Wi=new nNe(Ie,_t,Xt,It),Lt=new fNe(Ie,_t,Xt,It),Xt.programs=Ti.programs,S.capabilities=It,S.extensions=_t,S.properties=Oi,S.renderLists=Qt,S.shadowMap=vt,S.state=Ct,S.info=Xt}An();let ti=new x5(S,Ie);this.xr=ti,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){let fe=_t.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){let fe=_t.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(fe){fe!==void 0&&(de=fe,this.setSize(J,te,!1))},this.getSize=function(fe){return fe.set(J,te)},this.setSize=function(fe,ke,Ze=!0){if(ti.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=fe,te=ke,t.width=Math.floor(fe*de),t.height=Math.floor(ke*de),Ze===!0&&(t.style.width=fe+"px",t.style.height=ke+"px"),this.setViewport(0,0,fe,ke)},this.getDrawingBufferSize=function(fe){return fe.set(J*de,te*de).floor()},this.setDrawingBufferSize=function(fe,ke,Ze){J=fe,te=ke,de=Ze,t.width=Math.floor(fe*Ze),t.height=Math.floor(ke*Ze),this.setViewport(0,0,fe,ke)},this.getCurrentViewport=function(fe){return fe.copy(k)},this.getViewport=function(fe){return fe.copy(_e)},this.setViewport=function(fe,ke,Ze,$e){fe.isVector4?_e.set(fe.x,fe.y,fe.z,fe.w):_e.set(fe,ke,Ze,$e),Ct.viewport(k.copy(_e).multiplyScalar(de).floor())},this.getScissor=function(fe){return fe.copy(Re)},this.setScissor=function(fe,ke,Ze,$e){fe.isVector4?Re.set(fe.x,fe.y,fe.z,fe.w):Re.set(fe,ke,Ze,$e),Ct.scissor(j.copy(Re).multiplyScalar(de).floor())},this.getScissorTest=function(){return Oe},this.setScissorTest=function(fe){Ct.setScissorTest(Oe=fe)},this.setOpaqueSort=function(fe){ue=fe},this.setTransparentSort=function(fe){ve=fe},this.getClearColor=function(fe){return fe.copy(vi.getClearColor())},this.setClearColor=function(){vi.setClearColor.apply(vi,arguments)},this.getClearAlpha=function(){return vi.getClearAlpha()},this.setClearAlpha=function(){vi.setClearAlpha.apply(vi,arguments)},this.clear=function(fe=!0,ke=!0,Ze=!0){let $e=0;if(fe){let je=!1;if(F!==null){let ai=F.texture.format;je=ai===koe||ai===Uoe||ai===Noe}if(je){let ai=F.texture.type,Ai=ai===jp||ai===Hp||ai===U5||ai===og||ai===Ooe||ai===Foe,Ui=vi.getClearColor(),ze=vi.getClearAlpha(),Ji=Ui.r,Zt=Ui.g,Ri=Ui.b;Ai?(f[0]=Ji,f[1]=Zt,f[2]=Ri,f[3]=ze,Ie.clearBufferuiv(Ie.COLOR,0,f)):(m[0]=Ji,m[1]=Zt,m[2]=Ri,m[3]=ze,Ie.clearBufferiv(Ie.COLOR,0,m))}else $e|=Ie.COLOR_BUFFER_BIT}ke&&($e|=Ie.DEPTH_BUFFER_BIT),Ze&&($e|=Ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ie.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Rt,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",Gt,!1),Qt.dispose(),Ni.dispose(),Oi.dispose(),se.dispose(),Ge.dispose(),mt.dispose(),Hi.dispose(),Br.dispose(),Ti.dispose(),ti.dispose(),ti.removeEventListener("sessionstart",Ga),ti.removeEventListener("sessionend",Er),rt&&(rt.dispose(),rt=null),ga.stop()};function Rt(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;let fe=Xt.autoReset,ke=vt.enabled,Ze=vt.autoUpdate,$e=vt.needsUpdate,je=vt.type;An(),Xt.autoReset=fe,vt.enabled=ke,vt.autoUpdate=Ze,vt.needsUpdate=$e,vt.type=je}function Gt(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function Bt(fe){let ke=fe.target;ke.removeEventListener("dispose",Bt),Qi(ke)}function Qi(fe){_i(fe),Oi.remove(fe)}function _i(fe){let ke=Oi.get(fe).programs;ke!==void 0&&(ke.forEach(function(Ze){Ti.releaseProgram(Ze)}),fe.isShaderMaterial&&Ti.releaseShaderCache(fe))}this.renderBufferDirect=function(fe,ke,Ze,$e,je,ai){ke===null&&(ke=pt);let Ai=je.isMesh&&je.matrixWorld.determinant()<0,Ui=Xh(fe,ke,Ze,$e,je);Ct.setMaterial($e,Ai);let ze=Ze.index,Ji=1;if($e.wireframe===!0){if(ze=gt.getWireframeAttribute(Ze),ze===void 0)return;Ji=2}let Zt=Ze.drawRange,Ri=Ze.attributes.position,Yr=Zt.start*Ji,zi=(Zt.start+Zt.count)*Ji;ai!==null&&(Yr=Math.max(Yr,ai.start*Ji),zi=Math.min(zi,(ai.start+ai.count)*Ji)),ze!==null?(Yr=Math.max(Yr,0),zi=Math.min(zi,ze.count)):Ri!=null&&(Yr=Math.max(Yr,0),zi=Math.min(zi,Ri.count));let Mi=zi-Yr;if(Mi<0||Mi===1/0)return;Hi.setup(je,$e,Ui,Ze,ze);let Ki,Qr=Wi;if(ze!==null&&(Ki=bt.get(ze),Qr=Lt,Qr.setIndex(Ki)),je.isMesh)$e.wireframe===!0?(Ct.setLineWidth($e.wireframeLinewidth*Je()),Qr.setMode(Ie.LINES)):Qr.setMode(Ie.TRIANGLES);else if(je.isLine){let tr=$e.linewidth;tr===void 0&&(tr=1),Ct.setLineWidth(tr*Je()),je.isLineSegments?Qr.setMode(Ie.LINES):je.isLineLoop?Qr.setMode(Ie.LINE_LOOP):Qr.setMode(Ie.LINE_STRIP)}else je.isPoints?Qr.setMode(Ie.POINTS):je.isSprite&&Qr.setMode(Ie.TRIANGLES);if(je.isBatchedMesh)Qr.renderMultiDraw(je._multiDrawStarts,je._multiDrawCounts,je._multiDrawCount);else if(je.isInstancedMesh)Qr.renderInstances(Yr,Mi,je.count);else if(Ze.isInstancedBufferGeometry){let tr=Ze._maxInstanceCount!==void 0?Ze._maxInstanceCount:1/0,Wa=Math.min(Ze.instanceCount,tr);Qr.renderInstances(Yr,Mi,Wa)}else Qr.render(Yr,Mi)};function Cr(fe,ke,Ze){fe.transparent===!0&&fe.side===Ku&&fe.forceSinglePass===!1?(fe.side=Dl,fe.needsUpdate=!0,Ol(fe,ke,Ze),fe.side=kh,fe.needsUpdate=!0,Ol(fe,ke,Ze),fe.side=Ku):Ol(fe,ke,Ze)}this.compile=function(fe,ke,Ze=null){Ze===null&&(Ze=fe),g=Ni.get(Ze),g.init(),b.push(g),Ze.traverseVisible(function(je){je.isLight&&je.layers.test(ke.layers)&&(g.pushLight(je),je.castShadow&&g.pushShadow(je))}),fe!==Ze&&fe.traverseVisible(function(je){je.isLight&&je.layers.test(ke.layers)&&(g.pushLight(je),je.castShadow&&g.pushShadow(je))}),g.setupLights(S._useLegacyLights);let $e=new Set;return fe.traverse(function(je){let ai=je.material;if(ai)if(Array.isArray(ai))for(let Ai=0;Ai<ai.length;Ai++){let Ui=ai[Ai];Cr(Ui,Ze,je),$e.add(Ui)}else Cr(ai,Ze,je),$e.add(ai)}),b.pop(),g=null,$e},this.compileAsync=function(fe,ke,Ze=null){let $e=this.compile(fe,ke,Ze);return new Promise(je=>{function ai(){if($e.forEach(function(Ai){Oi.get(Ai).currentProgram.isReady()&&$e.delete(Ai)}),$e.size===0){je(fe);return}setTimeout(ai,10)}_t.get("KHR_parallel_shader_compile")!==null?ai():setTimeout(ai,10)})};let zr=null;function en(fe){zr&&zr(fe)}function Ga(){ga.stop()}function Er(){ga.start()}let ga=new Xoe;ga.setAnimationLoop(en),typeof self<"u"&&ga.setContext(self),this.setAnimationLoop=function(fe){zr=fe,ti.setAnimationLoop(fe),fe===null?ga.stop():ga.start()},ti.addEventListener("sessionstart",Ga),ti.addEventListener("sessionend",Er),this.render=function(fe,ke){if(ke!==void 0&&ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),ke.parent===null&&ke.matrixWorldAutoUpdate===!0&&ke.updateMatrixWorld(),ti.enabled===!0&&ti.isPresenting===!0&&(ti.cameraAutoUpdate===!0&&ti.updateCamera(ke),ke=ti.getCamera()),fe.isScene===!0&&fe.onBeforeRender(S,fe,ke,F),g=Ni.get(fe,b.length),g.init(),b.push(g),dt.multiplyMatrices(ke.projectionMatrix,ke.matrixWorldInverse),Te.setFromProjectionMatrix(dt),nt=this.localClippingEnabled,Se=Zi.init(this.clippingPlanes,nt),y=Qt.get(fe,x.length),y.init(),x.push(y),Di(fe,ke,0,S.sortObjects),y.finish(),S.sortObjects===!0&&y.sort(ue,ve),this.info.render.frame++,Se===!0&&Zi.beginShadows();let Ze=g.state.shadowsArray;if(vt.render(Ze,fe,ke),Se===!0&&Zi.endShadows(),this.info.autoReset===!0&&this.info.reset(),vi.render(y,fe),g.setupLights(S._useLegacyLights),ke.isArrayCamera){let $e=ke.cameras;for(let je=0,ai=$e.length;je<ai;je++){let Ai=$e[je];Oo(y,fe,Ai,Ai.viewport)}}else Oo(y,fe,ke);F!==null&&(ae.updateMultisampleRenderTarget(F),ae.updateRenderTargetMipmap(F)),fe.isScene===!0&&fe.onAfterRender(S,fe,ke),Hi.resetDefaultState(),H=-1,U=null,b.pop(),b.length>0?g=b[b.length-1]:g=null,x.pop(),x.length>0?y=x[x.length-1]:y=null};function Di(fe,ke,Ze,$e){if(fe.visible===!1)return;if(fe.layers.test(ke.layers)){if(fe.isGroup)Ze=fe.renderOrder;else if(fe.isLOD)fe.autoUpdate===!0&&fe.update(ke);else if(fe.isLight)g.pushLight(fe),fe.castShadow&&g.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||Te.intersectsSprite(fe)){$e&&ht.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(dt);let Ai=mt.update(fe),Ui=fe.material;Ui.visible&&y.push(fe,Ai,Ui,Ze,ht.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(!fe.frustumCulled||Te.intersectsObject(fe))){let Ai=mt.update(fe),Ui=fe.material;if($e&&(fe.boundingSphere!==void 0?(fe.boundingSphere===null&&fe.computeBoundingSphere(),ht.copy(fe.boundingSphere.center)):(Ai.boundingSphere===null&&Ai.computeBoundingSphere(),ht.copy(Ai.boundingSphere.center)),ht.applyMatrix4(fe.matrixWorld).applyMatrix4(dt)),Array.isArray(Ui)){let ze=Ai.groups;for(let Ji=0,Zt=ze.length;Ji<Zt;Ji++){let Ri=ze[Ji],Yr=Ui[Ri.materialIndex];Yr&&Yr.visible&&y.push(fe,Ai,Yr,Ze,ht.z,Ri)}}else Ui.visible&&y.push(fe,Ai,Ui,Ze,ht.z,null)}}let ai=fe.children;for(let Ai=0,Ui=ai.length;Ai<Ui;Ai++)Di(ai[Ai],ke,Ze,$e)}function Oo(fe,ke,Ze,$e){let je=fe.opaque,ai=fe.transmissive,Ai=fe.transparent;g.setupLightsView(Ze),Se===!0&&Zi.setGlobalState(S.clippingPlanes,Ze),ai.length>0&&us(je,ai,ke,Ze),$e&&Ct.viewport(k.copy($e)),je.length>0&&Wt(je,ke,Ze),ai.length>0&&Wt(ai,ke,Ze),Ai.length>0&&Wt(Ai,ke,Ze),Ct.buffers.depth.setTest(!0),Ct.buffers.depth.setMask(!0),Ct.buffers.color.setMask(!0),Ct.setPolygonOffset(!1)}function us(fe,ke,Ze,$e){if((Ze.isScene===!0?Ze.overrideMaterial:null)!==null)return;let ai=It.isWebGL2;rt===null&&(rt=new Gd(1,1,{generateMipmaps:!0,type:_t.has("EXT_color_buffer_half_float")?zh:jp,minFilter:Qd,samples:ai?4:0})),S.getDrawingBufferSize(tt),ai?rt.setSize(tt.x,tt.y):rt.setSize(fI(tt.x),fI(tt.y));let Ai=S.getRenderTarget();S.setRenderTarget(rt),S.getClearColor(X),Y=S.getClearAlpha(),Y<1&&S.setClearColor(16777215,.5),S.clear();let Ui=S.toneMapping;S.toneMapping=Wp,Wt(fe,Ze,$e),ae.updateMultisampleRenderTarget(rt),ae.updateRenderTargetMipmap(rt);let ze=!1;for(let Ji=0,Zt=ke.length;Ji<Zt;Ji++){let Ri=ke[Ji],Yr=Ri.object,zi=Ri.geometry,Mi=Ri.material,Ki=Ri.group;if(Mi.side===Ku&&Yr.layers.test($e.layers)){let Qr=Mi.side;Mi.side=Dl,Mi.needsUpdate=!0,hs(Yr,Ze,$e,zi,Mi,Ki),Mi.side=Qr,Mi.needsUpdate=!0,ze=!0}}ze===!0&&(ae.updateMultisampleRenderTarget(rt),ae.updateRenderTargetMipmap(rt)),S.setRenderTarget(Ai),S.setClearColor(X,Y),S.toneMapping=Ui}function Wt(fe,ke,Ze){let $e=ke.isScene===!0?ke.overrideMaterial:null;for(let je=0,ai=fe.length;je<ai;je++){let Ai=fe[je],Ui=Ai.object,ze=Ai.geometry,Ji=$e===null?Ai.material:$e,Zt=Ai.group;Ui.layers.test(Ze.layers)&&hs(Ui,ke,Ze,ze,Ji,Zt)}}function hs(fe,ke,Ze,$e,je,ai){fe.onBeforeRender(S,ke,Ze,$e,je,ai),fe.modelViewMatrix.multiplyMatrices(Ze.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),je.onBeforeRender(S,ke,Ze,$e,fe,ai),je.transparent===!0&&je.side===Ku&&je.forceSinglePass===!1?(je.side=Dl,je.needsUpdate=!0,S.renderBufferDirect(Ze,ke,$e,je,fe,ai),je.side=kh,je.needsUpdate=!0,S.renderBufferDirect(Ze,ke,$e,je,fe,ai),je.side=Ku):S.renderBufferDirect(Ze,ke,$e,je,fe,ai),fe.onAfterRender(S,ke,Ze,$e,je,ai)}function Ol(fe,ke,Ze){ke.isScene!==!0&&(ke=pt);let $e=Oi.get(fe),je=g.state.lights,ai=g.state.shadowsArray,Ai=je.state.version,Ui=Ti.getParameters(fe,je.state,ai,ke,Ze),ze=Ti.getProgramCacheKey(Ui),Ji=$e.programs;$e.environment=fe.isMeshStandardMaterial?ke.environment:null,$e.fog=ke.fog,$e.envMap=(fe.isMeshStandardMaterial?Ge:se).get(fe.envMap||$e.environment),Ji===void 0&&(fe.addEventListener("dispose",Bt),Ji=new Map,$e.programs=Ji);let Zt=Ji.get(ze);if(Zt!==void 0){if($e.currentProgram===Zt&&$e.lightsStateVersion===Ai)return Kh(fe,Ui),Zt}else Ui.uniforms=Ti.getUniforms(fe),fe.onBuild(Ze,Ui,S),fe.onBeforeCompile(Ui,S),Zt=Ti.acquireProgram(Ui,ze),Ji.set(ze,Zt),$e.uniforms=Ui.uniforms;let Ri=$e.uniforms;return(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||fe.clipping===!0)&&(Ri.clippingPlanes=Zi.uniform),Kh(fe,Ui),$e.needsLights=Ju(fe),$e.lightsStateVersion=Ai,$e.needsLights&&(Ri.ambientLightColor.value=je.state.ambient,Ri.lightProbe.value=je.state.probe,Ri.directionalLights.value=je.state.directional,Ri.directionalLightShadows.value=je.state.directionalShadow,Ri.spotLights.value=je.state.spot,Ri.spotLightShadows.value=je.state.spotShadow,Ri.rectAreaLights.value=je.state.rectArea,Ri.ltc_1.value=je.state.rectAreaLTC1,Ri.ltc_2.value=je.state.rectAreaLTC2,Ri.pointLights.value=je.state.point,Ri.pointLightShadows.value=je.state.pointShadow,Ri.hemisphereLights.value=je.state.hemi,Ri.directionalShadowMap.value=je.state.directionalShadowMap,Ri.directionalShadowMatrix.value=je.state.directionalShadowMatrix,Ri.spotShadowMap.value=je.state.spotShadowMap,Ri.spotLightMatrix.value=je.state.spotLightMatrix,Ri.spotLightMap.value=je.state.spotLightMap,Ri.pointShadowMap.value=je.state.pointShadowMap,Ri.pointShadowMatrix.value=je.state.pointShadowMatrix),$e.currentProgram=Zt,$e.uniformsList=null,Zt}function no(fe){if(fe.uniformsList===null){let ke=fe.currentProgram.getUniforms();fe.uniformsList=h1.seqWithValue(ke.seq,fe.uniforms)}return fe.uniformsList}function Kh(fe,ke){let Ze=Oi.get(fe);Ze.outputColorSpace=ke.outputColorSpace,Ze.batching=ke.batching,Ze.instancing=ke.instancing,Ze.instancingColor=ke.instancingColor,Ze.skinning=ke.skinning,Ze.morphTargets=ke.morphTargets,Ze.morphNormals=ke.morphNormals,Ze.morphColors=ke.morphColors,Ze.morphTargetsCount=ke.morphTargetsCount,Ze.numClippingPlanes=ke.numClippingPlanes,Ze.numIntersection=ke.numClipIntersection,Ze.vertexAlphas=ke.vertexAlphas,Ze.vertexTangents=ke.vertexTangents,Ze.toneMapping=ke.toneMapping}function Xh(fe,ke,Ze,$e,je){ke.isScene!==!0&&(ke=pt),ae.resetTextureUnits();let ai=ke.fog,Ai=$e.isMeshStandardMaterial?ke.environment:null,Ui=F===null?S.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:ro,ze=($e.isMeshStandardMaterial?Ge:se).get($e.envMap||Ai),Ji=$e.vertexColors===!0&&!!Ze.attributes.color&&Ze.attributes.color.itemSize===4,Zt=!!Ze.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),Ri=!!Ze.morphAttributes.position,Yr=!!Ze.morphAttributes.normal,zi=!!Ze.morphAttributes.color,Mi=Wp;$e.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Mi=S.toneMapping);let Ki=Ze.morphAttributes.position||Ze.morphAttributes.normal||Ze.morphAttributes.color,Qr=Ki!==void 0?Ki.length:0,tr=Oi.get($e),Wa=g.state.lights;if(Se===!0&&(nt===!0||fe!==U)){let rn=fe===U&&$e.id===H;Zi.setState($e,fe,rn)}let nr=!1;$e.version===tr.__version?(tr.needsLights&&tr.lightsStateVersion!==Wa.state.version||tr.outputColorSpace!==Ui||je.isBatchedMesh&&tr.batching===!1||!je.isBatchedMesh&&tr.batching===!0||je.isInstancedMesh&&tr.instancing===!1||!je.isInstancedMesh&&tr.instancing===!0||je.isSkinnedMesh&&tr.skinning===!1||!je.isSkinnedMesh&&tr.skinning===!0||je.isInstancedMesh&&tr.instancingColor===!0&&je.instanceColor===null||je.isInstancedMesh&&tr.instancingColor===!1&&je.instanceColor!==null||tr.envMap!==ze||$e.fog===!0&&tr.fog!==ai||tr.numClippingPlanes!==void 0&&(tr.numClippingPlanes!==Zi.numPlanes||tr.numIntersection!==Zi.numIntersection)||tr.vertexAlphas!==Ji||tr.vertexTangents!==Zt||tr.morphTargets!==Ri||tr.morphNormals!==Yr||tr.morphColors!==zi||tr.toneMapping!==Mi||It.isWebGL2===!0&&tr.morphTargetsCount!==Qr)&&(nr=!0):(nr=!0,tr.__version=$e.version);let ha=tr.currentProgram;nr===!0&&(ha=Ol($e,ke,je));let Fl=!1,Vr=!1,el=!1,Pr=ha.getUniforms(),da=tr.uniforms;if(Ct.useProgram(ha.program)&&(Fl=!0,Vr=!0,el=!0),$e.id!==H&&(H=$e.id,Vr=!0),Fl||U!==fe){Pr.setValue(Ie,"projectionMatrix",fe.projectionMatrix),Pr.setValue(Ie,"viewMatrix",fe.matrixWorldInverse);let rn=Pr.map.cameraPosition;rn!==void 0&&rn.setValue(Ie,ht.setFromMatrixPosition(fe.matrixWorld)),It.logarithmicDepthBuffer&&Pr.setValue(Ie,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&Pr.setValue(Ie,"isOrthographic",fe.isOrthographicCamera===!0),U!==fe&&(U=fe,Vr=!0,el=!0)}if(je.isSkinnedMesh){Pr.setOptional(Ie,je,"bindMatrix"),Pr.setOptional(Ie,je,"bindMatrixInverse");let rn=je.skeleton;rn&&(It.floatVertexTextures?(rn.boneTexture===null&&rn.computeBoneTexture(),Pr.setValue(Ie,"boneTexture",rn.boneTexture,ae)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}je.isBatchedMesh&&(Pr.setOptional(Ie,je,"batchingTexture"),Pr.setValue(Ie,"batchingTexture",je._matricesTexture,ae));let tn=Ze.morphAttributes;if((tn.position!==void 0||tn.normal!==void 0||tn.color!==void 0&&It.isWebGL2===!0)&&lt.update(je,Ze,ha),(Vr||tr.receiveShadow!==je.receiveShadow)&&(tr.receiveShadow=je.receiveShadow,Pr.setValue(Ie,"receiveShadow",je.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(da.envMap.value=ze,da.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),Vr&&(Pr.setValue(Ie,"toneMappingExposure",S.toneMappingExposure),tr.needsLights&&uu(da,el),ai&&$e.fog===!0&&kt.refreshFogUniforms(da,ai),kt.refreshMaterialUniforms(da,$e,de,te,rt),h1.upload(Ie,no(tr),da,ae)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(h1.upload(Ie,no(tr),da,ae),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&Pr.setValue(Ie,"center",je.center),Pr.setValue(Ie,"modelViewMatrix",je.modelViewMatrix),Pr.setValue(Ie,"normalMatrix",je.normalMatrix),Pr.setValue(Ie,"modelMatrix",je.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){let rn=$e.uniformsGroups;for(let Ve=0,me=rn.length;Ve<me;Ve++)if(It.isWebGL2){let Ci=rn[Ve];Br.update(Ci,ha),Br.bind(Ci,ha)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ha}function uu(fe,ke){fe.ambientLightColor.needsUpdate=ke,fe.lightProbe.needsUpdate=ke,fe.directionalLights.needsUpdate=ke,fe.directionalLightShadows.needsUpdate=ke,fe.pointLights.needsUpdate=ke,fe.pointLightShadows.needsUpdate=ke,fe.spotLights.needsUpdate=ke,fe.spotLightShadows.needsUpdate=ke,fe.rectAreaLights.needsUpdate=ke,fe.hemisphereLights.needsUpdate=ke}function Ju(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&fe.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(fe,ke,Ze){Oi.get(fe.texture).__webglTexture=ke,Oi.get(fe.depthTexture).__webglTexture=Ze;let $e=Oi.get(fe);$e.__hasExternalTextures=!0,$e.__hasExternalTextures&&($e.__autoAllocateDepthBuffer=Ze===void 0,$e.__autoAllocateDepthBuffer||_t.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,ke){let Ze=Oi.get(fe);Ze.__webglFramebuffer=ke,Ze.__useDefaultFramebuffer=ke===void 0},this.setRenderTarget=function(fe,ke=0,Ze=0){F=fe,D=ke,B=Ze;let $e=!0,je=null,ai=!1,Ai=!1;if(fe){let ze=Oi.get(fe);ze.__useDefaultFramebuffer!==void 0?(Ct.bindFramebuffer(Ie.FRAMEBUFFER,null),$e=!1):ze.__webglFramebuffer===void 0?ae.setupRenderTarget(fe):ze.__hasExternalTextures&&ae.rebindTextures(fe,Oi.get(fe.texture).__webglTexture,Oi.get(fe.depthTexture).__webglTexture);let Ji=fe.texture;(Ji.isData3DTexture||Ji.isDataArrayTexture||Ji.isCompressedArrayTexture)&&(Ai=!0);let Zt=Oi.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(Array.isArray(Zt[ke])?je=Zt[ke][Ze]:je=Zt[ke],ai=!0):It.isWebGL2&&fe.samples>0&&ae.useMultisampledRTT(fe)===!1?je=Oi.get(fe).__webglMultisampledFramebuffer:Array.isArray(Zt)?je=Zt[Ze]:je=Zt,k.copy(fe.viewport),j.copy(fe.scissor),q=fe.scissorTest}else k.copy(_e).multiplyScalar(de).floor(),j.copy(Re).multiplyScalar(de).floor(),q=Oe;if(Ct.bindFramebuffer(Ie.FRAMEBUFFER,je)&&It.drawBuffers&&$e&&Ct.drawBuffers(fe,je),Ct.viewport(k),Ct.scissor(j),Ct.setScissorTest(q),ai){let ze=Oi.get(fe.texture);Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ze.__webglTexture,Ze)}else if(Ai){let ze=Oi.get(fe.texture),Ji=ke||0;Ie.framebufferTextureLayer(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,ze.__webglTexture,Ze||0,Ji)}H=-1},this.readRenderTargetPixels=function(fe,ke,Ze,$e,je,ai,Ai){if(!(fe&&fe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ui=Oi.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&Ai!==void 0&&(Ui=Ui[Ai]),Ui){Ct.bindFramebuffer(Ie.FRAMEBUFFER,Ui);try{let ze=fe.texture,Ji=ze.format,Zt=ze.type;if(Ji!==qc&&Ot.convert(Ji)!==Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Ri=Zt===zh&&(_t.has("EXT_color_buffer_half_float")||It.isWebGL2&&_t.has("EXT_color_buffer_float"));if(Zt!==jp&&Ot.convert(Zt)!==Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Zt===sc&&(It.isWebGL2||_t.has("OES_texture_float")||_t.has("WEBGL_color_buffer_float")))&&!Ri){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ke>=0&&ke<=fe.width-$e&&Ze>=0&&Ze<=fe.height-je&&Ie.readPixels(ke,Ze,$e,je,Ot.convert(Ji),Ot.convert(Zt),ai)}finally{let ze=F!==null?Oi.get(F).__webglFramebuffer:null;Ct.bindFramebuffer(Ie.FRAMEBUFFER,ze)}}},this.copyFramebufferToTexture=function(fe,ke,Ze=0){let $e=Math.pow(2,-Ze),je=Math.floor(ke.image.width*$e),ai=Math.floor(ke.image.height*$e);ae.setTexture2D(ke,0),Ie.copyTexSubImage2D(Ie.TEXTURE_2D,Ze,0,0,fe.x,fe.y,je,ai),Ct.unbindTexture()},this.copyTextureToTexture=function(fe,ke,Ze,$e=0){let je=ke.image.width,ai=ke.image.height,Ai=Ot.convert(Ze.format),Ui=Ot.convert(Ze.type);ae.setTexture2D(Ze,0),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,Ze.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ze.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,Ze.unpackAlignment),ke.isDataTexture?Ie.texSubImage2D(Ie.TEXTURE_2D,$e,fe.x,fe.y,je,ai,Ai,Ui,ke.image.data):ke.isCompressedTexture?Ie.compressedTexSubImage2D(Ie.TEXTURE_2D,$e,fe.x,fe.y,ke.mipmaps[0].width,ke.mipmaps[0].height,Ai,ke.mipmaps[0].data):Ie.texSubImage2D(Ie.TEXTURE_2D,$e,fe.x,fe.y,Ai,Ui,ke.image),$e===0&&Ze.generateMipmaps&&Ie.generateMipmap(Ie.TEXTURE_2D),Ct.unbindTexture()},this.copyTextureToTexture3D=function(fe,ke,Ze,$e,je=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let ai=fe.max.x-fe.min.x+1,Ai=fe.max.y-fe.min.y+1,Ui=fe.max.z-fe.min.z+1,ze=Ot.convert($e.format),Ji=Ot.convert($e.type),Zt;if($e.isData3DTexture)ae.setTexture3D($e,0),Zt=Ie.TEXTURE_3D;else if($e.isDataArrayTexture||$e.isCompressedArrayTexture)ae.setTexture2DArray($e,0),Zt=Ie.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,$e.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$e.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,$e.unpackAlignment);let Ri=Ie.getParameter(Ie.UNPACK_ROW_LENGTH),Yr=Ie.getParameter(Ie.UNPACK_IMAGE_HEIGHT),zi=Ie.getParameter(Ie.UNPACK_SKIP_PIXELS),Mi=Ie.getParameter(Ie.UNPACK_SKIP_ROWS),Ki=Ie.getParameter(Ie.UNPACK_SKIP_IMAGES),Qr=Ze.isCompressedTexture?Ze.mipmaps[je]:Ze.image;Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,Qr.width),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,Qr.height),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,fe.min.x),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,fe.min.y),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,fe.min.z),Ze.isDataTexture||Ze.isData3DTexture?Ie.texSubImage3D(Zt,je,ke.x,ke.y,ke.z,ai,Ai,Ui,ze,Ji,Qr.data):Ze.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ie.compressedTexSubImage3D(Zt,je,ke.x,ke.y,ke.z,ai,Ai,Ui,ze,Qr.data)):Ie.texSubImage3D(Zt,je,ke.x,ke.y,ke.z,ai,Ai,Ui,ze,Ji,Qr),Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,Ri),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,Yr),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,zi),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,Mi),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,Ki),je===0&&$e.generateMipmaps&&Ie.generateMipmap(Zt),Ct.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?ae.setTextureCube(fe,0):fe.isData3DTexture?ae.setTexture3D(fe,0):fe.isDataArrayTexture||fe.isCompressedArrayTexture?ae.setTexture2DArray(fe,0):ae.setTexture2D(fe,0),Ct.unbindTexture()},this.resetState=function(){D=0,B=0,F=null,Ct.reset(),Hi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===z5?"display-p3":"srgb",t.unpackColorSpace=bn.workingColorSpace===NI?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===La?Hd:Hoe}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Hd?La:ro}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}},_5=class extends cc{};_5.prototype.isWebGL1Renderer=!0;var eu=class extends ls{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},Mw=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=r5,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Xu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,a=this.stride;n<a;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},qs=new Ne,Iw=class i{constructor(e,t,r,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)qs.fromBufferAttribute(this,t),qs.applyMatrix4(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)qs.fromBufferAttribute(this,t),qs.applyNormalMatrix(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)qs.fromBufferAttribute(this,t),qs.transformDirection(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}setX(e,t){return this.normalized&&(t=Yn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Uh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Uh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Uh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Uh(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array),n=Yn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yn(t,this.array),r=Yn(r,this.array),n=Yn(n,this.array),a=Yn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[n+a])}return new Do(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[n+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var poe=new Ne,Aoe=new $n,moe=new $n,KUe=new Ne,goe=new kr,tI=new Ne,Yk=new lc,voe=new kr,qk=new g1,SI=class extends Ma{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Jne,this.bindMatrix=new kr,this.bindMatrixInverse=new kr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $c),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,tI),this.boundingBox.expandByPoint(tI)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new lc),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,tI),this.boundingSphere.expandByPoint(tI)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let r=this.material,n=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yk.copy(this.boundingSphere),Yk.applyMatrix4(n),e.ray.intersectsSphere(Yk)!==!1&&(voe.copy(n).invert(),qk.copy(e.ray).applyMatrix4(voe),!(this.boundingBox!==null&&qk.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,qk)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new $n,t=this.geometry.attributes.skinWeight;for(let r=0,n=t.count;r<n;r++){e.fromBufferAttribute(t,r);let a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Jne?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gLe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let r=this.skeleton,n=this.geometry;Aoe.fromBufferAttribute(n.attributes.skinIndex,e),moe.fromBufferAttribute(n.attributes.skinWeight,e),poe.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){let o=moe.getComponent(a);if(o!==0){let s=Aoe.getComponent(a);goe.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(KUe.copy(poe).applyMatrix4(goe),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}},Bw=class extends ls{constructor(){super(),this.isBone=!0,this.type="Bone"}},CI=class extends qu{constructor(e=null,t=1,r=1,n,a,o,s,l,c=Bo,u=Bo,h,d){super(null,o,s,l,c,u,n,a,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yoe=new kr,XUe=new kr,EI=class i{constructor(e=[],t=[]){this.uuid=Xu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new kr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new kr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let a=0,o=e.length;a<o;a++){let s=e[a]?e[a].matrixWorld:XUe;yoe.multiplyMatrices(s,t[a]),yoe.toArray(r,a*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new i(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new CI(t,e,e,qc,sc);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){let a=e.bones[r],o=t[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new Bw),this.bones.push(o),this.boneInverses.push(new kr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let n=0,a=t.length;n<a;n++){let o=t[n];e.bones.push(o.uuid);let s=r[n];e.boneInverses.push(s.toArray())}return e}},hg=class extends Do{constructor(e,t,r,n=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},a1=new kr,xoe=new kr,iI=[],_oe=new $c,YUe=new kr,mw=new Ma,gw=new lc,TI=class extends Ma{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new hg(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<r;n++)this.setMatrixAt(n,YUe)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $c),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,a1),_oe.copy(e.boundingBox).applyMatrix4(a1),this.boundingBox.union(_oe)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new lc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,a1),gw.copy(e.boundingSphere).applyMatrix4(a1),this.boundingSphere.union(gw)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let r=this.matrixWorld,n=this.count;if(mw.geometry=this.geometry,mw.material=this.material,mw.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gw.copy(this.boundingSphere),gw.applyMatrix4(r),e.ray.intersectsSphere(gw)!==!1))for(let a=0;a<n;a++){this.getMatrixAt(a,a1),xoe.multiplyMatrices(r,a1),mw.matrixWorld=xoe,mw.raycast(e,iI);for(let o=0,s=iI.length;o<s;o++){let l=iI[o];l.instanceId=a,l.object=this,t.push(l)}iI.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new hg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}};var jd=class extends cs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ji(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},woe=new Ne,boe=new Ne,Soe=new kr,Zk=new g1,rI=new lc,x1=class extends ls{constructor(e=new $s,t=new jd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let n=1,a=t.count;n<a;n++)woe.fromBufferAttribute(t,n-1),boe.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=woe.distanceTo(boe);e.setAttribute("lineDistance",new Ro(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,a=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rI.copy(r.boundingSphere),rI.applyMatrix4(n),rI.radius+=a,e.ray.intersectsSphere(rI)===!1)return;Soe.copy(n).invert(),Zk.copy(e.ray).applyMatrix4(Soe);let s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=new Ne,u=new Ne,h=new Ne,d=new Ne,f=this.isLineSegments?2:1,m=r.index,g=r.attributes.position;if(m!==null){let x=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let S=x,E=b-1;S<E;S+=f){let D=m.getX(S),B=m.getX(S+1);if(c.fromBufferAttribute(g,D),u.fromBufferAttribute(g,B),Zk.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);let H=e.ray.origin.distanceTo(d);H<e.near||H>e.far||t.push({distance:H,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{let x=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count);for(let S=x,E=b-1;S<E;S+=f){if(c.fromBufferAttribute(g,S),u.fromBufferAttribute(g,S+1),Zk.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);let B=e.ray.origin.distanceTo(d);B<e.near||B>e.far||t.push({distance:B,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let n=t[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){let s=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}},Coe=new Ne,Eoe=new Ne,dg=class extends x1{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let n=0,a=t.count;n<a;n+=2)Coe.fromBufferAttribute(t,n),Eoe.fromBufferAttribute(t,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+Coe.distanceTo(Eoe);e.setAttribute("lineDistance",new Ro(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},MI=class extends x1{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Hh=class extends cs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ji(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Toe=new kr,w5=new g1,nI=new lc,aI=new Ne,Xp=class extends ls{constructor(e=new $s,t=new Hh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),nI.copy(r.boundingSphere),nI.applyMatrix4(n),nI.radius+=a,e.ray.intersectsSphere(nI)===!1)return;Toe.copy(n).invert(),w5.copy(e.ray).applyMatrix4(Toe);let s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=r.index,h=r.attributes.position;if(c!==null){let d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let m=d,y=f;m<y;m++){let g=c.getX(m);aI.fromBufferAttribute(h,g),Moe(aI,g,l,n,e,t,this)}}else{let d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let m=d,y=f;m<y;m++)aI.fromBufferAttribute(h,m),Moe(aI,m,l,n,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let n=t[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){let s=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}};function Moe(i,e,t,r,n,a,o){let s=w5.distanceSqToPoint(i);if(s<t){let l=new Ne;w5.closestPointToPoint(i,l),l.applyMatrix4(r);let c=n.ray.origin.distanceTo(l);if(c<n.near||c>n.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}var Yp=class extends cs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ji(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=k5,this.normalScale=new Hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},tu=class extends Yp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Hr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ss(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ji(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ji(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ji(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},_1=class extends cs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ji(16777215),this.specular=new ji(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=k5,this.normalScale=new Hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function oI(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function qUe(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function ZUe(i){function e(n,a){return i[n]-i[a]}let t=i.length,r=new Array(t);for(let n=0;n!==t;++n)r[n]=n;return r.sort(e),r}function Ioe(i,e,t){let r=i.length,n=new i.constructor(r);for(let a=0,o=0;o!==r;++a){let s=t[a]*e;for(let l=0;l!==e;++l)n[o++]=i[s+l]}return n}function ese(i,e,t,r){let n=1,a=i[0];for(;a!==void 0&&a[r]===void 0;)a=i[n++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=i[n++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=i[n++];while(a!==void 0);else do o=a[r],o!==void 0&&(e.push(a.time),t.push(o)),a=i[n++];while(a!==void 0)}var qp=class{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,n=t[r],a=t[r-1];e:{t:{let o;i:{r:if(!(e<n)){for(let s=r+2;;){if(n===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(a=n,n=t[++r],e<n)break t}o=t.length;break i}if(!(e>=a)){let s=t[1];e<s&&(r=2,a=s);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(n=a,a=t[--r-1],e>=a)break t}o=r,r=0;break i}break e}for(;r<o;){let s=r+o>>>1;e<t[s]?o=s:r=s+1}if(n=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,n)}return this.interpolate_(r,a,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n;for(let o=0;o!==n;++o)t[o]=r[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},b5=class extends qp{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Cae,endingEnd:Cae}}intervalChanged_(e,t,r){let n=this.parameterPositions,a=e-2,o=e+1,s=n[a],l=n[o];if(s===void 0)switch(this.getSettings_().endingStart){case Eae:a=e,s=2*t-r;break;case Tae:a=n.length-2,s=t+n[a]-n[a+1];break;default:a=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Eae:o=e,l=2*r-t;break;case Tae:o=1,l=r+n[1]-n[0];break;default:o=e-1,l=t}let c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(l-r),this._offsetPrev=a*u,this._offsetNext=o*u}interpolate_(e,t,r,n){let a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,m=(r-t)/(n-t),y=m*m,g=y*m,x=-d*g+2*d*y-d*m,b=(1+d)*g+(-1.5-2*d)*y+(-.5+d)*m+1,S=(-1-f)*g+(1.5+f)*y+.5*m,E=f*g-f*y;for(let D=0;D!==s;++D)a[D]=x*o[u+D]+b*o[c+D]+S*o[l+D]+E*o[h+D];return a}},S5=class extends qp{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,u=(r-t)/(n-t),h=1-u;for(let d=0;d!==s;++d)a[d]=o[c+d]*h+o[l+d]*u;return a}},C5=class extends qp{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}},iu=class{constructor(e,t,r,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oI(t,this.TimeBufferType),this.values=oI(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:oI(e.times,Array),values:oI(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new C5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new S5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new b5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case A1:t=this.InterpolantFactoryMethodDiscrete;break;case cg:t=this.InterpolantFactoryMethodLinear;break;case Ek:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return A1;case this.InterpolantFactoryMethodLinear:return cg;case this.InterpolantFactoryMethodSmooth:return Ek}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){let r=this.times,n=r.length,a=0,o=n-1;for(;a!==n&&r[a]<e;)++a;for(;o!==-1&&r[o]>t;)--o;if(++o,a!==0||o!==n){a>=o&&(o=Math.max(o,1),a=o-1);let s=this.getValueSize();this.times=r.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,n=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){let l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(n!==void 0&&qUe(n))for(let s=0,l=n.length;s!==l;++s){let c=n[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),n=this.getInterpolation()===Ek,a=e.length-1,o=1;for(let s=1;s<a;++s){let l=!1,c=e[s],u=e[s+1];if(c!==u&&(s!==1||c!==e[0]))if(n)l=!0;else{let h=s*r,d=h-r,f=h+r;for(let m=0;m!==r;++m){let y=t[h+m];if(y!==t[d+m]||y!==t[f+m]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];let h=s*r,d=o*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++o}}if(a>0){e[o]=e[a];for(let s=a*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[s+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),r=this.constructor,n=new r(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};iu.prototype.TimeBufferType=Float32Array;iu.prototype.ValueBufferType=Float32Array;iu.prototype.DefaultInterpolation=cg;var Zp=class extends iu{};Zp.prototype.ValueTypeName="bool";Zp.prototype.ValueBufferType=Array;Zp.prototype.DefaultInterpolation=A1;Zp.prototype.InterpolantFactoryMethodLinear=void 0;Zp.prototype.InterpolantFactoryMethodSmooth=void 0;var II=class extends iu{};II.prototype.ValueTypeName="color";var Kd=class extends iu{};Kd.prototype.ValueTypeName="number";var E5=class extends qp{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-t)/(n-t),c=e*s;for(let u=c+s;c!==u;c+=4)Yu.slerpFlat(a,0,o,c-s,o,c,l);return a}},Qh=class extends iu{InterpolantFactoryMethodLinear(e){return new E5(this.times,this.values,this.getValueSize(),e)}};Qh.prototype.ValueTypeName="quaternion";Qh.prototype.DefaultInterpolation=cg;Qh.prototype.InterpolantFactoryMethodSmooth=void 0;var Jp=class extends iu{};Jp.prototype.ValueTypeName="string";Jp.prototype.ValueBufferType=Array;Jp.prototype.DefaultInterpolation=A1;Jp.prototype.InterpolantFactoryMethodLinear=void 0;Jp.prototype.InterpolantFactoryMethodSmooth=void 0;var Xd=class extends iu{};Xd.prototype.ValueTypeName="vector";var BI=class{constructor(e,t=-1,r,n=ELe){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=Xu(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,n=1/(e.fps||1);for(let o=0,s=r.length;o!==s;++o)t.push($Ue(r[o]).scale(n));let a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){let t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=r.length;a!==o;++a)t.push(iu.toJSON(r[a]));return n}static CreateFromMorphTargetSequence(e,t,r,n){let a=t.length,o=[];for(let s=0;s<a;s++){let l=[],c=[];l.push((s+a-1)%a,s,(s+1)%a),c.push(0,1,0);let u=ZUe(l);l=Ioe(l,1,u),c=Ioe(c,1,u),!n&&l[0]===0&&(l.push(a),c.push(c[0])),o.push(new Kd(".morphTargetInfluences["+t[s].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let n=e;r=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let n={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){let c=e[s],u=c.name.match(a);if(u&&u.length>1){let h=u[1],d=n[h];d||(n[h]=d=[]),d.push(c)}}let o=[];for(let s in n)o.push(this.CreateFromMorphTargetSequence(s,n[s],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(h,d,f,m,y){if(f.length!==0){let g=[],x=[];ese(f,g,x,m),g.length!==0&&y.push(new h(d,g,x))}},n=[],a=e.name||"default",o=e.fps||30,s=e.blendMode,l=e.length||-1,c=e.hierarchy||[];for(let h=0;h<c.length;h++){let d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let f={},m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let y=0;y<d[m].morphTargets.length;y++)f[d[m].morphTargets[y]]=-1;for(let y in f){let g=[],x=[];for(let b=0;b!==d[m].morphTargets.length;++b){let S=d[m];g.push(S.time),x.push(S.morphTarget===y?1:0)}n.push(new Kd(".morphTargetInfluence["+y+"]",g,x))}l=f.length*o}else{let f=".bones["+t[h].name+"]";r(Xd,f+".position",d,"pos",n),r(Qh,f+".quaternion",d,"rot",n),r(Xd,f+".scale",d,"scl",n)}}return n.length===0?null:new this(a,l,n,s)}resetDuration(){let e=this.tracks,t=0;for(let r=0,n=e.length;r!==n;++r){let a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function JUe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kd;case"vector":case"vector2":case"vector3":case"vector4":return Xd;case"color":return II;case"quaternion":return Qh;case"bool":case"boolean":return Zp;case"string":return Jp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function $Ue(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=JUe(i.type);if(i.times===void 0){let t=[],r=[];ese(i.keys,t,r,"value"),i.times=t,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}var Qp={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},T5=class{constructor(e,t,r){let n=this,a=!1,o=0,s=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){s++,a===!1&&n.onStart!==void 0&&n.onStart(u,o,s),a=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,s),o===s&&(a=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){let h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){let f=c[h],m=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}},e4e=new T5,Yd=(()=>{class i{constructor(t){this.manager=t!==void 0?t:e4e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){let n=this;return new Promise(function(a,o){n.load(t,a,r,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})(),Nd={},M5=class extends Error{constructor(e,t){super(e),this.response=t}},$p=class extends Yd{constructor(e){super(e)}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=Qp.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Nd[e]!==void 0){Nd[e].push({onLoad:t,onProgress:r,onError:n});return}Nd[e]=[],Nd[e].push({onLoad:t,onProgress:r,onError:n});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;let u=Nd[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,m=f!==0,y=0,g=new ReadableStream({start(x){b();function b(){h.read().then(({done:S,value:E})=>{if(S)x.close();else{y+=E.byteLength;let D=new ProgressEvent("progress",{lengthComputable:m,loaded:y,total:f});for(let B=0,F=u.length;B<F;B++){let H=u[B];H.onProgress&&H.onProgress(D)}x.enqueue(E),b()}})}}});return new Response(g)}else throw new M5(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,s));case"json":return c.json();default:if(s===void 0)return c.text();{let h=/charset="?([^;"\s]*)"?/i.exec(s),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Qp.add(e,c);let u=Nd[e];delete Nd[e];for(let h=0,d=u.length;h<d;h++){let f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{let u=Nd[e];if(u===void 0)throw this.manager.itemError(e),c;delete Nd[e];for(let h=0,d=u.length;h<d;h++){let f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var I5=class extends Yd{constructor(e){super(e)}load(e,t,r,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,o=Qp.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;let s=Ew("img");function l(){u(),Qp.add(e,this),t&&t(this),a.manager.itemEnd(e)}function c(h){u(),n&&n(h),a.manager.itemError(e),a.manager.itemEnd(e)}function u(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}};var DI=class extends Yd{constructor(e){super(e)}load(e,t,r,n){let a=this,o=new CI,s=new $p(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(a.withCredentials),s.load(e,function(l){let c;try{c=a.parse(l)}catch(u){if(n!==void 0)n(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Js,o.wrapT=c.wrapT!==void 0?c.wrapT:Js,o.magFilter=c.magFilter!==void 0?c.magFilter:io,o.minFilter=c.minFilter!==void 0?c.minFilter:io,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Qd),c.mipmapCount===1&&(o.minFilter=io),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,n),o}},w1=class extends Yd{constructor(e){super(e)}load(e,t,r,n){let a=new qu,o=new I5(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},r,n),a}},b1=class extends ls{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ji(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};var Jk=new kr,Boe=new Ne,Doe=new Ne,Dw=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Hr(512,512),this.map=null,this.mapPass=null,this.matrix=new kr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tw,this._frameExtents=new Hr(1,1),this._viewportCount=1,this._viewports=[new $n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;Boe.setFromMatrixPosition(e.matrixWorld),t.position.copy(Boe),Doe.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Doe),t.updateMatrixWorld(),Jk.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jk),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Jk)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},B5=class extends Dw{constructor(){super(new ea(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=m1*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||n!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=n,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},RI=class extends b1{constructor(e,t,r=0,n=Math.PI/3,a=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ls.DEFAULT_UP),this.updateMatrix(),this.target=new ls,this.distance=r,this.angle=n,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new B5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Roe=new kr,vw=new Ne,$k=new Ne,D5=class extends Dw{constructor(){super(new ea(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Hr(4,2),this._viewportCount=6,this._viewports=[new $n(2,1,1,1),new $n(0,1,1,1),new $n(3,1,1,1),new $n(1,1,1,1),new $n(3,0,1,1),new $n(1,0,1,1)],this._cubeDirections=[new Ne(1,0,0),new Ne(-1,0,0),new Ne(0,0,1),new Ne(0,0,-1),new Ne(0,1,0),new Ne(0,-1,0)],this._cubeUps=[new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,0,1),new Ne(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,n=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),vw.setFromMatrixPosition(e.matrixWorld),r.position.copy(vw),$k.copy(r.position),$k.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt($k),r.updateMatrixWorld(),n.makeTranslation(-vw.x,-vw.y,-vw.z),Roe.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Roe)}},PI=class extends b1{constructor(e,t,r=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new D5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},R5=class extends Dw{constructor(){super(new y1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},eA=class extends b1{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ls.DEFAULT_UP),this.updateMatrix(),this.target=new ls,this.shadow=new R5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},ru=class extends b1{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var tA=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var LI=class extends Yd{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,o=Qp.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),a.manager.itemEnd(e)}).catch(c=>{n&&n(c)});return}return setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o}let s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;let l=fetch(e,s).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){return Qp.add(e,c),t&&t(c),a.manager.itemEnd(e),c}).catch(function(c){n&&n(c),Qp.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Qp.add(e,l),a.manager.itemStart(e)}};var Q5="\\[\\]\\.:\\/",t4e=new RegExp("["+Q5+"]","g"),G5="[^"+Q5+"]",i4e="[^"+Q5.replace("\\.","")+"]",r4e=/((?:WC+[\/:])*)/.source.replace("WC",G5),n4e=/(WCOD+)?/.source.replace("WCOD",i4e),a4e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",G5),o4e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",G5),s4e=new RegExp("^"+r4e+n4e+a4e+o4e+"$"),l4e=["material","materials","bones","map"],P5=class{constructor(e,t,r){let n=r||Pa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,a=r.length;n!==a;++n)r[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Pa=(()=>{class i{constructor(t,r,n){this.path=r,this.parsedPath=n||i.parseTrackName(r),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,n){return t&&t.isAnimationObjectGroup?new i.Composite(t,r,n):new i(t,r,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(t4e,"")}static parseTrackName(t){let r=s4e.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){let o=n.nodeName.substring(a+1);l4e.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){let n=t.skeleton.getBoneByName(r);if(n!==void 0)return n}if(t.children){let n=function(o){for(let s=0;s<o.length;s++){let l=o[s];if(l.name===r||l.uuid===r)return l;let c=n(l.children);if(c)return c}return null},a=n(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){let n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)t[r++]=n[a]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){let n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[r++]}_setValue_array_setNeedsUpdate(t,r){let n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){let n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node,r=this.parsedPath,n=r.objectName,a=r.propertyName,o=r.propertyIndex;if(t||(t=i.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=r.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let s=t[a];if(s===void 0){let u=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+a+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=P5,i})();Pa.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Pa.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Pa.prototype.GetterByBindingType=[Pa.prototype._getValue_direct,Pa.prototype._getValue_array,Pa.prototype._getValue_arrayElement,Pa.prototype._getValue_toArray];Pa.prototype.SetterByBindingTypeAndVersioning=[[Pa.prototype._setValue_direct,Pa.prototype._setValue_direct_setNeedsUpdate,Pa.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pa.prototype._setValue_array,Pa.prototype._setValue_array_setNeedsUpdate,Pa.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pa.prototype._setValue_arrayElement,Pa.prototype._setValue_arrayElement_setNeedsUpdate,Pa.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pa.prototype._setValue_fromArray,Pa.prototype._setValue_fromArray_setNeedsUpdate,Pa.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var SIt=new Float32Array(1);typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:L5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=L5);var c4e=/^[og]\s*(.+)?/,u4e=/^mtllib /,h4e=/^usemtl /,d4e=/^usemap /,tse=/\s+/,ise=new Ne,W5=new Ne,rse=new Ne,nse=new Ne,nu=new Ne,kI=new ji;function f4e(){let i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(n,a){let o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);let s={index:this.materials.length,name:n||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){let c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(n){let a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),n&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return n&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},r&&r.name&&typeof r.clone=="function"){let n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseNormalIndex:function(e,t){let r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseUVIndex:function(e,t){let r=parseInt(e,10);return(r>=0?r-1:r+t/2)*2},addVertex:function(e,t,r){let n=this.vertices,a=this.object.geometry.vertices;a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[r+0],n[r+1],n[r+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){let n=this.normals,a=this.object.geometry.normals;a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[r+0],n[r+1],n[r+2])},addFaceNormal:function(e,t,r){let n=this.vertices,a=this.object.geometry.normals;ise.fromArray(n,e),W5.fromArray(n,t),rse.fromArray(n,r),nu.subVectors(rse,W5),nse.subVectors(ise,W5),nu.cross(nse),nu.normalize(),a.push(nu.x,nu.y,nu.z),a.push(nu.x,nu.y,nu.z),a.push(nu.x,nu.y,nu.z)},addColor:function(e,t,r){let n=this.colors,a=this.object.geometry.colors;n[e]!==void 0&&a.push(n[e+0],n[e+1],n[e+2]),n[t]!==void 0&&a.push(n[t+0],n[t+1],n[t+2]),n[r]!==void 0&&a.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){let n=this.uvs,a=this.object.geometry.uvs;a.push(n[e+0],n[e+1]),a.push(n[t+0],n[t+1]),a.push(n[r+0],n[r+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,a,o,s,l,c){let u=this.vertices.length,h=this.parseVertexIndex(e,u),d=this.parseVertexIndex(t,u),f=this.parseVertexIndex(r,u);if(this.addVertex(h,d,f),this.addColor(h,d,f),s!==void 0&&s!==""){let m=this.normals.length;h=this.parseNormalIndex(s,m),d=this.parseNormalIndex(l,m),f=this.parseNormalIndex(c,m),this.addNormal(h,d,f)}else this.addFaceNormal(h,d,f);if(n!==void 0&&n!==""){let m=this.uvs.length;h=this.parseUVIndex(n,m),d=this.parseUVIndex(a,m),f=this.parseUVIndex(o,m),this.addUV(h,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let r=0,n=e.length;r<n;r++){let a=this.parseVertexIndex(e[r],t);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let r=this.vertices.length,n=this.uvs.length;for(let a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],r));for(let a=0,o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return i.startObject("",!1),i}var C1=class extends Yd{constructor(e){super(e),this.materials=null}load(e,t,r,n){let a=this,o=new $p(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{t(a.parse(s))}catch(l){n?n(l):console.error(l),a.manager.itemError(e)}},r,n)}setMaterials(e){return this.materials=e,this}parse(e){let t=new f4e;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let r=e.split(`
`),n=[];for(let s=0,l=r.length;s<l;s++){let c=r[s].trimStart();if(c.length===0)continue;let u=c.charAt(0);if(u!=="#")if(u==="v"){let h=c.split(tse);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(kI.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(kI.r,kI.g,kI.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(u==="f"){let d=c.slice(1).trim().split(tse),f=[];for(let y=0,g=d.length;y<g;y++){let x=d[y];if(x.length>0){let b=x.split("/");f.push(b)}}let m=f[0];for(let y=1,g=f.length-1;y<g;y++){let x=f[y],b=f[y+1];t.addFace(m[0],x[0],b[0],m[1],x[1],b[1],m[2],x[2],b[2])}}else if(u==="l"){let h=c.substring(1).trim().split(" "),d=[],f=[];if(c.indexOf("/")===-1)d=h;else for(let m=0,y=h.length;m<y;m++){let g=h[m].split("/");g[0]!==""&&d.push(g[0]),g[1]!==""&&f.push(g[1])}t.addLineGeometry(d,f)}else if(u==="p"){let d=c.slice(1).trim().split(" ");t.addPointGeometry(d)}else if((n=c4e.exec(c))!==null){let h=(" "+n[0].slice(1).trim()).slice(1);t.startObject(h)}else if(h4e.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(u4e.test(c))t.materialLibraries.push(c.substring(7).trim());else if(d4e.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(u==="s"){if(n=c.split(" "),n.length>1){let d=n[1].trim().toLowerCase();t.object.smooth=d!=="0"&&d!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();let a=new Jc;if(a.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let s=0,l=t.objects.length;s<l;s++){let c=t.objects[s],u=c.geometry,h=c.materials,d=u.type==="Line",f=u.type==="Points",m=!1;if(u.vertices.length===0)continue;let y=new $s;y.setAttribute("position",new Ro(u.vertices,3)),u.normals.length>0&&y.setAttribute("normal",new Ro(u.normals,3)),u.colors.length>0&&(m=!0,y.setAttribute("color",new Ro(u.colors,3))),u.hasUVIndices===!0&&y.setAttribute("uv",new Ro(u.uvs,2));let g=[];for(let b=0,S=h.length;b<S;b++){let E=h[b],D=E.name+"_"+E.smooth+"_"+m,B=t.materials[D];if(this.materials!==null){if(B=this.materials.create(E.name),d&&B&&!(B instanceof jd)){let F=new jd;cs.prototype.copy.call(F,B),F.color.copy(B.color),B=F}else if(f&&B&&!(B instanceof Hh)){let F=new Hh({size:10,sizeAttenuation:!1});cs.prototype.copy.call(F,B),F.color.copy(B.color),F.map=B.map,B=F}}B===void 0&&(d?B=new jd:f?B=new Hh({size:1,sizeAttenuation:!1}):B=new _1,B.name=E.name,B.flatShading=!E.smooth,B.vertexColors=m,t.materials[D]=B),g.push(B)}let x;if(g.length>1){for(let b=0,S=h.length;b<S;b++){let E=h[b];y.addGroup(E.groupStart,E.groupCount,b)}d?x=new dg(y,g):f?x=new Xp(y,g):x=new Ma(y,g)}else d?x=new dg(y,g[0]):f?x=new Xp(y,g[0]):x=new Ma(y,g[0]);x.name=c.name,a.add(x)}else if(t.vertices.length>0){let s=new Hh({size:1,sizeAttenuation:!1}),l=new $s;l.setAttribute("position",new Ro(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Ro(t.colors,3)),s.vertexColors=!0);let c=new Xp(l,s);a.add(c)}return a}};var zI=(()=>{let e=class e{constructor(r,n){this.http=r,this.cookies=n,this.apiUrl=Fi.apiURL+"/info",this.headers=new Ja({Authorization:"Bearer "+this.cookies.get("withuUserToken")}),this.options={headers:this.headers}}getOne(r){return this.http.get(`${this.apiUrl}/${r}`,this.options)}getAll(){return this.http.get(this.apiUrl,this.options)}createNew(r){return this.http.post(this.apiUrl,r,this.options)}editOne(r,n){return this.http.put(`${this.apiUrl}/${r}`,n,this.options)}deleteOne(r){return this.http.delete(`${this.apiUrl}/${r}`,this.options)}};e.\u0275fac=function(n){return new(n||e)(Nt(Un),Nt(Kn))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var j5=(i,e)=>e.id,p4e=(i,e)=>e.nombre;function A4e(i,e){if(i&1&&(L(0,"option",42),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function m4e(i,e){i&1&&(L(0,"div",43),Q(1,"Se debe seleccionar una sala"),O())}function g4e(i,e){if(i&1&&(L(0,"option",42),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function v4e(i,e){i&1&&(L(0,"div",43),Q(1,"Se debe seleccionar un estado"),O())}function y4e(i,e){if(i&1&&(L(0,"li",44)(1,"a",45),ce(2,"span",46),L(3,"span",47),Q(4),O()()()),i&2){let t=e.$implicit,r=e.$index;ie(1),pa(r===0?"active":""),Le("href","#"+t.id,wr),ie(3),We(t.idioma)}}function x4e(i,e){if(i&1){let t=Li();L(0,"div",29),ce(1,"audio",60),O(),L(2,"div",61)(3,"i",62),ye("click",function(){zt(t);let n=it().$index,a=it();return Vt(a.deleteAudio(n))}),O()()}if(i&2){let t=it().$index,r=it();ie(1),Le("src",r.newAudios[t],wr)}}var _4e=i=>({hidden:i});function w4e(i,e){if(i&1){let t=Li();L(0,"div",48)(1,"form",49),ce(2,"input",50),L(3,"div",27)(4,"label",28),Q(5,"Nombre: "),O(),L(6,"div",51),ce(7,"input",52),O()(),L(8,"div",53)(9,"label",54),Q(10,"Texto completo: "),O(),L(11,"div",51),ce(12,"textarea",55),O()(),L(13,"div",53)(14,"label",54),Q(15,"Texto f\xE1cil: "),O(),L(16,"div",51),ce(17,"textarea",56),O()(),L(18,"div",57)(19,"label",54),Q(20,"Audio: "),O(),Dt(21,x4e,4,1),L(22,"div",58)(23,"input",59),ye("input",function(n){zt(t);let a=it();return Vt(a.addAudio(n))}),O()()()()()}if(i&2){let t=e.$implicit,r=e.$index,n=it();pa(r===0?"active":""),Le("id",t.id),ie(1),Le("formGroup",n.datos_idiomas[r]),ie(20),Na(21,n.newAudios[r]!==null?21:-1),ie(1),Le("ngClass",yo(7,_4e,n.newAudios[r]!==null)),ie(1),Le("id","audioFile-"+r)}}function b4e(i,e){i&1&&(L(0,"p",63),Q(1,"No hay idiomas en la base de datos. "),O())}var ose=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u,h){this.pieceService=r,this.informacionService=n,this.salaService=a,this.alertService=o,this.idiomaService=s,this.breadcrumbService=l,this.location=c,this.router=u,this.estadoService=h,this.newImage="../../../../assets/images/piezas/defualt_image.png",this.newPictograma="../../../../assets/images/piezas/defualt_image.png",this.newTextura="../../../../assets/images/piezas/defualt_image.png",this.newModelo="../../../../assets/images/piezas/defualt_image.png",this.idiomas=[],this.salas=[],this.estadosPosibles=[],this.datos_generales=new ra({sala:new wt("0",this.noZeroValidator()),estado:new wt("0",this.noZeroValidator())}),this.datos_idiomas=[],this.newAudios=Array(),this.imagen=new wt(""),this.formularioEnviado=!1,this.nombreModelo="Modelo"}ngOnInit(){this.breadcrumbService.updateBreadcrumb("Crear pieza",["Inicio","Piezas","Crear"]),this.idiomaService.getAll().subscribe(r=>{this.idiomas=r,r.forEach(n=>{this.datos_idiomas.push(new ra({nombre:new wt(""),texto_completo:new wt(""),texto_facil:new wt(""),idioma:new wt(n.id)})),this.newAudios.push(null)})}),this.salaService.getAll().subscribe(r=>{this.salas=r}),this.estadoService.getAllEstados().subscribe(r=>{console.log(r),this.estadosPosibles=r})}get sala_control(){return this.datos_generales.controls.sala}get estado_control(){return this.datos_generales.controls.estado}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}abrirSelectorDeArchivos(){document.getElementById("fileInput").click()}cambiarImagen(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newImage=a.result},a.readAsDataURL(n)}}borrarImagen(){this.newImage="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputImage");r&&(r.value="")}cambiarPictograma(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newPictograma=a.result},a.readAsDataURL(n)}}borrarPictograma(){this.newPictograma="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputPicto");r&&(r.value="")}cambiarTextura(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newTextura=a.result},a.readAsDataURL(n)}}borrarTextura(){this.newTextura="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputTextura");r&&(r.value="")}cambiarModelo(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.renderizarModelo(a.result)},a.readAsDataURL(n)}}borrarModelo(){this.newModelo="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputModel");r&&(r.value="")}volver(){this.location.back()}handleSubmit(r){if(r.preventDefault(),new FormData(r.target).forEach(o=>console.log(o)),this.formularioEnviado=!0,!this.datos_generales.valid)return;let n=new FormData(r.target);this.datos_generales.value.sala&&n.append("sala_id",this.datos_generales.value.sala),this.datos_generales.value.estado&&n.append("estado_id",this.datos_generales.value.estado);let a={};n.forEach((o,s)=>{a[s]=o}),console.log(a),this.pieceService.createNew(n).subscribe(o=>{console.log("Pieza creada con \xE9xito: ",o),this.datos_idiomas.forEach((s,l)=>{let c=new FormData;c.append("idioma_id",s.controls.idioma.value),c.append("pieza_id",o.id),s.controls.nombre.value!==""&&c.append("nombre",s.controls.nombre.value),s.controls.texto_completo.value!==""&&c.append("texto_completo",s.controls.texto_completo.value),s.controls.texto_facil.value!==""&&c.append("texto_facil",s.controls.texto_facil.value);let u=document.getElementById("audioFile-"+l);u&&u.files.length===1&&c.append("audio",u.files[0]),this.informacionService.createNew(c).subscribe(h=>{console.log("Informaci\xF3n de idioma creada:",h)})}),this.router.navigate(["/administrador/piezas"]),this.alertService.showAlertPiezas(!0)})}addAudio(r){let n=r.target.files[0],a=Number(r.target.id.split("-")[1]),o=URL.createObjectURL(n);this.newAudios[a]=o}deleteAudio(r){this.newAudios[r]=null;let n=document.getElementById(`audioFile-${r}`);n&&(n.value="")}renderizarModelo(r){new C1().load(r,a=>{let o=a,s=new eu;s.background=new ji(8947848),s.add(o);let l=new ru(16777215,.8);s.add(l);let c=window.innerWidth/window.innerHeight,u=new ea(75,c,.1,1e3),h=new cc;h.setSize(window.innerWidth,window.innerHeight),u.position.set(0,0,5),u.zoom=2.5,u.updateProjectionMatrix(),h.render(s,u);let d=h.domElement.toDataURL();this.newModelo=d,this.nombreModelo=r},void 0,a=>{console.error("Error al cargar el modelo:",a)})}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(zI),xe(Tn),xe(Il),xe(Ms),xe(vr),xe(Zn),xe(bi),xe(os))},e.\u0275cmp=St({type:e,selectors:[["app-crear-pieza"]],standalone:!0,features:[gr],decls:98,vars:8,consts:[[1,"row"],[3,"formGroup","submit"],[1,"col-sm-12","col-md-6","col-xl-5"],[1,"row","d-flex","align-items-stretch"],[1,"col-md-6","p-10","pt-0"],[1,"card","h-100"],[1,"card-body","h-100"],[1,"d-flex"],[1,"card-title","of-h"],[1,"cp","ml-auto",3,"click"],[1,"fa","fa-trash"],["for","fileInputImage",1,"w-100","text-center"],["alt","Image",1,"imagen-pieza","img-fluid","cp","image-pieza",3,"src"],["type","file","id","fileInputImage","name","imagen",1,"custom-file-input",2,"display","none",3,"change"],["for","fileInputPicto",1,"w-100","text-center"],["type","file","id","fileInputPicto","name","pictograma",1,"custom-file-input",2,"display","none",3,"change"],[1,"col-md-7","p-10","pt-0"],["for","fileInputModel",1,"w-100","text-center"],["type","file","id","fileInputModel","name","modelo","accept",".glb,.json,.obj",3,"change"],[1,"col-md-5","p-10","pt-0"],["for","fileInputTextura",1,"w-100","text-center"],["type","file","id","fileInputTextura","name","textura",1,"custom-file-input",2,"display","none",3,"change"],[1,"col-sm-12","col-md-6","col-xl-7"],[1,"card"],[1,"tab-content","tabcontent-border"],[1,"p-20"],[1,"card-title"],[1,"form-group","row"],[1,"col-md-2",2,"font-size","15px"],[1,"col-md-9"],["formControlName","sala",1,"form-select","form-control"],["value","0","disabled",""],["class","text-danger",4,"ngIf"],["formControlName","estado",1,"form-select","form-control"],["id","tabpanel"],["role","tablist",1,"nav","nav-tabs"],["class","m-4"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[3,"value"],[1,"text-danger"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"href"],[1,"hidden-sm-up"],[1,"hidden-xs-down"],["role","tabpanel",1,"tab-pane","p-20",3,"id"],[1,"p-2",3,"formGroup"],["type","text","formControlName","idioma",2,"display","none"],[1,"col-md-10"],["type","text","placeholder","","formControlName","nombre",1,"form-control"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-2"],["type","text","id","fname","placeholder","","formControlName","texto_completo",1,"form-control",2,"height","120px"],["type","text","id","fname","placeholder","","formControlName","texto_facil",1,"form-control",2,"height","80px"],[1,"form-group","row","d-flex","align-items-center",2,"font-size","15px"],[1,"col-md-10",3,"ngClass"],["type","file","accept","audio/*",3,"id","input"],["controls","",3,"src"],[1,"col-md-1"],[1,"fa","fa-trash",3,"click"],[1,"m-4"],["class","nav-item"],["class","tab-pane p-20","role","tabpanel",3,"class","id"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.handleSubmit(s)}),L(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),Q(10,"Foto"),O(),ce(11,"br"),L(12,"span",9),ye("click",function(){return a.borrarImagen()}),ce(13,"i",10),O()(),L(14,"label",11),ce(15,"img",12),O(),L(16,"input",13),ye("change",function(s){return a.cambiarImagen(s)}),O()()()(),L(17,"div",4)(18,"div",5)(19,"div",6)(20,"div",7)(21,"h3",8),Q(22,"Pictograma"),O(),ce(23,"br"),L(24,"span",9),ye("click",function(){return a.borrarPictograma()}),ce(25,"i",10),O()(),L(26,"label",14),ce(27,"img",12),O(),L(28,"input",15),ye("change",function(s){return a.cambiarPictograma(s)}),O()()()()(),L(29,"div",0)(30,"div",16)(31,"div",5)(32,"div",6)(33,"div",7)(34,"h3",8),Q(35,"Modelo"),O(),ce(36,"br"),L(37,"span",9),ye("click",function(){return a.borrarModelo()}),ce(38,"i",10),O()(),L(39,"label",17),ce(40,"img",12),O(),L(41,"input",18),ye("change",function(s){return a.cambiarModelo(s)}),O()()()(),L(42,"div",19)(43,"div",5)(44,"div",6)(45,"div",7)(46,"h3",8),Q(47,"Textura"),O(),ce(48,"br"),L(49,"span",9),ye("click",function(){return a.borrarTextura()}),ce(50,"i",10),O()(),L(51,"label",20),ce(52,"img",12),O(),L(53,"input",21),ye("change",function(s){return a.cambiarTextura(s)}),O()()()()()(),L(54,"div",22)(55,"div",23)(56,"div",24)(57,"div",25)(58,"h3",26),Q(59,"Datos"),O(),ce(60,"br")(61,"br"),L(62,"div",27)(63,"label",28),Q(64,"Sala: "),O(),L(65,"div",29)(66,"select",30)(67,"option",31),Q(68,"Elegir una sala"),O(),Lr(69,A4e,2,2,"option",42,j5),O(),Dt(71,m4e,2,0,"div",32),O()(),L(72,"div",27)(73,"label",28),Q(74,"Estado: "),O(),L(75,"div",29)(76,"select",33)(77,"option",31),Q(78,"Elegir un estado"),O(),Lr(79,g4e,2,2,"option",42,p4e),O(),Dt(81,v4e,2,0,"div",32),O()()(),L(82,"div",34)(83,"ul",35),Lr(84,y4e,5,4,"li",64,j5),O(),L(86,"div",24),Lr(87,w4e,24,9,"div",65,j5),Dt(89,b4e,2,0,"p",36),O()()()()()(),L(90,"div",37)(91,"button",38)(92,"span"),Q(93,"CREAR"),O()()(),L(94,"div",39)(95,"div",40)(96,"button",41),ye("click",function(){return a.volver()}),Q(97,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.datos_generales),ie(14),Le("src",a.newImage,wr),ie(12),Le("src",a.newPictograma,wr),ie(13),Le("src",a.newModelo,wr),ie(12),Le("src",a.newTextura,wr),ie(17),Or(a.salas),ie(2),Le("ngIf",a.formularioEnviado&&a.sala_control.invalid),ie(8),Or(a.estadosPosibles),ie(2),Le("ngIf",a.formularioEnviado&&a.estado_control.invalid),ie(3),Or(a.idiomas),ie(3),Or(a.idiomas),ie(2),Na(89,a.idiomas.length<=0?89:-1))},dependencies:[lr,gs,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o],styles:[".image-pieza[_ngcontent-%COMP%]{height:100%;object-fit:contain}.of-h[_ngcontent-%COMP%]{overflow:hidden;height:1.2em}.hidden[_ngcontent-%COMP%]{opacity:0}.cp[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();function S4e(i,e){if(i&1){let t=Li();L(0,"div",48)(1,"span"),Q(2,"La exposici\xF3n ha sido registrada con \xE9xito."),O(),L(3,"button",49),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",12),Q(5,"\xD7"),O()()()}}function C4e(i,e){if(i&1){let t=Li();L(0,"div",50)(1,"span"),Q(2,"La exposici\xF3n ha sido borrada con \xE9xito."),O(),L(3,"button",49),ye("click",function(){zt(t);let n=it();return Vt(n.closeAlert())}),L(4,"span",12),Q(5,"\xD7"),O()()()}}function E4e(i,e){if(i&1){let t=Li();L(0,"div",51)(1,"div",17)(2,"div",52)(3,"div",53),ce(4,"img",54),L(5,"div",55)(6,"ul",56)(7,"button",57),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToEditExp(a.id))}),ce(8,"span",58),O(),L(9,"button",59),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(10,"span",60),O()()(),L(11,"div",61)(12,"ul",56)(13,"button",57),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToEditExp(a.id))}),ce(14,"span",58),O(),L(15,"button",59),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(16,"span",60),O()()()(),L(17,"div",62)(18,"span",63),Q(19),gf(20,"uppercase"),O()(),L(21,"div",64)(22,"h4"),Q(23),O(),L(24,"p",65),Q(25),O(),L(26,"span",65),Q(27),O(),L(28,"span",65),Q(29),O()()()()()}if(i&2){let t=e.$implicit,r=it();ie(4),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/piezas/defualt_image.png",wr),ie(15),We(vf(20,6,t.estado_id)),ie(4),We(t.nombre),ie(2),We(t.descripcion),ie(2),_n("",t.fecha_inicio," / "),ie(2),We(t.fecha_fin)}}function T4e(i,e){if(i&1){let t=Li();Ls(0),L(1,"li",66)(2,"a",45),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.guardarPagina(a))}),Q(3),O()(),Os()}if(i&2){let t=e.$implicit,r=it();ie(1),so("active",r.numPagina===t),ie(2),We(t)}}var sse=(()=>{let e=class e{constructor(r,n,a,o,s){this.exposicionService=r,this.router=n,this.breadcrumbService=a,this.alertService=o,this.cdr=s,this.exposiciones=[],this.idToDelete="",this.showAlert=!1,this.showAlert2=!1,this.baseAPI=Fi.apiURL,this.nombreFiltro="",this.totalExposiciones=0,this.cantidadPorPagina=4,this.numPagina=1}ngOnInit(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r,this.totalExposiciones=this.exposiciones.length}),this.breadcrumbService.updateBreadcrumb("Listado exposiciones",["Inicio","Exposiciones"]),this.showAlert=this.alertService.getAlertExposiciones(),setTimeout(()=>{this.alertService.showAlertExposiciones(!1),this.showAlert=this.alertService.getAlertExposiciones()},3e3),this.obtenerExposiciones(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina),console.log(this.exposiciones)}goToViewExp(r){this.router.navigate(["/administrador/exposiciones/ver",r])}goToEditExp(r){this.router.navigate(["/administrador/exposiciones/editar",r])}goToCreateExp(){this.router.navigate(["/administrador/exposiciones/crear"])}deleteExp(){this.exposicionService.deleteOne(this.idToDelete).subscribe(r=>{console.log(r);let n=this.exposiciones.findIndex(a=>a.id===this.idToDelete);this.exposiciones.splice(n,1),this.alertService.showAlertExposiciones(!0),this.showAlert2=this.alertService.getAlertExposiciones(),setTimeout(()=>{console.log("Borrado"),this.alertService.showAlertExposiciones(!1),this.showAlert2=this.alertService.getAlertExposiciones()},3e3),(this.totalExposiciones-1)%this.cantidadPorPagina===0?this.guardarPagina(this.numPagina-1):this.guardarPagina(this.numPagina)})}closeAlert(){this.showAlert=!1}obtenerExposiciones(r,n){this.exposicionService.getNumExposiciones(1,1e3,this.nombreFiltro).subscribe(a=>{this.totalExposiciones=a.length,console.log(a.length)}),this.exposicionService.getNumExposiciones(r,n,this.nombreFiltro).subscribe(a=>{console.log(a),this.exposiciones=a})}filtroEntradas(r){this.cantidadPorPagina=r.target.value,this.obtenerExposiciones(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}calcularRango(){let r=Math.min(this.totalExposiciones,(this.numPagina-1)*this.cantidadPorPagina+1),n=Math.min(this.numPagina*this.cantidadPorPagina,this.totalExposiciones);return{primerResultado:r,ultimoResultado:n}}guardarPagina(r){this.numPagina=r,this.obtenerExposiciones(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina),console.log("N\xFAmero de p\xE1gina actual: "+this.numPagina)}calcularPaginas(){let r=Math.ceil(this.totalExposiciones/this.cantidadPorPagina);return Array.from({length:r},(n,a)=>a+1)}buscarExposicion(r){this.nombreFiltro=r,this.obtenerExposiciones(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}};e.\u0275fac=function(n){return new(n||e)(xe(sn),xe(bi),xe(vr),xe(Il),xe(Af))},e.\u0275cmp=St({type:e,selectors:[["app-listado-exposiciones"]],standalone:!0,features:[gr],decls:76,vars:12,consts:[["href","https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap","rel","stylesheet"],[1,"boton-arriba"],["type","button",1,"btn","btn-dark","btn-md",2,"border-radius","1.5rem",3,"click"],[1,"mdi","mdi-plus"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-success","role","alert",4,"ngIf"],["style","position:fixed; bottom: 50px; right: 50px; z-index: 9999;","class","alert alert-danger","role","alert",4,"ngIf"],["id","modalBorrarExposicion","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"card"],[1,"card-body"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"row",2,"padding-bottom","20px","padding-top","10px","padding-left","20px"],[1,"pl-2","pr-2"],["name","zero_config_length","aria-controls","zero_config",1,"form-control","form-control-sm",3,"value","change"],["value","4"],["value","8"],["value","25"],["value","50"],["id","zero_config_filter",1,"dataTables_filter","ml-auto",2,"margin-right","10px",3,"submit"],[1,"input-group"],["type","text","placeholder","Buscar","aria-label","Recipient's username","aria-describedby","basic-addon2",1,"form-control"],["busqueda",""],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"container-fluid"],[1,"row","el-element-overlay"],["class","col-lg-3 col-md-6",4,"ngFor","ngForOf"],[1,"row",2,"padding-top","10px"],[2,"padding-left","20px"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info"],[1,"ml-auto",2,"margin-right","12px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous"],["aria-controls","zero_config",1,"page-link",3,"click"],[4,"ngFor","ngForOf"],["id","zero_config_next",1,"paginate_button","page-item","next"],["role","alert",1,"alert","alert-success",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],["type","button","aria-label","Close",1,"close",3,"click"],["role","alert",1,"alert","alert-danger",2,"position","fixed","bottom","50px","right","50px","z-index","9999"],[1,"col-lg-3","col-md-6"],[1,"el-card-item","position-relative"],[1,"el-card-avatar","el-overlay-1",2,"border-top-right-radius","0.75rem","border-top-left-radius","0.75rem"],["alt","user",1,"expo-img",3,"src"],[2,"opacity","0.8"],[1,"list-style-none","el-info"],["type","button",1,"btn","btn-outline-warning","btn-lg",3,"click"],[1,"mdi","mdi-pencil"],["type","button","data-toggle","modal","data-target","#modalBorrarExposicion",1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"mdi","mdi-delete"],[1,"el-overlay"],[2,"position","absolute","top","6px","left","-6px"],[1,"badge","badge-pill","badge-Light","badge-top-left"],[1,"el-card-content",2,"font-family","'Nunito Sans'"],[1,"text-muted"],[1,"paginate_button","page-item"]],template:function(n,a){if(n&1){let o=Li();ce(0,"link",0),L(1,"div",1)(2,"button",2),ye("click",function(){return a.goToCreateExp()}),L(3,"span",3),Q(4," CREAR NUEVA"),O()()(),Dt(5,S4e,6,0,"div",4)(6,C4e,6,0,"div",5),L(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"h5",10),Q(12,"Borrar exposici\xF3n"),O(),L(13,"button",11)(14,"span",12),Q(15,"\xD7"),O()()(),L(16,"div",13)(17,"p"),Q(18," \xBFSeguro de que quiere eliminar esta exposici\xF3n? "),O()(),L(19,"div",14)(20,"button",15),Q(21,"Cancelar"),O(),L(22,"button",16),ye("click",function(){return a.deleteExp()}),Q(23,"Borrar exposici\xF3n"),O()()()()(),L(24,"div",17)(25,"div",18)(26,"div",19)(27,"div",20)(28,"div",21)(29,"div")(30,"label"),Q(31,"Mostrar"),O()(),L(32,"div",22)(33,"select",23),ye("change",function(l){return a.filtroEntradas(l)}),L(34,"option",24),Q(35,"4"),O(),L(36,"option",25),Q(37,"8"),O(),L(38,"option",26),Q(39,"20"),O(),L(40,"option",27),Q(41,"40"),O()()(),L(42,"div")(43,"label"),Q(44,"entradas"),O()(),L(45,"form",28),ye("submit",function(){zt(o);let l=gc(48);return Vt(a.buscarExposicion(l.value))}),L(46,"div",29),ce(47,"input",30,31),L(49,"div",32)(50,"span",33),ye("click",function(){zt(o);let l=gc(48);return Vt(a.buscarExposicion(l.value))}),ce(51,"span",34),O()()()()(),L(52,"div",35)(53,"div",36),Dt(54,E4e,30,8,"div",37),O()(),L(55,"div",38)(56,"div",39)(57,"div",40),Q(58," Mostrando "),L(59,"b"),Q(60),O(),Q(61," de "),L(62,"b"),Q(63),O(),Q(64," resultados "),O()(),L(65,"div",41)(66,"div",41)(67,"div",42)(68,"ul",43)(69,"li",44)(70,"a",45),ye("click",function(){return a.numPagina>1&&a.guardarPagina(a.numPagina-1)}),Q(71,"Anterior"),O()(),Dt(72,T4e,4,3,"ng-container",46),L(73,"li",47)(74,"a",45),ye("click",function(){return a.numPagina<a.calcularPaginas().length&&a.guardarPagina(a.numPagina+1)}),Q(75,"Siguiente"),O()()()()()()()()()()()}n&2&&(ie(5),Le("ngIf",a.showAlert),ie(1),Le("ngIf",a.showAlert2),ie(27),Le("value",a.cantidadPorPagina),ie(21),Le("ngForOf",a.exposiciones),ie(6),Ug("",a.calcularRango().primerResultado," - ",a.calcularRango().ultimoResultado,""),ie(3),We(a.totalExposiciones),ie(6),so("disabled",a.numPagina===1),ie(3),Le("ngForOf",a.calcularPaginas()),ie(1),so("disabled",a.numPagina===a.calcularPaginas().length))},dependencies:[lr,ia,vn,xf,sl,jn,na,aa,Wn,OR],styles:[".cp[_ngcontent-%COMP%]:hover{cursor:pointer}.flex-space[_ngcontent-%COMP%]{height:100%;justify-content:space-evenly}.input-group-text[_ngcontent-%COMP%]:hover{cursor:pointer}.btn-outline-secondary[_ngcontent-%COMP%], .btn-outline-warning[_ngcontent-%COMP%], .btn-outline-danger[_ngcontent-%COMP%]{color:#fff;border-color:#fff;margin:1px}.btn-outline-secondary[_ngcontent-%COMP%]:hover{border-color:#6c757d}.btn-outline-warning[_ngcontent-%COMP%]:hover{border-color:#ffcd3a}.btn-outline-danger[_ngcontent-%COMP%]:hover{border-color:#c82333}.expo-img[_ngcontent-%COMP%]{aspect-ratio:1.4;object-fit:cover}"]});let i=e;return i})();var M4e=(i,e)=>e.nombre;function I4e(i,e){i&1&&(L(0,"div",35),Q(1,"El nombre no puede estar vac\xEDo"),O())}function B4e(i,e){if(i&1&&(L(0,"option",36),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function D4e(i,e){i&1&&(L(0,"div",35),Q(1,"El nombre no puede estar vac\xEDo"),O())}var lse=(()=>{let e=class e{constructor(r,n,a,o,s,l){this.breadcrumbService=r,this.location=n,this.exposicionService=a,this.router=o,this.alertService=s,this.estadoService=l,this.newImage="../../../../assets/images/piezas/defualt_image.png",this.nuevaExposicion=new ra({nombre:new wt("",[vs.required]),autores:new wt(""),descripcion:new wt(""),estado_id:new wt("0",this.noZeroValidator()),fecha_inicio:new wt(""),fecha_fin:new wt("")}),this.formularioEnviado=!1,this.estadosPosibles=[]}ngOnInit(){this.formularioEnviado=!1,this.estadoService.getAllEstados().subscribe(r=>{this.estadosPosibles=r}),this.nuevaExposicion.controls.fecha_inicio.setValue(new Date().toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")),this.breadcrumbService.updateBreadcrumb("Crear exposici\xF3n",["Inicio","Exposiciones","Crear"])}get nombre(){return this.nuevaExposicion.controls.nombre}get estado(){return this.nuevaExposicion.controls.estado_id}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}crearExposicion(r){if(r.preventDefault(),this.formularioEnviado=!0,!this.nuevaExposicion.valid)return;let n=new FormData(r.target);console.log(n.get("imagen")),this.nuevaExposicion.value.nombre&&n.append("nombre",this.nuevaExposicion.value.nombre),this.nuevaExposicion.value.autores&&n.append("autores",this.nuevaExposicion.value.autores),this.nuevaExposicion.value.descripcion&&n.append("descripcion",this.nuevaExposicion.value.descripcion),this.nuevaExposicion.value.estado_id&&n.append("estado_id",this.nuevaExposicion.value.estado_id),this.nuevaExposicion.value.fecha_inicio&&n.append("fecha_inicio",this.nuevaExposicion.value.fecha_inicio),this.nuevaExposicion.value.fecha_fin&&n.append("fecha_fin",this.nuevaExposicion.value.fecha_fin),this.exposicionService.createNew(n).subscribe(a=>{console.log(a),this.router.navigate(["/administrador/exposiciones"]),this.alertService.showAlertExposiciones(!0)})}abrirSelectorDeArchivos(){document.getElementById("fileInput").click()}cambiarImagen(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newImage=a.result||"../../../../assets/images/piezas/defualt_image.png"},a.readAsDataURL(n)}}borrarImagen(){this.newImage="../../../../assets/images/piezas/defualt_image.png"}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(vr),xe(Zn),xe(sn),xe(bi),xe(Il),xe(os))},e.\u0275cmp=St({type:e,selectors:[["app-crear-exposicion"]],standalone:!0,features:[gr],decls:64,vars:4,consts:[[1,"row"],["enctype","multipart/form-data",3,"formGroup","submit"],[1,"row",2,"margin-left","8px","margin-right","10px"],[1,"col-md-12","col-lg-4","col-xl-4"],[1,"card"],[1,"p-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"cp","ml-auto","mr-2",3,"click"],[1,"fa","fa-trash"],["alt","Image",1,"imagen-pieza","img-fluid","cp","mt-2",3,"src","click"],["type","file","id","fileInput","accept","image/*","name","imagen",3,"change"],[1,"col-md-12","col-lg-8","col-xl-8"],[1,"tab-content","tabcontent-border",2,"min-height","400px"],[1,"card-title","pb-3"],[1,"form-group","row"],[1,"col-md-3","col-lg-12","col-xl-2",2,"font-size","15px"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre de la exposici\xF3n",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","autores","placeholder","Autor o autores de la exposici\xF3n",1,"form-control"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-3","col-lg-12","col-xl-2"],["type","text","formControlName","descripcion","placeholder","Descripci\xF3n de la exposici\xF3n",1,"form-control",2,"height","80px"],[1,"col-md-2","col-xl-2",2,"font-size","15px"],["formControlName","estado_id",1,"form-select","form-control"],["value","0"],[1,"col-md-4"],["type","date","formControlName","fecha_inicio",1,"form-control"],["type","date","formControlName","fecha_fin",1,"form-control"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"text-danger"],[3,"value"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.crearExposicion(s)}),L(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),Q(8,"Foto"),O(),ce(9,"br"),L(10,"span",8),ye("click",function(){return a.borrarImagen()}),ce(11,"i",9),O()(),L(12,"div")(13,"img",10),ye("click",function(){return a.abrirSelectorDeArchivos()}),O(),L(14,"input",11),ye("change",function(s){return a.cambiarImagen(s)}),O()()()()(),L(15,"div",12)(16,"div",4)(17,"div",13)(18,"div",5)(19,"h3",14),Q(20,"Datos"),O(),L(21,"div",15)(22,"label",16),Q(23,"Nombre:"),O(),L(24,"div",17),ce(25,"input",18),Dt(26,I4e,2,0,"div",19),O()(),L(27,"div",15)(28,"label",16),Q(29,"Autores: "),O(),L(30,"div",17),ce(31,"input",20),O()(),L(32,"div",21)(33,"label",22),Q(34,"Descripci\xF3n:"),O(),L(35,"div",17),ce(36,"textarea",23),O()(),L(37,"div",15)(38,"label",24),Q(39,"Estado: "),O(),L(40,"div",17)(41,"select",25)(42,"option",26),Q(43,"Seleccionar estado"),O(),Lr(44,B4e,2,2,"option",36,M4e),O(),Dt(46,D4e,2,0,"div",19),O()(),L(47,"div",15)(48,"label",24),Q(49,"Apertura:"),O(),L(50,"div",27),ce(51,"input",28),O(),L(52,"label",24),Q(53,"Cierre:"),O(),L(54,"div",27),ce(55,"input",29),O()()()()()()(),L(56,"div",30)(57,"button",31)(58,"span"),Q(59,"CREAR"),O()()(),L(60,"div",32)(61,"div",33)(62,"button",34),ye("click",function(){return a.volver()}),Q(63,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.nuevaExposicion),ie(12),Le("src",a.newImage,wr),ie(13),Le("ngIf",a.formularioEnviado&&a.nombre.invalid),ie(18),Or(a.estadosPosibles),ie(2),Le("ngIf",a.formularioEnviado&&a.estado.invalid))},dependencies:[lr,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o],styles:[".cp[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();function R4e(i,e){if(i&1&&(L(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",11)(5,"div",14)(6,"div",15)(7,"div",16)(8,"h3",17),Q(9,"Datos"),O(),ce(10,"br")(11,"br"),L(12,"div",18)(13,"label",19),Q(14,"Nombre: "),O(),L(15,"div",20)(16,"h4"),Q(17),O()()(),L(18,"div",21)(19,"label",22),Q(20,"Descripci\xF3n: "),O(),L(21,"div",20)(22,"p"),Q(23),O()()(),L(24,"div",18)(25,"label",19),Q(26,"Exposici\xF3n: "),O(),L(27,"div",20)(28,"p"),Q(29),O()()()()()()()()(),L(30,"div",12)(31,"div",13)(32,"div",23)(33,"div",24)(34,"div",25)(35,"h3",17),Q(36,"Listado"),O(),ce(37,"br")(38,"br"),L(39,"div",11)(40,"div")(41,"label"),Q(42,"Mostrar"),O()(),L(43,"div",26)(44,"select",27)(45,"option",28),Q(46,"10"),O(),L(47,"option",29),Q(48,"25"),O(),L(49,"option",30),Q(50,"50"),O(),L(51,"option",31),Q(52,"100"),O()()(),L(53,"div")(54,"label"),Q(55,"entradas"),O()(),L(56,"div",32)(57,"div",20)(58,"select",33)(59,"option",34),Q(60,"Exposici\xF3n"),O(),L(61,"option",35),Q(62,"Alaska"),O(),L(63,"option",36),Q(64,"Hawaii"),O()()()(),L(65,"div",37)(66,"div",38),ce(67,"input",39),O()()(),ce(68,"br"),L(69,"div",11)(70,"div",40)(71,"table",41)(72,"thead")(73,"tr")(74,"th"),Q(75,"Foto"),O(),L(76,"th"),Q(77,"T\xEDtulo"),O(),L(78,"th"),Q(79,"Exposici\xF3n"),O(),L(80,"th"),Q(81,"Sala"),O(),L(82,"th"),Q(83,"Enlace"),O()()()()()(),L(84,"div",11)(85,"div")(86,"div",42),Q(87," Showing 31 to 40 of 57 entries "),O()(),L(88,"div",43)(89,"div",44)(90,"ul",45)(91,"li",46)(92,"a",47),Q(93,"Previous"),O()(),L(94,"li",48)(95,"a",49),Q(96,"1"),O()(),L(97,"li",50)(98,"a",51),Q(99,"2"),O()(),L(100,"li",50)(101,"a",52),Q(102,"3"),O()(),L(103,"li",50)(104,"a",53),Q(105,"4"),O()(),L(106,"li",54)(107,"a",55),Q(108,"Next"),O()()()()()()()()()()()()()),i&2){let t=it();ie(17),We(t.sala.nombre),ie(6),We(t.sala.descripcion),ie(6),We(t.exposicionNombre)}}var cse=(()=>{let e=class e{constructor(r,n,a,o,s,l,c){this.pieceService=r,this.salaService=n,this.exposicionService=a,this.router=o,this.route=s,this.breadcrumbService=l,this.location=c,this.pieces=[],this.salas=[],this.salaId=null,this.sala=null,this.exposicion=null,this.exposicionNombre=null}ngOnInit(){let r=this.route.snapshot.params.id;this.salaService.getOne(r).subscribe(n=>{this.sala=n,this.breadcrumbService.updateBreadcrumb(this.sala.nombre,["Inicio","Salas",this.sala.nombre]),this.sala&&this.sala.exposicion_id&&this.exposicionService.getOne(this.sala.exposicion_id).subscribe(a=>{this.exposicion=a,this.exposicionNombre=a.nombre},a=>{console.error("Error al obtener la exposici\xF3n:",a)})}),this.pieceService.getAll().subscribe(n=>{this.pieces=n}),this.salaService.getAll().subscribe(n=>{this.salas=n})}navigateToPiece(r){this.router.navigate(["dashboard/piezas",r])}navigateToEditar(){let r=this.route.snapshot.params.id;this.router.navigate(["administrador/salas/editar/",r])}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Tn),xe(sn),xe(bi),xe(Ir),xe(vr),xe(Zn))},e.\u0275cmp=St({type:e,selectors:[["app-piezas-sala"]],standalone:!0,features:[gr],decls:15,vars:1,consts:[[2,"position","absolute","top","60px","right","150px"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-dark","btn-md","dropdown-toggle",2,"border-radius","1.5rem","width","140px"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","dropdown-menu-right","rounded"],[1,"dropdown-item",3,"click"],["href","#",1,"dropdown-item"],[2,"position","absolute","top","60px","right","50px"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"col-md-12"],[1,"tab-content","tabcontent-border",2,"min-height","200px"],[1,"p-40"],[1,"card-title"],[1,"form-group","row"],[1,"col-md-3",2,"font-size","15px"],[1,"col-md-9"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-3"],[1,"card-body","p-40"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"pl-2","pr-2"],["name","zero_config_length","aria-controls","zero_config",1,"form-control","form-control-sm"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"ml-auto",2,"margin-right","15px"],[1,"select2","form-control","custom-select",2,"width","160%","height","32px","font-size","14px"],["value","","disabled","","selected",""],["value","AK"],["value","HI"],[2,"margin-right","10px"],["id","zero_config_filter",1,"dataTables_filter"],["type","search","placeholder","\u{1F50D}\uFE0E  Buscar","aria-controls","zero_config",1,"form-control","form-control-sm",2,"height","32px","width","100px","font-size","14px"],[1,"col-12"],["id","zero_config",1,"table","table-striped","table-bordered"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info"],[1,"ml-auto",2,"margin-right","10px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","zero_config","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","zero_config","data-dt-idx","1","tabindex","0",1,"page-link"],[1,"paginate_button","page-item"],["href","#","aria-controls","zero_config","data-dt-idx","2","tabindex","0",1,"page-link"],["href","#","aria-controls","zero_config","data-dt-idx","3","tabindex","0",1,"page-link"],["href","#","aria-controls","zero_config","data-dt-idx","4","tabindex","0",1,"page-link"],["id","zero_config_next",1,"paginate_button","page-item","next"],["href","#","aria-controls","zero_config","data-dt-idx","7","tabindex","0",1,"page-link"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"button",2)(3,"span"),Q(4," ACCIONES"),O()(),L(5,"div",3)(6,"a",4),ye("click",function(){return a.navigateToEditar()}),Q(7,"Editar sala"),O(),L(8,"a",5),Q(9,"Borrar sala"),O()()()(),L(10,"div",6)(11,"div",7)(12,"button",8),ye("click",function(){return a.volver()}),Q(13,"Volver"),O()()(),Dt(14,R4e,109,3,"div",9)),n&2&&(ie(14),Le("ngIf",a.sala))},dependencies:[lr,vn]});let i=e;return i})();function P4e(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td"),Q(2),O(),L(3,"td",44),ye("click",function(){let a=zt(t).$implicit,o=it(2);return Vt(o.navigateToSala(a.id))}),L(4,"a")(5,"b"),Q(6,"Ver m\xE1s"),O()(),ce(7,"i",45),O()()}if(i&2){let t=e.$implicit;ie(2),We(t.nombre)}}function L4e(i,e){if(i&1){let t=Li();Ls(0),L(1,"li",46)(2,"a",42),ye("click",function(){let a=zt(t).$implicit,o=it(2);return Vt(o.guardarPagina(a))}),Q(3),O()(),Os()}if(i&2){let t=e.$implicit,r=it(2);ie(1),so("active",r.numPagina===t),ie(2),We(t)}}function O4e(i,e){if(i&1){let t=Li();L(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"h3",15),Q(6,"Imagen"),O(),ce(7,"br")(8,"img",16),O(),ce(9,"br"),O()(),L(10,"div",12)(11,"div",13)(12,"div",17)(13,"div",14)(14,"h3",15),Q(15,"Datos"),O(),ce(16,"br")(17,"br"),L(18,"div",18)(19,"label",19),Q(20,"Nombre:"),O(),L(21,"div",20)(22,"h4"),Q(23),O()()(),L(24,"div",21)(25,"label",22),Q(26,"Autores:"),O(),L(27,"div",20)(28,"p"),Q(29),O()()(),L(30,"div",21)(31,"label",22),Q(32,"Descripci\xF3n:"),O(),L(33,"div",20)(34,"p"),Q(35),O()()(),L(36,"div",21)(37,"label",22),Q(38,"Fecha de apertura:"),O(),L(39,"div",20)(40,"p"),Q(41),O()()(),L(42,"div",21)(43,"label",22),Q(44,"Fecha de cierre:"),O(),L(45,"div",20)(46,"p"),Q(47),O()()()()()()(),L(48,"div",12)(49,"div",23)(50,"div",13)(51,"div",17)(52,"div",14)(53,"h3",15),Q(54,"Listado salas"),O(),ce(55,"br"),L(56,"div",24)(57,"div",25)(58,"div",10)(59,"div")(60,"div",26)(61,"b"),Q(62),O(),Q(63," de "),L(64,"b"),Q(65),O(),Q(66," resultados "),O()(),L(67,"form",27),ye("submit",function(){zt(t);let n=gc(70),a=it();return Vt(a.buscarSala(n.value))}),L(68,"div",28),ce(69,"input",29,30),L(71,"div",31)(72,"span",32),ye("click",function(){zt(t);let n=gc(70),a=it();return Vt(a.buscarSala(n.value))}),ce(73,"span",33),O()()()()(),ce(74,"br"),L(75,"div",10)(76,"div",34)(77,"table",35)(78,"thead",36)(79,"tr")(80,"th"),Q(81,"T\xEDtulo"),O(),ce(82,"th"),O()(),L(83,"tbody"),Dt(84,P4e,8,1,"tr",37),O()()()(),L(85,"div",10)(86,"div",38)(87,"div",39)(88,"ul",40)(89,"li",41)(90,"a",42),ye("click",function(){zt(t);let n=it();return Vt(n.numPagina>1&&n.guardarPagina(n.numPagina-1))}),Q(91,"<"),O()(),Dt(92,L4e,4,3,"ng-container",37),L(93,"li",43)(94,"a",42),ye("click",function(){zt(t);let n=it();return Vt(n.numPagina<n.calcularPaginas().length&&n.guardarPagina(n.numPagina+1))}),Q(95,">"),O()()()()()()()()()()()()()()()}if(i&2){let t=it();ie(8),Vb("alt","",t.exposicion.nombre," Image"),Le("src",t.exposicion.imagen,wr),ie(15),We(t.exposicion.nombre),ie(6),We(t.exposicion.autores),ie(6),We(t.exposicion.descripcion),ie(6),We(t.exposicion.fecha_inicio),ie(6),We(t.exposicion.fecha_fin),ie(15),Ug("",t.calcularRango().primerResultado," - ",t.calcularRango().ultimoResultado,""),ie(3),We(t.totalSalas),ie(19),Le("ngForOf",t.salas),ie(5),so("disabled",t.numPagina===1),ie(3),Le("ngForOf",t.calcularPaginas()),ie(1),so("disabled",t.numPagina===t.calcularPaginas().length)}}var use=(()=>{let e=class e{constructor(r,n,a,o,s,l){this.breadcrumbService=r,this.exposicionService=n,this.salaService=a,this.route=o,this.router=s,this.location=l,this.salas=[],this.totalExposiciones=0,this.cantidadPorPagina=5,this.numPagina=1,this.exposicionSeleccionada="",this.totalSalas=0,this.nombreFiltro="",this.maxSalas=0,this.exposicion={id:"",nombre:"",descripcion:"",estado_id:"",fecha_inicio:new Date,fecha_fin:void 0,imagen:"../../../../../assets/images/piezas/defualt_image.png"}}ngOnInit(){let r=this.route.snapshot.params.id;this.exposicionService.getOne(r).subscribe(n=>{this.exposicion=n,this.exposicionSeleccionada=n.nombre,this.exposicion.imagen==null&&(this.exposicion.imagen="../../../../../assets/images/exposiciones/alcudia2.jpg"),this.breadcrumbService.updateBreadcrumb("Ver exposici\xF3n",["Inicio","Exposiciones",this.exposicionSeleccionada]),console.log("Expo: "+this.exposicion.nombre)}),this.exposicionService.getSalasExposicion(r).subscribe(n=>{this.totalSalas=n.length,this.maxSalas=n.length}),this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}navigateToEditar(){this.router.navigate(["/administrador/exposiciones/editar",this.exposicion.id])}volver(){this.location.back()}obtenerSalas(r,n){let a=this.route.snapshot.params.id;this.exposicionService.getOne(a).subscribe(o=>{this.exposicion=o,this.exposicionSeleccionada=o.nombre,this.exposicion.imagen==null&&(this.exposicion.imagen="../../../../../assets/images/exposiciones/alcudia2.jpg"),console.log(this.nombreFiltro+this.exposicionSeleccionada),this.salaService.getNumSalas(1,1e3,this.nombreFiltro,this.exposicion.id).subscribe(s=>{this.totalSalas=s.length,console.log(s.length)}),this.salaService.getNumSalas(r,n,this.nombreFiltro,this.exposicion.id).subscribe(s=>{console.log(s),this.salas=s;for(let l=0;l<this.salas.length;l++)this.salaService.getExposicionSala(this.salas[l].id).subscribe(c=>{this.salas[l].exposicion_nombre=c.nombre},c=>{console.error("Error al obtener la exposici\xF3n:",c)})})})}calcularRango(){let r=Math.min(this.totalSalas,(this.numPagina-1)*this.cantidadPorPagina+1),n=Math.min(this.numPagina*this.cantidadPorPagina,this.totalSalas);return{primerResultado:r,ultimoResultado:n}}guardarPagina(r){this.numPagina=r,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina),console.log("N\xFAmero de p\xE1gina actual: "+this.numPagina)}calcularPaginas(){let r=Math.ceil(this.totalSalas/this.cantidadPorPagina);return Array.from({length:r},(n,a)=>a+1)}buscarSala(r){this.nombreFiltro=r,this.obtenerSalas(this.cantidadPorPagina*(this.numPagina-1)+1,this.cantidadPorPagina*this.numPagina)}navigateToSala(r){this.router.navigate(["administrador/salas/ver/",r])}};e.\u0275fac=function(n){return new(n||e)(xe(vr),xe(sn),xe(Tn),xe(Ir),xe(bi),xe(Zn))},e.\u0275cmp=St({type:e,selectors:[["app-ver-exposicion"]],standalone:!0,features:[gr],decls:15,vars:1,consts:[[1,"boton-arriba2"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-dark","btn-md","dropdown-toggle",2,"border-radius","1.5rem","width","140px"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","dropdown-menu-right","rounded"],[1,"dropdown-item",3,"click"],["href","#",1,"dropdown-item"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],["class","container-fluid","class","row",4,"ngIf"],[1,"row"],[1,"row",2,"margin-left","8px","margin-right","10px"],[1,"col-md-4"],[1,"card"],[1,"p-40"],[1,"card-title"],[1,"imagen-pieza","img-fluid",3,"src","alt"],[1,"tab-content","tabcontent-border",2,"min-height","500px"],[1,"form-group","row"],[1,"col-md-5",2,"font-size","15px"],[1,"col-md-7"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-5"],[1,"col-md-12"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info",2,"padding-top","10px"],["id","zero_config_filter",1,"dataTables_filter","ml-auto",2,"margin-right","10px",3,"submit"],[1,"input-group"],["type","text","placeholder","Buscar","aria-label","Recipient's username","aria-describedby","basic-addon2",1,"form-control",2,"width","80px"],["busqueda",""],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"col-12"],["id","zero_config",1,"table","w-100"],[1,"thead-light"],[4,"ngFor","ngForOf"],[1,"ml-auto",2,"margin-right","10px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous"],["aria-controls","zero_config",1,"page-link",3,"click"],["id","zero_config_next",1,"paginate_button","page-item","next"],[3,"click"],[1,"mdi","mdi-chevron-right"],[1,"paginate_button","page-item"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"button",2)(3,"span"),Q(4," ACCIONES"),O()(),L(5,"div",3)(6,"a",4),ye("click",function(){return a.navigateToEditar()}),Q(7,"Editar exposici\xF3n"),O(),L(8,"a",5),Q(9,"Borrar exposici\xF3n"),O()()()(),L(10,"div",6)(11,"div",7)(12,"button",8),ye("click",function(){return a.volver()}),Q(13,"Volver"),O()()(),Dt(14,O4e,96,16,"div",9)),n&2&&(ie(14),Le("ngIf",a.exposicion))},dependencies:[lr,ia,vn,Wr,jn,Wn],styles:[".cp[_ngcontent-%COMP%]:hover{cursor:pointer}.semitransparent[_ngcontent-%COMP%]{opacity:70%}"]});let i=e;return i})();var F4e=(i,e)=>e.nombre;function N4e(i,e){i&1&&(L(0,"div",35),Q(1,"El nombre no puede estar vac\xEDo"),O())}function U4e(i,e){if(i&1&&(L(0,"option",36),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function k4e(i,e){i&1&&(L(0,"div",35),Q(1,"El nombre no puede estar vac\xEDo"),O())}var K5=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.breadcrumbService=r,this.location=n,this.exposicionService=a,this.router=o,this.alertService=s,this.estadoService=l,this.route=c,this.estadosService=u,this.newImage="../../../../assets/images/piezas/defualt_image.png",this.id="",this.nuevaExposicion=new ra({nombre:new wt("",[vs.required]),autores:new wt(""),descripcion:new wt(""),estado_id:new wt("0",this.noZeroValidator()),fecha_inicio:new wt(""),fecha_fin:new wt("")}),this.formularioEnviado=!1,this.estadosPosibles=[]}ngOnInit(){console.log(this.id),this.id=this.route.snapshot.paramMap.get("id")||"",this.exposicionService.getOne(this.id).subscribe(r=>{console.log(r),this.nuevaExposicion.setValue({nombre:r.nombre,autores:r.autores||"",descripcion:r.descripcion||"",estado_id:r.estado_id||"0",fecha_inicio:r.fecha_inicio?.toString()||"",fecha_fin:r.fecha_fin?.toString()||""}),r.imagen&&(this.newImage=Fi.apiURL+"/uploads/"+r.imagen),this.nuevaExposicion.value.nombre=r.nombre,this.nuevaExposicion.value.autores=r.autores,this.nuevaExposicion.value.descripcion=r.descripcion,this.nuevaExposicion.value.fecha_inicio=r.fecha_inicio.toString(),this.nuevaExposicion.value.fecha_inicio=r.fecha_fin?.toString(),console.log(this.nuevaExposicion.value),this.estadosService.getAllEstados().subscribe(n=>{this.estadosPosibles=n}),console.log(r.nombre),this.breadcrumbService.updateBreadcrumb("Editar exposici\xF3n",["Inicio","Exposiciones",r.nombre,"Editar"])}),this.formularioEnviado=!1,this.breadcrumbService.updateBreadcrumb("Crear exposici\xF3n",["Inicio","Exposiciones","Crear"])}get nombre(){return this.nuevaExposicion.controls.nombre}get estado(){return this.nuevaExposicion.controls.estado_id}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}editarExposicion(r){if(r.preventDefault(),this.formularioEnviado=!0,!this.nuevaExposicion.valid)return;let n=new FormData(r.target);console.log(n.get("imagen")),this.nuevaExposicion.value.nombre&&n.append("nombre",this.nuevaExposicion.value.nombre),this.nuevaExposicion.value.autores&&n.append("autores",this.nuevaExposicion.value.autores),this.nuevaExposicion.value.descripcion&&n.append("descripcion",this.nuevaExposicion.value.descripcion),this.nuevaExposicion.value.estado_id&&n.append("estado_id",this.nuevaExposicion.value.estado_id),this.nuevaExposicion.value.fecha_inicio&&n.append("fecha_inicio",this.nuevaExposicion.value.fecha_inicio),this.nuevaExposicion.value.fecha_fin&&n.append("fecha_fin",this.nuevaExposicion.value.fecha_fin),this.newImage==="../../../../assets/images/piezas/defualt_image.png"&&n.append("imagen_delete","true"),this.exposicionService.editOne(this.id,n).subscribe(a=>{console.log(a),this.router.navigate(["/administrador/exposiciones"]),this.alertService.showAlertExposiciones(!0)})}abrirSelectorDeArchivos(){document.getElementById("fileInput").click()}cambiarImagen(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newImage=a.result||"../../../../assets/images/piezas/defualt_image.png"},a.readAsDataURL(n)}}borrarImagen(){this.newImage="../../../../assets/images/piezas/defualt_image.png"}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(vr),xe(Zn),xe(sn),xe(bi),xe(Il),xe(os),xe(Ir),xe(os))},e.\u0275cmp=St({type:e,selectors:[["app-editar-exposicion"]],standalone:!0,features:[gr],decls:63,vars:4,consts:[[1,"row"],["enctype","multipart/form-data",3,"formGroup","submit"],[1,"row",2,"margin-left","8px","margin-right","10px"],[1,"col-md-12","col-lg-4","col-xl-4"],[1,"card"],[1,"p-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"cp","ml-auto","mr-2",3,"click"],[1,"fa","fa-trash"],["alt","Image",1,"imagen-pieza","img-fluid","cp","mt-2",3,"src","click"],["type","file","id","fileInput","accept","image/*","name","imagen",3,"change"],[1,"col-md-12","col-lg-8","col-xl-8"],[1,"tab-content","tabcontent-border",2,"min-height","428px"],[1,"card-title","pb-3"],[1,"form-group","row"],[1,"col-md-3","col-lg-12","col-xl-2",2,"font-size","15px"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre de la exposici\xF3n",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","autores","placeholder","Autor o autores de la exposici\xF3n",1,"form-control"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-3","col-lg-12","col-xl-2"],["type","text","formControlName","descripcion","placeholder","Descripci\xF3n de la exposici\xF3n",1,"form-control",2,"height","80px"],[1,"col-md-2","col-xl-2",2,"font-size","15px"],["formControlName","estado_id",1,"form-select","form-control"],["value","0"],[1,"col-md-4"],["type","date","formControlName","fecha_inicio",1,"form-control"],["type","date","formControlName","fecha_fin",1,"form-control"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"text-danger"],[3,"value"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.editarExposicion(s)}),L(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),Q(8,"Foto"),O(),ce(9,"br"),L(10,"span",8),ye("click",function(){return a.borrarImagen()}),ce(11,"i",9),O()(),L(12,"img",10),ye("click",function(){return a.abrirSelectorDeArchivos()}),O(),L(13,"input",11),ye("change",function(s){return a.cambiarImagen(s)}),O()()()(),L(14,"div",12)(15,"div",4)(16,"div",13)(17,"div",5)(18,"h3",14),Q(19,"Datos"),O(),L(20,"div",15)(21,"label",16),Q(22,"Nombre:"),O(),L(23,"div",17),ce(24,"input",18),Dt(25,N4e,2,0,"div",19),O()(),L(26,"div",15)(27,"label",16),Q(28,"Autores: "),O(),L(29,"div",17),ce(30,"input",20),O()(),L(31,"div",21)(32,"label",22),Q(33,"Descripci\xF3n:"),O(),L(34,"div",17),ce(35,"textarea",23),O()(),L(36,"div",15)(37,"label",24),Q(38,"Estado: "),O(),L(39,"div",17)(40,"select",25)(41,"option",26),Q(42,"Seleccionar estado"),O(),Lr(43,U4e,2,2,"option",36,F4e),O(),Dt(45,k4e,2,0,"div",19),O()(),L(46,"div",15)(47,"label",24),Q(48,"Apertura:"),O(),L(49,"div",27),ce(50,"input",28),O(),L(51,"label",24),Q(52,"Cierre:"),O(),L(53,"div",27),ce(54,"input",29),O()()()()()()(),L(55,"div",30)(56,"button",31)(57,"span"),Q(58,"EDITAR"),O()()(),L(59,"div",32)(60,"div",33)(61,"button",34),ye("click",function(){return a.volver()}),Q(62,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.nuevaExposicion),ie(11),Le("src",a.newImage,wr),ie(13),Le("ngIf",a.formularioEnviado&&a.nombre.invalid),ie(18),Or(a.estadosPosibles),ie(2),Le("ngIf",a.formularioEnviado&&a.estado.invalid))},dependencies:[lr,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o],styles:[".cp[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();var X5=(i,e)=>e.id,z4e=(i,e)=>e.nombre;function V4e(i,e){if(i&1&&(L(0,"option",40),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function H4e(i,e){i&1&&(L(0,"div",41),Q(1,"Se debe seleccionar una sala"),O())}function Q4e(i,e){if(i&1&&(L(0,"option",40),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function G4e(i,e){i&1&&(L(0,"div",41),Q(1,"Se debe seleccionar un estado"),O())}function W4e(i,e){if(i&1&&(L(0,"li",46)(1,"a",47),ce(2,"span",48),L(3,"span",49),Q(4),O()()()),i&2){let t=e.$implicit,r=e.$index;ie(1),pa(r===0?"active":""),Le("href","#"+t.id,wr)("id","tab-"+t.id),ie(3),We(t.idioma)}}function j4e(i,e){if(i&1){let t=Li();L(0,"div",63),ce(1,"audio",64),O(),L(2,"div",65)(3,"i",66),ye("click",function(){zt(t);let n=it().$index,a=it(2);return Vt(a.deleteAudio(n))}),O()()}if(i&2){let t=it().$index,r=it(2);ie(1),Le("src",r.newAudios[t],wr)}}var K4e=i=>({hidden:i});function X4e(i,e){if(i&1){let t=Li();L(0,"div",50)(1,"form",51),ce(2,"input",52)(3,"input",53),L(4,"div",27)(5,"label",54),Q(6,"Nombre: "),O(),L(7,"div",29),ce(8,"input",55),O()(),L(9,"div",56)(10,"label",57),Q(11,"Texto completo: "),O(),L(12,"div",29),ce(13,"textarea",58),O()(),L(14,"div",56)(15,"label",57),Q(16,"Texto f\xE1cil: "),O(),L(17,"div",29),ce(18,"textarea",59),O()(),L(19,"div",60)(20,"label",57),Q(21,"Audio: "),O(),Dt(22,j4e,4,1),L(23,"div",61)(24,"input",62),ye("input",function(n){zt(t);let a=it(2);return Vt(a.addAudio(n))}),O()()()()()}if(i&2){let t=e.$implicit,r=e.$index,n=it(2);pa(r===0?"active":""),Le("id",t.id),ie(1),Le("formGroup",n.datos_idiomas[r]),ie(21),Na(22,n.newAudios[r]!==null?22:-1),ie(1),Le("ngClass",yo(7,K4e,n.newAudios[r]!==null)),ie(1),Le("id","audioFile-"+r)}}function Y4e(i,e){i&1&&(L(0,"p",67),Q(1,"No hay idiomas en la base de datos. "),O())}function q4e(i,e){if(i&1&&(L(0,"div",42)(1,"ul",43),Lr(2,W4e,5,5,"li",68,X5),O(),L(4,"div",44),Lr(5,X4e,25,9,"div",69,X5),Dt(7,Y4e,2,0,"p",45),O()()),i&2){let t=it();ie(2),Or(t.idiomas),ie(3),Or(t.idiomas),ie(2),Na(7,t.idiomas.length<=0?7:-1)}}var hse=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u,h){this.pieceService=r,this.informacionService=n,this.salaService=a,this.idiomaService=o,this.breadcrumbService=s,this.location=l,this.router=c,this.estadoService=u,this.route=h,this.id="",this.newImage="../../../../assets/images/piezas/defualt_image.png",this.newPictograma="../../../../assets/images/piezas/defualt_image.png",this.newModelo="../../../../assets/images/piezas/defualt_image.png",this.newTextura="../../../../assets/images/piezas/defualt_image.png",this.newAudios=Array(),this.idiomas=[],this.salas=[],this.estadosPosibles=[],this.nombre="",this.nombreModelo="Modelo",this.datosCargados=!1,this.datos_generales=new ra({sala:new wt("0",this.noZeroValidator()),estado:new wt("0",this.noZeroValidator())}),this.datos_idiomas=[],this.datos_idiomas_API=[],this.imagen=new wt(""),this.formularioEnviado=!1}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"",this.salaService.getAll().subscribe(r=>{this.salas=r}),this.estadoService.getAllEstados().subscribe(r=>{this.estadosPosibles=r}),this.pieceService.getOne(this.id).subscribe(r=>{console.log(r),this.datos_generales.setValue({sala:r.sala_id,estado:r.estado_id}),r.imagen&&(this.newImage=Fi.apiURL+"/uploads/"+r.imagen),r.pictograma&&(this.newPictograma=Fi.apiURL+"/uploads/"+r.pictograma),r.modelo&&(this.newModelo=Fi.apiURL+"/uploads/"+r.modelo,this.nombreModelo=r.modelo,this.renderizarModelo(Fi.apiURL+"/uploads/"+r.modelo)),r.textura&&(this.newTextura=Fi.apiURL+"/uploads/"+r.textura),this.datos_idiomas_API=r.informacion,r.informacion.forEach((n,a)=>{this.idiomas.push(n.idioma),this.datos_idiomas.push(new ra({id:new wt(""),nombre:new wt(""),texto_completo:new wt(""),texto_facil:new wt(""),idioma:new wt("")})),this.datos_idiomas[a].setValue({id:n.id,nombre:n.nombre||"",texto_completo:n.texto_completo||"",texto_facil:n.texto_facil||"",idioma:n.idioma.id}),n.audio?this.newAudios.push(Fi.apiURL+"/uploads/"+n.audio):this.newAudios.push(null),n.nombre!=null&&(this.nombre=n.nombre),this.breadcrumbService.updateBreadcrumb("Editar pieza",["Inicio","Piezas",this.nombre,"Editar"])}),this.datosCargados=!0})}get sala_control(){return this.datos_generales.controls.sala}get estado_control(){return this.datos_generales.controls.estado}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}abrirSelectorDeArchivos(){document.getElementById("fileInput").click()}cambiarImagen(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newImage=a.result},a.readAsDataURL(n)}}borrarImagen(){this.newImage="../../../../assets/images/piezas/defualt_image.png"}cambiarPictograma(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newPictograma=a.result},a.readAsDataURL(n)}}borrarPictograma(){this.newPictograma="../../../../assets/images/piezas/defualt_image.png"}cambiarModelo(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.renderizarModelo(a.result)},a.readAsDataURL(n)}}borrarModelo(){this.newModelo="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputModel");r&&(r.value="")}cambiarTextura(r){let n=r.target.files[0];if(n){let a=new FileReader;a.onload=()=>{this.newTextura=a.result},a.readAsDataURL(n)}}borrarTextura(){this.newTextura="../../../../assets/images/piezas/defualt_image.png";let r=document.getElementById("fileInputTextura");r&&(r.value="")}volver(){this.location.back()}handleSubmit(r){if(r.preventDefault(),new FormData(r.target).forEach(a=>console.log(a)),this.formularioEnviado=!0,!this.datos_generales.valid)return;let n=new FormData(r.target);this.datos_generales.value.sala&&n.append("sala_id",this.datos_generales.value.sala),this.datos_generales.value.estado&&n.append("estado_id",this.datos_generales.value.estado),this.newImage==="../../../../assets/images/piezas/defualt_image.png"&&n.append("imagen_delete","true"),this.newPictograma==="../../../../assets/images/piezas/defualt_image.png"&&n.append("pictograma_delete","true"),this.newModelo==="../../../../assets/images/piezas/defualt_image.png"&&n.append("modelo_delete","true"),this.newTextura==="../../../../assets/images/piezas/defualt_image.png"&&n.append("textura_delete","true"),this.pieceService.editOne(this.id,n).subscribe(a=>{console.log("Pieza creada con exito: ",a),console.log(this.datos_idiomas),this.datos_idiomas.forEach((o,s)=>{let l=new FormData;l.append("idioma_id",o.controls.idioma.value),l.append("pieza_id",a.id),o.controls.nombre.value&&l.append("nombre",o.controls.nombre.value),o.controls.texto_completo&&l.append("texto_completo",o.controls.texto_completo.value),o.controls.texto_facil&&l.append("texto_facil",o.controls.texto_facil.value);let c=document.getElementById("audioFile-"+s);c&&c.files.length===1&&this.newAudios[s]!==null?l.append("audio",c.files[0]):this.newAudios[s]===null&&l.append("audio_delete","true");let u=o.controls.id.value||"";u!==""?this.informacionService.editOne(u,l).subscribe(h=>{console.log(h)}):this.informacionService.createNew(l).subscribe(h=>{console.log(h)})}),this.router.navigate(["/administrador/piezas"])})}addAudio(r){let n=r.target.files[0],a=Number(r.target.id.split("-")[1]),o=URL.createObjectURL(n);this.newAudios[a]=o}deleteAudio(r){this.newAudios[r]=null;let n=document.getElementById(`audioFile-${r}`);n&&(n.value="")}renderizarModelo(r){new C1().load(r,a=>{let o=a,s=new eu;s.background=new ji(8947848),s.add(o);let l=new ru(16777215,.8);s.add(l);let c=window.innerWidth/window.innerHeight,u=new ea(75,c,.1,1e3),h=new cc;h.setSize(window.innerWidth,window.innerHeight),u.position.set(0,0,5),u.zoom=2.5,u.updateProjectionMatrix(),h.render(s,u);let d=h.domElement.toDataURL();this.newModelo=d,this.nombreModelo=r},void 0,a=>{console.error("Error al cargar el modelo:",a)})}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(zI),xe(Tn),xe(Ms),xe(vr),xe(Zn),xe(bi),xe(os),xe(Ir))},e.\u0275cmp=St({type:e,selectors:[["app-editar-pieza"]],standalone:!0,features:[gr],decls:91,vars:8,consts:[[1,"row"],[3,"formGroup","submit"],[1,"col-sm-12","col-md-5","col-xl-4"],[1,"row","d-flex","align-items-stretch"],[1,"col-md-6","p-10","pt-0"],[1,"card","h-100"],[1,"card-body","h-100"],[1,"d-flex"],[1,"card-title","of-h"],[1,"cp","ml-auto",3,"click"],[1,"fa","fa-trash"],["for","fileInputImage",1,"w-100","text-center"],["alt","Image",1,"imagen-pieza","img-fluid","cp","image-pieza",3,"src"],["type","file","id","fileInputImage","name","imagen","accept","image/*",1,"custom-file-input",2,"display","none",3,"change"],["for","fileInputPicto",1,"w-100","text-center"],["type","file","id","fileInputPicto","name","pictograma","accept","image/*",1,"custom-file-input",2,"display","none",3,"change"],[1,"col-md-7","p-10","pt-0"],["for","fileInputModel",1,"w-100","text-center"],["type","file","id","fileInputModel","name","modelo","accept",".glb,.json,.obj",3,"change"],[1,"col-md-5","p-10","pt-0"],["for","fileInputTextura",1,"w-100","text-center"],["type","file","id","fileInputTextura","name","textura",1,"custom-file-input",2,"display","none",3,"change"],[1,"col-sm-12","col-md-7","col-xl-8"],[1,"card"],[1,"tab-content","tabcontent-border",2,"min-height","100px"],[1,"p-20"],[1,"card-title"],[1,"form-group","row"],[1,"col-md-2",2,"font-size","15px"],[1,"col-md-9"],["formControlName","sala",1,"form-select","form-control"],["value","0","disabled",""],["class","text-danger",4,"ngIf"],["formControlName","estado",1,"form-select","form-control"],["id","tabpanel",4,"ngIf"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[3,"value"],[1,"text-danger"],["id","tabpanel"],["role","tablist",1,"nav","nav-tabs"],[1,"tab-content","tabcontent-border"],["class","m-4"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"href","id"],[1,"hidden-sm-up"],[1,"hidden-xs-down"],["role","tabpanel",1,"tab-pane","p-20",3,"id"],[1,"p-2",3,"formGroup"],["type","text","formControlName","id",2,"display","none"],["type","text","formControlName","idioma",2,"display","none"],[1,"col-md-3",2,"font-size","15px"],["type","text","placeholder","","formControlName","nombre",1,"form-control"],[1,"form-group","row",2,"font-size","15px"],[1,"col-md-3"],["type","text","id","fname","placeholder","","formControlName","texto_completo",1,"form-control",2,"height","120px"],["type","text","id","fname","placeholder","","formControlName","texto_facil",1,"form-control",2,"height","80px"],[1,"form-group","row","d-flex","align-items-center",2,"font-size","15px"],[1,"col-md-9",3,"ngClass"],["type","file","accept","audio/*",3,"id","input"],[1,"col-md-8"],["controls","",3,"src"],[1,"col-md-1"],[1,"fa","fa-trash",3,"click"],[1,"m-4"],["class","nav-item"],["class","tab-pane p-20","role","tabpanel",3,"class","id"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.handleSubmit(s)}),L(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),Q(10,"Foto"),O(),ce(11,"br"),L(12,"span",9),ye("click",function(){return a.borrarImagen()}),ce(13,"i",10),O()(),L(14,"label",11),ce(15,"img",12),O(),L(16,"input",13),ye("change",function(s){return a.cambiarImagen(s)}),O()()()(),L(17,"div",4)(18,"div",5)(19,"div",6)(20,"div",7)(21,"h3",8),Q(22,"Pictograma"),O(),ce(23,"br"),L(24,"span",9),ye("click",function(){return a.borrarPictograma()}),ce(25,"i",10),O()(),L(26,"label",14),ce(27,"img",12),O(),L(28,"input",15),ye("change",function(s){return a.cambiarPictograma(s)}),O()()()()(),L(29,"div",0)(30,"div",16)(31,"div",5)(32,"div",6)(33,"div",7)(34,"h3",8),Q(35,"Modelo"),O(),ce(36,"br"),L(37,"span",9),ye("click",function(){return a.borrarModelo()}),ce(38,"i",10),O()(),L(39,"label",17),ce(40,"img",12),O(),L(41,"input",18),ye("change",function(s){return a.cambiarModelo(s)}),O()()()(),L(42,"div",19)(43,"div",5)(44,"div",6)(45,"div",7)(46,"h3",8),Q(47,"Textura"),O(),ce(48,"br"),L(49,"span",9),ye("click",function(){return a.borrarTextura()}),ce(50,"i",10),O()(),L(51,"label",20),ce(52,"img",12),O(),L(53,"input",21),ye("change",function(s){return a.cambiarTextura(s)}),O()()()()()(),L(54,"div",22)(55,"div",23)(56,"div",24)(57,"div",25)(58,"h3",26),Q(59,"Datos"),O(),ce(60,"br")(61,"br"),L(62,"div",27)(63,"label",28),Q(64,"Sala: "),O(),L(65,"div",29)(66,"select",30)(67,"option",31),Q(68,"Elegir una sala"),O(),Lr(69,V4e,2,2,"option",40,X5),O(),Dt(71,H4e,2,0,"div",32),O()(),L(72,"div",27)(73,"label",28),Q(74,"Estado: "),O(),L(75,"div",29)(76,"select",33)(77,"option",31),Q(78,"Elegir un estado"),O(),Lr(79,Q4e,2,2,"option",40,z4e),O(),Dt(81,G4e,2,0,"div",32),O()()(),Dt(82,q4e,8,1,"div",34),O()()()(),L(83,"div",35)(84,"button",36)(85,"span"),Q(86,"Guardar cambios"),O()()(),L(87,"div",37)(88,"div",38)(89,"button",39),ye("click",function(){return a.volver()}),Q(90,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.datos_generales),ie(14),Le("src",a.newImage,wr),ie(12),Le("src",a.newPictograma,wr),ie(13),Le("src",a.newModelo,wr),ie(12),Le("src",a.newTextura,wr),ie(17),Or(a.salas),ie(2),Le("ngIf",a.formularioEnviado&&a.sala_control.invalid),ie(8),Or(a.estadosPosibles),ie(2),Le("ngIf",a.formularioEnviado&&a.estado_control.invalid),ie(1),Le("ngIf",a.datosCargados))},dependencies:[lr,gs,vn,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o],styles:[".hidden[_ngcontent-%COMP%]{opacity:0}.of-h[_ngcontent-%COMP%]{overflow:hidden;height:1.2em}.cp[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();var dse=(()=>{let e=class e{constructor(r,n,a,o){this.breadcrumbService=r,this.cookies=n,this.http=a,this.location=o,this.flagUrl="flag_1.jpg",this.nuevoPerfil=new ra({usuario:new wt("",[vs.required]),correo:new wt(""),contrase\u00F1a:new wt("")})}ngOnInit(){this.getUsuario(),this.breadcrumbService.updateBreadcrumb("Configuraci\xF3n del perfil",["Inicio","Perfil"])}changeLanguage(r){this.flagUrl=r}editarPerfil(r){r.preventDefault()}getUsuario(){let r=this.cookies.get("withuUserToken");this.http.get(Fi.apiURL+"/auth/editor",{headers:{Authorization:"Bearer "+r}}).subscribe(n=>{this.nuevoPerfil.setValue({usuario:n.nombre,correo:n.correo||"",contrase\u00F1a:n.contrasenya||""})},n=>{console.error(n.error.error),location.href="/login"})}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(vr),xe(Kn),xe(Un),xe(Zn))},e.\u0275cmp=St({type:e,selectors:[["app-perfil"]],standalone:!0,features:[gr],decls:44,vars:1,consts:[[1,"container-fluid"],[3,"formGroup","submit"],[1,"card","p-40"],[1,"card-body"],[1,"card-title","mb-0"],[1,"text-muted"],[1,"d-flex"],[1,"form-group","m-t-10","mr-3"],["for","usuario1",1,"d-block"],["type","text","formControlName","usuario","id","date-mask-1","placeholder","Nombre usuario",1,"form-control","date-inputmask",2,"width","250px"],[1,"form-group","m-t-10"],["for","usuario2",1,"d-block"],["type","text","formControlName","correo","id","date-mask-2","placeholder","Correo electr\xF3nico",1,"form-control","date-inputmask",2,"width","250px"],[1,"form-group"],["type","button","onclick","establecerContrase\xF1a()",1,"btn","btn-outline-light",2,"width","250px"],[1,"dropdown-divider",2,"margin-top","20px","margin-bottom","20px","border-color","#EEEEEE"],[2,"padding-top","10px","width","400px"],[1,"select2","form-control","custom-select",2,"width","100%","height","36px"],[3,"click"],["value","AK",3,"click"],["value","HI",3,"click"],[2,"position","absolute","top","30px","right","150px"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[2,"position","absolute","top","30px","right","50px"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"form",1),ye("submit",function(s){return a.editarPerfil(s)}),L(2,"div",2)(3,"div",3)(4,"h4",4),Q(5,"Informaci\xF3n personal"),O(),L(6,"span",5),Q(7,"Tus credenciales de inicio de sesi\xF3n y contrase\xF1a"),O(),L(8,"div",6)(9,"div",7)(10,"label",8),Q(11,"Usuario"),O(),ce(12,"input",9),O(),L(13,"div",10)(14,"label",11),Q(15,"Correo"),O(),ce(16,"input",12),O()(),L(17,"div",13)(18,"label"),Q(19,"Contrase\xF1a"),O(),ce(20,"br"),L(21,"button",14),Q(22,"Establecer contrase\xF1a"),O()(),ce(23,"div",15),L(24,"h4",4),Q(25,"Idioma"),O(),L(26,"span",5),Q(27,"Establece el idioma en el que se muestra ARte en todos tus espacios de trabajo."),O(),L(28,"div",16)(29,"select",17)(30,"option",18),ye("click",function(){return a.changeLanguage("flag_1.jpg")}),Q(31,"CASTELLANO"),O(),L(32,"option",19),ye("click",function(){return a.changeLanguage("flag_2.jpg")}),Q(33,"VALENCI\xC0"),O(),L(34,"option",20),ye("click",function(){return a.changeLanguage("flag_3.jpg")}),Q(35,"ENGLISH"),O()()()()(),L(36,"div",21)(37,"button",22)(38,"span"),Q(39,"GUARDAR CAMBIOS"),O()()(),L(40,"div",23)(41,"div",24)(42,"button",25),ye("click",function(){return a.volver()}),Q(43,"Volver"),O()()()()()),n&2&&(ie(1),Le("formGroup",a.nuevoPerfil))},dependencies:[lr,Wr,jn,na,aa,En,Gn,Wn,xo,_o],styles:[".card-title[_ngcontent-%COMP%]{padding-bottom:10px}.btn-outline-light[_ngcontent-%COMP%]{border-radius:0%;border-color:#eee;color:#4f5467}.btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#eee;color:#3a3a3a}"]});let i=e;return i})();var Z4e=(i,e)=>e.id;function J4e(i,e){if(i&1&&(L(0,"option",16),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}var $4e=i=>({selected:i});function eke(i,e){if(i&1){let t=Li();L(0,"tr",17),ye("click",function(n){zt(t);let a=it();return Vt(a.selectPieza(n))}),L(1,"td",18),ce(2,"img",19),O(),L(3,"td",18),Q(4),O(),L(5,"td",18),Q(6),O(),L(7,"td",18),Q(8),O(),L(9,"td",18),Q(10),O()()}if(i&2){let t=e.$implicit,r=it();Le("ngClass",yo(7,$4e,t.id===(r.piezaSeleccionadaInp==null?null:r.piezaSeleccionadaInp.id)))("id","row_"+t.id),ie(2),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/piezas/pieza-ejemplo.jpg",wr),ie(2),We(t.nombre),ie(2),We(t.sala_nombre),ie(2),We(t.exposicion_nombre),ie(2),We(t.estado_id)}}var Ow=(()=>{let e=class e{constructor(r,n,a,o){this.piezasService=r,this.dateService=n,this.idiomaService=a,this.salaService=o,this.piezas_api=[],this.idiomas=[],this.salas=[],this.filtros={nombre:new wt(""),sala:new wt("0")},this.baseAPI=Fi.apiURL,this.piezaSeleccionadaInp=null,this.piezasAnadidas=[],this.piezaSeleccionada=new Za}ngOnInit(){this.piezasService.getLista("es").subscribe(r=>{this.piezas_api=r.piezas}),this.idiomaService.getAll().subscribe(r=>{this.idiomas=r}),this.salaService.getAll().subscribe(r=>{this.salas=r}),this.filtrarPiezas()}selectPieza(r){r.preventDefault();let a=r.target.parentElement.getAttribute("id")?.substring(4)||null,o=this.piezas_api.find(s=>s.id===a);o&&this.piezaSeleccionada.emit(o)}formatearFecha(r){let n=new Date(r);return this.dateService.transformarFecha(n,"es")}filtrarPiezas(){this.piezasService.getLista("es",this.filtros).subscribe(r=>{console.log(this.piezas_api,this.piezasAnadidas),this.piezas_api=r.piezas.filter(n=>!this.containsObject(n,this.piezasAnadidas)&&n.imagen!=null),console.log(this.piezas_api)})}containsObject(r,n){var a;for(a=0;a<n.length;a++)if(n[a].id===r.id)return!0;return!1}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Bl),xe(Ms),xe(Tn))},e.\u0275cmp=St({type:e,selectors:[["app-piezas-selector"]],inputs:{piezaSeleccionadaInp:"piezaSeleccionadaInp",piezasAnadidas:"piezasAnadidas"},outputs:{piezaSeleccionada:"piezaSeleccionada"},standalone:!0,features:[gr],decls:35,vars:2,consts:[[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"row"],[2,"margin-right","15px"],[1,"col-md-9"],[1,"select2","form-control","custom-select",2,"width","160%","height","32px","font-size","14px","height","35px",3,"formControl","change"],["value","0"],[2,"margin-right","10px"],["id","zero_config_filter",1,"dataTables_filter","input-group"],["type","search","placeholder","Buscar","aria-controls","zero_config",1,"form-control","form-control-sm",2,"font-size","14px",3,"formControl","change"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"col-12"],["id","zero_config",1,"table","w-100"],[1,"thead-light"],[3,"value"],[1,"fila","pointer",3,"ngClass","id","click"],[1,"info","align-middle"],["alt"," Image",1,"imagen-pieza","img-fluid",3,"src"],["class","fila pointer",3,"ngClass","id"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"select",5),ye("change",function(){return a.filtrarPiezas()}),L(6,"option",6),Q(7,"Todas las salas"),O(),Lr(8,J4e,2,2,"option",16,Z4e),O()()(),L(10,"div",7)(11,"div",8)(12,"input",9),ye("change",function(){return a.filtrarPiezas()}),O(),L(13,"div",10)(14,"span",11),ye("click",function(){return a.filtrarPiezas()}),ce(15,"span",12),O()()()()(),ce(16,"br"),L(17,"div",2)(18,"div",13)(19,"table",14)(20,"thead",15)(21,"tr")(22,"th"),Q(23,"Foto"),O(),L(24,"th"),Q(25,"Nombre"),O(),L(26,"th"),Q(27,"Sala"),O(),L(28,"th"),Q(29,"Exposici\xF3n"),O(),L(30,"th"),Q(31,"Estado"),O()()(),L(32,"tbody"),Lr(33,eke,11,9,"tr",20,kb),O()()()()()()),n&2&&(ie(5),Le("formControl",a.filtros.sala),ie(3),Or(a.salas),ie(4),Le("formControl",a.filtros.nombre),ie(21),Or(a.piezas_api))},dependencies:[Wr,na,aa,En,wa,Gn,vu,lr,gs],styles:[".selected[_ngcontent-%COMP%]{background-color:#b4e1ea}.pointer[_ngcontent-%COMP%]:hover{cursor:pointer}"]});let i=e;return i})();var fse=(i,e)=>e.id,tke=(i,e)=>e.nombre;function ike(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar un nombre"),O())}function rke(i,e){if(i&1&&(L(0,"option",41),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function nke(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar una exposici\xF3n"),O())}function ake(i,e){if(i&1&&(L(0,"option",41),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function oke(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar un estado"),O())}function ske(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td"),Q(2),O(),L(3,"td"),Q(4),O(),L(5,"td"),Q(6),O(),L(7,"td",42),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.removePieza(a.id))}),ce(8,"i",43),O()()}if(i&2){let t=e.$implicit;ie(2),We(t.nombre),ie(2),We(t.sala_nombre),ie(2),We(t.exposicion_nombre)}}var pse=(()=>{let e=class e{constructor(r,n,a,o,s){this.juegoService=r,this.router=n,this.breadcrumbService=a,this.exposicionService=o,this.estadoService=s,this.formularioEnviado=!1,this.exposiciones=[],this.estados=[],this.piezaSeleccionada=null,this.crearJuego=new ra({nombre:new wt("",vs.required),descripcion:new wt(""),fecha:new wt(""),exposicion:new wt("0",this.noZeroValidator()),estado:new wt("0",this.noZeroValidator())}),this.piezas=[]}ngOnInit(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r}),this.estadoService.getAllEstados().subscribe(r=>{this.estados=r}),this.breadcrumbService.updateBreadcrumb("Crear juego",["Home","Juego","Crear"])}get nombre(){return this.crearJuego.controls.nombre}get exposicion(){return this.crearJuego.controls.exposicion}get estado(){return this.crearJuego.controls.estado}handlerSubmit(r){if(r.preventDefault(),this.formularioEnviado=!0,!this.crearJuego.valid)return;let n={nombre:this.crearJuego.value.nombre||"",estado_id:this.crearJuego.value.estado||"",exposicion_id:this.crearJuego.value.exposicion||"",fecha:new Date(this.crearJuego.value.fecha||""),piezas:this.piezas,Pregunta:[]};this.crearJuego.value.descripcion&&(n.descripcion=this.crearJuego.value.descripcion),console.log(n),this.juegoService.createNew(n).subscribe(a=>{console.log(a)}),this.router.navigate(["/administrador/juegos"])}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}navigateToJuego(r){this.router.navigate(["/juego",r])}getPiezaSeleccionada(r){this.piezaSeleccionada=r}addPieza(){this.piezaSeleccionada&&(this.piezas.push(this.piezaSeleccionada),this.piezaSeleccionada=null,document.getElementById("closeModal")?.click())}removePieza(r){let n=this.piezas.findIndex(a=>a.id===r);this.piezas.splice(n,1)}volver(){this.router.navigate(["/administrador/juegos"])}};e.\u0275fac=function(n){return new(n||e)(xe(ys),xe(bi),xe(vr),xe(sn),xe(os))},e.\u0275cmp=St({type:e,selectors:[["app-crear-juego"]],standalone:!0,features:[gr],decls:76,vars:6,consts:[[1,"container-fluid"],[1,"row"],[1,"w-100","row",3,"formGroup","submit"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-5"],[1,"card"],[1,"card-body"],[1,"form-group","row"],["for","fname",1,"col-sm-3","control-label","col-form-label"],[1,"col"],["type","text","id","fname","formControlName","nombre",1,"form-control"],["class","text-danger"],["for","lname",1,"col-sm-3","control-label","col-form-label"],["type","text","id","lname","formControlName","descripcion",1,"form-control"],["type","date","id","lname","formControlName","fecha",1,"form-control"],[1,"col-sm-3",2,"font-size","15px"],["formControlName","exposicion",1,"form-select","form-control"],["value","0","disabled",""],["formControlName","estado",1,"form-select","form-control"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-7"],[1,"row","align-items-center","mx-1","my-2"],[1,"text-h5","m-0"],["type","button","data-toggle","modal","data-target","#listaPiezasModal",1,"btn","btn-primary","ml-auto"],[1,"column"],[1,"table","table-sm"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],["id","listaPiezasModal","tabindex","-1","aria-labelledby","listaPiezasModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close","id","closeModal",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"piezaSeleccionadaInp","piezaSeleccionada"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[3,"value"],[3,"click"],[1,"mdi","mdi-delete"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"form",2),ye("submit",function(s){return a.handlerSubmit(s)}),L(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),Q(8,"Nombre:"),O(),L(9,"div",8),ce(10,"input",9),Dt(11,ike,2,0,"div",10),O()(),L(12,"div",6)(13,"label",11),Q(14,"Descripcion:"),O(),L(15,"div",8),ce(16,"input",12),O()(),L(17,"div",6)(18,"label",11),Q(19,"Fecha:"),O(),L(20,"div",8),ce(21,"input",13),O()(),L(22,"div",6)(23,"label",14),Q(24,"Exposici\xF3n:"),O(),L(25,"div",8)(26,"select",15)(27,"option",16),Q(28,"Elegir una exposicion"),O(),Lr(29,rke,2,2,"option",41,fse),O(),Dt(31,nke,2,0,"div",10),O()(),L(32,"div",6)(33,"label",14),Q(34,"Estado:"),O(),L(35,"div",8)(36,"select",17)(37,"option",16),Q(38,"Elegir un estado"),O(),Lr(39,ake,2,2,"option",41,tke),O(),Dt(41,oke,2,0,"div",10),O()()()()(),L(42,"div",18)(43,"div",4)(44,"div",5)(45,"div",19)(46,"h5",20),Q(47,"Piezas del juego"),O(),L(48,"button",21),Q(49,"A\xF1adir pieza"),O()(),L(50,"div",22)(51,"table",23),Lr(52,ske,9,3,"tr",null,fse),O()()()()(),L(54,"div",24)(55,"button",25)(56,"span"),Q(57,"CREAR"),O()()(),L(58,"div",26)(59,"div",27)(60,"button",28),ye("click",function(){return a.volver()}),Q(61,"Volver"),O()()()()()(),L(62,"div",29)(63,"div",30)(64,"div",31)(65,"div",32)(66,"h5",33),Q(67,"Listado de piezas"),O(),L(68,"button",34)(69,"span",35),Q(70,"\xD7"),O()()(),L(71,"div",36)(72,"app-piezas-selector",37),ye("piezaSeleccionada",function(s){return a.getPiezaSeleccionada(s)}),O()(),L(73,"div",38)(74,"button",39),ye("click",function(){return a.addPieza()}),Q(75,"A\xF1adir pieza"),O()()()()()),n&2&&(ie(2),Le("formGroup",a.crearJuego),ie(9),Na(11,a.formularioEnviado&&a.nombre.invalid?11:-1),ie(18),Or(a.exposiciones),ie(2),Na(31,a.formularioEnviado&&a.exposicion.invalid?31:-1),ie(8),Or(a.estados),ie(2),Na(41,a.formularioEnviado&&a.estado.invalid?41:-1),ie(11),Or(a.piezas),ie(20),Le("piezaSeleccionadaInp",a.piezaSeleccionada),ie(2),Le("disabled",!a.piezaSeleccionada))},dependencies:[Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o,Ow]});let i=e;return i})();function lke(i,e){if(i&1){let t=Li();L(0,"div",1)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),Q(6,"Foto"),O()()()(),L(7,"div",6)(8,"div",3)(9,"ul",7)(10,"li",8)(11,"a",9),ce(12,"span",10),L(13,"span",11),Q(14,"Espa\xF1ol"),O()()(),L(15,"li",8)(16,"a",12),ce(17,"span",10),L(18,"span",11),Q(19,"Valenciano"),O()()(),L(20,"li",8)(21,"a",13),ce(22,"span",10),L(23,"span",11),Q(24,"English"),O()()()(),L(25,"div",14)(26,"div",15),ce(27,"div",16),O(),L(28,"div",17),ce(29,"div",16),O(),L(30,"div",18),ce(31,"div",16),O()()()()(),L(32,"button",19),ye("click",function(){zt(t);let n=it();return Vt(n.navigateToEditar())}),Q(33,"Editar"),O(),L(34,"button",20),ye("click",function(){zt(t);let n=it();return Vt(n.volver())}),Q(35,"Volver"),O()()}}var Ase=(()=>{let e=class e{constructor(r,n,a,o,s){this.route=r,this.router=n,this.juegoService=a,this.breadcrumbService=o,this.location=s,this.juegoId=null,this.juego=null}ngOnInit(){this.route.paramMap.subscribe(r=>{let n=r.get("id");n!==null&&(this.juegoId=n,this.juegoService.getOne(this.juegoId).subscribe(a=>{this.juego=a,this.juego&&this.breadcrumbService.updateBreadcrumb("Informaci\xF3n",["Home","Juegos",this.juego.nombre])}))})}navigateToEditar(){let r=this.router.url;if(r.includes("/editar"))console.log("Ya est\xE1s en la ruta que incluye /editar");else{let n=r+"/editar";this.router.navigate([n])}}volver(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(bi),xe(ys),xe(vr),xe(Zn))},e.\u0275cmp=St({type:e,selectors:[["app-juego-detalle"]],decls:1,vars:1,consts:[["class","container-fluid","class","row",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-8"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","href","#home","role","tab",1,"nav-link","active"],[1,"hidden-sm-up"],[1,"hidden-xs-down"],["data-toggle","tab","href","#profile","role","tab",1,"nav-link"],["data-toggle","tab","href","#messages","role","tab",1,"nav-link"],[1,"tab-content","tabcontent-border",2,"min-height","394px"],["id","home","role","tabpanel",1,"tab-pane","active","p-20"],[1,"p-20"],["id","profile","role","tabpanel",1,"tab-pane","p-20"],["id","messages","role","tabpanel",1,"tab-pane","p-20"],["type","button",1,"btn","btn-danger","ml-auto",2,"margin-right","20px",3,"click"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"]],template:function(n,a){n&1&&Dt(0,lke,36,0,"div",0),n&2&&Le("ngIf",a.juego)}});let i=e;return i})();var cke=(i,e)=>e.id;function uke(i,e){if(i&1&&(L(0,"option",60),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function hke(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td",61),Q(2),O(),L(3,"td",61),Q(4),O(),L(5,"td",61),Q(6),O(),L(7,"td",62)(8,"span",63),Q(9),gf(10,"uppercase"),O()(),L(11,"td",62)(12,"div",64)(13,"button",65),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(14,"span",66),O(),L(15,"button",67),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToViewJuego(a.id))}),ce(16,"span",68),O(),L(17,"button",69),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToEditPie(a.id))}),ce(18,"span",70),O(),L(19,"button",71),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.idToDelete=a.id)}),ce(20,"span",72),O()()()()}if(i&2){let t=e.$implicit;ie(2),We(t.nombre),ie(2),We(t.descripcion),ie(2),We(t.exposicion.nombre),ie(3),We(vf(10,4,t.estado.nombre))}}function dke(i,e){if(i&1){let t=Li();L(0,"li",73),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina-2))}),L(1,"a",56),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina-2)}}function fke(i,e){if(i&1){let t=Li();L(0,"li",73),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina-1))}),L(1,"a",56),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina-1)}}function pke(i,e){if(i&1){let t=Li();L(0,"li",73),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina+1))}),L(1,"a",56),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina+1)}}function Ake(i,e){if(i&1){let t=Li();L(0,"li",73),ye("click",function(){zt(t);let n=it();return Vt(n.goToPag(n.paginacion.pagina+2))}),L(1,"a",56),Q(2),O()()}if(i&2){let t=it();ie(2),We(t.paginacion.pagina+2)}}var mse=(()=>{let e=class e{constructor(r,n,a,o,s){this.juegoService=r,this.exposicionService=n,this.dateService=a,this.breadcrumbService=o,this.router=s,this.juegos=[],this.exposiciones=[],this.paginacion={pagina:1,desde:1,hasta:10,total:0,totalPag:1},this.filtros={nombre:new wt(""),exposicion:new wt("0"),numero:new wt(10),pagina:1},this.idToDelete="",this.baseAPI=Fi.apiURL}ngOnInit(){this.getJuegos(),this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r}),this.breadcrumbService.updateBreadcrumb("Juegos",["Inicio","Juegos"])}goToEditPie(r){this.router.navigate(["/administrador/juegos/editar",r])}goToCreatePie(){this.router.navigate(["/administrador/juegos/crear"])}deletePie(){this.juegoService.deleteOne(this.idToDelete).subscribe(r=>{console.log(r);let n=this.juegos.findIndex(a=>a.id===this.idToDelete);this.juegos.splice(n,1)})}getJuegos(){this.juegoService.getAll(this.filtros).subscribe(r=>{this.juegos=r.juegos,console.log(this.juegos)})}goToPag(r){this.filtros.pagina=r,this.getJuegos()}irAlEnlace(){let r="/alcudio/"+this.idToDelete;window.open(r,"_blank")}goToViewJuego(r){let n="/alcudio/"+r;window.open(n,"_blank")}convertBase64ToBlob(r){let n=r.split(";base64,"),a=n[0].split(":")[1],o=window.atob(n[1]),s=new Uint8Array(o.length);for(let l=0;l<o.length;++l)s[l]=o.charCodeAt(l);return new Blob([s],{type:a})}descargarQr(){let r=null;if(r=document.querySelector("canvas")?.toDataURL("image/png"),r){let n=this.convertBase64ToBlob(r),a=new Blob([n],{type:"image/png"}),o=window.URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download="qr-juego-"+this.idToDelete,s.click()}}};e.\u0275fac=function(n){return new(n||e)(xe(ys),xe(sn),xe(Bl),xe(vr),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-listado-juego"]],standalone:!0,features:[gr],decls:114,vars:22,consts:[[1,"boton-arriba"],["type","button",1,"btn","btn-dark","btn-md",2,"border-radius","1.5rem",3,"click"],[1,"mdi","mdi-plus"],["id","modalVerQR","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","text-center"],[1,"qrcodeImage"],[3,"qrdata","elementType","errorCorrectionLevel","margin","scale","width"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-Light",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-Light",2,"margin-left","10px",3,"click"],["id","modalBorrarPieza","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],["id","zero_config_wrapper",1,"dataTables_wrapper","container-fluid","dt-bootstrap4"],[1,"row"],[1,"pl-2","pr-2"],["name","zero_config_length","aria-controls","zero_config",1,"form-control","form-control-sm",3,"formControl","change"],["value","2"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"ml-auto"],[1,"col-md-9"],[1,"select2","form-control","custom-select",2,"width","200px",3,"formControl","change"],["value","0"],[2,"margin-right","10px"],["id","zero_config_filter",1,"dataTables_filter","input-group"],["type","search","placeholder","Buscar","aria-controls","zero_config",1,"form-control","form-control-sm",2,"font-size","14px",3,"formControl","change"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"mdi","mdi-magnify"],[1,"col-12"],["id","zero_config",1,"table","w-100"],[1,"thead-light"],[1,"last-column"],[4,"ngFor","ngForOf"],[1,"row",2,"padding-top","10px"],["id","zero_config_info","role","status","aria-live","polite",1,"dataTables_info"],[1,"ml-auto",2,"margin-right","11px"],["id","zero_config_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","zero_config_previous",1,"paginate_button","page-item","previous",3,"click"],[1,"page-link"],["class","paginate_button page-item",3,"click",4,"ngIf"],[1,"paginate_button","page-item","active"],["id","zero_config_next",1,"paginate_button","page-item","next",3,"click"],[3,"value"],[1,"info","align-middle"],[1,"align-middle"],[1,"badge","badge-pill","badge-Light"],[1,"d-inline-flex","justify-content-between"],["type","button","data-toggle","modal","data-target","#modalVerQR",1,"btn","btn-outline-info","btn-md",3,"click"],[1,"mdi","mdi-qrcode-scan"],["type","button",1,"btn","btn-outline-secondary","btn-md",3,"click"],[1,"mdi","mdi-eye"],["type","button",1,"btn","btn-outline-warning","btn-md",3,"click"],[1,"mdi","mdi-pencil"],["type","button","data-toggle","modal","data-target","#modalBorrarPieza",1,"btn","btn-outline-danger","btn-md",3,"click"],[1,"mdi","mdi-delete"],[1,"paginate_button","page-item",3,"click"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"button",1),ye("click",function(){return a.goToCreatePie()}),L(2,"span",2),Q(3," CREAR NUEVO"),O()()(),L(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h5",7),Q(9,"Informaci\xF3n QR"),O(),L(10,"button",8)(11,"span",9),Q(12,"\xD7"),O()()(),L(13,"div",10)(14,"div",11),ce(15,"qrcode",12),O()(),L(16,"div",13)(17,"button",14),ye("click",function(){return a.irAlEnlace()}),Q(18,"Ir al enlace"),O(),L(19,"button",15),ye("click",function(){return a.descargarQr()}),Q(20,"Descargar QR"),O()()()()(),L(21,"div",16)(22,"div",4)(23,"div",5)(24,"div",6)(25,"h5",17),Q(26,"Borrar pieza"),O(),L(27,"button",8)(28,"span",9),Q(29,"\xD7"),O()()(),L(30,"div",18)(31,"p"),Q(32," \xBFSeguro de que quiere eliminar este juego? "),O()(),L(33,"div",19)(34,"button",20),Q(35,"Cancelar"),O(),L(36,"button",21),ye("click",function(){return a.deletePie()}),Q(37,"Borrar pieza"),O()()()()(),L(38,"div",22)(39,"div",23)(40,"h5",24),Q(41,"Listado"),O(),ce(42,"br"),L(43,"div",25)(44,"div",26)(45,"div",27)(46,"div")(47,"label"),Q(48,"Mostrar"),O()(),L(49,"div",28)(50,"select",29),ye("change",function(){return a.getJuegos()}),L(51,"option",30),Q(52,"2"),O(),L(53,"option",31),Q(54,"10"),O(),L(55,"option",32),Q(56,"25"),O(),L(57,"option",33),Q(58,"50"),O(),L(59,"option",34),Q(60,"100"),O()()(),L(61,"div")(62,"label"),Q(63,"entradas"),O()(),L(64,"div",35)(65,"div",36)(66,"select",37),ye("change",function(){return a.getJuegos()}),L(67,"option",38),Q(68,"Todas las exposiciones"),O(),Lr(69,uke,2,2,"option",60,cke),O()()(),L(71,"div",39)(72,"div",40)(73,"input",41),ye("change",function(){return a.getJuegos()}),O(),L(74,"div",42)(75,"span",43),ye("click",function(){return a.getJuegos()}),ce(76,"span",44),O()()()()(),ce(77,"br"),L(78,"div",27)(79,"div",45)(80,"table",46)(81,"thead",47)(82,"tr")(83,"th"),Q(84,"Nombre"),O(),L(85,"th"),Q(86,"Descripci\xF3n"),O(),L(87,"th"),Q(88,"Exposici\xF3n"),O(),L(89,"th"),Q(90,"Estado"),O(),ce(91,"th",48),O()(),L(92,"tbody"),Dt(93,hke,21,6,"tr",49),O()()()(),L(94,"div",50)(95,"div")(96,"div",51),Q(97),O()(),L(98,"div",52)(99,"div",53)(100,"ul",54)(101,"li",55),ye("click",function(){return a.goToPag(a.paginacion.pagina-1)}),L(102,"a",56),Q(103,"Anterior"),O()(),Dt(104,dke,3,1,"li",57)(105,fke,3,1,"li",57),L(106,"li",58)(107,"a",56),Q(108),O()(),Dt(109,pke,3,1,"li",57)(110,Ake,3,1,"li",57),L(111,"li",59),ye("click",function(){return a.goToPag(a.paginacion.pagina+1)}),L(112,"a",56),Q(113,"Siguiente"),O()()()()()()()()()()),n&2&&(ie(15),Le("qrdata",a.baseAPI.substr(0,a.baseAPI.length-4)+"/alcudio/"+a.idToDelete)("elementType","canvas")("errorCorrectionLevel","M")("margin",1)("scale",1)("width",300),ie(35),Le("formControl",a.filtros.numero),ie(16),Le("formControl",a.filtros.exposicion),ie(3),Or(a.exposiciones),ie(4),Le("formControl",a.filtros.nombre),ie(20),Le("ngForOf",a.juegos),ie(4),Hb(" Mostrando ",a.paginacion.desde,"-",a.paginacion.hasta," de ",a.paginacion.total," entradas "),ie(4),pa(a.paginacion.pagina-1>0?"":"disabled"),ie(3),Le("ngIf",a.paginacion.pagina-2>0),ie(1),Le("ngIf",a.paginacion.pagina-1>0),ie(3),We(a.paginacion.pagina),ie(1),Le("ngIf",a.paginacion.pagina+1<=a.paginacion.totalPag),ie(1),Le("ngIf",a.paginacion.pagina+2<=a.paginacion.totalPag),ie(1),pa(a.paginacion.pagina+1<=a.paginacion.totalPag?"":"disabled"))},dependencies:[lr,ia,vn,xf,Wr,na,aa,En,wa,Gn,vu,sl,Lp,RM],styles:[".btn[_ngcontent-%COMP%]{margin:1px}"]});let i=e;return i})();var gse=(()=>{let e=class e{constructor(){this.pieChartDataValues2=[],this.pieChartDataNames2=[]}ngOnInit(){this.generarPieChart()}ngOnChanges(r){(r.pieChartDataValues2&&r.pieChartDataValues2.currentValue||r.pieChartDataNames2&&r.pieChartDataNames2.currentValue)&&this.generarPieChart()}generarPieChart(){if(!(!this.pieChartDataValues2||!this.pieChartDataNames2||this.pieChartDataValues2.length===0||this.pieChartDataNames2.length===0)){var r=document.getElementById("pie-chart-container2"),n=Sm(r,null,{renderer:"canvas",useDirtyRect:!1}),a,o=["#9C6644","#DDB892","#BE8A66","#e9d2c0"];a={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{name:"Total",type:"pie",radius:"80%",label:{show:!1,formatter:"{d}%",position:"outside",fontSize:14},data:this.pieChartDataValues2.map((s,l)=>({value:s,name:this.pieChartDataNames2[l],itemStyle:{color:o[l%o.length],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:4}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},a&&typeof a=="object"&&n.setOption(a)}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-pie-chart2"]],inputs:{pieChartDataValues2:"pieChartDataValues2",pieChartDataNames2:"pieChartDataNames2"},features:[No],decls:1,vars:0,consts:[["id","pie-chart-container2",2,"margin-top","15px"]],template:function(n,a){n&1&&ce(0,"div",0)},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}#pie-chart-container2[_ngcontent-%COMP%]{height:25vh;overflow:hidden}"]});let i=e;return i})();var Y5=i=>({"primera-fila":i});function gke(i,e){if(i&1&&(Ls(0),L(1,"tr",51)(2,"td",52),Q(3),O(),L(4,"td"),Q(5),O()(),Os()),i&2){let t=e.$implicit,r=e.index,n=it();ie(1),Le("ngClass",yo(3,Y5,n.isFirstElement(r))),ie(2),We(t.nombre),ie(2),We(t.totalEscaneos)}}function vke(i,e){if(i&1&&(Ls(0),L(1,"tr",51)(2,"td",52),Q(3),O(),L(4,"td"),Q(5),O()(),Os()),i&2){let t=e.$implicit,r=e.index,n=it();ie(1),Le("ngClass",yo(3,Y5,n.isFirstElement(r))),ie(2),We(t.nombre),ie(2),We(t.totalEscaneos)}}function yke(i,e){if(i&1&&(Ls(0),L(1,"tr",51)(2,"td",52),Q(3),O(),L(4,"td"),Q(5),O()(),Os()),i&2){let t=e.$implicit,r=e.index,n=it();ie(1),Le("ngClass",yo(3,Y5,n.isFirstElement(r))),ie(2),We(t.nombre),ie(2),We(t.totalEscaneos)}}var vse=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.pieceService=r,this.salaService=n,this.exposicionService=a,this.juegoService=o,this.escaneoService=s,this.breadcrumbService=l,this.cookies=c,this.http=u,this.filtros={nombre:new wt(""),exposicion:new wt("0"),numero:new wt(10),pagina:1},this.pieChartDataValues=[],this.pieChartDataNames=[],this.pieChartDataValues2=[],this.pieChartDataNames2=[],this.barChartDataValues=[],this.barChartDataNames=[],this.barChartTitle="",this.fechaActual=new Date,this.fechaFiltro=new Date(this.fechaActual),this.opcionFiltro="M",this.diaFiltro=0,this.semanaFiltro=0,this.a\u00F1oFiltro=0,this.mesFiltro=0,this.totalUsuarios=0,this.totalPiezas=0,this.totalEscaneos=0,this.totalPartidasAlcudio=0,this.totalUsoMotorGrafico=0,this.usoMotorGrafico="",this.usoAudio="",this.tiempoSesion="",this.tiempoJuego="",this.diferenciaEscaneos=0,this.juegos_finalizados="",this.totalEscaneosJuego=0,this.opcionSeleccionada1="Seleccione una opci\xF3n",this.valorOpcionSeleccionada1="",this.opcionSeleccionada2="Seleccione una opci\xF3n",this.valorOpcionSeleccionada2="",this.listaSeleccionada1="Piezas m\xE1s escaneadas",this.valorlistaSeleccionada1=[],this.listaSeleccionada2="Piezas m\xE1s escaneadas",this.valorlistaSeleccionada2=[],this.listaSeleccionada3="Piezas m\xE1s escaneadas",this.valorlistaSeleccionada3=[],this.listaSeleccionada4="Piezas m\xE1s escaneadas",this.valorlistaSeleccionada4=[],this.editor=null,this.ultima_sesion="",this.pieces=[],this.sortedPieces=[],this.totalTabla1=[],this.salas=[],this.sortedSalas=[],this.exposiciones=[],this.sortedExposiciones=[],this.escaneos=[],this.escaneos_juego=[],this.juegos=[],this.sortedJuegos=[]}ngOnInit(){let r=sessionStorage.getItem("filtroOption1");r?this.opcionFiltro=r:sessionStorage.setItem("filtroOption1",this.opcionFiltro);let n=sessionStorage.getItem("desplegableOption1");n?(this.opcionSeleccionada1=n,this.updateDesplegable(1,n)):sessionStorage.setItem("desplegableOption1",this.opcionSeleccionada1);let a=sessionStorage.getItem("desplegableOption2");a?(this.opcionSeleccionada2=a,this.updateDesplegable(2,a)):sessionStorage.setItem("desplegableOption2",this.opcionSeleccionada2);let o=sessionStorage.getItem("listaOption1");o?(this.listaSeleccionada1=o,this.updateLista(1,o)):sessionStorage.setItem("listaOption1",this.listaSeleccionada1);let s=sessionStorage.getItem("listaOption2");s?(this.listaSeleccionada2=s,this.updateLista(2,s)):sessionStorage.setItem("listaOption2",this.listaSeleccionada2);let l=sessionStorage.getItem("listaOption3");l?(this.listaSeleccionada3=l,this.updateLista(3,l)):sessionStorage.setItem("listaOption3",this.listaSeleccionada3),this.fechaActual=new Date,this.fechaFiltro=this.fechaActual,this.a\u00F1oFiltro=this.fechaActual.getFullYear(),this.mesFiltro=this.fechaActual.getMonth()+1,this.semanaFiltro=this.fechaActual.getDate(),this.diaFiltro=this.fechaActual.getDate();let c=this.mesFiltro.toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),c).subscribe(u=>{this.barChartDataValues=u.values,this.barChartDataNames=u.names,this.barChartTitle=u.title}),this.escaneoService.getIndicadorUsuarios().subscribe(u=>{this.pieChartDataValues=u.values,this.pieChartDataNames=u.names,this.totalPartidasAlcudio=u.values[1],this.totalUsuarios=u.values[0]+u.values[1],this.opcionSeleccionada1==="Usuarios totales"?this.valorOpcionSeleccionada1=this.totalUsuarios.toString():this.opcionSeleccionada2==="Usuarios totales"&&(this.valorOpcionSeleccionada2=this.totalUsuarios.toString())}),this.escaneoService.getUsoIdiomas().subscribe(u=>{this.pieChartDataValues2=u.values,this.pieChartDataNames2=u.names}),this.pieceService.getLista("es").subscribe(u=>{this.pieces=u.piezas,this.sortedPieces=[...this.pieces]}),this.getMasEscaneos(),this.getJuegosMasEscaneados(),this.getEstadisticasJuegos(),this.inicializarGr\u00E1ficos(),this.breadcrumbService.updateBreadcrumb("Indicadores",["Inicio","Indicadores"])}inicializarGr\u00E1ficos(){this.pieceService.getLista("es").subscribe(o=>{this.totalPiezas=o.piezas.length});let r,n=(this.fechaActual.getMonth()+1).toString().padStart(2,"0"),a=this.fechaActual.getMonth().toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.fechaActual.getFullYear().toString(),n).subscribe(o=>{this.totalEscaneos=o.values.reduce((s,l)=>s+l,0),this.escaneoService.getFiltroEscaneosPieza(this.fechaActual.getFullYear().toString(),a).subscribe(s=>{r=s.values.reduce((l,c)=>l+c,0),this.diferenciaEscaneos=(this.totalEscaneos-r)/r*100,this.diferenciaEscaneos=parseFloat(this.diferenciaEscaneos.toFixed(0))})})}onToggleChange(r){console.log("Opci\xF3n seleccionada:",r.target.value),this.opcionFiltro=r.target.value;let n=this.mesFiltro.toString().padStart(2,"0"),a="";this.fechaActual.getDay()==0?a="7":a=(this.semanaFiltro-(this.fechaActual.getDay()-1)).toString(),console.log(a),r.target.value==="D"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,"",this.diaFiltro.toString()).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title,console.log(o.title)}):r.target.value==="S"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,a).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title}):r.target.value==="M"?this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title}):r.target.value==="A"&&this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString()).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title})}updateDesplegable(r,n){r===1?(this.opcionSeleccionada1=n,sessionStorage.setItem("desplegableOption1",this.opcionSeleccionada1),n==="Uso motor gr\xE1fico"?(this.getUsoMotorGr\u00E1fico(),this.valorOpcionSeleccionada1=this.usoMotorGrafico):n==="Uso reproductor de audio"?(this.getUsoAudio(),this.valorOpcionSeleccionada1=this.usoAudio):n==="Tiempo medio por sesi\xF3n"?(this.getTiempoMedioPorSesion(),this.valorOpcionSeleccionada1=this.tiempoSesion):n==="Juegos finalizados"?(this.getEstadisticasJuegos(),this.valorOpcionSeleccionada1=this.juegos_finalizados):n=="Usuarios totales"?this.valorOpcionSeleccionada1=this.totalUsuarios.toString():n=="Tiempo medio jugando"&&(this.getTiempoMedioPorJuego(),this.valorOpcionSeleccionada1=this.tiempoJuego)):r===2&&(this.opcionSeleccionada2=n,sessionStorage.setItem("desplegableOption2",this.opcionSeleccionada2),n==="Uso motor gr\xE1fico"?(this.getUsoMotorGr\u00E1fico(),this.valorOpcionSeleccionada2=this.usoMotorGrafico):n==="Uso reproductor de audio"?(this.getUsoAudio(),this.valorOpcionSeleccionada2=this.usoAudio):n==="Tiempo medio por sesi\xF3n"?(this.getTiempoMedioPorSesion(),this.valorOpcionSeleccionada2=this.tiempoSesion):n==="Finalizaci\xF3n juegos"?(this.getEstadisticasJuegos(),this.valorOpcionSeleccionada2=this.juegos_finalizados):n=="Usuarios totales"?this.valorOpcionSeleccionada2=this.totalUsuarios.toString():n=="Tiempo medio jugando"&&(this.getTiempoMedioPorJuego(),this.valorOpcionSeleccionada2=this.tiempoJuego))}updateLista(r,n){r===1?(this.listaSeleccionada1=n,sessionStorage.setItem("listaOption1",this.listaSeleccionada1),n==="Piezas m\xE1s escaneadas"?this.valorlistaSeleccionada1=this.sortedPieces:n==="Exposiciones con m\xE1s escaneos"?this.valorlistaSeleccionada1=this.sortedExposiciones:n==="Salas con m\xE1s escaneos"?this.valorlistaSeleccionada1=this.sortedSalas:n==="Juegos m\xE1s jugados"&&(this.valorlistaSeleccionada1=this.sortedJuegos)):r===2?(this.listaSeleccionada2=n,sessionStorage.setItem("listaOption2",this.listaSeleccionada2),n==="Piezas m\xE1s escaneadas"?this.valorlistaSeleccionada2=this.sortedPieces:n==="Exposiciones con m\xE1s escaneos"?this.valorlistaSeleccionada2=this.sortedExposiciones:n==="Salas con m\xE1s escaneos"?this.valorlistaSeleccionada2=this.sortedSalas:n==="Juegos m\xE1s jugados"&&(this.valorlistaSeleccionada2=this.sortedJuegos)):r===3&&(this.listaSeleccionada3=n,sessionStorage.setItem("listaOption3",this.listaSeleccionada3),n==="Piezas m\xE1s escaneadas"?this.valorlistaSeleccionada3=this.sortedPieces:n==="Exposiciones con m\xE1s escaneos"?this.valorlistaSeleccionada3=this.sortedExposiciones:n==="Salas con m\xE1s escaneos"?this.valorlistaSeleccionada3=this.sortedSalas:n==="Juegos m\xE1s jugados"&&(this.valorlistaSeleccionada3=this.sortedJuegos))}getMasEscaneos(){this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r,this.sortedExposiciones=[...this.exposiciones],this.salaService.getAll().subscribe(n=>{this.salas=n,this.sortedSalas=[...this.salas],this.pieceService.getLista("es").subscribe(a=>{this.pieces=a.piezas,this.sortedPieces=[...this.pieces],this.pieces.forEach((o,s)=>{this.escaneoService.getAllEscaneosPieza(o.id).subscribe(l=>{let c=l.length;o.totalEscaneos=c;let u=this.salas.find(d=>d.id===o.sala_id);u&&(u.totalEscaneos=(u.totalEscaneos||0)+c);let h=this.exposiciones.find(d=>d.id===u?.exposicion_id);h&&(h.totalEscaneos=(h.totalEscaneos||0)+c),s===this.pieces.length-1&&(this.sortedSalas.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),this.sortedExposiciones.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),this.sortedPieces.sort((d,f)=>(f.totalEscaneos||0)-(d.totalEscaneos||0)),(this.listaSeleccionada1==="Piezas m\xE1s escaneadas"||this.listaSeleccionada1==="Exposiciones con m\xE1s escaneos"||this.listaSeleccionada1==="Salas con m\xE1s escaneos"||this.listaSeleccionada1==="Juegos m\xE1s jugados")&&this.updateLista(1,this.listaSeleccionada1),(this.listaSeleccionada2==="Piezas m\xE1s escaneadas"||this.listaSeleccionada2==="Exposiciones con m\xE1s escaneos"||this.listaSeleccionada2==="Salas con m\xE1s escaneos"||this.listaSeleccionada2==="Juegos m\xE1s jugados")&&this.updateLista(2,this.listaSeleccionada2),(this.listaSeleccionada3==="Piezas m\xE1s escaneadas"||this.listaSeleccionada3==="Exposiciones con m\xE1s escaneos"||this.listaSeleccionada3==="Salas con m\xE1s escaneos"||this.listaSeleccionada3==="Juegos m\xE1s jugados")&&this.updateLista(3,this.listaSeleccionada3))})})})})})}getJuegosMasEscaneados(){this.juegoService.getAll(this.filtros).subscribe(r=>{this.juegos=r.juegos,this.sortedJuegos=[...this.juegos],this.juegos.forEach((n,a)=>{this.escaneoService.getAllEscaneosJuego(n.id).subscribe(o=>{let s=o.length;n.totalEscaneos=s,a===this.juegos.length-1&&this.sortedJuegos.sort((l,c)=>(c.totalEscaneos||0)-(l.totalEscaneos||0))})})})}getEstadisticasJuegos(){let r=0;this.escaneoService.getAllEscaneosJuegos().subscribe(n=>{this.escaneos_juego=n,this.totalEscaneosJuego=n.length;for(let a=0;a<this.escaneos_juego.length;a++)this.escaneos_juego[a].finalizado==1&&r++;this.juegos_finalizados=parseFloat((r/this.totalEscaneosJuego*100).toFixed(2)).toString()+"%",this.opcionSeleccionada1==="Juegos finalizados"?this.valorOpcionSeleccionada1=this.juegos_finalizados:this.opcionSeleccionada2==="Juegos finalizados"&&(this.valorOpcionSeleccionada2=this.juegos_finalizados)})}getUsuarios(){this.escaneoService.getIndicadorUsuarios().subscribe(r=>{this.pieChartDataValues=r.values,this.pieChartDataNames=r.names,console.log(this.pieChartDataValues)})}getUsoIdiomas(){this.escaneoService.getUsoIdiomas().subscribe(r=>{this.pieChartDataValues2=r.values,this.pieChartDataNames2=r.names})}getUsoMotorGr\u00E1fico(){let r=0;this.escaneoService.getAllEscaneosPiezas().subscribe(n=>{this.escaneos=n,this.totalEscaneos=n.length;for(let a=0;a<this.escaneos.length;a++)this.escaneos[a].motor_grafico==1&&r++;this.usoMotorGrafico=parseFloat((r/this.totalEscaneos*100).toFixed(2)).toString()+"%",this.opcionSeleccionada1==="Uso motor gr\xE1fico"?this.valorOpcionSeleccionada1=this.usoMotorGrafico:this.opcionSeleccionada2==="Uso motor gr\xE1fico"&&(this.valorOpcionSeleccionada2=this.usoMotorGrafico)})}getUsoAudio(){let r=0;this.escaneoService.getAllEscaneosPiezas().subscribe(n=>{this.escaneos=n,this.totalEscaneos=n.length;for(let a=0;a<this.escaneos.length;a++)this.escaneos[a].audio==1&&r++;this.usoAudio=parseFloat((r/this.totalEscaneos*100).toFixed(2)).toString()+"%",this.opcionSeleccionada1==="Uso reproductor de audio"?this.valorOpcionSeleccionada1=this.usoAudio:this.opcionSeleccionada2==="Uso reproductor de audio"&&(this.valorOpcionSeleccionada2=this.usoAudio)})}getTiempoMedioPorSesion(){let r=0;this.escaneoService.getAllEscaneosPiezas().subscribe(n=>{this.escaneos=n,this.totalEscaneos=n.length;for(let o=0;o<this.escaneos.length;o++){let s=this.escaneos[o].tiempo;s!==void 0&&typeof s=="number"&&(r+=s)}let a=parseFloat((r/this.totalEscaneos).toFixed(2));this.tiempoSesion=this.segundosAFormatoTiempo(a),this.opcionSeleccionada1==="Tiempo medio por sesi\xF3n"?this.valorOpcionSeleccionada1=this.tiempoSesion:this.opcionSeleccionada2==="Tiempo medio por sesi\xF3n"&&(this.valorOpcionSeleccionada2=this.tiempoSesion)})}getTiempoMedioPorJuego(){this.escaneoService.getAllEscaneosJuegos().subscribe(r=>{this.escaneos=r,this.totalEscaneos=r.length;let n=0;for(let o=0;o<this.escaneos.length;o++){let s=this.escaneos[o].tiempo;s!==void 0&&typeof s=="number"&&(n+=s)}let a=parseFloat((n/this.totalEscaneos).toFixed(2));this.tiempoJuego=this.segundosAFormatoTiempo(a),this.opcionSeleccionada1==="Tiempo medio jugando"?this.valorOpcionSeleccionada1=this.tiempoJuego:this.opcionSeleccionada2==="Tiempo medio jugando"&&(this.valorOpcionSeleccionada1=this.tiempoJuego)})}paginacion(r){if(this.opcionFiltro=="A")r==0?this.a\u00F1oFiltro--:this.a\u00F1oFiltro!=this.fechaActual.getFullYear()&&this.a\u00F1oFiltro++,this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString()).subscribe(n=>{this.barChartDataValues=n.values,this.barChartDataNames=n.names,this.barChartTitle=n.title});else if(this.opcionFiltro=="M"){r==0?this.mesFiltro==1?(this.mesFiltro=12,this.a\u00F1oFiltro--):this.mesFiltro--:(this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear())&&(this.mesFiltro==12?(this.mesFiltro=1,this.a\u00F1oFiltro++):this.mesFiltro++);let n=this.mesFiltro.toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n).subscribe(a=>{this.barChartDataValues=a.values,this.barChartDataNames=a.names,this.barChartTitle=a.title})}else if(this.opcionFiltro=="S"){if(console.log(this.fechaFiltro),console.log(this.fechaActual),r==0){let a=new Date(this.fechaFiltro);a.setDate(a.getDate()-7),this.fechaFiltro=a}else if(this.fechaFiltro.getDate()!=this.fechaActual.getDate()||this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear()){let a=new Date(this.fechaFiltro);a.setDate(a.getDate()+7),this.fechaFiltro=a}this.semanaFiltro=this.fechaFiltro.getDate(),this.a\u00F1oFiltro=this.fechaFiltro.getFullYear();let n=(this.fechaFiltro.getMonth()+1).toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),n,this.semanaFiltro.toString()).subscribe(a=>{this.barChartDataValues=a.values,this.barChartDataNames=a.names,this.barChartTitle=a.title})}else if(this.opcionFiltro=="D"){if(r==0){let o=new Date(this.fechaFiltro);o.setDate(o.getDate()-1),this.fechaFiltro=o}else if(this.fechaFiltro.getDate()!=this.fechaActual.getDate()||this.mesFiltro!=this.fechaActual.getMonth()+1||this.a\u00F1oFiltro!=this.fechaActual.getFullYear()){let o=new Date(this.fechaFiltro);o.setDate(o.getDate()+1),this.fechaFiltro=o}let n=this.fechaFiltro.getDate().toString().padStart(2,"0");this.a\u00F1oFiltro=this.fechaFiltro.getFullYear();let a=(this.fechaFiltro.getMonth()+1).toString().padStart(2,"0");this.escaneoService.getFiltroEscaneosPieza(this.a\u00F1oFiltro.toString(),a,"",n).subscribe(o=>{this.barChartDataValues=o.values,this.barChartDataNames=o.names,this.barChartTitle=o.title})}}segundosAFormatoTiempo(r){let n=Math.floor(r/3600),a=Math.floor(r%3600/60),o=Math.floor(r%60);if(n===0){let s=a<10?`0${a}`:`${a}`,l=o<10?`0${o}`:`${o}`;return`${s}min ${l}s`}else{let s=n<10?`0${n}`:`${n}`,l=a<10?`0${a}`:`${a}`,c=o<10?`0${o}`:`${o}`;return`${s}:${l}:${c}`}}isFirstElement(r){return r===0}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Tn),xe(sn),xe(ys),xe(Mf),xe(vr),xe(Kn),xe(Un))},e.\u0275cmp=St({type:e,selectors:[["app-indicadores"]],decls:219,vars:21,consts:[[1,"row"],[1,"col-md-3"],[1,"col-md-12"],[1,"card","altura-minima2","p-3","mb-3"],[1,"pl-2","pt-1","align-items-center"],[1,"d-flex","align-items-center"],[1,"card-title","m-b-0","mr-2"],[3,"pieChartDataValues","pieChartDataNames"],[1,"card","altura-minima3","p-3"],[1,"pl-2","align-items-center"],[1,"card-title","m-b-1","mr-2"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","bg-white"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[2,"font-size","32px","padding-left","10px"],[1,"col-md-6"],[1,"card","p-3","altura-minima"],[1,"col-md-7"],[1,"col-md-5","d-flex","justify-content-end","pr-4"],["id","opciones_accesibilidad",1,"d-flex","align-items-center",2,"font-size","12px","color","#454545"],[1,"toggle-container"],["type","radio","id","option1","name","toggle","value","D",1,"toggle-input",3,"change"],["for","option1",1,"toggle-label"],["type","radio","id","option2","name","toggle","value","S",1,"toggle-input",3,"change"],["for","option2",1,"toggle-label"],["type","radio","id","option3","name","toggle","value","M","checked","",1,"toggle-input",3,"change"],["for","option3",1,"toggle-label"],["type","radio","id","option4","name","toggle","value","A",1,"toggle-input",3,"change"],["for","option4",1,"toggle-label"],[1,"col-md-1","d-flex","align-items-center","justify-content-center","pl-4"],[1,"btn","btn-link",3,"click"],[1,"mdi","mdi-chevron-left"],[1,"col-md-10"],[3,"barChartDataValues","barChartDataNames","barChartTitle"],[1,"col-md-1","d-flex","align-items-center","justify-content-center","pr-4"],[1,"btn","btn-link","btn-bg-danger",3,"click"],[1,"mdi","mdi-chevron-right"],[3,"pieChartDataValues2","pieChartDataNames2"],[1,"d-flex","align-items-center","p-2","pb-3"],[1,"col-md-12","pb-2"],[1,"estadistica-container"],[1,"info-general"],[1,"estadistica-item"],[1,"text-muted"],[1,"pl-2","d-flex","align-items-center",2,"padding-bottom","10px"],[1,"card-title","m-b-1"],[1,"table-responsive"],[1,"table","p-2"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngClass"],[2,"max-width","18ch","text-overflow","ellipsis","white-space","nowrap","overflow","hidden"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",0)(7,"div",2)(8,"div",5)(9,"h4",6),Q(10,"Proporci\xF3n Adultos/Ni\xF1os"),O()()()()(),ce(11,"app-pie-chart",7),O(),L(12,"div",8)(13,"div",9)(14,"div",5)(15,"h4",10),Q(16),O(),L(17,"div",11),ce(18,"button",12),L(19,"div",13)(20,"a",14),ye("click",function(){return a.updateDesplegable(1,"Uso motor gr\xE1fico")}),Q(21,"Uso motor gr\xE1fico"),O(),L(22,"a",14),ye("click",function(){return a.updateDesplegable(1,"Uso reproductor de audio")}),Q(23,"Uso reproductor de audio"),O(),L(24,"a",14),ye("click",function(){return a.updateDesplegable(1,"Tiempo medio por sesi\xF3n")}),Q(25,"Tiempo medio por sesi\xF3n"),O(),L(26,"a",14),ye("click",function(){return a.updateDesplegable(1,"Juegos finalizados")}),Q(27,"Juegos finalizados"),O(),L(28,"a",14),ye("click",function(){return a.updateDesplegable(1,"Usuarios totales")}),Q(29,"Usuarios totales"),O(),L(30,"a",14),ye("click",function(){return a.updateDesplegable(1,"Tiempo medio jugando")}),Q(31,"Tiempo medio jugando"),O()()()()(),L(32,"div",15),Q(33),O()()()()(),L(34,"div",16)(35,"div",17)(36,"div",4)(37,"div",0)(38,"div",18)(39,"div",5)(40,"h4",6),Q(41,"Escaneos"),O()()(),L(42,"div",19)(43,"div",20)(44,"div",21)(45,"input",22),ye("change",function(s){return a.onToggleChange(s)}),O(),L(46,"label",23)(47,"span"),Q(48,"D"),O()()(),L(49,"div",21)(50,"input",24),ye("change",function(s){return a.onToggleChange(s)}),O(),L(51,"label",25)(52,"span"),Q(53,"S"),O()()(),L(54,"div",21)(55,"input",26),ye("change",function(s){return a.onToggleChange(s)}),O(),L(56,"label",27)(57,"span"),Q(58,"M"),O()()(),L(59,"div",21)(60,"input",28),ye("change",function(s){return a.onToggleChange(s)}),O(),L(61,"label",29)(62,"span"),Q(63,"A"),O()()()()()()(),L(64,"div",0)(65,"div",30)(66,"button",31),ye("click",function(){return a.paginacion(0)}),ce(67,"i",32),O()(),L(68,"div",33),ce(69,"app-bar-chart",34),O(),L(70,"div",35)(71,"button",36),ye("click",function(){return a.paginacion(1)}),ce(72,"i",37),O()()()()(),L(73,"div",1)(74,"div",0)(75,"div",2)(76,"div",3)(77,"div",4)(78,"div",0)(79,"div",2)(80,"div",5)(81,"h4",6),Q(82,"Proporci\xF3n Uso por Idiomas "),O()()()()(),ce(83,"app-pie-chart2",38),O(),L(84,"div",8)(85,"div",9)(86,"div",5)(87,"h4",10),Q(88),O(),L(89,"div",11),ce(90,"button",12),L(91,"div",13)(92,"a",14),ye("click",function(){return a.updateDesplegable(2,"Uso motor gr\xE1fico")}),Q(93,"Uso motor gr\xE1fico"),O(),L(94,"a",14),ye("click",function(){return a.updateDesplegable(2,"Uso reproductor de audio")}),Q(95,"Uso reproductor de audio"),O(),L(96,"a",14),ye("click",function(){return a.updateDesplegable(2,"Tiempo medio por sesi\xF3n")}),Q(97,"Tiempo medio por sesi\xF3n"),O(),L(98,"a",14),ye("click",function(){return a.updateDesplegable(2,"Juegos finalizados")}),Q(99,"Juegos finalizados"),O(),L(100,"a",14),ye("click",function(){return a.updateDesplegable(2,"Usuarios totales")}),Q(101,"Usuarios totales"),O(),L(102,"a",14),ye("click",function(){return a.updateDesplegable(2,"Tiempo medio jugando")}),Q(103,"Tiempo medio jugando"),O()()()()(),L(104,"div",15),Q(105),O()()()()()(),ce(106,"br"),L(107,"div",0)(108,"div",1)(109,"div",17)(110,"div",39)(111,"h4",10),Q(112,"Datos de inter\xE9s"),O()(),L(113,"div",0)(114,"div",40)(115,"div",41)(116,"div",42)(117,"div",43)(118,"h4"),Q(119),O(),L(120,"span",44),Q(121,"Piezas en la colecci\xF3n"),O()()(),L(122,"div",42)(123,"div",43)(124,"h4"),Q(125),O(),L(126,"span",44),Q(127,"Escaneos de piezas"),O()()(),L(128,"div",42)(129,"div",43)(130,"h4"),Q(131),O(),L(132,"span",44),Q(133,"Partidas en modo Alcudio"),O()()(),L(134,"div",42)(135,"div",43)(136,"h4"),Q(137),O(),L(138,"span",44),Q(139,"Usuarios \xFAnicos"),O()()()()()()()(),L(140,"div",1)(141,"div",17)(142,"div",45)(143,"h4",46),Q(144),O(),L(145,"div",11),ce(146,"button",12),L(147,"div",13)(148,"a",14),ye("click",function(){return a.updateLista(1,"Piezas m\xE1s escaneadas")}),Q(149,"Piezas m\xE1s escaneadas"),O(),L(150,"a",14),ye("click",function(){return a.updateLista(1,"Exposiciones con m\xE1s escaneos")}),Q(151,"Exposiciones con m\xE1s escaneos"),O(),L(152,"a",14),ye("click",function(){return a.updateLista(1,"Salas con m\xE1s escaneos")}),Q(153,"Salas con m\xE1s escaneos"),O(),L(154,"a",14),ye("click",function(){return a.updateLista(1,"Juegos m\xE1s jugados")}),Q(155,"Juegos m\xE1s jugados"),O()()()(),L(156,"div",47)(157,"table",48)(158,"thead")(159,"tr")(160,"th",49),Q(161,"Nombre"),O(),L(162,"th",49),Q(163,"N\xBA Total"),O()()(),L(164,"tbody"),Dt(165,gke,6,5,"ng-container",50),O()()()()(),L(166,"div",1)(167,"div",17)(168,"div",45)(169,"h4",46),Q(170),O(),L(171,"div",11),ce(172,"button",12),L(173,"div",13)(174,"a",14),ye("click",function(){return a.updateLista(2,"Piezas m\xE1s escaneadas")}),Q(175,"Piezas m\xE1s escaneadas"),O(),L(176,"a",14),ye("click",function(){return a.updateLista(2,"Exposiciones con m\xE1s escaneos")}),Q(177,"Exposiciones con m\xE1s escaneos"),O(),L(178,"a",14),ye("click",function(){return a.updateLista(2,"Salas con m\xE1s escaneos")}),Q(179,"Salas con m\xE1s escaneos"),O(),L(180,"a",14),ye("click",function(){return a.updateLista(2,"Juegos m\xE1s jugados")}),Q(181,"Juegos m\xE1s jugados"),O()()()(),L(182,"div",47)(183,"table",48)(184,"thead")(185,"tr")(186,"th",49),Q(187,"Nombre"),O(),L(188,"th",49),Q(189,"N\xBA Total"),O()()(),L(190,"tbody"),Dt(191,vke,6,5,"ng-container",50),O()()()()(),L(192,"div",1)(193,"div",17)(194,"div",45)(195,"h4",46),Q(196),O(),L(197,"div",11),ce(198,"button",12),L(199,"div",13)(200,"a",14),ye("click",function(){return a.updateLista(3,"Piezas m\xE1s escaneadas")}),Q(201,"Piezas m\xE1s escaneadas"),O(),L(202,"a",14),ye("click",function(){return a.updateLista(3,"Exposiciones con m\xE1s escaneos")}),Q(203,"Exposiciones con m\xE1s escaneos"),O(),L(204,"a",14),ye("click",function(){return a.updateLista(3,"Salas con m\xE1s escaneos")}),Q(205,"Salas con m\xE1s escaneos"),O(),L(206,"a",14),ye("click",function(){return a.updateLista(3,"Juegos m\xE1s jugados")}),Q(207,"Juegos m\xE1s jugados"),O()()()(),L(208,"div",47)(209,"table",48)(210,"thead")(211,"tr")(212,"th",49),Q(213,"Nombre"),O(),L(214,"th",49),Q(215,"N\xBA Total"),O()()(),L(216,"tbody"),Dt(217,yke,6,5,"ng-container",50),O()()()()()(),ce(218,"br")),n&2&&(ie(11),Le("pieChartDataValues",a.pieChartDataValues)("pieChartDataNames",a.pieChartDataNames),ie(5),We(a.opcionSeleccionada1),ie(17),_n(" ",a.valorOpcionSeleccionada1," "),ie(36),Le("barChartDataValues",a.barChartDataValues)("barChartDataNames",a.barChartDataNames)("barChartTitle",a.barChartTitle),ie(14),Le("pieChartDataValues2",a.pieChartDataValues2)("pieChartDataNames2",a.pieChartDataNames2),ie(5),We(a.opcionSeleccionada2),ie(17),_n(" ",a.valorOpcionSeleccionada2," "),ie(14),We(a.totalPiezas),ie(6),We(a.totalEscaneos),ie(6),We(a.totalPartidasAlcudio),ie(6),We(a.totalUsuarios),ie(7),We(a.listaSeleccionada1),ie(21),Le("ngForOf",a.valorlistaSeleccionada1),ie(5),We(a.listaSeleccionada2),ie(21),Le("ngForOf",a.valorlistaSeleccionada2),ie(5),We(a.listaSeleccionada3),ie(21),Le("ngForOf",a.valorlistaSeleccionada3))},dependencies:[gs,ia,Ov,gse,Fv],styles:[".card[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.expo-img[_ngcontent-%COMP%]{max-width:9vh;max-height:9vh}.info-general[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-left:10px;margin-bottom:10px}.info-general[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.estadisticas[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:left;padding:10px}.estadisticas[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(span, h3)[_ngcontent-%COMP%]{color:#fff}.estadisticas[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0}.estadisticas[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:20px}.estadisticas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;padding-right:10px;width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.imagen-qr[_ngcontent-%COMP%]{aspect-ratio:1}.altura-minima[_ngcontent-%COMP%]{height:52vh}.altura-minima2[_ngcontent-%COMP%]{height:calc((52vh / 1.5) - 5.5px)}.altura-minima3[_ngcontent-%COMP%]{height:calc((52vh / 3) - 10.66px)}.page-breadcrumb[_ngcontent-%COMP%]{display:none}.mdi[_ngcontent-%COMP%]{text-shadow:1px 1px 2px rgba(0,0,0,.5)}.btn-link[_ngcontent-%COMP%]{font-size:25px;text-shadow:none}.toggle-container[_ngcontent-%COMP%]{display:flex}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer;padding:5px 10px;border:1px solid #ccc}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:#454545;color:#fff;padding-left:15px;padding-right:15px}.primera-fila[_ngcontent-%COMP%]{font-weight:700}.estadistica-item[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px;border:1px solid #ddd;border-radius:5px;background-color:#f9f9f9;text-align:center}"]});let i=e;return i})();var yse=(i,e)=>e.id,xke=(i,e)=>e.nombre;function _ke(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar un nombre"),O())}function wke(i,e){if(i&1&&(L(0,"option",41),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.id),ie(1),We(t.nombre)}}function bke(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar una exposici\xF3n"),O())}function Ske(i,e){if(i&1&&(L(0,"option",41),Q(1),O()),i&2){let t=e.$implicit;Le("value",t.nombre),ie(1),We(t.nombre)}}function Cke(i,e){i&1&&(L(0,"div",40),Q(1,"Se debe especificar un estado"),O())}function Eke(i,e){if(i&1){let t=Li();L(0,"tr")(1,"td"),Q(2),O(),L(3,"td"),Q(4),O(),L(5,"td"),Q(6),O(),L(7,"td",42),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.removePieza(a.id))}),ce(8,"i",43),O()()}if(i&2){let t=e.$implicit;ie(2),We(t.nombre),ie(2),We(t.sala_nombre),ie(2),We(t.exposicion_nombre)}}var xse=(()=>{let e=class e{constructor(r,n,a,o,s,l,c){this.juegoService=r,this.router=n,this.breadcrumbService=a,this.exposicionService=o,this.estadoService=s,this.route=l,this.dateService=c,this.formularioEnviado=!1,this.exposiciones=[],this.estados=[],this.piezaSeleccionada=null,this.editarJuego=new ra({nombre:new wt("",vs.required),descripcion:new wt(""),fecha:new wt(""),exposicion:new wt("0",this.noZeroValidator()),estado:new wt("0",this.noZeroValidator())}),this.id="",this.piezas=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"",console.log(this.id),this.juegoService.getOne(this.id).subscribe(r=>{console.log(r),this.editarJuego.setValue({nombre:r.nombre||"",descripcion:r.descripcion||"",fecha:this.dateService.transformarFecha(new Date(r.fecha||"")||new Date,"html"),exposicion:r.exposicion_id||"0",estado:r.estado_id||"0"}),console.log(r.Pregunta),r.Pregunta.forEach(n=>{console.log(n.pieza.informacion);let a=n.pieza.informacion.findIndex(o=>(console.log(o.idioma.id),o.idioma.id==="es"));console.log("aa"),a!==-1&&this.piezas.push({id:n.pieza.id,estado_id:n.pieza.estado_id,exposicion_id:n.pieza.sala?.exposicion_id||"",exposicion_nombre:n.pieza.sala?.exposicion?.nombre||"",imagen:n.pieza.imagen||"",nombre:n.pieza.informacion[a].nombre||"",sala_id:n.pieza.sala?.id||"",sala_nombre:n.pieza.sala?.nombre||"",texto_completo:n.pieza.informacion[a].texto_completo||"",texto_facil:n.pieza.informacion[a].texto_facil||""})})}),this.exposicionService.getAll().subscribe(r=>{this.exposiciones=r}),this.estadoService.getAllEstados().subscribe(r=>{this.estados=r}),this.breadcrumbService.updateBreadcrumb("Editar juego",["Home","Juego","Editar"])}get nombre(){return this.editarJuego.controls.nombre}get exposicion(){return this.editarJuego.controls.exposicion}get estado(){return this.editarJuego.controls.estado}handlerSubmit(r){if(r.preventDefault(),this.formularioEnviado=!0,!this.editarJuego.valid)return;let n={nombre:this.editarJuego.value.nombre||"",estado_id:this.editarJuego.value.estado||"",exposicion_id:this.editarJuego.value.exposicion||"",fecha:new Date(this.editarJuego.value.fecha||""),Pregunta:[],piezas:this.piezas};this.editarJuego.value.descripcion&&(n.descripcion=this.editarJuego.value.descripcion),console.log(n),this.juegoService.editOne(this.id,n).subscribe(a=>{console.log(a)}),this.router.navigate(["/administrador/juegos"])}noZeroValidator(){return r=>{let n=r.value;return n==="0"?{noZero:{value:n}}:null}}navigateToJuego(r){this.router.navigate(["/juego",r])}getPiezaSeleccionada(r){this.piezaSeleccionada=r}addPieza(){this.piezaSeleccionada&&(this.piezas.push(this.piezaSeleccionada),this.piezaSeleccionada=null,document.getElementById("closeModal")?.click())}removePieza(r){let n=this.piezas.findIndex(a=>a.id===r);this.piezas.splice(n,1)}volver(){this.router.navigate(["/administrador/juegos"])}};e.\u0275fac=function(n){return new(n||e)(xe(ys),xe(bi),xe(vr),xe(sn),xe(os),xe(Ir),xe(Bl))},e.\u0275cmp=St({type:e,selectors:[["app-editar-juegos"]],viewQuery:function(n,a){if(n&1&&gu(Ow,5),n&2){let o;vc(o=yc())&&(a.piezaSelector=o.first)}},standalone:!0,features:[gr],decls:76,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"w-100","row",3,"formGroup","submit"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-5"],[1,"card"],[1,"card-body"],[1,"form-group","row"],["for","fname",1,"col-sm-3","control-label","col-form-label"],[1,"col"],["type","text","id","fname","formControlName","nombre",1,"form-control"],["class","text-danger"],["for","lname",1,"col-sm-3","control-label","col-form-label"],["type","text","id","lname","formControlName","descripcion",1,"form-control"],["type","date","id","lname","formControlName","fecha",1,"form-control"],[1,"col-sm-3",2,"font-size","15px"],["formControlName","exposicion",1,"form-select","form-control"],["value","0","disabled",""],["formControlName","estado",1,"form-select","form-control"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-7"],[1,"row","align-items-center","mx-1","my-2"],[1,"text-h5","m-0"],["type","button","data-toggle","modal","data-target","#listaPiezasModal",1,"btn","btn-primary","ml-auto",3,"click"],[1,"column"],[1,"table","table-sm"],[1,"boton-arriba2"],["type","submit",1,"btn","btn-success","btn-md",2,"border-radius","1.5rem"],[1,"boton-arriba"],[1,"col","text-right"],["type","button",1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],["id","listaPiezasModal","tabindex","-1","aria-labelledby","listaPiezasModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close","id","closeModal",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"piezaSeleccionadaInp","piezasAnadidas","piezaSeleccionada"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[3,"value"],[3,"click"],[1,"mdi","mdi-delete"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"form",2),ye("submit",function(s){return a.handlerSubmit(s)}),L(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),Q(8,"Nombre:"),O(),L(9,"div",8),ce(10,"input",9),Dt(11,_ke,2,0,"div",10),O()(),L(12,"div",6)(13,"label",11),Q(14,"Descripcion:"),O(),L(15,"div",8),ce(16,"input",12),O()(),L(17,"div",6)(18,"label",11),Q(19,"Fecha:"),O(),L(20,"div",8),ce(21,"input",13),O()(),L(22,"div",6)(23,"label",14),Q(24,"Exposici\xF3n:"),O(),L(25,"div",8)(26,"select",15)(27,"option",16),Q(28,"Elegir una exposicion"),O(),Lr(29,wke,2,2,"option",41,yse),O(),Dt(31,bke,2,0,"div",10),O()(),L(32,"div",6)(33,"label",14),Q(34,"Estado:"),O(),L(35,"div",8)(36,"select",17)(37,"option",16),Q(38,"Elegir un estado"),O(),Lr(39,Ske,2,2,"option",41,xke),O(),Dt(41,Cke,2,0,"div",10),O()()()()(),L(42,"div",18)(43,"div",4)(44,"div",5)(45,"div",19)(46,"h5",20),Q(47,"Piezas del juego"),O(),L(48,"button",21),ye("click",function(){return a.piezaSelector.filtrarPiezas()}),Q(49,"A\xF1adir pieza"),O()(),L(50,"div",22)(51,"table",23),Lr(52,Eke,9,3,"tr",null,yse),O()()()()(),L(54,"div",24)(55,"button",25)(56,"span"),Q(57,"EDITAR"),O()()(),L(58,"div",26)(59,"div",27)(60,"button",28),ye("click",function(){return a.volver()}),Q(61,"Volver"),O()()()()()(),L(62,"div",29)(63,"div",30)(64,"div",31)(65,"div",32)(66,"h5",33),Q(67,"Listado de piezas"),O(),L(68,"button",34)(69,"span",35),Q(70,"\xD7"),O()()(),L(71,"div",36)(72,"app-piezas-selector",37),ye("piezaSeleccionada",function(s){return a.getPiezaSeleccionada(s)}),O()(),L(73,"div",38)(74,"button",39),ye("click",function(){return a.addPieza()}),Q(75,"A\xF1adir pieza"),O()()()()()),n&2&&(ie(2),Le("formGroup",a.editarJuego),ie(9),Na(11,a.formularioEnviado&&a.nombre.invalid?11:-1),ie(18),Or(a.exposiciones),ie(2),Na(31,a.formularioEnviado&&a.exposicion.invalid?31:-1),ie(8),Or(a.estados),ie(2),Na(41,a.formularioEnviado&&a.estado.invalid?41:-1),ie(11),Or(a.piezas),ie(20),Le("piezaSeleccionadaInp",a.piezaSeleccionada)("piezasAnadidas",a.piezas),ie(2),Le("disabled",!a.piezaSeleccionada))},dependencies:[lr,Wr,jn,na,aa,En,wa,Gn,Wn,xo,_o,Ow]});let i=e;return i})();var Tke=[{path:"administrador",component:FS,children:[{path:"",component:Fre},{path:"perfil",component:dse},{path:"indicadores",component:vse},{path:"usuarios",component:Nre},{path:"salas",component:Ure},{path:"salas/editar/:id",component:Gne},{path:"salas/crear",component:Wne},{path:"salas/ver/:id",component:cse},{path:"piezas",component:Qne},{path:"piezas/editar/:id",component:hse},{path:"piezas/crear",component:ose},{path:"exposiciones",component:sse},{path:"exposiciones/ver/:id",component:use},{path:"exposiciones/crear",component:lse},{path:"exposiciones/editar/:id",component:K5},{path:"juegos",component:mse},{path:"juego/:id",component:Ase},{path:"juegos/crear",component:pse},{path:"juegos/editar/:id",component:xse},{path:"exposicion/:id/editar",component:K5}]}],_se=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Ia.forChild(Tke),Ia]});let i=e;return i})();function Mke(i,e){i&1&&ce(0,"span",21)}function Ike(i,e){i&1&&(L(0,"a",22),ce(1,"i",23),O())}function Bke(i,e){if(i&1&&(L(0,"div",24)(1,"h4"),Q(2),O(),L(3,"p"),Q(4),O(),L(5,"p"),Q(6,"N\xFAmero de piezas a encontrar: "),L(7,"span")(8,"b"),Q(9),O()()(),L(10,"h5"),Q(11,"\xBFC\xF3mo funciona?"),O(),L(12,"ul")(13,"li"),Q(14,"Puedes chatear con alcudio cuanto quieras, si tienes dudas consulta con Alcudio."),O(),L(15,"li"),Q(16,"Tu objetivos es encontrar todas las piezas del juego."),O(),L(17,"li"),Q(18,"Para ello escanea la pieza que te indica Alcudio."),O()(),L(19,"h5"),Q(20,"Botones"),O(),L(21,"table")(22,"tr")(23,"td")(24,"div",25),ce(25,"i",26),O()(),L(26,"td"),Q(27,"Pulsa este bot\xF3n cuando encuentres la pieza para escanear su c\xF3digo QR."),O()(),L(28,"tr")(29,"td")(30,"span",27),ce(31,"i",28),O()(),L(32,"td"),Q(33,"Pulsa este bot\xF3n para enviarle un mensaje a Alcudio."),O()()()()),i&2){let t=it();ie(2),We(t.juego==null?null:t.juego.nombre),ie(2),We(t.juego==null?null:t.juego.descripcion),ie(5),We(t.juego==null||t.juego.Pregunta==null?null:t.juego.Pregunta.length)}}function Dke(i,e){i&1&&(L(0,"div",24)(1,"p"),ce(2,"i",29),Q(3," El logotipo representa la marca principal."),O(),L(4,"p"),ce(5,"i",29),Q(6," MUA es el nombre de la aplicaci\xF3n."),O(),L(7,"p"),ce(8,"i",29),Q(9," El men\xFA de idiomas te permite seleccionar tu idioma preferido."),O(),L(10,"p"),ce(11,"i",29),Q(12," El men\xFA de accesibilidad proporciona opciones de accesibilidad."),O(),L(13,"p"),ce(14,"i",29),Q(15," Haz clic en el icono de informaci\xF3n para obtener detalles adicionales."),O()())}var wse=(()=>{let e=class e{constructor(r,n,a){this.router=r,this.route=n,this.juegoService=a,this.currentLanguage="es.jpg",this.isInAlcudio=!1,this.isInAlcudioFin=!1,this.juego=null}ngOnInit(){if(this.router.url.includes("alcudio")){this.isInAlcudio=!0;let s=this.router.url.split("/").pop()||"";this.juegoService.getOne(s).subscribe(l=>{this.juego=l});var r=document.getElementById("idioma");r&&(r.style.display="none")}else{this.isInAlcudio=!1;var n=window.location.href,a=n.split("/"),o=a.pop();this.currentLanguage=o+".jpg"}}changeLanguage(r){let a=window.location.href.replace(/\/[a-z]{2,3}$/,"/"+r);window.location.href=a}};e.\u0275fac=function(n){return new(n||e)(xe(bi),xe(Ir),xe(ys))},e.\u0275cmp=St({type:e,selectors:[["app-navbar"]],decls:38,vars:3,consts:[[2,"background-color","#F2F2F2"],[1,"wrapper"],[1,"logo-text"],["src","../../assets/images/logos/logo_arte.png","width","70px","alt","homepage",1,"light-logo"],[1,"d-flex","align-items-center"],["id","idioma",1,"dropdown"],["href","#","id","navbarDropdownLanguage","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle",2,"padding","6px"],["id","selectedLanguage","alt","user","width","27",2,"padding-bottom","2px",3,"src"],["aria-labelledby","navbarDropdownLanguage",1,"dropdown-menu","dropdown-menu-right",2,"padding-top","6px"],[1,"dropdown-item",2,"font-size","13px",3,"click"],["class","mdi mdi-download","style","margin-right: 6px; font-size: 24px; color: white;"],["id","informacionModal","tabindex","-1","role","dialog","aria-labelledby","informacionModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","informacionModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",2,"color","white"],[1,"mdi","mdi-download",2,"margin-right","6px","font-size","24px","color","white"],["href","#informacionModal","data-toggle","modal"],[1,"mdi","mdi-information-outline",2,"margin-right","6px","font-size","24px","color","white"],[1,"modal-body"],[1,"btn","btn-qr"],[1,"mdi","mdi-qrcode-scan"],[1,"btn","btn-enviar"],[1,"fas","fa-paper-plane"],[1,"mdi","mdi-arrow-right-bold"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"header")(2,"div",1)(3,"span",2),ce(4,"img",3),O(),L(5,"span",2)(6,"h5"),Q(7," \xA0 MUA"),O()(),L(8,"nav",4)(9,"div",5)(10,"a",6)(11,"span"),ce(12,"img",7),Q(13," \xA0 "),O()(),L(14,"div",8)(15,"a",9),ye("click",function(){return a.changeLanguage("es")}),Q(16,"CASTELLANO"),O(),L(17,"a",9),ye("click",function(){return a.changeLanguage("va")}),Q(18,"VALENCI\xC0"),O(),L(19,"a",9),ye("click",function(){return a.changeLanguage("en")}),Q(20,"ENGLISH"),O()()(),L(21,"div"),Dt(22,Mke,1,0,"span",10)(23,Ike,2,0),O(),L(24,"div",11)(25,"div",12)(26,"div",13)(27,"div",14)(28,"h5",15),Q(29,"Informaci\xF3n Adicional"),O(),L(30,"button",16)(31,"span",17),Q(32,"\xD7"),O()()(),Dt(33,Bke,34,3,"div",18)(34,Dke,16,0),L(35,"div",19)(36,"button",20),Q(37,"Cerrar"),O()()()()()()()()()),n&2&&(ie(12),Vb("src","../../assets/images/paises/",a.currentLanguage,"",wr),ie(10),Na(22,a.isInAlcudioFin?22:23),ie(11),Na(33,a.isInAlcudio?33:34))},styles:['@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";header[_ngcontent-%COMP%]{padding:16px 22px;background-color:#1f262d;max-width:600px;margin:0 auto}header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:20px}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Fira Sans,sans-serif;line-height:1.6;color:#333}a[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font:inherit;color:inherit;margin:-2px}a[_ngcontent-%COMP%]{color:gray;text-decoration:none}.wrapper[_ngcontent-%COMP%]{width:100%;max-width:600px;padding:0;margin:0 auto}.logo-text[_ngcontent-%COMP%]{color:#fff}.btn-enviar[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;font-size:18px;color:#fff;background-color:#eb5e28;border:1px solid rgb(153,43,0)}.btn-qr[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;font-size:18px;color:#fff;background-color:#403d39;border:1px solid rgb(0,0,0)}td[_ngcontent-%COMP%]{padding:6px}']});let i=e;return i})();var q5=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-app-layout"]],decls:4,vars:0,consts:[[1,"contenedor-principal"]],template:function(n,a){n&1&&(ce(0,"app-navbar"),L(1,"main")(2,"div",0),ce(3,"router-outlet"),O()())},dependencies:[rd,wse],styles:['@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.app-navbar[_ngcontent-%COMP%]{max-width:600px}body[_ngcontent-%COMP%]{margin:0;font-family:Fira Sans,sans-serif;line-height:1.6;color:#333}a[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font:inherit;color:inherit}a[_ngcontent-%COMP%]{color:#e91e63;text-decoration:none}.wrapper[_ngcontent-%COMP%]{width:100%;max-width:600px;padding:0 30px;margin:0 auto}.contenedor-principal[_ngcontent-%COMP%]{background-color:#f2f2f2}']});let i=e;return i})();var Zu=Object.create(null);Zu.open="0";Zu.close="1";Zu.ping="2";Zu.pong="3";Zu.message="4";Zu.upgrade="5";Zu.noop="6";var Fw=Object.create(null);Object.keys(Zu).forEach(i=>{Fw[Zu[i]]=i});var Nw={type:"error",data:"parser error"};var Cse=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ese=typeof ArrayBuffer=="function",Tse=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,Uw=({type:i,data:e},t,r)=>Cse&&e instanceof Blob?t?r(e):bse(e,r):Ese&&(e instanceof ArrayBuffer||Tse(e))?t?r(e):bse(new Blob([e]),r):r(Zu[i]+(e||"")),bse=(i,e)=>{let t=new FileReader;return t.onload=function(){let r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(i)};function Sse(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var Z5;function Mse(i,e){if(Cse&&i.data instanceof Blob)return i.data.arrayBuffer().then(Sse).then(e);if(Ese&&(i.data instanceof ArrayBuffer||Tse(i.data)))return e(Sse(i.data));Uw(i,!1,t=>{Z5||(Z5=new TextEncoder),e(Z5.encode(t))})}var Ise="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Ise.length;i++)kw[Ise.charCodeAt(i)]=i;var Bse=i=>{let e=i.length*.75,t=i.length,r,n=0,a,o,s,l;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);let c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<t;r+=4)a=kw[i.charCodeAt(r)],o=kw[i.charCodeAt(r+1)],s=kw[i.charCodeAt(r+2)],l=kw[i.charCodeAt(r+3)],u[n++]=a<<2|o>>4,u[n++]=(o&15)<<4|s>>2,u[n++]=(s&3)<<6|l&63;return c};var Pke=typeof ArrayBuffer=="function",zw=(i,e)=>{if(typeof i!="string")return{type:"message",data:Dse(i,e)};let t=i.charAt(0);return t==="b"?{type:"message",data:Lke(i.substring(1),e)}:Fw[t]?i.length>1?{type:Fw[t],data:i.substring(1)}:{type:Fw[t]}:Nw},Lke=(i,e)=>{if(Pke){let t=Bse(i);return Dse(t,e)}else return{base64:!0,data:i}},Dse=(i,e)=>{switch(e){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}};var Rse=String.fromCharCode(30),Pse=(i,e)=>{let t=i.length,r=new Array(t),n=0;i.forEach((a,o)=>{Uw(a,!1,s=>{r[o]=s,++n===t&&e(r.join(Rse))})})},Lse=(i,e)=>{let t=i.split(Rse),r=[];for(let n=0;n<t.length;n++){let a=zw(t[n],e);if(r.push(a),a.type==="error")break}return r};function Ose(){return new TransformStream({transform(i,e){Mse(i,t=>{let r=t.length,n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);let a=new DataView(n.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{n=new Uint8Array(9);let a=new DataView(n.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}i.data&&typeof i.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}var J5;function VI(i){return i.reduce((e,t)=>e+t.length,0)}function HI(i,e){if(i[0].length===e)return i.shift();let t=new Uint8Array(e),r=0;for(let n=0;n<e;n++)t[n]=i[0][r++],r===i[0].length&&(i.shift(),r=0);return i.length&&r<i[0].length&&(i[0]=i[0].slice(r)),t}function Fse(i,e){J5||(J5=new TextDecoder);let t=[],r=0,n=-1,a=!1;return new TransformStream({transform(o,s){for(t.push(o);;){if(r===0){if(VI(t)<1)break;let l=HI(t,1);a=(l[0]&128)===128,n=l[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(VI(t)<2)break;let l=HI(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(VI(t)<8)break;let l=HI(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,53-32)-1){s.enqueue(Nw);break}n=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(VI(t)<n)break;let l=HI(t,n);s.enqueue(zw(a?l:J5.decode(l),e)),r=0}if(n===0||n>i){s.enqueue(Nw);break}}}})}var $5=4;function ca(i){if(i)return Oke(i)}function Oke(i){for(var e in ca.prototype)i[e]=ca.prototype[e];return i}ca.prototype.on=ca.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};ca.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};ca.prototype.off=ca.prototype.removeListener=ca.prototype.removeAllListeners=ca.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var r,n=0;n<t.length;n++)if(r=t[n],r===e||r.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+i],this};ca.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,n=t.length;r<n;++r)t[r].apply(this,e)}return this};ca.prototype.emitReserved=ca.prototype.emit;ca.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};ca.prototype.hasListeners=function(i){return!!this.listeners(i).length};var Ds=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function QI(i,...e){return e.reduce((t,r)=>(i.hasOwnProperty(r)&&(t[r]=i[r]),t),{})}var Fke=Ds.setTimeout,Nke=Ds.clearTimeout;function qd(i,e){e.useNativeTimers?(i.setTimeoutFn=Fke.bind(Ds),i.clearTimeoutFn=Nke.bind(Ds)):(i.setTimeoutFn=Ds.setTimeout.bind(Ds),i.clearTimeoutFn=Ds.clearTimeout.bind(Ds))}var Uke=1.33;function Nse(i){return typeof i=="string"?kke(i):Math.ceil((i.byteLength||i.size)*Uke)}function kke(i){let e=0,t=0;for(let r=0,n=i.length;r<n;r++)e=i.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function Use(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function kse(i){let e={},t=i.split("&");for(let r=0,n=t.length;r<n;r++){let a=t[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}var GI=class extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}},Zd=class extends ca{constructor(e){super(),this.writable=!1,qd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new GI(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=zw(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let t=Use(e);return t.length?"?"+t:""}};var Qse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ez=64,zke={},zse=0,WI=0,Vse;function Hse(i){let e="";do e=Qse[i%ez]+e,i=Math.floor(i/ez);while(i>0);return e}function jI(){let i=Hse(+new Date);return i!==Vse?(zse=0,Vse=i):i+"."+Hse(zse++)}for(;WI<ez;WI++)zke[Qse[WI]]=WI;var Gse=!1;try{Gse=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Wse=Gse;function tz(i){let e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wse))return new XMLHttpRequest}catch{}if(!e)try{return new Ds[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Vke(){}var Hke=function(){return new tz({xdomain:!1}).responseType!=null}(),XI=class extends Zd{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){let r=location.protocol==="https:",n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}let t=e&&e.forceBase64;this.supportsBinary=Hke&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Lse(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Pse(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=jI()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new KI(this.uri(),e)}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(n,a)=>{this.onError("xhr post error",n,a)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}},KI=(()=>{class i extends ca{constructor(t,r){super(),qd(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;let r=QI(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;let n=this.xhr=new tz(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this.opts.cookieJar)===null||a===void 0||a.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(a){this.setTimeoutFn(()=>{this.onError(a)},0);return}typeof document<"u"&&(this.index=i.requestsCount++,i.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Vke,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",jse);else if(typeof addEventListener=="function"){let i="onpagehide"in Ds?"pagehide":"unload";addEventListener(i,jse,!1)}}function jse(){for(let i in KI.requests)KI.requests.hasOwnProperty(i)&&KI.requests[i].abort()}var fg=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),Vw=Ds.WebSocket||Ds.MozWebSocket,YI=!0,Kse="arraybuffer";var Xse=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",qI=class extends Zd{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),t=this.opts.protocols,r=Xse?{}:QI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=YI&&!Xse?t?new Vw(e,t):new Vw(e):new Vw(e,t,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;Uw(r,this.supportsBinary,a=>{let o={};YI||(r.options&&(o.compress=r.options.compress),this.opts.perMessageDeflate&&(typeof a=="string"?Buffer.byteLength(a):a.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1));try{YI?this.ws.send(a):this.ws.send(a,o)}catch{}n&&fg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=jI()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!Vw}};var ZI=class extends Zd{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let t=Fse(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=Ose();n.readable.pipeTo(e.writable),this.writer=n.writable.getWriter();let a=()=>{r.read().then(({done:s,value:l})=>{s||(this.onPacket(l),a())}).catch(s=>{})};a();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;this.writer.write(r).then(()=>{n&&fg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}};var iz={websocket:qI,webtransport:ZI,polling:XI};var Qke=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gke=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function E1(i){if(i.length>2e3)throw"URI too long";let e=i,t=i.indexOf("["),r=i.indexOf("]");t!=-1&&r!=-1&&(i=i.substring(0,t)+i.substring(t,r).replace(/:/g,";")+i.substring(r,i.length));let n=Qke.exec(i||""),a={},o=14;for(;o--;)a[Gke[o]]=n[o]||"";return t!=-1&&r!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Wke(a,a.path),a.queryKey=jke(a,a.query),a}function Wke(i,e){let t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function jke(i,e){let t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,a){n&&(t[n]=a)}),t}var JI=(()=>{class i extends ca{constructor(t,r={}){super(),this.binaryType=Kse,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=E1(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=E1(r.host).host),qd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=kse(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){let r=Object.assign({},this.opts.query);r.EIO=$5,r.transport=t,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new iz[t](n)}open(){let t;if(this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;i.priorWebsocketSuccess=!1;let a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;i.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(h(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{let f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function o(){n||(n=!0,h(),r.close(),r=null)}let s=d=>{let f=new Error("probe error: "+d);f.transport=r.name,o(),this.emitReserved("upgradeError",f)};function l(){s("transport closed")}function c(){s("socket closed")}function u(d){r&&d.name!==r.name&&o()}let h=()=>{r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",a),r.once("error",s),r.once("close",l),this.once("close",c),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0,r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let a=this.writeBuffer[n].data;if(a&&(r+=Nse(a)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:t,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){let t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){i.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let r=[],n=0,a=t.length;for(;n<a;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}return i.protocol=$5,i})();var nRt=JI.protocol;function Yse(i,e="",t){let r=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),r=E1(i)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}var lz={};Db(lz,{Decoder:()=>oz,Encoder:()=>az,PacketType:()=>$r,protocol:()=>ele});var Kke=typeof ArrayBuffer=="function",Xke=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,qse=Object.prototype.toString,Yke=typeof Blob=="function"||typeof Blob<"u"&&qse.call(Blob)==="[object BlobConstructor]",qke=typeof File=="function"||typeof File<"u"&&qse.call(File)==="[object FileConstructor]";function Qw(i){return Kke&&(i instanceof ArrayBuffer||Xke(i))||Yke&&i instanceof Blob||qke&&i instanceof File}function Hw(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,r=i.length;t<r;t++)if(Hw(i[t]))return!0;return!1}if(Qw(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return Hw(i.toJSON(),!0);for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&Hw(i[t]))return!0;return!1}function Zse(i){let e=[],t=i.data,r=i;return r.data=rz(t,e),r.attachments=e.length,{packet:r,buffers:e}}function rz(i,e){if(!i)return i;if(Qw(i)){let t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){let t=new Array(i.length);for(let r=0;r<i.length;r++)t[r]=rz(i[r],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){let t={};for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=rz(i[r],e));return t}return i}function Jse(i,e){return i.data=nz(i.data,e),delete i.attachments,i}function nz(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=nz(i[t],e);else if(typeof i=="object")for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=nz(i[t],e));return i}var Zke=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ele=5,$r=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}($r||{}),az=class{constructor(e){this.replacer=e}encode(e){return(e.type===$r.EVENT||e.type===$r.ACK)&&Hw(e)?this.encodeAsBinary({type:e.type===$r.EVENT?$r.BINARY_EVENT:$r.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===$r.BINARY_EVENT||e.type===$r.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=Zse(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}};function $se(i){return Object.prototype.toString.call(i)==="[object Object]"}var oz=class i extends ca{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let r=t.type===$r.BINARY_EVENT;r||t.type===$r.BINARY_ACK?(t.type=r?$r.EVENT:$r.ACK,this.reconstructor=new sz(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Qw(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if($r[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===$r.BINARY_EVENT||r.type===$r.BINARY_ACK){let a=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);let o=e.substring(a,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){let a=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(a,t)}else r.nsp="/";let n=e.charAt(t+1);if(n!==""&&Number(n)==n){let a=t+1;for(;++t;){let o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){let a=this.tryParse(e.substr(t));if(i.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case $r.CONNECT:return $se(t);case $r.DISCONNECT:return t===void 0;case $r.CONNECT_ERROR:return typeof t=="string"||$se(t);case $r.EVENT:case $r.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Zke.indexOf(t[0])===-1);case $r.ACK:case $r.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},sz=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let t=Jse(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function uc(i,e,t){return i.on(e,t),function(){i.off(e,t)}}var Jke=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),T1=class extends ca{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[uc(e,"open",this.onopen.bind(this)),uc(e,"packet",this.onpacket.bind(this)),uc(e,"error",this.onerror.bind(this)),uc(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Jke.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let r={type:$r.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){let o=this.ids++,s=t.pop();this._registerAckCallback(o,s),r.id=o}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var r;let n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}let a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(a),t.apply(this,[null,...o])}}emitWithAck(e,...t){let r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,a)=>{t.push((o,s)=>r?o?a(o):n(s):n(o)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...a)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:$r.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case $r.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $r.EVENT:case $r.BINARY_EVENT:this.onevent(e);break;case $r.ACK:case $r.BINARY_ACK:this.onack(e);break;case $r.DISCONNECT:this.ondisconnect();break;case $r.CONNECT_ERROR:this.destroy();let r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){let t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,t.packet({type:$r.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$r.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let r of t)r.apply(this,e.data)}}};function pg(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}pg.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};pg.prototype.reset=function(){this.attempts=0};pg.prototype.setMin=function(i){this.ms=i};pg.prototype.setMax=function(i){this.max=i};pg.prototype.setJitter=function(i){this.jitter=i};var M1=class extends ca{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,qd(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new pg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||lz;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new JI(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=uc(t,"open",function(){r.onopen(),e&&e()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),e?e(s):this.maybeReconnectOnOpen()},o=uc(t,"error",a);if(this._timeout!==!1){let s=this._timeout,l=this.setTimeoutFn(()=>{n(),a(new Error("timeout")),t.close()},s);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(uc(e,"ping",this.onping.bind(this)),uc(e,"data",this.ondata.bind(this)),uc(e,"error",this.onerror.bind(this)),uc(e,"close",this.onclose.bind(this)),uc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){fg(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new T1(this,e,t),this.nsps[e]=r),r}_destroy(e){let t=Object.keys(this.nsps);for(let r of t)if(this.nsps[r].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var Gw={};function Ww(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};let t=Yse(i,e.path||"/socket.io"),r=t.source,n=t.id,a=t.path,o=Gw[n]&&a in Gw[n].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||o,l;return s?l=new M1(r,e):(Gw[n]||(Gw[n]=new M1(r,e)),l=Gw[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Ww,{Manager:M1,Socket:T1,io:Ww,connect:Ww});var di=function(i){return i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",i}(di||{}),tle=new Map([[di.QR_CODE,"QR_CODE"],[di.AZTEC,"AZTEC"],[di.CODABAR,"CODABAR"],[di.CODE_39,"CODE_39"],[di.CODE_93,"CODE_93"],[di.CODE_128,"CODE_128"],[di.DATA_MATRIX,"DATA_MATRIX"],[di.MAXICODE,"MAXICODE"],[di.ITF,"ITF"],[di.EAN_13,"EAN_13"],[di.EAN_8,"EAN_8"],[di.PDF_417,"PDF_417"],[di.RSS_14,"RSS_14"],[di.RSS_EXPANDED,"RSS_EXPANDED"],[di.UPC_A,"UPC_A"],[di.UPC_E,"UPC_E"],[di.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function ile(i){return Object.values(di).includes(i)}var Gh=function(i){return i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",i}(Gh||{}),Rl=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Gh.SCAN_TYPE_CAMERA,Gh.SCAN_TYPE_FILE],i}();var $I=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!tle.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,tle.get(e))},i}();var cz=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}();var rle=function(i){return i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",i}(rle||{}),eB=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:rle.UNKWOWN_ERROR}},i}();var tB=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function au(i){return typeof i>"u"||i===null}function nle(i,e,t){return i>t?t:i<e?e:i}var iA=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}();var ln=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}();var uz=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}();var hz=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(n),o=Object.keys(e),s=0,l=o;s<l.length;s++){var c=l[s];if(a.has(c))return t.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},i}();var Pn=Bg(ole());var dz=function(){function i(e,t,r){if(this.formatMap=new Map([[di.QR_CODE,Pn.BarcodeFormat.QR_CODE],[di.AZTEC,Pn.BarcodeFormat.AZTEC],[di.CODABAR,Pn.BarcodeFormat.CODABAR],[di.CODE_39,Pn.BarcodeFormat.CODE_39],[di.CODE_93,Pn.BarcodeFormat.CODE_93],[di.CODE_128,Pn.BarcodeFormat.CODE_128],[di.DATA_MATRIX,Pn.BarcodeFormat.DATA_MATRIX],[di.MAXICODE,Pn.BarcodeFormat.MAXICODE],[di.ITF,Pn.BarcodeFormat.ITF],[di.EAN_13,Pn.BarcodeFormat.EAN_13],[di.EAN_8,Pn.BarcodeFormat.EAN_8],[di.PDF_417,Pn.BarcodeFormat.PDF_417],[di.RSS_14,Pn.BarcodeFormat.RSS_14],[di.RSS_EXPANDED,Pn.BarcodeFormat.RSS_EXPANDED],[di.UPC_A,Pn.BarcodeFormat.UPC_A],[di.UPC_E,Pn.BarcodeFormat.UPC_E],[di.UPC_EAN_EXTENSION,Pn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Pn)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),a=new Map;a.set(Pn.DecodeHintType.POSSIBLE_FORMATS,n),a.set(Pn.DecodeHintType.TRY_HARDER,!1),this.hints=a}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(a){n(a)}})},i.prototype.decode=function(e){var t=new Pn.MultiFormatReader(this.verbose,this.hints),r=new Pn.HTMLCanvasElementLuminanceSource(e),n=new Pn.BinaryBitmap(new Pn.HybridBinarizer(r)),a=t.decode(n);return{text:a.text,format:$I.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var a=n[r];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}();var $ke=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},e5e=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},fz=function(){function i(e,t,r){if(this.formatMap=new Map([[di.QR_CODE,"qr_code"],[di.AZTEC,"aztec"],[di.CODABAR,"codabar"],[di.CODE_39,"code_39"],[di.CODE_93,"code_93"],[di.CODE_128,"code_128"],[di.DATA_MATRIX,"data_matrix"],[di.ITF,"itf"],[di.EAN_13,"ean_13"],[di.EAN_8,"ean_8"],[di.PDF_417,"pdf417"],[di.UPC_A,"upc_a"],[di.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var n=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return $ke(this,void 0,void 0,function(){var t,r;return e5e(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=n.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:$I.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,a=e;n<a.length;n++){var o=a[n],s=o.boundingBox.width*o.boundingBox.height;s>r&&(r=s,t=o)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var a=n[r];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}();var sle=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},lle=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},cle=function(){function i(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&fz.isSupported()?(this.primaryDecoder=new fz(e,r,n),this.secondaryDecoder=new dz(e,r,n)):this.primaryDecoder=new dz(e,r,n)}return i.prototype.decodeAsync=function(e){return sle(this,void 0,void 0,function(){var t;return lle(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return sle(this,void 0,void 0,function(){var t,r;return lle(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var n=r[t];e+=n}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}();var pz=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rB=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},nB=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ule=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),t5e=function(i){pz(e,i);function e(t,r){return i.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(ule),i5e=function(i){pz(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}(t5e),r5e=function(i){pz(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(ule),n5e=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new i5e(this.track)},i.prototype.torchFeature=function(){return new r5e(this.track)},i}(),a5e=function(){function i(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,r,n){return rB(this,void 0,void 0,function(){var a,o;return nB(this,function(s){switch(s.label){case 0:return a=new i(e,t,n),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:s.sent(),s.label=2;case 2:return a.setupSurface(),[2,a]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return rB(this,void 0,void 0,function(){return nB(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks(),a=n.length,o=0;e.mediaStream.getVideoTracks().forEach(function(s){e.mediaStream.removeTrack(s),s.stop(),++o,o>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new n5e(this.getFirstTrackOrFail())},i}(),hle=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,r){return rB(this,void 0,void 0,function(){return nB(this,function(n){return[2,a5e.create(e,this.mediaStream,t,r)]})})},i.create=function(e){return rB(this,void 0,void 0,function(){var t,r;return nB(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[2,new i(r)]}})})},i}();var dle=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},fle=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ple=function(){function i(){}return i.failIfNotSupported=function(){return dle(this,void 0,void 0,function(){return fle(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return dle(this,void 0,void 0,function(){return fle(this,function(t){return[2,hle.create(e)]})})},i}();var o5e=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},s5e=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ale=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=iA.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=iA.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return o5e(this,void 0,void 0,function(){var e,t,r,n,a,o,s;return s5e(this,function(l){switch(l.label){case 0:return e=function(c){for(var u=c.getVideoTracks(),h=0,d=u;h<d.length;h++){var f=d[h];f.enabled=!1,f.stop(),c.removeTrack(f)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=l.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=l.sent(),n=[],a=0,o=r;a<o.length;a++)s=o[a],s.kind==="videoinput"&&n.push({id:s.deviceId,label:s.label});return e(t),[2,n]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(a){for(var o=[],s=0,l=a;s<l.length;s++){var c=l[s];c.kind==="video"&&o.push({id:c.id,label:c.label})}e(o)},n=MediaStreamTrack;n.getSources(r)})},i}();var Oa=function(i){return i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED",i}(Oa||{}),l5e=function(){function i(){this.state=Oa.NOT_STARTED,this.onGoingTransactionNewState=Oa.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Oa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Oa.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Oa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Oa.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Oa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case Oa.UNKNOWN:throw"Transition from unknown is not allowed";case Oa.NOT_STARTED:this.failIfNewStateIs(e,[Oa.PAUSED]);break;case Oa.SCANNING:break;case Oa.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++){var a=n[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),c5e=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Oa.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Oa.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Oa.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Oa.PAUSED},i}();var mle=function(){function i(){}return i.create=function(){return new c5e(new l5e)},i}();var u5e=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hc=function(i){u5e(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Rl),h5e=function(){function i(e,t){this.logger=t,this.fps=hc.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=hc.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?hz.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!au(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),I1=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r,n;typeof t=="boolean"?this.verbose=t===!0:t&&(n=t,this.verbose=n.verbose===!0,r=n.experimentalFeatures),this.logger=new tB(this.verbose),this.qrcode=new cle(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=mle.create()}return i.prototype.start=function(e,t,r,n){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;n?o=n:o=this.verbose?this.logger.log:function(){};var s=h5e.create(t,this.logger);this.clearElement();var l=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?l=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=l,u=document.getElementById(this.elementId),h=u.clientWidth?u.clientWidth:hc.DEFAULT_WIDTH;u.style.position="relative",this.shouldScan=!0,this.element=u;var d=this,f=this.stateManagerProxy.startTransition(Oa.SCANNING);return new Promise(function(m,y){var g=c?s.videoConstraints:d.createVideoConstraints(e);if(!g){f.cancel(),y("videoConstraints should be defined");return}var x={};(!c||s.aspectRatio)&&(x.aspectRatio=s.aspectRatio);var b={onRenderSurfaceReady:function(S,E){d.setupUi(S,E,s),d.isScanning=!0,d.foreverScan(s,r,o)}};ple.failIfNotSupported().then(function(S){S.create(g).then(function(E){return E.render(a.element,x,b).then(function(D){d.renderedCamera=D,f.execute(),m(null)}).catch(function(D){f.cancel(),y(D)})}).catch(function(E){f.cancel(),y(iA.errorGettingUserMedia(E))})}).catch(function(S){f.cancel(),y(iA.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Oa.PAUSED),this.showPausedState(),(au(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Oa.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Oa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(hc.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),r(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},i.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(au(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var s=o.width,l=o.height,c=document.getElementById(r.elementId),u=c.clientWidth?c.clientWidth:hc.DEFAULT_WIDTH,h=Math.max(c.clientHeight?c.clientHeight:l,hc.FILE_SCAN_MIN_HEIGHT),d=r.computeCanvasDrawConfig(s,l,u,h);if(t){var f=r.createCanvasElement(u,h,"qr-canvas-visible");f.style.display="inline-block",c.appendChild(f);var m=f.getContext("2d");if(!m)throw"Unable to get 2d context from canvas";m.canvas.width=u,m.canvas.height=h,m.drawImage(o,0,0,s,l,d.x,d.y,d.width,d.height)}var y=hc.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(o.width,d.width),x=Math.max(o.height,d.height),b=g+2*y,S=x+2*y,E=r.createCanvasElement(b,S);c.appendChild(E);var D=E.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=b,D.canvas.height=S,D.drawImage(o,0,0,s,l,y,y,g,x);try{r.qrcode.decodeRobustlyAsync(E).then(function(B){n(cz.createFromQrcodeResult(B))}).catch(a)}catch(B){a("QR code parse error, error = ".concat(B))}},o.onerror=a,o.onabort=a,o.onstalled=a,o.onsuspend=a,o.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return Ale.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!hz.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[di.QR_CODE,di.AZTEC,di.CODABAR,di.CODE_39,di.CODE_93,di.CODE_128,di.DATA_MATRIX,di.MAXICODE,di.ITF,di.EAN_13,di.EAN_8,di.PDF_417,di.RSS_14,di.RSS_EXPANDED,di.UPC_A,di.UPC_E,di.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,a=e.formatsToSupport;n<a.length;n++){var o=a[n];ile(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(au(e))return!0;if(!au(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(au(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return au(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,r){var n=this,a=r.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(e,t,a),s=function(c){if(c<hc.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(hc.MIN_QR_BOX_SIZE,"px.")},l=function(c){return c>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=e),c};s(o.width),s(o.height),o.width=l(o.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},i.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=au(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var a=this.toQrdimensions(e,t,n);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&a.height<=t,s={x:0,y:0,width:e,height:t},l=o?this.getShadedRegionBounds(e,t,a):s,c=this.createCanvasElement(l.width,l.height),u={willReadFrequently:!0},h=c.getContext("2d",u);h.canvas.width=l.width,h.canvas.height=l.height,this.element.append(c),o&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=h,this.canvasElement=c},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=iA.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return e(n.text,cz.createFromQrcodeResult(n)),r.possiblyUpdateShaders(!0),!0}).catch(function(n){r.possiblyUpdateShaders(!1);var a=iA.codeParseError(n);return t(a,eB.createFrom(a)),!1})},i.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),o=a.videoWidth/a.clientWidth,s=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*o,c=this.qrRegion.height*s,u=this.qrRegion.x*o,h=this.qrRegion.y*s;this.context.drawImage(a,u,h,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(f){!f&&e.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){d()})):d()}).catch(function(f){n.logger.logError("Error happend while scanning context",f),d()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",n={user:!0,environment:!0},a="exact",o=function(m){if(m in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(m,"'")},s=Object.keys(e);if(s.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var l=Object.keys(e)[0];if(l!==t&&l!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(l===t){var c=e.facingMode;if(typeof c=="string"){if(o(c))return{facingMode:c}}else if(typeof c=="object")if(a in c){if(o(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var u=typeof c;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(a in h)return{deviceId:{exact:h["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var d=typeof h;throw"Invalid type of 'deviceId' = ".concat(d)}}}var f=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(f)},i.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n){var a=(r-e)/2,o=(n-t)/2;return{x:a,y:o,width:e,height:t}}else{var s=e,l=t;return e>r&&(t=r/e*t,e=r),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(s,"X").concat(l)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?hc.BORDER_SHADER_MATCH_COLOR:hc.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,r){var n=e,a=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(a,"px"),o.style.display="none",o.id=au(r)?"qr-canvas":r,o},i.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},i.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var a=document.createElement("div");a.style.position="absolute";var o=(t-n.width)/2,s=(r-n.height)/2;if(a.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(hc.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(a,c,l,-l,null,0,!0),this.insertShaderBorders(a,c,l,-l,null,0,!1),this.insertShaderBorders(a,c,l,null,-l,0,!0),this.insertShaderBorders(a,c,l,null,-l,0,!1),this.insertShaderBorders(a,l,c+l,-l,null,-l,!0),this.insertShaderBorders(a,l,c+l,null,-l,-l,!0),this.insertShaderBorders(a,l,c+l,-l,null,-l,!1),this.insertShaderBorders(a,l,c+l,null,-l,-l,!1),this.hasBorderShaders=!0}e.append(a)}},i.prototype.insertShaderBorders=function(e,t,r,n,a,o,s){var l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=hc.BORDER_SHADER_DEFAULT_COLOR,l.style.width="".concat(t,"px"),l.style.height="".concat(r,"px"),n!==null&&(l.style.top="".concat(n,"px")),a!==null&&(l.style.bottom="".concat(a,"px")),s?l.style.left="".concat(o,"px"):l.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(l),e.appendChild(l)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}();var Az="data:image/svg+xml;base64,",gle=Az+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",vle=Az+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",mz=Az+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",yle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var xle=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),_le=function(){function i(){this.data=xle.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=xle.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}();var d5e=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=uz.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var a=document.createElement("a");a.innerText=uz.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),f5e=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=mz,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return t.onHoverIn()},this.infoIcon.onmouseout=function(r){return t.onHoverOut()},this.infoIcon.onclick=function(r){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=yle,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=mz,this.infoIcon.style.opacity="0.6")},i}(),wle=function(){function i(){var e=this;this.infoDiv=new d5e,this.infoIcon=new f5e(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}();var p5e=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},A5e=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},gz=function(){function i(){}return i.hasPermissions=function(){return p5e(this,void 0,void 0,function(){var e,t,r,n;return A5e(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),t=0,r=e;t<r.length;t++)if(n=r[t],n.kind==="videoinput"&&n.label)return[2,!0];return[2,!1]}})})},i}();var Jd=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var r=t[e];if(i.isCameraScanType(r))return!0}return!1},i.isCameraScanType=function(e){return e===Gh.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===Gh.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Rl.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Rl.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,n=e;r<n.length;r++){var a=n[r];if(!Rl.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},i}();var Qo=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}();var Pl=function(){function i(){}return i.createElement=function(e,t){var r=document.createElement(e);return r.id=t,r.classList.add(Qo.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},i}();var Sle=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):n(u.value).then(s,l)}c((r=r.apply(i,e||[])).next())})},Cle=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ble=function(){function i(e,t,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=r}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Sle(this,void 0,void 0,function(){var e,t;return Cle(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=r.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?ln.torchOffButton():ln.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var r=e?ln.torchOnFailedMessage():ln.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),Ele=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Pl.createElement("button",Qo.TORCH_BUTTON_ID),this.torchController=new ble(e,this,t)}return i.prototype.render=function(e,t){var r=this;this.torchButton.innerText=ln.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var n=this;this.torchButton.addEventListener("click",function(a){return Sle(r,void 0,void 0,function(){return Cle(this,function(o){switch(o.label){case 0:return[4,n.torchController.flipState()];case 1:return o.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(Qo.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(Qo.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(Qo.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(Qo.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new ble(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=ln.torchOnButton(),this.torchController.reset()},i.create=function(e,t,r,n){var a=new i(t,n);return a.render(e,r),a},i}();var Tle=function(){function i(e,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=Pl.createElement("button",Qo.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(s){n.click()}),n.append(this.fileSelectionButton),this.fileScanInput=Pl.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(s){if(!(s==null||s.target==null)){var l=s.target;if(!(l.files&&l.files.length===0)){var c=l.files,u=c[0],h=u.name;a.setImageNameToButton(h),r(u)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(s){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),s.stopPropagation(),s.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(s){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),s.stopPropagation(),s.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(s){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),s.stopPropagation(),s.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(s){s.stopPropagation(),s.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var l=s.dataTransfer;if(l){var c=l.files;if(!c||c.length===0)return;for(var u=!1,h=0;h<c.length;++h){var d=c.item(h);if(d){var f=/image.*/;if(d.type.match(f)){u=!0;var m=d.name;a.setImageNameToButton(m),r(d),o.innerText=ln.dragAndDropMessage();break}}}u||(o.innerText=ln.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=ln.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var r=e.substring(0,8),n=e.length,a=e.substring(n-8,n);e="".concat(r,"....").concat(a)}var o=ln.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=o},i.prototype.setInitialValueToButton=function(){var e=ln.fileSelectionChooseImage()+" - "+ln.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,r){var n=new i(e,t,r);return n},i}();var Mle=function(){function i(e){this.selectElement=Pl.createElement("select",Qo.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)t.style.display="none";else{var n=ln.selectCamera();t.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var a=1,o=0,s=this.cameras;o<s.length;o++){var l=s[o],c=l.id,u=l.label==null?c:l.label;(!u||u==="")&&(u=[ln.anonymousCameraPrefix(),a++].join(" "));var h=document.createElement("option");h.value=c,h.innerText=u,this.options.push(h),this.selectElement.appendChild(h)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,r=this.options;t<r.length;t++){var n=r[t];if(n.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var r=new i(t);return r.render(e),r},i}();var Ile=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Pl.createElement("input",Qo.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=ln.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",function(){return n.onValueChange()}),this.rangeInput.addEventListener("change",function(){return n.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=ln.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,r,n){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var r=new i;return r.render(e,t),r},i}();var ou=function(i){return i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",i}(ou||{});function m5e(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function g5e(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var v5e=function(){function i(e,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Jd(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new tB(this.verbose),this.persistedDataManager=new _le,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,o){if(e)e(a,o);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(ln.lastMatch(a),ou.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,o){t&&t(a,o)};var n=document.getElementById(this.elementId);if(!n)throw"HTML Element with id=".concat(this.elementId," not found");n.innerHTML="",this.createBasicLayout(n),this.html5Qrcode=new I1(this.getScanRegionId(),g5e(this.config,this.verbose))},i.prototype.pause=function(e){(au(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,n){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(a){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),t(),r()}).catch(function(a){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",a),n(a)}):(e.html5Qrcode.clear(),t(),r())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Rl.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Rl.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Rl.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Rl.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Rl.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Rl.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Rl.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Jd.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div"),a=this.getDashboardId();n.id=a,n.style.width="100%",e.appendChild(n),this.setupInitialDashboard(n)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var r=new wle;r.renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(ln.cameraPermissionRequesting());var a=function(){r||n.createPermissionButton(e,t)};I1.getCameras().then(function(o){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),o&&o.length>0?(e.removeChild(t),n.renderCameraSelection(o)):(n.setHeaderMessage(ln.noCameraFound(),ou.STATUS_WARNING),a())}).catch(function(o){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),n.setHeaderMessage(o,ou.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var r=this,n=Pl.createElement("button",this.getCameraPermissionButtonId());n.innerText=ln.cameraPermissionTitle(),n.addEventListener("click",function(){n.disabled=!0,r.createCameraListUi(e,t,n)}),t.appendChild(n)},i.prototype.createPermissionsUi=function(e,t){var r=this;if(Jd.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){gz.hasPermissions().then(function(n){n?r.createCameraListUi(e,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t))}).catch(function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Jd.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=Jd.isFileScanType(this.currentScanType),r=this,n=function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";Jd.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(ln.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(o){r.resetHeaderMessage(),r.qrCodeSuccessCallback(o.decodedText,o)}).catch(function(o){r.setHeaderMessage(o,ou.STATUS_WARNING),r.qrCodeErrorCallback(o,eB.createFrom(o))}))};this.fileSelectionUi=Tle.create(e,t,n)},i.prototype.renderCameraSelection=function(e){var t=this,r=this,n=document.getElementById(this.getDashboardSectionCameraScanRegionId());n.style.textAlign="center";var a=Ile.create(n,!1),o=function(y){var g=y.zoomFeature();if(g.isSupported()){a.setOnCameraZoomValueChangeCallback(function(b){g.apply(b)});var x=1;t.config.defaultZoomValueIfSupported&&(x=t.config.defaultZoomValueIfSupported),x=nle(x,g.min(),g.max()),a.setValues(g.min(),g.max(),x,g.step()),a.show()}},s=Mle.create(n,e),l=document.createElement("span"),c=Pl.createElement("button",Qo.CAMERA_START_BUTTON_ID);c.innerText=ln.scanButtonStartScanningText(),l.appendChild(c);var u=Pl.createElement("button",Qo.CAMERA_STOP_BUTTON_ID);u.innerText=ln.scanButtonStopScanningText(),u.style.display="none",u.disabled=!0,l.appendChild(u);var h,d=function(y){if(!y.torchFeature().isSupported()){h&&h.hide();return}h?h.updateTorchCapability(y.torchFeature()):h=Ele.create(l,y.torchFeature(),{display:"none",marginLeft:"5px"},function(g){r.setHeaderMessage(g,ou.STATUS_WARNING)}),h.show()};n.appendChild(l);var f=function(y){y||(c.style.display="none"),c.innerText=ln.scanButtonStartScanningText(),c.style.opacity="1",c.disabled=!1,y&&(c.style.display="inline-block")};if(c.addEventListener("click",function(y){c.innerText=ln.scanButtonScanningStarting(),s.disable(),c.disabled=!0,c.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var g=s.getValue();r.persistedDataManager.setLastUsedCameraId(g),r.html5Qrcode.start(g,m5e(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(x){u.disabled=!1,u.style.display="inline-block",f(!1);var b=r.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&d(b),t.config.showZoomSliderIfSupported===!0&&o(b)}).catch(function(x){r.showHideScanTypeSwapLink(!0),s.enable(),f(!0),r.setHeaderMessage(x,ou.STATUS_WARNING)})}),s.hasSingleItem()&&c.click(),u.addEventListener("click",function(y){if(!r.html5Qrcode)throw"html5Qrcode not defined";u.disabled=!0,r.html5Qrcode.stop().then(function(g){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),s.enable(),c.disabled=!1,u.style.display="none",c.style.display="inline-block",h&&(h.reset(),h.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(g){u.disabled=!1,r.setHeaderMessage(g,ou.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var m=r.persistedDataManager.getLastUsedCameraId();s.hasValue(m)?(s.setValue(m),c.click()):r.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=ln.textIfCameraScanSelected(),r=ln.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var o=Pl.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=Jd.isCameraScanType(this.currentScanType)?t:r,o.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Jd.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=r,e.currentScanType=Gh.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=Gh.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),a.appendChild(o),n.appendChild(a)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){gz.hasPermissions().then(function(r){if(r){var n=document.getElementById(t.getCameraPermissionButtonId());if(!n)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(r){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=ou.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",t){case ou.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case ou.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case ou.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=gle,this.cameraScanImage.alt=ln.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=vle,this.fileScanImage.alt=ln.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Qo.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Qo.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();var y5e=i=>({selected:i});function x5e(i,e){if(i&1&&(L(0,"div",35),Q(1),O()),i&2){let t=e.$index,r=it(2);Le("id","step-"+t)("ngClass",yo(3,y5e,t===r.selectedSlide)),ie(1),_n("",t+1," ")}}function _5e(i,e){if(i&1){let t=Li();L(0,"button",40),ye("click",function(){let a=zt(t).$implicit,o=it(3).$index,s=it(2);return Vt(s.clickBtn({text:a.payload},o))}),Q(1),O()}if(i&2){let t=e.$implicit;ie(1),We(t.title)}}function w5e(i,e){if(i&1&&(L(0,"div"),Lr(1,_5e,2,1,"button",41,J1),O()),i&2){let t=it(2).$implicit;ie(1),Or(t.buttons)}}function b5e(i,e){if(i&1&&(L(0,"div",18),ce(1,"img",37),O(),L(2,"div",38)(3,"p",39),Q(4),O(),Dt(5,w5e,3,0,"div"),O()),i&2){let t=it().$implicit;ie(4),We(t.content),ie(1),Na(5,t.buttons?5:-1)}}function S5e(i,e){if(i&1&&(L(0,"div",42),Q(1),O()),i&2){let t=it().$implicit;ie(1),_n(" ",t.content," ")}}function C5e(i,e){if(i&1&&(L(0,"li",36),Dt(1,b5e,6,2)(2,S5e,2,1),O()),i&2){let t=e.$implicit,r=e.$index;pa(t.transmitter==="chatbot"?"msg bot":"msg user"),Le("id","msg_"+r),ie(1),Na(1,t.transmitter==="chatbot"?1:2)}}function E5e(i,e){i&1&&(L(0,"li",43)(1,"div",18),ce(2,"img",37),O(),L(3,"div",38)(4,"p",39),Q(5," ... "),O()()())}function T5e(i,e){if(i&1){let t=Li();L(0,"div",13)(1,"div",14),Lr(2,x5e,2,5,"div",44,J1),O(),L(4,"div",15)(5,"div",16),ce(6,"img",17),O(),L(7,"div",18)(8,"div",19),ce(9,"span",20)(10,"img",21),O()()(),L(11,"div",22)(12,"div",5)(13,"div",6),ce(14,"img",23),O()()(),L(15,"div",24)(16,"ul",25),Lr(17,C5e,3,4,"li",45,kb),Dt(19,E5e,6,0,"li",26),O(),L(20,"form",27),ye("submit",function(n){zt(t);let a=it();return Vt(a.sendMessage(n))}),L(21,"div",16)(22,"div",28),ce(23,"input",29),O()(),L(24,"div",30)(25,"button",31),ce(26,"i",32),O()(),L(27,"div",30)(28,"button",33),ce(29,"i",34),O()()()()()}if(i&2){let t=it();ie(2),Or(t.juego.Pregunta),ie(8),Le("src",t.apiUrl+"/uploads/"+t.juego.Pregunta[t.selectedSlide].pieza.imagen||"../../../../../assets/images/piezas/pieza-ejemplo.jpg",wr),ie(4),Le("src",t.apiUrl+"/uploads/"+t.juego.Pregunta[t.selectedSlide].pieza.imagen||"../../../../../assets/images/piezas/pieza-ejemplo.jpg",wr),ie(3),Or(t.messages),ie(2),Na(19,t.escribiendo?19:-1),ie(4),Le("formControl",t.userContent),ie(5),Le("disabled",t.escribiendo)}}var Ble=(()=>{let e=class e{constructor(r,n,a,o){this.route=r,this.router=n,this.juegoService=a,this.escaneoService=o,this.selectedSlide=0,this.apiUrl=Fi.apiURL,this.id="",this.tiempoJuego=0,this.escaneo=null,this.total_piezas=0,this.finalizado=0,this.tiempo=0,this.isTimerRunning=!1,this.socket=Ww("https://8ccc5ef49711f6698596e71d2d201be6.serveo.net"),this.newMessage=document.getElementById("msg_1"),this.leerQR=!1,this.messages=[],this.messagesCola=[],this.escribiendo=!1,this.userContent=new wt(""),this.datosCargados=!1,this.config={constraints:{video:{width:window.innerWidth}}},this.startTimer(),this.registrarUsuario()}ngOnInit(){this.id=this.route.snapshot.params.id,setInterval(()=>{this.tiempoJuego+=1},1e3),this.qrEscaner=new I1("reader"),this.juegoService.getOne(this.id).subscribe(r=>{console.log(r),this.juego=r,this.datosCargados=!0}),this.socket.on("bot_uttered",r=>{console.log(r),this.botResponse(r)}),this.socket.emit("user_uttered",{message:"quiero jugar al juego "+this.id}),$("#modalVerQR").on("shown.bs.modal",r=>{console.log("Modal abierto"),this.startScanner().then(()=>{console.log("Escaner iniciado")})}),$("#modalVerQR").on("hidden.bs.modal",r=>{console.log("Modal cerrado"),this.stopScanner().then(()=>{console.log("Escaner apagado")})}),this.escaneoService.createNewEscaneosJuego({juego_id:this.id,finalizado:this.finalizado,total_piezas:this.total_piezas}).subscribe(r=>{console.log(r),this.escaneo=r})}sendMessage(r){r.preventDefault(),this.userContent.value&&(this.sendMsg(this.userContent.value),this.userContent.setValue(""))}sendMsg(r,n){console.log(r),this.messages.map(s=>{s.buttons=void 0}),this.bajarChat();let a=r.text||r,o=r.quick_replies;console.log(a,n),this.socket.emit("user_uttered",{message:a}),this.messages.push({transmitter:"user",content:n||a,buttons:o,datetime:new Date})}clickBtn(r,n){this.sendMsg(r)}bajarChat(){setTimeout(()=>{let r=document.getElementById("scroll-chat");r&&(r.scrollTop=r.scrollHeight)},0)}botResponse(r){let n=r.text;if(n.startsWith("Command: "))switch(console.log(n.substring(9)),n.substring(9)){case"acierto":document.getElementById(`step-${this.selectedSlide}`)?.classList.add("acierto"),document.getElementById(`step-${this.selectedSlide}`)?.classList.remove("fallo");break;case"fallo":document.getElementById(`step-${this.selectedSlide}`)?.classList.add("fallo"),document.getElementById(`step-${this.selectedSlide}`)?.classList.remove("acierto");break;case"siguiente":document.getElementById(`step-${this.selectedSlide}`)?.classList.contains("acierto")||document.getElementById(`step-${this.selectedSlide}`)?.classList.add("fallo"),this.selectedSlide++;break;case"localizar_pieza":document.getElementById("pieza-imagen")?.click();break;case"final":this.selectedSlide=this.juego.Pregunta.length-1,document.querySelectorAll(".num").forEach(a=>{console.log(a,!a.classList.contains("acierto")),a.classList.contains("acierto")||a.classList.add("fallo")});break;case"resultados":setTimeout(()=>{localStorage.setItem("tiempoJuego",this.tiempoJuego.toString()),localStorage.setItem("puntosJuego",document.querySelectorAll(".acierto").length.toString()),this.finalizado=1,this.escaneo&&this.escaneo.tiempo!==void 0&&this.escaneoService.editarEscaneosJuego(this.escaneo.id,{tiempo:this.tiempo,finalizado:this.finalizado,total_piezas:document.querySelectorAll(".acierto").length}).subscribe(a=>{}),this.router.navigate([`alcudio/resultados/${this.id}`])},4e3);break;default:break}else{let a=r.quick_replies;this.messagesCola.push({transmitter:"chatbot",content:n,buttons:a,datetime:new Date}),setTimeout(()=>{let o=this.messagesCola.length;console.log(o),this.messagesCola.forEach((s,l)=>{this.escribiendo=!0,setTimeout(()=>{this.messages.push(s),this.bajarChat(),this.escribiendo=!1,o>l+1&&setTimeout(()=>{this.escribiendo=!0,this.bajarChat()},700)},2e3*(l+1))}),this.messagesCola=[]},100)}}startScanner(){return al(this,null,function*(){try{this.qrEscaner.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},(r,n)=>{console.log(r);let a=r.split("/"),o=a[a.length-2];o&&(this.sendMsg({text:"La solucion es "+o},"\xA1He encontrado la pieza!"),this.stopScanner(),document.getElementById("closeModalQR")?.click())},r=>{}).catch(r=>{console.error("Error starting QR Code scanner: ",r)})}catch(r){console.error("Error starting QR Code scanner: ",r)}})}stopScanner(){return al(this,null,function*(){this.qrEscaner&&(yield this.qrEscaner.stop())})}startTimer(){this.isTimerRunning||(this.isTimerRunning=!0,this.timer=setInterval(()=>{this.tiempo+=5,this.escaneo&&this.escaneo.tiempo!==void 0&&this.escaneoService.editarEscaneosJuego(this.escaneo.id,{tiempo:this.tiempo,finalizado:this.finalizado}).subscribe(r=>{})},5e3))}stopTimer(){clearInterval(this.timer),this.isTimerRunning=!1}onFocus(){this.startTimer()}onBlur(){this.stopTimer()}registrarUsuario(){localStorage.getItem("usuarioRegistrado")===null&&(console.log("Creando usuario"),this.escaneoService.createNewUsuarioNino().subscribe(n=>{console.log(n),this.escaneo=n,localStorage.setItem("usuarioRegistrado","true")}))}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(bi),xe(ys),xe(Mf))},e.\u0275cmp=St({type:e,selectors:[["os"]],hostBindings:function(n,a){n&1&&ye("focus",function(){return a.onFocus()},!1,Og)("blur",function(){return a.onBlur()},!1,Og)},decls:15,vars:1,consts:[["href","https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap","rel","stylesheet"],["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap","rel","stylesheet"],["id","modalVerQR","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-center"],["type","button","data-dismiss","modal","aria-label","Close","id","closeModalQR",1,"close"],["aria-hidden","true"],["id","reader",2,"width","100%","height","100%"],["class","main-container container d-flex flex-column",4,"ngIf"],[1,"main-container","container","d-flex","flex-column"],[1,"row","pt-2","px-4","align-items-center","justify-content-center"],[1,"row","p-2","pb-0","align-items-center"],[1,"col"],["src","../../../../assets/images/alcudio/logo_juego2.png","alt","Busqueda del tesoro"],[1,"col-auto"],[2,"position","relative","display","inline-block"],["data-toggle","modal","data-target","#modalzoomimage",1,"mdi","mdi","mdi-arrow-expand",2,"position","absolute","bottom","4px","right","8px","color","white"],["alt","Imagen de la pieza","id","pieza-imagen","data-toggle","modal","data-target","#modalzoomimage",1,"pieza-img",3,"src"],["tabindex","-1","role","dialog","id","modalzoomimage","aria-labelledby","modalzoomimage","aria-hidden","true",1,"modal","fade"],["alt","Imagen de la pieza","id","pieza-imagen",3,"src"],[1,"row","mx-0","my-2","flex-grow-1","flex-column","main"],["id","scroll-chat",1,"col","p-0","flex-grow-1","msg-box","py-2"],["class","row msg bot"],[1,"row","align-items-center","p-3","mr-1",3,"submit"],[1,"input-field","input"],["type","text","placeholder","Escribir mensaje...",1,"form-control",3,"formControl"],[1,"col-auto","px-1"],["type","button","data-toggle","modal","data-target","#modalVerQR",1,"btn","btn-circle","m-0","btn-qr"],[1,"mdi","mdi-qrcode-scan"],["type","submit",1,"btn","btn-circle","m-0","btn-enviar",3,"disabled"],[1,"fas","fa-paper-plane"],[1,"num",3,"id","ngClass"],[1,"row",3,"id"],["src","../../../../assets/images/alcudio/Gui\xF1o.PNG","alt","chatbot",2,"width","45px","transform","scale(-1,1)"],[1,"content"],[1,"p-content"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-secondary"],[1,"content","user-msg"],[1,"row","msg","bot"],["class","num",3,"id","ngClass"],["class","row",3,"class","id"]],template:function(n,a){n&1&&(ce(0,"link",0)(1,"link",1)(2,"link",2)(3,"link",3),L(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),Q(9,"Escaneo QR"),O(),L(10,"button",9)(11,"span",10),Q(12,"\xD7"),O()()(),ce(13,"div",11),O()()(),Dt(14,T5e,30,5,"div",12)),n&2&&(ie(14),Le("ngIf",a.datosCargados))},dependencies:[gs,vn,jn,En,Gn,Wn,vu],styles:['.pieza-img[_ngcontent-%COMP%]{aspect-ratio:1;width:120px;border:solid 2px #84705B;border-radius:10px;box-shadow:0 0 6px #b46400cc}.main-container[_ngcontent-%COMP%]{max-width:600px;height:calc(100dvh - 71px)!important;background-image:url("./media/fondo_desierto-OHKYQJVK.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;overflow:hidden}.main[_ngcontent-%COMP%]{background-color:#e8e3d9;box-shadow:0 0 6px #b46400cc;border:2px solid #84705B;border-radius:20px}.msg-box[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;list-style:none;width:100%;margin:0;padding:0 10px;flex-wrap:nowrap}.bot[_ngcontent-%COMP%]{text-align:left}.user[_ngcontent-%COMP%]{text-align:right;justify-content:right}.user-msg[_ngcontent-%COMP%]{background-color:#c48f58!important;box-shadow:-2px 2px 2px #000!important}.acierto[_ngcontent-%COMP%]{background-color:#bbe3bb!important}.fallo[_ngcontent-%COMP%]{background-color:#f86868!important}.msg[_ngcontent-%COMP%]{padding:8px 16px 8px 8px!important;margin:0!important;flex-wrap:nowrap;overflow:hidden}.msg[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:70%;align-items:center;padding:.5em 1em;background-color:#84705b;border-radius:1em;color:#fff;box-shadow:2px 2px 2px #000}.box[_ngcontent-%COMP%]{border:2px solid orange;border-radius:20px}.num[_ngcontent-%COMP%]{padding:.2em .6em;background-color:#fff;border-radius:100%;margin:0 3px}.selected[_ngcontent-%COMP%]{font-size:medium;font-weight:700;border:2px solid #303030}.btn-enviar[_ngcontent-%COMP%]{font-size:18px;width:45px;height:45px;color:#fff;background-color:#eb5e28;border:1px solid rgb(153,43,0)}.btn-qr[_ngcontent-%COMP%]{font-size:18px;width:45px;height:45px;color:#fff;background-color:#403d39;border:1px solid rgb(0,0,0)}.separator[_ngcontent-%COMP%]{height:1px;width:95%;margin:0 auto;background-color:#403d39}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:10px!important;padding:.5em 1em;font-size:larger;border:1px solid rgba(116,116,116,.398)}.p-content[_ngcontent-%COMP%]{padding:0!important}','@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Montserrat,sans-serif;line-height:1.6;color:#333}.mobile-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}img[_ngcontent-%COMP%]{width:100%;height:auto}button[_ngcontent-%COMP%]{margin-top:10px;padding:8px;font-size:14px;font-weight:700;background-color:#f8f9fa;color:#3f4245;border:none;cursor:pointer}#infoContent[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:600px;margin:0 auto}.main-container[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.piece-container[_ngcontent-%COMP%]{padding:10px}img[_ngcontent-%COMP%]{width:100%;max-width:600px;display:block;margin:0 auto}h2[_ngcontent-%COMP%]{margin-top:50px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:16px 0}p[_ngcontent-%COMP%]{margin:0}.hidden[_ngcontent-%COMP%]{display:none}p[_ngcontent-%COMP%]{text-align:left;padding:10px;font-family:Montserrat,sans-serif}.engine-wrapper[_ngcontent-%COMP%]{background-color:#000}']});let i=e;return i})();function vz(i,e){if(e===Voe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Rw||e===FI){let t=i.getIndex();if(t===null){let o=[],s=i.getAttribute("position");if(s!==void 0){for(let l=0;l<s.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}let r=t.count-2,n=[];if(e===Rw)for(let o=1;o<=r;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let a=i.clone();return a.setIndex(n),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var aA=class extends Yd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Cz(t)}),this.register(function(t){return new Lz(t)}),this.register(function(t){return new Oz(t)}),this.register(function(t){return new Fz(t)}),this.register(function(t){return new Tz(t)}),this.register(function(t){return new Mz(t)}),this.register(function(t){return new Iz(t)}),this.register(function(t){return new Bz(t)}),this.register(function(t){return new Sz(t)}),this.register(function(t){return new Dz(t)}),this.register(function(t){return new Ez(t)}),this.register(function(t){return new Pz(t)}),this.register(function(t){return new Rz(t)}),this.register(function(t){return new wz(t)}),this.register(function(t){return new Nz(t)}),this.register(function(t){return new Uz(t)})}load(e,t,r,n){let a=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let c=tA.extractUrlBase(e);o=tA.resolveURL(c,this.path)}else o=tA.extractUrlBase(e);this.manager.itemStart(e);let s=function(c){n?n(c):console.error(c),a.manager.itemError(e),a.manager.itemEnd(e)},l=new $p(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{a.parse(c,o,function(u){t(u),a.manager.itemEnd(e)},s)}catch(u){s(u)}},r,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,n){let a,o={},s={},l=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Ole){try{o[Xr.KHR_BINARY_GLTF]=new kz(e)}catch(h){n&&n(h);return}a=JSON.parse(o[Xr.KHR_BINARY_GLTF].content)}else a=JSON.parse(l.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let c=new jz(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){let h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[h.name]=h,o[h.name]=!0}if(a.extensionsUsed)for(let u=0;u<a.extensionsUsed.length;++u){let h=a.extensionsUsed[u],d=a.extensionsRequired||[];switch(h){case Xr.KHR_MATERIALS_UNLIT:o[h]=new bz;break;case Xr.KHR_DRACO_MESH_COMPRESSION:o[h]=new zz(a,this.dracoLoader);break;case Xr.KHR_TEXTURE_TRANSFORM:o[h]=new Vz;break;case Xr.KHR_MESH_QUANTIZATION:o[h]=new Hz;break;default:d.indexOf(h)>=0&&s[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(s),c.parse(r,n)}parseAsync(e,t){let r=this;return new Promise(function(n,a){r.parse(e,t,n,a)})}};function M5e(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}var Xr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},wz=class{constructor(e){this.parser=e,this.name=Xr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){let a=t[r];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){let t=this.parser,r="light:"+e,n=t.cache.get(r);if(n)return n;let a=t.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],c,u=new ji(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],ro);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new eA(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new PI(u),c.distance=h;break;case"spot":c=new RI(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,nA(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),n=Promise.resolve(c),t.cache.add(r,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,r=this.parser,a=r.json.nodes[e],s=(a.extensions&&a.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(l){return r._getNodeRef(t.cache,s,l)})}},bz=class{constructor(){this.name=Xr.KHR_MATERIALS_UNLIT}getMaterialType(){return Vh}extendParams(e,t,r){let n=[];e.color=new ji(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let o=a.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ro),e.opacity=o[3]}a.baseColorTexture!==void 0&&n.push(r.assignTexture(e,"map",a.baseColorTexture,La))}return Promise.all(n)}},Sz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=n.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}},Cz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(a.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let s=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Hr(s,s)}return Promise.all(a)}},Ez=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(a)}},Tz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_SHEEN}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new ji(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=n.extensions[this.name];if(o.sheenColorFactor!==void 0){let s=o.sheenColorFactor;t.sheenColor.setRGB(s[0],s[1],s[2],ro)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&a.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,La)),o.sheenRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}},Mz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&a.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(a)}},Iz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_VOLUME}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&a.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let s=o.attenuationColor||[1,1,1];return t.attenuationColor=new ji().setRGB(s[0],s[1],s[2],ro),Promise.all(a)}},Bz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_IOR}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=n.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}},Dz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_SPECULAR}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&a.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));let s=o.specularColorFactor||[1,1,1];return t.specularColor=new ji().setRGB(s[0],s[1],s[2],ro),o.specularColorTexture!==void 0&&a.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,La)),Promise.all(a)}},Rz=class{constructor(e){this.parser=e,this.name=Xr.EXT_MATERIALS_BUMP}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&a.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(a)}},Pz=class{constructor(e){this.parser=e,this.name=Xr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:tu}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&a.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(a)}},Lz=class{constructor(e){this.parser=e,this.name=Xr.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;let a=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,o)}},Oz=class{constructor(e){this.parser=e,this.name=Xr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,n=r.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;let o=a.extensions[t],s=n.images[o.source],l=r.textureLoader;if(s.uri){let c=r.options.manager.getHandler(s.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Fz=class{constructor(e){this.parser=e,this.name=Xr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,n=r.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;let o=a.extensions[t],s=n.images[o.source],l=r.textureLoader;if(s.uri){let c=r.options.manager.getHandler(s.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Nz=class{constructor(e){this.name=Xr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){let n=r.extensions[this.name],a=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(s){let l=n.byteOffset||0,c=n.byteLength||0,u=n.count,h=n.byteStride,d=new Uint8Array(s,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,n.mode,n.filter).then(function(f){return f.buffer}):o.ready.then(function(){let f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,n.mode,n.filter),f})})}else return null}},Uz=class{constructor(e){this.name=Xr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;let n=t.meshes[r.mesh];for(let c of n.primitives)if(c.mode!==su.TRIANGLES&&c.mode!==su.TRIANGLE_STRIP&&c.mode!==su.TRIANGLE_FAN&&c.mode!==void 0)return null;let o=r.extensions[this.name].attributes,s=[],l={};for(let c in o)s.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(c=>{let u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,f=[];for(let m of h){let y=new kr,g=new Ne,x=new Yu,b=new Ne(1,1,1),S=new TI(m.geometry,m.material,d);for(let E=0;E<d;E++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,E),l.SCALE&&b.fromBufferAttribute(l.SCALE,E),S.setMatrixAt(E,y.compose(g,x,b));for(let E in l)if(E==="_COLOR_0"){let D=l[E];S.instanceColor=new hg(D.array,D.itemSize,D.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&m.geometry.setAttribute(E,l[E]);ls.prototype.copy.call(S,m),this.parser.assignFinalMaterial(S),f.push(S)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}},Ole="glTF",jw=12,Dle={JSON:1313821514,BIN:5130562},kz=class{constructor(e){this.name=Xr.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,jw),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ole)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-jw,a=new DataView(e,jw),o=0;for(;o<n;){let s=a.getUint32(o,!0);o+=4;let l=a.getUint32(o,!0);if(o+=4,l===Dle.JSON){let c=new Uint8Array(e,jw+o,s);this.content=r.decode(c)}else if(l===Dle.BIN){let c=jw+o;this.body=e.slice(c,c+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},zz=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let r=this.json,n=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},l={},c={};for(let u in o){let h=Gz[u]||u.toLowerCase();s[h]=o[u]}for(let u in e.attributes){let h=Gz[u]||u.toLowerCase();if(o[u]!==void 0){let d=r.accessors[e.attributes[u]],f=B1[d.componentType];c[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",a).then(function(u){return new Promise(function(h,d){n.decodeDracoFile(u,function(f){for(let m in f.attributes){let y=f.attributes[m],g=l[m];g!==void 0&&(y.normalized=g)}h(f)},s,c,ro,d)})})}},Vz=class{constructor(){this.name=Xr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},Hz=class{constructor(){this.name=Xr.KHR_MESH_QUANTIZATION}},aB=class extends qp{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n*3+n;for(let o=0;o!==n;o++)t[o]=r[a+o];return t}interpolate_(e,t,r,n){let a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=s*2,c=s*3,u=n-t,h=(r-t)/u,d=h*h,f=d*h,m=e*c,y=m-c,g=-2*f+3*d,x=f-d,b=1-g,S=x-d+h;for(let E=0;E!==s;E++){let D=o[y+E+s],B=o[y+E+l]*u,F=o[m+E+s],H=o[m+E]*u;a[E]=b*D+S*B+g*F+x*H}return a}},I5e=new Yu,Qz=class extends aB{interpolate_(e,t,r,n){let a=super.interpolate_(e,t,r,n);return I5e.fromArray(a).normalize().toArray(a),a}},su={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},B1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Rle={9728:Bo,9729:io,9984:lI,9985:N5,9986:yw,9987:Qd},Ple={33071:Js,33648:Cw,10497:lg},yz={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Gz={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},B5e={CUBICSPLINE:void 0,LINEAR:cg,STEP:A1},xz={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function D5e(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Yp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:kh})),i.DefaultMaterial}function Ag(i,e,t){for(let r in t.extensions)i[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function nA(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function R5e(i,e,t){let r=!1,n=!1,a=!1;for(let c=0,u=e.length;c<u;c++){let h=e[c];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(n=!0),h.COLOR_0!==void 0&&(a=!0),r&&n&&a)break}if(!r&&!n&&!a)return Promise.resolve(i);let o=[],s=[],l=[];for(let c=0,u=e.length;c<u;c++){let h=e[c];if(r){let d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;o.push(d)}if(n){let d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;s.push(d)}if(a){let d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(c){let u=c[0],h=c[1],d=c[2];return r&&(i.morphAttributes.position=u),n&&(i.morphAttributes.normal=h),a&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function P5e(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++)i.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function L5e(i){let e,t=i.extensions&&i.extensions[Xr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+_z(t.attributes):e=i.indices+":"+_z(i.attributes)+":"+i.mode,i.targets!==void 0)for(let r=0,n=i.targets.length;r<n;r++)e+=":"+_z(i.targets[r]);return e}function _z(i){let e="",t=Object.keys(i).sort();for(let r=0,n=t.length;r<n;r++)e+=t[r]+":"+i[t[r]]+";";return e}function Wz(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O5e(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var F5e=new kr,jz=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new M5e,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,n=!1,a=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,a=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||n&&a<98?this.textureLoader=new w1(this.options.manager):this.textureLoader=new LI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $p(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let r=this,n=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){let s={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:r,userData:{}};return Ag(a,s,n),nA(s,n),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(s)})).then(function(){e(s)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,a=t.length;n<a;n++){let o=t[n].joints;for(let s=0,l=o.length;s<l;s++)e[o[s]].isBone=!0}for(let n=0,a=e.length;n<a;n++){let o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;let n=r.clone(),a=(o,s)=>{let l=this.associations.get(o);l!=null&&this.associations.set(s,l);for(let[c,u]of o.children.entries())a(u,s.children[c])};return a(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){let n=e(t[r]);if(n)return n}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let r=[];for(let n=0;n<t.length;n++){let a=e(t[n]);a&&r.push(a)}return r}getDependency(e,t){let r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":n=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){let r=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(a,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Xr.KHR_BINARY_GLTF].body);let n=this.options;return new Promise(function(a,o){r.load(tA.resolveURL(t.uri,n.path),a,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){let n=t.byteLength||0,a=t.byteOffset||0;return r.slice(a,a+n)})}loadAccessor(e){let t=this,r=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){let o=yz[n.type],s=B1[n.componentType],l=n.normalized===!0,c=new s(n.count*o);return Promise.resolve(new Do(c,o,l))}let a=[];return n.bufferView!==void 0?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),n.sparse!==void 0&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then(function(o){let s=o[0],l=yz[n.type],c=B1[n.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=n.byteOffset||0,f=n.bufferView!==void 0?r.bufferViews[n.bufferView].byteStride:void 0,m=n.normalized===!0,y,g;if(f&&f!==h){let x=Math.floor(d/f),b="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+x+":"+n.count,S=t.cache.get(b);S||(y=new c(s,x*f,n.count*f/u),S=new Mw(y,f/u),t.cache.add(b,S)),g=new Iw(S,l,d%f/u,m)}else s===null?y=new c(n.count*l):y=new c(s,d,n.count*l),g=new Do(y,l,m);if(n.sparse!==void 0){let x=yz.SCALAR,b=B1[n.sparse.indices.componentType],S=n.sparse.indices.byteOffset||0,E=n.sparse.values.byteOffset||0,D=new b(o[1],S,n.sparse.count*x),B=new c(o[2],E,n.sparse.count*l);s!==null&&(g=new Do(g.array.slice(),g.itemSize,g.normalized));for(let F=0,H=D.length;F<H;F++){let U=D[F];if(g.setX(U,B[F*l]),l>=2&&g.setY(U,B[F*l+1]),l>=3&&g.setZ(U,B[F*l+2]),l>=4&&g.setW(U,B[F*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){let t=this.json,r=this.options,a=t.textures[e].source,o=t.images[a],s=this.textureLoader;if(o.uri){let l=r.manager.getHandler(o.uri);l!==null&&(s=l)}return this.loadTextureImage(e,a,s)}loadTextureImage(e,t,r){let n=this,a=this.json,o=a.textures[e],s=a.images[t],l=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||s.name||"",u.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(u.name=s.uri);let d=(a.samplers||{})[o.sampler]||{};return u.magFilter=Rle[d.magFilter]||io,u.minFilter=Rle[d.minFilter]||Qd,u.wrapS=Ple[d.wrapS]||lg,u.wrapT=Ple[d.wrapT]||lg,n.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){let r=this,n=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let o=n.images[e],s=self.URL||self.webkitURL,l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){c=!0;let d=new Blob([h],{type:o.mimeType});return l=s.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let m=d;t.isImageBitmapLoader===!0&&(m=function(y){let g=new qu(y);g.needsUpdate=!0,d(g)}),t.load(tA.resolveURL(h,a.path),m,void 0,f)})}).then(function(h){return c===!0&&s.revokeObjectURL(l),h.userData.mimeType=o.mimeType||O5e(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,r,n){let a=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),a.extensions[Xr.KHR_TEXTURE_TRANSFORM]){let s=r.extensions!==void 0?r.extensions[Xr.KHR_TEXTURE_TRANSFORM]:void 0;if(s){let l=a.associations.get(o);o=a.extensions[Xr.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),a.associations.set(o,l)}}return n!==void 0&&(o.colorSpace=n),e[t]=o,o})}assignFinalMaterial(e){let t=e.geometry,r=e.material,n=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){let s="PointsMaterial:"+r.uuid,l=this.cache.get(s);l||(l=new Hh,cs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(s,l)),r=l}else if(e.isLine){let s="LineBasicMaterial:"+r.uuid,l=this.cache.get(s);l||(l=new jd,cs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(s,l)),r=l}if(n||a||o){let s="ClonedMaterial:"+r.uuid+":";n&&(s+="derivative-tangents:"),a&&(s+="vertex-colors:"),o&&(s+="flat-shading:");let l=this.cache.get(s);l||(l=r.clone(),a&&(l.vertexColors=!0),o&&(l.flatShading=!0),n&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(s,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Yp}loadMaterial(e){let t=this,r=this.json,n=this.extensions,a=r.materials[e],o,s={},l=a.extensions||{},c=[];if(l[Xr.KHR_MATERIALS_UNLIT]){let h=n[Xr.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(s,a,t))}else{let h=a.pbrMetallicRoughness||{};if(s.color=new ji(1,1,1),s.opacity=1,Array.isArray(h.baseColorFactor)){let d=h.baseColorFactor;s.color.setRGB(d[0],d[1],d[2],ro),s.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(s,"map",h.baseColorTexture,La)),s.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,s.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(s,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(s,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,s)})))}a.doubleSided===!0&&(s.side=Ku);let u=a.alphaMode||xz.OPAQUE;if(u===xz.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,u===xz.MASK&&(s.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&o!==Vh&&(c.push(t.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new Hr(1,1),a.normalTexture.scale!==void 0)){let h=a.normalTexture.scale;s.normalScale.set(h,h)}if(a.occlusionTexture!==void 0&&o!==Vh&&(c.push(t.assignTexture(s,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&o!==Vh){let h=a.emissiveFactor;s.emissive=new ji().setRGB(h[0],h[1],h[2],ro)}return a.emissiveTexture!==void 0&&o!==Vh&&c.push(t.assignTexture(s,"emissiveMap",a.emissiveTexture,La)),Promise.all(c).then(function(){let h=new o(s);return a.name&&(h.name=a.name),nA(h,a),t.associations.set(h,{materials:e}),a.extensions&&Ag(n,h,a),h})}createUniqueName(e){let t=Pa.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,r=this.extensions,n=this.primitiveCache;function a(s){return r[Xr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,t).then(function(l){return Lle(l,s,t)})}let o=[];for(let s=0,l=e.length;s<l;s++){let c=e[s],u=L5e(c),h=n[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[Xr.KHR_DRACO_MESH_COMPRESSION]?d=a(c):d=Lle(new $s,c,t),n[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){let t=this,r=this.json,n=this.extensions,a=r.meshes[e],o=a.primitives,s=[];for(let l=0,c=o.length;l<c;l++){let u=o[l].material===void 0?D5e(this.cache):this.getDependency("material",o[l].material);s.push(u)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(l){let c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,m=u.length;f<m;f++){let y=u[f],g=o[f],x,b=c[f];if(g.mode===su.TRIANGLES||g.mode===su.TRIANGLE_STRIP||g.mode===su.TRIANGLE_FAN||g.mode===void 0)x=a.isSkinnedMesh===!0?new SI(y,b):new Ma(y,b),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),g.mode===su.TRIANGLE_STRIP?x.geometry=vz(x.geometry,FI):g.mode===su.TRIANGLE_FAN&&(x.geometry=vz(x.geometry,Rw));else if(g.mode===su.LINES)x=new dg(y,b);else if(g.mode===su.LINE_STRIP)x=new x1(y,b);else if(g.mode===su.LINE_LOOP)x=new MI(y,b);else if(g.mode===su.POINTS)x=new Xp(y,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(x.geometry.morphAttributes).length>0&&P5e(x,a),x.name=t.createUniqueName(a.name||"mesh_"+e),nA(x,a),g.extensions&&Ag(n,x,g),t.assignFinalMaterial(x),h.push(x)}for(let f=0,m=h.length;f<m;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return a.extensions&&Ag(n,h[0],a),h[0];let d=new Jc;a.extensions&&Ag(n,d,a),t.associations.set(d,{meshes:e});for(let f=0,m=h.length;f<m;f++)d.add(h[f]);return d})}loadCamera(e){let t,r=this.json.cameras[e],n=r[r.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ea(Goe.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):r.type==="orthographic"&&(t=new y1(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),nA(t,r),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],r=[];for(let n=0,a=t.joints.length;n<a;n++)r.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(n){let a=n.pop(),o=n,s=[],l=[];for(let c=0,u=o.length;c<u;c++){let h=o[c];if(h){s.push(h);let d=new kr;a!==null&&d.fromArray(a.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new EI(s,l)})}loadAnimation(e){let t=this.json,r=this,n=t.animations[e],a=n.name?n.name:"animation_"+e,o=[],s=[],l=[],c=[],u=[];for(let h=0,d=n.channels.length;h<d;h++){let f=n.channels[h],m=n.samplers[f.sampler],y=f.target,g=y.node,x=n.parameters!==void 0?n.parameters[m.input]:m.input,b=n.parameters!==void 0?n.parameters[m.output]:m.output;y.node!==void 0&&(o.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",x)),l.push(this.getDependency("accessor",b)),c.push(m),u.push(y))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){let d=h[0],f=h[1],m=h[2],y=h[3],g=h[4],x=[];for(let b=0,S=d.length;b<S;b++){let E=d[b],D=f[b],B=m[b],F=y[b],H=g[b];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();let U=r._createAnimationTracks(E,D,B,F,H);if(U)for(let k=0;k<U.length;k++)x.push(U[k])}return new BI(a,void 0,x)})}createNodeMesh(e){let t=this.json,r=this,n=t.nodes[e];return n.mesh===void 0?null:r.getDependency("mesh",n.mesh).then(function(a){let o=r._getNodeRef(r.meshCache,n.mesh,a);return n.weights!==void 0&&o.traverse(function(s){if(s.isMesh)for(let l=0,c=n.weights.length;l<c;l++)s.morphTargetInfluences[l]=n.weights[l]}),o})}loadNode(e){let t=this.json,r=this,n=t.nodes[e],a=r._loadNodeShallow(e),o=[],s=n.children||[];for(let c=0,u=s.length;c<u;c++)o.push(r.getDependency("node",s[c]));let l=n.skin===void 0?Promise.resolve(null):r.getDependency("skin",n.skin);return Promise.all([a,Promise.all(o),l]).then(function(c){let u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,F5e)});for(let f=0,m=h.length;f<m;f++)u.add(h[f]);return u})}_loadNodeShallow(e){let t=this.json,r=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let a=t.nodes[e],o=a.name?n.createUniqueName(a.name):"",s=[],l=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&s.push(l),a.camera!==void 0&&s.push(n.getDependency("camera",a.camera).then(function(c){return n._getNodeRef(n.cameraCache,a.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){s.push(c)}),this.nodeCache[e]=Promise.all(s).then(function(c){let u;if(a.isBone===!0?u=new Bw:c.length>1?u=new Jc:c.length===1?u=c[0]:u=new ls,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(a.name&&(u.userData.name=a.name,u.name=o),nA(u,a),a.extensions&&Ag(r,u,a),a.matrix!==void 0){let h=new kr;h.fromArray(a.matrix),u.applyMatrix4(h)}else a.translation!==void 0&&u.position.fromArray(a.translation),a.rotation!==void 0&&u.quaternion.fromArray(a.rotation),a.scale!==void 0&&u.scale.fromArray(a.scale);return n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let t=this.extensions,r=this.json.scenes[e],n=this,a=new Jc;r.name&&(a.name=n.createUniqueName(r.name)),nA(a,r),r.extensions&&Ag(t,a,r);let o=r.nodes||[],s=[];for(let l=0,c=o.length;l<c;l++)s.push(n.getDependency("node",o[l]));return Promise.all(s).then(function(l){for(let u=0,h=l.length;u<h;u++)a.add(l[u]);let c=u=>{let h=new Map;for(let[d,f]of n.associations)(d instanceof cs||d instanceof qu)&&h.set(d,f);return u.traverse(d=>{let f=n.associations.get(d);f!=null&&h.set(d,f)}),h};return n.associations=c(a),a})}_createAnimationTracks(e,t,r,n,a){let o=[],s=e.name?e.name:e.uuid,l=[];rA[a.path]===rA.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(s);let c;switch(rA[a.path]){case rA.weights:c=Kd;break;case rA.rotation:c=Qh;break;case rA.position:case rA.scale:c=Xd;break;default:switch(r.itemSize){case 1:c=Kd;break;case 2:case 3:default:c=Xd;break}break}let u=n.interpolation!==void 0?B5e[n.interpolation]:cg,h=this._getArrayFromAccessor(r);for(let d=0,f=l.length;d<f;d++){let m=new c(l[d]+"."+rA[a.path],t.array,h,u);n.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let r=Wz(t.constructor),n=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a++)n[a]=t[a]*r;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){let n=this instanceof Qh?Qz:aB;return new n(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function N5e(i,e,t){let r=e.attributes,n=new $c;if(r.POSITION!==void 0){let s=t.json.accessors[r.POSITION],l=s.min,c=s.max;if(l!==void 0&&c!==void 0){if(n.set(new Ne(l[0],l[1],l[2]),new Ne(c[0],c[1],c[2])),s.normalized){let u=Wz(B1[s.componentType]);n.min.multiplyScalar(u),n.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let a=e.targets;if(a!==void 0){let s=new Ne,l=new Ne;for(let c=0,u=a.length;c<u;c++){let h=a[c];if(h.POSITION!==void 0){let d=t.json.accessors[h.POSITION],f=d.min,m=d.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),d.normalized){let y=Wz(B1[d.componentType]);l.multiplyScalar(y)}s.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(s)}i.boundingBox=n;let o=new lc;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,i.boundingSphere=o}function Lle(i,e,t){let r=e.attributes,n=[];function a(o,s){return t.getDependency("accessor",o).then(function(l){i.setAttribute(s,l)})}for(let o in r){let s=Gz[o]||o.toLowerCase();s in i.attributes||n.push(a(r[o],s))}if(e.indices!==void 0&&!i.index){let o=t.getDependency("accessor",e.indices).then(function(s){i.setIndex(s)});n.push(o)}return bn.workingColorSpace!==ro&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${bn.workingColorSpace}" not supported.`),nA(i,e),N5e(i,e,t),Promise.all(n).then(function(){return e.targets!==void 0?R5e(i,e.targets,t):i})}var oB=class extends DI{constructor(e){super(e),this.type=zh}parse(e){let o=function(H,U){switch(H){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},u=`
`,h=function(H,U,k){U=U||1024;let q=H.pos,X=-1,Y=0,J="",te=String.fromCharCode.apply(null,new Uint16Array(H.subarray(q,q+128)));for(;0>(X=te.indexOf(u))&&Y<U&&q<H.byteLength;)J+=te,Y+=te.length,q+=128,te+=String.fromCharCode.apply(null,new Uint16Array(H.subarray(q,q+128)));return-1<X?(k!==!1&&(H.pos+=Y+X+1),J+te.slice(0,X)):!1},d=function(H){let U=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,q=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},J,te;for((H.pos>=H.byteLength||!(J=h(H)))&&o(1,"no header found"),(te=J.match(U))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=te[1],Y.string+=J+`
`;J=h(H),J!==!1;){if(Y.string+=J+`
`,J.charAt(0)==="#"){Y.comments+=J+`
`;continue}if((te=J.match(k))&&(Y.gamma=parseFloat(te[1])),(te=J.match(j))&&(Y.exposure=parseFloat(te[1])),(te=J.match(q))&&(Y.valid|=2,Y.format=te[1]),(te=J.match(X))&&(Y.valid|=4,Y.height=parseInt(te[1],10),Y.width=parseInt(te[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},f=function(H,U,k){let j=U;if(j<8||j>32767||H[0]!==2||H[1]!==2||H[2]&128)return new Uint8Array(H);j!==(H[2]<<8|H[3])&&o(3,"wrong scanline width");let q=new Uint8Array(4*U*k);q.length||o(4,"unable to allocate buffer space");let X=0,Y=0,J=4*j,te=new Uint8Array(4),de=new Uint8Array(J),ue=k;for(;ue>0&&Y<H.byteLength;){Y+4>H.byteLength&&o(1),te[0]=H[Y++],te[1]=H[Y++],te[2]=H[Y++],te[3]=H[Y++],(te[0]!=2||te[1]!=2||(te[2]<<8|te[3])!=j)&&o(3,"bad rgbe scanline format");let ve=0,_e;for(;ve<J&&Y<H.byteLength;){_e=H[Y++];let Oe=_e>128;if(Oe&&(_e-=128),(_e===0||ve+_e>J)&&o(3,"bad scanline data"),Oe){let Te=H[Y++];for(let Se=0;Se<_e;Se++)de[ve++]=Te}else de.set(H.subarray(Y,Y+_e),ve),ve+=_e,Y+=_e}let Re=j;for(let Oe=0;Oe<Re;Oe++){let Te=0;q[X]=de[Oe+Te],Te+=j,q[X+1]=de[Oe+Te],Te+=j,q[X+2]=de[Oe+Te],Te+=j,q[X+3]=de[Oe+Te],X+=4}ue--}return q},m=function(H,U,k,j){let q=H[U+3],X=Math.pow(2,q-128)/255;k[j+0]=H[U+0]*X,k[j+1]=H[U+1]*X,k[j+2]=H[U+2]*X,k[j+3]=1},y=function(H,U,k,j){let q=H[U+3],X=Math.pow(2,q-128)/255;k[j+0]=Pw.toHalfFloat(Math.min(H[U+0]*X,65504)),k[j+1]=Pw.toHalfFloat(Math.min(H[U+1]*X,65504)),k[j+2]=Pw.toHalfFloat(Math.min(H[U+2]*X,65504)),k[j+3]=Pw.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;let x=d(g),b=x.width,S=x.height,E=f(g.subarray(g.pos),b,S),D,B,F;switch(this.type){case sc:F=E.length/4;let H=new Float32Array(F*4);for(let k=0;k<F;k++)m(E,k*4,H,k*4);D=H,B=sc;break;case zh:F=E.length/4;let U=new Uint16Array(F*4);for(let k=0;k<F;k++)y(E,k*4,U,k*4);D=U,B=zh;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:S,data:D,header:x.string,gamma:x.gamma,exposure:x.exposure,type:B}}setDataType(e){return this.type=e,this}load(e,t,r,n){function a(o,s){switch(o.type){case sc:case zh:o.colorSpace=ro,o.minFilter=io,o.magFilter=io,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,s)}return super.load(e,a,r,n)}};var Fle=(()=>{let e=class e{constructor(r){this.ngZone=r,this.isTouchInsideCanvas=!1,this.isMouseInsideCanvas=!1}ngOnDestroy(){this.frameId!=null&&cancelAnimationFrame(this.frameId)}initCamera(){let a=Math.min(600,window.innerWidth)/600;this.camera=new ea(75,a,.1,1e3),this.camera.position.z=4,this.camera.position.y=-1.5,this.scene.add(this.camera)}initRender(){let n=Math.min(600,window.innerWidth);console.log("CANVAS SIZE: "+n),this.renderer=new cc({canvas:this.canvas,alpha:!0,antialias:!1}),this.renderer.setSize(n,600)}addDirectionalLight(){var r=new eA("#fff2cc",2);r.position.set(1,1,1).normalize(),this.scene.add(r)}initLighting(){this.light=new ru(4210752),this.light.position.z=10,this.scene.add(this.light),this.addDirectionalLight()}addCube(){let r=new ug,n=new _1({color:"white",specular:"#fff2cc",shininess:50});this.cube=new Ma(r,n),this.originalPosition=this.cube.position.clone(),this.originalRotation=this.cube.rotation.clone(),this.originalScale=this.cube.scale.clone(),this.scene.add(this.cube)}create3DObject(r){let n=new aA;new oB().load("assets/luz_global.hdr",o=>{o.mapping=Sw,this.scene.environment=o,n.load(r,s=>{this.modelo=s.scene,this.scene.add(this.modelo)})})}rotateObject(r,n){this.modelo.rotation.y+=r*.008,this.modelo.rotation.x+=n*.008}rotarConRaton(){let r=0,n=0,a=!1;document.addEventListener("mousedown",o=>{this.isMouseInsideCanvas&&(a=!0,r=o.clientX,n=o.clientY)}),document.addEventListener("mouseup",()=>{a=!1}),document.addEventListener("mousemove",o=>{if(a&&this.isMouseInsideCanvas){let s=o.clientX-r,l=o.clientY-n;r=o.clientX,n=o.clientY,this.rotateObject(s,l)}})}rotarConTacto(){let r=0,n=0;document.addEventListener("touchstart",a=>{r=a.touches[0].clientX,n=a.touches[0].clientY}),document.addEventListener("touchmove",a=>{if(this.isTouchInsideCanvas){a.preventDefault();let o=a.touches[0].clientX,s=a.touches[0].clientY,l=(o-r)*.6,c=(s-n)*.6;this.rotateObject(l,c),r=o,n=s}},{passive:!1})}zoomRuedaRaton(){document.addEventListener("wheel",r=>{if(this.isMouseInsideCanvas){r.preventDefault();var n=r.deltaY*.005;this.camera.position.z+=n}},{passive:!1})}zoomTactil(){var r=0;this.isTouchInsideCanvas&&(document.addEventListener("touchstart",n=>{if(n.touches.length===2){var a=n.touches[0].clientX,o=n.touches[1].clientX;r=Math.abs(a-o)}},{passive:!1}),document.addEventListener("touchmove",n=>{if(n.preventDefault(),n.touches.length===2){var a=n.touches[0].clientX,o=n.touches[1].clientX,s=Math.abs(a-o),l=r-s;this.camera.position.z+=l*.1,r=s}},{passive:!1}))}aplicarZoom(){this.zoomRuedaRaton(),this.zoomTactil()}detectarSiEstasEnCanvasMovil(){this.canvas.addEventListener("touchstart",()=>{this.isTouchInsideCanvas=!0}),this.canvas.addEventListener("touchend",()=>{this.isTouchInsideCanvas=!1})}detectarSiEstasEnCanvasRaton(){this.canvas.addEventListener("mouseenter",()=>{this.isMouseInsideCanvas=!0}),this.canvas.addEventListener("mouseleave",()=>{this.isMouseInsideCanvas=!1})}reset(r){var n=document.getElementById("resetButton");n?.addEventListener("click",()=>{this.originalPosition&&this.originalRotation&&this.originalScale&&(this.camera.position.z=5,r.position.copy(this.originalPosition),r.rotation.copy(this.originalRotation),r.scale.copy(this.originalScale))})}createScene(r){this.canvas=r.nativeElement,this.initRender(),this.scene=new eu,this.initCamera(),this.initLighting(),this.rotarConRaton(),this.rotarConTacto(),this.aplicarZoom(),this.reset(this.cube)}animate(){this.ngZone.runOutsideAngular(()=>{document.readyState!=="loading"?this.render():window.addEventListener("DOMContentLoaded",()=>{this.render()}),window.addEventListener("resize",()=>{this.resize()})})}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.detectarSiEstasEnCanvasMovil(),this.detectarSiEstasEnCanvasRaton(),this.renderer.render(this.scene,this.camera)}resize(){let r=window.innerWidth,n=window.innerHeight;this.camera.aspect=r/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(r,n)}};e.\u0275fac=function(n){return new(n||e)(Nt(fa))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var k5e=["rendererCanvas"],Nle=(()=>{let e=class e{constructor(r,n,a){this.engServ=r,this.route=n,this.router=a,this.rutaModelo="",this.altura=36,this.iconoExpandir=!0,this.informacionAyuda={espanol:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotar",descripcion:"Click izquierdo + arrastrar o Arrastre con un dedo (toque)"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Doble click en el modelo o desplazarse en cualquier lugar o Pellizcar (toque)"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Mover",descripcion:"Click derecho + arrastrar o Arrastre con dos dedos (toque)"}}],ingles:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotate",descripcion:"Left click + drag or Drag with one finger (touch)"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Double click on the model or scroll anywhere or Pinch (touch)"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Move",descripcion:"Right click + drag or Drag with two fingers (touch)"}}],valenciano:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotar",descripcion:"Clic esquerre + arrossegar o Arrossegar amb un dit (toc)"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Doble clic en el model o despla\xE7ar-se en qualsevol lloc o Pellizcar (toc)"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Moure",descripcion:"Clic dret + arrossegar o Arrossegar amb dos dits (toc)"}}]}}ngOnInit(){let r=this.route.snapshot.params.idioma;r=="es"?this.informacionAyudaGeneral=this.informacionAyuda.espanol[0]:r=="en"?this.informacionAyudaGeneral=this.informacionAyuda.ingles[0]:r=="va"&&(this.informacionAyudaGeneral=this.informacionAyuda.valenciano[0]),console.log("Ruta modelo:",this.rutaModelo),this.engServ.createScene(this.rendererCanvas),this.engServ.animate(),this.engServ.create3DObject(this.rutaModelo)}mostrarPanelAyuda(){var r=document.getElementById("panelAyuda");r&&(r.style.display="block")}ocultarPanelAyuda(){var r=document.getElementById("panelAyuda");r&&(r.style.display="none")}expandirContenedor(){var r=document.getElementById("contenedor-motor"),n=document.getElementById("contenedor_informacion"),a=document.getElementById("altura");this.iconoExpandir?r&&n&&a&&(r.style.height="76dvh",r.style.zIndex="9999",n.style.visibility="hidden",a.style.height="76dvh",this.iconoExpandir=!this.iconoExpandir):r&&n&&a&&(r.style.height="36dvh",r.style.zIndex="9999",n.style.visibility="visible",a.style.height="36dvh",this.iconoExpandir=!this.iconoExpandir)}};e.\u0275fac=function(n){return new(n||e)(xe(Fle),xe(Ir),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-engine"]],viewQuery:function(n,a){if(n&1&&gu(k5e,7),n&2){let o;vc(o=yc())&&(a.rendererCanvas=o.first)}},inputs:{rutaModelo:"rutaModelo"},decls:32,vars:14,consts:[["id","app"],["id","renderCanvas"],["rendererCanvas",""],[1,"botones"],["id","resetButton",1,"mdi","mdi-restart","boton",2,"padding-top","2px"],["id","ayudaButton",1,"mdi","mdi-help","boton",3,"click"],["id","expandir",3,"click"],["id","panelAyuda",1,"panel-ayuda"],[1,"contenido-ayuda"],[1,"mdi","mdi-window-close","cerrar",3,"click"],[1,"row",2,"padding-top","20px"],[1,"col-4"],[1,"info-ayuda"],[1,"text-muted"]],template:function(n,a){n&1&&(L(0,"div",0),ce(1,"canvas",1,2),L(3,"div",3),ce(4,"span",4),L(5,"span",5),ye("click",function(){return a.mostrarPanelAyuda()}),O(),L(6,"span",6),ye("click",function(){return a.expandirContenedor()}),O()(),L(7,"div",7)(8,"div",8)(9,"span",9),ye("click",function(){return a.ocultarPanelAyuda()}),O(),L(10,"div",10)(11,"div",11)(12,"div",12),ce(13,"span"),L(14,"h5"),Q(15),O(),L(16,"h6",13),Q(17),O()()(),L(18,"div",11)(19,"div",12),ce(20,"span"),L(21,"h5"),Q(22),O(),L(23,"h6",13),Q(24),O()()(),L(25,"div",11)(26,"div",12),ce(27,"span"),L(28,"h5"),Q(29),O(),L(30,"h6",13),Q(31),O()()()()()()()),n&2&&(ie(6),pa(a.iconoExpandir?"mdi mdi-arrow-expand boton":"mdi mdi-arrow-compress boton"),ie(7),pa(a.informacionAyudaGeneral.rotar.icono),ie(2),We(a.informacionAyudaGeneral.rotar.titulo),ie(2),We(a.informacionAyudaGeneral.rotar.descripcion),ie(3),pa(a.informacionAyudaGeneral.zoom.icono),ie(2),We(a.informacionAyudaGeneral.zoom.titulo),ie(2),We(a.informacionAyudaGeneral.zoom.descripcion),ie(3),pa(a.informacionAyudaGeneral.mover.icono),ie(2),We(a.informacionAyudaGeneral.mover.titulo),ie(2),We(a.informacionAyudaGeneral.mover.descripcion))},styles:["#renderCanvas[_ngcontent-%COMP%]{max-width:100vh}.botones[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.boton[_ngcontent-%COMP%]{margin-right:10px;font-size:18px;color:#fff}.cerrar[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:18px;font-weight:700}.panel-ayuda[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:98%;height:100%;background-color:#00000080;border-radius:2px;z-index:9999}.contenido-ayuda[_ngcontent-%COMP%]{position:absolute;box-shadow:0 0 10px #0000004d;text-align:center;width:calc(100% - 10px);height:100%;color:#fff;margin:10px;padding:15px;display:flex;justify-content:center;align-items:center}.contenido-ayuda[_ngcontent-%COMP%]{margin-top:auto}.mdi-ayuda[_ngcontent-%COMP%]{font-size:30px}",'@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Montserrat,sans-serif;line-height:1.6;color:#333}.mobile-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}img[_ngcontent-%COMP%]{width:100%;height:auto}button[_ngcontent-%COMP%]{margin-top:10px;padding:8px;font-size:14px;font-weight:700;background-color:#f8f9fa;color:#3f4245;border:none;cursor:pointer}#infoContent[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:600px;margin:0 auto}.main-container[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.piece-container[_ngcontent-%COMP%]{padding:10px}img[_ngcontent-%COMP%]{width:100%;max-width:600px;display:block;margin:0 auto}h2[_ngcontent-%COMP%]{margin-top:50px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:16px 0}p[_ngcontent-%COMP%]{margin:0}.hidden[_ngcontent-%COMP%]{display:none}p[_ngcontent-%COMP%]{text-align:left;padding:10px;font-family:Montserrat,sans-serif}.engine-wrapper[_ngcontent-%COMP%]{background-color:#000}']});let i=e;return i})();var ua=1e-6,lu=typeof Float32Array<"u"?Float32Array:Array,Kz=Math.random;var cLt=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var cn={};Db(cn,{add:()=>bze,adjoint:()=>K5e,clone:()=>V5e,copy:()=>H5e,create:()=>z5e,determinant:()=>X5e,equals:()=>Tze,exactEquals:()=>Eze,frob:()=>wze,fromQuat:()=>dze,fromQuat2:()=>sze,fromRotation:()=>rze,fromRotationTranslation:()=>Vle,fromRotationTranslationScale:()=>uze,fromRotationTranslationScaleOrigin:()=>hze,fromScaling:()=>ize,fromTranslation:()=>tze,fromValues:()=>Q5e,fromXRotation:()=>nze,fromYRotation:()=>aze,fromZRotation:()=>oze,frustum:()=>fze,getRotation:()=>cze,getScaling:()=>Hle,getTranslation:()=>lze,identity:()=>kle,invert:()=>j5e,lookAt:()=>yze,mul:()=>Mze,multiply:()=>zle,multiplyScalar:()=>Sze,multiplyScalarAndAdd:()=>Cze,ortho:()=>gze,orthoNO:()=>Gle,orthoZO:()=>vze,perspective:()=>pze,perspectiveFromFieldOfView:()=>mze,perspectiveNO:()=>Qle,perspectiveZO:()=>Aze,rotate:()=>Z5e,rotateX:()=>J5e,rotateY:()=>$5e,rotateZ:()=>eze,scale:()=>q5e,set:()=>G5e,str:()=>_ze,sub:()=>Ize,subtract:()=>Wle,targetTo:()=>xze,translate:()=>Y5e,transpose:()=>W5e});function z5e(){var i=new lu(16);return lu!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i}function V5e(i){var e=new lu(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function H5e(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Q5e(i,e,t,r,n,a,o,s,l,c,u,h,d,f,m,y){var g=new lu(16);return g[0]=i,g[1]=e,g[2]=t,g[3]=r,g[4]=n,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=c,g[10]=u,g[11]=h,g[12]=d,g[13]=f,g[14]=m,g[15]=y,g}function G5e(i,e,t,r,n,a,o,s,l,c,u,h,d,f,m,y,g){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i[4]=a,i[5]=o,i[6]=s,i[7]=l,i[8]=c,i[9]=u,i[10]=h,i[11]=d,i[12]=f,i[13]=m,i[14]=y,i[15]=g,i}function kle(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function W5e(i,e){if(i===e){var t=e[1],r=e[2],n=e[3],a=e[6],o=e[7],s=e[11];i[1]=e[4],i[2]=e[8],i[3]=e[12],i[4]=t,i[6]=e[9],i[7]=e[13],i[8]=r,i[9]=a,i[11]=e[14],i[12]=n,i[13]=o,i[14]=s}else i[0]=e[0],i[1]=e[4],i[2]=e[8],i[3]=e[12],i[4]=e[1],i[5]=e[5],i[6]=e[9],i[7]=e[13],i[8]=e[2],i[9]=e[6],i[10]=e[10],i[11]=e[14],i[12]=e[3],i[13]=e[7],i[14]=e[11],i[15]=e[15];return i}function j5e(i,e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],y=e[13],g=e[14],x=e[15],b=t*s-r*o,S=t*l-n*o,E=t*c-a*o,D=r*l-n*s,B=r*c-a*s,F=n*c-a*l,H=u*y-h*m,U=u*g-d*m,k=u*x-f*m,j=h*g-d*y,q=h*x-f*y,X=d*x-f*g,Y=b*X-S*q+E*j+D*k-B*U+F*H;return Y?(Y=1/Y,i[0]=(s*X-l*q+c*j)*Y,i[1]=(n*q-r*X-a*j)*Y,i[2]=(y*F-g*B+x*D)*Y,i[3]=(d*B-h*F-f*D)*Y,i[4]=(l*k-o*X-c*U)*Y,i[5]=(t*X-n*k+a*U)*Y,i[6]=(g*E-m*F-x*S)*Y,i[7]=(u*F-d*E+f*S)*Y,i[8]=(o*q-s*k+c*H)*Y,i[9]=(r*k-t*q-a*H)*Y,i[10]=(m*B-y*E+x*b)*Y,i[11]=(h*E-u*B-f*b)*Y,i[12]=(s*U-o*j-l*H)*Y,i[13]=(t*j-r*U+n*H)*Y,i[14]=(y*S-m*D-g*b)*Y,i[15]=(u*D-h*S+d*b)*Y,i):null}function K5e(i,e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],y=e[13],g=e[14],x=e[15];return i[0]=s*(d*x-f*g)-h*(l*x-c*g)+y*(l*f-c*d),i[1]=-(r*(d*x-f*g)-h*(n*x-a*g)+y*(n*f-a*d)),i[2]=r*(l*x-c*g)-s*(n*x-a*g)+y*(n*c-a*l),i[3]=-(r*(l*f-c*d)-s*(n*f-a*d)+h*(n*c-a*l)),i[4]=-(o*(d*x-f*g)-u*(l*x-c*g)+m*(l*f-c*d)),i[5]=t*(d*x-f*g)-u*(n*x-a*g)+m*(n*f-a*d),i[6]=-(t*(l*x-c*g)-o*(n*x-a*g)+m*(n*c-a*l)),i[7]=t*(l*f-c*d)-o*(n*f-a*d)+u*(n*c-a*l),i[8]=o*(h*x-f*y)-u*(s*x-c*y)+m*(s*f-c*h),i[9]=-(t*(h*x-f*y)-u*(r*x-a*y)+m*(r*f-a*h)),i[10]=t*(s*x-c*y)-o*(r*x-a*y)+m*(r*c-a*s),i[11]=-(t*(s*f-c*h)-o*(r*f-a*h)+u*(r*c-a*s)),i[12]=-(o*(h*g-d*y)-u*(s*g-l*y)+m*(s*d-l*h)),i[13]=t*(h*g-d*y)-u*(r*g-n*y)+m*(r*d-n*h),i[14]=-(t*(s*g-l*y)-o*(r*g-n*y)+m*(r*l-n*s)),i[15]=t*(s*d-l*h)-o*(r*d-n*h)+u*(r*l-n*s),i}function X5e(i){var e=i[0],t=i[1],r=i[2],n=i[3],a=i[4],o=i[5],s=i[6],l=i[7],c=i[8],u=i[9],h=i[10],d=i[11],f=i[12],m=i[13],y=i[14],g=i[15],x=e*o-t*a,b=e*s-r*a,S=e*l-n*a,E=t*s-r*o,D=t*l-n*o,B=r*l-n*s,F=c*m-u*f,H=c*y-h*f,U=c*g-d*f,k=u*y-h*m,j=u*g-d*m,q=h*g-d*y;return x*q-b*j+S*k+E*U-D*H+B*F}function zle(i,e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],m=e[11],y=e[12],g=e[13],x=e[14],b=e[15],S=t[0],E=t[1],D=t[2],B=t[3];return i[0]=S*r+E*s+D*h+B*y,i[1]=S*n+E*l+D*d+B*g,i[2]=S*a+E*c+D*f+B*x,i[3]=S*o+E*u+D*m+B*b,S=t[4],E=t[5],D=t[6],B=t[7],i[4]=S*r+E*s+D*h+B*y,i[5]=S*n+E*l+D*d+B*g,i[6]=S*a+E*c+D*f+B*x,i[7]=S*o+E*u+D*m+B*b,S=t[8],E=t[9],D=t[10],B=t[11],i[8]=S*r+E*s+D*h+B*y,i[9]=S*n+E*l+D*d+B*g,i[10]=S*a+E*c+D*f+B*x,i[11]=S*o+E*u+D*m+B*b,S=t[12],E=t[13],D=t[14],B=t[15],i[12]=S*r+E*s+D*h+B*y,i[13]=S*n+E*l+D*d+B*g,i[14]=S*a+E*c+D*f+B*x,i[15]=S*o+E*u+D*m+B*b,i}function Y5e(i,e,t){var r=t[0],n=t[1],a=t[2],o,s,l,c,u,h,d,f,m,y,g,x;return e===i?(i[12]=e[0]*r+e[4]*n+e[8]*a+e[12],i[13]=e[1]*r+e[5]*n+e[9]*a+e[13],i[14]=e[2]*r+e[6]*n+e[10]*a+e[14],i[15]=e[3]*r+e[7]*n+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],c=e[3],u=e[4],h=e[5],d=e[6],f=e[7],m=e[8],y=e[9],g=e[10],x=e[11],i[0]=o,i[1]=s,i[2]=l,i[3]=c,i[4]=u,i[5]=h,i[6]=d,i[7]=f,i[8]=m,i[9]=y,i[10]=g,i[11]=x,i[12]=o*r+u*n+m*a+e[12],i[13]=s*r+h*n+y*a+e[13],i[14]=l*r+d*n+g*a+e[14],i[15]=c*r+f*n+x*a+e[15]),i}function q5e(i,e,t){var r=t[0],n=t[1],a=t[2];return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=e[3]*r,i[4]=e[4]*n,i[5]=e[5]*n,i[6]=e[6]*n,i[7]=e[7]*n,i[8]=e[8]*a,i[9]=e[9]*a,i[10]=e[10]*a,i[11]=e[11]*a,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Z5e(i,e,t,r){var n=r[0],a=r[1],o=r[2],s=Math.hypot(n,a,o),l,c,u,h,d,f,m,y,g,x,b,S,E,D,B,F,H,U,k,j,q,X,Y,J;return s<ua?null:(s=1/s,n*=s,a*=s,o*=s,l=Math.sin(t),c=Math.cos(t),u=1-c,h=e[0],d=e[1],f=e[2],m=e[3],y=e[4],g=e[5],x=e[6],b=e[7],S=e[8],E=e[9],D=e[10],B=e[11],F=n*n*u+c,H=a*n*u+o*l,U=o*n*u-a*l,k=n*a*u-o*l,j=a*a*u+c,q=o*a*u+n*l,X=n*o*u+a*l,Y=a*o*u-n*l,J=o*o*u+c,i[0]=h*F+y*H+S*U,i[1]=d*F+g*H+E*U,i[2]=f*F+x*H+D*U,i[3]=m*F+b*H+B*U,i[4]=h*k+y*j+S*q,i[5]=d*k+g*j+E*q,i[6]=f*k+x*j+D*q,i[7]=m*k+b*j+B*q,i[8]=h*X+y*Y+S*J,i[9]=d*X+g*Y+E*J,i[10]=f*X+x*Y+D*J,i[11]=m*X+b*Y+B*J,e!==i&&(i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i)}function J5e(i,e,t){var r=Math.sin(t),n=Math.cos(t),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=a*n+c*r,i[5]=o*n+u*r,i[6]=s*n+h*r,i[7]=l*n+d*r,i[8]=c*n-a*r,i[9]=u*n-o*r,i[10]=h*n-s*r,i[11]=d*n-l*r,i}function $5e(i,e,t){var r=Math.sin(t),n=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=a*n-c*r,i[1]=o*n-u*r,i[2]=s*n-h*r,i[3]=l*n-d*r,i[8]=a*r+c*n,i[9]=o*r+u*n,i[10]=s*r+h*n,i[11]=l*r+d*n,i}function eze(i,e,t){var r=Math.sin(t),n=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=a*n+c*r,i[1]=o*n+u*r,i[2]=s*n+h*r,i[3]=l*n+d*r,i[4]=c*n-a*r,i[5]=u*n-o*r,i[6]=h*n-s*r,i[7]=d*n-l*r,i}function tze(i,e){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}function ize(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function rze(i,e,t){var r=t[0],n=t[1],a=t[2],o=Math.hypot(r,n,a),s,l,c;return o<ua?null:(o=1/o,r*=o,n*=o,a*=o,s=Math.sin(e),l=Math.cos(e),c=1-l,i[0]=r*r*c+l,i[1]=n*r*c+a*s,i[2]=a*r*c-n*s,i[3]=0,i[4]=r*n*c-a*s,i[5]=n*n*c+l,i[6]=a*n*c+r*s,i[7]=0,i[8]=r*a*c+n*s,i[9]=n*a*c-r*s,i[10]=a*a*c+l,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}function nze(i,e){var t=Math.sin(e),r=Math.cos(e);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r,i[6]=t,i[7]=0,i[8]=0,i[9]=-t,i[10]=r,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function aze(i,e){var t=Math.sin(e),r=Math.cos(e);return i[0]=r,i[1]=0,i[2]=-t,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=t,i[9]=0,i[10]=r,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function oze(i,e){var t=Math.sin(e),r=Math.cos(e);return i[0]=r,i[1]=t,i[2]=0,i[3]=0,i[4]=-t,i[5]=r,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Vle(i,e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=r+r,l=n+n,c=a+a,u=r*s,h=r*l,d=r*c,f=n*l,m=n*c,y=a*c,g=o*s,x=o*l,b=o*c;return i[0]=1-(f+y),i[1]=h+b,i[2]=d-x,i[3]=0,i[4]=h-b,i[5]=1-(u+y),i[6]=m+g,i[7]=0,i[8]=d+x,i[9]=m-g,i[10]=1-(u+f),i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1,i}function sze(i,e){var t=new lu(3),r=-e[0],n=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=r*r+n*n+a*a+o*o;return h>0?(t[0]=(s*o+u*r+l*a-c*n)*2/h,t[1]=(l*o+u*n+c*r-s*a)*2/h,t[2]=(c*o+u*a+s*n-l*r)*2/h):(t[0]=(s*o+u*r+l*a-c*n)*2,t[1]=(l*o+u*n+c*r-s*a)*2,t[2]=(c*o+u*a+s*n-l*r)*2),Vle(i,e,t),i}function lze(i,e){return i[0]=e[12],i[1]=e[13],i[2]=e[14],i}function Hle(i,e){var t=e[0],r=e[1],n=e[2],a=e[4],o=e[5],s=e[6],l=e[8],c=e[9],u=e[10];return i[0]=Math.hypot(t,r,n),i[1]=Math.hypot(a,o,s),i[2]=Math.hypot(l,c,u),i}function cze(i,e){var t=new lu(3);Hle(t,e);var r=1/t[0],n=1/t[1],a=1/t[2],o=e[0]*r,s=e[1]*n,l=e[2]*a,c=e[4]*r,u=e[5]*n,h=e[6]*a,d=e[8]*r,f=e[9]*n,m=e[10]*a,y=o+u+m,g=0;return y>0?(g=Math.sqrt(y+1)*2,i[3]=.25*g,i[0]=(h-f)/g,i[1]=(d-l)/g,i[2]=(s-c)/g):o>u&&o>m?(g=Math.sqrt(1+o-u-m)*2,i[3]=(h-f)/g,i[0]=.25*g,i[1]=(s+c)/g,i[2]=(d+l)/g):u>m?(g=Math.sqrt(1+u-o-m)*2,i[3]=(d-l)/g,i[0]=(s+c)/g,i[1]=.25*g,i[2]=(h+f)/g):(g=Math.sqrt(1+m-o-u)*2,i[3]=(s-c)/g,i[0]=(d+l)/g,i[1]=(h+f)/g,i[2]=.25*g),i}function uze(i,e,t,r){var n=e[0],a=e[1],o=e[2],s=e[3],l=n+n,c=a+a,u=o+o,h=n*l,d=n*c,f=n*u,m=a*c,y=a*u,g=o*u,x=s*l,b=s*c,S=s*u,E=r[0],D=r[1],B=r[2];return i[0]=(1-(m+g))*E,i[1]=(d+S)*E,i[2]=(f-b)*E,i[3]=0,i[4]=(d-S)*D,i[5]=(1-(h+g))*D,i[6]=(y+x)*D,i[7]=0,i[8]=(f+b)*B,i[9]=(y-x)*B,i[10]=(1-(h+m))*B,i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1,i}function hze(i,e,t,r,n){var a=e[0],o=e[1],s=e[2],l=e[3],c=a+a,u=o+o,h=s+s,d=a*c,f=a*u,m=a*h,y=o*u,g=o*h,x=s*h,b=l*c,S=l*u,E=l*h,D=r[0],B=r[1],F=r[2],H=n[0],U=n[1],k=n[2],j=(1-(y+x))*D,q=(f+E)*D,X=(m-S)*D,Y=(f-E)*B,J=(1-(d+x))*B,te=(g+b)*B,de=(m+S)*F,ue=(g-b)*F,ve=(1-(d+y))*F;return i[0]=j,i[1]=q,i[2]=X,i[3]=0,i[4]=Y,i[5]=J,i[6]=te,i[7]=0,i[8]=de,i[9]=ue,i[10]=ve,i[11]=0,i[12]=t[0]+H-(j*H+Y*U+de*k),i[13]=t[1]+U-(q*H+J*U+ue*k),i[14]=t[2]+k-(X*H+te*U+ve*k),i[15]=1,i}function dze(i,e){var t=e[0],r=e[1],n=e[2],a=e[3],o=t+t,s=r+r,l=n+n,c=t*o,u=r*o,h=r*s,d=n*o,f=n*s,m=n*l,y=a*o,g=a*s,x=a*l;return i[0]=1-h-m,i[1]=u+x,i[2]=d-g,i[3]=0,i[4]=u-x,i[5]=1-c-m,i[6]=f+y,i[7]=0,i[8]=d+g,i[9]=f-y,i[10]=1-c-h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function fze(i,e,t,r,n,a,o){var s=1/(t-e),l=1/(n-r),c=1/(a-o);return i[0]=a*2*s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a*2*l,i[6]=0,i[7]=0,i[8]=(t+e)*s,i[9]=(n+r)*l,i[10]=(o+a)*c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a*2*c,i[15]=0,i}function Qle(i,e,t,r,n){var a=1/Math.tan(e/2),o;return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,n!=null&&n!==1/0?(o=1/(r-n),i[10]=(n+r)*o,i[14]=2*n*r*o):(i[10]=-1,i[14]=-2*r),i}var pze=Qle;function Aze(i,e,t,r,n){var a=1/Math.tan(e/2),o;return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,n!=null&&n!==1/0?(o=1/(r-n),i[10]=n*o,i[14]=n*r*o):(i[10]=-1,i[14]=-r),i}function mze(i,e,t,r){var n=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(n+a);return i[0]=l,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=c,i[6]=0,i[7]=0,i[8]=-((o-s)*l*.5),i[9]=(n-a)*c*.5,i[10]=r/(t-r),i[11]=-1,i[12]=0,i[13]=0,i[14]=r*t/(t-r),i[15]=0,i}function Gle(i,e,t,r,n,a,o){var s=1/(e-t),l=1/(r-n),c=1/(a-o);return i[0]=-2*s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*c,i[11]=0,i[12]=(e+t)*s,i[13]=(n+r)*l,i[14]=(o+a)*c,i[15]=1,i}var gze=Gle;function vze(i,e,t,r,n,a,o){var s=1/(e-t),l=1/(r-n),c=1/(a-o);return i[0]=-2*s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=c,i[11]=0,i[12]=(e+t)*s,i[13]=(n+r)*l,i[14]=a*c,i[15]=1,i}function yze(i,e,t,r){var n,a,o,s,l,c,u,h,d,f,m=e[0],y=e[1],g=e[2],x=r[0],b=r[1],S=r[2],E=t[0],D=t[1],B=t[2];return Math.abs(m-E)<ua&&Math.abs(y-D)<ua&&Math.abs(g-B)<ua?kle(i):(u=m-E,h=y-D,d=g-B,f=1/Math.hypot(u,h,d),u*=f,h*=f,d*=f,n=b*d-S*h,a=S*u-x*d,o=x*h-b*u,f=Math.hypot(n,a,o),f?(f=1/f,n*=f,a*=f,o*=f):(n=0,a=0,o=0),s=h*o-d*a,l=d*n-u*o,c=u*a-h*n,f=Math.hypot(s,l,c),f?(f=1/f,s*=f,l*=f,c*=f):(s=0,l=0,c=0),i[0]=n,i[1]=s,i[2]=u,i[3]=0,i[4]=a,i[5]=l,i[6]=h,i[7]=0,i[8]=o,i[9]=c,i[10]=d,i[11]=0,i[12]=-(n*m+a*y+o*g),i[13]=-(s*m+l*y+c*g),i[14]=-(u*m+h*y+d*g),i[15]=1,i)}function xze(i,e,t,r){var n=e[0],a=e[1],o=e[2],s=r[0],l=r[1],c=r[2],u=n-t[0],h=a-t[1],d=o-t[2],f=u*u+h*h+d*d;f>0&&(f=1/Math.sqrt(f),u*=f,h*=f,d*=f);var m=l*d-c*h,y=c*u-s*d,g=s*h-l*u;return f=m*m+y*y+g*g,f>0&&(f=1/Math.sqrt(f),m*=f,y*=f,g*=f),i[0]=m,i[1]=y,i[2]=g,i[3]=0,i[4]=h*g-d*y,i[5]=d*m-u*g,i[6]=u*y-h*m,i[7]=0,i[8]=u,i[9]=h,i[10]=d,i[11]=0,i[12]=n,i[13]=a,i[14]=o,i[15]=1,i}function _ze(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"}function wze(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}function bze(i,e,t){return i[0]=e[0]+t[0],i[1]=e[1]+t[1],i[2]=e[2]+t[2],i[3]=e[3]+t[3],i[4]=e[4]+t[4],i[5]=e[5]+t[5],i[6]=e[6]+t[6],i[7]=e[7]+t[7],i[8]=e[8]+t[8],i[9]=e[9]+t[9],i[10]=e[10]+t[10],i[11]=e[11]+t[11],i[12]=e[12]+t[12],i[13]=e[13]+t[13],i[14]=e[14]+t[14],i[15]=e[15]+t[15],i}function Wle(i,e,t){return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],i[3]=e[3]-t[3],i[4]=e[4]-t[4],i[5]=e[5]-t[5],i[6]=e[6]-t[6],i[7]=e[7]-t[7],i[8]=e[8]-t[8],i[9]=e[9]-t[9],i[10]=e[10]-t[10],i[11]=e[11]-t[11],i[12]=e[12]-t[12],i[13]=e[13]-t[13],i[14]=e[14]-t[14],i[15]=e[15]-t[15],i}function Sze(i,e,t){return i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i[3]=e[3]*t,i[4]=e[4]*t,i[5]=e[5]*t,i[6]=e[6]*t,i[7]=e[7]*t,i[8]=e[8]*t,i[9]=e[9]*t,i[10]=e[10]*t,i[11]=e[11]*t,i[12]=e[12]*t,i[13]=e[13]*t,i[14]=e[14]*t,i[15]=e[15]*t,i}function Cze(i,e,t,r){return i[0]=e[0]+t[0]*r,i[1]=e[1]+t[1]*r,i[2]=e[2]+t[2]*r,i[3]=e[3]+t[3]*r,i[4]=e[4]+t[4]*r,i[5]=e[5]+t[5]*r,i[6]=e[6]+t[6]*r,i[7]=e[7]+t[7]*r,i[8]=e[8]+t[8]*r,i[9]=e[9]+t[9]*r,i[10]=e[10]+t[10]*r,i[11]=e[11]+t[11]*r,i[12]=e[12]+t[12]*r,i[13]=e[13]+t[13]*r,i[14]=e[14]+t[14]*r,i[15]=e[15]+t[15]*r,i}function Eze(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]&&i[3]===e[3]&&i[4]===e[4]&&i[5]===e[5]&&i[6]===e[6]&&i[7]===e[7]&&i[8]===e[8]&&i[9]===e[9]&&i[10]===e[10]&&i[11]===e[11]&&i[12]===e[12]&&i[13]===e[13]&&i[14]===e[14]&&i[15]===e[15]}function Tze(i,e){var t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],l=i[6],c=i[7],u=i[8],h=i[9],d=i[10],f=i[11],m=i[12],y=i[13],g=i[14],x=i[15],b=e[0],S=e[1],E=e[2],D=e[3],B=e[4],F=e[5],H=e[6],U=e[7],k=e[8],j=e[9],q=e[10],X=e[11],Y=e[12],J=e[13],te=e[14],de=e[15];return Math.abs(t-b)<=ua*Math.max(1,Math.abs(t),Math.abs(b))&&Math.abs(r-S)<=ua*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-E)<=ua*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(a-D)<=ua*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(o-B)<=ua*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(s-F)<=ua*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(l-H)<=ua*Math.max(1,Math.abs(l),Math.abs(H))&&Math.abs(c-U)<=ua*Math.max(1,Math.abs(c),Math.abs(U))&&Math.abs(u-k)<=ua*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(h-j)<=ua*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(d-q)<=ua*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(f-X)<=ua*Math.max(1,Math.abs(f),Math.abs(X))&&Math.abs(m-Y)<=ua*Math.max(1,Math.abs(m),Math.abs(Y))&&Math.abs(y-J)<=ua*Math.max(1,Math.abs(y),Math.abs(J))&&Math.abs(g-te)<=ua*Math.max(1,Math.abs(g),Math.abs(te))&&Math.abs(x-de)<=ua*Math.max(1,Math.abs(x),Math.abs(de))}var Mze=zle,Ize=Wle;var pn={};Db(pn,{add:()=>Lze,angle:()=>i8e,bezier:()=>Xze,ceil:()=>Oze,clone:()=>Bze,copy:()=>Rze,create:()=>jle,cross:()=>Wze,dist:()=>u8e,distance:()=>Zle,div:()=>c8e,divide:()=>qle,dot:()=>ece,equals:()=>o8e,exactEquals:()=>a8e,floor:()=>Fze,forEach:()=>p8e,fromValues:()=>Dze,hermite:()=>Kze,inverse:()=>Qze,len:()=>d8e,length:()=>Kle,lerp:()=>jze,max:()=>Uze,min:()=>Nze,mul:()=>l8e,multiply:()=>Yle,negate:()=>Hze,normalize:()=>Gze,random:()=>Yze,rotateX:()=>$ze,rotateY:()=>e8e,rotateZ:()=>t8e,round:()=>kze,scale:()=>zze,scaleAndAdd:()=>Vze,set:()=>Pze,sqrDist:()=>h8e,sqrLen:()=>f8e,squaredDistance:()=>Jle,squaredLength:()=>$le,str:()=>n8e,sub:()=>s8e,subtract:()=>Xle,transformMat3:()=>Zze,transformMat4:()=>qze,transformQuat:()=>Jze,zero:()=>r8e});function jle(){var i=new lu(3);return lu!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Bze(i){var e=new lu(3);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}function Kle(i){var e=i[0],t=i[1],r=i[2];return Math.hypot(e,t,r)}function Dze(i,e,t){var r=new lu(3);return r[0]=i,r[1]=e,r[2]=t,r}function Rze(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i}function Pze(i,e,t,r){return i[0]=e,i[1]=t,i[2]=r,i}function Lze(i,e,t){return i[0]=e[0]+t[0],i[1]=e[1]+t[1],i[2]=e[2]+t[2],i}function Xle(i,e,t){return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],i}function Yle(i,e,t){return i[0]=e[0]*t[0],i[1]=e[1]*t[1],i[2]=e[2]*t[2],i}function qle(i,e,t){return i[0]=e[0]/t[0],i[1]=e[1]/t[1],i[2]=e[2]/t[2],i}function Oze(i,e){return i[0]=Math.ceil(e[0]),i[1]=Math.ceil(e[1]),i[2]=Math.ceil(e[2]),i}function Fze(i,e){return i[0]=Math.floor(e[0]),i[1]=Math.floor(e[1]),i[2]=Math.floor(e[2]),i}function Nze(i,e,t){return i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.min(e[2],t[2]),i}function Uze(i,e,t){return i[0]=Math.max(e[0],t[0]),i[1]=Math.max(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i}function kze(i,e){return i[0]=Math.round(e[0]),i[1]=Math.round(e[1]),i[2]=Math.round(e[2]),i}function zze(i,e,t){return i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i}function Vze(i,e,t,r){return i[0]=e[0]+t[0]*r,i[1]=e[1]+t[1]*r,i[2]=e[2]+t[2]*r,i}function Zle(i,e){var t=e[0]-i[0],r=e[1]-i[1],n=e[2]-i[2];return Math.hypot(t,r,n)}function Jle(i,e){var t=e[0]-i[0],r=e[1]-i[1],n=e[2]-i[2];return t*t+r*r+n*n}function $le(i){var e=i[0],t=i[1],r=i[2];return e*e+t*t+r*r}function Hze(i,e){return i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i}function Qze(i,e){return i[0]=1/e[0],i[1]=1/e[1],i[2]=1/e[2],i}function Gze(i,e){var t=e[0],r=e[1],n=e[2],a=t*t+r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),i[0]=e[0]*a,i[1]=e[1]*a,i[2]=e[2]*a,i}function ece(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Wze(i,e,t){var r=e[0],n=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return i[0]=n*l-a*s,i[1]=a*o-r*l,i[2]=r*s-n*o,i}function jze(i,e,t,r){var n=e[0],a=e[1],o=e[2];return i[0]=n+r*(t[0]-n),i[1]=a+r*(t[1]-a),i[2]=o+r*(t[2]-o),i}function Kze(i,e,t,r,n,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,c=o*(a-1),u=o*(3-2*a);return i[0]=e[0]*s+t[0]*l+r[0]*c+n[0]*u,i[1]=e[1]*s+t[1]*l+r[1]*c+n[1]*u,i[2]=e[2]*s+t[2]*l+r[2]*c+n[2]*u,i}function Xze(i,e,t,r,n,a){var o=1-a,s=o*o,l=a*a,c=s*o,u=3*a*s,h=3*l*o,d=l*a;return i[0]=e[0]*c+t[0]*u+r[0]*h+n[0]*d,i[1]=e[1]*c+t[1]*u+r[1]*h+n[1]*d,i[2]=e[2]*c+t[2]*u+r[2]*h+n[2]*d,i}function Yze(i,e){e=e||1;var t=Kz()*2*Math.PI,r=Kz()*2-1,n=Math.sqrt(1-r*r)*e;return i[0]=Math.cos(t)*n,i[1]=Math.sin(t)*n,i[2]=r*e,i}function qze(i,e,t){var r=e[0],n=e[1],a=e[2],o=t[3]*r+t[7]*n+t[11]*a+t[15];return o=o||1,i[0]=(t[0]*r+t[4]*n+t[8]*a+t[12])/o,i[1]=(t[1]*r+t[5]*n+t[9]*a+t[13])/o,i[2]=(t[2]*r+t[6]*n+t[10]*a+t[14])/o,i}function Zze(i,e,t){var r=e[0],n=e[1],a=e[2];return i[0]=r*t[0]+n*t[3]+a*t[6],i[1]=r*t[1]+n*t[4]+a*t[7],i[2]=r*t[2]+n*t[5]+a*t[8],i}function Jze(i,e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=e[0],l=e[1],c=e[2],u=n*c-a*l,h=a*s-r*c,d=r*l-n*s,f=n*d-a*h,m=a*u-r*d,y=r*h-n*u,g=o*2;return u*=g,h*=g,d*=g,f*=2,m*=2,y*=2,i[0]=s+u+f,i[1]=l+h+m,i[2]=c+d+y,i}function $ze(i,e,t,r){var n=[],a=[];return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],a[0]=n[0],a[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),a[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),i[0]=a[0]+t[0],i[1]=a[1]+t[1],i[2]=a[2]+t[2],i}function e8e(i,e,t,r){var n=[],a=[];return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],a[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),a[1]=n[1],a[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),i[0]=a[0]+t[0],i[1]=a[1]+t[1],i[2]=a[2]+t[2],i}function t8e(i,e,t,r){var n=[],a=[];return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],a[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),a[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),a[2]=n[2],i[0]=a[0]+t[0],i[1]=a[1]+t[1],i[2]=a[2]+t[2],i}function i8e(i,e){var t=i[0],r=i[1],n=i[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(t*t+r*r+n*n),c=Math.sqrt(a*a+o*o+s*s),u=l*c,h=u&&ece(i,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function r8e(i){return i[0]=0,i[1]=0,i[2]=0,i}function n8e(i){return"vec3("+i[0]+", "+i[1]+", "+i[2]+")"}function a8e(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]}function o8e(i,e){var t=i[0],r=i[1],n=i[2],a=e[0],o=e[1],s=e[2];return Math.abs(t-a)<=ua*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(r-o)<=ua*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=ua*Math.max(1,Math.abs(n),Math.abs(s))}var s8e=Xle,l8e=Yle,c8e=qle,u8e=Zle,h8e=Jle,d8e=Kle,f8e=$le,p8e=function(){var i=jle();return function(e,t,r,n,a,o){var s,l;for(t||(t=3),r||(r=0),n?l=Math.min(n*t+r,e.length):l=e.length,s=r;s<l;s+=t)i[0]=e[s],i[1]=e[s+1],i[2]=e[s+2],a(i,i,o),e[s]=i[0],e[s+1]=i[1],e[s+2]=i[2];return e}}();var oA=class{dibujar(){}};var $d=class extends oA{constructor(e,t,r,n,a,o,s){super(),this.gl=e,this.programId=t,this.esPerspectiva=r,this.cercano=n,this.lejano=a,this.aspecto=o,this.anguloVisi\u00F3n=s,this.position=[0,0,0],this.direction=[0,0,0],this.esPerspectiva&&this.setPerspectiva()}setPerspectiva(){this.projectionMatrix=cn.create(),this.viewMatrix=cn.create(),this.viewProjectionMatrix=cn.create(),cn.perspective(this.projectionMatrix,this.anguloVisi\u00F3n,this.aspecto,this.cercano,this.lejano)}setParalela(e,t){}setAspecto(e){this.aspecto=e,this.setPerspectiva()}getProjectionMatrix(){return this.projectionMatrix}setViewMatrix(e){let t=cn.create(),r=e,n=this.direction,a=pn.fromValues(0,1,0);cn.lookAt(t,r,n,a);let o=this.getProjectionMatrix(),s=cn.create();cn.multiply(s,o,t);var l=this.gl.getUniformLocation(this.programId,"uProjectionViewMatrix");this.gl.uniformMatrix4fv(l,!1,s)}dibujar(){}};var mg=class extends oA{constructor(e,t,r,n,a,o,s){super(),this.modelo3D=n.getRecursoModelo(e,a,o,s),this.material=n.getRecursoMaterial(r,a,s),this.textura=n.getRecursoTextura(t,a,s)}dibujar(){this.modelo3D.draw(),this.textura.draw(),this.material.draw()}};var Ll=class{constructor(){this.hijos=[],this.traslacion=pn.create(),this.rotacion=pn.create(),this.escalado=pn.create(),pn.set(this.escalado,1,1,1),this.matrizTransf=cn.create(),this.actualizar_matriz=!1}addHijo(e){return this.hijos.push(e),e.setPadre(this),this.hijos.length}remHijo(e){let t=new Array(this.hijos.length),r=this.hijos.indexOf(e);for(var n=0;n<this.hijos.length;++n)r!=n&&t.push(this.hijos[n]);return this.hijos=t,e.setPadreNull(),this.hijos.length}setEntidad(e){return this.entidad!=null&&console.log("Warning: Est\xE1s cambiando la entidad"),this.entidad=e,!0}getEntidad(){return this.entidad}getPadre(){if(this.padre!=null)return this.padre}setPadre(e){this.padre=e}setPadreNull(){this.padre=void 0}getMatrizTransf(){return this.matrizTransf}recorrer(e,t){if((this.actualizar_matriz||t)&&(cn.multiply(this.matrizTransf,e,this.calcularMatriz()),this.actualizar_matriz=!1,t=!0),this.entidad){let n=this.engine.getGl(),a=this.engine.getProgram();if(n&&a)if(this.entidad instanceof $d)this.entidad.setViewMatrix(this.getTraslacion());else{var r=n.getUniformLocation(a,"uModelMatrix");this.entidad instanceof mg&&n.uniformMatrix4fv(r,!1,this.matrizTransf)}this.entidad.dibujar()}if(this.hijos)for(let n in this.hijos)this.hijos[n].recorrer(this.matrizTransf,t);else console.log("No tiene hijos")}calcularMatriz(){var e=cn.create(),t=cn.create(),r=cn.create(),n=cn.create();return cn.fromTranslation(t,this.traslacion),n=this.calcularRotacion(),cn.fromScaling(r,this.escalado),cn.multiply(e,t,n),cn.multiply(e,e,r),e}calcularRotacion(){var e=cn.create(),t=cn.create(),r=cn.create(),n=cn.create();return cn.fromRotation(e,this.rotacion[0],[1,0,0]),cn.fromRotation(t,this.rotacion[1],[0,1,0]),cn.fromRotation(r,this.rotacion[2],[0,0,1]),cn.multiply(n,n,e),cn.multiply(n,n,t),cn.multiply(n,n,r),n}setTraslacion(e){this.traslacion=e,this.actualizar_matriz=!0}setEscalado(e){this.escalado=e,this.actualizar_matriz=!0}setRotacion(e){this.rotacion=e,this.actualizar_matriz=!0}trasladar(e){pn.add(this.traslacion,this.traslacion,e),this.actualizar_matriz=!0}rotar(e){pn.add(this.rotacion,this.rotacion,e),this.actualizar_matriz=!0}escalar(e){pn.multiply(this.escalado,this.escalado,e),this.actualizar_matriz=!0}getTraslacion(){return this.traslacion}getRotacion(){return this.rotacion}getEscalado(){return this.escalado}setMatrizTransf(e){this.matrizTransf=e}setActualizarMatriz(e){this.actualizar_matriz=e}setEngine(e){this.engine=e}print_mat4(){var e=this.matrizTransf;console.log(" |"+e[0]+", "+e[4]+", "+e[8]+", "+e[12]+` |
 |`+e[1]+", "+e[5]+", "+e[9]+", "+e[13]+` |
 |`+e[2]+", "+e[6]+", "+e[10]+", "+e[14]+` |
 |`+e[3]+", "+e[7]+", "+e[11]+", "+e[15]+" |")}};var sB=class extends oA{constructor(e,t,r,n,a){super(),this.gl=e,this.program=t,this.color=r,this.intensity=n,this.direction=a,this.ambient=.2}setAmbient(e){this.ambient=e}setColor(e,t,r){this.color=[e,t,r]}setIntensity(e){this.intensity=e}setDirection(e,t,r){this.direction=[e,t,r]}setupInShader(e){let t=this.gl.getUniformLocation(e,"ambientIntensity"),r=this.gl.getUniformLocation(e,"lightColor"),n=this.gl.getUniformLocation(e,"lightIntensity"),a=this.gl.getUniformLocation(e,"lightDirection");this.gl.uniform1f(t,this.ambient),this.gl.uniform3fv(r,new Float32Array(this.color)),this.gl.uniform1f(n,this.intensity),this.gl.uniform3fv(a,new Float32Array(this.direction))}dibujar(){this.setupInShader(this.program)}};var Wh=class{constructor(){}getNombre(){return this.nombre}setNombre(e){this.nombre=e}loadJsonFile(e){let t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),t.status===200)return JSON.parse(t.responseText);throw new Error("Error al cargar el archivo JSON")}loadFile(e){let t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),t.status===200)return t.responseText;throw new Error("Error al cargar el archivo")}};var cB=Bg(Xz()),lB=class extends Wh{constructor(e,t,r,n){super(),this.setNombre(e),n!=null?this.programId=n:console.error("ProgramId no se ha inicializado"),t!=null?this.gl=t:console.error("gl no se ha inicializado");let a=this.loadFile(e);this.mesh=new cB.Mesh(a),cB.initMeshBuffers(this.gl,this.mesh),this.draw()}draw(){let e=this.mesh.vertices,t=this.mesh.vertexNormals,r=this.mesh.textures,n=this.mesh.vertexBuffer.itemSize,a=this.mesh.normalBuffer.itemSize,o=this.mesh.textureBuffer.itemSize;this.cargarBufferEnShader(e,"aVertexPosition",n),this.cargarBufferEnShader(t,"aNormalCoord",a),this.cargarBufferEnShader(r,"aTextureCoord",o),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.DEPTH_TEST),this.gl.drawElements(this.gl.TRIANGLES,this.mesh.indexBuffer.numItems,this.gl.UNSIGNED_SHORT,0)}cargarBufferEnShader(e,t,r){let n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW);let a=this.gl.getAttribLocation(this.programId,t);this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,r,this.gl.FLOAT,!1,0,0)}};var tce=Bg(Xz()),uB=class extends Wh{constructor(e,t,r){super(),this.setNombre(e),r!=null?this.programId=r:console.error("ProgramId no se ha inicializado"),t!=null?this.gl=t:console.error("gl no se ha inicializado"),e!=null?this.path=e:console.error("La ruta de la textura no se ha inicializado"),this.estar_cardada=!1}draw(){this.estar_cardada||(this.loadMateriales(),this.estar_cardada=!0)}loadMateriales(){let e=this.cargarPrimerMaterial();this.pasarMaterialAlShader3Floats("uKa",e.ambient),this.pasarMaterialAlShader3Floats("uKd",e.diffuse),this.pasarMaterialAlShader3Floats("uKs",e.specular),this.pasarMaterialAlShader1Float("uNs",e.specularExponent)}cargarPrimerMaterial(){let e=this.loadFile(this.path),t=new tce.MaterialLibrary(e);for(let r in t.materials)if(t.materials.hasOwnProperty(r))return t.materials[r]}pasarMaterialAlShader3Floats(e,t){let r=this.gl.getUniformLocation(this.programId,e);this.gl.uniform3fv(r,t)}pasarMaterialAlShader1Float(e,t){let r=this.gl.getUniformLocation(this.programId,"uNs");this.gl.uniform1f(r,t)}};var hB=class extends Wh{constructor(e,t,r){super(),this.setNombre(e),r!=null?this.programId=r:console.error("ProgramId no se ha inicializado"),t!=null?this.gl=t:console.error("gl no se ha inicializado"),e!=null?this.path=e:console.error("La ruta de la textura no se ha inicializado"),this.estar_cardada=!1}draw(){this.estar_cardada||(this.loadTexturas(),this.estar_cardada=!0)}loadTexturas(){let e=new Image,t=this.gl,r=this.programId;e.onload=()=>{let n=this.resizeImageToPowerOfTwo(e),a=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),!(e.width&e.width-1)&&!(e.height&e.height-1)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR));let o=t.getUniformLocation(r,"uSampler");t.uniform1i(o,0)},e.src=this.path}resizeImageToPowerOfTwo(e){var t=document.createElement("canvas");t.width=this.nextPowerOfTwo(e.width),t.height=this.nextPowerOfTwo(e.height);var r=t.getContext("2d");return r&&r.drawImage(e,0,0,t.width,t.height),t}nextPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))}};var dB=class{constructor(){this.modelos_guardados=new Map,this.materiales_guardados=new Map,this.texturas_guardados=new Map}getRecursoModelo(e,t,r,n){let a=this.modelos_guardados.get(e);return a==null?(a=new lB(e,t,r,n),this.modelos_guardados.set(e,a)):console.log("Cargando el recurso (sin duplicar memoria): "+e),a}getRecursoMaterial(e,t,r){let n=this.materiales_guardados.get(e);return n==null&&(n=new uB(e,t,r),this.materiales_guardados.set(e,n)),n}getRecursoTextura(e,t,r){let n=this.texturas_guardados.get(e);return n==null&&(n=new hB(e,t,r),this.texturas_guardados.set(e,n)),n}};var fB=class extends Wh{constructor(e){super(),this.checkInitCanvas(e),this.checkInitGl(e)}checkInitCanvas(e){if(!e)throw new Error(`No se encontr\xF3 el elemento canvas con el ID: ${e}`)}checkInitGl(e){if(!e.getContext("webgl"))throw new Error("WebGL no est\xE1 disponible en este navegador.");this.gl=e.getContext("webgl")}setShaders(){if(this.gl!=null){let e,t,r,n,a;if(e=this.gl.createShader(this.gl.VERTEX_SHADER),t=this.gl.createShader(this.gl.FRAGMENT_SHADER),n=this.loadFile("/assets/Shaders/vertexShader.glsl"),a=this.loadFile("/assets/Shaders/fragmentShader.glsl"),e&&t&&n&&a){if(this.gl.shaderSource(e,n),this.gl.shaderSource(t,a),this.gl.compileShader(e),this.gl.compileShader(t),this.checkShadersError(e),this.checkShadersError(t),r=this.gl.createProgram(),r&&(this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.linkProgram(r),!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))){let s=this.gl.getProgramInfoLog(r);console.error("Error linking shader program:",s)}return this.gl.deleteShader(e),this.gl.deleteShader(t),this.gl.useProgram(r),r}else console.error("No se pudieron crear los shaders o leer los archivos.")}else console.error("No se ha inicializado TRecursoShader");return null}checkShadersError(e){if(this.gl&&e){var t=this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS);if(t==!1){var r=this.gl.getShaderInfoLog(e);console.log("Shader compiler log: "+r)}}}};var pB=class{constructor(e){this.checkInitCanvas(e),this.checkInitGl(e),this.nodo_raiz=new Ll;let t=new fB(this.canvas);this.programId=t.setShaders(),this.gestor=new dB}checkInitCanvas(e){if(!e)throw new Error(`No se encontr\xF3 el elemento canvas con el ID: ${e}`);this.canvas=e}checkInitGl(e){if(!e.getContext("webgl"))throw new Error("WebGL no est\xE1 disponible en este navegador.");this.gl=e.getContext("webgl")}crearNodoCamara_ConTransformaciones(e,t,r,n,a,o,s,l){e instanceof Ll||(e=this.nodo_raiz);let c=new Ll;if(this.gl&&this.programId){let u=new $d(this.gl,this.programId,!0,a,o,s,l);this.setNodeTransformations(c,n,t,r),this.asignarCamaraPadreYMotor(e,c,u)}return c}crearNodoCamara(e,t,r,n,a,o){e instanceof Ll||(e=this.nodo_raiz);let s=new Ll;if(this.gl&&this.programId){let l=new $d(this.gl,this.programId,!0,r,n,a,o);this.asignarCamaraPadreYMotor(e,s,l)}return s}asignarCamaraPadreYMotor(e,t,r){this.viewProjectionMatrix=r.getProjectionMatrix(),t.setEntidad(r),t.setEngine(this),e.addHijo(t),t.setPadre(e),this.camara=t}setNodeTransformations(e,t,r,n){e.setEscalado(t),e.setTraslacion(r),e.setRotacion(n),e.setActualizarMatriz(!0)}crearNodoLuz(e,t,r,n){e instanceof Ll||(e=this.nodo_raiz);let a=new Ll;if(this.gl&&this.programId){let o=new sB(this.gl,this.programId,t,r,n);this.asignarLuzPadreYMotor(e,a,o)}return a}asignarLuzPadreYMotor(e,t,r){t.setEntidad(r),t.setEngine(this),e.addHijo(t),t.setPadre(e),this.luz=t}setNodeTransformationsLuz(e,t,r,n){e.setEscalado(t),e.setTraslacion(r),e.setRotacion(n),e.setActualizarMatriz(!0)}recorrerNodoEscena(){this.nodo_raiz.recorrer(cn.create(),!1),requestAnimationFrame(()=>{this.recorrerNodoEscena()})}crearNodoMalla(e,t,r,n){e instanceof Ll||(e=this.nodo_raiz);let a=new Ll,o=new mg(t,r,n,this.gestor,this.gl,this.viewProjectionMatrix,this.programId);this.asignarMallaPadreYMotor(e,a,o);let s=pn.create();return pn.set(s,0,0,0),a.trasladar(s),a}asignarMallaPadreYMotor(e,t,r){t.setEntidad(r),t.setEngine(this),e.addHijo(t),t.setPadre(e),this.malla=t}crearNodoMalla_ConTransformaciones(e,t,r,n,a,o,s){e instanceof Ll||(e=this.nodo_raiz);let l=new Ll,c=new mg(t,r,n,this.gestor,this.gl,this.viewProjectionMatrix,this.programId);return this.setNodeTransformationsMalla(l,s,a,o),this.asignarMallaPadreYMotor(e,l,c),l}setNodeTransformationsMalla(e,t,r,n){e.setEscalado(t),e.setTraslacion(r),e.setRotacion(n),e.setActualizarMatriz(!0)}getGl(){return this.gl}getProgram(){return this.programId}dibujarEscena(){}};var jh=Bg(ice());var rce=(()=>{let e=class e{constructor(){}createScene(r,n,a){this.canvas=r.nativeElement;let o=new pB(this.canvas),s=pn.create();pn.set(s,0,0,0);let l=pn.create();pn.set(l,0,0,0);let c=.1,u=100,h=this.canvas.width/this.canvas.height,d=3.1415/2,f=o.crearNodoCamara_ConTransformaciones(null,l,s,s,c,u,h,d);this.camara=f;let m=pn.create();m=[1,1,1];let y=1,g=pn.create();g=[0,0,-1];let x=o.crearNodoLuz(null,m,y,g),b="/assets/modelos3D/plato.obj",S="/assets/images/glass.jpg",E="/assets/modelos3D/cubo1.mtl",D=o.crearNodoMalla(null,n,a,E);this.modelo=D;let B=pn.create();pn.set(B,0,0,1),f.setTraslacion(B),o.recorrerNodoEscena()}setAspecto(r){let n=this.camara.getEntidad();n instanceof $d&&n.setAspecto(r)}resetObject(){let r=pn.create();pn.set(r,0,0,0);let n=pn.create();pn.set(n,1,1,1),this.modelo.setRotacion(r),this.modelo.setEscalado(n)}rotateObject(r,n){let a=pn.create();pn.set(a,r,n,0),this.modelo.rotar(a)}rotarConRaton(){let r=0,n=0,a=!1;this.canvas.addEventListener("mousedown",o=>{a=!0,r=o.clientX,n=o.clientY}),this.canvas.addEventListener("mouseup",()=>{a=!1}),this.canvas.addEventListener("mousemove",o=>{if(a){let s=o.clientX-r,l=o.clientY-n;r=o.clientX,n=o.clientY,this.rotateObject(l*.01,s*.01)}}),this.canvas.addEventListener("wheel",o=>{let s=1;o.deltaY<0?s*=1.15:s/=1.15,this.modelo.escalar(pn.fromValues(s,s,s)),o.preventDefault()})}eventosMovil(){let r=new jh.Manager(this.canvas);var n=new jh.Rotate({enable:!0,threshold:.1,pointers:3,event:"mover"}),a=new jh.Pan({direction:jh.DIRECTION_ALL,event:"rotar"}),o=new jh.Pinch({enable:!0,threshold:.1,event:"zoom"});r.add(o),r.add(a),r.add(n),r.on("zoom",s=>{let l=s.scale;l=l>1?1.02:.98,this.modelo.escalar(pn.fromValues(l,l,l))}),r.on("rotar",s=>{let l=s.deltaX*5e-4,c=s.deltaY*5e-4;l=l>.02?.02:l,c=c>.02?.02:c,this.rotateObject(c,l)}),r.on("mover",s=>{let l=s.deltaX*5e-4,c=s.deltaY*5e-4;this.modelo.trasladar(pn.fromValues(c,l,0))})}rotarConMovil(){let r=0,n=0,a=0,o=0,s=!1,l=[0,0];this.canvas.addEventListener("touchstart",c=>{s=!0,r=c.touches[0].clientX,n=c.touches[0].clientY}),this.canvas.addEventListener("touchend",c=>{s=!1}),this.canvas.addEventListener("touchmove",c=>{s&&(a=c.touches[0].clientX,o=c.touches[0].clientY,l[0]=(o-n)*.01,l[1]=(a-r)*.01,r=a,n=o,this.rotateObject(l[0],l[1]))})}ngOnDestroy(){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var m8e=["rendererCanvas"],mB=(()=>{let e=class e{constructor(r,n,a){this.engServ=r,this.route=n,this.router=a,this.rutaModelo="",this.rutaTextura="",this.altura=36,this.iconoExpandir=!0,this.informacionAyuda={espanol:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotar",descripcion:"Click izquierdo + arrastrar o Arrastre con un dedo"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Desplazarse en cualquier lugar o Pellizcar"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Mover",descripcion:"Click derecho + arrastrar o Arrastre con dos dedos"}}],ingles:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotate",descripcion:"Left click + drag or Drag with one finger"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Scroll anywhere or Pinch"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Move",descripcion:"Right click + drag or Drag with two fingers"}}],valenciano:[{rotar:{icono:"mdi mdi-autorenew mdi-ayuda",titulo:"Rotar",descripcion:"Clic esquerre + arrossegar o Arrossegar amb un dit"},zoom:{icono:"mdi mdi-magnify-plus-outline mdi-ayuda",titulo:"Zoom",descripcion:"Despla\xE7ar-se en qualsevol lloc o Pellizcar"},mover:{icono:"mdi mdi-arrow-all mdi-ayuda",titulo:"Moure",descripcion:"Clic dret + arrossegar o Arrossegar amb dos dits"}}]}}ngOnInit(){let r=this.route.snapshot.params.idioma;r=="es"?this.informacionAyudaGeneral=this.informacionAyuda.espanol[0]:r=="en"?this.informacionAyudaGeneral=this.informacionAyuda.ingles[0]:r=="va"&&(this.informacionAyudaGeneral=this.informacionAyuda.valenciano[0]),console.log("Ruta modelo:",this.rutaModelo),console.log("Ruta textura:",this.rutaTextura),this.setCanvasSize(this.rendererCanvas),this.engServ.createScene(this.rendererCanvas,this.rutaModelo,this.rutaTextura),this.engServ.rotarConRaton(),this.engServ.eventosMovil()}setCanvasSize(r){let n=document.getElementById("padre-canvas"),a=n?.clientHeight||300,o=n?.clientWidth||300;console.log(n,a,o),r.nativeElement.setAttribute("width",o.toString()),r.nativeElement.setAttribute("height",a.toString())}mostrarPanelAyuda(){var r=document.getElementById("panelAyuda");r&&(r.style.display="block")}ocultarPanelAyuda(){var r=document.getElementById("panelAyuda");r&&(r.style.display="none")}expandirContenedor(){var r=document.getElementById("contenedor-motor"),n=document.getElementById("contenedor_informacion"),a=document.getElementById("altura");let o=document.getElementById("padre-canvas"),s=o?.clientHeight||300,l=o?.clientWidth||300;this.iconoExpandir?(this.engServ.setAspecto(s/l),r&&n&&a&&(r.style.height="calc(100dvh - 50px - 71px - 30px)",r.style.zIndex="9999",n.style.visibility="hidden",a.style.height="calc(100dvh - 50px - 71px - 30px)",this.iconoExpandir=!this.iconoExpandir)):(this.engServ.setAspecto(s/l),r&&n&&a&&(r.style.height="36dvh",r.style.zIndex="9999",n.style.visibility="visible",a.style.height="36dvh",this.iconoExpandir=!this.iconoExpandir))}resetPosition(){this.engServ.resetObject()}};e.\u0275fac=function(n){return new(n||e)(xe(rce),xe(Ir),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-self-engine"]],viewQuery:function(n,a){if(n&1&&gu(m8e,7),n&2){let o;vc(o=yc())&&(a.rendererCanvas=o.first)}},inputs:{rutaModelo:"rutaModelo",rutaTextura:"rutaTextura"},decls:25,vars:10,consts:[["id","padre-canvas",2,"max-width","620px","height","100%","margin","0 auto"],["id","renderCanvas"],["rendererCanvas",""],[1,"botones"],["id","resetButton",1,"mdi","mdi-restart","boton",2,"padding-top","2px",3,"click"],["id","ayudaButton",1,"mdi","mdi-help","boton",3,"click"],["id","expandir",3,"click"],["id","panelAyuda",1,"panel-ayuda"],[1,"contenido-ayuda"],[1,"mdi","mdi-window-close","cerrar",3,"click"],[1,"row",2,"padding-top","20px"],[1,"col-6"],[1,"info-ayuda"],[1,"text-muted"]],template:function(n,a){n&1&&(L(0,"div",0),ce(1,"canvas",1,2),L(3,"div",3)(4,"span",4),ye("click",function(){return a.resetPosition()}),O(),L(5,"span",5),ye("click",function(){return a.mostrarPanelAyuda()}),O(),L(6,"span",6),ye("click",function(){return a.expandirContenedor()}),O()(),L(7,"div",7)(8,"div",8)(9,"span",9),ye("click",function(){return a.ocultarPanelAyuda()}),O(),L(10,"div",10)(11,"div",11)(12,"div",12),ce(13,"span"),L(14,"h5"),Q(15),O(),L(16,"h6",13),Q(17),O()()(),L(18,"div",11)(19,"div",12),ce(20,"span"),L(21,"h5"),Q(22),O(),L(23,"h6",13),Q(24),O()()()()()()()),n&2&&(ie(6),pa(a.iconoExpandir?"mdi mdi-arrow-expand boton":"mdi mdi-arrow-compress boton"),ie(7),pa(a.informacionAyudaGeneral.rotar.icono),ie(2),We(a.informacionAyudaGeneral.rotar.titulo),ie(2),We(a.informacionAyudaGeneral.rotar.descripcion),ie(3),pa(a.informacionAyudaGeneral.zoom.icono),ie(2),We(a.informacionAyudaGeneral.zoom.titulo),ie(2),We(a.informacionAyudaGeneral.zoom.descripcion))},styles:["#renderCanvas[_ngcontent-%COMP%]{width:101%;height:101%}canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.botones[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.boton[_ngcontent-%COMP%]{margin-right:10px;font-size:19px;color:#fff}.cerrar[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:18px;font-weight:700}.panel-ayuda[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:102%;height:100%;background-color:#00000080;border-radius:2px;z-index:9999}.contenido-ayuda[_ngcontent-%COMP%]{position:absolute;box-shadow:0 0 10px #0000004d;text-align:center;width:calc(100% - 10px);height:100%;color:#fff;padding:35px;display:flex;justify-content:center;align-items:center}.contenido-ayuda[_ngcontent-%COMP%]{margin-top:auto}.mdi-ayuda[_ngcontent-%COMP%]{font-size:30px}"]});let i=e;return i})();function v8e(i,e){if(i&1){let t=Li();L(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),ye("click",function(){zt(t);let n=it();return Vt(n.sala&&n.goToSala(n.sala.id))}),L(5,"p",24),ce(6,"i",25),Q(7),O()()(),L(8,"div",26)(9,"div",27)(10,"div")(11,"button",28),ce(12,"i",29),O(),L(13,"button",28),ce(14,"i",30),O()()()()()(),L(15,"div",31)(16,"p",32),Q(17,"Pieza en edicion. Disponible pr\xF3ximamente."),O()()()}if(i&2){let t=it();ie(7),_n(" ",t.sala==null?null:t.sala.nombre," ")}}function y8e(i,e){if(i&1&&(L(0,"div",64),ce(1,"app-self-engine",65),O()),i&2){let t=it(2);ie(1),Le("rutaModelo",t.rutaModelo)("rutaTextura",t.rutaTextura)}}function x8e(i,e){if(i&1&&(L(0,"div",66),ce(1,"img",67),O()),i&2){let t=it(2);ie(1),Le("src",t.rutaImagen,wr)}}function _8e(i,e){if(i&1){let t=Li();L(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",33)(4,"div",23),ye("click",function(){zt(t);let n=it();return Vt(n.sala&&n.goToSala(n.sala.id))}),L(5,"p",24),ce(6,"i",25),Q(7),O()()()()(),L(8,"div",31)(9,"div",34),ye("click",function(){zt(t);let n=it();return Vt(n.usarMotorGrafico())}),Dt(10,y8e,2,2,"div",35)(11,x8e,2,1,"div",36),O(),L(12,"div",37)(13,"div",38)(14,"div",39),ye("click",function(){zt(t);let n=it();return Vt(n.togglePlay())}),ce(15,"i",40),O(),L(16,"div",41)(17,"div",42)(18,"h3",16),Q(19),O()()(),L(20,"div",43)(21,"div",44)(22,"div",45)(23,"a",46),ce(24,"i",47),O(),L(25,"div",48)(26,"a",49),ye("click",function(){zt(t);let n=it();return Vt(n.onToggleChange(1,"mdi-format-align-left"))}),ce(27,"i",50),Q(28),O(),L(29,"a",51),ye("click",function(){zt(t);let n=it();return Vt(n.onToggleChange(2,"mdi-volume-high"))}),ce(30,"i",52),Q(31),O(),L(32,"a",49),ye("click",function(){zt(t);let n=it();return Vt(n.onToggleChange(3,"mdi-file-image"))}),ce(33,"i",53),Q(34),O()()()()()(),L(35,"div",54)(36,"div",55)(37,"div",56)(38,"a",57),Q(39),O()(),L(40,"p"),Q(41),O()(),L(42,"div",58)(43,"audio",59),ye("play",function(){zt(t);let n=it();return Vt(n.reproducir())})("pause",function(){zt(t);let n=it();return Vt(n.pausar())}),Q(44," Tu navegador no soporta el elemento de audio. "),O(),L(45,"a",60),Q(46,"Audio no disponible"),O()(),L(47,"div",61)(48,"a",62),Q(49),O(),ce(50,"img",63),O()()()()()}if(i&2){let t=it();ie(7),_n(" ",t.sala==null?null:t.sala.nombre," "),ie(3),Le("ngIf",t.modelo),ie(1),Le("ngIf",!t.modelo),ie(3),Le("hidden",t.ocultarBoton),ie(5),We(t.infoPieza==null?null:t.infoPieza.nombre),ie(5),Ub("mdi mdi-botones ",t.opcionSeleccionadaIcono,""),ie(4),We(t.menu_informacion),ie(3),We(t.menu_audio),ie(3),We(t.menu_pictograma),ie(5),We(t.verTextoCompleto),ie(2),We(t.infoPieza==null?null:t.infoPieza.texto_completo),ie(2),Le("src",t.rutaAudio,wr),ie(2),Le("hidden",!t.ocultarBoton),ie(4),We(t.verPictogramaCompleto),ie(1),Le("src",t.pictograma,wr)}}var nce=(()=>{let e=class e{constructor(r,n,a,o,s,l,c){this.pieceService=r,this.salaService=n,this.expoService=a,this.idiomaService=o,this.escaneoService=s,this.route=l,this.router=c,this.iconoExpandir=!0,this.opcion=0,this.alturaDeseada=40,this.baseAPI=Fi.apiURL,this.escaneo=null,this.tiempo=0,this.motor_grafico=0,this.audio=0,this.isTimerRunning=!1,this.opcionSeleccionadaIcono="mdi-format-align-left",this.ocultarBoton=!1,this.modelo=!1,this.borrador=!1,this.publico=!1,this.pictograma="../../../../../assets/images/piezas/pictograma_no_disponible.png",this.pieces=[],this.pieza=null,this.infoPieza=null,this.idiomas=[],this.escaneoPieza=[],this.salaId="",this.sala=null,this.exposicion=null,this.rutaModelo="",this.rutaTextura="",this.rutaAudio="",this.rutaImagen="../../../../../assets/images/piezas/imagen_no_disponible.png",this.verTextoCompleto="",this.verPictogramaCompleto="",this.menu_informacion="",this.menu_audio="",this.menu_pictograma="",this.filtros={nombre:new wt(""),sala:new wt("0"),numero:new wt(10),pagina:1,idioma:new wt("")},this.startTimer(),this.registrarUsuario()}ngOnInit(){let r=this.route.snapshot.params.id,n=this.route.snapshot.params.idioma;n=="es"?(this.verTextoCompleto="Ver texto en pantalla completa",this.verPictogramaCompleto="Ver pictograma en pantalla completa",this.menu_informacion="INORMACI\xD3N",this.menu_audio="AUDIO",this.menu_pictograma="PICTOGRAMA"):n=="en"?(this.verTextoCompleto="View text in full screen",this.verPictogramaCompleto="View pictogram in full screen",this.menu_informacion="INFORMATION",this.menu_audio="AUDIO",this.menu_pictograma="PICTOGRAM"):n=="va"&&(this.verTextoCompleto="Veure text en pantalla completa",this.verPictogramaCompleto="Veure pictograma en pantalla completa",this.menu_informacion="INFORMACI\xD3",this.menu_audio="\xC0UDIO",this.menu_pictograma="PICTOGRAMA"),this.idiomaService.getAll().subscribe(o=>{this.idiomas=o,this.filtros.idioma.setValue(n),this.pieceService.getOne(r).subscribe(s=>{this.pieza=s,this.salaId=s.sala_id,s.estado_id=="Borrador"?this.borrador=!0:s.estado_id=="Publico"&&(this.publico=!0),s.imagen&&(this.rutaImagen=this.baseAPI+"/uploads/"+s.imagen),console.log(this.rutaImagen),this.salaService.getOne(this.salaId).subscribe(l=>{this.sala=l,l.exposicion_id&&this.expoService.getOne(l.exposicion_id).subscribe(c=>{this.exposicion=c})}),s.pictograma&&(this.pictograma=Fi.apiURL+"/uploads/"+s.pictograma),s.modelo&&(this.rutaModelo=this.baseAPI+"/uploads/"+s.modelo,this.modelo=!0),s.textura&&(this.rutaTextura=this.baseAPI+"/uploads/"+s.textura)}),this.pieceService.getInfo(r,this.filtros.idioma.value||"es").subscribe(s=>{this.infoPieza=s,s.audio?this.rutaAudio=Fi.apiURL+"/uploads/"+s.audio:document.getElementById("boton_musica")&&(this.ocultarBoton=!0);for(let l of this.pieces)console.log(l.sala_nombre),l.id==r&&(this.salaId=l.sala_id,this.salaService.getOne(this.salaId).subscribe(c=>{this.sala=c}))})});let a=new Date;this.escaneoService.createNewEscaneosPieza({pieza_id:r,idioma:n}).subscribe(o=>{console.log(o),this.escaneo=o})}onToggleChange(r,n){console.log("Opci\xF3n seleccionada:",r),this.opcion=r,this.opcionSeleccionadaIcono=n,this.seleccionarOpcion()}seleccionarOpcion(){var r=document.getElementById("descripcion"),n=document.getElementById("reproductor"),a=document.getElementById("pictograma");this.opcion==1?r&&n&&a&&(r.style.display="block",n.style.display="none",a.style.display="none"):this.opcion==2?r&&n&&a&&(r.style.display="none",n.style.display="block",a.style.display="none"):this.opcion==3&&r&&n&&a&&(r.style.display="none",n.style.display="none",a.style.display="block")}ocultarReproductor(){var r=document.getElementById("reproductor");r&&(r.style.display="none")}usarMotorGrafico(){this.motor_grafico=1}startTimer(){this.isTimerRunning||(this.isTimerRunning=!0,this.timer=setInterval(()=>{this.tiempo+=5,this.escaneo&&this.escaneo.tiempo!==void 0&&this.escaneoService.editarEscaneosPieza(this.escaneo.id,{tiempo:this.tiempo,motor_grafico:this.motor_grafico,audio:this.audio}).subscribe(r=>{})},5e3))}stopTimer(){clearInterval(this.timer),this.isTimerRunning=!1}onFocus(){this.startTimer()}onBlur(){this.stopTimer()}reproducir(){let r=document.getElementById("boton_musica");r&&this.rutaAudio!=""&&(this.audio=1,r.classList.remove("mdi-play-circle-outline"),r.classList.add("mdi-pause-circle-outline")),console.log("Reproduciendo")}pausar(){let r=document.getElementById("boton_musica");r&&this.rutaAudio!=""&&(r.classList.add("mdi-play-circle-outline"),r.classList.remove("mdi-pause-circle-outline")),console.log("Parando")}togglePlay(){let r=document.getElementById("miAudio"),n=document.getElementById("boton_musica");r&&n&&this.rutaAudio!=""&&(r.paused?(r.play(),this.audio=1,n.classList.remove("mdi-play-circle-outline"),n.classList.add("mdi-pause-circle-outline")):(r.pause(),n.classList.add("mdi-play-circle-outline"),n.classList.remove("mdi-pause-circle-outline")))}goToSala(r){let n=this.route.snapshot.params.idioma,a=["pieza/sala",r,n];console.log("Ruta:",a),this.router.navigate(a)}registrarUsuario(){localStorage.getItem("usuarioRegistrado")===null&&(console.log("Creando usuario"),this.escaneoService.createNewUsuarioAdulto().subscribe(n=>{console.log(n),this.escaneo=n,sessionStorage.setItem("usuarioRegistrado","true"),sessionStorage.setItem("usuarioRegistradoId",n.id)}))}};e.\u0275fac=function(n){return new(n||e)(xe(ba),xe(Tn),xe(sn),xe(Ms),xe(Mf),xe(Ir),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-piezas"]],hostBindings:function(n,a){n&1&&ye("focus",function(){return a.onFocus()},!1,Og)("blur",function(){return a.onBlur()},!1,Og)},decls:33,vars:5,consts:[["href","https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap","rel","stylesheet"],["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap","rel","stylesheet"],["id","modalVerPictograma","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-center"],["type","button","data-dismiss","modal","aria-label","Close","id","closeModalQR",1,"close"],["aria-hidden","true"],[1,"modal-body","text-center"],["alt","Pictograma de la pieza",2,"max-width","320px",3,"src"],["id","modalVerTexto","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-body"],[1,"titulo-pieza","text-center"],[1,"titulo-pagina",2,"color","#3A3A3A"],[1,"contenedor-descripcion"],["class","main-container",4,"ngIf"],[1,"main-container"],[1,"cabecera"],[1,"row"],[1,"col-9"],[1,"card-body","paginacion",3,"click"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mdi","mdi-arrow-left",2,"margin-right","5px","padding-top","8px"],[1,"col-3","ml-auto","d-flex"],[1,"card-body","paginacion","p-0",2,"margin-bottom","-24px"],[1,"btn-pag","mb-4"],[1,"fas","fa-angle-left"],[1,"fas","fa-angle-right"],[1,"content-container"],[1,"p-4"],[1,"col-10"],["id","contenedor-motor",1,"contenedor-motor",3,"click"],["class","engine-wrapper","id","altura",4,"ngIf"],["class","engine-wrapper","id","altura","style","overflow: hidden; background-color: black;",4,"ngIf"],["id","contenedor_informacion",1,"card","contenedor-juego","mobile-container",2,"margin-top","12px"],[1,"row","pb-2"],[1,"col-1",3,"hidden","click"],["id","boton_musica",1,"mdi","mdi-botones","mdi-play-circle-outline"],[1,"col-9","pl-4","pr-3",2,"display","flex","align-items","center"],[1,"titulo-pieza"],["id","opciones_accesibilidad",1,"col-2",2,"font-size","14px","color","#454545","padding-left","0px"],[1,"toggle-container"],["id","opciones_texto",1,"dropdown","pr-2"],["id","navbarDropdownAccesibilidad","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle","d-inline-block",2,"padding","0px"],[2,"font-size","calc(24px - 0.2vw)"],["aria-labelledby","navbarDropdownAdditional",1,"dropdown-menu","dropdown-menu-right",2,"padding-top","5px"],[1,"dropdown-item",2,"font-size","13px",3,"click"],[1,"mdi","mdi-format-align-left",2,"margin-right","5px"],["value","reproductor",1,"dropdown-item",2,"font-size","13px",3,"click"],[1,"mdi","mdi-volume-high",2,"margin-right","5px"],[1,"mdi","mdi-file-image",2,"margin-right","5px"],[1,"scrollable","contenedor-informacion"],["id","descripcion",1,"contenedor-descripcion"],[2,"text-align","center"],["href","#","data-toggle","modal","data-target","#modalVerTexto","aria-label","Ver texto en pantalla completa",2,"text-decoration","underline","cursor","pointer"],["id","reproductor",1,"contenedor-musica",2,"padding-top","20px","text-align","center"],["id","miAudio","controls","controls","aria-label","Reproductor de audio",1,"",2,"width","100%",3,"src","play","pause"],[3,"hidden"],["id","pictograma",1,"contenedor-pictograma",2,"text-align","center"],["href","#","data-toggle","modal","data-target","#modalVerPictograma","aria-label","Ver pictograma en pantalla completa",2,"text-decoration","underline","cursor","pointer"],["alt","user",2,"max-width","300px","margin-top","10px",3,"src"],["id","altura",1,"engine-wrapper"],[3,"rutaModelo","rutaTextura"],["id","altura",1,"engine-wrapper",2,"overflow","hidden","background-color","black"],["alt","Imagen Pieza",2,"width","100%","height","100%","object-fit","contain",3,"src"]],template:function(n,a){n&1&&(ce(0,"link",0)(1,"link",1)(2,"link",2)(3,"link",3),L(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),Q(9,"Pictograma"),O(),L(10,"button",9)(11,"span",10),Q(12,"\xD7"),O()()(),L(13,"div",11),ce(14,"img",12),O()()()(),L(15,"div",13)(16,"div",5)(17,"div",6)(18,"div",7)(19,"h5",8),Q(20,"Informaci\xF3n"),O(),L(21,"button",9)(22,"span",10),Q(23,"\xD7"),O()()(),L(24,"div",14)(25,"div",15)(26,"h3",16),Q(27),O()(),L(28,"div",17)(29,"p"),Q(30),O()()()()()(),Dt(31,v8e,18,1,"div",18)(32,_8e,51,17,"div",18)),n&2&&(ie(14),Le("src",a.pictograma,wr),ie(13),_n("",a.infoPieza==null?null:a.infoPieza.nombre," "),ie(3),We(a.infoPieza==null?null:a.infoPieza.texto_completo),ie(1),Le("ngIf",a.borrador),ie(1),Le("ngIf",a.publico))},dependencies:[vn,mB],styles:['.main-container[_ngcontent-%COMP%]{max-width:600px;margin-left:auto;margin-right:auto;background-image:url("./media/patron_fondo2-7DM7CU2U.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;background-position:center 60px;background-color:#faf5ee;font-family:lato,sans-serif;height:calc(100dvh - 71px)}.card[_ngcontent-%COMP%]{box-shadow:0 0 6px #0000004d}.content-container[_ngcontent-%COMP%]{padding:10px}.center-horizontal[_ngcontent-%COMP%]{justify-content:center}.paginacion[_ngcontent-%COMP%]{padding:4px 4px 4px 16px;font-weight:700;font-size:19px;letter-spacing:normal;line-height:22px;text-transform:uppercase}.contenedor-motor[_ngcontent-%COMP%]{height:36dvh;margin-top:5px}.contenedor-motor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px}.contenedor-descripcion[_ngcontent-%COMP%]{padding-top:8px;font-size:15px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:22px;text-transform:none;color:#454545}.contenedor-pictograma[_ngcontent-%COMP%]{display:none;margin-top:8px;padding-top:8px;font-size:15px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:22px;text-transform:none;color:#454545}.contenedor-musica[_ngcontent-%COMP%]{display:none;margin-top:8px;padding-top:8px}.titulo-pagina[_ngcontent-%COMP%]{margin-bottom:0;font-size:17px;letter-spacing:normal;text-transform:uppercase;color:#454545}.info-pieza[_ngcontent-%COMP%]{font-size:13px;font-style:italic;letter-spacing:normal;line-height:22px;text-transform:uppercase;color:#454545}.cabecera[_ngcontent-%COMP%]{background-color:#ede9e1;padding:10px;color:#454545;box-shadow:0 1px 1px #0003}.contenedor-juego[_ngcontent-%COMP%]{height:calc(64dvh - 159.38px);padding:18px 22px 20px}.contenedor-informacion[_ngcontent-%COMP%]{border-top:1px solid #3E5569;overflow-y:auto}.mdi-botones[_ngcontent-%COMP%]{font-size:28px}.btn-pag[_ngcontent-%COMP%]{margin:2px -1px -1px;font-size:16px;background-color:#fff;color:#3a3a3a;border-color:#3a3a3a;padding:2px 10px;box-shadow:0 10 #0000004d}#opciones_accesibilidad[_ngcontent-%COMP%]{margin-left:-2px}a[_ngcontent-%COMP%]{color:gray;text-decoration:none}.engine-wrapper[_ngcontent-%COMP%]{position:relative;height:36dvh;overflow:hidden;border-radius:20px;box-shadow:0 0 6px #00000073;background-image:url("./media/mua (3)-PLXLFLII.png");background-size:cover;background-position:center}.toggle-container[_ngcontent-%COMP%]{display:flex}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid #ccc}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:#454545;color:#fff}p[_ngcontent-%COMP%]{margin:0;font-size:16px}']});let i=e;return i})();var ace=(()=>{let e=class e{constructor(r){this.router=r,this.id=this.router.url.split("/").pop()||""}goToGame(){this.router.navigate([`/alcudio/juego/${this.id}`])}};e.\u0275fac=function(n){return new(n||e)(xe(bi))},e.\u0275cmp=St({type:e,selectors:[["os"]],decls:21,vars:0,consts:[["href","https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap","rel","stylesheet"],["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap","rel","stylesheet"],[1,"main-container"],["src","../../../../../assets/images/alcudio/Miedo.PNG","alt","user","id","imagen-alcudio",1,"imagen_portada","transparente"],[1,"chat-content","centrar","mt-0"],["id","contenedor-info",1,"box","bg-light-info","transparente"],[1,"transparente-1"],[2,"color","#8B412B"],[1,"transparente-2"],[1,"chat-content","centrar"],[1,"box2","bg-light-info","transparente-3",3,"click"]],template:function(n,a){n&1&&(ce(0,"link",0)(1,"link",1)(2,"link",2)(3,"link",3),L(4,"div",4),ce(5,"img",5),L(6,"div",6)(7,"div",7)(8,"p",8),Q(9,"\xA1Hola! Soy "),L(10,"b",9),Q(11,"ALCUDIO"),O(),Q(12,", vuestro compa\xF1ero virtual. \xA1Bienvenidos a "),L(13,"b"),Q(14,'"La B\xFAsqueda del Tesoro" \u{1F5FA}\uFE0F'),O(),Q(15,"!"),O(),L(16,"p",10),Q(17,"Mis piezas han desaparecido y el museo est\xE1 en peligro \u26A0\uFE0F. \xBFMe ayudas a recuperarlas? \xA1Que comience la aventura!"),O(),L(18,"div",11)(19,"div",12),ye("click",function(){return a.goToGame()}),Q(20,"COMENZAR"),O()()()()())},styles:['@font-face{font-family:Kids;src:url(https://fonts.googleapis.com/css2?family=Noto+Sans+Khojki&display=swap)}.transparente[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aparecer 1s}.transparente-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aparecer-1 2s}.transparente-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aparecer-2 3s}.transparente-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aparecer-3 4s}@keyframes _ngcontent-%COMP%_aparecer{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_aparecer-1{0%{opacity:0}50%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_aparecer-2{0%{opacity:0}66%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_aparecer-3{0%{opacity:0}75%{opacity:0}to{opacity:1}}.circle[_ngcontent-%COMP%]{color:#343a40;font-weight:700;margin-right:2px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background-color:#f4f2e9;box-shadow:0 0 5px #0000004d}.activo[_ngcontent-%COMP%]{background-color:#eb5e28;color:#fff;width:45px;height:45px}.centrar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:0 auto}.main-container[_ngcontent-%COMP%]{max-width:600px;flex-direction:column;font-family:Kids,sans-serif;margin-left:auto;margin-right:auto}.content-container[_ngcontent-%COMP%]{padding:15px;background-size:cover;background-clip:padding-box;background-repeat:no-repeat}.piece-container[_ngcontent-%COMP%]{padding-right:10px;padding-left:10px}img[_ngcontent-%COMP%]{width:100%;max-width:600px;display:block;margin:0 auto}.chat-img[_ngcontent-%COMP%]{margin-right:5px;color:#454545}h2[_ngcontent-%COMP%]{margin-top:50px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:16px 0}.hidden[_ngcontent-%COMP%]{display:none}.piece-name[_ngcontent-%COMP%]{text-align:center}.titulo[_ngcontent-%COMP%]{color:#fff;border-bottom:5px solid #202123;margin-left:-30px;margin-right:-30px;background-color:#343a40;padding-top:12px}p[_ngcontent-%COMP%]{text-align:left;padding:10px}.paginacion[_ngcontent-%COMP%]{padding:6px 15px 15px;font-weight:700;font-size:16px;letter-spacing:normal;line-height:22px;text-transform:uppercase;color:#454545}.chat-box[_ngcontent-%COMP%]{height:calc(80vh - 191.38px);padding-bottom:10px;color:#fff}.chat-time[_ngcontent-%COMP%]{color:#fff}.font-medium[_ngcontent-%COMP%]{margin-left:2dvh}.chat-content[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{font-size:15px;text-align:center;display:inline-block;padding:12px;color:#252422;background:white;border:1px solid #454545;border-radius:20px;box-shadow:0 0 5px #00000080}.chat-content[_ngcontent-%COMP%]   .box2[_ngcontent-%COMP%]{display:inline-block;padding:15px;color:#fff;background:#eb5e28;border-radius:20px;box-shadow:0 0 5px #0000004d;border:1px solid #391815}.chat-item.odd[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background:#898178;color:#fff;box-shadow:0 0 2px #0000004d}.chat[_ngcontent-%COMP%]{height:calc(20vh - 131.86px);border-top:1px solid #3E5569;padding:10px;margin-bottom:20px}.chat[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:15px}.main-container[_ngcontent-%COMP%]{background-image:url("./media/fondo_desierto-OHKYQJVK.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;height:calc(100dvh - 71px);padding:1em;display:flex;flex-direction:column;justify-content:center}.imagen_portada[_ngcontent-%COMP%]{width:200px}@media (max-height: 850px){.chat-content[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{font-size:13px}.imagen_portada[_ngcontent-%COMP%]{width:150px}}','@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Montserrat,sans-serif;line-height:1.6;color:#333}.mobile-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}img[_ngcontent-%COMP%]{width:100%;height:auto}button[_ngcontent-%COMP%]{margin-top:10px;padding:8px;font-size:14px;font-weight:700;background-color:#f8f9fa;color:#3f4245;border:none;cursor:pointer}#infoContent[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:600px;margin:0 auto}.main-container[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.piece-container[_ngcontent-%COMP%]{padding:10px}img[_ngcontent-%COMP%]{width:100%;max-width:600px;display:block;margin:0 auto}h2[_ngcontent-%COMP%]{margin-top:50px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:16px 0}p[_ngcontent-%COMP%]{margin:0}.hidden[_ngcontent-%COMP%]{display:none}p[_ngcontent-%COMP%]{text-align:left;padding:10px;font-family:Montserrat,sans-serif}.engine-wrapper[_ngcontent-%COMP%]{background-color:#000}']});let i=e;return i})();var sce=Bg(oce());var lce=(()=>{let e=class e{constructor(r,n){this.route=r,this.router=n,this.baseAPI=Fi.apiURL,this.id="",this.tiempoJuego="",this.puntosJuego=""}ngOnInit(){this.id=this.route.snapshot.params.id,this.tiempoJuego=this.formatTiempo(localStorage.getItem("tiempoJuego")||"0"),this.puntosJuego=localStorage.getItem("puntosJuego")||"0"}playAgain(){this.router.navigate(["alcudio/juego/"+this.id])}formatTiempo(r){let n=Number(r),a=Math.trunc(n/60)||0,o=n%60||0;return`${a}m ${o}s`}compartir(){(0,sce.default)(document.documentElement).then(r=>{let n=r.toDataURL("image/png");navigator.share?navigator.share({title:"Captura de pantalla",files:[new File([n],"screenshot.png",{type:"image/png"})],text:"\xA1Mira esta captura de pantalla!"}).then(()=>console.log("Contenido compartido correctamente.")).catch(a=>console.error("Error al compartir:",a)):console.error("La API de Web Share no est\xE1 disponible en este navegador.")})}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(bi))},e.\u0275cmp=St({type:e,selectors:[["app-final-ninos"]],decls:22,vars:2,consts:[[1,"fondo","d-flex","flex-column","justify-content-center","align-items-center"],[1,"card",2,"width","fit-content","height","min-content"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between","align-items-center"],[3,"click"],[1,"mdi","mdi-share",2,"font-size","25px"],[1,"puntuacion-div"],["src","../../../../../assets/images/alcudio/final_alcudio.png","alt","alcudio","id","img"],[1,"puntos"],[1,"row"],[1,"col","text-center"],[1,"card-text","text-center"],[1,"time"],["type","button",1,"btn","btn-secundary","btn-lg","btn-block","btn-volver",3,"click"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3)(4,"span"),Q(5,"Resultados del juego"),O(),L(6,"span",4),ye("click",function(){return a.compartir()}),ce(7,"i",5),O()(),L(8,"div",6),ce(9,"img",7),L(10,"span",8),Q(11),O()(),L(12,"div",9)(13,"div",10)(14,"p",11),Q(15,"Has tardado"),O(),L(16,"span",12),Q(17),O(),L(18,"p",11),Q(19,"en completar el juego."),O()()(),L(20,"button",13),ye("click",function(){return a.playAgain()}),Q(21,"Volver a jugar"),O()()()()),n&2&&(ie(11),We(a.puntosJuego),ie(6),We(a.tiempoJuego))},styles:['@font-face{font-family:Kids;src:url(https://fonts.googleapis.com/css2?family=Noto+Sans+Khojki&display=swap)}.fondo[_ngcontent-%COMP%]{height:calc(100dvh - 71px);width:100dvw;max-width:600px;background-image:url("./media/fondo_desierto-OHKYQJVK.png")!important;background-size:cover;background-clip:padding-box;background-repeat:no-repeat;margin:0 auto}.fondo[_ngcontent-%COMP%]   picture[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{width:250px;height:250px}.time[_ngcontent-%COMP%]{font-size:larger;font-weight:bolder}.btn-volver[_ngcontent-%COMP%]{background-color:#e4ba9e;box-shadow:0 0 6px #0003}.puntuacion-div[_ngcontent-%COMP%]{position:relative;display:inline-block;width:260px!important;height:260px!important}.puntos[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:48px;font-size:36px;color:#000;font-weight:600;margin:0}.card[_ngcontent-%COMP%]{box-shadow:0 0 6px #0003}.card-body[_ngcontent-%COMP%]{max-width:450px;width:85dvw;margin:0 auto;text-align:center}','@import"https://fonts.googleapis.com/css?family=Fira+Sans:300,400,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Montserrat,sans-serif;line-height:1.6;color:#333}.mobile-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}img[_ngcontent-%COMP%]{width:100%;height:auto}button[_ngcontent-%COMP%]{margin-top:10px;padding:8px;font-size:14px;font-weight:700;background-color:#f8f9fa;color:#3f4245;border:none;cursor:pointer}#infoContent[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:600px;margin:0 auto}.main-container[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.piece-container[_ngcontent-%COMP%]{padding:10px}img[_ngcontent-%COMP%]{width:100%;max-width:600px;display:block;margin:0 auto}h2[_ngcontent-%COMP%]{margin-top:50px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:16px 0}p[_ngcontent-%COMP%]{margin:0}.hidden[_ngcontent-%COMP%]{display:none}p[_ngcontent-%COMP%]{text-align:left;padding:10px;font-family:Montserrat,sans-serif}.engine-wrapper[_ngcontent-%COMP%]{background-color:#000}']});let i=e;return i})();function w8e(i,e){if(i&1){let t=Li();L(0,"tr")(1,"div",15),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToPiece(a.id))}),L(2,"div",16),ce(3,"img",17),O(),L(4,"div",18),Q(5),O()()()}if(i&2){let t=e.$implicit,r=it();ie(3),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/piezas/pieza-ejemplo.jpg",wr),ie(2),We(t.nombre)}}var cce=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.route=r,this.pieceService=n,this.salaService=a,this.expoService=o,this.dateService=s,this.breadcrumbService=l,this.router=c,this.idiomaService=u,this.pieces=[],this.piecesAPI=[],this.sala=null,this.exposicion=null,this.idiomas=[],this.paginacion={pagina:1,desde:1,hasta:10,total:0,totalPag:1},this.filtros={nombre:new wt(""),sala:new wt("0"),numero:new wt(10),pagina:1,idioma:new wt("")},this.id=null,this.ocultarDescripcion=!1,this.listadoTitulo="",this.baseAPI=Fi.apiURL}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"";let r=this.route.snapshot.params.idioma;r=="es"?(this.ocultarDescripcion=!0,this.listadoTitulo="Listado de piezas"):r=="en"?this.listadoTitulo="List of pieces":r=="va"&&(this.listadoTitulo="Llista de peces"),this.idiomaService.getAll().subscribe(n=>{this.idiomas=n,this.filtros.idioma.setValue(r),this.filtros.sala.setValue(this.id),this.pieceService.getLista(this.filtros.idioma.value||"es",this.filtros).subscribe(a=>{this.pieces=a.piezas,this.piecesAPI=a.piezas,this.paginacion=a.pagination,console.log(a)})}),this.salaService.getOne(this.id).subscribe(n=>{this.sala=n,n.exposicion_id&&this.expoService.getOne(n.exposicion_id).subscribe(a=>{this.exposicion=a})})}goToPiece(r){let n=this.route.snapshot.params.idioma;this.router.navigate(["../pieza",r,n])}goToExposicion(r){let n=this.route.snapshot.params.idioma,a=["../pieza/exposicion",r,n];console.log("Ruta:",a),this.router.navigate(a)}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(ba),xe(Tn),xe(sn),xe(Bl),xe(vr),xe(bi),xe(Ms))},e.\u0275cmp=St({type:e,selectors:[["app-sala"]],standalone:!0,features:[gr],decls:21,vars:6,consts:[[1,"main-container",2,"background-image","url('../../../../../assets/images/background/patron_fondo2.png')"],[1,"content-container"],[1,"cabecera"],[1,"paginacion",3,"click"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mdi","mdi-arrow-left",2,"margin-right","5px","padding-top","8px"],[1,"cabecera2"],[1,"paginacion"],[1,"text-muted",2,"font-size","12px","padding-left","5px"],[1,"mdi","mdi-menu-right"],[2,"padding-left","15px","padding-top","5px"],[1,"text-muted",3,"hidden"],[2,"padding","10px"],["id","zero_config",1,"table","w-100"],[4,"ngFor","ngForOf"],[1,"card","pl-4","m-2",2,"display","flex","flex-direction","row","align-items","center",3,"click"],[1,"info","align-middle",2,"width","100px"],["alt","Image",2,"width","70px","height","70px","object-fit","cover","aspect-ratio","1 / 1",3,"src"],[1,"info","nombre-pieza","align-middle"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ye("click",function(){return a.exposicion&&a.goToExposicion(a.exposicion.id)}),L(4,"p",4),ce(5,"i",5),Q(6),O()()(),L(7,"div",6)(8,"div",7)(9,"span"),Q(10),L(11,"span",8),ce(12,"i",9),Q(13),O()()(),L(14,"div",10)(15,"span",11),Q(16),O()()(),L(17,"div",12)(18,"table",13)(19,"tbody"),Dt(20,w8e,6,2,"tr",14),O()()()()()),n&2&&(ie(6),_n(" ",a.exposicion==null?null:a.exposicion.nombre," "),ie(4),We(a.sala==null?null:a.sala.nombre),ie(3),_n(" ",a.listadoTitulo,""),ie(2),Le("hidden",!a.ocultarDescripcion),ie(1),We(a.sala==null?null:a.sala.descripcion),ie(4),Le("ngForOf",a.pieces))},dependencies:[lr,ia,Wr,sl],styles:['.main-container[_ngcontent-%COMP%]{max-width:600px;margin-left:auto;margin-right:auto;background-image:url("./media/patron_fondo2-7DM7CU2U.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;font-family:lato,sans-serif;min-height:calc(100dvh - 71.38px)}.card[_ngcontent-%COMP%]{box-shadow:0 0 10px #00000040}.cabecera[_ngcontent-%COMP%]{background-color:#ede9e1;padding:10px;color:#454545;box-shadow:0 1px 1px #0003}.cabecera2[_ngcontent-%COMP%]{padding:10px 10px 0;color:#454545}.center-horizontal[_ngcontent-%COMP%]{justify-content:center}.paginacion[_ngcontent-%COMP%]{padding:4px 4px 4px 16px;font-weight:700;font-size:18px;letter-spacing:normal;line-height:22px;text-transform:uppercase}p[_ngcontent-%COMP%]{margin:0;font-size:16px}a[_ngcontent-%COMP%]{color:gray;text-decoration:none}.imagen-pieza[_ngcontent-%COMP%]{aspect-ratio:1;object-fit:cover}.text-muted[_ngcontent-%COMP%]{font-size:15px}.contenedor-descripcion[_ngcontent-%COMP%]{padding-top:8px;font-size:15px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:22px;text-transform:none;color:#454545}']});let i=e;return i})();function b8e(i,e){if(i&1){let t=Li();L(0,"tr")(1,"div",15),ye("click",function(){let a=zt(t).$implicit,o=it();return Vt(o.goToSala(a.id))}),L(2,"div",16),Q(3),O()()()}if(i&2){let t=e.$implicit;ie(3),We(t.nombre)}}var uce=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.route=r,this.pieceService=n,this.salaService=a,this.expoService=o,this.dateService=s,this.breadcrumbService=l,this.router=c,this.idiomaService=u,this.pieces=[],this.piecesAPI=[],this.salas=null,this.exposicion=null,this.idiomas=[],this.paginacion={pagina:1,desde:1,hasta:10,total:0,totalPag:1},this.filtros={nombre:new wt(""),sala:new wt("0"),numero:new wt(10),pagina:1,idioma:new wt("")},this.id=null,this.ocultarDescripcion=!1,this.titulo="",this.listadoTitulo="",this.baseAPI=Fi.apiURL}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"";let r=this.route.snapshot.params.idioma;r=="es"?(this.ocultarDescripcion=!0,this.titulo="EXPOSICIONES",this.listadoTitulo="Listado de salas"):r=="en"?(this.titulo="EXHIBITIONS",this.listadoTitulo="List of rooms"):r=="va"&&(this.titulo="EXPOSICIONS",this.listadoTitulo="Llista de sals"),this.idiomaService.getAll().subscribe(n=>{this.idiomas=n,this.filtros.idioma.setValue(r),this.filtros.sala.setValue(this.id),this.pieceService.getLista(this.filtros.idioma.value||"es",this.filtros).subscribe(a=>{this.pieces=a.piezas,this.piecesAPI=a.piezas,this.paginacion=a.pagination,console.log(a)})}),this.salaService.getAll().subscribe(n=>{this.salas=n.filter(a=>a.exposicion_id===this.id)}),this.expoService.getOne(this.id).subscribe(n=>{this.exposicion=n})}goToSala(r){let n=this.route.snapshot.params.idioma;this.router.navigate(["../pieza/sala",r,n])}goToExposiciones(){let n=["pieza/exposiciones",this.route.snapshot.params.idioma];console.log("Ruta:",n),this.router.navigate(n)}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(ba),xe(Tn),xe(sn),xe(Bl),xe(vr),xe(bi),xe(Ms))},e.\u0275cmp=St({type:e,selectors:[["app-exposicion"]],standalone:!0,features:[gr],decls:21,vars:6,consts:[[1,"main-container",2,"background-image","url('../../../../../assets/images/background/patron_fondo2.png')"],[1,"content-container"],[1,"cabecera"],[1,"card-body","paginacion",3,"click"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mdi","mdi-arrow-left",2,"margin-right","5px","padding-top","8px"],[1,"cabecera2"],[1,"card-body","paginacion"],[1,"text-muted",2,"font-size","12px"],[1,"mdi","mdi-menu-right"],[2,"padding-left","15px"],[1,"text-muted",3,"hidden"],[2,"padding","10px"],["id","zero_config",1,"table","w-100"],[4,"ngFor","ngForOf"],[1,"card","pl-4","m-2",2,"display","flex","flex-direction","row","align-items","center","height","70px",3,"click"],[1,"info","nombre-pieza","align-middle"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ye("click",function(){return a.goToExposiciones()}),L(4,"p",4),ce(5,"i",5),Q(6),O()()(),L(7,"div",6)(8,"div",7)(9,"span"),Q(10),L(11,"span",8)(12,"i",9),Q(13),O()()()(),L(14,"div",10)(15,"span",11),Q(16),O()()(),L(17,"div",12)(18,"table",13)(19,"tbody"),Dt(20,b8e,4,1,"tr",14),O()()()()()),n&2&&(ie(6),_n(" ",a.titulo," "),ie(4),_n("",a.exposicion==null?null:a.exposicion.nombre," "),ie(3),We(a.listadoTitulo),ie(2),Le("hidden",!a.ocultarDescripcion),ie(1),We(a.exposicion==null?null:a.exposicion.descripcion),ie(4),Le("ngForOf",a.salas))},dependencies:[lr,ia,Wr,sl],styles:['.main-container[_ngcontent-%COMP%]{max-width:600px;margin-left:auto;margin-right:auto;background-image:url("./media/patron_fondo2-7DM7CU2U.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;font-family:lato,sans-serif;min-height:calc(100dvh - 71.38px)}.card[_ngcontent-%COMP%]{box-shadow:0 0 10px #00000040}.cabecera[_ngcontent-%COMP%]{background-color:#ede9e1;padding:10px;color:#454545;box-shadow:0 1px 1px #0003}.cabecera2[_ngcontent-%COMP%]{padding:10px 10px 0;color:#454545}.center-horizontal[_ngcontent-%COMP%]{justify-content:center}.paginacion[_ngcontent-%COMP%]{padding:4px 4px 4px 16px;font-weight:700;font-size:18px;letter-spacing:normal;line-height:22px;text-transform:uppercase}p[_ngcontent-%COMP%]{margin:0;font-size:16px}a[_ngcontent-%COMP%]{color:gray;text-decoration:none}.imagen-pieza[_ngcontent-%COMP%]{aspect-ratio:1;object-fit:cover}.text-muted[_ngcontent-%COMP%]{font-size:15px}.nombre-pieza[_ngcontent-%COMP%]{font-size:17px}']});let i=e;return i})();function S8e(i,e){if(i&1){let t=Li();L(0,"tr")(1,"div",12),ye("click",function(){let a=zt(t).$implicit,o=it(2);return Vt(o.goToExposicion(a.id))}),L(2,"div",13),ce(3,"img",14),O(),L(4,"div",15),Q(5),O()()()}if(i&2){let t=e.$implicit,r=it(2);ie(3),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/exposiciones/alcudia.jpg",wr),ie(2),We(t.nombre)}}function C8e(i,e){if(i&1&&(L(0,"div",9)(1,"table",10)(2,"tbody"),Dt(3,S8e,6,2,"tr",11),O()()()),i&2){let t=it();ie(3),Le("ngForOf",t.exposicionesActivas)}}function E8e(i,e){if(i&1){let t=Li();L(0,"tr")(1,"div",12),ye("click",function(){let a=zt(t).$implicit,o=it(2);return Vt(o.goToExposicion(a.id))}),L(2,"div",13),ce(3,"img",14),O(),L(4,"div",15),Q(5),O()()()}if(i&2){let t=e.$implicit,r=it(2);ie(3),Le("src",t.imagen?r.baseAPI+"/uploads/"+t.imagen:"../../../../../assets/images/exposiciones/alcudia.jpg",wr),ie(2),We(t.nombre)}}function T8e(i,e){if(i&1&&(L(0,"div",9)(1,"table",10)(2,"tbody"),Dt(3,E8e,6,2,"tr",11),O()()()),i&2){let t=it();ie(3),Le("ngForOf",t.exposicionesPasadas)}}var hce=(()=>{let e=class e{constructor(r,n,a,o,s,l,c,u){this.route=r,this.pieceService=n,this.salaService=a,this.expoService=o,this.dateService=s,this.breadcrumbService=l,this.router=c,this.idiomaService=u,this.pieces=[],this.piecesAPI=[],this.salas=null,this.exposiciones=null,this.exposicionesActivas=null,this.exposicionesPasadas=null,this.idiomas=[],this.paginacion={pagina:1,desde:1,hasta:10,total:0,totalPag:1},this.filtros={nombre:new wt(""),sala:new wt("0"),numero:new wt(10),pagina:1,idioma:new wt("")},this.id=null,this.ocultarDescripcion=!1,this.pestanaSeleccionada=1,this.titulo="",this.activas="",this.pasadas="",this.baseAPI=Fi.apiURL}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"";let r=this.route.snapshot.params.idioma;r=="es"?(this.ocultarDescripcion=!0,this.titulo="EXPOSICIONES",this.activas="Activas",this.pasadas="Pasadas"):r=="en"?(this.titulo="EXHIBITIONS",this.activas="Active",this.pasadas="Previous"):r=="va"&&(this.titulo="EXPOSICIONS",this.activas="Actives",this.pasadas="Passades"),this.idiomaService.getAll().subscribe(n=>{this.idiomas=n,this.filtros.idioma.setValue(r),this.filtros.sala.setValue(this.id),this.pieceService.getLista(this.filtros.idioma.value||"es",this.filtros).subscribe(a=>{this.pieces=a.piezas,this.piecesAPI=a.piezas,this.paginacion=a.pagination,console.log(a)})}),this.salaService.getAll().subscribe(n=>{this.salas=n}),this.expoService.getAll().subscribe(n=>{let a=new Date;this.exposiciones=n,this.exposicionesActivas=this.exposiciones.filter(o=>{let s=o.fecha_fin;return s?new Date(s)>a:!0}),this.exposicionesPasadas=this.exposiciones.filter(o=>{let s=o.fecha_fin;return s?new Date(s)<=a:!1})})}goToExposicion(r){let n=this.route.snapshot.params.idioma;this.router.navigate(["../pieza/exposicion",r,n])}};e.\u0275fac=function(n){return new(n||e)(xe(Ir),xe(ba),xe(Tn),xe(sn),xe(Bl),xe(vr),xe(bi),xe(Ms))},e.\u0275cmp=St({type:e,selectors:[["app-exposicion"]],standalone:!0,features:[gr],decls:15,vars:9,consts:[[1,"main-container",2,"background-image","url('../../../../../assets/images/background/patron_fondo2.png')"],[1,"content-container"],[1,"cabecera"],[1,"card-body","paginacion"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"row","justify-content-center"],[1,"col-6"],[1,"menu-opcion",3,"click"],["style","padding: 10px; padding-top: 20px;",4,"ngIf"],[2,"padding","10px","padding-top","20px"],["id","zero_config",1,"table","w-100"],[4,"ngFor","ngForOf"],[1,"card","pl-4","m-2",2,"display","flex","flex-direction","row","align-items","center","height","90px",3,"click"],[1,"info","align-middle",2,"width","120px"],["alt","Image",2,"width","90px","height","90px","object-fit","cover","aspect-ratio","1 / 1",3,"src"],[1,"info","nombre-pieza","align-middle"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Q(5),O()(),L(6,"div",5)(7,"div",6)(8,"div",7),ye("click",function(){return a.pestanaSeleccionada=1}),Q(9),O()(),L(10,"div",6)(11,"div",7),ye("click",function(){return a.pestanaSeleccionada=2}),Q(12),O()()()(),Dt(13,C8e,4,1,"div",8)(14,T8e,4,1,"div",8),O()()),n&2&&(ie(5),_n(" ",a.titulo," "),ie(3),so("selected",a.pestanaSeleccionada===1),ie(1),We(a.activas),ie(2),so("selected",a.pestanaSeleccionada===2),ie(1),We(a.pasadas),ie(1),Le("ngIf",a.pestanaSeleccionada===1),ie(1),Le("ngIf",a.pestanaSeleccionada===2))},dependencies:[lr,ia,vn,Wr,sl],styles:['.main-container[_ngcontent-%COMP%]{max-width:600px;margin-left:auto;margin-right:auto;background-image:url("./media/patron_fondo2-7DM7CU2U.png");background-size:cover;background-clip:padding-box;background-repeat:no-repeat;font-family:lato,sans-serif;min-height:calc(100dvh - 71.38px)}.card[_ngcontent-%COMP%]{box-shadow:0 0 10px #00000040}.cabecera[_ngcontent-%COMP%]{background-color:#ede9e1;color:#454545;box-shadow:0 1px 1px #0003}.cabecera2[_ngcontent-%COMP%]{padding:10px 10px 0;color:#454545}.row.justify-content-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.menu-opcion[_ngcontent-%COMP%]{font-size:16px;cursor:pointer;text-align:center;padding:10px;border-bottom:3px solid transparent}.menu-opcion.selected[_ngcontent-%COMP%]{border-bottom-color:#1f262d}.center-horizontal[_ngcontent-%COMP%]{justify-content:center}.paginacion[_ngcontent-%COMP%]{padding:4px 4px 0 16px;font-weight:700;font-size:18px;letter-spacing:normal;line-height:22px;text-transform:uppercase}p[_ngcontent-%COMP%]{margin:0;padding:10px}a[_ngcontent-%COMP%]{color:gray;text-decoration:none}.imagen-pieza[_ngcontent-%COMP%]{aspect-ratio:1;object-fit:cover}.text-muted[_ngcontent-%COMP%]{font-size:15px}.nombre-pieza[_ngcontent-%COMP%]{font-size:18px}']});let i=e;return i})();var M8e=[{path:"alcudio",component:q5,children:[{path:"resultados/:id",component:lce},{path:":id",component:ace},{path:"juego/:id",component:Ble}]},{path:"pieza",component:q5,children:[{path:"exposiciones/:idioma",component:hce},{path:"self_engine/:id",component:mB},{path:"3js",component:Nle},{path:"sala/:id/:idioma",component:cce},{path:"exposicion/:id/:idioma",component:uce},{path:":id/:idioma",component:nce}]}],dce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Ia.forChild(M8e),Ia]});let i=e;return i})();var fce=(()=>{let e=class e{constructor(){}ngAfterViewInit(){let r=new eu,n=new ea(75,1,.1,1e3);n.position.set(.1,.3,2),n.position.z=1;let a,o;window.innerWidth<=768?(a=380,o=280,n.position.z=.9):(a=550,o=410);let s=new cc({alpha:!0});s.setSize(a,o),s.setClearColor(0,0),s.shadowMap.enabled=!0,s.shadowMap.type=O5;let l=document.getElementById("canvas-container");l?l.appendChild(s.domElement):console.error("Canvas container not found.");let c=new eA(16777215,.5);c.position.set(5,10,7),c.castShadow=!0,r.add(c);let u=new ru(16777215,.5);r.add(u);let d=new w1().load("../../../assets/images/lineas.jpg");new aA().load("../../../assets/modelos3D/Lucerna vidriada.glb",y=>{r.add(y.scene),y.scene.traverse(g=>{if(g instanceof Ma){let x=new Yp({map:d,metalness:0,emissive:0,emissiveIntensity:1});g.material=x,g.receiveShadow=!0}}),y.scene.rotation.y=Math.PI/2},void 0,y=>{console.error("Error loading GLTF model",y)});function m(){if(requestAnimationFrame(m),r.children.length>0){let y=r.children[r.children.length-1];y.rotation.y+=.01}s.render(r,n)}m()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-landing"]],decls:84,vars:0,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"],[1,"main-container"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","justify-content-center"],[1,"d-flex","align-items-center"],[1,"navbar-nav"],[1,"nav-item"],["href","#",1,"nav-link",2,"padding-top","6px"],["src","../../assets/images/logos/logo_arte.png","width","40px","alt","logo"],["href","#",1,"nav-link","active"],["href","/conocenos",1,"nav-link"],["href","/contacto",1,"nav-link"],[1,"contenedor","justify-content-center","d-flex","align-items-center"],[1,"que-es-arte-section","pb-2"],[1,"container"],[1,"row"],[1,"col-md-6","pr-md-0","mb-md-0"],[1,"pb-1","pt-4"],["src","../../assets/images/logos/logo_arte.png","width","180px","alt","logo"],[1,"titulo"],[1,"highlight"],[1,"texto","text-muted"],[1,"col-md-6","mb-2"],["id","canvas-container"],[1,"col-md-4","mb-4"],[1,"card","h-100"],[1,"p-3","pl-3","pr-3","text-center"],[1,"mdi","mdi-web",2,"font-size","45px"],[1,"card-text"],["href","https://arte.ovh/withu/",1,"btn","btn-custom","btn-block"],[1,"mdi","mdi-account",2,"font-size","45px"],["href","/administrador",1,"btn","btn-custom","btn-block"],[1,"mdi","mdi-cube",2,"font-size","45px"],["href","pieza/e3bef2ee-a656-4d5c-9d7e-91e4a8a31098/es",1,"btn","btn-custom","btn-block"],[1,"footer","text-center"],[1,"footer-content"],["href","https://arte.ovh/withu",1,"mr-2"],["href","politica-de-privacidad",1,"ml-2"],[1,"redes-sociales"],["href","https://www.instagram.com/arte_abp_ua","target","_blank"],[1,"fab","fa-instagram","pr-4"],["href","https://www.tiktok.com/@arte_abp","target","_blank"],[1,"fab","fa-tiktok"]],template:function(n,a){n&1&&(ce(0,"link",0),L(1,"div",1)(2,"nav",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),ce(8,"img",8),O()(),L(9,"li",6)(10,"a",9),Q(11,"Inicio"),O()(),L(12,"li",6)(13,"a",10),Q(14,"Con\xF3cenos"),O()(),L(15,"li",6)(16,"a",11),Q(17,"Contacto"),O()()()()()(),L(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17),ce(24,"img",18),O(),L(25,"div",19)(26,"p"),Q(27,"La "),L(28,"span",20),Q(29,"nueva era"),O(),Q(30," de la experiencia cultural"),O()(),L(31,"div",21)(32,"p"),Q(33,"Descubre museos como nunca antes. Con la tecnolog\xEDa de la reconstrucci\xF3n 3D, podr\xE1s explorar recreaciones precisas de artefactos hist\xF3ricos, desvelando sus misterios y contemplando su esplendor original."),O(),L(34,"p"),Q(35,"\xA1\xDAnete a nosotros y da vida a la historia con "),L(36,"b"),Q(37,"ARte"),O(),Q(38,"!"),O()()(),L(39,"div",22),ce(40,"div",23),O(),L(41,"div",24)(42,"div",25)(43,"div",26),ce(44,"i",27),L(45,"h4"),Q(46,"Web Corporativa"),O(),L(47,"p",28),Q(48,"Explora nuestra web corporativa y descubre m\xE1s sobre nosotros."),O(),L(49,"a",29),Q(50,"Visitar"),O()()()(),L(51,"div",24)(52,"div",25)(53,"div",26),ce(54,"i",30),L(55,"h4"),Q(56,"\xC1rea de Administraci\xF3n"),O(),L(57,"p",28),Q(58,"Accede al \xE1rea de administraci\xF3n, para gestionar el museo."),O(),L(59,"a",31),Q(60,"Acceder"),O()()()(),L(61,"div",24)(62,"div",25)(63,"div",26),ce(64,"i",32),L(65,"h4"),Q(66,"\xA1Pru\xE9balo!"),O(),L(67,"p",28),Q(68,"Explora una pieza a modo de prueba y sum\xE9rgete en el mundo de ARte."),O(),L(69,"a",33),Q(70,"Explorar"),O()()()()()()()()(),L(71,"footer",34)(72,"div",35),Q(73," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(74,"a",36),Q(75,"WithU"),O(),Q(76," | "),L(77,"a",37),Q(78,"Pol\xEDtica de Privacidad y Cookies"),O()(),L(79,"div",38)(80,"a",39),ce(81,"i",40),O(),L(82,"a",41),ce(83,"i",42),O()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Noto+Sans+Khojki&display=swap";body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:calc(100% - 53px);margin:0;padding:0}.card[_ngcontent-%COMP%]{background-color:#3d4148;box-shadow:0 2px 2px #000c;margin:0 auto}.card-body[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.container[_ngcontent-%COMP%]{width:900px}.main-container[_ngcontent-%COMP%]{background-color:#1f262d;min-height:calc(100dvh - 53px)}.contenedor[_ngcontent-%COMP%]{min-height:calc(100dvh - 105px)}.footer[_ngcontent-%COMP%]{height:51px;width:100%;background-color:#2a2e33;color:#f2efe8}.que-es-arte-section[_ngcontent-%COMP%]{color:#fff;margin:0}.titulo[_ngcontent-%COMP%]{font-family:Cinzel,serif;font-size:2.4rem;line-height:1.3}.titulo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}.texto[_ngcontent-%COMP%]{font-size:15px}.texto[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5}.highlight[_ngcontent-%COMP%]{font-weight:700;color:#f2efe8}.btn-custom[_ngcontent-%COMP%]{background:linear-gradient(60deg,#845a3c,#a77552);color:#fff;box-shadow:0 1px 1px #0006;border-radius:.5rem;padding:8px;font-size:15px}.card-container[_ngcontent-%COMP%]{margin-left:180px;margin-right:180px;color:#f2efe8}.saber-mas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.saber-mas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:5px}.flecha-abajo[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid black}.navbar[_ngcontent-%COMP%]{background-color:#2a2e33}.navbar-collapse[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:20px;font-size:15px}.navbar-collapse[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#f2efe8}.formulario[_ngcontent-%COMP%]{height:50%}.descripcion[_ngcontent-%COMP%]{height:40%;color:#f2efe8;font-size:16px;padding-left:50px;padding-right:180px}a[_ngcontent-%COMP%]{color:#a1aab2}.footer[_ngcontent-%COMP%]{position:relative;background-color:#2a2e33;color:#f2efe8;padding:10px 0;display:flex;justify-content:center;align-items:center}.footer-content[_ngcontent-%COMP%]{text-align:center}.redes-sociales[_ngcontent-%COMP%]{position:absolute;right:40px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2efe8;margin-left:10px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#a1aab2}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.que-es-arte-section[_ngcontent-%COMP%]{margin-bottom:20px}.descripcion[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.contenedor[_ngcontent-%COMP%]{padding:6px}.redes-sociales[_ngcontent-%COMP%]{position:fixed}.footer[_ngcontent-%COMP%]{height:100px}}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:100%}.card-body[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}}']});let i=e;return i})();var I8e=[{path:"indicadores",component:FS,children:[{path:"barchart",component:Ov},{path:"linechart",component:Fv}]}],pce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Ia.forChild(I8e),Ia]});let i=e;return i})();var Ace=(()=>{let e=class e{constructor(r,n,a){this.http=r,this.router=n,this.cookies=a}contacto(r){r.preventDefault()}};e.\u0275fac=function(n){return new(n||e)(xe(Un),xe(bi),xe(Kn))},e.\u0275cmp=St({type:e,selectors:[["app-contacto"]],decls:73,vars:0,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"],[1,"main-container"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","justify-content-center"],[1,"d-flex","align-items-center"],[1,"navbar-nav"],[1,"nav-item"],["href","../",1,"nav-link",2,"padding-top","6px"],["src","../../assets/images/logos/logo_arte.png","width","40px","alt","logo"],["href","../",1,"nav-link"],["href","../conocenos",1,"nav-link","active"],["href","#",1,"nav-link"],[1,"contenedor","justify-content-center","d-flex","align-items-center"],[1,"container","pt-5","pb-5"],[1,"row","justify-content-center"],[1,"descripcion"],[1,"titulo","pb-1"],[1,"formulario","col-md-11","pt-3"],[1,"card"],[1,"row","align-items-center"],[1,"col-md-5","p-md-4","p-sm-0",2,"border-right","1px solid #787e83"],[1,"card-body"],[1,"text-center"],[1,"pb-3","pt-3",2,"font-size","25px","color","#F2EFE8"],[1,"text-muted",2,"font-size","16px"],["href","https://www.instagram.com/arte_abp_ua","target","_blank"],[1,"fab","fa-instagram","pr-4"],["href","https://www.tiktok.com/@arte_abp","target","_blank"],[1,"fab","fa-tiktok"],[1,"col-md-7","col-sm-12","p-md-4","p-sm-0"],[3,"submit"],[1,"text-muted","pb-3",2,"font-size","25px"],[1,"mb-3"],["type","text","placeholder","Nombre",1,"form-control"],["type","password","placeholder","Email",1,"form-control"],["type","text","placeholder","Asunto",1,"form-control"],["placeholder","Mensaje",1,"form-control"],["type","submit",1,"btn","btn-block","p-2","btn-custom"],[1,"footer","text-center"],[1,"footer-content"],["href","https://arte.ovh/withu",1,"mr-2"],["href","politica-de-privacidad",1,"ml-2"],[1,"redes-sociales"]],template:function(n,a){n&1&&(ce(0,"link",0),L(1,"div",1)(2,"nav",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),ce(8,"img",8),O()(),L(9,"li",6)(10,"a",9),Q(11,"Inicio"),O()(),L(12,"li",6)(13,"a",10),Q(14,"Con\xF3cenos"),O()(),L(15,"li",6)(16,"a",11),Q(17,"Contacto"),O()()()()()(),L(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"h2",16),Q(23,"Contacto"),O(),L(24,"p"),Q(25,"En ARte, nos apasiona la interacci\xF3n con nuestros visitantes y queremos asegurarnos de proporcionarte toda la informaci\xF3n que puedas necesitar. No solo estamos aqu\xED para responder a tus preguntas y comentarios, sino que tambi\xE9n nos encantar\xEDa explorar posibles oportunidades de colaboraci\xF3n."),O(),L(26,"p"),Q(27,"Si prefieres enviarnos un mensaje directo, utiliza nuestro formulario de contacto a continuaci\xF3n."),O()(),L(28,"div",17)(29,"div",18)(30,"div",19)(31,"div",20)(32,"div",21)(33,"div",22)(34,"div",23)(35,"span"),Q(36,"Formulario de contacto"),O()(),L(37,"p",24),Q(38,"Gracias por considerar ARte. Estaremos encantados de conectarnos contigo y esperamos brindarle la informaci\xF3n que necesitas."),O(),L(39,"a",25),ce(40,"i",26),O(),L(41,"a",27),ce(42,"i",28),O()()()(),L(43,"div",29)(44,"div",21)(45,"form",30),ye("submit",function(s){return a.contacto(s)}),L(46,"div",31),ce(47,"span"),O(),L(48,"div",32),ce(49,"input",33),O(),L(50,"div",32),ce(51,"input",34),O(),L(52,"div",32),ce(53,"input",35),O(),L(54,"div",32),ce(55,"textarea",36),O(),L(56,"div",22)(57,"button",37),Q(58,"ENVIAR"),O()(),ce(59,"br"),O()()()()()()()()()(),L(60,"footer",38)(61,"div",39),Q(62," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(63,"a",40),Q(64,"WithU"),O(),Q(65," | "),L(66,"a",41),Q(67,"Pol\xEDtica de Privacidad y Cookies"),O()(),L(68,"div",42)(69,"a",25),ce(70,"i",26),O(),L(71,"a",27),ce(72,"i",28),O()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Noto+Sans+Khojki&display=swap";body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:calc(100% - 53px);margin:0;padding:0}.card[_ngcontent-%COMP%]{background-color:#3d4148;box-shadow:0 2px 2px #000c;margin:0 auto}.card-body[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.container[_ngcontent-%COMP%]{width:900px}.main-container[_ngcontent-%COMP%]{background-color:#1f262d;min-height:calc(100dvh - 53px)}.contenedor[_ngcontent-%COMP%]{min-height:calc(100dvh - 105px)}.footer[_ngcontent-%COMP%]{height:51px;width:100%;background-color:#2a2e33;color:#f2efe8}.que-es-arte-section[_ngcontent-%COMP%]{color:#fff;margin:0}.titulo[_ngcontent-%COMP%]{font-family:Cinzel,serif;font-size:2.4rem;line-height:1.3;border-bottom:1px solid #A1AAB2;margin-bottom:20px}.titulo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}.texto[_ngcontent-%COMP%]{font-size:15px}.texto[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5}.highlight[_ngcontent-%COMP%]{font-weight:700;color:#f2efe8}.btn-custom[_ngcontent-%COMP%]{background:linear-gradient(60deg,#845a3c,#a77552);color:#fff;box-shadow:0 1px 1px #0006;border-radius:.5rem;padding:8px;font-size:15px}.card-container[_ngcontent-%COMP%]{margin-left:180px;margin-right:180px;color:#f2efe8}.saber-mas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.saber-mas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:5px}.flecha-abajo[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid black}.navbar[_ngcontent-%COMP%]{background-color:#2a2e33}.navbar-collapse[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:20px;font-size:15px}.navbar-collapse[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#f2efe8}.formulario[_ngcontent-%COMP%]{height:50%}.descripcion[_ngcontent-%COMP%]{height:40%;color:#f2efe8;font-size:16px;padding-left:50px;padding-right:60px}a[_ngcontent-%COMP%]{color:#a1aab2}.footer[_ngcontent-%COMP%]{position:relative;background-color:#2a2e33;color:#f2efe8;padding:10px 0;display:flex;justify-content:center;align-items:center}.footer-content[_ngcontent-%COMP%]{text-align:center}.redes-sociales[_ngcontent-%COMP%]{position:absolute;right:40px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2efe8;margin-left:10px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#a1aab2}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.que-es-arte-section[_ngcontent-%COMP%]{margin-bottom:20px}.descripcion[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.redes-sociales[_ngcontent-%COMP%]{position:fixed}.footer[_ngcontent-%COMP%]{height:100px}}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:100%}.card-body[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.col-md-5[_ngcontent-%COMP%]{border-right:none!important}}']});let i=e;return i})();var mce=(()=>{let e=class e{constructor(){}ngAfterViewInit(){let r=new eu,n=new ea(75,1,.1,1e3);n.position.set(0,.3,2),n.position.z=1;let a,o;window.innerWidth<=768?(a=380,o=280,n.position.z=.8):(a=450,o=240);let s=new cc({alpha:!0});s.setSize(a,o),s.setClearColor(0,0);let l=document.getElementById("canvas-container");l?l.appendChild(s.domElement):console.error("Canvas container not found.");let c=new ru(16777215,.5);r.add(c),new aA().load("../../../assets/modelos3D/Lucerna vidriada.glb",d=>{r.add(d.scene),d.scene.traverse(f=>{if(f instanceof Ma){let m=f.material;m.metalness=0,m.emissive.setHex(0),m.emissiveIntensity=1,m.map&&(m.map.encoding=Hd)}}),d.scene.rotation.y=Math.PI/2},void 0,d=>{console.error("Error loading GLTF model",d)});function h(){if(requestAnimationFrame(h),r.children.length>0){let d=r.children[r.children.length-1];d.rotation.y+=.01}s.render(r,n)}h()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-conocer"]],decls:101,vars:0,consts:[[1,"main-container"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","justify-content-center"],[1,"d-flex","align-items-center"],[1,"navbar-nav"],[1,"nav-item"],["href","../",1,"nav-link",2,"padding-top","6px"],["src","../../assets/images/logos/logo_arte.png","width","40px","alt","logo"],["href","../",1,"nav-link"],["href","#",1,"nav-link","active"],["href","../contacto",1,"nav-link"],[1,"container","pt-5","pb-5"],[1,"row"],[1,"descripcion",2,"color","#F2EFE8","padding-bottom","20px"],[1,"titulo","pb-1"],[1,"col-md-4","pt-3"],[1,"card","p-4","h-280"],[1,"titulo2",2,"text-align","center","color","#F2EFE8","font-size","16px"],[1,"pb-2",2,"font-size","24px","color","#F2EFE8"],[1,"text-muted"],[1,"col-md-8","pt-3"],[1,"col-md-4","imagenes-col4"],["src","../../../../assets/images/interfaces/piezas (4).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],["src","../../../../assets/images/interfaces/piezas (2).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],["src","../../../../assets/images/interfaces/piezas (3).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],[1,"col-md-4","pt-4"],[1,"col-md-8","pt-4"],["src","../../../../assets/images/interfaces/alcudio (1).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],["src","../../../../assets/images/interfaces/alcudio (2).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],["src","../../../../assets/images/interfaces/alcudio (3).jpg","alt","Busqueda del tesoro",1,"responsive-img",2,"padding-right","10px"],["id","carouselExampleControls","data-ride","carousel",1,"carousel","slide","mt-2"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","../../../../assets/images/interfaces/admin (1).png","alt","Slide 1",1,"d-block","w-100"],[1,"carousel-item"],["src","../../../../assets/images/interfaces/admin (2).png","alt","Slide 2",1,"d-block","w-100"],["src","../../../../assets/images/interfaces/admin (5).png","alt","Slide 2",1,"d-block","w-100"],["src","../../../../assets/images/interfaces/admin (4).png","alt","Slide 2",1,"d-block","w-100"],["src","../../../../assets/images/interfaces/admin (3).png","alt","Slide 2",1,"d-block","w-100"],[1,"footer","text-center"],[1,"footer-content"],["href","https://arte.ovh/withu",1,"mr-2"],["href","politica-de-privacidad",1,"ml-2"],[1,"redes-sociales"],["href","https://www.instagram.com/arte_abp_ua","target","_blank"],[1,"fab","fa-instagram","pr-4"],["href","https://www.tiktok.com/@arte_abp","target","_blank"],[1,"fab","fa-tiktok"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),ce(7,"img",7),O()(),L(8,"li",5)(9,"a",8),Q(10,"Inicio"),O()(),L(11,"li",5)(12,"a",9),Q(13,"Con\xF3cenos"),O()(),L(14,"li",5)(15,"a",10),Q(16,"Contacto"),O()()()()()(),L(17,"div",11)(18,"div",12)(19,"div",13)(20,"h2",14),Q(21,"Conoce ARte"),O(),L(22,"p"),Q(23,"Descubre una nueva dimensi\xF3n para tu museo con nuestra plataforma interactiva. Mediante c\xF3digos QR, tus visitantes podr\xE1n explorar modelos 3D, escuchar relatos fascinantes y aprender sobre cada pieza en varios idiomas. Nuestro asistente virtual Alcudio convierte cada visita en una aventura, especialmente para los ni\xF1os. Adem\xE1s, con nuestro panel de administraci\xF3n, gestionar exposiciones y supervisar el rendimiento del museo nunca ha sido tan sencillo y eficiente."),O()(),L(24,"div",12)(25,"div",15)(26,"div",16)(27,"div",17)(28,"div",18)(29,"span"),Q(30,"Piezas QR interactivas"),O()(),L(31,"p",19),Q(32,"\xA1Descubre una experiencia \xFAnica al escanear nuestro c\xF3digo QR!"),O(),L(33,"p",19),Q(34,"Sum\xE9rgete en detallados modelos 3D, escucha relatos y explora el significado de cada pieza. "),O(),L(35,"p",19),Q(36,"Adem\xE1s, nuestra interfaz est\xE1 dise\xF1ada multilingue y con pictogramas, brindando una experiencia inclusiva para todos."),O()()()(),L(37,"div",20)(38,"div",12)(39,"div",21),ce(40,"img",22),O(),L(41,"div",21),ce(42,"img",23),O(),L(43,"div",21),ce(44,"img",24),O()()()(),L(45,"div",12)(46,"div",25)(47,"div",16)(48,"div",17)(49,"div",18)(50,"span"),Q(51,"Asistente virtual Alcudio"),O()(),L(52,"p",19),Q(53,"Alcudio ofrece una experiencia \xFAnica para los ni\xF1os, gui\xE1ndolos en la b\xFAsqueda de las piezas del museo las cuales deber\xE1n escanear para recuperar."),O(),L(54,"p",19),Q(55,"Esta experiencia din\xE1mica y diferente permite una inmersi\xF3n total en el mundo del museo, elevando la visita a otro nivel."),O()()()(),L(56,"div",26)(57,"div",12)(58,"div",21),ce(59,"img",27),O(),L(60,"div",21),ce(61,"img",28),O(),L(62,"div",21),ce(63,"img",29),O()()()(),L(64,"div",12)(65,"div",25)(66,"div",16)(67,"div",17)(68,"div",18)(69,"span"),Q(70,"Panel de administraci\xF3n"),O()(),L(71,"p",19),Q(72,"Descubre nuestro panel de administraci\xF3n para gestionar las exposiciones, piezas o juegos con total detalle."),O(),L(73,"p",19),Q(74,"Una plataforma ideal para potenciar la experiencia del museo y seguir de cerca su rendimiento a trav\xE9s de indicadores detallados."),O()()()(),L(75,"div",26)(76,"div",30)(77,"div",31)(78,"div",32),ce(79,"img",33),O(),L(80,"div",34),ce(81,"img",35),O(),L(82,"div",34),ce(83,"img",36),O(),L(84,"div",34),ce(85,"img",37),O(),L(86,"div",34),ce(87,"img",38),O()()()()()()()(),L(88,"footer",39)(89,"div",40),Q(90," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(91,"a",41),Q(92,"WithU"),O(),Q(93," | "),L(94,"a",42),Q(95,"Pol\xEDtica de Privacidad y Cookies"),O()(),L(96,"div",43)(97,"a",44),ce(98,"i",45),O(),L(99,"a",46),ce(100,"i",47),O()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Noto+Sans+Khojki&display=swap";body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:calc(100% - 53px);margin:0;padding:0}.card[_ngcontent-%COMP%]{background-color:#3d4148;box-shadow:0 2px 2px #000c;margin:0 auto}.card-body[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.container[_ngcontent-%COMP%]{width:900px}.main-container[_ngcontent-%COMP%]{background-color:#1f262d;min-height:calc(100dvh - 53px)}.contenedor[_ngcontent-%COMP%]{min-height:calc(100dvh - 105px)}.footer[_ngcontent-%COMP%]{height:51px;width:100%;background-color:#2a2e33;color:#f2efe8}.que-es-arte-section[_ngcontent-%COMP%]{color:#fff;margin:0}.titulo[_ngcontent-%COMP%]{font-family:Cinzel,serif;font-size:2.4rem;line-height:1.3;border-bottom:1px solid #A1AAB2;margin-bottom:20px}.titulo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}.titulo2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.texto[_ngcontent-%COMP%]{font-size:15px}.texto[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5}.highlight[_ngcontent-%COMP%]{font-weight:700;color:#f2efe8}.btn-custom[_ngcontent-%COMP%]{background:linear-gradient(60deg,#845a3c,#a77552);color:#fff;box-shadow:0 1px 1px #0006;border-radius:.5rem;padding:8px;font-size:15px}.card-container[_ngcontent-%COMP%]{margin-left:180px;margin-right:180px;color:#f2efe8}.saber-mas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.saber-mas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:5px}.flecha-abajo[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid black}.navbar[_ngcontent-%COMP%]{background-color:#2a2e33}.navbar-collapse[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:20px;font-size:15px}.navbar-collapse[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#f2efe8}.formulario[_ngcontent-%COMP%]{height:50%}.descripcion[_ngcontent-%COMP%]{height:40%;color:#f2efe8;font-size:16px;padding-right:60px}.carousel[_ngcontent-%COMP%]{border:1px solid black}a[_ngcontent-%COMP%]{color:#a1aab2}.footer[_ngcontent-%COMP%]{position:relative;background-color:#2a2e33;color:#f2efe8;padding:10px 0;display:flex;justify-content:center;align-items:center}.footer-content[_ngcontent-%COMP%]{text-align:center}.redes-sociales[_ngcontent-%COMP%]{position:absolute;right:40px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2efe8;margin-left:10px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#a1aab2}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.imagenes-col4[_ngcontent-%COMP%]{flex:0 1 50%}.responsive-img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:100%;box-sizing:border-box}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.que-es-arte-section[_ngcontent-%COMP%]{margin-bottom:20px}.descripcion[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.row[_ngcontent-%COMP%]{padding:5px}.redes-sociales[_ngcontent-%COMP%]{position:fixed}.footer[_ngcontent-%COMP%]{height:100px}}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:100%}.card-body[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.col-md-5[_ngcontent-%COMP%]{border-right:none!important}}']});let i=e;return i})();var gce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-politica-privacidad"]],standalone:!0,features:[gr],decls:74,vars:0,consts:[[1,"main-container"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","justify-content-center"],[1,"d-flex","align-items-center"],[1,"navbar-nav"],[1,"nav-item"],["href","../",1,"nav-link",2,"padding-top","6px"],["src","../../assets/images/logos/logo_arte.png","width","40px","alt","logo"],["href","../",1,"nav-link"],["href","../conocenos",1,"nav-link","active"],["href","#",1,"nav-link"],[1,"contenedor","justify-content-center","d-flex","align-items-center"],[1,"container","pt-5","pb-5"],[1,"row","justify-content-center"],[1,"descripcion"],[1,"titulo","pb-3"],[1,"footer","text-center"],[1,"footer-content"],["href","https://arte.ovh/withu",1,"mr-2"],["href","politica-de-privacidad",1,"ml-2"],[1,"redes-sociales"],["href","https://www.instagram.com/arte_abp_ua","target","_blank"],[1,"fab","fa-instagram","pr-4"],["href","https://www.tiktok.com/@arte_abp","target","_blank"],[1,"fab","fa-tiktok"]],template:function(n,a){n&1&&(L(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),ce(7,"img",7),O()(),L(8,"li",5)(9,"a",8),Q(10,"Inicio"),O()(),L(11,"li",5)(12,"a",9),Q(13,"Con\xF3cenos"),O()(),L(14,"li",5)(15,"a",10),Q(16,"Contacto"),O()()()()()(),L(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"h2",15),Q(22,"Pol\xEDtica de privacidad"),O(),L(23,"p"),Q(24," En ARte, estamos comprometidos con la protecci\xF3n de tu privacidad. Esta Pol\xEDtica de Privacidad explica c\xF3mo recopilamos, usamos y protegemos la informaci\xF3n personal que nos proporcionas cuando visitas nuestro sitio web. "),O(),L(25,"h3"),Q(26,"Informaci\xF3n que recopilamos"),O(),L(27,"p"),Q(28," Cuando visitas nuestro sitio web, podemos recopilar cierta informaci\xF3n personal, como tu nombre, direcci\xF3n de correo electr\xF3nico y otra informaci\xF3n de contacto que nos proporciones voluntariamente. "),O(),L(29,"h3"),Q(30,"Uso de la informaci\xF3n"),O(),L(31,"p"),Q(32," Utilizamos la informaci\xF3n que recopilamos para diversos fines, incluyendo: "),O(),L(33,"ul")(34,"li")(35,"p"),Q(36,"Proporcionar y mejorar nuestros servicios."),O()(),L(37,"li")(38,"p"),Q(39,"Personalizar tu experiencia en nuestro sitio web."),O()(),L(40,"li")(41,"p"),Q(42,"Comunicarnos contigo sobre productos, servicios y promociones."),O()()(),L(43,"h3"),Q(44,"Protecci\xF3n de la informaci\xF3n"),O(),L(45,"p"),Q(46," Tomamos medidas para proteger la seguridad de tu informaci\xF3n personal y para garantizar su confidencialidad. Sin embargo, debes tener en cuenta que ninguna transmisi\xF3n de datos a trav\xE9s de Internet o cualquier sistema de almacenamiento de datos puede garantizar una seguridad absoluta. "),O(),L(47,"h3"),Q(48,"Divulgaci\xF3n de informaci\xF3n"),O(),L(49,"p"),Q(50," No vendemos, alquilamos ni compartimos tu informaci\xF3n personal con terceros, excepto seg\xFAn lo permita esta Pol\xEDtica de Privacidad o cuando estemos legalmente obligados a hacerlo. "),O(),L(51,"h3"),Q(52,"Tus derechos"),O(),L(53,"p"),Q(54," Tienes derecho a acceder, corregir y eliminar la informaci\xF3n personal que tenemos sobre ti. Si deseas ejercer estos derechos, cont\xE1ctanos utilizando la informaci\xF3n de contacto proporcionada al final de esta Pol\xEDtica de Privacidad. "),O(),L(55,"h3"),Q(56,"Cambios en esta pol\xEDtica"),O(),L(57,"p"),Q(58," Nos reservamos el derecho de actualizar esta Pol\xEDtica de Privacidad en cualquier momento. Te recomendamos que revises peri\xF3dicamente esta p\xE1gina para estar al tanto de cualquier cambio. El uso continuado de nuestro sitio web despu\xE9s de la publicaci\xF3n de cambios en esta Pol\xEDtica de Privacidad constituir\xE1 tu aceptaci\xF3n de dichos cambios. "),O(),L(59,"p"),Q(60," Si tienes alguna pregunta o inquietud sobre nuestra Pol\xEDtica de Privacidad, no dudes en contactarnos. "),O()()()()()(),L(61,"footer",16)(62,"div",17),Q(63," \xA9 ARte. Dise\xF1ado y desarrollado por el grupo "),L(64,"a",18),Q(65,"WithU"),O(),Q(66," | "),L(67,"a",19),Q(68,"Pol\xEDtica de Privacidad y Cookies"),O()(),L(69,"div",20)(70,"a",21),ce(71,"i",22),O(),L(72,"a",23),ce(73,"i",24),O()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Noto+Sans+Khojki&display=swap";body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:calc(100% - 53px);margin:0;padding:0}.card[_ngcontent-%COMP%]{background-color:#3d4148;box-shadow:0 2px 2px #000c;margin:0 auto}.card-body[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.container[_ngcontent-%COMP%]{width:900px}.main-container[_ngcontent-%COMP%]{background-color:#1f262d;min-height:calc(100dvh - 53px)}.contenedor[_ngcontent-%COMP%]{min-height:calc(100dvh - 105px)}.footer[_ngcontent-%COMP%]{height:51px;width:100%;background-color:#2a2e33;color:#f2efe8}.que-es-arte-section[_ngcontent-%COMP%]{color:#fff;margin:0}.titulo[_ngcontent-%COMP%]{font-family:Cinzel,serif;font-size:2.4rem;line-height:1.3;border-bottom:1px solid #A1AAB2;margin-bottom:20px}.titulo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}.titulo2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.texto[_ngcontent-%COMP%]{font-size:15px}.texto[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5}.highlight[_ngcontent-%COMP%]{font-weight:700;color:#f2efe8}.btn-custom[_ngcontent-%COMP%]{background:linear-gradient(60deg,#845a3c,#a77552);color:#fff;box-shadow:0 1px 1px #0006;border-radius:.5rem;padding:8px;font-size:15px}.card-container[_ngcontent-%COMP%]{margin-left:180px;margin-right:180px;color:#f2efe8}.saber-mas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.saber-mas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:5px}.flecha-abajo[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid black}.navbar[_ngcontent-%COMP%]{background-color:#2a2e33}.navbar-collapse[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:20px;font-size:15px}.navbar-collapse[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#f2efe8}.formulario[_ngcontent-%COMP%]{height:50%}.descripcion[_ngcontent-%COMP%]{height:40%;color:#f2efe8;font-size:16px;padding-right:25px}.carousel[_ngcontent-%COMP%]{border:1px solid black}a[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]{color:#a1aab2}.footer[_ngcontent-%COMP%]{position:relative;background-color:#2a2e33;color:#f2efe8;padding:10px 0;display:flex;justify-content:center;align-items:center}.footer-content[_ngcontent-%COMP%]{text-align:center}.redes-sociales[_ngcontent-%COMP%]{position:absolute;right:40px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2efe8;margin-left:10px}.redes-sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#a1aab2}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.que-es-arte-section[_ngcontent-%COMP%]{margin-bottom:20px}.descripcion[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:100%}.card-body[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.col-md-5[_ngcontent-%COMP%]{border-right:none!important}}']});let i=e;return i})();var B8e=[{path:"",component:fce},{path:"contacto",component:Ace},{path:"conocenos",component:mce},{path:"politica-de-privacidad",component:gce},{path:"**",redirectTo:"landing"}],vce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[Ia.forRoot(B8e),XH,_se,dce,pce,Ia]});let i=e;return i})();var yce=(()=>{let e=class e{constructor(){this.title="cfrontend"}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=St({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[["id","main-wrapper"]],template:function(n,a){n&1&&(L(0,"div",0),ce(1,"router-outlet"),O())},dependencies:[rd]});let i=e;return i})();var xce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[lr,Ia,Lp]});let i=e;return i})();var Zz;try{Zz=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Zz=!1}var Xw=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?Yb(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Zz)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(n){return new(n||e)(Nt(mu))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Kw;function D8e(){if(Kw==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kw=!0}))}finally{Kw=Kw||!1}return Kw}function Jz(i){return D8e()?i:!!i.capture}function _ce(i){return i.composedPath?i.composedPath()[0]:i.target}function wce(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function $z(i){return Array.isArray(i)?i:[i]}function e8(i){return i instanceof Ko?i.nativeElement:i}var Sce=new Set,gg,R8e=(()=>{let e=class e{constructor(r,n){this._platform=r,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):L8e}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&P8e(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(n){return new(n||e)(Nt(Xw),Nt(Y1,8))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function P8e(i,e){if(!Sce.has(i))try{gg||(gg=document.createElement("style"),e&&(gg.nonce=e),gg.setAttribute("type","text/css"),document.head.appendChild(gg)),gg.sheet&&(gg.sheet.insertRule(`@media ${i} {body{ }}`,0),Sce.add(i))}catch(t){console.error(t)}}function L8e(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var Ece=(()=>{let e=class e{constructor(r,n){this._mediaMatcher=r,this._zone=n,this._queries=new Map,this._destroySubject=new rh}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return Cce($z(r)).some(a=>this._registerQuery(a).mql.matches)}observe(r){let a=Cce($z(r)).map(s=>this._registerQuery(s).observable),o=Rg(a);return o=Lb(o.pipe(Au(1)),o.pipe(j1(1),gV(0))),o.pipe(qr(s=>{let l={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let n=this._mediaMatcher.matchMedia(r),o={observable:new Rb(s=>{let l=c=>this._zone.run(()=>s.next(c));return n.addListener(l),()=>{n.removeListener(l)}}).pipe(Ob(n),qr(({matches:s})=>({query:r,matches:s})),Fb(this._destroySubject)),mql:n};return this._queries.set(r,o),o}};e.\u0275fac=function(n){return new(n||e)(Nt(R8e),Nt(fa))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Cce(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Ice(i){return i.buttons===0||i.detail===0}function Bce(i){let e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var vg=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(vg||{}),Tce="cdk-high-contrast-black-on-white",Mce="cdk-high-contrast-white-on-black",t8="cdk-high-contrast-active",Dce=(()=>{let e=class e{constructor(r,n){this._platform=r,this._document=n,this._breakpointSubscription=Vi(Ece).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return vg.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let n=this._document.defaultView||window,a=n&&n.getComputedStyle?n.getComputedStyle(r):null,o=(a&&a.backgroundColor||"").replace(/ /g,"");switch(r.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return vg.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return vg.BLACK_ON_WHITE}return vg.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(t8,Tce,Mce),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===vg.BLACK_ON_WHITE?r.add(t8,Tce):n===vg.WHITE_ON_BLACK&&r.add(t8,Mce)}}};e.\u0275fac=function(n){return new(n||e)(Nt(Xw),Nt(_a))},e.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var i8=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({});let i=e;return i})();function U8e(){return!0}var k8e=new Zr("mat-sanity-checks",{providedIn:"root",factory:U8e}),qw=(()=>{let e=class e{constructor(r,n,a){this._sanityChecks=n,this._document=a,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return wce()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(n){return new(n||e)(Nt(Dce),Nt(k8e,8),Nt(_a))},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[i8,i8]});let i=e;return i})();var cu=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(cu||{}),r8=class{constructor(e,t,r,n=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=n,this.state=cu.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Rce=Jz({passive:!0,capture:!0}),n8=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=_ce(e);t&&this._events.get(e.type)?.forEach((r,n)=>{(n===t||n.contains(t))&&r.forEach(a=>a.handleEvent(e))})}}addHandler(e,t,r,n){let a=this._events.get(t);if(a){let o=a.get(r);o?o.add(n):a.set(r,new Set([n]))}else this._events.set(t,new Map([[r,new Set([n])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Rce)})}removeHandler(e,t,r){let n=this._events.get(e);if(!n)return;let a=n.get(t);a&&(a.delete(r),a.size===0&&n.delete(t),n.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Rce)))}},Pce={enterDuration:225,exitDuration:150},z8e=800,Lce=Jz({passive:!0,capture:!0}),Oce=["mousedown","touchstart"],Fce=["mouseup","mouseleave","touchend","touchcancel"],Yw=class Yw{constructor(e,t,r,n){this._target=e,this._ngZone=t,this._platform=n,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=e8(r))}fadeInRipple(e,t,r={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=hi(hi({},Pce),r.animation);r.centered&&(e=n.left+n.width/2,t=n.top+n.height/2);let o=r.radius||V8e(e,t,n),s=e-n.left,l=t-n.top,c=a.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${s-o}px`,u.style.top=`${l-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let h=window.getComputedStyle(u),d=h.transitionProperty,f=h.transitionDuration,m=d==="none"||f==="0s"||f==="0s, 0s"||n.width===0&&n.height===0,y=new r8(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",y.state=cu.FADING_IN,r.persistent||(this._mostRecentTransientRipple=y);let g=null;return!m&&(c||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let x=()=>this._finishRippleTransition(y),b=()=>this._destroyRipple(y);u.addEventListener("transitionend",x),u.addEventListener("transitioncancel",b),g={onTransitionEnd:x,onTransitionCancel:b}}),this._activeRipples.set(y,g),(m||!c)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===cu.FADING_OUT||e.state===cu.HIDDEN)return;let t=e.element,r=hi(hi({},Pce),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=cu.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=e8(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Oce.forEach(r=>{Yw._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Fce.forEach(t=>{this._triggerElement.addEventListener(t,this,Lce)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===cu.FADING_IN?this._startFadeOutTransition(e):e.state===cu.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=cu.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=cu.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=Ice(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+z8e;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Bce(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===cu.VISIBLE||e.config.terminateOnPointerUp&&e.state===cu.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Oce.forEach(t=>Yw._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Fce.forEach(t=>e.removeEventListener(t,this,Lce)))}};Yw._eventManager=new n8;var Nce=Yw;function V8e(i,e,t){let r=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),n=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+n*n)}var Uce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[qw,qw]});let i=e;return i})();var kce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[qw,Uce,qw]});let i=e;return i})();var zce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ii({token:i,factory:i.\u0275fac}),i})();var Vce=(()=>{class i{static forRoot(t={}){return{ngModule:i,providers:[{provide:zce,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=sr({type:i}),i.\u0275inj=or({providers:[zce],imports:[lr]}),i})();var Hce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e}),e.\u0275inj=or({imports:[lr,Ia,Wr,kce,Vce,aS,Lp]});let i=e;return i})();var H8e="@",a8=class{constructor(e,t,r,n,a){this.doc=e,this.delegate=t,this.zone=r,this.animationType=n,this.moduleImpl=a,this._rendererFactoryPromise=null}loadImpl(){return(this.moduleImpl??import("./chunk-AJQ6TZAD.js")).catch(t=>{throw new Sn(5300,!1)}).then(({\u0275createEngine:t,\u0275AnimationRendererFactory:r})=>{let n=t(this.animationType,this.doc),a=new r(this.delegate,n,this.zone);return this.delegate=a,a})}createRenderer(e,t){let r=this.delegate.createRenderer(e,t);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let n=new o8(r);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let o=a.createRenderer(e,t);n.use(o)}).catch(a=>{n.use(r)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}},o8=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,n){this.delegate.insertBefore(e,t,r,n)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,n){this.delegate.setAttribute(e,t,r,n)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,n){this.delegate.setStyle(e,t,r,n)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(H8e)}};function Qce(i="animations"){return Lg([{provide:Nb,useFactory:(e,t,r)=>new a8(e,t,r,i),deps:[_a,rS,fa]},{provide:gD,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}w6().subscribe();var Gce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=sr({type:e,bootstrap:[yce]}),e.\u0275inj=or({providers:[Kn,Qce()],imports:[A6,vce,KH,Hce,xce,s6,Ia,sl,aS]});let i=e;return i})();Fi.production&&void 0;p6().bootstrapModule(Gce).catch(i=>console.error(i));
