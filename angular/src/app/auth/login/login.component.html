<div id="loginform">
    <div class="text-center p-t-20 p-b-20">
        <span class="db"><img src="../../assets/images/logos/logo_arte.png" width="180px" alt="logo" /></span>
    </div>
    <!-- Form -->
    <form class="form-horizontal m-t-20" id="loginform" (submit)="login($event)">
        <div class="row p-b-30">
            <div class="col-12">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text bg-secondary text-white" id="basic-addon1"><i
                                class="ti-user"></i></span>
                    </div>
                    <input type="text" class="form-control form-control-lg" placeholder="Usuario" aria-label="Username"
                        aria-describedby="basic-addon1" required [formControl]="nombre">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text bg-warning text-white" id="basic-addon2"><i
                                class="ti-pencil"></i></span>
                    </div>
                    <input type="password" class="form-control form-control-lg" placeholder="Contraseña"
                        aria-label="Password" aria-describedby="basic-addon1" required [formControl]="contrasenya">
                </div>
            </div>
        </div>
        <div class="row border-top border-secondary">
            <div class="col-12">
                <div class="form-group">
                    <div class="p-t-20">
                        <div>
                            <div id="g_id_onload"
                                data-client_id="228816553901-3benjbidk25uj07mc9n2oeo1acrnrko2.apps.googleusercontent.com"
                                data-context="signin" data-ux_mode="popup" data-callback="handleOauthResponse"
                                data-auto_prompt="false">
                            </div>

                            <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline"
                                data-text="signin_with" data-size="large" data-logo_alignment="left">
                            </div>
                        </div>
                        <button class="btn btn-success" type="submit">Iniciar sesión</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<footer></footer>

<script>
    function decodeJWTToken(token) {
        return JSON.parse(atob(token.split(".")[1]))
    }
    function handleOauthResponse(response) {
        console.log('handleOauthResponse...')
        const responsePayload = decodeJWTToken(response.credential)
        console.log(responsePayload)
        sessionStorage.setItem('loggedinUser', JSON.stringify(responsePayload))
        window.location('/your-desired-place')
        //Changed the above URL where you want user to be redirected
    }
</script>